define ("core/showhidesettings",["jquery"],function(a){var o;function b(a){return a.is("input[type=hidden]")&&a.siblings("input[type=checkbox][name=\""+a.attr("name")+"\"]").length}function c(a,b){return a.is("input[type=radio]")&&a.attr("value")!==b}function d(a,d){return!b(a)&&!c(a,d)}function e(a){return a.is("input[type=radio]")&&!a.prop("checked")}function f(a){return a.is("input[type=checkbox]")&&!a.prop("checked")}function g(a){return a.is("select")&&a.prop("multiple")}function h(a,b){var c=a.val()||[];if(!b.length){return!1}if(c.length!==b.length){return!1}for(var d in c){if(c.hasOwnProperty(d)){if(-1===b.indexOf(c[d])){return!1}}}return!0}var p={notchecked:function notchecked(b,c){var e=!1;c=c+"";b.each(function(b,f){var g=a(f);if(d(g,c)){e=e||!g.prop("checked")}});return e},checked:function checked(b,c){var e=!1;c=c+"";b.each(function(b,f){var g=a(f);if(d(g,c)){e=e||g.prop("checked")}});return e},noitemselected:function noitemselected(b){var c=!1;b.each(function(b,d){var e=a(d);c=c||-1===e.prop("selectedIndex")});return c},eq:function eq(c,d){var i=!1,j=!1;d=d+"";c.each(function(c,k){var l=a(k);if(e(l)){return}if(b(l)){j=l.val()===d;return}if(f(l)){i=i||j;return}if(g(l)){var m=d.split("|");i=h(l,m);return}i=i||l.val()===d});return i},in:function _in(c,d){var i=!1,j=!1,k=d.split("|");c.each(function(c,d){var l=a(d);if(e(l)){return}if(b(l)){j=-1<k.indexOf(l.val());return}if(f(l)){i=i||j;return}if(g(l)){i=h(l,k);return}i=i||-1<k.indexOf(l.val())});return i},defaultCondition:function defaultCondition(c,d){var i=!1,j=!1;d=d+"";c.each(function(c,k){var l=a(k);if(e(l)){return}if(b(l)){j=l.val()!==d;return}if(f(l)){i=i||j;return}if(g(l)){var m=d.split("|");i=!h(l,m);return}i=i||l.val()!==d});return i}};function i(b){return a("[name=\""+b+"\"],[name=\""+b+"[]\"]")}function j(b){return a(b).attr("name").replace(/\[]/,"")}function k(a,b,c){if("function"==typeof p[b]){return p[b](a,c)}return p.defaultCondition(a,c)}function l(b,c){c=c||j(b.currentTarget);var d=i(c);if(!o.hasOwnProperty(c)){return}var e={};a.each(o[c],function(b,c){a.each(c,function(c,f){var g=k(d,b,c);a.each(f,function(a,b){if(e.hasOwnProperty(b)){e[b]=e[b]||g}else{e[b]=g}})})});a.each(e,function(b,c){i(b).each(function(b,d){var e=a(d).closest(".form-item");if(e.length){if(c){e.hide()}else{e.show()}}})})}function m(){a.each(o,function(a){var b=i(a);if(b.length){b.on("change",l);l(null,a)}})}function n(){a(".form-dependenton").hide()}return{init:function init(a){o=a.dependencies;m();n()}}});
define ("core/form-course-selector",["core/ajax","jquery"],function(a,b){return{processResults:function processResults(a,c){var d=[],e=0,f=(b(a).data("exclude")+"").split(",");for(e=0;e<c.courses.length;e++){if(-1===f.indexOf(c.courses[e].id+"")){d.push({value:c.courses[e].id,label:c.courses[e].displayname})}}return d},transport:function transport(c,d,e,f){var g=b(c),h=g.data("requiredcapabilities");if(""!==h.trim()){h=h.split(",")}else{h=[]}var i=g.data("limittoenrolled"),j=g.data("includefrontpage"),k=g.data("onlywithcompletion"),l=null;if("undefined"==typeof d){d=""}var m={criterianame:"search",criteriavalue:d,page:0,perpage:100,requiredcapabilities:h,limittoenrolled:i,onlywithcompletion:k},n=[{methodname:"core_course_search_courses",args:m}];if(j){n.push({methodname:"core_course_get_courses",args:{options:{ids:[j]}}})}l=a.call(n);b.when.apply(b.when,l).done(function(a,b){if(b&&1==b.length){var c=b.pop(),f=""===d||-1<c.fullname.toUpperCase().indexOf(d.toUpperCase())||-1<c.shortname.toUpperCase().indexOf(d.toUpperCase());if(f){a.courses.splice(0,0,c)}}e(a)}).fail(f)}}});
define ("core/event",["jquery","core/yui"],function(a,b){return{Events:{FORM_FIELD_VALIDATION:"core_form-field-validation"},getLegacyEvents:function getLegacyEvents(){var c=a.Deferred();b.use("event","moodle-core-event",function(){c.resolve(window.M.core.event)});return c.promise()},notifyFilterContentUpdated:function notifyFilterContentUpdated(c){c=a(c);b.use("event","moodle-core-event",function(b){a(document).trigger(M.core.event.FILTER_CONTENT_UPDATED,[c]);var d=new b.NodeList(c.get());b.fire(M.core.event.FILTER_CONTENT_UPDATED,{nodes:d})})},notifyFormSubmitAjax:function notifyFormSubmitAjax(c,d){d=d||!1;b.use("event","moodle-core-event",function(b){if(d){window.skipClientValidation=!0}a(c).trigger(M.core.event.FORM_SUBMIT_AJAX);b.one(c).fire(M.core.event.FORM_SUBMIT_AJAX,{currentTarget:b.one(c)});if(d){window.skipClientValidation=!1}})},notifyEditorContentRestored:function notifyEditorContentRestored(){b.use("event","moodle-core-event",function(b){a(document).trigger(M.core.event.EDITOR_CONTENT_RESTORED);b.fire(M.core.event.EDITOR_CONTENT_RESTORED)})}}});
define ("core/ajax",["jquery","core/config","core/log","core/url"],function(a,b,c,d){var e=!1,f=function(a){var b=this,c=null,e=0,f,g,h;if(a.error){for(;e<b.length;e++){f=b[e];f.deferred.reject(a)}return}for(e=0;e<b.length;e++){f=b[e];g=a[e];if("undefined"!=typeof g){if(!1===g.error){f.deferred.resolve(g.data)}else{c=g.exception;h=b[e].nosessionupdate;break}}else{c=new Error("missing response");break}}if(null!==c){if("servicerequireslogin"===c.errorcode&&!h){window.location=d.relativeUrl("/login/index.php")}else{b.forEach(function(a){a.deferred.reject(c)})}}},g=function(a,b,d){var f=this,g=0;for(g=0;g<f.length;g++){var h=f[g];if(e){c.error("Page unloaded.");c.error(d)}else{h.deferred.reject(d)}}};return{call:function call(c,d,h,j,k,l){a(window).bind("beforeunload",function(){e=!0});var m=[],n,o=[],p=[],q="";if("undefined"==typeof h){h=!0}if("undefined"==typeof d){d=!0}if("undefined"==typeof k){k=0}if("undefined"==typeof l){l=null}else{l=parseInt(l);if(0>=l){l=null}else if(!l){l=null}}if("undefined"==typeof j){j=!1}for(n=0;n<c.length;n++){var r=c[n];m.push({index:n,methodname:r.methodname,args:r.args});r.nosessionupdate=j;r.deferred=a.Deferred();o.push(r.deferred.promise());if("undefined"!=typeof r.done){r.deferred.done(r.done)}if("undefined"!=typeof r.fail){r.deferred.fail(r.fail)}r.index=n;p.push(r.methodname)}if(5>=p.length){q=p.sort().join()}else{q=p.length+"-method-calls"}m=JSON.stringify(m);var s={type:"POST",context:c,dataType:"json",processData:!1,async:d,contentType:"application/json",timeout:k},t="service.php",u=b.wwwroot+"/lib/ajax/";if(!h){t="service-nologin.php";u+=t+"?info="+q;if(l){u+="&cachekey="+l;s.type="GET"}}else{u+=t+"?sesskey="+b.sesskey+"&info="+q}if(j){u+="&nosessionupdate=true"}if("POST"===s.type){s.data=m}else{var v=u+"&args="+encodeURIComponent(m);if(v.length>2e3){s.type="POST";s.data=m}else{u=v}}if(d){a.ajax(u,s).done(f).fail(g)}else{s.success=f;s.error=g;a.ajax(u,s)}return o}}});
define ("core/drawer_events",["exports"],function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;a.default={DRAWER_SHOWN:"drawer-shown",DRAWER_HIDDEN:"drawer-hidden"};return a.default});
define ("core/modal_registry",["core/notification"],function(a){var b={},c=function(a){return b[a]};return{register:function register(d,e,f){if(c(d)){a.exception({message:"Modal of  type '"+d+"' is already registered"})}if(!e||"function"!=typeof e){a.exception({message:"You must provide a modal module"})}if(!f){a.exception({message:"You must provide a modal template"})}b[d]={module:e,template:f}},get:c}});
define ("core/network",["jquery","core/ajax","core/config","core/notification","core/str"],function(a,b,c,d,e){var f=!1,g=!1,h=0,i=0,j=!1,k=!1,l=1e3*Math.min(c.sessiontimeout/10,600),m=function(){k=!0},n=function(){if(k){return e.get_strings([{key:"sessionexpired",component:"error"},{key:"sessionerroruser",component:"error"}]).then(function(a){d.alert(a[0],a[1]);return!0}).fail(d.exception)}else{return b.call([{methodname:"core_session_touch",args:{}}],!0,!0,!1,i)[0].then(function(){if(0<h){setTimeout(n,h)}return!0}).fail(function(){d.alert("",j)})}},o=function(){k=!1;return b.call([{methodname:"core_session_time_remaining",args:{}}],!0,!0,!0)[0].then(function(a){if(0>=a.userid){return!1}if(0>a.timeremaining){e.get_strings([{key:"sessionexpired",component:"error"},{key:"sessionerroruser",component:"error"}]).then(function(a){d.alert(a[0],a[1]);return!0}).fail(d.exception)}else if(1e3*a.timeremaining<2*l&&!g){setTimeout(m,1e3*a.timeremaining);g=!0;e.get_strings([{key:"norecentactivity",component:"moodle"},{key:"sessiontimeoutsoon",component:"moodle"},{key:"extendsession",component:"moodle"},{key:"cancel",component:"moodle"}]).then(function(a){d.confirm(a[0],a[1],a[2],a[3],function(){n();g=!1;setTimeout(o,5*l);return!0},function(){g=!1;setTimeout(o,l)});return!0}).fail(d.exception)}else{setTimeout(o,l)}return!0})},p=function(){if(0<h){setTimeout(n,h)}else{setTimeout(o,5*l)}},q=function(){if(f){return}f=!0;p()},r=function(a,b,c){if(f){return}f=!0;h=1e3*a;j=c;i=1e3*b;p()};return{keepalive:r,init:q}});
define ("core/chart_axis",[],function(){function a(){}a.prototype.POS_DEFAULT=null;a.prototype.POS_BOTTOM="bottom";a.prototype.POS_LEFT="left";a.prototype.POS_RIGHT="right";a.prototype.POS_TOP="top";a.prototype._label=null;a.prototype._labels=null;a.prototype._max=null;a.prototype._min=null;a.prototype._position=null;a.prototype._stepSize=null;a.prototype.create=function(b){var c=new a;c.setPosition(b.position);c.setLabel(b.label);c.setStepSize(b.stepSize);c.setMax(b.max);c.setMin(b.min);c.setLabels(b.labels);return c};a.prototype.getLabel=function(){return this._label};a.prototype.getLabels=function(){return this._labels};a.prototype.getMax=function(){return this._max};a.prototype.getMin=function(){return this._min};a.prototype.getPosition=function(){return this._position};a.prototype.getStepSize=function(){return this._stepSize};a.prototype.setLabel=function(a){this._label=a||null};a.prototype.setLabels=function(a){this._labels=a||null;if(null!==this._labels&&null===this._stepSize&&(null===this._min||0===this._min)&&null===this._max){this.setStepSize(1);this.setMin(0);this.setMax(a.length-1)}};a.prototype.setMax=function(a){this._max="undefined"!=typeof a?a:null};a.prototype.setMin=function(a){this._min="undefined"!=typeof a?a:null};a.prototype.setPosition=function(a){if(a!=this.POS_DEFAULT&&a!=this.POS_BOTTOM&&a!=this.POS_LEFT&&a!=this.POS_RIGHT&&a!=this.POS_TOP){throw new Error("Invalid axis position.")}this._position=a};a.prototype.setStepSize=function(a){if("undefined"==typeof a||null===a){a=null}else if(isNaN(+a)){throw new Error("Value for stepSize is not a number.")}else{a=+a}this._stepSize=a};return a});
define ("core/paged_content_factory",["jquery","core/templates","core/notification","core/paged_content","core/paged_content_events","core/pubsub","core/ajax"],function(a,b,c,d,e,f,g){var h={PAGED_CONTENT:"core/paged_content"},j={ITEMS_PER_PAGE_SINGLE:25,ITEMS_PER_PAGE_ARRAY:[25,50,100,0],MAX_PAGES:3},k=function(){return{pagingbar:!1,pagingdropdown:!1,skipjs:!0,ignorecontrolwhileloading:!0,controlplacementbottom:!1}},l=function(){return{showitemsperpageselector:!1,itemsperpage:35,previous:!0,next:!0,activepagenumber:1,hidecontrolonsinglepage:!0,pages:[]}},m=function(a,b){var c=1;if(0<a){var d=a%b;if(d){a-=d;c=a/b+1}else{c=a/b}}return c},n=function(b,c){if(null===c){c=j.ITEMS_PER_PAGE_SINGLE}if(a.isArray(c)){c=c[0]}var d=l();d.itemsperpage=c;for(var e=m(b,c),f=1,g;f<=e;f++){g={number:f,page:""+f};if(1==f){g.active=!0}d.pages.push(g)}d.barsize=10;return d},o=function(b){if(a.isArray(b)){var c=b.map(function(a){if("number"==typeof a){return{value:a,active:!1}}else{return a}}),d=c.filter(function(a){return a.active});if(!d.length){c[0].active=!0}return c}else{return b}},p=function(b){if(null===b){b=j.ITEMS_PER_PAGE_ARRAY}var c=l();c.itemsperpage=o(b);c.showitemsperpageselector=a.isArray(b)&&1<b.length;return c},q=function(a,b){if(a){return n(a,b)}else{return p(b)}},r=function(b,c){if(null===b){b=j.ITEMS_PER_PAGE_SINGLE}if(a.isArray(b)){return{options:b}}var d={options:[]},e=0,f=0,g=j.MAX_PAGES;if(c.hasOwnProperty("maxPages")){g=c.maxPages}for(var h=1,k;h<=g;h++){k=0;if(2>=h){k=b;f=b}else{f=2*f;k=f}e+=k;var l={itemcount:k,content:e};if(1==h){l.active=!0}d.options.push(l)}return d},s=function(a,b,c){var d=k();if(c.hasOwnProperty("ignoreControlWhileLoading")){d.ignorecontrolwhileloading=c.ignoreControlWhileLoading}if(c.hasOwnProperty("controlPlacementBottom")){d.controlplacementbottom=c.controlPlacementBottom}if(c.hasOwnProperty("hideControlOnSinglePage")){d.hidecontrolonsinglepage=c.hideControlOnSinglePage}if(c.hasOwnProperty("ariaLabels")){d.arialabels=c.ariaLabels}if(c.hasOwnProperty("dropdown")&&c.dropdown){d.pagingdropdown=r(b,c)}else{d.pagingbar=q(a,b)}return d},t=function(e,f,g,i){i=i||{};var j=a.Deferred(),k=s(e,f,i);b.render(h.PAGED_CONTENT,k).then(function(b,c){b=a(b);var e=b.attr("id");if(i.hasOwnProperty("eventNamespace")){e=i.eventNamespace}var f=b;d.init(f,g,e);v(e,i);j.resolve(b,c)}).fail(function(a){j.reject(a)}).fail(c.exception);return j.promise()},u=function(a){return function callback(b){g.call([{methodname:"core_user_update_user_preferences",args:{preferences:[{type:a,value:b}]}}])}},v=function(a,b){if(b.hasOwnProperty("persistentLimitKey")){f.subscribe(a+e.SET_ITEMS_PER_PAGE_LIMIT,u(b.persistentLimitKey))}};return{create:function create(a,b){return t(null,null,a,b)},createWithLimit:function createWithLimit(a,b,c){return t(null,a,b,c)},createWithTotalAndLimit:t,createFromStaticList:function createFromStaticList(a,b,c,d){if("undefined"==typeof d){d={}}var e=a.length;return t(e,b,function(b){var d=[];b.forEach(function(b){var c=b.offset,f=b.limit?c+b.limit:e,g=a.slice(c,f);d.push(g)});return c(d)},d)},createFromAjax:t,resetLastPageNumber:function resetLastPageNumber(a,b){f.publish(a+e.ALL_ITEMS_LOADED,b)}}});
function _typeof(e){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(e){return typeof e}}else{_typeof=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return _typeof(e)}(function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define ("core/popper",t):e.Popper=t()})(this,function(){'use strict';for(var _="undefined"!=typeof window&&"undefined"!=typeof window.document,X=["Edge","Trident","Firefox"],J=0,Q=0;Q<X.length;Q+=1){if(_&&0<=navigator.userAgent.indexOf(X[Q])){J=1;break}}var Z=_&&window.Promise,$=Z?function(e){var t=!1;return function(){if(t){return}t=!0;Promise.resolve().then(function(){t=!1;e()})}}:function(e){var t=!1;return function(){if(!t){t=!0;setTimeout(function(){t=!1;e()},J)}}};function e(e){return e&&"[object Function]"==={}.toString.call(e)}function t(e,t){if(1!==e.nodeType){return[]}var o=window.getComputedStyle(e,null);return t?o[t]:o}function o(e){if("HTML"===e.nodeName){return e}return e.parentNode||e.host}function n(e){if(!e){return window.document.body}switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body;}var i=t(e),r=i.overflow,p=i.overflowX,s=i.overflowY;if(/(auto|scroll)/.test(r+s+p)){return e}return n(o(e))}function r(e){var o=e&&e.offsetParent,i=o&&o.nodeName;if(!i||"BODY"===i||"HTML"===i){if(e){return e.ownerDocument.documentElement}return window.document.documentElement}if(-1!==["TD","TABLE"].indexOf(o.nodeName)&&"static"===t(o,"position")){return r(o)}return o}function p(e){var t=e.nodeName;if("BODY"===t){return!1}return"HTML"===t||r(e.firstElementChild)===e}function s(e){if(null!==e.parentNode){return s(e.parentNode)}return e}function d(e,t){if(!e||!e.nodeType||!t||!t.nodeType){return window.document.documentElement}var o=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,i=o?e:t,n=o?t:e,a=document.createRange();a.setStart(i,0);a.setEnd(n,0);var l=a.commonAncestorContainer;if(e!==l&&t!==l||i.contains(n)){if(p(l)){return l}return r(l)}var f=s(e);if(f.host){return d(f.host,t)}else{return d(e,s(t).host)}}function a(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"top",o="top"===t?"scrollTop":"scrollLeft",i=e.nodeName;if("BODY"===i||"HTML"===i){var n=e.ownerDocument.documentElement,r=e.ownerDocument.scrollingElement||n;return r[o]}return e[o]}function l(e,t){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!1,i=a(t,"top"),n=a(t,"left"),r=o?-1:1;e.top+=i*r;e.bottom+=i*r;e.left+=n*r;e.right+=n*r;return e}function f(e,t){var o="x"===t?"Left":"Top",i="Left"===o?"Right":"Bottom";return+e["border"+o+"Width"].split("px")[0]+ +e["border"+i+"Width"].split("px")[0]}var ee=void 0,te=function(){if(ee===void 0){ee=-1!==navigator.appVersion.indexOf("MSIE 10")}return ee};function m(e,t,o,i){return Math.max(t["offset"+e],t["scroll"+e],o["client"+e],o["offset"+e],o["scroll"+e],te()?o["offset"+e]+i["margin"+("Height"===e?"Top":"Left")]+i["margin"+("Height"===e?"Bottom":"Right")]:0)}function c(){var e=window.document.body,t=window.document.documentElement,o=te()&&window.getComputedStyle(t);return{height:m("Height",e,t,o),width:m("Width",e,t,o)}}var oe=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}},ie=function(){function e(e,t){for(var o=0,n;o<t.length;o++){n=t[o];n.enumerable=n.enumerable||!1;n.configurable=!0;if("value"in n)n.writable=!0;Object.defineProperty(e,n.key,n)}}return function(t,o,i){if(o)e(t.prototype,o);if(i)e(t,i);return t}}(),ne=function(e,t,o){if(t in e){Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0})}else{e[t]=o}return e},re=Object.assign||function(e){for(var t=1,o;t<arguments.length;t++){o=arguments[t];for(var n in o){if(Object.prototype.hasOwnProperty.call(o,n)){e[n]=o[n]}}}return e};function h(e){return re({},e,{right:e.left+e.width,bottom:e.top+e.height})}function u(e){var o={};if(te()){try{o=e.getBoundingClientRect();var i=a(e,"top"),n=a(e,"left");o.top+=i;o.left+=n;o.bottom+=i;o.right+=n}catch(e){}}else{o=e.getBoundingClientRect()}var r={left:o.left,top:o.top,width:o.right-o.left,height:o.bottom-o.top},p="HTML"===e.nodeName?c():{},s=p.width||e.clientWidth||r.right-r.left,d=p.height||e.clientHeight||r.bottom-r.top,l=e.offsetWidth-s,m=e.offsetHeight-d;if(l||m){var u=t(e);l-=f(u,"x");m-=f(u,"y");r.width-=l;r.height-=m}return h(r)}function g(e,o){var i=te(),r="HTML"===o.nodeName,p=u(e),s=u(o),d=n(e),a=t(o),f=+a.borderTopWidth.split("px")[0],m=+a.borderLeftWidth.split("px")[0],c=h({top:p.top-s.top-f,left:p.left-s.left-m,width:p.width,height:p.height});c.marginTop=0;c.marginLeft=0;if(!i&&r){var g=+a.marginTop.split("px")[0],b=+a.marginLeft.split("px")[0];c.top-=f-g;c.bottom-=f-g;c.left-=m-b;c.right-=m-b;c.marginTop=g;c.marginLeft=b}if(i?o.contains(d):o===d&&"BODY"!==d.nodeName){c=l(c,o)}return c}function b(e){var t=e.ownerDocument.documentElement,o=g(e,t),i=Math.max(t.clientWidth,window.innerWidth||0),n=Math.max(t.clientHeight,window.innerHeight||0),r=a(t),p=a(t,"left"),s={top:r-o.top+o.marginTop,left:p-o.left+o.marginLeft,width:i,height:n};return h(s)}function y(e){var i=e.nodeName;if("BODY"===i||"HTML"===i){return!1}if("fixed"===t(e,"position")){return!0}return y(o(e))}function w(e,t,i,r){var p={top:0,left:0},s=d(e,t);if("viewport"===r){p=b(s)}else{var a;if("scrollParent"===r){a=n(o(e));if("BODY"===a.nodeName){a=e.ownerDocument.documentElement}}else if("window"===r){a=e.ownerDocument.documentElement}else{a=r}var l=g(a,s);if("HTML"===a.nodeName&&!y(s)){var f=c(),m=f.height,h=f.width;p.top+=l.top-l.marginTop;p.bottom=m+l.top;p.left+=l.left-l.marginLeft;p.right=h+l.left}else{p=l}}p.left+=i;p.top+=i;p.right-=i;p.bottom-=i;return p}function E(e){var t=e.width,o=e.height;return t*o}function v(e,t,o,i,n){var r=5<arguments.length&&arguments[5]!==void 0?arguments[5]:0;if(-1===e.indexOf("auto")){return e}var p=w(o,i,r,n),s={top:{width:p.width,height:t.top-p.top},right:{width:p.right-t.right,height:p.height},bottom:{width:p.width,height:p.bottom-t.bottom},left:{width:t.left-p.left,height:p.height}},d=Object.keys(s).map(function(e){return re({key:e},s[e],{area:E(s[e])})}).sort(function(e,t){return t.area-e.area}),a=d.filter(function(e){var t=e.width,i=e.height;return t>=o.clientWidth&&i>=o.clientHeight}),l=0<a.length?a[0].key:d[0].key,f=e.split("-")[1];return l+(f?"-"+f:"")}function x(e,t,o){var i=d(t,o);return g(o,i)}function O(e){var t=window.getComputedStyle(e),o=parseFloat(t.marginTop)+parseFloat(t.marginBottom),i=parseFloat(t.marginLeft)+parseFloat(t.marginRight),n={width:e.offsetWidth+i,height:e.offsetHeight+o};return n}function L(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function S(e,t,o){o=o.split("-")[0];var i=O(e),n={width:i.width,height:i.height},r=-1!==["right","left"].indexOf(o),p=r?"top":"left",s=r?"left":"top",d=r?"height":"width",a=!r?"height":"width";n[p]=t[p]+t[d]/2-i[d]/2;if(o===s){n[s]=t[s]-i[a]}else{n[s]=t[L(s)]}return n}function T(e,t){if(Array.prototype.find){return e.find(t)}return e.filter(t)[0]}function C(e,t,o){if(Array.prototype.findIndex){return e.findIndex(function(e){return e[t]===o})}var i=T(e,function(e){return e[t]===o});return e.indexOf(i)}function D(t,o,i){var n=i===void 0?t:t.slice(0,C(t,"name",i));n.forEach(function(t){if(t["function"]){console.warn("`modifier.function` is deprecated, use `modifier.fn`!")}var i=t["function"]||t.fn;if(t.enabled&&e(i)){o.offsets.popper=h(o.offsets.popper);o.offsets.reference=h(o.offsets.reference);o=i(o,t)}});return o}function N(){if(this.state.isDestroyed){return}var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=x(this.state,this.popper,this.reference);e.placement=v(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding);e.originalPlacement=e.placement;e.offsets.popper=S(this.popper,e.offsets.reference,e.placement);e.offsets.popper.position="absolute";e=D(this.modifiers,e);if(!this.state.isCreated){this.state.isCreated=!0;this.options.onCreate(e)}else{this.options.onUpdate(e)}}function k(e,t){return e.some(function(e){var o=e.name,i=e.enabled;return i&&o===t})}function W(e){for(var t=[!1,"ms","Webkit","Moz","O"],o=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<t.length-1;n++){var r=t[n],p=r?""+r+o:e;if("undefined"!=typeof window.document.body.style[p]){return p}}return null}function P(){this.state.isDestroyed=!0;if(k(this.modifiers,"applyStyle")){this.popper.removeAttribute("x-placement");this.popper.style.left="";this.popper.style.position="";this.popper.style.top="";this.popper.style[W("transform")]=""}this.disableEventListeners();if(this.options.removeOnDestroy){this.popper.parentNode.removeChild(this.popper)}return this}function B(e){var t=e.ownerDocument;return t?t.defaultView:window}function H(e,t,o,i){var r="BODY"===e.nodeName,p=r?e.ownerDocument.defaultView:e;p.addEventListener(t,o,{passive:!0});if(!r){H(n(p.parentNode),t,o,i)}i.push(p)}function A(e,t,o,i){o.updateBound=i;B(e).addEventListener("resize",o.updateBound,{passive:!0});var r=n(e);H(r,"scroll",o.updateBound,o.scrollParents);o.scrollElement=r;o.eventsEnabled=!0;return o}function I(){if(!this.state.eventsEnabled){this.state=A(this.reference,this.options,this.state,this.scheduleUpdate)}}function M(e,t){B(e).removeEventListener("resize",t.updateBound);t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)});t.updateBound=null;t.scrollParents=[];t.scrollElement=null;t.eventsEnabled=!1;return t}function R(){if(this.state.eventsEnabled){window.cancelAnimationFrame(this.scheduleUpdate);this.state=M(this.reference,this.state)}}function U(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function Y(e,t){Object.keys(t).forEach(function(o){var i="";if(-1!==["width","height","top","right","bottom","left"].indexOf(o)&&U(t[o])){i="px"}e.style[o]=t[o]+i})}function F(e,t){Object.keys(t).forEach(function(o){var i=t[o];if(!1!==i){e.setAttribute(o,t[o])}else{e.removeAttribute(o)}})}function j(e,t,o){var i=T(e,function(e){var o=e.name;return o===t}),n=!!i&&e.some(function(e){return e.name===o&&e.enabled&&e.order<i.order});if(!n){var r="`"+t+"`";console.warn("`"+o+"`"+" modifier is required by "+r+" modifier in order to work, be sure to include it before "+r+"!")}return n}function K(e){if("end"===e){return"start"}else if("start"===e){return"end"}return e}var pe=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],se=pe.slice(3);function q(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!1,o=se.indexOf(e),i=se.slice(o+1).concat(se.slice(0,o));return t?i.reverse():i}var de={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function V(e,t,o,i){var n=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),r=+n[1],p=n[2];if(!r){return e}if(0===p.indexOf("%")){var s;switch(p){case"%p":s=o;break;case"%":case"%r":default:s=i;}var d=h(s);return d[t]/100*r}else if("vh"===p||"vw"===p){var a;if("vh"===p){a=Math.max(document.documentElement.clientHeight,window.innerHeight||0)}else{a=Math.max(document.documentElement.clientWidth,window.innerWidth||0)}return a/100*r}else{return r}}function z(e,t,o,i){var n=[0,0],r=-1!==["right","left"].indexOf(i),p=e.split(/(\+|\-)/).map(function(e){return e.trim()}),s=p.indexOf(T(p,function(e){return-1!==e.search(/,|\s/)}));if(p[s]&&-1===p[s].indexOf(",")){console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.")}var d=/\s*,\s*|\s+/,a=-1!==s?[p.slice(0,s).concat([p[s].split(d)[0]]),[p[s].split(d)[1]].concat(p.slice(s+1))]:[p];a=a.map(function(e,i){var n=(1===i?!r:r)?"height":"width",p=!1;return e.reduce(function(e,t){if(""===e[e.length-1]&&-1!==["+","-"].indexOf(t)){e[e.length-1]=t;p=!0;return e}else if(p){e[e.length-1]+=t;p=!1;return e}else{return e.concat(t)}},[]).map(function(e){return V(e,n,t,o)})});a.forEach(function(e,t){e.forEach(function(o,i){if(U(o)){n[t]+=o*("-"===e[i-1]?-1:1)}})});return n}function G(e,t){var o=t.offset,i=e.placement,n=e.offsets,r=n.popper,p=n.reference,s=i.split("-")[0],d=void 0;if(U(+o)){d=[+o,0]}else{d=z(o,r,p,s)}if("left"===s){r.top+=d[0];r.left-=d[1]}else if("right"===s){r.top+=d[0];r.left+=d[1]}else if("top"===s){r.left+=d[0];r.top-=d[1]}else if("bottom"===s){r.left+=d[0];r.top+=d[1]}e.popper=r;return e}var ae=function(){function t(o,i){var n=this,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};oe(this,t);this.scheduleUpdate=function(){return requestAnimationFrame(n.update)};this.update=$(this.update.bind(this));this.options=re({},t.Defaults,r);this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]};this.reference=o&&o.jquery?o[0]:o;this.popper=i&&i.jquery?i[0]:i;this.options.modifiers={};Object.keys(re({},t.Defaults.modifiers,r.modifiers)).forEach(function(e){n.options.modifiers[e]=re({},t.Defaults.modifiers[e]||{},r.modifiers?r.modifiers[e]:{})});this.modifiers=Object.keys(this.options.modifiers).map(function(e){return re({name:e},n.options.modifiers[e])}).sort(function(e,t){return e.order-t.order});this.modifiers.forEach(function(t){if(t.enabled&&e(t.onLoad)){t.onLoad(n.reference,n.popper,n.options,t,n.state)}});this.update();var p=this.options.eventsEnabled;if(p){this.enableEventListeners()}this.state.eventsEnabled=p}ie(t,[{key:"update",value:function(){return N.call(this)}},{key:"destroy",value:function(){return P.call(this)}},{key:"enableEventListeners",value:function(){return I.call(this)}},{key:"disableEventListeners",value:function(){return R.call(this)}}]);return t}();ae.Utils=("undefined"!=typeof window?window:global).PopperUtils;ae.placements=pe;ae.Defaults={placement:"bottom",eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,o=t.split("-")[0],i=t.split("-")[1];if(i){var n=e.offsets,r=n.reference,p=n.popper,s=-1!==["bottom","top"].indexOf(o),d=s?"left":"top",a=s?"width":"height",l={start:ne({},d,r[d]),end:ne({},d,r[d]+r[a]-p[a])};e.offsets.popper=re({},p,l[i])}return e}},offset:{order:200,enabled:!0,fn:G,offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var o=t.boundariesElement||r(e.instance.popper);if(e.instance.reference===o){o=r(o)}var i=w(e.instance.popper,e.instance.reference,t.padding,o);t.boundaries=i;var n=t.priority,p=e.offsets.popper,s={primary:function(e){var o=p[e];if(p[e]<i[e]&&!t.escapeWithReference){o=Math.max(p[e],i[e])}return ne({},e,o)},secondary:function(e){var o="right"===e?"left":"top",n=p[o];if(p[e]>i[e]&&!t.escapeWithReference){n=Math.min(p[o],i[e]-("right"===e?p.width:p.height))}return ne({},o,n)}};n.forEach(function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";p=re({},p,s[t](e))});e.offsets.popper=p;return e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,o=t.popper,i=t.reference,n=e.placement.split("-")[0],r=Math.floor,p=-1!==["top","bottom"].indexOf(n),s=p?"right":"bottom",d=p?"left":"top",a=p?"width":"height";if(o[s]<r(i[d])){e.offsets.popper[d]=r(i[d])-o[a]}if(o[d]>r(i[s])){e.offsets.popper[d]=r(i[s])}return e}},arrow:{order:500,enabled:!0,fn:function(e,o){if(!j(e.instance.modifiers,"arrow","keepTogether")){return e}var i=o.element;if("string"==typeof i){i=e.instance.popper.querySelector(i);if(!i){return e}}else{if(!e.instance.popper.contains(i)){console.warn("WARNING: `arrow.element` must be child of its popper element!");return e}}var n=e.placement.split("-")[0],r=e.offsets,p=r.popper,s=r.reference,d=-1!==["left","right"].indexOf(n),a=d?"height":"width",l=d?"Top":"Left",f=l.toLowerCase(),m=d?"left":"top",c=d?"bottom":"right",u=O(i)[a];if(s[c]-u<p[f]){e.offsets.popper[f]-=p[f]-(s[c]-u)}if(s[f]+u>p[c]){e.offsets.popper[f]+=s[f]+u-p[c]}var g=s[f]+s[a]/2-u/2,b=t(e.instance.popper,"margin"+l).replace("px",""),y=g-h(e.offsets.popper)[f]-b;y=Math.max(Math.min(p[a]-u,y),0);e.arrowElement=i;e.offsets.arrow={};e.offsets.arrow[f]=Math.round(y);e.offsets.arrow[m]="";return e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(k(e.instance.modifiers,"inner")){return e}if(e.flipped&&e.placement===e.originalPlacement){return e}var o=w(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement),i=e.placement.split("-")[0],n=L(i),r=e.placement.split("-")[1]||"",p=[];switch(t.behavior){case de.FLIP:p=[i,n];break;case de.CLOCKWISE:p=q(i);break;case de.COUNTERCLOCKWISE:p=q(i,!0);break;default:p=t.behavior;}p.forEach(function(s,d){if(i!==s||p.length===d+1){return e}i=e.placement.split("-")[0];n=L(i);var a=e.offsets.popper,l=e.offsets.reference,f=Math.floor,m="left"===i&&f(a.right)>f(l.left)||"right"===i&&f(a.left)<f(l.right)||"top"===i&&f(a.bottom)>f(l.top)||"bottom"===i&&f(a.top)<f(l.bottom),c=f(a.left)<f(o.left),h=f(a.right)>f(o.right),u=f(a.top)<f(o.top),g=f(a.bottom)>f(o.bottom),b="left"===i&&c||"right"===i&&h||"top"===i&&u||"bottom"===i&&g,y=-1!==["top","bottom"].indexOf(i),w=!!t.flipVariations&&(y&&"start"===r&&c||y&&"end"===r&&h||!y&&"start"===r&&u||!y&&"end"===r&&g);if(m||b||w){e.flipped=!0;if(m||b){i=p[d+1]}if(w){r=K(r)}e.placement=i+(r?"-"+r:"");e.offsets.popper=re({},e.offsets.popper,S(e.instance.popper,e.offsets.reference,e.placement));e=D(e.instance.modifiers,e,"flip")}});return e},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,o=t.split("-")[0],i=e.offsets,n=i.popper,r=i.reference,p=-1!==["left","right"].indexOf(o),s=-1===["top","left"].indexOf(o);n[p?"left":"top"]=r[o]-(s?n[p?"width":"height"]:0);e.placement=L(t);e.offsets.popper=h(n);return e}},hide:{order:800,enabled:!0,fn:function(e){if(!j(e.instance.modifiers,"hide","preventOverflow")){return e}var t=e.offsets.reference,o=T(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<o.top||t.left>o.right||t.top>o.bottom||t.right<o.left){if(!0===e.hide){return e}e.hide=!0;e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide){return e}e.hide=!1;e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var o=t.x,i=t.y,n=e.offsets.popper,p=T(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;if(p!==void 0){console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!")}var s=p!==void 0?p:t.gpuAcceleration,d=r(e.instance.popper),a=u(d),l={position:n.position},f={left:Math.floor(n.left),top:Math.floor(n.top),bottom:Math.floor(n.bottom),right:Math.floor(n.right)},m="bottom"===o?"top":"bottom",c="right"===i?"left":"right",h=W("transform"),g=void 0,b=void 0;if("bottom"===m){b=-a.height+f.bottom}else{b=f.top}if("right"===c){g=-a.width+f.right}else{g=f.left}if(s&&h){l[h]="translate3d("+g+"px, "+b+"px, 0)";l[m]=0;l[c]=0;l.willChange="transform"}else{var y="bottom"===m?-1:1,w="right"===c?-1:1;l[m]=b*y;l[c]=g*w;l.willChange=m+", "+c}var E={"x-placement":e.placement};e.attributes=re({},E,e.attributes);e.styles=re({},l,e.styles);e.arrowStyles=re({},e.offsets.arrow,e.arrowStyles);return e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){Y(e.instance.popper,e.styles);F(e.instance.popper,e.attributes);if(e.arrowElement&&Object.keys(e.arrowStyles).length){Y(e.arrowElement,e.arrowStyles)}return e},onLoad:function(e,t,o,i,n){var r=x(n,t,e),p=v(o.placement,r,t,e,o.modifiers.flip.boundariesElement,o.modifiers.flip.padding);t.setAttribute("x-placement",p);Y(t,{position:"absolute"});return o},gpuAcceleration:void 0}}};return ae});
define ("core/icon_system",["jquery"],function(a){var b=function(){};b.prototype.init=function(){return a.when(this)};b.prototype.renderIcon=function(){throw new Error("Abstract function not implemented.")};b.prototype.getTemplateName=function(){throw new Error("Abstract function not implemented.")};return b});
define ("core/form-cohort-selector",["core/ajax","jquery"],function(a,b){return{processResults:function processResults(a,c){var d=[],e=0,f=(b(a).data("exclude")+"").split(",");for(e=0;e<c.cohorts.length;e++){if(-1===f.indexOf(c.cohorts[e].id+"")){d.push({value:c.cohorts[e].id,label:c.cohorts[e].name})}}return d},transport:function transport(c,d,e,f){var g=b(c),h=null;if("undefined"==typeof d){d=""}var i=g.data("contextid"),j={query:d,includes:"parents",limitfrom:0,limitnum:100,context:{contextid:i}};h=a.call([{methodname:"core_cohort_search_cohorts",args:j}]);b.when.apply(b.when,h).done(function(a){e(a)}).fail(f)}}});
define ("core/notification",["core/yui","jquery","core/log","core/pending"],function(a,b,c,d){var e={types:{success:"core/notification_success",info:"core/notification_info",warning:"core/notification_warning",error:"core/notification_error"},fieldName:"user-notifications",fetchNotifications:function fetchNotifications(){var a=new d("core/notification:fetchNotifications");require(["core/ajax"],function(b){var c=b.call([{methodname:"core_fetch_notifications",args:{contextid:e.contextid}}]);c[0].then(e.addNotifications).always(a.resolve)})},addNotifications:function addNotifications(a){var c=new d("core/notification:addNotifications");if(!a){a=[]}b.each(a,function(a,b){e.renderNotification(b.template,b.variables)});c.resolve()},setupTargetRegion:function setupTargetRegion(){var a=b("#"+e.fieldName);if(a.length){return!1}var c=b("<span>").attr("id",e.fieldName);a=b("#region-main");if(a.length){return a.prepend(c)}a=b("[role=\"main\"]");if(a.length){return a.prepend(c)}a=b("body");return a.prepend(c)},addNotification:function addNotification(a){var c=new d("core/notification:addNotifications"),f=e.types.error;a=b.extend({closebutton:!0,announce:!0,type:"error"},a);if(a.template){f=a.template;delete a.template}else if(a.type){if("undefined"!=typeof e.types[a.type]){f=e.types[a.type]}delete a.type}c.resolve();return e.renderNotification(f,a)},renderNotification:function renderNotification(a,f){if("undefined"==typeof f.message||!f.message){c.debug("Notification received without content. Skipping.");return}var g=new d("core/notification:renderNotification");require(["core/templates"],function(c){c.render(a,f).then(function(a,d){b("#"+e.fieldName).prepend(a);c.runTemplateJS(d)}).then(g.resolve).catch(e.exception)})},alert:function alert(b,c,e){var f=new d("core/notification:alert");a.use("moodle-core-notification-alert",function(){var a=new M.core.alert({title:b,message:c,yesLabel:e});a.show();f.resolve()})},confirm:function confirm(b,c,e,f,g,h){var i=new d("core/notification:confirm");a.use("moodle-core-notification-confirm",function(){var a=new M.core.confirm({title:b,question:c,yesLabel:e,noLabel:f});a.on("complete-yes",function(){g()});if(h){a.on("complete-no",function(){h()})}a.show();i.resolve()})},exception:function exception(b){var c=new d("core/notification:addNotifications");if("undefined"==typeof b.stack){b.stack=""}if(b.debuginfo){b.stack+=b.debuginfo+"\n"}if(!b.backtrace&&b.stacktrace){b.backtrace=b.stacktrace}if(b.backtrace){b.stack+=b.backtrace;var e=b.backtrace.match(/line ([^ ]*) of/),f=b.backtrace.match(/ of ([^:]*): /);if(e&&e[1]){b.lineNumber=e[1]}if(f&&f[1]){b.fileName=f[1];if(30<b.fileName.length){b.fileName="..."+b.fileName.substr(b.fileName.length-27)}}}if("undefined"==typeof b.name&&b.errorcode){b.name=b.errorcode}a.use("moodle-core-notification-exception",function(){var a=new M.core.exception(b);a.show();c.resolve()})}};return{init:function init(a,b){e.contextid=a;e.setupTargetRegion();e.addNotifications(b);e.fetchNotifications()},fetchNotifications:e.fetchNotifications,addNotification:e.addNotification,alert:e.alert,confirm:e.confirm,exception:e.exception}});
define ("core/search-input",["jquery"],function(a){var b=null,c=function(a){if(b.hasClass("expanded")){e()}else{d(a)}},d=function(c){var d=a(document).width();if("keydown"===c.type&&13!==c.keyCode&&32!==c.keyCode){return}if(767>=d&&("click"===c.type||"keydown"===c.type)){f();return}else if(767>=d){return}if("keydown"===c.type){c.preventDefault()}b.addClass("expanded");b.find("form").addClass("expanded");b.find("input").focus()},e=function(){b.removeClass("expanded");b.find("form").removeClass("expanded")},f=function(){b.find("form").submit()};return{init:function init(d){b=a("#"+d);b.on("click mouseover keydown","div",c)}}});
define ("core/paged_content_paging_bar_limit_selector",["jquery","core/custom_interaction_events","core/paged_content_events","core/pubsub"],function(a,b,c,d){var f={ROOT:"[data-region=\"paging-control-limit-container\"]",LIMIT_OPTION:"[data-limit]",LIMIT_TOGGLE:"[data-action=\"limit-toggle\"]"};return{init:function init(e,g){e=a(e);b.define(e,[b.events.activate]);e.on(b.events.activate,f.LIMIT_OPTION,function(b,e){var h=a(b.target).closest(f.LIMIT_OPTION);if(h.hasClass("active")){return}var i=parseInt(h.attr("data-limit"),10);d.publish(g+c.SET_ITEMS_PER_PAGE_LIMIT,i);e.originalEvent.preventDefault()})},rootSelector:f.ROOT}});
define ("core/str",["exports","jquery","core/ajax","core/localstorage"],function(a,b,c,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.cache_strings=a.get_strings=a.get_string=void 0;b=e(b);c=e(c);d=e(d);function e(a){return a&&a.__esModule?a:{default:a}}function f(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);if("function"==typeof Object.getOwnPropertySymbols){d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))}d.forEach(function(b){g(a,b,c[b])})}return a}function g(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}var h=[];a.get_string=function get_string(a,b,c,d){return i([{key:a,component:b,param:c,lang:d}]).then(function(a){return a[0]})};var i=function(a){var e=[],i=(0,b.default)("html").attr("lang").replace(/-/g,"_"),j=function(a){var b=a.key,c=a.component,d=a.lang,e=void 0===d?i:d;return"core_str/".concat(b,"/").concat(c,"/").concat(e)},k=a.map(function(a){var b=j(a),c=a.component,k=a.key,l=a.param,m=a.lang,n=void 0===m?i:m,o=function(a){h[b]=a;return a};if(c in M.str&&k in M.str[c]){return o(new Promise(function(a){a(M.util.get_string(k,c,l,n))}))}var p=d.default.get(b);if(p){M.str[c]=f({},M.str[c],g({},k,p));return o(new Promise(function(a){a(M.util.get_string(k,c,l,n))}))}if(b in h){return o(h[b]).then(function(){return M.util.get_string(k,c,l,n)})}else{return o(new Promise(function(a,h){e.push({methodname:"core_get_string",args:{stringid:k,stringparams:[],component:c,lang:n},done:function done(e){M.str[c]=f({},M.str[c],g({},k,e));d.default.set(b,e);a(M.util.get_string(k,c,l,n))},fail:h})}))}});if(e.length){c.default.call(e,!0,!1,!1,0,M.cfg.langrev)}return b.default.when.apply(b.default,k).then(function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++){b[c]=arguments[c]}return b})};a.get_strings=i;var j=function(a){var c=(0,b.default)("html").attr("lang").replace(/-/g,"_");a.forEach(function(a){var e=a.key,f=a.component,g=a.value,i=a.lang,j=void 0===i?c:i,k=["core_str",e,f,j].join("/");if(!(f in M.str)||!(e in M.str[f])){if(!(f in M.str)){M.str[f]={}}M.str[f][e]=g}if(!d.default.get(k)){d.default.set(k,g)}if(!(k in h)){h[k]=b.default.Deferred().resolve(g).promise()}})};a.cache_strings=j});
define ("core/local/aria/focuslock",["exports"],function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.untrapFocus=a.trapFocus=void 0;var b={focusable:"input:not([type=\"hidden\"]), a[href], button, textarea, select, [tabindex]"},c=[],d=[],e=[],f=null,g=!1,h=!1,i=function(a){if(g){return}var b=n();if(!b.parentNode){s()}if(b.contains(a.target)){f=a.target}else{j();if(f==document.activeElement){k()}f=document.activeElement}},j=function(){var a=n(),c=Array.from(a.querySelectorAll(b.focusable));c.unshift(a);return c.some(function(a){return m(a)})},k=function(){var a=n(),c=Array.from(a.querySelectorAll(b.focusable)).reverse();c.push(a);return c.some(function(a){return m(a)})},l=function(a){if(0<a.tabIndex||0===a.tabIndex&&null!==a.getAttribute("tabIndex")){return!0}if(a.disabled){return!1}switch(a.nodeName){case"A":return!!a.href&&"ignore"!=a.rel;case"INPUT":return"hidden"!=a.type&&"file"!=a.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1;}},m=function(a){if(!l(a)){return!1}g=!0;try{a.focus()}catch(a){}g=!1;return document.activeElement===a},n=function(){return c[c.length-1]},o=function(a){if(a===n()){return}c.push(a);var b=n(),f=document.createElement("div");f.tabIndex=0;f.style.position="fixed";f.style.top=0;f.style.left=0;var g=f.cloneNode();b.parentNode.insertBefore(g,b);d.push(g);var h=f.cloneNode();b.parentNode.insertBefore(h,b.nextSibling);e.push(h)},p=function(){c.pop();var a=e.pop();if(a){a.remove()}var b=d.pop();if(b){b.remove()}},q=function(){return!!c.length},r=function(a){o(a);if(!h){document.addEventListener("focus",i,!0)}if(!j()){var b=n(),c=b.tabIndex;b.tabIndex=0;m(b);b.tabIndex=c}f=document.activeElement;h=!0};a.trapFocus=r;var s=function(){p();if(q()){return}document.removeEventListener("focus",i,!0);f=null;g=!1;h=!1};a.untrapFocus=s});
define ("core/autoscroll",["jquery"],function(a){var b={SCROLL_THRESHOLD:30,SCROLL_FREQUENCY:1e3/60,SCROLL_SPEED:.5,scrollingId:null,scrollAmount:0,callback:null,start:function start(c){a(window).on("mousemove",b.mouseMove);a(window).on("touchmove",b.touchMove);b.callback=c},stop:function stop(){a(window).off("mousemove",b.mouseMove);a(window).off("touchmove",b.touchMove);if(null!==b.scrollingId){b.stopScrolling()}},touchMove:function touchMove(a){for(var c=0;c<a.changedTouches.length;c++){b.handleMove(a.changedTouches[c].clientX,a.changedTouches[c].clientY)}},mouseMove:function mouseMove(a){b.handleMove(a.clientX,a.clientY)},handleMove:function handleMove(c,d){if(d<b.SCROLL_THRESHOLD){b.scrollAmount=-Math.min(b.SCROLL_THRESHOLD-d,b.SCROLL_THRESHOLD)}else if(d>a(window).height()-b.SCROLL_THRESHOLD){b.scrollAmount=Math.min(d-(a(window).height()-b.SCROLL_THRESHOLD),b.SCROLL_THRESHOLD)}else{b.scrollAmount=0}if(b.scrollAmount&&null===b.scrollingId){b.startScrolling()}else if(!b.scrollAmount&&null!==b.scrollingId){b.stopScrolling()}},startScrolling:function startScrolling(){var c=a(document).height()-a(window).height();b.scrollingId=window.setInterval(function(){var d=a(window).scrollTop(),e=Math.round(b.scrollAmount*b.SCROLL_SPEED);if(0>d+e){e=-d}if(d+e>c){e=c-d}if(0===e){return}a(window).scrollTop(d+e);var f=a(window).scrollTop()-d;if(0==f){return}if(b.callback){b.callback(f)}},b.SCROLL_FREQUENCY)},stopScrolling:function stopScrolling(){window.clearInterval(b.scrollingId);b.scrollingId=null}};return{start:b.start,stop:b.stop}});
define ("core/truncate",["jquery"],function(a){var b=/(\s*\S+|\s)$/,c=/^(\S*)/,d=/\s/,e=function(a,b){var c=a+"",d=c.length,e=b?+b:0;if(e!=e){e=0}if(-1>=e||e>=d){return""}e=0|e;var f=c.charCodeAt(e),g,h=e+1,i=1;if(55296<=f&&56319>=f&&d>h){g=c.charCodeAt(h);if(56320<=g&&57343>=g){i=2}}return i},f=function(a){for(var b=0,c=0;c<a.length;c+=e(a,c)){b++}return b},g=function(a,b){if(!a.length){return 0}var c=0,d=0;do{c+=e(a,c);d++}while(c<a.length&&d<b);return c};a.truncate=function(b,c){return a("<div></div>").append(b).truncate(c).html()};a.fn.truncate=function(e){if(!isNaN(parseFloat(e)))e={length:e};var h=a.extend({},a.truncate.defaults,e);return this.each(function(){var e=a(this);if(h.noBreaks)e.find("br").replaceWith(" ");var j=h.ellipsis.length,k=e.text(),l=f(k),m=l-h.length+j;if(l<h.length)return;if(h.stripTags)e.text(k);if(h.words&&0<m){var n=k.slice(0,g(k,h.length-j)+1),o=n.replace(b,""),p=f(o),q=n.match(d)?!1:!0;if(h.keepFirstWord&&0===p){m=l-f(c.exec(k)[0])-j}else if(q&&0===p){m=l-h.length+j}else{m=l-p-1}}if(m>l){m=l-h.length}if(0>m||!m&&!h.truncated)return;a.each(e.contents().get().reverse(),function(b,c){var d=a(c),e=d.text(),i=f(e);if(i<=m){h.truncated=!0;m-=i;d.remove();return}if(3===c.nodeType){var k=i-m;k=0<=k?g(e,k):0;a(c.splitText(k)).replaceWith(h.ellipsis);return!1}d.truncate(a.extend(h,{length:i-m+j}));return!1})})};a.truncate.defaults={stripTags:!1,words:!1,keepFirstWord:!1,noBreaks:!1,length:1/0,ellipsis:"\u2026"};return{truncate:a.truncate}});
define ("core/chart_line",["core/chart_base"],function(a){function b(){a.prototype.constructor.apply(this,arguments)}b.prototype=Object.create(a.prototype);b.prototype.TYPE="line";b.prototype._smooth=!1;b.prototype.create=function(b,c){var d=a.prototype.create.apply(this,arguments);d.setSmooth(c.smooth);return d};b.prototype.getSmooth=function(){return this._smooth};b.prototype.setSmooth=function(a){this._smooth=!!a};return b});
define ("core/page_global",["jquery","core/custom_interaction_events","core/str","core/network"],function(a,b,c,d){var e=function(){var d=a("body");b.define(d,[b.events.activate]);d.on(b.events.activate,"[data-show-active-item]",function(b){var d=a(b.target).closest(".dropdown-item"),e=d.closest("[data-show-active-item]");if(!d.hasClass("dropdown-item")){return}if(d.hasClass("active")){return}var f=e.find(".dropdown-item");f.removeClass("active");f.removeAttr("aria-current");if(!e.attr("data-skip-active-class")){d.addClass("active")}d.attr("aria-current",!0);var g=d.text(),h=e.parent().find("[data-toggle=\"dropdown\"]"),i=h.find("[data-active-item-text]");if(i.length){i.html(g)}else{h.html(g)}var j=e.attr("data-active-item-button-aria-label-components");if(j){var k=j.split(",");k.push(g);c.get_string(k[0].trim(),k[1].trim(),k[2].trim()).then(function(a){h.attr("aria-label",a);return a}).catch(function(){return!1})}})};return{init:function init(){e();d.init()}}});
define ("core/url",["jquery","core/config"],function(a,b){return{fileUrl:function fileUrl(a,c){var d=b.wwwroot+a;if("/"!=c.charAt(0)){c="/"+c}if(b.slasharguments){d+=c}else{d+="?file="+encodeURIComponent(c)}return d},relativeUrl:function relativeUrl(c,d,e){if(0===c.indexOf("http:")||0===c.indexOf("https:")||0<=c.indexOf("://")){throw new Error("relativeUrl function does not accept absolute urls")}if("/"!=c.charAt(0)){c="/"+c}if("admin"!==b.admin){c=c.replace(/^\/admin\//,"/"+b.admin+"/")}d=d||{};if(e){d.sesskey=b.sesskey}var f="";if(Object.keys(d).length){f=a.map(d,function(a,b){return b+"="+a}).join("&")}if(""!==f){return b.wwwroot+c+"?"+f}else{return b.wwwroot+c}},imageUrl:function imageUrl(a,b){return M.util.image_url(a,b)}}});
define ("core/chart_pie",["core/chart_base"],function(a){function b(){a.prototype.constructor.apply(this,arguments)}b.prototype=Object.create(a.prototype);b.prototype.TYPE="pie";b.prototype._doughnut=null;b.prototype.create=function(b,c){var d=a.prototype.create.apply(this,arguments);d.setDoughnut(c.doughnut);return d};b.prototype.addSeries=function(b){if(null===b.getColor()){for(var c=[],d=this.getConfigColorSet()||a.prototype.COLORSET,e=0;e<b.getCount();e++){c.push(d[e%d.length])}b.setColors(c)}return a.prototype.addSeries.apply(this,arguments)};b.prototype.getDoughnut=function(){return this._doughnut};b.prototype.setDoughnut=function(a){this._doughnut=!!a};b.prototype._validateSeries=function(){if(1<=this._series.length){throw new Error("Pie charts only support one serie.")}return a.prototype._validateSeries.apply(this,arguments)};return b});
define ("core/chart_builder",["jquery"],function(a){return{make:function make(b){var c=a.Deferred();require(["core/chart_"+b.type],function(a){var d=a.prototype.create(a,b);c.resolve(d)});return c.promise()}}});
define ("core/localstorage",["core/config","core/storagewrapper"],function(a,b){var c=new b(window.localStorage);return{get:function get(a){return c.get(a)},set:function set(a,b){return c.set(a,b)}}});
define ("core/addblockmodal",["jquery","core/modal_factory","core/templates","core/str","core/notification"],function(a,b,c,d,e){return{init:function init(f){var g=a("[data-key=addblock]"),h=f.blocks.map(function(a){return{key:"pluginname",component:"block_"+a}}),i=d.get_strings(h).then(function(a){return a.map(function(a,b){return{name:f.blocks[b],title:a}})}).then(function(a){f.blocks=a;return c.render("core/add_block_body",f)}).fail(e.exception),j=d.get_string("addblock").fail(e.exception);b.create({title:j,body:i,type:"CANCEL"},g)}}});
define ("core/form-autocomplete",["jquery","core/log","core/str","core/templates","core/notification","core/loadingicon"],function(a,b,c,d,f,g){var h={DOWN:40,ENTER:13,SPACE:32,ESCAPE:27,COMMA:44,UP:38},i=Date.now(),j=function(b,c){var d=a(document.getElementById(c.selectionId)),e=d.children("[aria-selected=true]").length;b=b%e;while(0>b){b+=e}var f=a(d.children("[aria-selected=true]").get(b)),g=c.selectionId+"-"+b;d.children().attr("data-active-selection",!1).attr("id","");f.attr("data-active-selection",!0).attr("id",g);d.attr("aria-activedescendant",g);return a.Deferred().resolve()},k=function(b,c,e){var g="form-autocomplete-updateSelectionList-"+c.inputId;M.util.js_pending(g);var h=[],i=a(document.getElementById(c.selectionId)),k=i.attr("aria-activedescendant"),l=!1;if(k){l=a(document.getElementById(k)).attr("data-value")}e.children("option").each(function(b,c){if(a(c).prop("selected")){var d;if(a(c).data("html")){d=a(c).data("html")}else{d=a(c).html()}if(""!==d){h.push({label:d,value:a(c).attr("value")})}}});var m=a.extend({items:h},b,c);return d.render("core/form_autocomplete_selection_items",m).then(function(b,e){d.replaceNodeContents(i,b,e);if(!1!==l){i.children("[aria-selected=true]").each(function(b,d){if(a(d).attr("data-value")===l){j(b,c)}})}return l}).then(function(){return M.util.js_complete(g)}).catch(f.exception)},l=function(a){if("undefined"!=typeof M.core_formchangechecker){M.core_formchangechecker.set_form_changed()}a[0].dispatchEvent(new Event("change"))},m=function(b,c,d,e){var f=a(d).attr("data-value");e.children("option").each(function(b,c){if(a(c).attr("value")==f){a(c).prop("selected",!1);if(a(c).attr("data-iscustom")){a(c).remove()}}});return k(b,c,e).then(function(){l(e)})},n=function(b,c){var d=a(document.getElementById(c.inputId)),e=a(document.getElementById(c.suggestionsId)),f=e.children("[aria-hidden=false]").length;b=b%f;while(0>b){b+=f}var g=a(e.children("[aria-hidden=false]").get(b)),h=a(e.children("[role=option]")).index(g),i=c.suggestionsId+"-"+h;e.children().attr("aria-selected",!1).attr("id","");g.attr("aria-selected",!0).attr("id",i);d.attr("aria-activedescendant",i);var j=g.offset().top-e.offset().top+e.scrollTop()-e.height()/2;return e.animate({scrollTop:j},100).promise()},o=function(b){var c=a(document.getElementById(b.suggestionsId)),d=c.children("[aria-selected=true]"),e=c.children("[aria-hidden=false]").index(d);return n(e+1,b)},p=function(b){var c=a(document.getElementById(b.selectionId)),d=c.children("[data-active-selection=true]");if(!d){return j(0,b)}var e=c.children("[aria-selected=true]").index(d);return j(e-1,b)},q=function(b){var c=a(document.getElementById(b.selectionId)),d=c.children("[data-active-selection=true]"),e=0;if(d){e=c.children("[aria-selected=true]").index(d);e=e+1}else{e=0}return j(e,b)},r=function(b){var c=a(document.getElementById(b.suggestionsId)),d=c.children("[aria-selected=true]"),e=c.children("[aria-hidden=false]").index(d);return n(e-1,b)},s=function(b){var c=a(document.getElementById(b.inputId)),d=a(document.getElementById(b.suggestionsId));c.attr("aria-expanded",!1).attr("aria-activedescendant",b.selectionId);d.hide().attr("aria-hidden",!0);return a.Deferred().resolve()},t=function(b,e,g,h){var i="form-autocomplete-updateSuggestions-"+e.inputId;M.util.js_pending(i);var j=a(document.getElementById(e.inputId)),k=a(document.getElementById(e.suggestionsId)),l=!1,m=[];h.children("option").each(function(b,c){if(!0!==a(c).prop("selected")){m[m.length]={label:c.innerHTML,value:a(c).attr("value")}}});var o=e.caseSensitive?g:g.toLocaleLowerCase(),p=a.extend({options:m},b,e),q=d.render("core/form_autocomplete_suggestions",p).then(function(f,g){d.replaceNode(k,f,g);k=a(document.getElementById(e.suggestionsId));k.show().attr("aria-hidden",!1);k.children().each(function(c,d){d=a(d);if(b.caseSensitive&&-1<d.text().indexOf(o)||!b.caseSensitive&&-1<d.text().toLocaleLowerCase().indexOf(o)){d.show().attr("aria-hidden",!1);l=!0}else{d.hide().attr("aria-hidden",!0)}});j.attr("aria-expanded",!0);if(h.attr("data-notice")){k.html(h.attr("data-notice"))}else if(l){if(!b.tags){n(0,e)}}else{c.get_string("nosuggestions","form").done(function(a){k.html(a)})}return k}).then(function(){return M.util.js_complete(i)}).catch(f.exception);return q},u=function(b,c,d){var e=a(document.getElementById(c.inputId)),f=e.val(),g=f.split(","),h=!1;a.each(g,function(c,e){e=e.trim();if(""!==e){if(!b.multiple){d.children("option").prop("selected",!1)}d.children("option").each(function(b,c){if(a(c).attr("value")==e){h=!0;a(c).prop("selected",!0)}});if(!h){var f=a("<option>");f.append(document.createTextNode(e));f.attr("value",e);d.append(f);f.prop("selected",!0);f.attr("data-iscustom",!0)}}});return k(b,c,d).then(function(){l(d)}).then(function(){e.val("")}).then(function(){return s(c)})},v=function(b,c,d){var e=a(document.getElementById(c.inputId)),f=a(document.getElementById(c.suggestionsId)),g=f.children("[aria-selected=true]").attr("data-value");if(!b.multiple){d.children("option").prop("selected",!1)}d.children("option").each(function(b,c){if(a(c).attr("value")==g){a(c).prop("selected",!0)}});return k(b,c,d).then(function(){l(d)}).then(function(){if(b.closeSuggestionsOnSelect){e.val("");return s(c)}else{e.focus();return t(b,c,e.val(),d)}})},w=function(b,c,d,e,f){var h=y("updateAjax"),i=a(document.getElementById(d.selectId)).parent();g.addIconToContainerRemoveOnCompletion(i,h);var j=a(b.currentTarget).val();f.transport(c.selector,j,function(b){var g=f.processResults(c.selector,b),i=[];if(!c.multiple){e.children("option").remove()}e.children("option").each(function(b,c){c=a(c);if(!c.prop("selected")){c.remove()}else{i.push(c.attr("value")+"")}});if(!c.multiple&&0===e.children("option").length){var j=a("<option>");e.append(j)}if(a.isArray(g)){a.each(g,function(b,c){if(-1===i.indexOf(c.value+"")){var d=a("<option>");d.append(c.label);d.attr("value",c.value);e.append(d)}});e.attr("data-notice","")}else{e.attr("data-notice",g)}h.resolve(t(c,d,"",e))},function(a){h.reject(a)});return h},x=function(b,c,d){var g=a(document.getElementById(c.inputId));g.on("keydown",function(f){var e=y("addNavigation-"+c.inputId+"-"+f.keyCode);switch(f.keyCode){case h.DOWN:if(!b.showSuggestions){e.resolve();return!0}else if("true"===g.attr("aria-expanded")){e.resolve(o(c))}else{if(!g.val()&&b.ajax){require([b.ajax],function(a){e.resolve(w(f,b,c,d,a))})}else{e.resolve(t(b,c,g.val(),d))}}f.preventDefault();return!1;case h.UP:e.resolve(r(c));f.preventDefault();return!1;case h.ENTER:var i=a(document.getElementById(c.suggestionsId));if("true"===g.attr("aria-expanded")&&0<i.children("[aria-selected=true]").length){e.resolve(v(b,c,d))}else if(b.tags){e.resolve(u(b,c,d))}else{e.resolve()}f.preventDefault();return!1;case h.ESCAPE:if("true"===g.attr("aria-expanded")){e.resolve(s(c))}else{e.resolve()}f.preventDefault();return!1;}e.resolve();return!0});g.on("keypress",function(a){if(a.keyCode===h.COMMA){if(b.tags){y("keypress-"+a.keyCode).resolve(u(b,c,d))}a.preventDefault();return!1}return!0});g.closest("form").on("submit",function(){if(b.tags){y("form-autocomplete-submit").resolve(u(b,c,d))}return!0});g.on("blur",function(){var e=y("form-autocomplete-blur");window.setTimeout(function(){var f=a(document.activeElement),h=a.Deferred();if(f.is(document.getElementById(c.suggestionsId))){g.focus()}else if(!f.is(g)&&a(document.getElementById(c.inputId)).length){if(b.tags){h.then(function(){return u(b,c,d)}).catch()}h.then(function(){return s(c)}).catch()}h.then(function(){return e.resolve()}).catch();h.resolve()},500)});if(b.showSuggestions){var i=a(document.getElementById(c.downArrowId));i.on("click",function(a){var e=y("form-autocomplete-show-suggestions");g.focus();if(!g.val()&&b.ajax){require([b.ajax],function(f){e.resolve(w(a,b,c,d,f))})}else{e.resolve(t(b,c,g.val(),d))}})}var j=a(document.getElementById(c.suggestionsId));j.parent().prop("onclick",null).off("click");j.parent().on("click","[role=option]",function(f){var e=y("form-autocomplete-parent"),g=a(f.currentTarget).closest("[role=option]"),h=a(document.getElementById(c.suggestionsId)),i=h.children("[aria-hidden=false]").index(g);n(i,c).then(function(){return v(b,c,d)}).then(function(){return e.resolve()}).catch()});var k=a(document.getElementById(c.selectionId));k.on("click","[role=listitem]",function(f){var e=y("form-autocomplete-clicks");e.resolve(m(b,c,a(f.currentTarget),d))});k.on("keydown",function(f){var e=y("form-autocomplete-keydown-"+f.keyCode);switch(f.keyCode){case h.DOWN:f.preventDefault();e.resolve(q(c));return!1;case h.UP:f.preventDefault();e.resolve(p(c));return!1;case h.SPACE:case h.ENTER:var g=a(document.getElementById(c.selectionId)).children("[data-active-selection=true]");if(g){f.preventDefault();e.resolve(m(b,c,g,d))}return!1;}e.resolve();return!0});if(b.showSuggestions){g.on("focus",function(b){var c=a(b.currentTarget).val();a(b.currentTarget).data("last-value",c)});if(b.ajax){require([b.ajax],function(h){var i=null,j=!1,k="autocomplete-throttledhandler",l=function(a){i=null;j=!0;w(a,b,c,d,h).then(function(){if(null===i){M.util.js_complete(k)}j=!1;return arguments[0]}).catch(f.exception)},m=function(a){window.clearTimeout(i);if(j){i=window.setTimeout(m.bind(this,a),100);return}if(null===i){M.util.js_pending(k)}i=window.setTimeout(l.bind(this,a),300)};g.on("input",function(b){var c=a(b.currentTarget).val(),d=a(b.currentTarget).data("last-value");if(d!==c){m(b)}a(b.currentTarget).data("last-value",c)})})}else{g.on("input",function(f){var e=a(f.currentTarget).val(),g=a(f.currentTarget).data("last-value");if(g!==e){t(b,c,e,d)}a(f.currentTarget).data("last-value",e)})}}},y=function(b){var c="form-autocomplete:"+b;M.util.js_pending(c);var d=a.Deferred();d.then(function(){M.util.js_complete(c);return arguments[0]}).catch(f.exception);return d};return{enhance:function enhance(e,g,h,j,l,m,n,o){var p={selector:e,tags:!1,ajax:!1,placeholder:j,caseSensitive:!1,showSuggestions:!0,noSelectionString:n},q="autocomplete-setup-"+e;M.util.js_pending(q);if("undefined"!=typeof g){p.tags=g}if("undefined"!=typeof h){p.ajax=h}if("undefined"!=typeof l){p.caseSensitive=l}if("undefined"!=typeof m){p.showSuggestions=m}if("undefined"==typeof n){c.get_string("noselection","form").done(function(a){p.noSelectionString=a}).fail(f.exception)}var r=a(e);if(!r){b.debug("Selector not found: "+e);M.util.js_complete(q);return!1}r.css("visibility","hidden").attr("aria-hidden",!0);var s={selectId:r.attr("id"),inputId:"form_autocomplete_input-"+i,suggestionsId:"form_autocomplete_suggestions-"+i,selectionId:"form_autocomplete_selection-"+i,downArrowId:"form_autocomplete_downarrow-"+i};i++;p.multiple=r.attr("multiple");if(!p.multiple){r.prepend("<option>")}if("undefined"!=typeof o){p.closeSuggestionsOnSelect=o}else{p.closeSuggestionsOnSelect=!p.multiple}var t=a("[for="+s.selectId+"]"),u=[];r.children("option").each(function(b,c){u[b]={label:c.innerHTML,value:a(c).attr("value")}});var v=a.extend({},p,s);v.options=u;v.items=[];var w="",y=d.render("core/form_autocomplete_input",v).then(function(a,b){w+=b;return a}),z=d.render("core/form_autocomplete_suggestions",v).then(function(a,b){w+=b;return a}),A=d.render("core/form_autocomplete_selection",v).then(function(a,b){w+=b;return a});return a.when(y,z,A).then(function(b,c,e){r.hide();r.after(c);r.after(b);r.after(e);d.runTemplateJS(w);t.attr("for",s.inputId);x(p,s,r);var f=a(document.getElementById(s.suggestionsId));f.hide().attr("aria-hidden",!0)}).then(function(){return k(p,s,r)}).then(function(){return M.util.js_complete(q)}).catch(function(a){M.util.js_complete(q);f.exception(a)})}}});
define ("core/paged_content_paging_dropdown",["jquery","core/custom_interaction_events","core/paged_content_events","core/pubsub"],function(a,b,c,d){var f={ROOT:"[data-region=\"paging-dropdown-container\"]",DROPDOWN_ITEM:"[data-region=\"dropdown-item\"]",DROPDOWN_TOGGLE:"[data-region=\"dropdown-toggle\"]",ACTIVE_DROPDOWN_ITEM:"[data-region=\"dropdown-item\"].active",CARET:"[data-region=\"caret\"]"},g=function(a){return parseInt(a.attr("data-page-number"),10)},h=function(a){return a.find(f.DROPDOWN_ITEM)},i=function(b,c){var d=g(c);return h(b).filter(function(b,c){return g(a(c))<d})},j=function(a){return parseInt(a.attr("data-item-count"),10)},k=function(b,c){if(c.attr("data-offset")!=void 0){return parseInt(c.attr("data-offset"),10)}var d=0;i(b,c).each(function(b,c){c=a(c);d+=j(c)});c.attr("data-offset",d);return d},l=function(a){return a.find(f.ACTIVE_DROPDOWN_ITEM)},m=function(b,c){return c.map(function(c,d){d=a(d);return{pageNumber:g(d),limit:j(d),offset:k(b,d)}}).get()},n=function(b){b.each(function(b,c){c=a(c);c.attr("data-page-number",b+1)})},o=function(a,b,e){var g=i(a,b),h=g.add(b),j=m(a,h),k=a.find(f.DROPDOWN_TOGGLE),n=k.find(f.CARET);l(a).removeClass("active");b.addClass("active");k.html(b.text());k.append(n);d.publish(e+c.SHOW_PAGES,j)};return{init:function init(c,d){c=a(c);var e=h(c);n(e);var g=l(c);if(g.length){o(c,g,d)}b.define(c,[b.events.activate]);c.on(b.events.activate,f.DROPDOWN_ITEM,function(b,e){var g=a(b.target).closest(f.DROPDOWN_ITEM);o(c,g,d);e.originalEvent.preventDefault()})},rootSelector:f.ROOT}});
define ("core/tooltip",["jquery"],function(a){var b=function(b){this._regionSelector=b;a(this._regionSelector).each(function(b,c){var d=a(c).attr("aria-describedby");if(d){var e=document.getElementById(d);if(e){var f="tooltip"==a(e).attr("role");if(f){a(e).hide();a(c).attr("tabindex","0")}a(c).on("focus",this._handleFocus.bind(this));a(c).on("mouseover",this._handleMouseOver.bind(this));a(c).on("mouseout",this._handleMouseOut.bind(this));a(c).on("blur",this._handleBlur.bind(this));a(c).on("keydown",this._handleKeyDown.bind(this))}}}.bind(this))};b.prototype._regionSelector=null;b.prototype._showTooltip=function(b){var c=a(b.target),d=c.attr("aria-describedby");if(d){var e=a(document.getElementById(d));e.show();e.attr("aria-hidden","false");if(!e.is(".tooltip")){var f=a("<div class=\"tooltip-inner\"></div>");f.append(e.contents());e.append(f);e.addClass("tooltip");e.addClass("bottom");e.append("<div class=\"tooltip-arrow\"></div>")}var g=c.offset();g.top+=c.height()+10;a(e).offset(g)}};b.prototype._hideTooltip=function(b){var c=a(b.target),d=c.attr("aria-describedby");if(d){var e=document.getElementById(d);a(e).hide();a(e).attr("aria-hidden","true")}};b.prototype._handleFocus=function(a){this._showTooltip(a)};b.prototype._handleKeyDown=function(a){if(27==a.which){this._hideTooltip(a)}};b.prototype._handleMouseOver=function(a){this._showTooltip(a)};b.prototype._handleMouseOut=function(b){var c=a(b.target);if(!c.is(":focus")){this._hideTooltip(b)}};b.prototype._handleBlur=function(a){this._hideTooltip(a)};return b});
define ("core/templates",["core/mustache","jquery","core/ajax","core/str","core/notification","core/url","core/config","core/localstorage","core/icon_system","core/event","core/yui","core/log","core/truncate","core/user_date","core/pending"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=0,q={},r={},s={},t={},u=[],v=!1,w=["js"],x=function(a){if(0>=M.cfg.templaterev){return null}if(a in r){return r[a]}if(a in q){r[a]=b.Deferred().resolve(q[a]).promise();return r[a]}var c=h.get("core_template/"+M.cfg.templaterev+":"+a);if(c){q[a]=c;r[a]=b.Deferred().resolve(c).promise();return r[a]}return null},y=function(){if(!u.length){return}if(v){return}v=!0;var a=u.slice(),e=b.Deferred(),f=[],g=a.map(function(a){var c=a.component,i=a.name,j=a.searchKey,k=a.theme,l=a.deferred,m=null,n=x(j);if(n){m=n}else{f.push({methodname:"core_output_load_template_with_dependencies",args:{component:c,template:i,themename:k,lang:b("html").attr("lang").replace(/-/g,"_")}});var o=f.length-1;m=e.promise().then(function(a){g[j]=a[o].then(function(a){var b=null;a.templates.forEach(function(a){var d=[k,a.component,a.name].join("/");q[d]=a.value;h.set("core_template/"+M.cfg.templaterev+":"+d,a.value);if(a.component==c&&a.name==i){b=a.value}});if(a.strings.length){d.cache_strings(a.strings.map(function(a){return{component:a.component,key:a.name,value:a.value}}))}return b});return g[j]})}return m.then(function(a){return l.resolve(a)}).catch(function(a){l.reject(a);throw a})});if(f.length){e.resolve(c.call(f,!0,!1,!1,0,M.cfg.templaterev))}else{e.resolve()}b.when.apply(null,g).then(function(){u.splice(0,a.length);v=!1;y()}).catch(function(){u.splice(0,a.length);v=!1;y()})},z=function(){this.requiredStrings=[];this.requiredJS=[];this.requiredDates=[];this.currentThemeName=""};z.prototype.requiredStrings=null;z.prototype.requiredDates=[];z.prototype.requiredJS=null;z.prototype.currentThemeName="";z.prototype.getTemplate=function(a){var c=this.currentThemeName,d=c+"/"+a,e=x(d);if(e){return e}var f=u.filter(function(a){return a.searchKey==d});if(f.length){return f[0].deferred.promise()}var g=a.split("/"),h=g.shift(),i=g.join("/"),j=b.Deferred();u.push({component:h,name:i,theme:c,searchKey:d,deferred:j});y();return j.promise()};z.prototype.partialHelper=function(a){var b=this.currentThemeName+"/"+a;if(!(b in q)){e.exception(new Error("Failed to pre-fetch the template: "+a))}return q[b]};z.prototype.renderIcon=function(a,c,d){var f=g.iconsystemmodule,h=b.Deferred();require([f],function(a){var b=new a;if(!(b instanceof i)){h.reject("Invalid icon system specified"+g.iconsystemmodule)}else{t=b;b.init().then(h.resolve).catch(e.exception)}});return h.then(function(a){return this.getTemplate(a.getTemplateName())}.bind(this)).then(function(b){return t.renderIcon(a,c,d,b)})};z.prototype.pixHelper=function(a,b,c){var d=b.split(","),e="",f="",g="";if(0<d.length){e=c(d.shift().trim(),a)}if(0<d.length){f=c(d.shift().trim(),a)}if(0<d.length){g=c(d.join(",").trim(),a)}var h=t.getTemplateName(),i=this.currentThemeName+"/"+h,j=q[i];e=e.replace(/&#x2F;/gi,"/");return t.renderIcon(e,f,g,j)};z.prototype.jsHelper=function(a,b,c){this.requiredJS.push(c(b,a));return""};z.prototype.stringHelper=function(a,b,c){var d=b.split(","),e="",f="",g="";if(0<d.length){e=d.shift().trim()}if(0<d.length){f=d.shift().trim()}if(0<d.length){g=d.join(",").trim()}if(""!==g){g=c(g,a)}if(0===g.indexOf("{")&&0!==g.indexOf("{{")){g=JSON.parse(g)}var h=this.requiredStrings.length;this.requiredStrings.push({key:e,component:f,param:g});return"[[_s"+h+"]]"};z.prototype.quoteHelper=function(a,b,c){var d=c(b.trim(),a);d=d.replace(/"/g,"\\\"").replace(/([\{\}]{2,3})/g,"{{=<% %>=}}$1<%={{ }}=%>").replace(/(\r\n|\r|\n)/g,"&#x0a;");return"\""+d+"\""};z.prototype.shortenTextHelper=function(a,b,c){var d=/(.*?),(.*)/,e=b.match(d),f=e[1].trim(),g=e[2].trim(),h=c(g,a);return m.truncate(h,{length:f,words:!0,ellipsis:"..."})};z.prototype.userDateHelper=function(a,b,c){var d=/(.*?),(.*)/,e=b.match(d),f=c(e[1].trim(),a),g=c(e[2].trim(),a),h=this.requiredDates.length;this.requiredDates.push({timestamp:f,format:g});return"[[_t_"+h+"]]"};z.prototype.addHelperFunction=function(a,b){return function(){return function(c,d){var e=w.reduce(function(a,c){if(b.hasOwnProperty(c)){a[c]=b[c]}return a},{});w.forEach(function(a){b[a]=function(){return""}});var f=a.apply(this,[b,c,d]);for(var g in e){b[g]=e[g]}return f}.bind(this)}.bind(this)};z.prototype.addHelpers=function(a,b){this.currentThemeName=b;this.requiredStrings=[];this.requiredJS=[];a.uniqid=p++;a.str=this.addHelperFunction(this.stringHelper,a);a.pix=this.addHelperFunction(this.pixHelper,a);a.js=this.addHelperFunction(this.jsHelper,a);a.quote=this.addHelperFunction(this.quoteHelper,a);a.shortentext=this.addHelperFunction(this.shortenTextHelper,a);a.userdate=this.addHelperFunction(this.userDateHelper,a);a.globals={config:g};a.currentTheme=b};z.prototype.getJS=function(){var a="";if(0<this.requiredJS.length){a=this.requiredJS.join(";\n")}return a};z.prototype.treatStringsInContent=function(a,b){var c=/\[\[_s\d+\]\]/,d,e,f,g,h,i;do{d="";e=a.search(c);while(-1<e){d+=a.substring(0,e);a=a.substr(e);f="";g=4;h=a.substr(g,1);do{f+=h;g++;h=a.substr(g,1)}while("]"!=h);i=b[parseInt(f,10)];if("undefined"==typeof i){l.debug("Could not find string for pattern [[_s"+f+"]].");i=""}d+=i;a=a.substr(6+f.length);e=a.search(c)}a=d+a;e=a.search(c)}while(-1<e);return a};z.prototype.treatDatesInContent=function(a,b){b.forEach(function(b,c){var d=new RegExp("\\[\\[_t_"+c+"\\]\\]","g");a=a.replace(d,b)});return a};z.prototype.doRender=function(c,e,f){this.currentThemeName=f;var g=t.getTemplateName(),h=new o("core/templates:doRender");return this.getTemplate(g).then(function(){this.addHelpers(e,f);var d=a.render(c,e,this.partialHelper.bind(this));return b.Deferred().resolve(d.trim(),this.getJS()).promise()}.bind(this)).then(function(a,c){if(0<this.requiredStrings.length){return d.get_strings(this.requiredStrings).then(function(d){this.requiredDates=this.requiredDates.map(function(a){return{timestamp:this.treatStringsInContent(a.timestamp,d),format:this.treatStringsInContent(a.format,d)}}.bind(this));a=this.treatStringsInContent(a,d);c=this.treatStringsInContent(c,d);return b.Deferred().resolve(a,c).promise()}.bind(this))}return b.Deferred().resolve(a,c).promise()}.bind(this)).then(function(a,c){if(0<this.requiredDates.length){return n.get(this.requiredDates).then(function(d){a=this.treatDatesInContent(a,d);c=this.treatDatesInContent(c,d);return b.Deferred().resolve(a,c).promise()}.bind(this))}return b.Deferred().resolve(a,c).promise()}.bind(this)).then(function(a,c){h.resolve();return b.Deferred().resolve(a,c).promise()})};var A=function(a){if(""!==a.trim()){var c=b("<script>").attr("type","text/javascript").html(a);b("head").append(c)}},B=function(a,c,d,e){var f=b(a);if(f.length){var g=b(c),h=null;if(e){h=new k.NodeList(f.children().get());h.destroy(!0);f.empty();f.append(g)}else{h=new k.NodeList(f.get());h.destroy(!0);f.replaceWith(g)}A(d);j.notifyFilterContentUpdated(g)}};z.prototype.scanForPartials=function(b){var c=a.parse(b),d=[],e=function(a,b){var c,d;for(c=0;c<a.length;c++){d=a[c];if(">"==d[0]||"<"==d[0]){b.push(d[1])}if(4<d.length){e(d[4],b)}}};e(c,d);return d};z.prototype.cachePartials=function(a,c){var d=this.currentThemeName+"/"+a;if(d in s){return s[d]}c=c||[d];s[d]=b.Deferred();this.getTemplate(a).then(function(e){var f=this.scanForPartials(e),g=f.filter(function(b){if(0<=c.indexOf(this.currentThemeName+"/"+b)){return!1}return b!=a}.bind(this)),h=g.map(function(a){c.push(this.currentThemeName+"/"+a);return this.cachePartials(a,c)}.bind(this));return b.when.apply(b,h).then(function(){return s[d].resolve(e)})}.bind(this)).catch(s[d].reject);return s[d]};z.prototype.render=function(a,c,d){if("undefined"==typeof d){d=g.theme}this.currentThemeName=d;var f=g.iconsystemmodule,h=b.Deferred();require([f],function(a){var b=new a;if(!(b instanceof i)){h.reject("Invalid icon system specified"+g.iconsystem)}else{t=b;b.init().then(h.resolve).catch(e.exception)}});return h.then(function(){return this.cachePartials(a)}.bind(this)).then(function(a){return this.doRender(a,c,d)}.bind(this))};var C=function(a,c,d){var e=b(a);if(e.length){e.prepend(c);A(d);j.notifyFilterContentUpdated(e)}},D=function(a,c,d){var e=b(a);if(e.length){e.append(c);A(d);j.notifyFilterContentUpdated(e)}};return{render:function render(a,b,c){var d=new z;return d.render(a,b,c)},renderForPromise:function renderForPromise(a,b,c){var d=new z;return d.render(a,b,c).then(function(a,b){return{html:a,js:b}})},renderPix:function renderPix(a,b,c){var d=new z;return d.renderIcon(a,b,c)},runTemplateJS:A,replaceNodeContents:function replaceNodeContents(a,b,c){B(a,b,c,!0)},replaceNode:function replaceNode(a,b,c){B(a,b,c,!1)},prependNodeContents:function prependNodeContents(a,b,c){C(a,b,c)},appendNodeContents:function appendNodeContents(a,b,c){D(a,b,c)}}});
define ("core/log",["core/loglevel"],function(a){var b=a.methodFactory;a.methodFactory=function(a,c){var d=b(a,c);return function(a,b){if(b){d(b+": "+a)}else{d(a)}}};a.setConfig=function(b){if("undefined"!=typeof b.level){a.setLevel(b.level)}};return a});
define ("core/modal_factory",["jquery","core/modal_events","core/modal_registry","core/modal","core/modal_save_cancel","core/modal_cancel","core/templates","core/notification","core/custom_interaction_events","core/pending"],function(a,b,c,d,e,f,g,h,i,j){var k={DEFAULT:"core/modal",SAVE_CANCEL:"core/modal_save_cancel",CANCEL:"core/modal_cancel"},l={DEFAULT:"DEFAULT",SAVE_CANCEL:"SAVE_CANCEL",CANCEL:"CANCEL"};c.register(l.DEFAULT,d,k.DEFAULT);c.register(l.SAVE_CANCEL,e,k.SAVE_CANCEL);c.register(l.CANCEL,f,k.CANCEL);var m=function(c,d,e){var f=null,g="function"==typeof e.preShowCallback,h=function(b,d){var h=new j("core/modal_factory:setUpTrigger:triggeredCallback");f=a(b.currentTarget);c.then(function(a){if(g){e.preShowCallback(f,a)}a.show();return a}).then(h.resolve);d.originalEvent.preventDefault()};if(Array.isArray(d)){var k=d[1];d=d[0];i.define(d,[i.events.activate]);d.on(i.events.activate,k,h)}else{i.define(d,[i.events.activate]);d.on(i.events.activate,h)}c.then(function(a){a.getRoot().on(b.hidden,function(){if(null!==f){f.focus()}});return a})},n=function(b,c){c=a(c);var d=b.module,e=new d(c);return e},o=function(b,c){var d=b.template,e=g.render(d,c).then(function(c){var d=a(c);return n(b,d)}).fail(h.exception);return e};return{create:function create(a,b){var d=a.type||l.DEFAULT,e=a.large?!0:!1,f=null,g={};f=c.get(d);if(!f){h.exception({message:"Unable to find modal of type: "+d})}if("undefined"!=typeof a.templateContext){g=a.templateContext}var i=o(f,g).then(function(b){if("undefined"!=typeof a.title){b.setTitle(a.title)}if("undefined"!=typeof a.body){b.setBody(a.body)}if("undefined"!=typeof a.footer){b.setFooter(a.footer)}if(e){b.setLarge()}return b});if("undefined"!=typeof b){m(i,b,a)}return i},types:l}});
define ("core/paged_content_paging_bar",["jquery","core/custom_interaction_events","core/paged_content_events","core/str","core/pubsub"],function(a,b,c,d,e){var f={ROOT:"[data-region=\"paging-bar\"]",PAGE:"[data-page]",PAGE_ITEM:"[data-region=\"page-item\"]",PAGE_LINK:"[data-region=\"page-link\"]",FIRST_BUTTON:"[data-control=\"first\"]",LAST_BUTTON:"[data-control=\"last\"]",NEXT_BUTTON:"[data-control=\"next\"]",PREVIOUS_BUTTON:"[data-control=\"previous\"]",DOTS_BUTTONS:"[data-dots]",BEGINNING_DOTS_BUTTON:"[data-dots=\"beginning\"]",ENDING_DOTS_BUTTON:"[data-dots=\"ending\"]"},g=function(a,b){return a.find(f.PAGE_ITEM+"[data-page-number=\""+b+"\"]")},h=function(a){return a.find(f.NEXT_BUTTON)},i=function(a,b){a.attr("data-last-page-number",b)},j=function(a){return parseInt(a.attr("data-last-page-number"),10)},k=function(a){return parseInt(a.attr("data-active-page-number"),10)},l=function(a,b){a.attr("data-active-page-number",b)},m=function(a){var b=k(a);return!isNaN(b)&&0!=b},n=function(a,b){if(b.attr("data-page")!=void 0){return parseInt(b.attr("data-page-number"),10)}var c=1,d=null;switch(b.attr("data-control")){case"first":c=1;break;case"last":c=j(a);break;case"next":d=k(a);var e=j(a);if(!e){c=d+1}else if(d&&d<e){c=d+1}else{c=e}break;case"previous":d=k(a);if(d&&1<d){c=d-1}else{c=1}break;default:c=1;break;}return parseInt(c,10)},o=function(a){return parseInt(a.attr("data-items-per-page"),10)},p=function(a,b){a.attr("data-items-per-page",b)},q=function(a){a.removeClass("hidden")},r=function(a){a.addClass("hidden")},s=function(a){var b=a.find(f.NEXT_BUTTON),c=a.find(f.LAST_BUTTON);b.addClass("disabled");b.attr("aria-disabled",!0);c.addClass("disabled");c.attr("aria-disabled",!0)},t=function(a){var b=a.find(f.NEXT_BUTTON),c=a.find(f.LAST_BUTTON);b.removeClass("disabled");b.removeAttr("aria-disabled");c.removeClass("disabled");c.removeAttr("aria-disabled")},u=function(a){var b=a.find(f.PREVIOUS_BUTTON),c=a.find(f.FIRST_BUTTON);b.addClass("disabled");b.attr("aria-disabled",!0);c.addClass("disabled");c.attr("aria-disabled",!0)},v=function(b){var c=k(b),d=j(b),e=b.find(f.DOTS_BUTTONS),g=b.find(f.BEGINNING_DOTS_BUTTON),h=b.find(f.ENDING_DOTS_BUTTON),i=b.find(f.PAGE),l=parseInt(b.attr("data-bar-size"),10);if(l&&d>l){var m=Math.max(c-Math.round(l/2),1),n=m+l-1;if(n>=d){n=d;m=n-l+1}if(1<m){q(g);m++}else{r(g)}if(n<d){q(h);n--}else{r(h)}e.addClass("disabled");e.attr("aria-disabled",!0);r(i);i.each(function(b,c){c=a(c);if(b+1>=m&&b+1<=n){q(c)}})}else{r(e)}},w=function(a){var b=a.find(f.PREVIOUS_BUTTON),c=a.find(f.FIRST_BUTTON);b.removeClass("disabled");b.removeAttr("aria-disabled");c.removeClass("disabled");c.removeAttr("aria-disabled")},x=function(a){var b=a.attr("data-aria-label-components-pagination-item"),c=b.split(",").map(function(a){return a.trim()});return c},y=function(a){var b=a.attr("data-aria-label-components-pagination-active-item"),c=b.split(",").map(function(a){return a.trim()});return c},z=function(b,c){var d=0;l(b,0);c.each(function(c,e){var f=c+1;e=a(e);e.attr("data-page-number",f);d++;if(e.hasClass("active")){l(b,f)}});i(b,d)},A=function(b){var c=x(b),e=y(b),g=k(b),h=b.find(f.PAGE_ITEM),i=h.map(function(d,f){f=a(f);var h=n(b,f);if(h===g){return{key:e[0],component:e[1],param:h}}else{return{key:c[0],component:c[1],param:h}}});d.get_strings(i).then(function(b){h.each(function(c,d){d=a(d);var e=b[c];d.attr("aria-label",e);d.find(f.PAGE_LINK).attr("aria-label",e)});return b}).catch(function(){})},B=function(a,b,d){var h=j(a),i=b==k(a),m=o(a);if(!i){a.find(f.PAGE_ITEM).removeClass("active").removeAttr("aria-current");var n=g(a,b);n.addClass("active");n.attr("aria-current",!0);l(a,b);v(a)}if(h&&b>=h){s(a)}else{t(a)}if(1<b){w(a)}else{u(a)}A(a);e.publish(d+c.SHOW_PAGES,[{pageNumber:b,limit:m,offset:(b-1)*m}])},C=function(d,g){var h=d.attr("data-ignore-control-while-loading"),k=!1;if(""==h){h=!0}b.define(d,[b.events.activate]);d.on(b.events.activate,f.PAGE_ITEM,function(b,c){c.originalEvent.preventDefault();c.originalEvent.stopPropagation();if(h&&k){return}var e=a(b.target).closest(f.PAGE_ITEM);if(!e.hasClass("disabled")){var i=n(d,e);B(d,i,g);k=!0}});e.subscribe(g+c.ALL_ITEMS_LOADED,function(a){k=!1;var b=j(d);if(!b||a<b){i(d,a)}if(1===a&&d.attr("data-hide-control-on-single-page")){r(d);s(d);u(d)}else{q(d);s(d)}});e.subscribe(g+c.PAGES_SHOWN,function(){k=!1});e.subscribe(g+c.SET_ITEMS_PER_PAGE_LIMIT,function(a){p(d,a);i(d,0);l(d,0);q(d);B(d,1,g)})};return{init:function init(b,c){b=a(b);var d=b.find(f.PAGE);z(b,d);C(b,c);if(m(b)){var e=k(b);g(b,e).click();if(1==e){u(b)}}else{h(b).click()}v(b)},disableNextControlButtons:s,enableNextControlButtons:t,disablePreviousControlButtons:u,enablePreviousControlButtons:w,showPage:B,rootSelector:f.ROOT}});
define ("core/icon_system_fontawesome",["core/icon_system","jquery","core/ajax","core/mustache","core/localstorage","core/url"],function(a,b,c,d,e,f){var g=null,h=null,i=function(){a.apply(this,arguments)};i.prototype=Object.create(a.prototype);i.prototype.init=function(){if(g){return b.when(this)}var a=e.get("core/iconmap-fontawesome");if(a){a=JSON.parse(a)}if(a){g=a;return b.when(this)}if(null===h){h=c.call([{methodname:"core_output_load_fontawesome_icon_map",args:[]}],!0,!1,!1,0,M.cfg.themerev)[0]}return h.then(function(a){g={};b.each(a,function(a,b){g[b.component+"/"+b.pix]=b.to});e.set("core/iconmap-fontawesome",JSON.stringify(g));return this}.bind(this))};i.prototype.renderIcon=function(a,b,c,e){var h=g[b+"/"+a],i=!1;if("undefined"==typeof h){var j=f.imageUrl(a,b);i={attributes:[{name:"src",value:j},{name:"alt",value:c},{name:"title",value:c}]}}var k={key:h,title:c,alt:c,unmappedIcon:i};if("undefined"==typeof c||""===c){k["aria-hidden"]=!0}var l=d.render(e,k);return l.trim()};i.prototype.getTemplateName=function(){return"core/pix_icon_fontawesome"};return i});
define ("core/tree",["jquery"],function(a){var b={ITEM:"[role=treeitem]",GROUP:"[role=treeitem]:has([role=group]), [role=treeitem][aria-owns], [role=treeitem][data-requires-ajax=true]",CLOSED_GROUP:"[role=treeitem]:has([role=group])[aria-expanded=false], [role=treeitem][aria-owns][aria-expanded=false], [role=treeitem][data-requires-ajax=true][aria-expanded=false]",FIRST_ITEM:"[role=treeitem]:first",VISIBLE_ITEM:"[role=treeitem]:visible",UNLOADED_AJAX_ITEM:"[role=treeitem][data-requires-ajax=true][data-loaded=false][aria-expanded=true]"},c=function(c,d){this.treeRoot=a(c);this.treeRoot.data("activeItem",null);this.selectCallback=d;this.keys={tab:9,enter:13,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,asterisk:106};this.initialiseNodes(this.treeRoot);this.setActiveItem(this.treeRoot.find(b.FIRST_ITEM));this.refreshVisibleItemsCache();this.bindEventHandlers()};c.prototype.registerEnterCallback=function(a){this.enterCallback=a};c.prototype.refreshVisibleItemsCache=function(){this.treeRoot.data("visibleItems",this.treeRoot.find(b.VISIBLE_ITEM))};c.prototype.getVisibleItems=function(){return this.treeRoot.data("visibleItems")};c.prototype.setActiveItem=function(a){var b=this.treeRoot.data("activeItem");if(a===b){return}if(b){b.attr("tabindex","-1");b.attr("aria-selected","false")}a.attr("tabindex","0");a.attr("aria-selected","true");this.treeRoot.data("activeItem",a);if("function"==typeof this.selectCallback){this.selectCallback(a)}};c.prototype.isGroupItem=function(a){return a.is(b.GROUP)};c.prototype.getGroupFromItem=function(a){var b=this.treeRoot.find("#"+a.attr("aria-owns")),c=a.children("[role=group]");if(b.length>c.length){return b}else{return c}};c.prototype.isGroupCollapsed=function(a){return"false"===a.attr("aria-expanded")};c.prototype.isGroupCollapsible=function(a){return"false"!==a.attr("data-collapsible")};c.prototype.initialiseNodes=function(c){this.removeAllFromTabOrder(c);this.setAriaSelectedFalseOnItems(c);var d=this;c.find(b.UNLOADED_AJAX_ITEM).each(function(){var b=a(this);d.collapseGroup(b);d.expandGroup(b)})};c.prototype.removeAllFromTabOrder=function(b){b.find("*").attr("tabindex","-1");this.getGroupFromItem(a(b)).find("*").attr("tabindex","-1")};c.prototype.setAriaSelectedFalseOnItems=function(a){a.find(b.ITEM).attr("aria-selected","false")};c.prototype.expandAllGroups=function(){var c=this;this.treeRoot.find(b.CLOSED_GROUP).each(function(){var b=a(this);c.expandGroup(a(this)).done(function(){c.expandAllChildGroups(b)})})};c.prototype.expandAllChildGroups=function(c){var d=this;this.getGroupFromItem(c).find(b.CLOSED_GROUP).each(function(){var b=a(this);d.expandGroup(a(this)).done(function(){d.expandAllChildGroups(b)})})};c.prototype.expandGroup=function(b){var c=a.Deferred();if("false"!==b.attr("data-expandable")&&this.isGroupCollapsed(b)){if("true"===b.attr("data-requires-ajax")&&"true"!==b.attr("data-loaded")){b.attr("data-loaded",!1);var d=b.closest("[data-ajax-loader]").attr("data-ajax-loader"),e=this;b.addClass("loading");require([d],function(a){a.load(b).done(function(){b.attr("data-loaded",!0);e.initialiseNodes(b);e.finishExpandingGroup(b);b.removeClass("loading");c.resolve()})})}else{this.finishExpandingGroup(b);c.resolve()}}else{c.resolve()}return c};c.prototype.finishExpandingGroup=function(a){var b=this.getGroupFromItem(a);b.attr("aria-hidden","false");a.attr("aria-expanded","true");this.refreshVisibleItemsCache()};c.prototype.collapseGroup=function(a){if(!this.isGroupCollapsible(a)||this.isGroupCollapsed(a)){return}var b=this.getGroupFromItem(a);b.attr("aria-hidden","true");a.attr("aria-expanded","false");this.refreshVisibleItemsCache()};c.prototype.toggleGroup=function(a){if("true"===a.attr("aria-expanded")){this.collapseGroup(a)}else{this.expandGroup(a)}};c.prototype.handleKeyDown=function(c,d){var e=this.getVisibleItems().index(c);if(d.altKey||d.ctrlKey||d.metaKey||d.shiftKey&&d.keyCode!=this.keys.tab){return!0}switch(d.keyCode){case this.keys.home:{this.getVisibleItems().first().focus();d.stopPropagation();return!1}case this.keys.end:{this.getVisibleItems().last().focus();d.stopPropagation();return!1}case this.keys.enter:{var f=c.children("a").length?c.children("a"):c.children().not(b.GROUP).find("a");if(f.length){if("function"==typeof this.enterCallback){this.enterCallback(c)}else{window.location.href=f.first().attr("href")}}else if(this.isGroupItem(c)){this.toggleGroup(c,!0)}d.stopPropagation();return!1}case this.keys.space:{if(this.isGroupItem(c)){this.toggleGroup(c,!0)}d.stopPropagation();return!1}case this.keys.left:{var g=function(b){b.getVisibleItems().filter(function(){return b.getGroupFromItem(a(this)).has(c).length}).focus()};if(this.isGroupItem(c)){if(this.isGroupCollapsed(c)){g(this)}else{this.collapseGroup(c)}}else{g(this)}d.stopPropagation();return!1}case this.keys.right:{if(this.isGroupItem(c)){if(this.isGroupCollapsed(c)){this.expandGroup(c)}else{this.getGroupFromItem(c).find(b.ITEM).first().focus()}}d.stopPropagation();return!1}case this.keys.up:{if(0<e){var h=this.getVisibleItems().eq(e-1);h.focus()}d.stopPropagation();return!1}case this.keys.down:{if(e<this.getVisibleItems().length-1){var i=this.getVisibleItems().eq(e+1);i.focus()}d.stopPropagation();return!1}case this.keys.asterisk:{this.expandAllGroups();d.stopPropagation();return!1}}return!0};c.prototype.handleClick=function(a,b){if(b.altKey||b.ctrlKey||b.shiftKey||b.metaKey){return!0}a.focus();if(this.isGroupItem(a)){this.toggleGroup(a)}b.stopPropagation();return!0};c.prototype.handleFocus=function(a,b){this.setActiveItem(a);b.stopPropagation();return!0};c.prototype.bindEventHandlers=function(){var c=this;this.treeRoot.on({click:function click(b){return c.handleClick(a(this),b)},keydown:function keydown(b){return c.handleKeyDown(a(this),b)},focus:function focus(b){return c.handleFocus(a(this),b)}},b.ITEM)};return c});
function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("core/sortable_list",["jquery","core/log","core/autoscroll","core/str","core/modal_factory","core/modal_events","core/notification"],function(b,a,c,d,e,f,g){var h={targetListSelector:null,moveHandlerSelector:"[data-drag-type=move]",isHorizontal:!1,autoScroll:!0},j={keyboardDragClass:"dragdrop-keyboard-drag",isDraggedClass:"sortable-list-is-dragged",currentPositionClass:"sortable-list-current-position",sourceListClass:"sortable-list-source",targetListClass:"sortable-list-target",overElementClass:"sortable-list-over-element"},k=function(a){return{setup:function setup(b,c,d){if(c.includes("notPassive")){this.addEventListener(a,d,{passive:!1});return!0}else{return!1}}}};if(function eventListenerOptionsSupported(){var a=!1,b;try{b=Object.defineProperty({},"passive",{get:function get(){a=!0}});document.addEventListener("testpassiveeventoptions",b,b);document.removeEventListener("testpassiveeventoptions",b,b)}catch(b){a=!1}return a}){b.event.special.touchstart=k("touchstart");b.event.special.touchmove=k("touchmove");b.event.special.touchend=k("touchend")}var l=function(a,c){this.info=null;this.proxy=null;this.proxyDelta=null;this.dragCounter=0;this.lastEvent=null;this.config=b.extend({},h,c||{});this.config.listSelector=a;if(!this.config.targetListSelector){this.config.targetListSelector=a}if("object"===_typeof(this.config.listSelector)){b(this.config.listSelector).on("mousedown touchstart.notPassive",b.proxy(this.dragStartHandler,this))}else{b("body").on("mousedown touchstart.notPassive",this.config.listSelector,b.proxy(this.dragStartHandler,this))}if(null!==this.config.moveHandlerSelector){b("body").on("click keypress",this.config.moveHandlerSelector,b.proxy(this.clickHandler,this))}};l.EVENTS={DRAGSTART:"sortablelist-dragstart",DRAG:"sortablelist-drag",DROP:"sortablelist-drop",DRAGEND:"sortablelist-dragend"};l.prototype.resetDraggedClasses=function(){var a=[j.isDraggedClass,j.currentPositionClass,j.overElementClass,j.targetListClass];for(var c in a){b("."+a[c]).removeClass(a[c])}if(this.proxy){this.proxy.remove();this.proxy=b()}};l.prototype.calculatePositionOnPage=function(a){if(a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches[0]!==void 0){var c=a.originalEvent.touches[0];a.pageX=c.pageX;a.pageY=c.pageY}if(a.pageX===void 0){a.pageX=this.lastEvent.pageX;a.pageY=this.lastEvent.pageY}else{this.lastEvent=a}if(a.clientX===void 0){a.clientX=Math.round(a.pageX-b(window).scrollLeft());a.clientY=Math.round(a.pageY-b(window).scrollTop())}};l.prototype.dragStartHandler=function(a){if(null!==this.info){if("click"===this.info.type||"touchend"===this.info.type){return}this.moveElement(this.info.sourceList,this.info.sourceNextElement);this.finishDragging()}if("mousedown"===a.type&&1!==a.which){return}this.calculatePositionOnPage(a);var d=b(a.target).closest(b(a.currentTarget).children());if(!d.length){return}if(null!==this.config.moveHandlerSelector){if(!b(a.target).closest(this.config.moveHandlerSelector,d).length){return}}a.stopPropagation();a.preventDefault();this.dragCounter++;this.info={element:d,sourceNextElement:d.next(),sourceList:d.parent(),targetNextElement:d.next(),targetList:d.parent(),type:a.type,dropped:!1,startX:a.pageX,startY:a.pageY,startTime:new Date().getTime()};b(this.config.targetListSelector).addClass(j.targetListClass);var e=d.offset();d.addClass(j.currentPositionClass);this.proxyDelta={x:e.left-a.pageX,y:e.top-a.pageY};this.proxy=b();var f=this.dragCounter;setTimeout(b.proxy(function(){if(null===this.info||"click"===this.info.type||"keypress"===this.info.type||this.dragCounter!==f){return}this.createProxy()},this),500);b(window).on("mousemove touchmove.notPassive mouseup touchend.notPassive",b.proxy(this.dragHandler,this));b(window).on("keypress",b.proxy(this.dragcancelHandler,this));if(this.config.autoScroll){c.start(function(){b(window).trigger("mousemove")})}this.executeCallback(l.EVENTS.DRAGSTART)};l.prototype.createProxy=function(){this.proxy=this.info.element.clone();this.info.sourceList.append(this.proxy);this.proxy.removeAttr("id").removeClass(j.currentPositionClass).addClass(j.isDraggedClass).css({position:"fixed"});this.proxy.offset({top:this.proxyDelta.y+this.lastEvent.pageY,left:this.proxyDelta.x+this.lastEvent.pageX})};l.prototype.clickHandler=function(a){if("keypress"===a.type&&13!==a.originalEvent.keyCode&&32!==a.originalEvent.keyCode){return}if(null!==this.info){return}var c=b(a.target).closest(this.config.moveHandlerSelector),d=c.closest(this.config.listSelector),e=c.closest(d.children());if(!e.length){return}a.preventDefault();a.stopPropagation();this.dragCounter++;this.info={element:e,sourceNextElement:e.next(),sourceList:d,targetNextElement:e.next(),targetList:d,dropped:!1,type:a.type,startTime:new Date().getTime()};this.executeCallback(l.EVENTS.DRAGSTART);this.displayMoveDialogue(c)};l.prototype.getPositionInNode=function(a,b,c){if(!c.length){return null}var d=c[0],e=d.getBoundingClientRect(),f=b-(e.top+window.scrollY),g=a-(e.left+window.scrollX);if(g>=-0&&g<=e.width+0&&f>=-0&&f<=e.height+0){return{x:g,y:f,xRatio:e.width?g/e.width:0,yRatio:e.height?f/e.height:0}}return null};l.prototype.isListHorizontal=function(a){var b=this.config.isHorizontal;if(!0===b||!1===b){return b}return b(a)};l.prototype.dragHandler=function(a){a.preventDefault();a.stopPropagation();this.calculatePositionOnPage(a);this.proxy.offset({top:-1e3,left:-1e3});var c=b(document.elementFromPoint(a.clientX,a.clientY)),d=this.info.element[0],e=function(){return this!==d},f=c.closest("."+j.targetListClass+" > :not(."+j.isDraggedClass+")").filter(e),g=c.closest("."+j.targetListClass),h=this.proxy,i=function(){return!h||!h.length||this!==h[0]};b("."+j.overElementClass).removeClass(j.overElementClass);f.addClass(j.overElementClass);this.proxy.offset({top:this.proxyDelta.y+a.pageY,left:this.proxyDelta.x+a.pageX});if(g.length&&!g.children().filter(i).length){this.moveElement(g,b())}else if(1===f.length&&!this.info.element.find(f[0]).length){var k=this.getPositionInNode(a.pageX,a.pageY,f);if(k){var m=f.parent(),n=this.isListHorizontal(m)?k.xRatio:k.yRatio,o=f.find("."+j.targetListClass),p=!o.children().filter(i).filter(e).length;if(o.length&&p&&.2<n&&.8>n){this.moveElement(o,b())}else if(.5<n){this.moveElement(m,f.next().filter(i))}else{this.moveElement(m,f)}}}if("mouseup"===a.type||"touchend"===a.type){this.info.endX=a.pageX;this.info.endY=a.pageY;this.info.endTime=new Date().getTime();this.info.dropped=!0;this.info.positionChanged=this.hasPositionChanged(this.info);var q=this.info;this.executeCallback(l.EVENTS.DROP);this.finishDragging();if("touchend"===a.type&&null!==this.config.moveHandlerSelector&&500>q.endTime-q.startTime&&!q.positionChanged){this.clickHandler(a)}}};l.prototype.hasPositionChanged=function(a){return a.sourceList[0]!==a.targetList[0]||a.sourceNextElement.length!==a.targetNextElement.length||a.sourceNextElement.length&&a.sourceNextElement[0]!==a.targetNextElement[0]};l.prototype.moveElement=function(a,b){var c=this.info.element;if(b.length&&b[0]===c[0]){return}if(a[0]===this.info.targetList[0]&&b.length===this.info.targetNextElement.length&&b[0]===this.info.targetNextElement[0]){return}if(b.length){a[0].insertBefore(c[0],b[0])}else if(this.proxy&&this.proxy.parent().length&&this.proxy.parent()[0]===a[0]){a[0].insertBefore(c[0],this.proxy[0])}else{a[0].appendChild(c[0])}this.info.targetList=a;this.info.targetNextElement=b;this.executeCallback(l.EVENTS.DRAG)};l.prototype.finishDragging=function(){this.resetDraggedClasses();if(this.config.autoScroll){c.stop()}b(window).off("mousemove touchmove.notPassive mouseup touchend.notPassive",b.proxy(this.dragHandler,this));b(window).off("keypress",b.proxy(this.dragcancelHandler,this));this.executeCallback(l.EVENTS.DRAGEND);this.info=null};l.prototype.executeCallback=function(a){this.info.element.trigger(a,this.info)};l.prototype.dragcancelHandler=function(a){if("keypress"!==a.type||27!==a.originalEvent.keyCode){return}this.moveElement(this.info.sourceList,this.info.sourceNextElement);this.finishDragging()};l.prototype.getElementName=function(a){return b.Deferred().resolve(a.text())};l.prototype.getDestinationName=function(a,b){if(!b.length){return d.get_string("movecontenttothetop","moodle")}else{return this.getElementName(b).then(function(a){return d.get_string("movecontentafter","moodle",a)})}};l.prototype.getMoveDialogueTitle=function(a,c){if(c.attr("title")){return b.Deferred().resolve(c.attr("title"))}return this.getElementName(a).then(function(a){return d.get_string("movecontent","moodle",a)})};l.prototype.getDestinationsList=function(){var a=[],c=b(this.config.targetListSelector),d=b("<ul/>").addClass(j.keyboardDragClass),e=b.when().then(function(){return d}),f=b.proxy(function(c,f,g){if(f.is(this.info.element)||g.is(this.info.element)){return}if(b.contains(this.info.element[0],c[0])){return}e=e.then(b.proxy(function(){return this.getDestinationName(c,g)},this)).then(function(e){var g=b("<li/>").appendTo(d),h=b("<a href=\"#\"/>").attr("data-core_sortable_list-quickmove",1).appendTo(g);h.data("parent-element",c).data("before-element",f).text(e);return d})},this),g=function(){if(-1!==b.inArray(this,a)){return}a.push(this);var d=b(this),e=d.children();e.each(function(){var a=b(this);f(d,a,a.prev());a.find(c).each(g)});f(d,b(),e.last())};c.each(g);return e};l.prototype.displayMoveDialogue=function(a){e.create({type:e.types.CANCEL,title:this.getMoveDialogueTitle(this.info.element,a),body:this.getDestinationsList()}).then(b.proxy(function(c){var d=b.proxy(function(d){d.preventDefault();d.stopPropagation();this.moveElement(b(d.currentTarget).data("parent-element"),b(d.currentTarget).data("before-element"));this.info.endTime=new Date().getTime();this.info.positionChanged=this.hasPositionChanged(this.info);this.info.dropped=!0;a.focus();this.executeCallback(l.EVENTS.DROP);c.hide()},this);c.getRoot().on("click","[data-core_sortable_list-quickmove]",d);c.getRoot().on(f.hidden,b.proxy(function(){c.getRoot().off("click","[data-core_sortable_list-quickmove]",d);c.destroy();this.finishDragging()},this));c.setLarge();c.show();return c},this)).catch(g.exception)};return l});
function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}(function(a,b){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&exports&&"string"!=typeof exports.nodeName){b(exports)}else if("function"==typeof define&&define.amd){define ("core/mustache",["exports"],b)}else{a.Mustache={};b(a.Mustache)}})(this,function(a){var o=Object.prototype.toString,p=Array.isArray||function(a){return"[object Array]"===o.call(a)};function b(a){return"function"==typeof a}function c(a){return p(a)?"array":_typeof(a)}function d(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function e(a,b){return null!=a&&"object"===_typeof(a)&&b in a}function f(a,b){return null!=a&&"object"!==_typeof(a)&&a.hasOwnProperty&&a.hasOwnProperty(b)}var q=RegExp.prototype.test;function g(a,b){return q.call(a,b)}var r=/\S/;function h(a){return!g(r,a)}var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var u=/\s*/,v=/\s+/,w=/\s*=/,x=/\s*\}/,y=/#|\^|\/|>|\{|&|=|!|\$|</;function i(b,c){if(!b)return[];var g=[],m=[],n=[],o=!1,q=!1;function e(){if(o&&!q){while(n.length){delete m[n.pop()]}}else{n=[]}o=!1;q=!1}var r,s,t;function f(a){if("string"==typeof a)a=a.split(v,2);if(!p(a)||2!==a.length)throw new Error("Invalid tags: "+a);r=new RegExp(d(a[0])+"\\s*");s=new RegExp("\\s*"+d(a[1]));t=new RegExp("\\s*"+d("}"+a[1]))}f(c||a.tags);var z=new l(b),A,B,C,D,E,F;while(!z.eos()){A=z.pos;C=z.scanUntil(r);if(C){for(var G=0,H=C.length;G<H;++G){D=C.charAt(G);if(h(D)){n.push(m.length)}else{q=!0}m.push(["text",D,A,A+1]);A+=1;if("\n"===D)e()}}if(!z.scan(r))break;o=!0;B=z.scan(y)||"name";z.scan(u);if("="===B){C=z.scanUntil(w);z.scan(w);z.scanUntil(s)}else if("{"===B){C=z.scanUntil(t);z.scan(x);z.scanUntil(s);B="&"}else{C=z.scanUntil(s)}if(!z.scan(s))throw new Error("Unclosed tag at "+z.pos);E=[B,C,A,z.pos];m.push(E);if("#"===B||"^"===B||"$"===B||"<"===B){g.push(E)}else if("/"===B){F=g.pop();if(!F)throw new Error("Unopened section \""+C+"\" at "+A);if(F[1]!==C)throw new Error("Unclosed section \""+F[1]+"\" at "+A)}else if("name"===B||"{"===B||"&"===B){q=!0}else if("="===B){f(C)}}F=g.pop();if(F)throw new Error("Unclosed section \""+F[1]+"\" at "+z.pos);return k(j(m))}function j(a){for(var b=[],c,d,e=0,f=a.length;e<f;++e){c=a[e];if(c){if("text"===c[0]&&d&&"text"===d[0]){d[1]+=c[1];d[3]=c[3]}else{b.push(c);d=c}}}return b}function k(a){for(var b=[],c=b,d=[],e,f,g=0,h=a.length;g<h;++g){e=a[g];switch(e[0]){case"$":case"<":case"#":case"^":c.push(e);d.push(e);c=e[4]=[];break;case"/":f=d.pop();f[5]=e[2];c=0<d.length?d[d.length-1][4]:b;break;default:c.push(e);}}return b}function l(a){this.string=a;this.tail=a;this.pos=0}l.prototype.eos=function(){return""===this.tail};l.prototype.scan=function(a){var b=this.tail.match(a);if(!b||0!==b.index)return"";var c=b[0];this.tail=this.tail.substring(c.length);this.pos+=c.length;return c};l.prototype.scanUntil=function(a){var b=this.tail.search(a),c;switch(b){case-1:c=this.tail;this.tail="";break;case 0:c="";break;default:c=this.tail.substring(0,b);this.tail=this.tail.substring(b);}this.pos+=c.length;return c};function m(a,b){this.view=a;this.blocks={};this.cache={".":this.view};this.parent=b}m.prototype.push=function(a){return new m(a,this)};m.prototype.setBlockVar=function(a,b){var c=this.blocks;c[a]=b;return b};m.prototype.clearBlockVars=function(){this.blocks={}};m.prototype.getBlockVar=function(a){var b=this.blocks,c;if(b.hasOwnProperty(a)){c=b[a]}else{if(this.parent){c=this.parent.getBlockVar(a)}}return c};m.prototype.lookup=function(a){var c=this.cache,d;if(c.hasOwnProperty(a)){d=c[a]}else{var g=this,h,i,j,k=!1;while(g){if(0<a.indexOf(".")){h=g.view;i=a.split(".");j=0;while(null!=h&&j<i.length){if(j===i.length-1)k=e(h,i[j])||f(h,i[j]);h=h[i[j++]]}}else{h=g.view[a];k=e(g.view,a)}if(k){d=h;break}g=g.parent}c[a]=d}if(b(d))d=d.call(this.view);return d};function n(){this.cache={}}n.prototype.clearCache=function(){this.cache={}};n.prototype.parse=function(b,c){var d=this.cache,e=b+":"+(c||a.tags).join(":"),f=d[e];if(null==f)f=d[e]=i(b,c);return f};n.prototype.render=function(a,b,c,d){var e=this.parse(a,d),f=b instanceof m?b:new m(b);return this.renderTokens(e,f,c,a,d)};n.prototype.renderTokens=function(a,b,c,d,e){for(var f="",g,h,j,k=0,l=a.length;k<l;++k){j=void 0;g=a[k];h=g[0];if("#"===h)j=this.renderSection(g,b,c,d);else if("^"===h)j=this.renderInverted(g,b,c,d);else if(">"===h)j=this.renderPartial(g,b,c,e);else if("<"===h)j=this.renderBlock(g,b,c,d);else if("$"===h)j=this.renderBlockVariable(g,b,c,d);else if("&"===h)j=this.unescapedValue(g,b);else if("name"===h)j=this.escapedValue(g,b);else if("text"===h)j=this.rawValue(g);if(j!==void 0)f+=j}return f};n.prototype.renderSection=function(a,c,d,e){var g=this,h="",i=c.lookup(a[1]);function f(a){return g.render(a,c,d)}if(!i)return;if(p(i)){for(var k=0,l=i.length;k<l;++k){h+=this.renderTokens(a[4],c.push(i[k]),d,e)}}else if("object"===_typeof(i)||"string"==typeof i||"number"==typeof i){h+=this.renderTokens(a[4],c.push(i),d,e)}else if(b(i)){if("string"!=typeof e)throw new Error("Cannot use higher-order sections without the original template");i=i.call(c.view,e.slice(a[3],a[5]),f);if(null!=i)h+=i}else{h+=this.renderTokens(a[4],c,d,e)}return h};n.prototype.renderInverted=function(a,b,c,d){var e=b.lookup(a[1]);if(!e||p(e)&&0===e.length)return this.renderTokens(a[4],b,c,d)};n.prototype.renderPartial=function(a,c,d,e){if(!d)return;var f=b(d)?d(a[1]):d[a[1]];if(null!=f)return this.renderTokens(this.parse(f,e),c,d,f)};n.prototype.renderBlock=function(a,c,d,e){if(!d)return;var f=b(d)?d(a[1]):d[a[1]];if(null!=f)c.clearBlockVars();this.renderTokens(a[4],c,d,e);var g=this.renderTokens(this.parse(f),c,d,f);c.clearBlockVars();return g};n.prototype.renderBlockVariable=function(a,b,c,d){var e=a[1],f=b.getBlockVar(e);if(!f){b.setBlockVar(e,d.slice(a[3],a[5]));return this.renderTokens(a[4],b,c,d)}else{return this.renderTokens(this.parse(f),b,c,f)}};n.prototype.unescapedValue=function(a,b){var c=b.lookup(a[1]);if(null!=c)return c};n.prototype.escapedValue=function(b,c){var d=c.lookup(b[1]);if(null!=d)return a.escape(d)};n.prototype.rawValue=function(a){return a[1]};a.name="mustache.js";a.version="3.0.1";a.tags=["{{","}}"];var z=new n;a.clearCache=function(){return z.clearCache()};a.parse=function(a,b){return z.parse(a,b)};a.render=function(a,b,d,e){if("string"!=typeof a){throw new TypeError("Invalid template! Template should be a \"string\" but \""+c(a)+"\" was given as the first argument for mustache#render(template, view, partials)")}return z.render(a,b,d,e)};a.to_html=function(c,d,e,f){var g=a.render(c,d,e);if(b(f)){f(g)}else{return g}};a.escape=function(a){return(a+"").replace(/[&<>"'`=\/]/g,function(a){return t[a]})};a.Scanner=l;a.Context=m;a.Writer=n;return a});
define ("core/config",function(){return M.cfg});
define ("core/custom_interaction_events",["jquery","core/key_codes"],function(a,b){var c={activate:"cie:activate",keyboardActivate:"cie:keyboardactivate",escape:"cie:escape",down:"cie:down",up:"cie:up",home:"cie:home",end:"cie:end",next:"cie:next",previous:"cie:previous",asterix:"cie:asterix",scrollLock:"cie:scrollLock",scrollTop:"cie:scrollTop",scrollBottom:"cie:scrollBottom",ctrlPageUp:"cie:ctrlPageUp",ctrlPageDown:"cie:ctrlPageDown",enter:"cie:enter"},d={},e=function(a,b){b=b||[];if(b.length&&-1!==b.indexOf(a)){return!0}return!1},f=function(a){return a.shiftKey||a.metaKey||a.altKey||a.ctrlKey},g=function(b,c){var e="";if(!c.hasOwnProperty("originalEvent")){e=""+b+c.type+c.timeStamp;if(!d.hasOwnProperty(e)){d[e]=!0;a(c.target).trigger(b,[{originalEvent:c}])}return}e="triggeredCustom_"+b;if(!c.originalEvent.hasOwnProperty(e)){c.originalEvent[e]=!0;a(c.target).trigger(b,[{originalEvent:c}])}},h=function(a,b,c){a.off("keydown."+b).on("keydown."+b,function(a){if(!f(a)){if(a.keyCode==c){g(b,a)}}})},i=function(a){a.off("click.cie.activate").on("click.cie.activate",function(a){g(c.activate,a)});a.off("keydown.cie.activate").on("keydown.cie.activate",function(a){if(!f(a)){if(a.keyCode==b.enter||a.keyCode==b.space){g(c.activate,a)}}})},j=function(a){a.off("keydown.cie.keyboardactivate").on("keydown.cie.keyboardactivate",function(a){if(!f(a)){if(a.keyCode==b.enter||a.keyCode==b.space){g(c.keyboardActivate,a)}}})},k=function(a){h(a,c.escape,b.escape)},l=function(a){h(a,c.down,b.arrowDown)},m=function(a){h(a,c.up,b.arrowUp)},n=function(a){h(a,c.home,b.home)},o=function(a){h(a,c.end,b.end)},p=function(d){var e="rtl"==a("html").attr("dir")?b.arrowLeft:b.arrowRight;h(d,c.next,e)},q=function(d){var e="rtl"==a("html").attr("dir")?b.arrowRight:b.arrowLeft;h(d,c.previous,e)},r=function(a){h(a,c.asterix,b.asterix)},s=function(a){a.off("scroll.cie.scrollTop").on("scroll.cie.scrollTop",function(b){var d=a.scrollTop();if(0===d){g(c.scrollTop,b)}})},t=function(a){a.off("scroll.cie.scrollBottom").on("scroll.cie.scrollBottom",function(b){var d=a.scrollTop(),e=a.innerHeight(),f=a[0].scrollHeight;if(d+e>=f){g(c.scrollBottom,b)}})},u=function(a){a.off("DOMMouseScroll.cie.DOMMouseScrollLock mousewheel.cie.mousewheelLock").on("DOMMouseScroll.cie.DOMMouseScrollLock mousewheel.cie.mousewheelLock",function(b){var d=a.scrollTop(),e=a[0].scrollHeight,f=a.height(),h="DOMMouseScroll"==b.type?-40*b.originalEvent.detail:b.originalEvent.wheelDelta,i=0<h;if(!i&&-h>e-f-d){a.scrollTop(e);b.stopPropagation();b.preventDefault();b.returnValue=!1;g(c.scrollLock,b);return!1}else if(i&&h>d){a.scrollTop(0);b.stopPropagation();b.preventDefault();b.returnValue=!1;g(c.scrollLock,b);return!1}return!0})},v=function(a){a.off("keydown.cie.ctrlpageup").on("keydown.cie.ctrlpageup",function(a){if(a.ctrlKey){if(a.keyCode==b.pageUp){g(c.ctrlPageUp,a)}}})},w=function(a){a.off("keydown.cie.ctrlpagedown").on("keydown.cie.ctrlpagedown",function(a){if(a.ctrlKey){if(a.keyCode==b.pageDown){g(c.ctrlPageDown,a)}}})},x=function(a){h(a,c.enter,b.enter)},y=function(){var a={};a[c.activate]=i;a[c.keyboardActivate]=j;a[c.escape]=k;a[c.down]=l;a[c.up]=m;a[c.home]=n;a[c.end]=o;a[c.next]=p;a[c.previous]=q;a[c.asterix]=r;a[c.scrollLock]=u;a[c.scrollTop]=s;a[c.scrollBottom]=t;a[c.ctrlPageUp]=v;a[c.ctrlPageDown]=w;a[c.enter]=x;return a};return{define:function define(b,c){b=a(b);c=c||[];if(!b.length||!c.length){return}a.each(y(),function(a,d){if(e(a,c)){d(b)}})},events:c}});
define ("core/chart_output_chartjs",["jquery","core/chartjs","core/chart_axis","core/chart_bar","core/chart_output_base","core/chart_line","core/chart_pie","core/chart_series"],function(a,b,c,d,e,f,g,h){var j=function(a,b){return"axis-"+a+"-"+b};function i(){e.prototype.constructor.apply(this,arguments);this._canvas=this._node;if("CANVAS"!=this._canvas.prop("tagName")){this._canvas=a("<canvas>");this._node.append(this._canvas)}this._build()}i.prototype=Object.create(e.prototype);i.prototype._config=null;i.prototype._chartjs=null;i.prototype._canvas=null;i.prototype._build=function(){this._config=this._makeConfig();this._chartjs=new b(this._canvas[0],this._config)};i.prototype._cleanData=function(b){if(b instanceof Array){return b.map(function(b){return a("<span>").html(b).text()})}else{return a("<span>").html(b).text()}};i.prototype._getChartType=function(){var a=this._chart.getType();if(this._chart.getType()===d.prototype.TYPE&&!0===this._chart.getHorizontal()){a="horizontalBar"}else if(this._chart.getType()===g.prototype.TYPE&&!0===this._chart.getDoughnut()){a="doughnut"}return a};i.prototype._makeAxisConfig=function(a,b,d){var e={id:j(b,d)};if(a.getPosition()!==c.prototype.POS_DEFAULT){e.position=a.getPosition()}if(null!==a.getLabel()){e.scaleLabel={display:!0,labelString:this._cleanData(a.getLabel())}}if(null!==a.getStepSize()){e.ticks=e.ticks||{};e.ticks.stepSize=a.getStepSize()}if(null!==a.getMax()){e.ticks=e.ticks||{};e.ticks.max=a.getMax()}if(null!==a.getMin()){e.ticks=e.ticks||{};e.ticks.min=a.getMin()}return e};i.prototype._makeConfig=function(){var a={type:this._getChartType(),data:{labels:this._cleanData(this._chart.getLabels()),datasets:this._makeDatasetsConfig()},options:{title:{display:null!==this._chart.getTitle(),text:this._cleanData(this._chart.getTitle())}}};this._chart.getXAxes().forEach(function(b,c){var d=b.getLabels();a.options.scales=a.options.scales||{};a.options.scales.xAxes=a.options.scales.xAxes||[];a.options.scales.xAxes[c]=this._makeAxisConfig(b,"x",c);if(null!==d){a.options.scales.xAxes[c].ticks.callback=function(a,b){return d[b]||""}}a.options.scales.xAxes[c].stacked=this._isStacked()}.bind(this));this._chart.getYAxes().forEach(function(b,c){var d=b.getLabels();a.options.scales=a.options.scales||{};a.options.scales.yAxes=a.options.scales.yAxes||[];a.options.scales.yAxes[c]=this._makeAxisConfig(b,"y",c);if(null!==d){a.options.scales.yAxes[c].ticks.callback=function(a){return d[parseInt(a,10)]||""}}a.options.scales.yAxes[c].stacked=this._isStacked()}.bind(this));a.options.tooltips={callbacks:{label:this._makeTooltip.bind(this)}};return a};i.prototype._makeDatasetsConfig=function(){var a=this._chart.getSeries().map(function(a){var b=a.hasColoredValues()?a.getColors():a.getColor(),c={label:this._cleanData(a.getLabel()),data:a.getValues(),type:a.getType(),fill:!1,backgroundColor:b,borderColor:this._chart.getType()==g.prototype.TYPE?"#fff":b,lineTension:this._isSmooth(a)?.3:0};if(null!==a.getXAxis()){c.xAxisID=j("x",a.getXAxis())}if(null!==a.getYAxis()){c.yAxisID=j("y",a.getYAxis())}return c}.bind(this));return a};i.prototype._makeTooltip=function(a,b){var c=this._chart.getSeries()[a.datasetIndex],d=c.getLabel(),e=c.getLabels(),f=b.datasets[a.datasetIndex].data,g=f[a.index],h=[];if(""==a.xLabel&&""==a.yLabel){var i=this._cleanData(this._chart.getLabels());h.push(i[a.index])}if(null!==e){h.push(this._cleanData(e[a.index]))}else{h.push(this._cleanData(d)+": "+g)}return h};i.prototype._isSmooth=function(a){var b=!1;if(this._chart.getType()===f.prototype.TYPE){b=a.getSmooth();if(null===b){b=this._chart.getSmooth()}}else if(a.getType()===h.prototype.TYPE_LINE){b=a.getSmooth()}return b};i.prototype._isStacked=function(){var a=!1;if(this._chart.getType()===d.prototype.TYPE){a=this._chart.getStacked()}return a};i.prototype.update=function(){a.extend(!0,this._config,this._makeConfig());this._chartjs.update()};return i});
define ("core/drawer",["exports","jquery","core/pubsub","core/drawer_events"],function(a,b,c,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;b=e(b);c=function(a){if(a&&a.__esModule){return a}else{var b={};if(null!=a){for(var c in a){if(Object.prototype.hasOwnProperty.call(a,c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,c):{};if(d.get||d.set){Object.defineProperty(b,c,d)}else{b[c]=a[c]}}}}b.default=a;return b}}(c);d=e(d);function e(a){return a&&a.__esModule?a:{default:a}}var f=function(a){a.removeClass("hidden");a.attr("aria-expanded",!0);a.removeAttr("aria-hidden");a.focus();c.publish(d.default.DRAWER_SHOWN,a)},g=function(a){a.addClass("hidden");a.attr("aria-expanded",!1);a.attr("aria-hidden",!0);c.publish(d.default.DRAWER_HIDDEN,a)},h=function(a){var b=a.hasClass("hidden");return!b},i=function(a){if(h(a)){g(a)}else{f(a)}},j=function(a){a=(0,b.default)(a);return a.closest("[data-region=\"right-hand-drawer\"]")};a.default={hide:g,show:f,isVisible:h,toggle:i,registerToggles:function registerToggles(a,b){var c=null;b.attr("aria-expanded",h(a));b.on("click",function(d){d.preventDefault();var e=h(a);i(a);b.attr("aria-expanded",!e);if(!e){c=b.filter(function(a,b){return b==d.target||b.contains(d.target)})}else if(c){c.focus();c=null}})},getDrawerRoot:j};return a.default});
define ("core/sessionstorage",["core/config","core/storagewrapper"],function(a,b){var c=new b(window.sessionStorage);return{get:function get(a){return c.get(a)},set:function set(a,b){return c.set(a,b)}}});
define ("core/popover_region_controller",["jquery","core/str","core/custom_interaction_events"],function(a,b,c){var d={CONTENT:".popover-region-content",CONTENT_CONTAINER:".popover-region-content-container",MENU_CONTAINER:".popover-region-container",MENU_TOGGLE:".popover-region-toggle",CAN_RECEIVE_FOCUS:"input:not([type=\"hidden\"]), a[href], button, textarea, select, [tabindex]"},e=function(b){this.root=a(b);this.content=this.root.find(d.CONTENT);this.contentContainer=this.root.find(d.CONTENT_CONTAINER);this.menuContainer=this.root.find(d.MENU_CONTAINER);this.menuToggle=this.root.find(d.MENU_TOGGLE);this.isLoading=!1;this.promises={closeHandlers:a.Deferred(),navigationHandlers:a.Deferred()};this.registerBaseEventListeners()};e.prototype.events=function(){return{menuOpened:"popoverregion:menuopened",menuClosed:"popoverregion:menuclosed",startLoading:"popoverregion:startLoading",stopLoading:"popoverregion:stopLoading"}};e.prototype.getContentContainer=function(){return this.contentContainer};e.prototype.getContent=function(){return this.content};e.prototype.isMenuOpen=function(){return!this.root.hasClass("collapsed")};e.prototype.toggleMenu=function(){if(this.isMenuOpen()){this.closeMenu()}else{this.openMenu()}};e.prototype.closeMenu=function(){if(!this.isMenuOpen()){return}this.root.addClass("collapsed");this.menuContainer.attr("aria-expanded","false");this.menuContainer.attr("aria-hidden","true");this.updateButtonAriaLabel();this.root.trigger(this.events().menuClosed)};e.prototype.openMenu=function(){if(this.isMenuOpen()){return}this.root.removeClass("collapsed");this.menuContainer.attr("aria-expanded","true");this.menuContainer.attr("aria-hidden","false");this.updateButtonAriaLabel();this.promises.closeHandlers.resolve();this.promises.navigationHandlers.resolve();this.root.trigger(this.events().menuOpened)};e.prototype.updateButtonAriaLabel=function(){if(this.isMenuOpen()){b.get_string("hidepopoverwindow").done(function(a){this.menuToggle.attr("aria-label",a)}.bind(this))}else{b.get_string("showpopoverwindow").done(function(a){this.menuToggle.attr("aria-label",a)}.bind(this))}};e.prototype.startLoading=function(){this.isLoading=!0;this.getContentContainer().addClass("loading");this.getContentContainer().attr("aria-busy","true");this.root.trigger(this.events().startLoading)};e.prototype.stopLoading=function(){this.isLoading=!1;this.getContentContainer().removeClass("loading");this.getContentContainer().attr("aria-busy","false");this.root.trigger(this.events().stopLoading)};e.prototype.focusMenuToggle=function(){this.menuToggle.focus()};e.prototype.contentItemHasFocus=function(){return 0<this.getContentItemWithFocus().length};e.prototype.getContentItemWithFocus=function(){var b=a(document.activeElement),c=this.getContent().children(),d=c.filter(b);if(!d.length){d=c.has(b)}return d};e.prototype.focusContentItem=function(a){if(a.is(d.CAN_RECEIVE_FOCUS)){a.focus()}else{a.find(d.CAN_RECEIVE_FOCUS).first().focus()}};e.prototype.focusFirstContentItem=function(){this.focusContentItem(this.getContent().children().first())};e.prototype.focusLastContentItem=function(){this.focusContentItem(this.getContent().children().last())};e.prototype.focusNextContentItem=function(){var a=this.getContentItemWithFocus();if(a.length&&a.next()){this.focusContentItem(a.next())}};e.prototype.focusPreviousContentItem=function(){var a=this.getContentItemWithFocus();if(a.length&&a.prev()){this.focusContentItem(a.prev())}};e.prototype.registerBaseEventListeners=function(){c.define(this.root,[c.events.activate,c.events.escape]);this.root.on(c.events.activate,d.MENU_TOGGLE,function(){this.toggleMenu()}.bind(this));this.promises.closeHandlers.done(function(){this.root.on(c.events.escape,function(){this.closeMenu();this.focusMenuToggle()}.bind(this));a("html").click(function(b){var c=a(b.target);if(!this.root.is(c)&&!this.root.has(c).length){this.closeMenu()}}.bind(this));c.define(this.getContentContainer(),[c.events.scrollBottom])}.bind(this))};e.prototype.registerListNavigationEventListeners=function(){c.define(this.root,[c.events.down]);this.root.on(c.events.down,function(a,b){if(!this.isMenuOpen()){this.openMenu();this.focusFirstContentItem()}else{if(this.contentItemHasFocus()){this.focusNextContentItem()}else{this.focusFirstContentItem()}}b.originalEvent.preventDefault()}.bind(this));this.promises.navigationHandlers.done(function(){c.define(this.root,[c.events.up,c.events.home,c.events.end]);this.root.on(c.events.up,function(a,b){this.focusPreviousContentItem();b.originalEvent.preventDefault()}.bind(this));this.root.on(c.events.home,function(a,b){this.focusFirstContentItem();b.originalEvent.preventDefault()}.bind(this));this.root.on(c.events.end,function(a,b){this.focusLastContentItem();b.originalEvent.preventDefault()}.bind(this))}.bind(this))};return e});
define ("core/paged_content",["jquery","core/paged_content_pages","core/paged_content_paging_bar","core/paged_content_paging_bar_limit_selector","core/paged_content_paging_dropdown"],function(a,b,c,d,e){return{init:function init(f,g,h){f=a(f);var i=f.find(b.rootSelector),j=f.find(c.rootSelector),k=f.find(e.rootSelector),l=f.find(d.rootSelector),m=f.attr("id");if(h){m=h}b.init(i,m,g);if(j.length){c.init(j,m)}if(l.length){d.init(l,m)}if(k.length){e.init(k,m)}},rootSelector:"[data-region=\"paged-content-container\"]"}});
define ("core/dragdrop",["jquery","core/autoscroll"],function(a,b){var c={eventCaptureOptions:{passive:!1,capture:!0},dragProxy:null,onMove:null,onDrop:null,initialPosition:null,initialX:null,initialY:null,touching:null,prepare:function prepare(a){a.preventDefault();var b;if("touchstart"===a.type){b=null===c.touching&&0<a.changedTouches.length}else{b=1===a.which}if(b){var d=c.getEventXY(a);d.start=!0;return d}else{return{start:!1}}},start:function start(a,d,e,f){var g=c.getEventXY(a);c.initialX=g.x;c.initialY=g.y;c.initialPosition=d.offset();c.dragProxy=d;c.onMove=e;c.onDrop=f;switch(a.type){case"mousedown":c.addEventSpecial("mousemove",c.mouseMove);c.addEventSpecial("mouseup",c.mouseUp);break;case"touchstart":c.addEventSpecial("touchend",c.touchEnd);c.addEventSpecial("touchcancel",c.touchEnd);c.addEventSpecial("touchmove",c.touchMove);c.touching=a.changedTouches[0].identifier;break;default:throw new Error("Unexpected event type: "+a.type);}b.start(c.scroll)},addEventSpecial:function addEventSpecial(a,b){try{window.addEventListener(a,b,c.eventCaptureOptions)}catch(d){c.eventCaptureOptions=!0;window.addEventListener(a,b,c.eventCaptureOptions)}},getEventXY:function getEventXY(a){switch(a.type){case"touchstart":return{x:a.changedTouches[0].pageX,y:a.changedTouches[0].pageY};case"mousedown":return{x:a.pageX,y:a.pageY};default:throw new Error("Unexpected event type: "+a.type);}},touchMove:function touchMove(a){a.preventDefault();for(var b=0;b<a.changedTouches.length;b++){if(a.changedTouches[b].identifier===c.touching){c.handleMove(a.changedTouches[b].pageX,a.changedTouches[b].pageY)}}},mouseMove:function mouseMove(a){c.handleMove(a.pageX,a.pageY)},handleMove:function handleMove(b,d){var e=c.dragProxy.offset(),f=e.top-parseInt(c.dragProxy.css("top")),g=e.left-parseInt(c.dragProxy.css("left")),h=a(document).height()-c.dragProxy.outerHeight()-f,i=a(document).width()-c.dragProxy.outerWidth()-g,j=c.initialPosition,k={top:Math.max(-f,Math.min(h,j.top+(d-c.initialY)-f)),left:Math.max(-g,Math.min(i,j.left+(b-c.initialX)-g))};c.dragProxy.css(k);c.onMove(b,d,c.dragProxy)},touchEnd:function touchEnd(a){a.preventDefault();for(var b=0;b<a.changedTouches.length;b++){if(a.changedTouches[b].identifier===c.touching){c.handleEnd(a.changedTouches[b].pageX,a.changedTouches[b].pageY)}}},mouseUp:function mouseUp(a){c.handleEnd(a.pageX,a.pageY)},handleEnd:function handleEnd(a,d){if(null!==c.touching){window.removeEventListener("touchend",c.touchEnd,c.eventCaptureOptions);window.removeEventListener("touchcancel",c.touchEnd,c.eventCaptureOptions);window.removeEventListener("touchmove",c.touchMove,c.eventCaptureOptions);c.touching=null}else{window.removeEventListener("mousemove",c.mouseMove,c.eventCaptureOptions);window.removeEventListener("mouseup",c.mouseUp,c.eventCaptureOptions)}b.stop();c.onDrop(a,d,c.dragProxy)},scroll:function scroll(b){var d=a(document).height()-c.dragProxy.outerHeight(),e=c.dragProxy.offset();e.top=Math.min(d,e.top+b);c.dragProxy.css(e)}};return{prepare:c.prepare,start:c.start}});
define ("core/checkbox-toggleall",["jquery","core/pubsub"],function(a,b){var c=!1,d={checkboxToggled:"core/checkbox-toggleall:checkboxToggled"},e=function(a,b,c){if(c){return a.find("[data-action=\"toggle\"][data-togglegroup=\""+b+"\"]")}else{return a.find("[data-action=\"toggle\"][data-togglegroup^=\""+b+"\"]")}},f=function(a,b){return e(a,b,!1).filter("[data-toggle=\"slave\"]")},g=function(a,b,c){return e(a,b,c).filter("[data-toggle=\"master\"]")},h=function(a,b){return e(a,b,!0).filter("[data-toggle=\"action\"]")},i=function(c){var e=c.data.root,g=a(c.target),h=g.data("togglegroup"),i;if(g.is(":checkbox")){i=g.is(":checked")}else{i=1===g.data("checkall")}var j=f(e,h),k=j.filter(":checked");l(e,h,i,!1);j.prop("checked",i);j.trigger("change");b.publish(d.checkboxToggled,{root:e,toggleGroupName:h,slaves:j,checkedSlaves:k,anyChecked:i})},j=function(c){var e=c.data.root,g=a(c.target),h=g.data("togglegroup").split(" "),i=[],j="";h.forEach(function(a){j+=" "+a;i.push(j.trim())});i.forEach(function(a){var c=f(e,a),g=c.filter(":checked"),h=c.length===g.length;l(e,a,h,!0);k(e,a,!g.length);b.publish(d.checkboxToggled,{root:e,toggleGroupName:a,slaves:c,checkedSlaves:g,anyChecked:!!g.length})})},k=function(a,b,c){h(a,b).prop("disabled",c)},l=function(b,c,d,e){var f=g(b,c,e);f.prop("checked",d);f.each(function(c,e){e=a(e);var f;if(d){f=e.data("toggle-deselectall")}else{f=e.data("toggle-selectall")}if(e.is(":checkbox")){var g=b.find("[for=\""+e.attr("id")+"\"]");if(g.length){if(g.html()!==f){g.html(f)}}}else{e.text(f);e.data("checkall",d?0:1)}})},m=function(){if(!c){c=!0;var b=a(document.body);b.on("click","[data-action=\"toggle\"][data-toggle=\"master\"]",{root:b},i);b.on("change","[data-action=\"toggle\"][data-toggle=\"slave\"]",{root:b},j)}};return{init:function init(){m()},events:d}});
define ("core/toast",["exports","core/templates","core/notification","core/pending"],function(a,b,c,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.add=a.addToastRegion=void 0;b=e(b);c=e(c);d=e(d);function e(a){return a&&a.__esModule?a:{default:a}}function f(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);if("function"==typeof Object.getOwnPropertySymbols){d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))}d.forEach(function(b){g(a,b,c[b])})}return a}function g(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}function h(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}if(h.done){b(i)}else{Promise.resolve(i).then(d,e)}}function i(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var i=a.apply(b,c);function f(a){h(i,d,e,f,g,"next",a)}function g(a){h(i,d,e,f,g,"throw",a)}f(void 0)})}}var j=function(){var a=i(regeneratorRuntime.mark(function a(e){var f,g,h,i;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:f=new d.default("addToastRegion");a.prev=1;a.next=4;return b.default.renderForPromise("core/local/toast/wrapper",{});case 4:g=a.sent;h=g.html;i=g.js;b.default.prependNodeContents(e,h,i);a.next=13;break;case 10:a.prev=10;a.t0=a["catch"](1);c.default.exception(a.t0);case 13:f.resolve();case 14:case"end":return a.stop();}}},a,null,[[1,10]])}));return function(){return a.apply(this,arguments)}}();a.addToastRegion=j;var k=function(){var a=i(regeneratorRuntime.mark(function a(e,g){var h,i,j,k,m,n;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:h=new d.default("addToastRegion");g=f({closeButton:!1,autohide:!0,delay:4e3},g);i="core/local/toast/message";a.prev=3;a.next=6;return l();case 6:j=a.sent;a.next=9;return b.default.renderForPromise(i,f({message:e},g));case 9:k=a.sent;m=k.html;n=k.js;b.default.prependNodeContents(j,m,n);a.next=18;break;case 15:a.prev=15;a.t0=a["catch"](3);c.default.exception(a.t0);case 18:h.resolve();case 19:case"end":return a.stop();}}},a,null,[[3,15]])}));return function(){return a.apply(this,arguments)}}();a.add=k;var l=function(){var a=i(regeneratorRuntime.mark(function a(){var b;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:b=document.querySelectorAll(".toast-wrapper");if(!b.length){a.next=3;break}return a.abrupt("return",b[b.length-1]);case 3:a.next=5;return j(document.body,"fixed-bottom");case 5:return a.abrupt("return",l());case 6:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}()});
define ("core/utils",["exports"],function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.debounce=a.throttle=void 0;a.throttle=function throttle(a,b){var c=!1,d=null,e=function(){for(var f=arguments.length,g=Array(f),h=0;h<f;h++){g[h]=arguments[h]}if(null===d){d=!1}else{d=!0}if(c){return}a.apply(this,g);c=!0;setTimeout(function(){var a=d;c=!1;d=null;if(a){e(g)}},b)};return e};a.debounce=function debounce(a,b){var c=null;return function(){for(var d=this,e=arguments.length,f=Array(e),g=0;g<e;g++){f[g]=arguments[g]}clearTimeout(c);c=setTimeout(function(){a.apply(d,f)},b)}}});
define ("core/modal_backdrop",["jquery","core/templates","core/notification"],function(a,b,c){var d={ROOT:"[data-region=\"modal-backdrop\"]"},e=function(b){this.root=a(b);this.isAttached=!1;if(!this.root.is(d.ROOT)){c.exception({message:"Element is not a modal backdrop"})}};e.prototype.getRoot=function(){return this.root};e.prototype.attachToDOM=function(){if(this.isAttached){return}a("body").append(this.root);this.isAttached=!0};e.prototype.setZIndex=function(a){this.root.css("z-index",a)};e.prototype.isVisible=function(){return this.root.hasClass("show")};e.prototype.hasTransitions=function(){return this.getRoot().hasClass("fade")};e.prototype.show=function(){if(this.isVisible()){return}if(!this.isAttached){this.attachToDOM()}this.root.removeClass("hide").addClass("show")};e.prototype.hide=function(){if(!this.isVisible()){return}if(this.hasTransitions()){this.getRoot().one("transitionend webkitTransitionEnd oTransitionEnd",function(){this.getRoot().removeClass("show").addClass("hide")}.bind(this))}else{this.getRoot().removeClass("show").addClass("hide")}};e.prototype.destroy=function(){this.root.remove()};return e});
define ("core/paged_content_pages",["jquery","core/templates","core/notification","core/pubsub","core/paged_content_events"],function(a,b,c,d,e){var f={ROOT:"[data-region=\"page-container\"]",PAGE_REGION:"[data-region=\"paged-content-page\"]",ACTIVE_PAGE_REGION:"[data-region=\"paged-content-page\"].active"},g={PAGING_CONTENT_ITEM:"core/paged_content_page",LOADING:"core/overlay_loading"},h=function(a,b){return a.find("[data-page=\""+b+"\"]")},i=function(d){var e=a.Deferred();d.attr("aria-busy",!0);b.render(g.LOADING,{visible:!0}).then(function(b){var c=a(b),f=setTimeout(function(){d.css("position","relative");c.appendTo(d)},300);e.always(function(){clearTimeout(f);c.remove();d.css("position","");d.removeAttr("aria-busy")})}).fail(c.exception);return e},j=function(d,e,f){var i=a.Deferred();e.then(function(a,e){e=e||"";b.render(g.PAGING_CONTENT_ITEM,{page:f,content:a}).then(function(a){b.appendNodeContents(d,a,e);var c=h(d,f);i.resolve(c)}).fail(function(a){i.reject(a)}).fail(c.exception)}).fail(function(a){i.reject(a)}).fail(c.exception);return i.promise()},k=function(b,g,k,l){var m=[],n=[],o=a.Deferred();g.forEach(function(a){var c=a.pageNumber,d=h(b,c);if(d.length){m.push(d)}else{n.push(a)}});if(n.length&&"function"==typeof l){var p=l(n,{allItemsLoaded:function allItemsLoaded(a){d.publish(k+e.ALL_ITEMS_LOADED,a)}}),q=p.map(function(a,c){return j(b,a,n[c].pageNumber)});a.when.apply(a,q).then(function(){var a=Array.prototype.slice.call(arguments);o.resolve(a)}).fail(function(a){o.reject(a)}).fail(c.exception)}else{o.resolve([])}var r=i(b);o.then(function(a){var c=m.concat(a);b.find(f.PAGE_REGION).addClass("hidden");c.forEach(function(a){if(!0){a.removeClass("hidden")}})}).then(function(){d.publish(k+e.PAGES_SHOWN,g)}).fail(c.exception).always(function(){r.resolve()})};return{init:function init(b,c,f){b=a(b);d.subscribe(c+e.SHOW_PAGES,function(a){k(b,a,c,f)});d.subscribe(c+e.SET_ITEMS_PER_PAGE_LIMIT,function(){b.empty()})},rootSelector:f.ROOT}});
define ("core/chart_output_htmltable",["jquery","core/chart_output_base"],function(a,b){function c(){b.prototype.constructor.apply(this,arguments);this._build()}c.prototype=Object.create(b.prototype);c.prototype._build=function(){this._node.empty();this._node.append(this._makeTable())};c.prototype._makeTable=function(){var b=a("<table>"),d=this._chart,c,e,f=d.getLabels(),g=0<f.length,h=d.getSeries(),i,j=h[0].getCount();b.addClass("chart-output-htmltable generaltable");if(null!==d.getTitle()){b.append(a("<caption>").text(d.getTitle()))}c=a("<tr>");if(g){c.append(a("<td>"))}h.forEach(function(b){c.append(a("<th>").text(b.getLabel()).attr("scope","col"))});b.append(c);for(var k=0;k<j;k++){c=a("<tr>");if(0<f.length){c.append(a("<th>").text(f[k]).attr("scope","row"))}for(var l=0;l<h.length;l++){e=h[l].getValues()[k];i=h[l].getLabels();if(null!==i){e=h[l].getLabels()[k]}c.append(a("<td>").text(e))}b.append(c)}return b};c.prototype.update=function(){this._build()};return c});
define ("core/first",["jquery"],function(a){a(document).bind("ajaxStart",function(){M.util.js_pending("jq")}).bind("ajaxStop",function(){M.util.js_complete("jq")})});
define ("core/tag",["jquery","core/ajax","core/templates","core/notification","core/str","core/modal_factory","core/modal_events","core/pending"],function(a,b,c,d,f,g,h,i){return{initTagindexPage:function initTagindexPage(){a("body").delegate(".tagarea[data-ta] a[data-quickload=1]","click",function(f){var e=new i;f.preventDefault();var g=a(this),h=g[0].search.replace(/^\?/,""),j=g.closest(".tagarea[data-ta]"),k=h.split("&").reduce(function(a,b){var c=b.split("=");a[c[0]]=decodeURIComponent(c[1]);return a},{});b.call([{methodname:"core_tag_get_tagindex",args:{tagindex:k}}])[0].then(function(a){return c.render("core_tag/index",a)}).then(function(a,b){c.replaceNode(j,a,b)}).then(e.resolve).catch(d.exception)})},initManagePage:function initManagePage(){a("body").on("updated","[data-inplaceeditable]",function(b){var c=new i("core/tag:initManagePage");f.get_strings([{key:"selecttag",component:"core_tag"},{key:"now",component:"core"}]).then(function(c){a("label[for=\"tagselect"+b.ajaxreturn.itemid+"\"]").html(c[0]);a(b.target).closest("tr").find("td.col-timemodified").html(c[1])}).then(c.resolve).catch(d.exception);if("tagflag"===b.ajaxreturn.itemtype){var e=a(b.target).closest("tr");if("0"===b.ajaxreturn.value){e.removeClass("flagged-tag")}else{e.addClass("flagged-tag")}}});a(".tag-management-table").delegate("a.tagdelete","click",function(b){var c=new i("core/tag:tagdelete");b.preventDefault();var e=a(this).attr("href");f.get_strings([{key:"delete",component:"core"},{key:"confirmdeletetag",component:"tag"},{key:"yes",component:"core"},{key:"no",component:"core"}]).then(function(a){return d.confirm(a[0],a[1],a[2],a[3],function(){window.location.href=e})}).then(c.resolve).catch(d.exception)});a("#tag-management-delete").click(function(b){var c=a(this).closest("form").get(0),e=a(c).find("input[type=checkbox]:checked").length;if(!e){return}var g=new i("core/tag:tag-management-delete"),h=a("<input type='hidden'/>").attr("name",this.name);b.preventDefault();f.get_strings([{key:"delete"},{key:"confirmdeletetags",component:"tag"},{key:"yes"},{key:"no"}]).then(function(a){return d.confirm(a[0],a[1],a[2],a[3],function(){h.appendTo(c);c.submit()})}).then(g.resolve).catch(d.exception)});a("#tag-management-combine").click(function(b){var e=new i("core/tag:tag-management-combine");b.preventDefault();var j=a(this).closest("form").get(0),k=a(j).find("input[type=checkbox]:checked");if(1>=k.length){f.get_strings([{key:"combineselected",component:"tag"},{key:"selectmultipletags",component:"tag"},{key:"ok"}]).then(function(a){return d.alert(a[0],a[1],a[2])}).then(e.resolve).catch(d.exception);return}var l=a("<input type='hidden'/>").attr("name",this.name),m="",n=[];k.each(function(){var b=a(this).val(),c=a(".inplaceeditable[data-itemtype=tagname][data-itemid="+b+"]").attr("data-value");n.push({id:b,name:c})});f.get_strings([{key:"combineselected",component:"tag"},{key:"continue"}]).then(function(a){var b=a[0];m=a[1];return g.create({title:b,body:c.render("core_tag/combine_tags",{tags:n}),type:g.types.SAVE_CANCEL})}).then(function(a){a.setSaveButtonText(m);return a}).then(function(b){b.getRoot().on(h.save,function(b){b.preventDefault();l.appendTo(j);var c=a("input[name=maintag]:checked","#combinetags_form").val();a("<input type='hidden'/>").attr("name","maintag").attr("value",c).appendTo(j);j.submit()});b.getRoot().on(h.hidden,function(){b.destroy()});b.show();a("#combinetags_form input[type=radio]").first().focus().prop("checked",!0)}).then(e.resolve).catch(d.exception)});a("body").on("updatefailed","[data-inplaceeditable][data-itemtype=tagname]",function(b){var c=new i("core/tag:tag-management-combine-exists"),e=b.exception,g=b.newvalue,h=a(b.target).attr("data-itemid");if("namesalreadybeeingused"===e.errorcode){b.preventDefault();f.get_strings([{key:"nameuseddocombine",component:"tag"},{key:"yes"},{key:"cancel"}]).then(function(a){return d.confirm(b.message,a[0],a[1],a[2],function(){window.location.href=window.location.href+"&newname="+encodeURIComponent(g)+"&tagid="+encodeURIComponent(h)+"&action=renamecombine&sesskey="+M.cfg.sesskey})}).then(c.resolve).catch(d.exception)}});a("body").on("click","a[data-action=addstandardtag]",function(b){var e=new i;b.preventDefault();return g.create({title:f.get_string("addotags","tag"),body:c.render("core_tag/add_tags",{actionurl:window.location.href,sesskey:M.cfg.sesskey}),type:g.types.SAVE_CANCEL}).then(function(b){b.setSaveButtonText(f.get_string("continue","core"));b.getRoot().on(h.save,function(b){var c=a(b.currentTarget).find("#id_tagslist"),d=c.val().trim();c.val(d);var e=a("#addtags_form");e.on("submit",function(b){var c=a("#addtags_form");if(!1===c[0].checkValidity()){b.preventDefault();b.stopPropagation()}c.addClass("was-validated");a("[data-region=\"tagslistinput\"]").addClass("error");var d=a("#id_tagslist_error_message");d.removeAttr("hidden");d.addClass("help-block")});e.submit();return!1});b.getRoot().on(h.hidden,function(){b.destroy()});b.show()}).then(e.resolve).catch(d.exception)})},initManageCollectionsPage:function initManageCollectionsPage(){a("body").on("updated","[data-inplaceeditable]",function(b){var c=new i("core/tag:initManageCollectionsPage-updated"),d=b.ajaxreturn,e,f,g;if("core_tag"===d.component&&"tagareaenable"===d.itemtype){e=a(this).attr("data-itemid");a(".tag-collections-table ul[data-collectionid] li[data-areaid="+e+"]").hide();g=d.value;if("1"===g){a(this).closest("tr").removeClass("dimmed_text");f=a(this).closest("tr").find("[data-itemtype=\"tagareacollection\"]").attr("data-value");a(".tag-collections-table ul[data-collectionid="+f+"] li[data-areaid="+e+"]").show()}else{a(this).closest("tr").addClass("dimmed_text")}}if("core_tag"===d.component&&"tagareacollection"===d.itemtype){e=a(this).attr("data-itemid");a(".tag-collections-table ul[data-collectionid] li[data-areaid="+e+"]").hide();f=a(this).attr("data-value");g=a(this).closest("tr").find("[data-itemtype=\"tagareaenable\"]").attr("data-value");if("1"===g){a(".tag-collections-table ul[data-collectionid="+f+"] li[data-areaid="+e+"]").show()}}c.resolve()});a("body").on("click",".addtagcoll > a",function(b){var e=new i("core/tag:initManageCollectionsPage-addtagcoll");b.preventDefault();var j=a(this).attr("data-url"),k="";f.get_strings([{key:"addtagcoll",component:"tag"},{key:"create"}]).then(function(a){var b=a[0];k=a[1];var d={actionurl:j,sesskey:M.cfg.sesskey};return g.create({title:b,body:c.render("core_tag/add_tag_collection",d),type:g.types.SAVE_CANCEL})}).then(function(b){b.setSaveButtonText(k);b.getRoot().on(h.save,function(b){var c=a(b.currentTarget).find("#addtagcoll_name"),d=c.val().trim();c.val(d);var f=a("#addtagcoll_form");f.on("submit",function(b){if(!1===f[0].checkValidity()){b.preventDefault();b.stopPropagation()}f.addClass("was-validated");a("[data-region=\"addtagcoll_nameinput\"]").addClass("error");var c=a("#id_addtagcoll_name_error_message");c.removeAttr("hidden");c.addClass("help-block")});f.submit();return!1});b.getRoot().on(h.hidden,function(){b.destroy()});b.show();return b}).then(e.resolve).catch(d.exception)});a("body").on("click",".tag-collections-table .action_delete",function(b){var c=new i("core/tag:initManageCollectionsPage-action_delete");b.preventDefault();var e=a(this).attr("data-url")+"&sesskey="+M.cfg.sesskey;f.get_strings([{key:"delete"},{key:"suredeletecoll",component:"tag",param:a(this).attr("data-collname")},{key:"yes"},{key:"no"}]).then(function(a){return d.confirm(a[0],a[1],a[2],a[3],function(){window.location.href=e})}).then(c.resolve).catch(d.exception)})}}});
define ("core/icon_system_standard",["core/icon_system","core/url","core/mustache"],function(a,b,c){var d=function(){a.apply(this,arguments)};d.prototype=Object.create(a.prototype);d.prototype.renderIcon=function(a,d,e,f){var g=b.imageUrl(a,d),h={attributes:[{name:"src",value:g},{name:"alt",value:e},{name:"title",value:e}]};if("undefined"==typeof e||""==e){h.attributes.push({name:"aria-hidden",value:"true"})}var i=c.render(f,h);return i.trim()};d.prototype.getTemplateName=function(){return"core/pix_icon"};return d});
define ("core/pubsub",["exports","core/pending"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.publish=a.unsubscribe=a.subscribe=void 0;b=function(a){return a&&a.__esModule?a:{default:a}}(b);var c={};a.subscribe=function subscribe(a,b){c[a]=c[a]||[];c[a].push(b)};a.unsubscribe=function unsubscribe(a,b){if(c[a]){for(var d=0;d<c[a].length;d++){if(c[a][d]===b){c[a].splice(d,1);break}}}};var d=function(a,d){var e=new b.default("Publishing "+a);if(c[a]){c[a].forEach(function(a){a(d)})}e.resolve()};a.publish=d});
define ("core/user_date",["jquery","core/ajax","core/sessionstorage","core/config"],function(a,b,c,d){var e={},f=function(b){var c=a("html").attr("lang").replace(/-/g,"_");return"core_user_date/"+c+"/"+d.usertimezone+"/"+b.timestamp+"/"+b.format},g=function(a){return c.get(a)},h=function(a,b){c.set(a,b)},i=function(a){return"undefined"!=typeof e[a]},j=function(a){return e[a]},k=function(a,b){e[a]=b},l=function(a){var c=a.map(function(a){return{timestamp:a.timestamp,format:a.format}}),e={methodname:"core_get_user_dates",args:{contextid:d.contextid,timestamps:c}};return b.call([e],!0,!0)[0].then(function(b){b.dates.forEach(function(b,c){var d=a[c],e=f(d);h(e,b);d.deferred.resolve(b)})}).catch(function(b){a.forEach(function(a){a.deferred.reject(b)})})};return{get:function get(b){var c=[],d=[];b.forEach(function(b){var e=f(b);if(i(e)){d.push(j(e))}else{var h=a.Deferred(),l=g(e);if(l){h.resolve(l)}else{b.deferred=h;c.push(b)}k(e,h.promise());d.push(h.promise())}});if(c.length){l(c)}return a.when.apply(a,d).then(function(){return 1===arguments.length?[arguments[0]]:Array.apply(null,arguments)})},getUserMidnightForTimestamp:function getUserMidnightForTimestamp(a,b){var c=a>b,d=Math.abs(a-b),e=c?Math.floor(d/86400):Math.ceil(d/86400),f=e*86400,g=c?b+f:b-f;return g}}});
define ("core/chart_bar",["core/chart_base"],function(a){function b(){a.prototype.constructor.apply(this,arguments)}b.prototype=Object.create(a.prototype);b.prototype._horizontal=!1;b.prototype._stacked=!1;b.prototype.TYPE="bar";b.prototype.create=function(b,c){var d=a.prototype.create.apply(this,arguments);d.setHorizontal(c.horizontal);d.setStacked(c.stacked);return d};b.prototype._setDefaults=function(){a.prototype._setDefaults.apply(this,arguments);var b=this.getYAxis(0,!0);b.setMin(0)};b.prototype.getHorizontal=function(){return this._horizontal};b.prototype.getStacked=function(){return this._stacked};b.prototype.setHorizontal=function(a){var b=this.getXAxis(0,!0);if(null===b.getMin()){b.setMin(0)}this._horizontal=!!a};b.prototype.setStacked=function(a){this._stacked=!!a};return b});
define ("core/fragment",["jquery","core/ajax"],function(a,b){var c=function loadFragment(a,c,d,e){var f=[];for(var g in e){f.push({name:g,value:e[g]})}return b.call([{methodname:"core_get_fragment",args:{component:a,callback:c,contextid:d,args:f}}])[0]};return{loadFragment:function loadFragment(b,d,e,f){var g=a.Deferred();c(b,d,e,f).then(function(b){var c=a(b.javascript),d="";c.each(function(b,c){c=a(c);var e=c.prop("tagName");if(e&&"script"==e.toLowerCase()){if(c.attr("src")){var f=!1;a("script").each(function(b,d){if(a(d).attr("src")==c.attr("src")){f=!0}return!f});if(!f){d+=" { ";d+=" node = document.createElement(\"script\"); ";d+=" node.type = \"text/javascript\"; ";d+=" node.src = decodeURI(\""+encodeURI(c.attr("src"))+"\"); ";d+=" document.getElementsByTagName(\"head\")[0].appendChild(node); ";d+=" } "}}else{d+=" "+c.text()}}});g.resolve(b.html,d)}).fail(function(a){g.reject(a)});return g.promise()}}});
define ("core/paged_content_events",[],function(){return{SHOW_PAGES:"core-paged-content-show-pages",PAGES_SHOWN:"core-paged-content-pages-shown",ALL_ITEMS_LOADED:"core-paged-content-all-items-loaded",SET_ITEMS_PER_PAGE_LIMIT:"core-paged-content-set-items-per-page-limit"}});
define ("core/permissionmanager",["jquery","core/config","core/notification","core/templates","core/yui"],function(a,b,c,d,e){var f={ADDROLE:"a.allowlink, a.prohibitlink",REMOVEROLE:"a.preventlink, a.unprohibitlink",UNPROHIBIT:"a.unprohibitlink"},g=a.Event("rolesloaded"),h,j,k,l,m=null,n=function loadOverideableRoles(){var d={contextid:h,getroles:1,sesskey:b.sesskey};a.post(k+"roles/ajax.php",d,null,"json").done(function(b){try{l=b;n=function loadOverideableRoles(){a("body").trigger(g)};n()}catch(a){c.exception(a)}}).fail(function(a,b,d){c.exception(d)})},o=function(b,e,f){var g={contextid:h,roleid:e,sesskey:M.cfg.sesskey,action:f,capability:b.data("name")};a.post(k+"roles/ajax.php",g,null,"json").done(function(f){var g=f;try{var h={rolename:l[e],roleid:e,adminurl:k,imageurl:M.util.image_url("t/delete","moodle")};switch(g){case"allow":h.spanclass="allowed";h.linkclass="preventlink";h.action="prevent";h.icon="t/delete";h.iconalt=M.util.get_string("deletexrole","core_role",l[e]);break;case"prohibit":h.spanclass="forbidden";h.linkclass="unprohibitlink";h.action="unprohibit";h.icon="t/delete";h.iconalt=M.util.get_string("deletexrole","core_role",l[e]);break;case"prevent":b.find("a[data-role-id=\""+e+"\"]").first().closest(".allowed").remove();return;case"unprohibit":b.find("a[data-role-id=\""+e+"\"]").first().closest(".forbidden").remove();return;default:return;}d.render("core/permissionmanager_role",h).done(function(c){if("allow"==g){a(c).insertBefore(b.find(".allowmore:first"))}else if("prohibit"==g){a(c).insertBefore(b.find(".prohibitmore:first"));var d=b.find(".allowedroles").first().find("a[data-role-id=\""+e+"\"]");if(d){d.first().closest(".allowed").remove()}}m.hide()}).fail(c.exception)}catch(a){c.exception(a)}}).fail(function(a,b,d){c.exception(d)})},p=function(b){b.preventDefault();var g=a(b.currentTarget);a("body").one("rolesloaded",function(){e.use("moodle-core-notification-dialogue",function(){var b=g.data("action"),h=g.closest("tr.rolecap"),k={cap:h.data("humanname"),context:j},n=M.util.get_string("role"+b+"info","core_role",k);if(null===m){m=new M.core.dialogue({draggable:!0,modal:!0,closeButton:!0,width:"450px"})}m.set("headerContent",M.util.get_string("role"+b+"header","core_role"));var p,e,q=[];switch(b){case"allow":e=h.find(f.REMOVEROLE);break;case"prohibit":e=h.find(f.UNPROHIBIT);break;}for(p in l){var r="",s=e.filter("[data-role-id='"+p+"']").length;if(s){r="disabled"}var t={roleid:p,rolename:l[p],disabled:r};q.push(t)}d.render("core/permissionmanager_panelcontent",{message:n,roles:q}).done(function(c){m.set("bodyContent",c);m.show();a("div.role_buttons").on("click","input",function(c){var d=a(c.currentTarget).data("role-id");o(h,d,b)})}).fail(c.exception)})});n()},q=function(b){b.preventDefault();var d=a(b.currentTarget);a("body").one("rolesloaded",function(){var a=d.data("action"),b=d.data("role-id"),e=d.closest("tr.rolecap"),f={role:l[b],cap:e.data("humanname"),context:j};c.confirm(M.util.get_string("confirmunassigntitle","core_role"),M.util.get_string("confirmrole"+a,"core_role",f),M.util.get_string("confirmunassignyes","core_role"),M.util.get_string("confirmunassignno","core_role"),function(){o(e,b,a)})});n()};return{initialize:function initialize(b){h=b.contextid;j=b.contextname;k=b.adminurl;var c=a("body");c.on("click",f.ADDROLE,p);c.on("click",f.REMOVEROLE,q)}}});
define ("core/inplace_editable",["jquery","core/ajax","core/templates","core/notification","core/str","core/config","core/url","core/form-autocomplete","core/pending"],function(a,b,c,d,e,f,g,h,i){a("body").on("click keypress","[data-inplaceeditable] [data-inplaceeditablelink]",function(j){if("keypress"===j.type&&13!==j.keyCode){return}var k=new i("autocomplete-start-editing");j.stopImmediatePropagation();j.preventDefault();var l=a(this),m=l.closest("[data-inplaceeditable]"),n=function(b){b.addClass("updating");var c=b.find("img.spinner");if(c.length){c.show()}else{c=a("<img/>").attr("src",g.imageUrl("i/loading_small")).addClass("spinner").addClass("smallicon");b.append(c)}},o=function(a){a.removeClass("updating");a.find("img.spinner").hide()},p=function(f,g){var h=[f.attr("data-itemid"),f.attr("data-component"),f.attr("data-itemtype")].join("-"),j=new i(h);n(f);b.call([{methodname:"core_update_inplace_editable",args:{itemid:f.attr("data-itemid"),component:f.attr("data-component"),itemtype:f.attr("data-itemtype"),value:g}}])[0].then(function(b){return c.render("core/inplace_editable",b).then(function(d,e){var g=f.attr("data-value"),h=a(d);c.replaceNode(f,h,e);h.find("[data-inplaceeditablelink]").focus();h.trigger({type:"updated",ajaxreturn:b,oldvalue:g})})}).then(function(){return j.resolve()}).fail(function(b){var c=a.Event("updatefailed",{exception:b,newvalue:g});o(f);M.util.js_complete(h);f.trigger(c);if(!c.isDefaultPrevented()){d.exception(b)}})},q=function(a){a.find("input").off();a.find("select").off();a.html(a.attr("data-oldcontent"));a.removeAttr("data-oldcontent");a.removeClass("inplaceeditingon");a.find("[data-inplaceeditablelink]").focus()},r=function(b,c){var d=b,e;for(e=0;e<c;e++){d+=Math.floor(10*Math.random())+""}if(0===a("#"+d).length){return d}return r(b,c)},s=function(b){e.get_string("edittitleinstructions").done(function(c){var d=a("<span class=\"editinstructions\">"+c+"</span>").attr("id",r("id_editinstructions_",20)),e=a("<input type=\"text\"/>").attr("id",r("id_inplacevalue_",20)).attr("value",b.attr("data-value")).attr("aria-describedby",d.attr("id")).addClass("ignoredirty").addClass("form-control"),g=a("<label class=\"accesshide\">"+m.attr("data-editlabel")+"</label>").attr("for",e.attr("id"));b.html("").append(d).append(g).append(e);e.focus();e.select();e.on("keyup keypress focusout",function(a){if(f.behatsiterunning&&"focusout"===a.type){return}if("keypress"===a.type&&13===a.keyCode){var c=e.val();q(b);p(b,c)}if("keyup"===a.type&&27===a.keyCode||"focusout"===a.type){q(b)}})})},t=function(a,b){q(a);p(a,b)},u=function(b,c){var d,e=a("<select></select>").attr("id",r("id_inplacevalue_",20)).addClass("custom-select"),g=a("<label class=\"accesshide\">"+m.attr("data-editlabel")+"</label>").attr("for",e.attr("id"));for(d in c){e.append(a("<option>").attr("value",c[d].key).html(c[d].value))}e.val(b.attr("data-value"));b.html("").append(g).append(e);e.focus();e.select();e.on("keyup change focusout",function(a){if(f.behatsiterunning&&"focusout"===a.type){return}if("change"===a.type){var c=e.val();q(b);p(b,c)}if("keyup"===a.type&&27===a.keyCode||"focusout"===a.type){q(b)}})},v=function(b,f){var g,j=a("<select></select>").attr("id",r("id_inplacevalue_",20)).addClass("form-autocomplete-original-select").addClass("custom-select"),k=a("<label class=\"accesshide\">"+m.attr("data-editlabel")+"</label>").attr("for",j.attr("id")),l=f.options,n=f.attributes,o=a("<a href=\"#\"></a>"),s=a("<a href=\"#\"></a>");for(g in l){j.append(a("<option>").attr("value",l[g].key).html(l[g].value))}if(n.multiple){j.attr("multiple","true")}j.val(JSON.parse(b.attr("data-value")));e.get_string("savechanges","core").then(function(a){return c.renderPix("e/save","core",a)}).then(function(a){o.append(a)}).fail(d.exception);e.get_string("cancel","core").then(function(a){return c.renderPix("e/cancel","core",a)}).then(function(a){s.append(a)}).fail(d.exception);b.html("").append(k).append(j).append(o).append(s);j.focus();j.select();h.enhance(j,n.tags,n.ajax,n.placeholder,n.caseSensitive,n.showSuggestions,n.noSelectionString).then(function(){b.find("[role=combobox]").focus()}).fail(d.exception);j.on("keyup",function(a){if("keyup"===a.type&&27===a.keyCode||"focusout"===a.type){q(b)}});o.on("click",function(a){var c=JSON.stringify(j.val());j.empty();q(b);p(b,c);a.preventDefault()});s.on("click",function(a){j.empty();q(b);a.preventDefault()})};(function turnEditingOffEverywhere(){a("span.inplaceeditable.inplaceeditingon").each(function(){q(a(this))})})();(function turnEditingOn(b){b.addClass("inplaceeditingon");b.attr("data-oldcontent",b.html());var c=b.attr("data-type"),d=b.attr("data-options");if("toggle"===c){t(b,d)}else if("select"===c){u(b,a.parseJSON(d))}else if("autocomplete"===c){v(b,a.parseJSON(d))}else{s(b)}})(m);k.resolve()});return{}});
define ("core/auto_rows",["jquery"],function(a){var b={ELEMENT:"[data-auto-rows]"},c={ROW_CHANGE:"autorows:rowchange"},d=function(a){var b=a.attr("rows"),c=a.data("min-rows"),d=a.attr("data-max-rows"),e=a.height(),f=a.innerHeight(),g=a[0].scrollHeight,h=(g-(f-e))/(e/b);a.css("height","");if(h<c){return c}else if(d&&h>=d){return d}else{return h}},e=function(b){var e=a(b.target),f=e.data("min-rows"),g=e.attr("rows");if("undefined"==typeof f){e.data("min-rows",g)}e.attr("rows",1);var h=d(e);e.attr("rows",h);if(h!=g){e.trigger(c.ROW_CHANGE)}};return{init:function init(c){if(a(c).data("auto-rows")){a(c).on("input propertychange",e.bind(this))}else{a(c).on("input propertychange",b.ELEMENT,e.bind(this))}},events:c}});
define ("core/modal_cancel",["jquery","core/notification","core/custom_interaction_events","core/modal","core/modal_events"],function(a,b,c,d,f){var g={CANCEL_BUTTON:"[data-action=\"cancel\"]"},h=function(a){d.call(this,a);if(!this.getFooter().find(g.CANCEL_BUTTON).length){b.exception({message:"No cancel button found"})}};h.prototype=Object.create(d.prototype);h.prototype.constructor=h;h.prototype.setFooter=function(){b.exception({message:"Can not change the footer of a cancel modal"})};h.prototype.registerEventListeners=function(){d.prototype.registerEventListeners.call(this);this.getModal().on(c.events.activate,g.CANCEL_BUTTON,function(b,c){var d=a.Event(f.cancel);this.getRoot().trigger(d,this);if(!d.isDefaultPrevented()){this.hide();c.originalEvent.preventDefault()}}.bind(this))};return h});
function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("core/modal",["jquery","core/templates","core/notification","core/key_codes","core/custom_interaction_events","core/modal_backdrop","core/event","core/modal_events","core/local/aria/focuslock","core/pending"],function(a,b,c,d,e,f,g,h,i,j){var k={CONTAINER:"[data-region=\"modal-container\"]",MODAL:"[data-region=\"modal\"]",HEADER:"[data-region=\"header\"]",TITLE:"[data-region=\"title\"]",BODY:"[data-region=\"body\"]",FOOTER:"[data-region=\"footer\"]",HIDE:"[data-action=\"hide\"]",DIALOG:"[role=dialog]",FORM:"form",MENU_BAR:"[role=menubar]",HAS_Z_INDEX:".moodle-has-zindex",CAN_RECEIVE_FOCUS:"input:not([type=\"hidden\"]), a[href], button, textarea, select, [tabindex]"},l={LOADING:"core/loading",BACKDROP:"core/modal_backdrop"},m,n=0,o=function(b){this.root=a(b);this.modal=this.root.find(k.MODAL);this.header=this.modal.find(k.HEADER);this.title=this.header.find(k.TITLE);this.body=this.modal.find(k.BODY);this.footer=this.modal.find(k.FOOTER);this.hiddenSiblings=[];this.isAttached=!1;this.bodyJS=null;this.footerJS=null;this.modalCount=n++;if(!this.root.is(k.CONTAINER)){c.exception({message:"Element is not a modal container"})}if(!this.modal.length){c.exception({message:"Container does not contain a modal"})}if(!this.header.length){c.exception({message:"Modal is missing a header region"})}if(!this.title.length){c.exception({message:"Modal header is missing a title region"})}if(!this.body.length){c.exception({message:"Modal is missing a body region"})}if(!this.footer.length){c.exception({message:"Modal is missing a footer region"})}this.registerEventListeners()};o.prototype.attachToDOM=function(){if(this.isAttached){return}a("body").append(this.root);i.trapFocus(this.root[0]);if(this.bodyJS){b.runTemplateJS(this.bodyJS);this.bodyJS=null}if(this.footerJS){b.runTemplateJS(this.footerJS);this.footerJS=null}this.isAttached=!0};o.prototype.countOtherVisibleModals=function(){var b=0;a("body").find(k.CONTAINER).each(function(c,d){d=a(d);if(!this.root.is(d)&&d.hasClass("show")){b++}}.bind(this));return b};o.prototype.getBackdrop=function(){if(!m){m=b.render(l.BACKDROP,{}).then(function(b){var c=a(b);return new f(c)}).fail(c.exception)}return m};o.prototype.getRoot=function(){return this.root};o.prototype.getModal=function(){return this.modal};o.prototype.getTitle=function(){return this.title};o.prototype.getBody=function(){return this.body};o.prototype.getFooter=function(){return this.footer};o.prototype.getModalCount=function(){return this.modalCount};o.prototype.setTitle=function(a){var b=this.getTitle();this.asyncSet(a,b.html.bind(b))};o.prototype.setBody=function(d){var e=this.getBody();if("string"==typeof d){e.html(d);g.notifyFilterContentUpdated(e);this.getRoot().trigger(h.bodyRendered,this)}else{var f="amd-modal-js-pending-id-"+this.getModalCount();M.util.js_pending(f);var i=null;e.css("overflow","hidden");if("pending"==d.state()){var j=e.innerHeight();if(100>j){j=100}e.animate({height:j+"px"},150);e.html("");i=b.render(l.LOADING,{}).then(function(b){var c=a(b).hide();e.html(c);c.fadeIn(150);return a.when(c.promise(),d)}).then(function(a){return a.fadeOut(100).promise()}).then(function(){return d})}else{i=d}i.then(function(a,c){var d=null;if(this.isVisible()){e.css("opacity",0);var f=e.innerHeight();e.html(a);e.css("height","");var g=e.innerHeight();e.css("height",f+"px");d=e.animate({height:g+"px",opacity:1},{duration:150,queue:!1}).promise()}else{e.html(a)}if(c){if(this.isAttached){b.runTemplateJS(c)}else{this.bodyJS=c}}return d}.bind(this)).then(function(a){g.notifyFilterContentUpdated(e);this.getRoot().trigger(h.bodyRendered,this);return a}.bind(this)).fail(c.exception).always(function(){e.css("height","");e.css("overflow","");e.css("opacity","");M.util.js_complete(f)}).fail(c.exception)}};o.prototype.setFooter=function(a){this.showFooter();var c=this.getFooter();if("string"==typeof a){c.html(a)}else{b.render(l.LOADING,{}).done(function(d){c.html(d);a.done(function(a,d){c.html(a);if(d){if(this.isAttached){b.runTemplateJS(d)}else{this.footerJS=d}}}.bind(this))}.bind(this))}};o.prototype.hasFooterContent=function(){return this.getFooter().children().length?!0:!1};o.prototype.hideFooter=function(){this.getFooter().addClass("hidden")};o.prototype.showFooter=function(){this.getFooter().removeClass("hidden")};o.prototype.setLarge=function(){if(this.isLarge()){return}this.getModal().addClass("modal-lg")};o.prototype.isLarge=function(){return this.getModal().hasClass("modal-lg")};o.prototype.setSmall=function(){if(this.isSmall()){return}this.getModal().removeClass("modal-lg")};o.prototype.isSmall=function(){return!this.getModal().hasClass("modal-lg")};o.prototype.calculateZIndex=function(){var b=a(k.DIALOG+", "+k.MENU_BAR+", "+k.HAS_Z_INDEX),c=parseInt(this.root.css("z-index"));b.each(function(b,d){d=a(d);var e=d.css("z-index")?parseInt(d.css("z-index")):0;if(e>c){c=e}});return c};o.prototype.isVisible=function(){return this.root.hasClass("show")};o.prototype.hasFocus=function(){var b=a(document.activeElement);return this.root.is(b)||this.root.has(b).length};o.prototype.hasTransitions=function(){return this.getRoot().hasClass("fade")};o.prototype.show=function(){if(this.isVisible()){return}var b=new j("core/modal:show");if(this.hasFooterContent()){this.showFooter()}else{this.hideFooter()}if(!this.isAttached){this.attachToDOM()}this.getBackdrop().then(function(b){var c=this.calculateZIndex(),d=c+2;this.root.css("z-index",d);b.setZIndex(d-1);b.show();this.root.removeClass("hide").addClass("show");this.accessibilityShow();this.getModal().focus();a("body").addClass("modal-open");this.root.trigger(h.shown,this)}.bind(this)).then(b.resolve)};o.prototype.hideIfNotForm=function(){var a=this.modal.find(k.FORM);if(0==a.length){this.hide()}};o.prototype.hide=function(){this.getBackdrop().done(function(b){i.untrapFocus();if(!this.countOtherVisibleModals()){b.hide();a("body").removeClass("modal-open")}var c=parseInt(this.root.css("z-index"));this.root.css("z-index","");b.setZIndex(c-3);this.accessibilityHide();if(this.hasTransitions()){this.getRoot().one("transitionend webkitTransitionEnd oTransitionEnd",function(){this.getRoot().removeClass("show").addClass("hide")}.bind(this))}else{this.getRoot().removeClass("show").addClass("hide")}this.root.trigger(h.hidden,this)}.bind(this))};o.prototype.destroy=function(){this.root.remove();this.root.trigger(h.destroyed,this)};o.prototype.accessibilityShow=function(){a("body").children().each(function(b,c){if(!this.root.is(c)){c=a(c);var d=c.attr("aria-hidden");if("true"!==d){c.data("previous-aria-hidden",d);this.hiddenSiblings.push(c);c.attr("aria-hidden","true")}}}.bind(this));this.root.attr("aria-hidden","false")};o.prototype.accessibilityHide=function(){this.root.attr("aria-hidden","true");a.each(this.hiddenSiblings,function(b,c){c=a(c);var d=c.data("previous-aria-hidden");if("undefined"==typeof d){c.removeAttr("aria-hidden")}else{c.attr("aria-hidden",d)}});this.hiddenSiblings=[]};o.prototype.registerEventListeners=function(){this.getRoot().on("keydown",function(a){if(!this.isVisible()){return}if(a.keyCode==d.escape){this.hide()}}.bind(this));this.getRoot().click(function(b){if(!a(b.target).closest(k.MODAL).length){if(a(b.target).closest(k.CONTAINER).length){this.hideIfNotForm()}}}.bind(this));e.define(this.getModal(),[e.events.activate]);this.getModal().on(e.events.activate,k.HIDE,function(a,b){this.hide();b.originalEvent.preventDefault()}.bind(this))};o.prototype.asyncSet=function(b,d){var e=b;if("object"!==_typeof(b)||!b.hasOwnProperty("then")){e=a.Deferred();e.resolve(b)}e.then(function(a){d(a)}).fail(c.exception);return e};return o});
define ("core/storagewrapper",["core/config"],function(a){var b=function(b){this.storage=b;this.supported=this.detectSupport();this.hashSource=a.wwwroot+"/"+a.jsrev;this.hash=this.hashString(this.hashSource);this.prefix=this.hash+"/";this.jsrevPrefix=this.hashString(a.wwwroot)+"/jsrev";this.validateCache()};b.prototype.detectSupport=function(){if(-1==a.jsrev){return!1}if("undefined"==typeof this.storage){return!1}try{if(null===this.storage){return!1}this.storage.setItem("test","1");this.storage.removeItem("test");return!0}catch(a){return!1}};b.prototype.prefixKey=function(a){return this.prefix+a};b.prototype.validateCache=function(){var b=this.storage.getItem(this.jsrevPrefix);if(null===b){this.storage.setItem(this.jsrevPrefix,a.jsrev);return}var c=a.jsrev;if(c!=b){this.storage.clear();this.storage.setItem(this.jsrevPrefix,a.jsrev)}};b.prototype.hashString=function(a){var b=0,c,d,e;if(0===a.length){return b}for(c=0,e=a.length;c<e;c++){d=a.charCodeAt(c);b=(b<<5)-b+d;b|=0}return b};b.prototype.get=function(a){if(!this.supported){return!1}a=this.prefixKey(a);return this.storage.getItem(a)};b.prototype.set=function(a,b){if(!this.supported){return!1}a=this.prefixKey(a);try{this.storage.setItem(a,b)}catch(a){return!1}return!0};return b});
define ("core/modal_events",[],function(){return{shown:"modal:shown",hidden:"modal:hidden",destroyed:"modal:destroyed",bodyRendered:"modal:bodyRendered",save:"modal-save-cancel:save",cancel:"modal-save-cancel:cancel"}});
define ("core/chart_output",["core/chart_output_chartjs"],function(a){return a});
define ("core/backoff_timer",function(){var a=function(a,b){this.callback=a;this.backOffFunction=b};a.prototype.callback=null;a.prototype.backOffFunction=null;a.prototype.time=null;a.prototype.timeout=null;a.prototype.generateNextTime=function(){var a=this.backOffFunction(this.time);this.time=a;return a};a.prototype.reset=function(){this.time=null;this.stop();return this};a.prototype.stop=function(){if(this.timeout){window.clearTimeout(this.timeout);this.timeout=null}return this};a.prototype.start=function(){if(!this.timeout){var a=this.generateNextTime();this.timeout=window.setTimeout(function(){this.callback();this.stop();this.start()}.bind(this),a)}return this};a.prototype.restart=function(){return this.reset().start()};a.getIncrementalCallback=function(a,b,c,d){return function(e){if(!e){return a}if(e+b>c){return d}return e+b}};return a});
define ("core/chartjs",["core/chartjs-lazy"],function(a){return a});
define ("core/key_codes",function(){return{tab:9,enter:13,shift:16,ctrl:17,alt:18,escape:27,space:32,end:35,home:36,arrowLeft:37,arrowUp:38,arrowRight:39,arrowDown:40,8:56,asterix:106,pageUp:33,pageDown:34}});
define ("core/pending",["jquery"],function(a){var b=function(b){var c=a.Deferred();b=b||{};M.util.js_pending(b);c.then(function(){return M.util.js_complete(b)}).catch();return c};b.prototype.constructor=b;return b});
define ("core/loadingicon",["jquery","core/templates"],function(a,b){var c={LOADING:"core/loading"},d=function(){return b.render(c.LOADING,{})},e=function(b,c){return d().then(function(d){var e=a(d).hide();a(b).append(e);e.fadeIn(150);return a.when(e.promise(),c)}).then(function(a){return a.fadeOut(100).promise()}).then(function(a){a.remove()})};return{getIcon:d,addIconToContainer:function addIconToContainer(b){return d().then(function(c){var d=a(c).hide();a(b).append(d);d.fadeIn(150);return d})},addIconToContainerWithPromise:function addIconToContainerWithPromise(b){var c=a.Deferred();e(b,c);return c},addIconToContainerRemoveOnCompletion:e}});
define ("core/emoji/auto_complete",["exports","core/emoji/data","core/templates","core/utils","core/localstorage","core/key_codes"],function(a,b,c,d,e,f){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;b=function(a){if(a&&a.__esModule){return a}else{var b={};if(null!=a){for(var c in a){if(Object.prototype.hasOwnProperty.call(a,c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,c):{};if(d.get||d.set){Object.defineProperty(b,c,d)}else{b[c]=a[c]}}}}b.default=a;return b}}(b);e=g(e);f=g(f);function g(a){return a&&a.__esModule?a:{default:a}}function h(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}if(h.done){b(i)}else{Promise.resolve(i).then(d,e)}}function i(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var i=a.apply(b,c);function f(a){h(i,d,e,f,g,"next",a)}function g(a){h(i,d,e,f,g,"throw",a)}f(void 0)})}}function j(a){return m(a)||l(a)||k()}function k(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function m(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++){c[b]=a[b]}return c}}var n="moodle-recent-emojis",o={EMOJI_BUTTON:"[data-region=\"emoji-button\"]",ACTIVE_EMOJI_BUTTON:"[data-region=\"emoji-button\"].active"},p=function(){var a=e.default.get(n);return a?JSON.parse(a):[]},q=function(a,b){var c={unified:a,shortnames:[b]},d=p(),f=[c].concat(j(d.filter(function(a){return a.unified!=c.unified})));f=f.slice(0,27);e.default.set(n,JSON.stringify(f))},r=function(a){var c=b.byShortName[a];if(c){var d=c.split("-").map(function(a){return"0x".concat(a)});return String.fromCodePoint.apply(null,d)}else{return null}},s=function(){var a=i(regeneratorRuntime.mark(function a(d,e){var f,g;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:f={emojis:e.map(function(a,c){return{active:0===c,emojitext:r(a),displayshortname:":".concat(a,":"),shortname:a,unified:b.byShortName[a]}})};a.next=3;return(0,c.render)("core/emoji/auto_complete",f);case 3:g=a.sent;d.innerHTML=g;case 5:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}(),t=function(a,c){if(""===a){return p().map(function(a){return a.shortnames[0]}).slice(0,c)}else{a=a.toLowerCase();return Object.keys(b.byShortName).filter(function(b){return b.includes(a)}).slice(0,c)}},u=function(a,b){var c=a.slice(0,b).match(/(\S*)$/),d=a.slice(b).match(/^(\S*)/),e="",f="";if(c){e=c[c.length-1]}if(d){f=d[d.length-1]}return"".concat(e).concat(f)},v=function(a){return /^:[^:\s]+:$/.test(a)},w=function(a){return /^:[^:\s]*$/.test(a)},x=function(a){return a.replace(/:/g,"")},y=function(a){return a.querySelector(o.ACTIVE_EMOJI_BUTTON)},z=function(a){var b=y(a),c=b.previousElementSibling;if(c){b.classList.remove("active");c.classList.add("active");c.scrollIntoView({behaviour:"smooth",inline:"center"})}},A=function(a){var b=y(a),c=b.nextElementSibling;if(c){b.classList.remove("active");c.classList.add("active");c.scrollIntoView({behaviour:"smooth",inline:"center"})}},B=function(a,b){var c=a.getAttribute("data-short-name"),d=a.getAttribute("data-unified");q(d,c);b(a.innerHTML.trim())};a.default=function(a,c,g,h){var i=!1,j="";c.addEventListener("keyup",(0,d.debounce)(function(){var d=c.value,e=c.selectionStart,f=u(d,e);if(f===j){return}else{j=f}if(v(f)){var k=x(f),l=r(k);i=!1;if(l){q(b.byShortName[k],k);h(l)}}else if(w(f)){var m=t(x(f),50);if(m.length){s(a,m);i=!0}else{i=!1}}else{i=!1}g(i)},200));c.addEventListener("keydown",function(b){if(i){var c=b.shiftKey||b.metaKey||b.altKey||b.ctrlKey;if(!c){switch(b.which){case f.default.escape:i=!1;g(!1);break;case f.default.arrowLeft:z(a);b.preventDefault();break;case f.default.arrowRight:A(a);b.preventDefault();break;case f.default.enter:B(y(a),h);b.preventDefault();b.stopPropagation();break;}}}});a.addEventListener("click",function(a){var b=a.target;if(b.matches(o.EMOJI_BUTTON)){B(b,h)}})};return a.default});
define ("core/emoji/data",["exports"],function(F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.byShortName=F.byCategory=void 0;F.byCategory=[{name:"Smileys & People",emojis:[{unified:"1F600",shortnames:["grinning"]},{unified:"1F601",shortnames:["grin"]},{unified:"1F602",shortnames:["joy"]},{unified:"1F923",shortnames:["rolling_on_the_floor_laughing"]},{unified:"1F603",shortnames:["smiley"]},{unified:"1F604",shortnames:["smile"]},{unified:"1F605",shortnames:["sweat_smile"]},{unified:"1F606",shortnames:["laughing"]},{unified:"1F609",shortnames:["wink"]},{unified:"1F60A",shortnames:["blush"]},{unified:"1F60B",shortnames:["yum"]},{unified:"1F60E",shortnames:["sunglasses"]},{unified:"1F60D",shortnames:["heart_eyes"]},{unified:"1F618",shortnames:["kissing_heart"]},{unified:"1F617",shortnames:["kissing"]},{unified:"1F619",shortnames:["kissing_smiling_eyes"]},{unified:"1F61A",shortnames:["kissing_closed_eyes"]},{unified:"263A-FE0F",shortnames:["relaxed"]},{unified:"1F642",shortnames:["slightly_smiling_face"]},{unified:"1F917",shortnames:["hugging_face"]},{unified:"1F929",shortnames:["star-struck"]},{unified:"1F914",shortnames:["thinking_face"]},{unified:"1F928",shortnames:["face_with_raised_eyebrow"]},{unified:"1F610",shortnames:["neutral_face"]},{unified:"1F611",shortnames:["expressionless"]},{unified:"1F636",shortnames:["no_mouth"]},{unified:"1F644",shortnames:["face_with_rolling_eyes"]},{unified:"1F60F",shortnames:["smirk"]},{unified:"1F623",shortnames:["persevere"]},{unified:"1F625",shortnames:["disappointed_relieved"]},{unified:"1F62E",shortnames:["open_mouth"]},{unified:"1F910",shortnames:["zipper_mouth_face"]},{unified:"1F62F",shortnames:["hushed"]},{unified:"1F62A",shortnames:["sleepy"]},{unified:"1F62B",shortnames:["tired_face"]},{unified:"1F634",shortnames:["sleeping"]},{unified:"1F60C",shortnames:["relieved"]},{unified:"1F61B",shortnames:["stuck_out_tongue"]},{unified:"1F61C",shortnames:["stuck_out_tongue_winking_eye"]},{unified:"1F61D",shortnames:["stuck_out_tongue_closed_eyes"]},{unified:"1F924",shortnames:["drooling_face"]},{unified:"1F612",shortnames:["unamused"]},{unified:"1F613",shortnames:["sweat"]},{unified:"1F614",shortnames:["pensive"]},{unified:"1F615",shortnames:["confused"]},{unified:"1F643",shortnames:["upside_down_face"]},{unified:"1F911",shortnames:["money_mouth_face"]},{unified:"1F632",shortnames:["astonished"]},{unified:"2639-FE0F",shortnames:["white_frowning_face"]},{unified:"1F641",shortnames:["slightly_frowning_face"]},{unified:"1F616",shortnames:["confounded"]},{unified:"1F61E",shortnames:["disappointed"]},{unified:"1F61F",shortnames:["worried"]},{unified:"1F624",shortnames:["triumph"]},{unified:"1F622",shortnames:["cry"]},{unified:"1F62D",shortnames:["sob"]},{unified:"1F626",shortnames:["frowning"]},{unified:"1F627",shortnames:["anguished"]},{unified:"1F628",shortnames:["fearful"]},{unified:"1F629",shortnames:["weary"]},{unified:"1F92F",shortnames:["exploding_head"]},{unified:"1F62C",shortnames:["grimacing"]},{unified:"1F630",shortnames:["cold_sweat"]},{unified:"1F631",shortnames:["scream"]},{unified:"1F633",shortnames:["flushed"]},{unified:"1F92A",shortnames:["zany_face"]},{unified:"1F635",shortnames:["dizzy_face"]},{unified:"1F621",shortnames:["rage"]},{unified:"1F620",shortnames:["angry"]},{unified:"1F92C",shortnames:["face_with_symbols_on_mouth"]},{unified:"1F637",shortnames:["mask"]},{unified:"1F912",shortnames:["face_with_thermometer"]},{unified:"1F915",shortnames:["face_with_head_bandage"]},{unified:"1F922",shortnames:["nauseated_face"]},{unified:"1F92E",shortnames:["face_vomiting"]},{unified:"1F927",shortnames:["sneezing_face"]},{unified:"1F607",shortnames:["innocent"]},{unified:"1F920",shortnames:["face_with_cowboy_hat"]},{unified:"1F921",shortnames:["clown_face"]},{unified:"1F925",shortnames:["lying_face"]},{unified:"1F92B",shortnames:["shushing_face"]},{unified:"1F92D",shortnames:["face_with_hand_over_mouth"]},{unified:"1F9D0",shortnames:["face_with_monocle"]},{unified:"1F913",shortnames:["nerd_face"]},{unified:"1F608",shortnames:["smiling_imp"]},{unified:"1F47F",shortnames:["imp"]},{unified:"1F479",shortnames:["japanese_ogre"]},{unified:"1F47A",shortnames:["japanese_goblin"]},{unified:"1F480",shortnames:["skull"]},{unified:"2620-FE0F",shortnames:["skull_and_crossbones"]},{unified:"1F47B",shortnames:["ghost"]},{unified:"1F47D",shortnames:["alien"]},{unified:"1F47E",shortnames:["space_invader"]},{unified:"1F916",shortnames:["robot_face"]},{unified:"1F4A9",shortnames:["hankey"]},{unified:"1F63A",shortnames:["smiley_cat"]},{unified:"1F638",shortnames:["smile_cat"]},{unified:"1F639",shortnames:["joy_cat"]},{unified:"1F63B",shortnames:["heart_eyes_cat"]},{unified:"1F63C",shortnames:["smirk_cat"]},{unified:"1F63D",shortnames:["kissing_cat"]},{unified:"1F640",shortnames:["scream_cat"]},{unified:"1F63F",shortnames:["crying_cat_face"]},{unified:"1F63E",shortnames:["pouting_cat"]},{unified:"1F648",shortnames:["see_no_evil"]},{unified:"1F649",shortnames:["hear_no_evil"]},{unified:"1F64A",shortnames:["speak_no_evil"]},{unified:"1F476",shortnames:["baby"]},{unified:"1F9D2",shortnames:["child"]},{unified:"1F466",shortnames:["boy"]},{unified:"1F467",shortnames:["girl"]},{unified:"1F9D1",shortnames:["adult"]},{unified:"1F468",shortnames:["man"]},{unified:"1F469",shortnames:["woman"]},{unified:"1F9D3",shortnames:["older_adult"]},{unified:"1F474",shortnames:["older_man"]},{unified:"1F475",shortnames:["older_woman"]},{unified:"1F468-200D-2695-FE0F",shortnames:["male-doctor"]},{unified:"1F469-200D-2695-FE0F",shortnames:["female-doctor"]},{unified:"1F468-200D-1F393",shortnames:["male-student"]},{unified:"1F469-200D-1F393",shortnames:["female-student"]},{unified:"1F468-200D-1F3EB",shortnames:["male-teacher"]},{unified:"1F469-200D-1F3EB",shortnames:["female-teacher"]},{unified:"1F468-200D-2696-FE0F",shortnames:["male-judge"]},{unified:"1F469-200D-2696-FE0F",shortnames:["female-judge"]},{unified:"1F468-200D-1F33E",shortnames:["male-farmer"]},{unified:"1F469-200D-1F33E",shortnames:["female-farmer"]},{unified:"1F468-200D-1F373",shortnames:["male-cook"]},{unified:"1F469-200D-1F373",shortnames:["female-cook"]},{unified:"1F468-200D-1F527",shortnames:["male-mechanic"]},{unified:"1F469-200D-1F527",shortnames:["female-mechanic"]},{unified:"1F468-200D-1F3ED",shortnames:["male-factory-worker"]},{unified:"1F469-200D-1F3ED",shortnames:["female-factory-worker"]},{unified:"1F468-200D-1F4BC",shortnames:["male-office-worker"]},{unified:"1F469-200D-1F4BC",shortnames:["female-office-worker"]},{unified:"1F468-200D-1F52C",shortnames:["male-scientist"]},{unified:"1F469-200D-1F52C",shortnames:["female-scientist"]},{unified:"1F468-200D-1F4BB",shortnames:["male-technologist"]},{unified:"1F469-200D-1F4BB",shortnames:["female-technologist"]},{unified:"1F468-200D-1F3A4",shortnames:["male-singer"]},{unified:"1F469-200D-1F3A4",shortnames:["female-singer"]},{unified:"1F468-200D-1F3A8",shortnames:["male-artist"]},{unified:"1F469-200D-1F3A8",shortnames:["female-artist"]},{unified:"1F468-200D-2708-FE0F",shortnames:["male-pilot"]},{unified:"1F469-200D-2708-FE0F",shortnames:["female-pilot"]},{unified:"1F468-200D-1F680",shortnames:["male-astronaut"]},{unified:"1F469-200D-1F680",shortnames:["female-astronaut"]},{unified:"1F468-200D-1F692",shortnames:["male-firefighter"]},{unified:"1F469-200D-1F692",shortnames:["female-firefighter"]},{unified:"1F46E-200D-2642-FE0F",shortnames:["male-police-officer","cop"]},{unified:"1F46E-200D-2640-FE0F",shortnames:["female-police-officer"]},{unified:"1F575-FE0F-200D-2642-FE0F",shortnames:["male-detective","sleuth_or_spy"]},{unified:"1F575-FE0F-200D-2640-FE0F",shortnames:["female-detective"]},{unified:"1F482-200D-2642-FE0F",shortnames:["male-guard","guardsman"]},{unified:"1F482-200D-2640-FE0F",shortnames:["female-guard"]},{unified:"1F477-200D-2642-FE0F",shortnames:["male-construction-worker","construction_worker"]},{unified:"1F477-200D-2640-FE0F",shortnames:["female-construction-worker"]},{unified:"1F934",shortnames:["prince"]},{unified:"1F478",shortnames:["princess"]},{unified:"1F473-200D-2642-FE0F",shortnames:["man-wearing-turban","man_with_turban"]},{unified:"1F473-200D-2640-FE0F",shortnames:["woman-wearing-turban"]},{unified:"1F472",shortnames:["man_with_gua_pi_mao"]},{unified:"1F9D5",shortnames:["person_with_headscarf"]},{unified:"1F9D4",shortnames:["bearded_person"]},{unified:"1F471-200D-2642-FE0F",shortnames:["blond-haired-man","person_with_blond_hair"]},{unified:"1F471-200D-2640-FE0F",shortnames:["blond-haired-woman"]},{unified:"1F935",shortnames:["man_in_tuxedo"]},{unified:"1F470",shortnames:["bride_with_veil"]},{unified:"1F930",shortnames:["pregnant_woman"]},{unified:"1F931",shortnames:["breast-feeding"]},{unified:"1F47C",shortnames:["angel"]},{unified:"1F385",shortnames:["santa"]},{unified:"1F936",shortnames:["mrs_claus"]},{unified:"1F9D9-200D-2640-FE0F",shortnames:["female_mage","mage"]},{unified:"1F9D9-200D-2642-FE0F",shortnames:["male_mage"]},{unified:"1F9DA-200D-2640-FE0F",shortnames:["female_fairy","fairy"]},{unified:"1F9DA-200D-2642-FE0F",shortnames:["male_fairy"]},{unified:"1F9DB-200D-2640-FE0F",shortnames:["female_vampire","vampire"]},{unified:"1F9DB-200D-2642-FE0F",shortnames:["male_vampire"]},{unified:"1F9DC-200D-2640-FE0F",shortnames:["mermaid"]},{unified:"1F9DC-200D-2642-FE0F",shortnames:["merman","merperson"]},{unified:"1F9DD-200D-2640-FE0F",shortnames:["female_elf"]},{unified:"1F9DD-200D-2642-FE0F",shortnames:["male_elf","elf"]},{unified:"1F9DE-200D-2640-FE0F",shortnames:["female_genie"]},{unified:"1F9DE-200D-2642-FE0F",shortnames:["male_genie","genie"]},{unified:"1F9DF-200D-2640-FE0F",shortnames:["female_zombie"]},{unified:"1F9DF-200D-2642-FE0F",shortnames:["male_zombie","zombie"]},{unified:"1F64D-200D-2642-FE0F",shortnames:["man-frowning"]},{unified:"1F64D-200D-2640-FE0F",shortnames:["woman-frowning","person_frowning"]},{unified:"1F64E-200D-2642-FE0F",shortnames:["man-pouting"]},{unified:"1F64E-200D-2640-FE0F",shortnames:["woman-pouting","person_with_pouting_face"]},{unified:"1F645-200D-2642-FE0F",shortnames:["man-gesturing-no"]},{unified:"1F645-200D-2640-FE0F",shortnames:["woman-gesturing-no","no_good"]},{unified:"1F646-200D-2642-FE0F",shortnames:["man-gesturing-ok"]},{unified:"1F646-200D-2640-FE0F",shortnames:["woman-gesturing-ok","ok_woman"]},{unified:"1F481-200D-2642-FE0F",shortnames:["man-tipping-hand"]},{unified:"1F481-200D-2640-FE0F",shortnames:["woman-tipping-hand","information_desk_person"]},{unified:"1F64B-200D-2642-FE0F",shortnames:["man-raising-hand"]},{unified:"1F64B-200D-2640-FE0F",shortnames:["woman-raising-hand","raising_hand"]},{unified:"1F647-200D-2642-FE0F",shortnames:["man-bowing","bow"]},{unified:"1F647-200D-2640-FE0F",shortnames:["woman-bowing"]},{unified:"1F926",shortnames:["face_palm"]},{unified:"1F926-200D-2642-FE0F",shortnames:["man-facepalming"]},{unified:"1F926-200D-2640-FE0F",shortnames:["woman-facepalming"]},{unified:"1F937",shortnames:["shrug"]},{unified:"1F937-200D-2642-FE0F",shortnames:["man-shrugging"]},{unified:"1F937-200D-2640-FE0F",shortnames:["woman-shrugging"]},{unified:"1F486-200D-2642-FE0F",shortnames:["man-getting-massage"]},{unified:"1F486-200D-2640-FE0F",shortnames:["woman-getting-massage","massage"]},{unified:"1F487-200D-2642-FE0F",shortnames:["man-getting-haircut"]},{unified:"1F487-200D-2640-FE0F",shortnames:["woman-getting-haircut","haircut"]},{unified:"1F6B6-200D-2642-FE0F",shortnames:["man-walking","walking"]},{unified:"1F6B6-200D-2640-FE0F",shortnames:["woman-walking"]},{unified:"1F3C3-200D-2642-FE0F",shortnames:["man-running","runner"]},{unified:"1F3C3-200D-2640-FE0F",shortnames:["woman-running"]},{unified:"1F483",shortnames:["dancer"]},{unified:"1F57A",shortnames:["man_dancing"]},{unified:"1F46F-200D-2642-FE0F",shortnames:["man-with-bunny-ears-partying"]},{unified:"1F46F-200D-2640-FE0F",shortnames:["woman-with-bunny-ears-partying","dancers"]},{unified:"1F9D6-200D-2640-FE0F",shortnames:["woman_in_steamy_room"]},{unified:"1F9D6-200D-2642-FE0F",shortnames:["man_in_steamy_room","person_in_steamy_room"]},{unified:"1F9D7-200D-2640-FE0F",shortnames:["woman_climbing","person_climbing"]},{unified:"1F9D7-200D-2642-FE0F",shortnames:["man_climbing"]},{unified:"1F9D8-200D-2640-FE0F",shortnames:["woman_in_lotus_position","person_in_lotus_position"]},{unified:"1F9D8-200D-2642-FE0F",shortnames:["man_in_lotus_position"]},{unified:"1F6C0",shortnames:["bath"]},{unified:"1F6CC",shortnames:["sleeping_accommodation"]},{unified:"1F574-FE0F",shortnames:["man_in_business_suit_levitating"]},{unified:"1F5E3-FE0F",shortnames:["speaking_head_in_silhouette"]},{unified:"1F464",shortnames:["bust_in_silhouette"]},{unified:"1F465",shortnames:["busts_in_silhouette"]},{unified:"1F93A",shortnames:["fencer"]},{unified:"1F3C7",shortnames:["horse_racing"]},{unified:"26F7-FE0F",shortnames:["skier"]},{unified:"1F3C2",shortnames:["snowboarder"]},{unified:"1F3CC-FE0F-200D-2642-FE0F",shortnames:["man-golfing","golfer"]},{unified:"1F3CC-FE0F-200D-2640-FE0F",shortnames:["woman-golfing"]},{unified:"1F3C4-200D-2642-FE0F",shortnames:["man-surfing","surfer"]},{unified:"1F3C4-200D-2640-FE0F",shortnames:["woman-surfing"]},{unified:"1F6A3-200D-2642-FE0F",shortnames:["man-rowing-boat","rowboat"]},{unified:"1F6A3-200D-2640-FE0F",shortnames:["woman-rowing-boat"]},{unified:"1F3CA-200D-2642-FE0F",shortnames:["man-swimming","swimmer"]},{unified:"1F3CA-200D-2640-FE0F",shortnames:["woman-swimming"]},{unified:"26F9-FE0F-200D-2642-FE0F",shortnames:["man-bouncing-ball","person_with_ball"]},{unified:"26F9-FE0F-200D-2640-FE0F",shortnames:["woman-bouncing-ball"]},{unified:"1F3CB-FE0F-200D-2642-FE0F",shortnames:["man-lifting-weights","weight_lifter"]},{unified:"1F3CB-FE0F-200D-2640-FE0F",shortnames:["woman-lifting-weights"]},{unified:"1F6B4-200D-2642-FE0F",shortnames:["man-biking","bicyclist"]},{unified:"1F6B4-200D-2640-FE0F",shortnames:["woman-biking"]},{unified:"1F6B5-200D-2642-FE0F",shortnames:["man-mountain-biking","mountain_bicyclist"]},{unified:"1F6B5-200D-2640-FE0F",shortnames:["woman-mountain-biking"]},{unified:"1F3CE-FE0F",shortnames:["racing_car"]},{unified:"1F3CD-FE0F",shortnames:["racing_motorcycle"]},{unified:"1F938",shortnames:["person_doing_cartwheel"]},{unified:"1F938-200D-2642-FE0F",shortnames:["man-cartwheeling"]},{unified:"1F938-200D-2640-FE0F",shortnames:["woman-cartwheeling"]},{unified:"1F93C",shortnames:["wrestlers"]},{unified:"1F93C-200D-2642-FE0F",shortnames:["man-wrestling"]},{unified:"1F93C-200D-2640-FE0F",shortnames:["woman-wrestling"]},{unified:"1F93D",shortnames:["water_polo"]},{unified:"1F93D-200D-2642-FE0F",shortnames:["man-playing-water-polo"]},{unified:"1F93D-200D-2640-FE0F",shortnames:["woman-playing-water-polo"]},{unified:"1F93E",shortnames:["handball"]},{unified:"1F93E-200D-2642-FE0F",shortnames:["man-playing-handball"]},{unified:"1F93E-200D-2640-FE0F",shortnames:["woman-playing-handball"]},{unified:"1F939",shortnames:["juggling"]},{unified:"1F939-200D-2642-FE0F",shortnames:["man-juggling"]},{unified:"1F939-200D-2640-FE0F",shortnames:["woman-juggling"]},{unified:"1F46B",shortnames:["couple"]},{unified:"1F46C",shortnames:["two_men_holding_hands"]},{unified:"1F46D",shortnames:["two_women_holding_hands"]},{unified:"1F469-200D-2764-FE0F-200D-1F48B-200D-1F468",shortnames:["woman-kiss-man","couplekiss"]},{unified:"1F468-200D-2764-FE0F-200D-1F48B-200D-1F468",shortnames:["man-kiss-man"]},{unified:"1F469-200D-2764-FE0F-200D-1F48B-200D-1F469",shortnames:["woman-kiss-woman"]},{unified:"1F469-200D-2764-FE0F-200D-1F468",shortnames:["woman-heart-man","couple_with_heart"]},{unified:"1F468-200D-2764-FE0F-200D-1F468",shortnames:["man-heart-man"]},{unified:"1F469-200D-2764-FE0F-200D-1F469",shortnames:["woman-heart-woman"]},{unified:"1F468-200D-1F469-200D-1F466",shortnames:["man-woman-boy","family"]},{unified:"1F468-200D-1F469-200D-1F467",shortnames:["man-woman-girl"]},{unified:"1F468-200D-1F469-200D-1F467-200D-1F466",shortnames:["man-woman-girl-boy"]},{unified:"1F468-200D-1F469-200D-1F466-200D-1F466",shortnames:["man-woman-boy-boy"]},{unified:"1F468-200D-1F469-200D-1F467-200D-1F467",shortnames:["man-woman-girl-girl"]},{unified:"1F468-200D-1F468-200D-1F466",shortnames:["man-man-boy"]},{unified:"1F468-200D-1F468-200D-1F467",shortnames:["man-man-girl"]},{unified:"1F468-200D-1F468-200D-1F467-200D-1F466",shortnames:["man-man-girl-boy"]},{unified:"1F468-200D-1F468-200D-1F466-200D-1F466",shortnames:["man-man-boy-boy"]},{unified:"1F468-200D-1F468-200D-1F467-200D-1F467",shortnames:["man-man-girl-girl"]},{unified:"1F469-200D-1F469-200D-1F466",shortnames:["woman-woman-boy"]},{unified:"1F469-200D-1F469-200D-1F467",shortnames:["woman-woman-girl"]},{unified:"1F469-200D-1F469-200D-1F467-200D-1F466",shortnames:["woman-woman-girl-boy"]},{unified:"1F469-200D-1F469-200D-1F466-200D-1F466",shortnames:["woman-woman-boy-boy"]},{unified:"1F469-200D-1F469-200D-1F467-200D-1F467",shortnames:["woman-woman-girl-girl"]},{unified:"1F468-200D-1F466",shortnames:["man-boy"]},{unified:"1F468-200D-1F466-200D-1F466",shortnames:["man-boy-boy"]},{unified:"1F468-200D-1F467",shortnames:["man-girl"]},{unified:"1F468-200D-1F467-200D-1F466",shortnames:["man-girl-boy"]},{unified:"1F468-200D-1F467-200D-1F467",shortnames:["man-girl-girl"]},{unified:"1F469-200D-1F466",shortnames:["woman-boy"]},{unified:"1F469-200D-1F466-200D-1F466",shortnames:["woman-boy-boy"]},{unified:"1F469-200D-1F467",shortnames:["woman-girl"]},{unified:"1F469-200D-1F467-200D-1F466",shortnames:["woman-girl-boy"]},{unified:"1F469-200D-1F467-200D-1F467",shortnames:["woman-girl-girl"]},{unified:"1F933",shortnames:["selfie"]},{unified:"1F4AA",shortnames:["muscle"]},{unified:"1F448",shortnames:["point_left"]},{unified:"1F449",shortnames:["point_right"]},{unified:"261D-FE0F",shortnames:["point_up"]},{unified:"1F446",shortnames:["point_up_2"]},{unified:"1F595",shortnames:["middle_finger"]},{unified:"1F447",shortnames:["point_down"]},{unified:"270C-FE0F",shortnames:["v"]},{unified:"1F91E",shortnames:["crossed_fingers"]},{unified:"1F596",shortnames:["spock-hand"]},{unified:"1F918",shortnames:["the_horns"]},{unified:"1F919",shortnames:["call_me_hand"]},{unified:"1F590-FE0F",shortnames:["raised_hand_with_fingers_splayed"]},{unified:"270B",shortnames:["hand"]},{unified:"1F44C",shortnames:["ok_hand"]},{unified:"1F44D",shortnames:["+1"]},{unified:"1F44E",shortnames:["-1"]},{unified:"270A",shortnames:["fist"]},{unified:"1F44A",shortnames:["facepunch"]},{unified:"1F91B",shortnames:["left-facing_fist"]},{unified:"1F91C",shortnames:["right-facing_fist"]},{unified:"1F91A",shortnames:["raised_back_of_hand"]},{unified:"1F44B",shortnames:["wave"]},{unified:"1F91F",shortnames:["i_love_you_hand_sign"]},{unified:"270D-FE0F",shortnames:["writing_hand"]},{unified:"1F44F",shortnames:["clap"]},{unified:"1F450",shortnames:["open_hands"]},{unified:"1F64C",shortnames:["raised_hands"]},{unified:"1F932",shortnames:["palms_up_together"]},{unified:"1F64F",shortnames:["pray"]},{unified:"1F91D",shortnames:["handshake"]},{unified:"1F485",shortnames:["nail_care"]},{unified:"1F442",shortnames:["ear"]},{unified:"1F443",shortnames:["nose"]},{unified:"1F463",shortnames:["footprints"]},{unified:"1F440",shortnames:["eyes"]},{unified:"1F441-FE0F",shortnames:["eye"]},{unified:"1F441-FE0F-200D-1F5E8-FE0F",shortnames:["eye-in-speech-bubble"]},{unified:"1F9E0",shortnames:["brain"]},{unified:"1F445",shortnames:["tongue"]},{unified:"1F444",shortnames:["lips"]},{unified:"1F48B",shortnames:["kiss"]},{unified:"1F498",shortnames:["cupid"]},{unified:"2764-FE0F",shortnames:["heart"]},{unified:"1F493",shortnames:["heartbeat"]},{unified:"1F494",shortnames:["broken_heart"]},{unified:"1F495",shortnames:["two_hearts"]},{unified:"1F496",shortnames:["sparkling_heart"]},{unified:"1F497",shortnames:["heartpulse"]},{unified:"1F499",shortnames:["blue_heart"]},{unified:"1F49A",shortnames:["green_heart"]},{unified:"1F49B",shortnames:["yellow_heart"]},{unified:"1F9E1",shortnames:["orange_heart"]},{unified:"1F49C",shortnames:["purple_heart"]},{unified:"1F5A4",shortnames:["black_heart"]},{unified:"1F49D",shortnames:["gift_heart"]},{unified:"1F49E",shortnames:["revolving_hearts"]},{unified:"1F49F",shortnames:["heart_decoration"]},{unified:"2763-FE0F",shortnames:["heavy_heart_exclamation_mark_ornament"]},{unified:"1F48C",shortnames:["love_letter"]},{unified:"1F4A4",shortnames:["zzz"]},{unified:"1F4A2",shortnames:["anger"]},{unified:"1F4A3",shortnames:["bomb"]},{unified:"1F4A5",shortnames:["boom"]},{unified:"1F4A6",shortnames:["sweat_drops"]},{unified:"1F4A8",shortnames:["dash"]},{unified:"1F4AB",shortnames:["dizzy"]},{unified:"1F4AC",shortnames:["speech_balloon"]},{unified:"1F5E8-FE0F",shortnames:["left_speech_bubble"]},{unified:"1F5EF-FE0F",shortnames:["right_anger_bubble"]},{unified:"1F4AD",shortnames:["thought_balloon"]},{unified:"1F573-FE0F",shortnames:["hole"]},{unified:"1F453",shortnames:["eyeglasses"]},{unified:"1F576-FE0F",shortnames:["dark_sunglasses"]},{unified:"1F454",shortnames:["necktie"]},{unified:"1F455",shortnames:["shirt"]},{unified:"1F456",shortnames:["jeans"]},{unified:"1F9E3",shortnames:["scarf"]},{unified:"1F9E4",shortnames:["gloves"]},{unified:"1F9E5",shortnames:["coat"]},{unified:"1F9E6",shortnames:["socks"]},{unified:"1F457",shortnames:["dress"]},{unified:"1F458",shortnames:["kimono"]},{unified:"1F459",shortnames:["bikini"]},{unified:"1F45A",shortnames:["womans_clothes"]},{unified:"1F45B",shortnames:["purse"]},{unified:"1F45C",shortnames:["handbag"]},{unified:"1F45D",shortnames:["pouch"]},{unified:"1F6CD-FE0F",shortnames:["shopping_bags"]},{unified:"1F392",shortnames:["school_satchel"]},{unified:"1F45E",shortnames:["mans_shoe"]},{unified:"1F45F",shortnames:["athletic_shoe"]},{unified:"1F460",shortnames:["high_heel"]},{unified:"1F461",shortnames:["sandal"]},{unified:"1F462",shortnames:["boot"]},{unified:"1F451",shortnames:["crown"]},{unified:"1F452",shortnames:["womans_hat"]},{unified:"1F3A9",shortnames:["tophat"]},{unified:"1F393",shortnames:["mortar_board"]},{unified:"1F9E2",shortnames:["billed_cap"]},{unified:"26D1-FE0F",shortnames:["helmet_with_white_cross"]},{unified:"1F4FF",shortnames:["prayer_beads"]},{unified:"1F484",shortnames:["lipstick"]},{unified:"1F48D",shortnames:["ring"]},{unified:"1F48E",shortnames:["gem"]}]},{name:"Animals & Nature",emojis:[{unified:"1F435",shortnames:["monkey_face"]},{unified:"1F412",shortnames:["monkey"]},{unified:"1F98D",shortnames:["gorilla"]},{unified:"1F436",shortnames:["dog"]},{unified:"1F415",shortnames:["dog2"]},{unified:"1F429",shortnames:["poodle"]},{unified:"1F43A",shortnames:["wolf"]},{unified:"1F98A",shortnames:["fox_face"]},{unified:"1F431",shortnames:["cat"]},{unified:"1F408",shortnames:["cat2"]},{unified:"1F981",shortnames:["lion_face"]},{unified:"1F42F",shortnames:["tiger"]},{unified:"1F405",shortnames:["tiger2"]},{unified:"1F406",shortnames:["leopard"]},{unified:"1F434",shortnames:["horse"]},{unified:"1F40E",shortnames:["racehorse"]},{unified:"1F984",shortnames:["unicorn_face"]},{unified:"1F993",shortnames:["zebra_face"]},{unified:"1F98C",shortnames:["deer"]},{unified:"1F42E",shortnames:["cow"]},{unified:"1F402",shortnames:["ox"]},{unified:"1F403",shortnames:["water_buffalo"]},{unified:"1F404",shortnames:["cow2"]},{unified:"1F437",shortnames:["pig"]},{unified:"1F416",shortnames:["pig2"]},{unified:"1F417",shortnames:["boar"]},{unified:"1F43D",shortnames:["pig_nose"]},{unified:"1F40F",shortnames:["ram"]},{unified:"1F411",shortnames:["sheep"]},{unified:"1F410",shortnames:["goat"]},{unified:"1F42A",shortnames:["dromedary_camel"]},{unified:"1F42B",shortnames:["camel"]},{unified:"1F992",shortnames:["giraffe_face"]},{unified:"1F418",shortnames:["elephant"]},{unified:"1F98F",shortnames:["rhinoceros"]},{unified:"1F42D",shortnames:["mouse"]},{unified:"1F401",shortnames:["mouse2"]},{unified:"1F400",shortnames:["rat"]},{unified:"1F439",shortnames:["hamster"]},{unified:"1F430",shortnames:["rabbit"]},{unified:"1F407",shortnames:["rabbit2"]},{unified:"1F43F-FE0F",shortnames:["chipmunk"]},{unified:"1F994",shortnames:["hedgehog"]},{unified:"1F987",shortnames:["bat"]},{unified:"1F43B",shortnames:["bear"]},{unified:"1F428",shortnames:["koala"]},{unified:"1F43C",shortnames:["panda_face"]},{unified:"1F43E",shortnames:["feet"]},{unified:"1F983",shortnames:["turkey"]},{unified:"1F414",shortnames:["chicken"]},{unified:"1F413",shortnames:["rooster"]},{unified:"1F423",shortnames:["hatching_chick"]},{unified:"1F424",shortnames:["baby_chick"]},{unified:"1F425",shortnames:["hatched_chick"]},{unified:"1F426",shortnames:["bird"]},{unified:"1F427",shortnames:["penguin"]},{unified:"1F54A-FE0F",shortnames:["dove_of_peace"]},{unified:"1F985",shortnames:["eagle"]},{unified:"1F986",shortnames:["duck"]},{unified:"1F989",shortnames:["owl"]},{unified:"1F438",shortnames:["frog"]},{unified:"1F40A",shortnames:["crocodile"]},{unified:"1F422",shortnames:["turtle"]},{unified:"1F98E",shortnames:["lizard"]},{unified:"1F40D",shortnames:["snake"]},{unified:"1F432",shortnames:["dragon_face"]},{unified:"1F409",shortnames:["dragon"]},{unified:"1F995",shortnames:["sauropod"]},{unified:"1F996",shortnames:["t-rex"]},{unified:"1F433",shortnames:["whale"]},{unified:"1F40B",shortnames:["whale2"]},{unified:"1F42C",shortnames:["dolphin"]},{unified:"1F41F",shortnames:["fish"]},{unified:"1F420",shortnames:["tropical_fish"]},{unified:"1F421",shortnames:["blowfish"]},{unified:"1F988",shortnames:["shark"]},{unified:"1F419",shortnames:["octopus"]},{unified:"1F41A",shortnames:["shell"]},{unified:"1F980",shortnames:["crab"]},{unified:"1F990",shortnames:["shrimp"]},{unified:"1F991",shortnames:["squid"]},{unified:"1F40C",shortnames:["snail"]},{unified:"1F98B",shortnames:["butterfly"]},{unified:"1F41B",shortnames:["bug"]},{unified:"1F41C",shortnames:["ant"]},{unified:"1F41D",shortnames:["bee"]},{unified:"1F41E",shortnames:["beetle"]},{unified:"1F997",shortnames:["cricket"]},{unified:"1F577-FE0F",shortnames:["spider"]},{unified:"1F578-FE0F",shortnames:["spider_web"]},{unified:"1F982",shortnames:["scorpion"]},{unified:"1F490",shortnames:["bouquet"]},{unified:"1F338",shortnames:["cherry_blossom"]},{unified:"1F4AE",shortnames:["white_flower"]},{unified:"1F3F5-FE0F",shortnames:["rosette"]},{unified:"1F339",shortnames:["rose"]},{unified:"1F940",shortnames:["wilted_flower"]},{unified:"1F33A",shortnames:["hibiscus"]},{unified:"1F33B",shortnames:["sunflower"]},{unified:"1F33C",shortnames:["blossom"]},{unified:"1F337",shortnames:["tulip"]},{unified:"1F331",shortnames:["seedling"]},{unified:"1F332",shortnames:["evergreen_tree"]},{unified:"1F333",shortnames:["deciduous_tree"]},{unified:"1F334",shortnames:["palm_tree"]},{unified:"1F335",shortnames:["cactus"]},{unified:"1F33E",shortnames:["ear_of_rice"]},{unified:"1F33F",shortnames:["herb"]},{unified:"2618-FE0F",shortnames:["shamrock"]},{unified:"1F340",shortnames:["four_leaf_clover"]},{unified:"1F341",shortnames:["maple_leaf"]},{unified:"1F342",shortnames:["fallen_leaf"]},{unified:"1F343",shortnames:["leaves"]}]},{name:"Food & Drink",emojis:[{unified:"1F347",shortnames:["grapes"]},{unified:"1F348",shortnames:["melon"]},{unified:"1F349",shortnames:["watermelon"]},{unified:"1F34A",shortnames:["tangerine"]},{unified:"1F34B",shortnames:["lemon"]},{unified:"1F34C",shortnames:["banana"]},{unified:"1F34D",shortnames:["pineapple"]},{unified:"1F34E",shortnames:["apple"]},{unified:"1F34F",shortnames:["green_apple"]},{unified:"1F350",shortnames:["pear"]},{unified:"1F351",shortnames:["peach"]},{unified:"1F352",shortnames:["cherries"]},{unified:"1F353",shortnames:["strawberry"]},{unified:"1F95D",shortnames:["kiwifruit"]},{unified:"1F345",shortnames:["tomato"]},{unified:"1F965",shortnames:["coconut"]},{unified:"1F951",shortnames:["avocado"]},{unified:"1F346",shortnames:["eggplant"]},{unified:"1F954",shortnames:["potato"]},{unified:"1F955",shortnames:["carrot"]},{unified:"1F33D",shortnames:["corn"]},{unified:"1F336-FE0F",shortnames:["hot_pepper"]},{unified:"1F952",shortnames:["cucumber"]},{unified:"1F966",shortnames:["broccoli"]},{unified:"1F344",shortnames:["mushroom"]},{unified:"1F95C",shortnames:["peanuts"]},{unified:"1F330",shortnames:["chestnut"]},{unified:"1F35E",shortnames:["bread"]},{unified:"1F950",shortnames:["croissant"]},{unified:"1F956",shortnames:["baguette_bread"]},{unified:"1F968",shortnames:["pretzel"]},{unified:"1F95E",shortnames:["pancakes"]},{unified:"1F9C0",shortnames:["cheese_wedge"]},{unified:"1F356",shortnames:["meat_on_bone"]},{unified:"1F357",shortnames:["poultry_leg"]},{unified:"1F969",shortnames:["cut_of_meat"]},{unified:"1F953",shortnames:["bacon"]},{unified:"1F354",shortnames:["hamburger"]},{unified:"1F35F",shortnames:["fries"]},{unified:"1F355",shortnames:["pizza"]},{unified:"1F32D",shortnames:["hotdog"]},{unified:"1F96A",shortnames:["sandwich"]},{unified:"1F32E",shortnames:["taco"]},{unified:"1F32F",shortnames:["burrito"]},{unified:"1F959",shortnames:["stuffed_flatbread"]},{unified:"1F95A",shortnames:["egg"]},{unified:"1F373",shortnames:["fried_egg"]},{unified:"1F958",shortnames:["shallow_pan_of_food"]},{unified:"1F372",shortnames:["stew"]},{unified:"1F963",shortnames:["bowl_with_spoon"]},{unified:"1F957",shortnames:["green_salad"]},{unified:"1F37F",shortnames:["popcorn"]},{unified:"1F96B",shortnames:["canned_food"]},{unified:"1F371",shortnames:["bento"]},{unified:"1F358",shortnames:["rice_cracker"]},{unified:"1F359",shortnames:["rice_ball"]},{unified:"1F35A",shortnames:["rice"]},{unified:"1F35B",shortnames:["curry"]},{unified:"1F35C",shortnames:["ramen"]},{unified:"1F35D",shortnames:["spaghetti"]},{unified:"1F360",shortnames:["sweet_potato"]},{unified:"1F362",shortnames:["oden"]},{unified:"1F363",shortnames:["sushi"]},{unified:"1F364",shortnames:["fried_shrimp"]},{unified:"1F365",shortnames:["fish_cake"]},{unified:"1F361",shortnames:["dango"]},{unified:"1F95F",shortnames:["dumpling"]},{unified:"1F960",shortnames:["fortune_cookie"]},{unified:"1F961",shortnames:["takeout_box"]},{unified:"1F366",shortnames:["icecream"]},{unified:"1F367",shortnames:["shaved_ice"]},{unified:"1F368",shortnames:["ice_cream"]},{unified:"1F369",shortnames:["doughnut"]},{unified:"1F36A",shortnames:["cookie"]},{unified:"1F382",shortnames:["birthday"]},{unified:"1F370",shortnames:["cake"]},{unified:"1F967",shortnames:["pie"]},{unified:"1F36B",shortnames:["chocolate_bar"]},{unified:"1F36C",shortnames:["candy"]},{unified:"1F36D",shortnames:["lollipop"]},{unified:"1F36E",shortnames:["custard"]},{unified:"1F36F",shortnames:["honey_pot"]},{unified:"1F37C",shortnames:["baby_bottle"]},{unified:"1F95B",shortnames:["glass_of_milk"]},{unified:"2615",shortnames:["coffee"]},{unified:"1F375",shortnames:["tea"]},{unified:"1F376",shortnames:["sake"]},{unified:"1F37E",shortnames:["champagne"]},{unified:"1F377",shortnames:["wine_glass"]},{unified:"1F378",shortnames:["cocktail"]},{unified:"1F379",shortnames:["tropical_drink"]},{unified:"1F37A",shortnames:["beer"]},{unified:"1F37B",shortnames:["beers"]},{unified:"1F942",shortnames:["clinking_glasses"]},{unified:"1F943",shortnames:["tumbler_glass"]},{unified:"1F964",shortnames:["cup_with_straw"]},{unified:"1F962",shortnames:["chopsticks"]},{unified:"1F37D-FE0F",shortnames:["knife_fork_plate"]},{unified:"1F374",shortnames:["fork_and_knife"]},{unified:"1F944",shortnames:["spoon"]},{unified:"1F52A",shortnames:["hocho"]},{unified:"1F3FA",shortnames:["amphora"]}]},{name:"Travel & Places",emojis:[{unified:"1F30D",shortnames:["earth_africa"]},{unified:"1F30E",shortnames:["earth_americas"]},{unified:"1F30F",shortnames:["earth_asia"]},{unified:"1F310",shortnames:["globe_with_meridians"]},{unified:"1F5FA-FE0F",shortnames:["world_map"]},{unified:"1F5FE",shortnames:["japan"]},{unified:"1F3D4-FE0F",shortnames:["snow_capped_mountain"]},{unified:"26F0-FE0F",shortnames:["mountain"]},{unified:"1F30B",shortnames:["volcano"]},{unified:"1F5FB",shortnames:["mount_fuji"]},{unified:"1F3D5-FE0F",shortnames:["camping"]},{unified:"1F3D6-FE0F",shortnames:["beach_with_umbrella"]},{unified:"1F3DC-FE0F",shortnames:["desert"]},{unified:"1F3DD-FE0F",shortnames:["desert_island"]},{unified:"1F3DE-FE0F",shortnames:["national_park"]},{unified:"1F3DF-FE0F",shortnames:["stadium"]},{unified:"1F3DB-FE0F",shortnames:["classical_building"]},{unified:"1F3D7-FE0F",shortnames:["building_construction"]},{unified:"1F3D8-FE0F",shortnames:["house_buildings"]},{unified:"1F3D9-FE0F",shortnames:["cityscape"]},{unified:"1F3DA-FE0F",shortnames:["derelict_house_building"]},{unified:"1F3E0",shortnames:["house"]},{unified:"1F3E1",shortnames:["house_with_garden"]},{unified:"1F3E2",shortnames:["office"]},{unified:"1F3E3",shortnames:["post_office"]},{unified:"1F3E4",shortnames:["european_post_office"]},{unified:"1F3E5",shortnames:["hospital"]},{unified:"1F3E6",shortnames:["bank"]},{unified:"1F3E8",shortnames:["hotel"]},{unified:"1F3E9",shortnames:["love_hotel"]},{unified:"1F3EA",shortnames:["convenience_store"]},{unified:"1F3EB",shortnames:["school"]},{unified:"1F3EC",shortnames:["department_store"]},{unified:"1F3ED",shortnames:["factory"]},{unified:"1F3EF",shortnames:["japanese_castle"]},{unified:"1F3F0",shortnames:["european_castle"]},{unified:"1F492",shortnames:["wedding"]},{unified:"1F5FC",shortnames:["tokyo_tower"]},{unified:"1F5FD",shortnames:["statue_of_liberty"]},{unified:"26EA",shortnames:["church"]},{unified:"1F54C",shortnames:["mosque"]},{unified:"1F54D",shortnames:["synagogue"]},{unified:"26E9-FE0F",shortnames:["shinto_shrine"]},{unified:"1F54B",shortnames:["kaaba"]},{unified:"26F2",shortnames:["fountain"]},{unified:"26FA",shortnames:["tent"]},{unified:"1F301",shortnames:["foggy"]},{unified:"1F303",shortnames:["night_with_stars"]},{unified:"1F304",shortnames:["sunrise_over_mountains"]},{unified:"1F305",shortnames:["sunrise"]},{unified:"1F306",shortnames:["city_sunset"]},{unified:"1F307",shortnames:["city_sunrise"]},{unified:"1F309",shortnames:["bridge_at_night"]},{unified:"2668-FE0F",shortnames:["hotsprings"]},{unified:"1F30C",shortnames:["milky_way"]},{unified:"1F3A0",shortnames:["carousel_horse"]},{unified:"1F3A1",shortnames:["ferris_wheel"]},{unified:"1F3A2",shortnames:["roller_coaster"]},{unified:"1F488",shortnames:["barber"]},{unified:"1F3AA",shortnames:["circus_tent"]},{unified:"1F3AD",shortnames:["performing_arts"]},{unified:"1F5BC-FE0F",shortnames:["frame_with_picture"]},{unified:"1F3A8",shortnames:["art"]},{unified:"1F3B0",shortnames:["slot_machine"]},{unified:"1F682",shortnames:["steam_locomotive"]},{unified:"1F683",shortnames:["railway_car"]},{unified:"1F684",shortnames:["bullettrain_side"]},{unified:"1F685",shortnames:["bullettrain_front"]},{unified:"1F686",shortnames:["train2"]},{unified:"1F687",shortnames:["metro"]},{unified:"1F688",shortnames:["light_rail"]},{unified:"1F689",shortnames:["station"]},{unified:"1F68A",shortnames:["tram"]},{unified:"1F69D",shortnames:["monorail"]},{unified:"1F69E",shortnames:["mountain_railway"]},{unified:"1F68B",shortnames:["train"]},{unified:"1F68C",shortnames:["bus"]},{unified:"1F68D",shortnames:["oncoming_bus"]},{unified:"1F68E",shortnames:["trolleybus"]},{unified:"1F690",shortnames:["minibus"]},{unified:"1F691",shortnames:["ambulance"]},{unified:"1F692",shortnames:["fire_engine"]},{unified:"1F693",shortnames:["police_car"]},{unified:"1F694",shortnames:["oncoming_police_car"]},{unified:"1F695",shortnames:["taxi"]},{unified:"1F696",shortnames:["oncoming_taxi"]},{unified:"1F697",shortnames:["car"]},{unified:"1F698",shortnames:["oncoming_automobile"]},{unified:"1F699",shortnames:["blue_car"]},{unified:"1F69A",shortnames:["truck"]},{unified:"1F69B",shortnames:["articulated_lorry"]},{unified:"1F69C",shortnames:["tractor"]},{unified:"1F6B2",shortnames:["bike"]},{unified:"1F6F4",shortnames:["scooter"]},{unified:"1F6F5",shortnames:["motor_scooter"]},{unified:"1F68F",shortnames:["busstop"]},{unified:"1F6E3-FE0F",shortnames:["motorway"]},{unified:"1F6E4-FE0F",shortnames:["railway_track"]},{unified:"26FD",shortnames:["fuelpump"]},{unified:"1F6A8",shortnames:["rotating_light"]},{unified:"1F6A5",shortnames:["traffic_light"]},{unified:"1F6A6",shortnames:["vertical_traffic_light"]},{unified:"1F6A7",shortnames:["construction"]},{unified:"1F6D1",shortnames:["octagonal_sign"]},{unified:"2693",shortnames:["anchor"]},{unified:"26F5",shortnames:["boat"]},{unified:"1F6F6",shortnames:["canoe"]},{unified:"1F6A4",shortnames:["speedboat"]},{unified:"1F6F3-FE0F",shortnames:["passenger_ship"]},{unified:"26F4-FE0F",shortnames:["ferry"]},{unified:"1F6E5-FE0F",shortnames:["motor_boat"]},{unified:"1F6A2",shortnames:["ship"]},{unified:"2708-FE0F",shortnames:["airplane"]},{unified:"1F6E9-FE0F",shortnames:["small_airplane"]},{unified:"1F6EB",shortnames:["airplane_departure"]},{unified:"1F6EC",shortnames:["airplane_arriving"]},{unified:"1F4BA",shortnames:["seat"]},{unified:"1F681",shortnames:["helicopter"]},{unified:"1F69F",shortnames:["suspension_railway"]},{unified:"1F6A0",shortnames:["mountain_cableway"]},{unified:"1F6A1",shortnames:["aerial_tramway"]},{unified:"1F6F0-FE0F",shortnames:["satellite"]},{unified:"1F680",shortnames:["rocket"]},{unified:"1F6F8",shortnames:["flying_saucer"]},{unified:"1F6CE-FE0F",shortnames:["bellhop_bell"]},{unified:"1F6AA",shortnames:["door"]},{unified:"1F6CF-FE0F",shortnames:["bed"]},{unified:"1F6CB-FE0F",shortnames:["couch_and_lamp"]},{unified:"1F6BD",shortnames:["toilet"]},{unified:"1F6BF",shortnames:["shower"]},{unified:"1F6C1",shortnames:["bathtub"]},{unified:"231B",shortnames:["hourglass"]},{unified:"23F3",shortnames:["hourglass_flowing_sand"]},{unified:"231A",shortnames:["watch"]},{unified:"23F0",shortnames:["alarm_clock"]},{unified:"23F1-FE0F",shortnames:["stopwatch"]},{unified:"23F2-FE0F",shortnames:["timer_clock"]},{unified:"1F570-FE0F",shortnames:["mantelpiece_clock"]},{unified:"1F55B",shortnames:["clock12"]},{unified:"1F567",shortnames:["clock1230"]},{unified:"1F550",shortnames:["clock1"]},{unified:"1F55C",shortnames:["clock130"]},{unified:"1F551",shortnames:["clock2"]},{unified:"1F55D",shortnames:["clock230"]},{unified:"1F552",shortnames:["clock3"]},{unified:"1F55E",shortnames:["clock330"]},{unified:"1F553",shortnames:["clock4"]},{unified:"1F55F",shortnames:["clock430"]},{unified:"1F554",shortnames:["clock5"]},{unified:"1F560",shortnames:["clock530"]},{unified:"1F555",shortnames:["clock6"]},{unified:"1F561",shortnames:["clock630"]},{unified:"1F556",shortnames:["clock7"]},{unified:"1F562",shortnames:["clock730"]},{unified:"1F557",shortnames:["clock8"]},{unified:"1F563",shortnames:["clock830"]},{unified:"1F558",shortnames:["clock9"]},{unified:"1F564",shortnames:["clock930"]},{unified:"1F559",shortnames:["clock10"]},{unified:"1F565",shortnames:["clock1030"]},{unified:"1F55A",shortnames:["clock11"]},{unified:"1F566",shortnames:["clock1130"]},{unified:"1F311",shortnames:["new_moon"]},{unified:"1F312",shortnames:["waxing_crescent_moon"]},{unified:"1F313",shortnames:["first_quarter_moon"]},{unified:"1F314",shortnames:["moon"]},{unified:"1F315",shortnames:["full_moon"]},{unified:"1F316",shortnames:["waning_gibbous_moon"]},{unified:"1F317",shortnames:["last_quarter_moon"]},{unified:"1F318",shortnames:["waning_crescent_moon"]},{unified:"1F319",shortnames:["crescent_moon"]},{unified:"1F31A",shortnames:["new_moon_with_face"]},{unified:"1F31B",shortnames:["first_quarter_moon_with_face"]},{unified:"1F31C",shortnames:["last_quarter_moon_with_face"]},{unified:"1F321-FE0F",shortnames:["thermometer"]},{unified:"2600-FE0F",shortnames:["sunny"]},{unified:"1F31D",shortnames:["full_moon_with_face"]},{unified:"1F31E",shortnames:["sun_with_face"]},{unified:"2B50",shortnames:["star"]},{unified:"1F31F",shortnames:["star2"]},{unified:"1F320",shortnames:["stars"]},{unified:"2601-FE0F",shortnames:["cloud"]},{unified:"26C5",shortnames:["partly_sunny"]},{unified:"26C8-FE0F",shortnames:["thunder_cloud_and_rain"]},{unified:"1F324-FE0F",shortnames:["mostly_sunny"]},{unified:"1F325-FE0F",shortnames:["barely_sunny"]},{unified:"1F326-FE0F",shortnames:["partly_sunny_rain"]},{unified:"1F327-FE0F",shortnames:["rain_cloud"]},{unified:"1F328-FE0F",shortnames:["snow_cloud"]},{unified:"1F329-FE0F",shortnames:["lightning"]},{unified:"1F32A-FE0F",shortnames:["tornado"]},{unified:"1F32B-FE0F",shortnames:["fog"]},{unified:"1F32C-FE0F",shortnames:["wind_blowing_face"]},{unified:"1F300",shortnames:["cyclone"]},{unified:"1F308",shortnames:["rainbow"]},{unified:"1F302",shortnames:["closed_umbrella"]},{unified:"2602-FE0F",shortnames:["umbrella"]},{unified:"2614",shortnames:["umbrella_with_rain_drops"]},{unified:"26F1-FE0F",shortnames:["umbrella_on_ground"]},{unified:"26A1",shortnames:["zap"]},{unified:"2744-FE0F",shortnames:["snowflake"]},{unified:"2603-FE0F",shortnames:["snowman"]},{unified:"26C4",shortnames:["snowman_without_snow"]},{unified:"2604-FE0F",shortnames:["comet"]},{unified:"1F525",shortnames:["fire"]},{unified:"1F4A7",shortnames:["droplet"]},{unified:"1F30A",shortnames:["ocean"]}]},{name:"Activities",emojis:[{unified:"1F383",shortnames:["jack_o_lantern"]},{unified:"1F384",shortnames:["christmas_tree"]},{unified:"1F386",shortnames:["fireworks"]},{unified:"1F387",shortnames:["sparkler"]},{unified:"2728",shortnames:["sparkles"]},{unified:"1F388",shortnames:["balloon"]},{unified:"1F389",shortnames:["tada"]},{unified:"1F38A",shortnames:["confetti_ball"]},{unified:"1F38B",shortnames:["tanabata_tree"]},{unified:"1F38D",shortnames:["bamboo"]},{unified:"1F38E",shortnames:["dolls"]},{unified:"1F38F",shortnames:["flags"]},{unified:"1F390",shortnames:["wind_chime"]},{unified:"1F391",shortnames:["rice_scene"]},{unified:"1F380",shortnames:["ribbon"]},{unified:"1F381",shortnames:["gift"]},{unified:"1F397-FE0F",shortnames:["reminder_ribbon"]},{unified:"1F39F-FE0F",shortnames:["admission_tickets"]},{unified:"1F3AB",shortnames:["ticket"]},{unified:"1F396-FE0F",shortnames:["medal"]},{unified:"1F3C6",shortnames:["trophy"]},{unified:"1F3C5",shortnames:["sports_medal"]},{unified:"1F947",shortnames:["first_place_medal"]},{unified:"1F948",shortnames:["second_place_medal"]},{unified:"1F949",shortnames:["third_place_medal"]},{unified:"26BD",shortnames:["soccer"]},{unified:"26BE",shortnames:["baseball"]},{unified:"1F3C0",shortnames:["basketball"]},{unified:"1F3D0",shortnames:["volleyball"]},{unified:"1F3C8",shortnames:["football"]},{unified:"1F3C9",shortnames:["rugby_football"]},{unified:"1F3BE",shortnames:["tennis"]},{unified:"1F3B1",shortnames:["8ball"]},{unified:"1F3B3",shortnames:["bowling"]},{unified:"1F3CF",shortnames:["cricket_bat_and_ball"]},{unified:"1F3D1",shortnames:["field_hockey_stick_and_ball"]},{unified:"1F3D2",shortnames:["ice_hockey_stick_and_puck"]},{unified:"1F3D3",shortnames:["table_tennis_paddle_and_ball"]},{unified:"1F3F8",shortnames:["badminton_racquet_and_shuttlecock"]},{unified:"1F94A",shortnames:["boxing_glove"]},{unified:"1F94B",shortnames:["martial_arts_uniform"]},{unified:"1F945",shortnames:["goal_net"]},{unified:"1F3AF",shortnames:["dart"]},{unified:"26F3",shortnames:["golf"]},{unified:"26F8-FE0F",shortnames:["ice_skate"]},{unified:"1F3A3",shortnames:["fishing_pole_and_fish"]},{unified:"1F3BD",shortnames:["running_shirt_with_sash"]},{unified:"1F3BF",shortnames:["ski"]},{unified:"1F6F7",shortnames:["sled"]},{unified:"1F94C",shortnames:["curling_stone"]},{unified:"1F3AE",shortnames:["video_game"]},{unified:"1F579-FE0F",shortnames:["joystick"]},{unified:"1F3B2",shortnames:["game_die"]},{unified:"2660-FE0F",shortnames:["spades"]},{unified:"2665-FE0F",shortnames:["hearts"]},{unified:"2666-FE0F",shortnames:["diamonds"]},{unified:"2663-FE0F",shortnames:["clubs"]},{unified:"1F0CF",shortnames:["black_joker"]},{unified:"1F004",shortnames:["mahjong"]},{unified:"1F3B4",shortnames:["flower_playing_cards"]}]},{name:"Objects",emojis:[{unified:"1F507",shortnames:["mute"]},{unified:"1F508",shortnames:["speaker"]},{unified:"1F509",shortnames:["sound"]},{unified:"1F50A",shortnames:["loud_sound"]},{unified:"1F4E2",shortnames:["loudspeaker"]},{unified:"1F4E3",shortnames:["mega"]},{unified:"1F4EF",shortnames:["postal_horn"]},{unified:"1F514",shortnames:["bell"]},{unified:"1F515",shortnames:["no_bell"]},{unified:"1F3BC",shortnames:["musical_score"]},{unified:"1F3B5",shortnames:["musical_note"]},{unified:"1F3B6",shortnames:["notes"]},{unified:"1F399-FE0F",shortnames:["studio_microphone"]},{unified:"1F39A-FE0F",shortnames:["level_slider"]},{unified:"1F39B-FE0F",shortnames:["control_knobs"]},{unified:"1F3A4",shortnames:["microphone"]},{unified:"1F3A7",shortnames:["headphones"]},{unified:"1F4FB",shortnames:["radio"]},{unified:"1F3B7",shortnames:["saxophone"]},{unified:"1F3B8",shortnames:["guitar"]},{unified:"1F3B9",shortnames:["musical_keyboard"]},{unified:"1F3BA",shortnames:["trumpet"]},{unified:"1F3BB",shortnames:["violin"]},{unified:"1F941",shortnames:["drum_with_drumsticks"]},{unified:"1F4F1",shortnames:["iphone"]},{unified:"1F4F2",shortnames:["calling"]},{unified:"260E-FE0F",shortnames:["phone"]},{unified:"1F4DE",shortnames:["telephone_receiver"]},{unified:"1F4DF",shortnames:["pager"]},{unified:"1F4E0",shortnames:["fax"]},{unified:"1F50B",shortnames:["battery"]},{unified:"1F50C",shortnames:["electric_plug"]},{unified:"1F4BB",shortnames:["computer"]},{unified:"1F5A5-FE0F",shortnames:["desktop_computer"]},{unified:"1F5A8-FE0F",shortnames:["printer"]},{unified:"2328-FE0F",shortnames:["keyboard"]},{unified:"1F5B1-FE0F",shortnames:["three_button_mouse"]},{unified:"1F5B2-FE0F",shortnames:["trackball"]},{unified:"1F4BD",shortnames:["minidisc"]},{unified:"1F4BE",shortnames:["floppy_disk"]},{unified:"1F4BF",shortnames:["cd"]},{unified:"1F4C0",shortnames:["dvd"]},{unified:"1F3A5",shortnames:["movie_camera"]},{unified:"1F39E-FE0F",shortnames:["film_frames"]},{unified:"1F4FD-FE0F",shortnames:["film_projector"]},{unified:"1F3AC",shortnames:["clapper"]},{unified:"1F4FA",shortnames:["tv"]},{unified:"1F4F7",shortnames:["camera"]},{unified:"1F4F8",shortnames:["camera_with_flash"]},{unified:"1F4F9",shortnames:["video_camera"]},{unified:"1F4FC",shortnames:["vhs"]},{unified:"1F50D",shortnames:["mag"]},{unified:"1F50E",shortnames:["mag_right"]},{unified:"1F52C",shortnames:["microscope"]},{unified:"1F52D",shortnames:["telescope"]},{unified:"1F4E1",shortnames:["satellite_antenna"]},{unified:"1F56F-FE0F",shortnames:["candle"]},{unified:"1F4A1",shortnames:["bulb"]},{unified:"1F526",shortnames:["flashlight"]},{unified:"1F3EE",shortnames:["izakaya_lantern"]},{unified:"1F4D4",shortnames:["notebook_with_decorative_cover"]},{unified:"1F4D5",shortnames:["closed_book"]},{unified:"1F4D6",shortnames:["book"]},{unified:"1F4D7",shortnames:["green_book"]},{unified:"1F4D8",shortnames:["blue_book"]},{unified:"1F4D9",shortnames:["orange_book"]},{unified:"1F4DA",shortnames:["books"]},{unified:"1F4D3",shortnames:["notebook"]},{unified:"1F4D2",shortnames:["ledger"]},{unified:"1F4C3",shortnames:["page_with_curl"]},{unified:"1F4DC",shortnames:["scroll"]},{unified:"1F4C4",shortnames:["page_facing_up"]},{unified:"1F4F0",shortnames:["newspaper"]},{unified:"1F5DE-FE0F",shortnames:["rolled_up_newspaper"]},{unified:"1F4D1",shortnames:["bookmark_tabs"]},{unified:"1F516",shortnames:["bookmark"]},{unified:"1F3F7-FE0F",shortnames:["label"]},{unified:"1F4B0",shortnames:["moneybag"]},{unified:"1F4B4",shortnames:["yen"]},{unified:"1F4B5",shortnames:["dollar"]},{unified:"1F4B6",shortnames:["euro"]},{unified:"1F4B7",shortnames:["pound"]},{unified:"1F4B8",shortnames:["money_with_wings"]},{unified:"1F4B3",shortnames:["credit_card"]},{unified:"1F4B9",shortnames:["chart"]},{unified:"1F4B1",shortnames:["currency_exchange"]},{unified:"1F4B2",shortnames:["heavy_dollar_sign"]},{unified:"2709-FE0F",shortnames:["email"]},{unified:"1F4E7",shortnames:["e-mail"]},{unified:"1F4E8",shortnames:["incoming_envelope"]},{unified:"1F4E9",shortnames:["envelope_with_arrow"]},{unified:"1F4E4",shortnames:["outbox_tray"]},{unified:"1F4E5",shortnames:["inbox_tray"]},{unified:"1F4E6",shortnames:["package"]},{unified:"1F4EB",shortnames:["mailbox"]},{unified:"1F4EA",shortnames:["mailbox_closed"]},{unified:"1F4EC",shortnames:["mailbox_with_mail"]},{unified:"1F4ED",shortnames:["mailbox_with_no_mail"]},{unified:"1F4EE",shortnames:["postbox"]},{unified:"1F5F3-FE0F",shortnames:["ballot_box_with_ballot"]},{unified:"270F-FE0F",shortnames:["pencil2"]},{unified:"2712-FE0F",shortnames:["black_nib"]},{unified:"1F58B-FE0F",shortnames:["lower_left_fountain_pen"]},{unified:"1F58A-FE0F",shortnames:["lower_left_ballpoint_pen"]},{unified:"1F58C-FE0F",shortnames:["lower_left_paintbrush"]},{unified:"1F58D-FE0F",shortnames:["lower_left_crayon"]},{unified:"1F4DD",shortnames:["memo"]},{unified:"1F4BC",shortnames:["briefcase"]},{unified:"1F4C1",shortnames:["file_folder"]},{unified:"1F4C2",shortnames:["open_file_folder"]},{unified:"1F5C2-FE0F",shortnames:["card_index_dividers"]},{unified:"1F4C5",shortnames:["date"]},{unified:"1F4C6",shortnames:["calendar"]},{unified:"1F5D2-FE0F",shortnames:["spiral_note_pad"]},{unified:"1F5D3-FE0F",shortnames:["spiral_calendar_pad"]},{unified:"1F4C7",shortnames:["card_index"]},{unified:"1F4C8",shortnames:["chart_with_upwards_trend"]},{unified:"1F4C9",shortnames:["chart_with_downwards_trend"]},{unified:"1F4CA",shortnames:["bar_chart"]},{unified:"1F4CB",shortnames:["clipboard"]},{unified:"1F4CC",shortnames:["pushpin"]},{unified:"1F4CD",shortnames:["round_pushpin"]},{unified:"1F4CE",shortnames:["paperclip"]},{unified:"1F587-FE0F",shortnames:["linked_paperclips"]},{unified:"1F4CF",shortnames:["straight_ruler"]},{unified:"1F4D0",shortnames:["triangular_ruler"]},{unified:"2702-FE0F",shortnames:["scissors"]},{unified:"1F5C3-FE0F",shortnames:["card_file_box"]},{unified:"1F5C4-FE0F",shortnames:["file_cabinet"]},{unified:"1F5D1-FE0F",shortnames:["wastebasket"]},{unified:"1F512",shortnames:["lock"]},{unified:"1F513",shortnames:["unlock"]},{unified:"1F50F",shortnames:["lock_with_ink_pen"]},{unified:"1F510",shortnames:["closed_lock_with_key"]},{unified:"1F511",shortnames:["key"]},{unified:"1F5DD-FE0F",shortnames:["old_key"]},{unified:"1F528",shortnames:["hammer"]},{unified:"26CF-FE0F",shortnames:["pick"]},{unified:"2692-FE0F",shortnames:["hammer_and_pick"]},{unified:"1F6E0-FE0F",shortnames:["hammer_and_wrench"]},{unified:"1F5E1-FE0F",shortnames:["dagger_knife"]},{unified:"2694-FE0F",shortnames:["crossed_swords"]},{unified:"1F52B",shortnames:["gun"]},{unified:"1F3F9",shortnames:["bow_and_arrow"]},{unified:"1F6E1-FE0F",shortnames:["shield"]},{unified:"1F527",shortnames:["wrench"]},{unified:"1F529",shortnames:["nut_and_bolt"]},{unified:"2699-FE0F",shortnames:["gear"]},{unified:"1F5DC-FE0F",shortnames:["compression"]},{unified:"2697-FE0F",shortnames:["alembic"]},{unified:"2696-FE0F",shortnames:["scales"]},{unified:"1F517",shortnames:["link"]},{unified:"26D3-FE0F",shortnames:["chains"]},{unified:"1F489",shortnames:["syringe"]},{unified:"1F48A",shortnames:["pill"]},{unified:"1F6AC",shortnames:["smoking"]},{unified:"26B0-FE0F",shortnames:["coffin"]},{unified:"26B1-FE0F",shortnames:["funeral_urn"]},{unified:"1F5FF",shortnames:["moyai"]},{unified:"1F6E2-FE0F",shortnames:["oil_drum"]},{unified:"1F52E",shortnames:["crystal_ball"]},{unified:"1F6D2",shortnames:["shopping_trolley"]}]},{name:"Symbols",emojis:[{unified:"1F3E7",shortnames:["atm"]},{unified:"1F6AE",shortnames:["put_litter_in_its_place"]},{unified:"1F6B0",shortnames:["potable_water"]},{unified:"267F",shortnames:["wheelchair"]},{unified:"1F6B9",shortnames:["mens"]},{unified:"1F6BA",shortnames:["womens"]},{unified:"1F6BB",shortnames:["restroom"]},{unified:"1F6BC",shortnames:["baby_symbol"]},{unified:"1F6BE",shortnames:["wc"]},{unified:"1F6C2",shortnames:["passport_control"]},{unified:"1F6C3",shortnames:["customs"]},{unified:"1F6C4",shortnames:["baggage_claim"]},{unified:"1F6C5",shortnames:["left_luggage"]},{unified:"26A0-FE0F",shortnames:["warning"]},{unified:"1F6B8",shortnames:["children_crossing"]},{unified:"26D4",shortnames:["no_entry"]},{unified:"1F6AB",shortnames:["no_entry_sign"]},{unified:"1F6B3",shortnames:["no_bicycles"]},{unified:"1F6AD",shortnames:["no_smoking"]},{unified:"1F6AF",shortnames:["do_not_litter"]},{unified:"1F6B1",shortnames:["non-potable_water"]},{unified:"1F6B7",shortnames:["no_pedestrians"]},{unified:"1F4F5",shortnames:["no_mobile_phones"]},{unified:"1F51E",shortnames:["underage"]},{unified:"2622-FE0F",shortnames:["radioactive_sign"]},{unified:"2623-FE0F",shortnames:["biohazard_sign"]},{unified:"2B06-FE0F",shortnames:["arrow_up"]},{unified:"2197-FE0F",shortnames:["arrow_upper_right"]},{unified:"27A1-FE0F",shortnames:["arrow_right"]},{unified:"2198-FE0F",shortnames:["arrow_lower_right"]},{unified:"2B07-FE0F",shortnames:["arrow_down"]},{unified:"2199-FE0F",shortnames:["arrow_lower_left"]},{unified:"2B05-FE0F",shortnames:["arrow_left"]},{unified:"2196-FE0F",shortnames:["arrow_upper_left"]},{unified:"2195-FE0F",shortnames:["arrow_up_down"]},{unified:"2194-FE0F",shortnames:["left_right_arrow"]},{unified:"21A9-FE0F",shortnames:["leftwards_arrow_with_hook"]},{unified:"21AA-FE0F",shortnames:["arrow_right_hook"]},{unified:"2934-FE0F",shortnames:["arrow_heading_up"]},{unified:"2935-FE0F",shortnames:["arrow_heading_down"]},{unified:"1F503",shortnames:["arrows_clockwise"]},{unified:"1F504",shortnames:["arrows_counterclockwise"]},{unified:"1F519",shortnames:["back"]},{unified:"1F51A",shortnames:["end"]},{unified:"1F51B",shortnames:["on"]},{unified:"1F51C",shortnames:["soon"]},{unified:"1F51D",shortnames:["top"]},{unified:"1F6D0",shortnames:["place_of_worship"]},{unified:"269B-FE0F",shortnames:["atom_symbol"]},{unified:"1F549-FE0F",shortnames:["om_symbol"]},{unified:"2721-FE0F",shortnames:["star_of_david"]},{unified:"2638-FE0F",shortnames:["wheel_of_dharma"]},{unified:"262F-FE0F",shortnames:["yin_yang"]},{unified:"271D-FE0F",shortnames:["latin_cross"]},{unified:"2626-FE0F",shortnames:["orthodox_cross"]},{unified:"262A-FE0F",shortnames:["star_and_crescent"]},{unified:"262E-FE0F",shortnames:["peace_symbol"]},{unified:"1F54E",shortnames:["menorah_with_nine_branches"]},{unified:"1F52F",shortnames:["six_pointed_star"]},{unified:"2648",shortnames:["aries"]},{unified:"2649",shortnames:["taurus"]},{unified:"264A",shortnames:["gemini"]},{unified:"264B",shortnames:["cancer"]},{unified:"264C",shortnames:["leo"]},{unified:"264D",shortnames:["virgo"]},{unified:"264E",shortnames:["libra"]},{unified:"264F",shortnames:["scorpius"]},{unified:"2650",shortnames:["sagittarius"]},{unified:"2651",shortnames:["capricorn"]},{unified:"2652",shortnames:["aquarius"]},{unified:"2653",shortnames:["pisces"]},{unified:"26CE",shortnames:["ophiuchus"]},{unified:"1F500",shortnames:["twisted_rightwards_arrows"]},{unified:"1F501",shortnames:["repeat"]},{unified:"1F502",shortnames:["repeat_one"]},{unified:"25B6-FE0F",shortnames:["arrow_forward"]},{unified:"23E9",shortnames:["fast_forward"]},{unified:"23ED-FE0F",shortnames:["black_right_pointing_double_triangle_with_vertical_bar"]},{unified:"23EF-FE0F",shortnames:["black_right_pointing_triangle_with_double_vertical_bar"]},{unified:"25C0-FE0F",shortnames:["arrow_backward"]},{unified:"23EA",shortnames:["rewind"]},{unified:"23EE-FE0F",shortnames:["black_left_pointing_double_triangle_with_vertical_bar"]},{unified:"1F53C",shortnames:["arrow_up_small"]},{unified:"23EB",shortnames:["arrow_double_up"]},{unified:"1F53D",shortnames:["arrow_down_small"]},{unified:"23EC",shortnames:["arrow_double_down"]},{unified:"23F8-FE0F",shortnames:["double_vertical_bar"]},{unified:"23F9-FE0F",shortnames:["black_square_for_stop"]},{unified:"23FA-FE0F",shortnames:["black_circle_for_record"]},{unified:"23CF-FE0F",shortnames:["eject"]},{unified:"1F3A6",shortnames:["cinema"]},{unified:"1F505",shortnames:["low_brightness"]},{unified:"1F506",shortnames:["high_brightness"]},{unified:"1F4F6",shortnames:["signal_strength"]},{unified:"1F4F3",shortnames:["vibration_mode"]},{unified:"1F4F4",shortnames:["mobile_phone_off"]},{unified:"2640-FE0F",shortnames:["female_sign"]},{unified:"2642-FE0F",shortnames:["male_sign"]},{unified:"2695-FE0F",shortnames:["medical_symbol"]},{unified:"267B-FE0F",shortnames:["recycle"]},{unified:"269C-FE0F",shortnames:["fleur_de_lis"]},{unified:"1F531",shortnames:["trident"]},{unified:"1F4DB",shortnames:["name_badge"]},{unified:"1F530",shortnames:["beginner"]},{unified:"2B55",shortnames:["o"]},{unified:"2705",shortnames:["white_check_mark"]},{unified:"2611-FE0F",shortnames:["ballot_box_with_check"]},{unified:"2714-FE0F",shortnames:["heavy_check_mark"]},{unified:"2716-FE0F",shortnames:["heavy_multiplication_x"]},{unified:"274C",shortnames:["x"]},{unified:"274E",shortnames:["negative_squared_cross_mark"]},{unified:"2795",shortnames:["heavy_plus_sign"]},{unified:"2796",shortnames:["heavy_minus_sign"]},{unified:"2797",shortnames:["heavy_division_sign"]},{unified:"27B0",shortnames:["curly_loop"]},{unified:"27BF",shortnames:["loop"]},{unified:"303D-FE0F",shortnames:["part_alternation_mark"]},{unified:"2733-FE0F",shortnames:["eight_spoked_asterisk"]},{unified:"2734-FE0F",shortnames:["eight_pointed_black_star"]},{unified:"2747-FE0F",shortnames:["sparkle"]},{unified:"203C-FE0F",shortnames:["bangbang"]},{unified:"2049-FE0F",shortnames:["interrobang"]},{unified:"2753",shortnames:["question"]},{unified:"2754",shortnames:["grey_question"]},{unified:"2755",shortnames:["grey_exclamation"]},{unified:"2757",shortnames:["exclamation"]},{unified:"3030-FE0F",shortnames:["wavy_dash"]},{unified:"00A9-FE0F",shortnames:["copyright"]},{unified:"00AE-FE0F",shortnames:["registered"]},{unified:"2122-FE0F",shortnames:["tm"]},{unified:"0023-FE0F-20E3",shortnames:["hash"]},{unified:"002A-FE0F-20E3",shortnames:["keycap_star"]},{unified:"0030-FE0F-20E3",shortnames:["zero"]},{unified:"0031-FE0F-20E3",shortnames:["one"]},{unified:"0032-FE0F-20E3",shortnames:["two"]},{unified:"0033-FE0F-20E3",shortnames:["three"]},{unified:"0034-FE0F-20E3",shortnames:["four"]},{unified:"0035-FE0F-20E3",shortnames:["five"]},{unified:"0036-FE0F-20E3",shortnames:["six"]},{unified:"0037-FE0F-20E3",shortnames:["seven"]},{unified:"0038-FE0F-20E3",shortnames:["eight"]},{unified:"0039-FE0F-20E3",shortnames:["nine"]},{unified:"1F51F",shortnames:["keycap_ten"]},{unified:"1F4AF",shortnames:["100"]},{unified:"1F520",shortnames:["capital_abcd"]},{unified:"1F521",shortnames:["abcd"]},{unified:"1F522",shortnames:["1234"]},{unified:"1F523",shortnames:["symbols"]},{unified:"1F524",shortnames:["abc"]},{unified:"1F170-FE0F",shortnames:["a"]},{unified:"1F18E",shortnames:["ab"]},{unified:"1F171-FE0F",shortnames:["b"]},{unified:"1F191",shortnames:["cl"]},{unified:"1F192",shortnames:["cool"]},{unified:"1F193",shortnames:["free"]},{unified:"2139-FE0F",shortnames:["information_source"]},{unified:"1F194",shortnames:["id"]},{unified:"24C2-FE0F",shortnames:["m"]},{unified:"1F195",shortnames:["new"]},{unified:"1F196",shortnames:["ng"]},{unified:"1F17E-FE0F",shortnames:["o2"]},{unified:"1F197",shortnames:["ok"]},{unified:"1F17F-FE0F",shortnames:["parking"]},{unified:"1F198",shortnames:["sos"]},{unified:"1F199",shortnames:["up"]},{unified:"1F19A",shortnames:["vs"]},{unified:"1F201",shortnames:["koko"]},{unified:"1F202-FE0F",shortnames:["sa"]},{unified:"1F237-FE0F",shortnames:["u6708"]},{unified:"1F236",shortnames:["u6709"]},{unified:"1F22F",shortnames:["u6307"]},{unified:"1F250",shortnames:["ideograph_advantage"]},{unified:"1F239",shortnames:["u5272"]},{unified:"1F21A",shortnames:["u7121"]},{unified:"1F232",shortnames:["u7981"]},{unified:"1F251",shortnames:["accept"]},{unified:"1F238",shortnames:["u7533"]},{unified:"1F234",shortnames:["u5408"]},{unified:"1F233",shortnames:["u7a7a"]},{unified:"3297-FE0F",shortnames:["congratulations"]},{unified:"3299-FE0F",shortnames:["secret"]},{unified:"1F23A",shortnames:["u55b6"]},{unified:"1F235",shortnames:["u6e80"]},{unified:"25AA-FE0F",shortnames:["black_small_square"]},{unified:"25AB-FE0F",shortnames:["white_small_square"]},{unified:"25FB-FE0F",shortnames:["white_medium_square"]},{unified:"25FC-FE0F",shortnames:["black_medium_square"]},{unified:"25FD",shortnames:["white_medium_small_square"]},{unified:"25FE",shortnames:["black_medium_small_square"]},{unified:"2B1B",shortnames:["black_large_square"]},{unified:"2B1C",shortnames:["white_large_square"]},{unified:"1F536",shortnames:["large_orange_diamond"]},{unified:"1F537",shortnames:["large_blue_diamond"]},{unified:"1F538",shortnames:["small_orange_diamond"]},{unified:"1F539",shortnames:["small_blue_diamond"]},{unified:"1F53A",shortnames:["small_red_triangle"]},{unified:"1F53B",shortnames:["small_red_triangle_down"]},{unified:"1F4A0",shortnames:["diamond_shape_with_a_dot_inside"]},{unified:"1F518",shortnames:["radio_button"]},{unified:"1F532",shortnames:["black_square_button"]},{unified:"1F533",shortnames:["white_square_button"]},{unified:"26AA",shortnames:["white_circle"]},{unified:"26AB",shortnames:["black_circle"]},{unified:"1F534",shortnames:["red_circle"]},{unified:"1F535",shortnames:["large_blue_circle"]}]},{name:"Flags",emojis:[{unified:"1F3C1",shortnames:["checkered_flag"]},{unified:"1F6A9",shortnames:["triangular_flag_on_post"]},{unified:"1F38C",shortnames:["crossed_flags"]},{unified:"1F3F4",shortnames:["waving_black_flag"]},{unified:"1F3F3-FE0F",shortnames:["waving_white_flag"]},{unified:"1F3F3-FE0F-200D-1F308",shortnames:["rainbow-flag"]},{unified:"1F1E6-1F1E8",shortnames:["flag-ac"]},{unified:"1F1E6-1F1E9",shortnames:["flag-ad"]},{unified:"1F1E6-1F1EA",shortnames:["flag-ae"]},{unified:"1F1E6-1F1EB",shortnames:["flag-af"]},{unified:"1F1E6-1F1EC",shortnames:["flag-ag"]},{unified:"1F1E6-1F1EE",shortnames:["flag-ai"]},{unified:"1F1E6-1F1F1",shortnames:["flag-al"]},{unified:"1F1E6-1F1F2",shortnames:["flag-am"]},{unified:"1F1E6-1F1F4",shortnames:["flag-ao"]},{unified:"1F1E6-1F1F6",shortnames:["flag-aq"]},{unified:"1F1E6-1F1F7",shortnames:["flag-ar"]},{unified:"1F1E6-1F1F8",shortnames:["flag-as"]},{unified:"1F1E6-1F1F9",shortnames:["flag-at"]},{unified:"1F1E6-1F1FA",shortnames:["flag-au"]},{unified:"1F1E6-1F1FC",shortnames:["flag-aw"]},{unified:"1F1E6-1F1FD",shortnames:["flag-ax"]},{unified:"1F1E6-1F1FF",shortnames:["flag-az"]},{unified:"1F1E7-1F1E6",shortnames:["flag-ba"]},{unified:"1F1E7-1F1E7",shortnames:["flag-bb"]},{unified:"1F1E7-1F1E9",shortnames:["flag-bd"]},{unified:"1F1E7-1F1EA",shortnames:["flag-be"]},{unified:"1F1E7-1F1EB",shortnames:["flag-bf"]},{unified:"1F1E7-1F1EC",shortnames:["flag-bg"]},{unified:"1F1E7-1F1ED",shortnames:["flag-bh"]},{unified:"1F1E7-1F1EE",shortnames:["flag-bi"]},{unified:"1F1E7-1F1EF",shortnames:["flag-bj"]},{unified:"1F1E7-1F1F1",shortnames:["flag-bl"]},{unified:"1F1E7-1F1F2",shortnames:["flag-bm"]},{unified:"1F1E7-1F1F3",shortnames:["flag-bn"]},{unified:"1F1E7-1F1F4",shortnames:["flag-bo"]},{unified:"1F1E7-1F1F6",shortnames:["flag-bq"]},{unified:"1F1E7-1F1F7",shortnames:["flag-br"]},{unified:"1F1E7-1F1F8",shortnames:["flag-bs"]},{unified:"1F1E7-1F1F9",shortnames:["flag-bt"]},{unified:"1F1E7-1F1FB",shortnames:["flag-bv"]},{unified:"1F1E7-1F1FC",shortnames:["flag-bw"]},{unified:"1F1E7-1F1FE",shortnames:["flag-by"]},{unified:"1F1E7-1F1FF",shortnames:["flag-bz"]},{unified:"1F1E8-1F1E6",shortnames:["flag-ca"]},{unified:"1F1E8-1F1E8",shortnames:["flag-cc"]},{unified:"1F1E8-1F1E9",shortnames:["flag-cd"]},{unified:"1F1E8-1F1EB",shortnames:["flag-cf"]},{unified:"1F1E8-1F1EC",shortnames:["flag-cg"]},{unified:"1F1E8-1F1ED",shortnames:["flag-ch"]},{unified:"1F1E8-1F1EE",shortnames:["flag-ci"]},{unified:"1F1E8-1F1F0",shortnames:["flag-ck"]},{unified:"1F1E8-1F1F1",shortnames:["flag-cl"]},{unified:"1F1E8-1F1F2",shortnames:["flag-cm"]},{unified:"1F1E8-1F1F3",shortnames:["cn"]},{unified:"1F1E8-1F1F4",shortnames:["flag-co"]},{unified:"1F1E8-1F1F5",shortnames:["flag-cp"]},{unified:"1F1E8-1F1F7",shortnames:["flag-cr"]},{unified:"1F1E8-1F1FA",shortnames:["flag-cu"]},{unified:"1F1E8-1F1FB",shortnames:["flag-cv"]},{unified:"1F1E8-1F1FC",shortnames:["flag-cw"]},{unified:"1F1E8-1F1FD",shortnames:["flag-cx"]},{unified:"1F1E8-1F1FE",shortnames:["flag-cy"]},{unified:"1F1E8-1F1FF",shortnames:["flag-cz"]},{unified:"1F1E9-1F1EA",shortnames:["de"]},{unified:"1F1E9-1F1EC",shortnames:["flag-dg"]},{unified:"1F1E9-1F1EF",shortnames:["flag-dj"]},{unified:"1F1E9-1F1F0",shortnames:["flag-dk"]},{unified:"1F1E9-1F1F2",shortnames:["flag-dm"]},{unified:"1F1E9-1F1F4",shortnames:["flag-do"]},{unified:"1F1E9-1F1FF",shortnames:["flag-dz"]},{unified:"1F1EA-1F1E6",shortnames:["flag-ea"]},{unified:"1F1EA-1F1E8",shortnames:["flag-ec"]},{unified:"1F1EA-1F1EA",shortnames:["flag-ee"]},{unified:"1F1EA-1F1EC",shortnames:["flag-eg"]},{unified:"1F1EA-1F1ED",shortnames:["flag-eh"]},{unified:"1F1EA-1F1F7",shortnames:["flag-er"]},{unified:"1F1EA-1F1F8",shortnames:["es"]},{unified:"1F1EA-1F1F9",shortnames:["flag-et"]},{unified:"1F1EA-1F1FA",shortnames:["flag-eu"]},{unified:"1F1EB-1F1EE",shortnames:["flag-fi"]},{unified:"1F1EB-1F1EF",shortnames:["flag-fj"]},{unified:"1F1EB-1F1F0",shortnames:["flag-fk"]},{unified:"1F1EB-1F1F2",shortnames:["flag-fm"]},{unified:"1F1EB-1F1F4",shortnames:["flag-fo"]},{unified:"1F1EB-1F1F7",shortnames:["fr"]},{unified:"1F1EC-1F1E6",shortnames:["flag-ga"]},{unified:"1F1EC-1F1E7",shortnames:["gb"]},{unified:"1F1EC-1F1E9",shortnames:["flag-gd"]},{unified:"1F1EC-1F1EA",shortnames:["flag-ge"]},{unified:"1F1EC-1F1EB",shortnames:["flag-gf"]},{unified:"1F1EC-1F1EC",shortnames:["flag-gg"]},{unified:"1F1EC-1F1ED",shortnames:["flag-gh"]},{unified:"1F1EC-1F1EE",shortnames:["flag-gi"]},{unified:"1F1EC-1F1F1",shortnames:["flag-gl"]},{unified:"1F1EC-1F1F2",shortnames:["flag-gm"]},{unified:"1F1EC-1F1F3",shortnames:["flag-gn"]},{unified:"1F1EC-1F1F5",shortnames:["flag-gp"]},{unified:"1F1EC-1F1F6",shortnames:["flag-gq"]},{unified:"1F1EC-1F1F7",shortnames:["flag-gr"]},{unified:"1F1EC-1F1F8",shortnames:["flag-gs"]},{unified:"1F1EC-1F1F9",shortnames:["flag-gt"]},{unified:"1F1EC-1F1FA",shortnames:["flag-gu"]},{unified:"1F1EC-1F1FC",shortnames:["flag-gw"]},{unified:"1F1EC-1F1FE",shortnames:["flag-gy"]},{unified:"1F1ED-1F1F0",shortnames:["flag-hk"]},{unified:"1F1ED-1F1F2",shortnames:["flag-hm"]},{unified:"1F1ED-1F1F3",shortnames:["flag-hn"]},{unified:"1F1ED-1F1F7",shortnames:["flag-hr"]},{unified:"1F1ED-1F1F9",shortnames:["flag-ht"]},{unified:"1F1ED-1F1FA",shortnames:["flag-hu"]},{unified:"1F1EE-1F1E8",shortnames:["flag-ic"]},{unified:"1F1EE-1F1E9",shortnames:["flag-id"]},{unified:"1F1EE-1F1EA",shortnames:["flag-ie"]},{unified:"1F1EE-1F1F1",shortnames:["flag-il"]},{unified:"1F1EE-1F1F2",shortnames:["flag-im"]},{unified:"1F1EE-1F1F3",shortnames:["flag-in"]},{unified:"1F1EE-1F1F4",shortnames:["flag-io"]},{unified:"1F1EE-1F1F6",shortnames:["flag-iq"]},{unified:"1F1EE-1F1F7",shortnames:["flag-ir"]},{unified:"1F1EE-1F1F8",shortnames:["flag-is"]},{unified:"1F1EE-1F1F9",shortnames:["it"]},{unified:"1F1EF-1F1EA",shortnames:["flag-je"]},{unified:"1F1EF-1F1F2",shortnames:["flag-jm"]},{unified:"1F1EF-1F1F4",shortnames:["flag-jo"]},{unified:"1F1EF-1F1F5",shortnames:["jp"]},{unified:"1F1F0-1F1EA",shortnames:["flag-ke"]},{unified:"1F1F0-1F1EC",shortnames:["flag-kg"]},{unified:"1F1F0-1F1ED",shortnames:["flag-kh"]},{unified:"1F1F0-1F1EE",shortnames:["flag-ki"]},{unified:"1F1F0-1F1F2",shortnames:["flag-km"]},{unified:"1F1F0-1F1F3",shortnames:["flag-kn"]},{unified:"1F1F0-1F1F5",shortnames:["flag-kp"]},{unified:"1F1F0-1F1F7",shortnames:["kr"]},{unified:"1F1F0-1F1FC",shortnames:["flag-kw"]},{unified:"1F1F0-1F1FE",shortnames:["flag-ky"]},{unified:"1F1F0-1F1FF",shortnames:["flag-kz"]},{unified:"1F1F1-1F1E6",shortnames:["flag-la"]},{unified:"1F1F1-1F1E7",shortnames:["flag-lb"]},{unified:"1F1F1-1F1E8",shortnames:["flag-lc"]},{unified:"1F1F1-1F1EE",shortnames:["flag-li"]},{unified:"1F1F1-1F1F0",shortnames:["flag-lk"]},{unified:"1F1F1-1F1F7",shortnames:["flag-lr"]},{unified:"1F1F1-1F1F8",shortnames:["flag-ls"]},{unified:"1F1F1-1F1F9",shortnames:["flag-lt"]},{unified:"1F1F1-1F1FA",shortnames:["flag-lu"]},{unified:"1F1F1-1F1FB",shortnames:["flag-lv"]},{unified:"1F1F1-1F1FE",shortnames:["flag-ly"]},{unified:"1F1F2-1F1E6",shortnames:["flag-ma"]},{unified:"1F1F2-1F1E8",shortnames:["flag-mc"]},{unified:"1F1F2-1F1E9",shortnames:["flag-md"]},{unified:"1F1F2-1F1EA",shortnames:["flag-me"]},{unified:"1F1F2-1F1EB",shortnames:["flag-mf"]},{unified:"1F1F2-1F1EC",shortnames:["flag-mg"]},{unified:"1F1F2-1F1ED",shortnames:["flag-mh"]},{unified:"1F1F2-1F1F0",shortnames:["flag-mk"]},{unified:"1F1F2-1F1F1",shortnames:["flag-ml"]},{unified:"1F1F2-1F1F2",shortnames:["flag-mm"]},{unified:"1F1F2-1F1F3",shortnames:["flag-mn"]},{unified:"1F1F2-1F1F4",shortnames:["flag-mo"]},{unified:"1F1F2-1F1F5",shortnames:["flag-mp"]},{unified:"1F1F2-1F1F6",shortnames:["flag-mq"]},{unified:"1F1F2-1F1F7",shortnames:["flag-mr"]},{unified:"1F1F2-1F1F8",shortnames:["flag-ms"]},{unified:"1F1F2-1F1F9",shortnames:["flag-mt"]},{unified:"1F1F2-1F1FA",shortnames:["flag-mu"]},{unified:"1F1F2-1F1FB",shortnames:["flag-mv"]},{unified:"1F1F2-1F1FC",shortnames:["flag-mw"]},{unified:"1F1F2-1F1FD",shortnames:["flag-mx"]},{unified:"1F1F2-1F1FE",shortnames:["flag-my"]},{unified:"1F1F2-1F1FF",shortnames:["flag-mz"]},{unified:"1F1F3-1F1E6",shortnames:["flag-na"]},{unified:"1F1F3-1F1E8",shortnames:["flag-nc"]},{unified:"1F1F3-1F1EA",shortnames:["flag-ne"]},{unified:"1F1F3-1F1EB",shortnames:["flag-nf"]},{unified:"1F1F3-1F1EC",shortnames:["flag-ng"]},{unified:"1F1F3-1F1EE",shortnames:["flag-ni"]},{unified:"1F1F3-1F1F1",shortnames:["flag-nl"]},{unified:"1F1F3-1F1F4",shortnames:["flag-no"]},{unified:"1F1F3-1F1F5",shortnames:["flag-np"]},{unified:"1F1F3-1F1F7",shortnames:["flag-nr"]},{unified:"1F1F3-1F1FA",shortnames:["flag-nu"]},{unified:"1F1F3-1F1FF",shortnames:["flag-nz"]},{unified:"1F1F4-1F1F2",shortnames:["flag-om"]},{unified:"1F1F5-1F1E6",shortnames:["flag-pa"]},{unified:"1F1F5-1F1EA",shortnames:["flag-pe"]},{unified:"1F1F5-1F1EB",shortnames:["flag-pf"]},{unified:"1F1F5-1F1EC",shortnames:["flag-pg"]},{unified:"1F1F5-1F1ED",shortnames:["flag-ph"]},{unified:"1F1F5-1F1F0",shortnames:["flag-pk"]},{unified:"1F1F5-1F1F1",shortnames:["flag-pl"]},{unified:"1F1F5-1F1F2",shortnames:["flag-pm"]},{unified:"1F1F5-1F1F3",shortnames:["flag-pn"]},{unified:"1F1F5-1F1F7",shortnames:["flag-pr"]},{unified:"1F1F5-1F1F8",shortnames:["flag-ps"]},{unified:"1F1F5-1F1F9",shortnames:["flag-pt"]},{unified:"1F1F5-1F1FC",shortnames:["flag-pw"]},{unified:"1F1F5-1F1FE",shortnames:["flag-py"]},{unified:"1F1F6-1F1E6",shortnames:["flag-qa"]},{unified:"1F1F7-1F1EA",shortnames:["flag-re"]},{unified:"1F1F7-1F1F4",shortnames:["flag-ro"]},{unified:"1F1F7-1F1F8",shortnames:["flag-rs"]},{unified:"1F1F7-1F1FA",shortnames:["ru"]},{unified:"1F1F7-1F1FC",shortnames:["flag-rw"]},{unified:"1F1F8-1F1E6",shortnames:["flag-sa"]},{unified:"1F1F8-1F1E7",shortnames:["flag-sb"]},{unified:"1F1F8-1F1E8",shortnames:["flag-sc"]},{unified:"1F1F8-1F1E9",shortnames:["flag-sd"]},{unified:"1F1F8-1F1EA",shortnames:["flag-se"]},{unified:"1F1F8-1F1EC",shortnames:["flag-sg"]},{unified:"1F1F8-1F1ED",shortnames:["flag-sh"]},{unified:"1F1F8-1F1EE",shortnames:["flag-si"]},{unified:"1F1F8-1F1EF",shortnames:["flag-sj"]},{unified:"1F1F8-1F1F0",shortnames:["flag-sk"]},{unified:"1F1F8-1F1F1",shortnames:["flag-sl"]},{unified:"1F1F8-1F1F2",shortnames:["flag-sm"]},{unified:"1F1F8-1F1F3",shortnames:["flag-sn"]},{unified:"1F1F8-1F1F4",shortnames:["flag-so"]},{unified:"1F1F8-1F1F7",shortnames:["flag-sr"]},{unified:"1F1F8-1F1F8",shortnames:["flag-ss"]},{unified:"1F1F8-1F1F9",shortnames:["flag-st"]},{unified:"1F1F8-1F1FB",shortnames:["flag-sv"]},{unified:"1F1F8-1F1FD",shortnames:["flag-sx"]},{unified:"1F1F8-1F1FE",shortnames:["flag-sy"]},{unified:"1F1F8-1F1FF",shortnames:["flag-sz"]},{unified:"1F1F9-1F1E6",shortnames:["flag-ta"]},{unified:"1F1F9-1F1E8",shortnames:["flag-tc"]},{unified:"1F1F9-1F1E9",shortnames:["flag-td"]},{unified:"1F1F9-1F1EB",shortnames:["flag-tf"]},{unified:"1F1F9-1F1EC",shortnames:["flag-tg"]},{unified:"1F1F9-1F1ED",shortnames:["flag-th"]},{unified:"1F1F9-1F1EF",shortnames:["flag-tj"]},{unified:"1F1F9-1F1F0",shortnames:["flag-tk"]},{unified:"1F1F9-1F1F1",shortnames:["flag-tl"]},{unified:"1F1F9-1F1F2",shortnames:["flag-tm"]},{unified:"1F1F9-1F1F3",shortnames:["flag-tn"]},{unified:"1F1F9-1F1F4",shortnames:["flag-to"]},{unified:"1F1F9-1F1F7",shortnames:["flag-tr"]},{unified:"1F1F9-1F1F9",shortnames:["flag-tt"]},{unified:"1F1F9-1F1FB",shortnames:["flag-tv"]},{unified:"1F1F9-1F1FC",shortnames:["flag-tw"]},{unified:"1F1F9-1F1FF",shortnames:["flag-tz"]},{unified:"1F1FA-1F1E6",shortnames:["flag-ua"]},{unified:"1F1FA-1F1EC",shortnames:["flag-ug"]},{unified:"1F1FA-1F1F2",shortnames:["flag-um"]},{unified:"1F1FA-1F1F3",shortnames:["flag-un"]},{unified:"1F1FA-1F1F8",shortnames:["us"]},{unified:"1F1FA-1F1FE",shortnames:["flag-uy"]},{unified:"1F1FA-1F1FF",shortnames:["flag-uz"]},{unified:"1F1FB-1F1E6",shortnames:["flag-va"]},{unified:"1F1FB-1F1E8",shortnames:["flag-vc"]},{unified:"1F1FB-1F1EA",shortnames:["flag-ve"]},{unified:"1F1FB-1F1EC",shortnames:["flag-vg"]},{unified:"1F1FB-1F1EE",shortnames:["flag-vi"]},{unified:"1F1FB-1F1F3",shortnames:["flag-vn"]},{unified:"1F1FB-1F1FA",shortnames:["flag-vu"]},{unified:"1F1FC-1F1EB",shortnames:["flag-wf"]},{unified:"1F1FC-1F1F8",shortnames:["flag-ws"]},{unified:"1F1FD-1F1F0",shortnames:["flag-xk"]},{unified:"1F1FE-1F1EA",shortnames:["flag-ye"]},{unified:"1F1FE-1F1F9",shortnames:["flag-yt"]},{unified:"1F1FF-1F1E6",shortnames:["flag-za"]},{unified:"1F1FF-1F1F2",shortnames:["flag-zm"]},{unified:"1F1FF-1F1FC",shortnames:["flag-zw"]},{unified:"1F3F4-E0067-E0062-E0065-E006E-E0067-E007F",shortnames:["flag-england"]},{unified:"1F3F4-E0067-E0062-E0073-E0063-E0074-E007F",shortnames:["flag-scotland"]},{unified:"1F3F4-E0067-E0062-E0077-E006C-E0073-E007F",shortnames:["flag-wales"]}]}];F.byShortName={hash:"0023-FE0F-20E3",keycap_star:"002A-FE0F-20E3",zero:"0030-FE0F-20E3",one:"0031-FE0F-20E3",two:"0032-FE0F-20E3",three:"0033-FE0F-20E3",four:"0034-FE0F-20E3",five:"0035-FE0F-20E3",six:"0036-FE0F-20E3",seven:"0037-FE0F-20E3",eight:"0038-FE0F-20E3",nine:"0039-FE0F-20E3",copyright:"00A9-FE0F",registered:"00AE-FE0F",mahjong:"1F004",black_joker:"1F0CF",a:"1F170-FE0F",b:"1F171-FE0F",o2:"1F17E-FE0F",parking:"1F17F-FE0F",ab:"1F18E",cl:"1F191",cool:"1F192",free:"1F193",id:"1F194",new:"1F195",ng:"1F196",ok:"1F197",sos:"1F198",up:"1F199",vs:"1F19A","flag-ac":"1F1E6-1F1E8","flag-ad":"1F1E6-1F1E9","flag-ae":"1F1E6-1F1EA","flag-af":"1F1E6-1F1EB","flag-ag":"1F1E6-1F1EC","flag-ai":"1F1E6-1F1EE","flag-al":"1F1E6-1F1F1","flag-am":"1F1E6-1F1F2","flag-ao":"1F1E6-1F1F4","flag-aq":"1F1E6-1F1F6","flag-ar":"1F1E6-1F1F7","flag-as":"1F1E6-1F1F8","flag-at":"1F1E6-1F1F9","flag-au":"1F1E6-1F1FA","flag-aw":"1F1E6-1F1FC","flag-ax":"1F1E6-1F1FD","flag-az":"1F1E6-1F1FF","flag-ba":"1F1E7-1F1E6","flag-bb":"1F1E7-1F1E7","flag-bd":"1F1E7-1F1E9","flag-be":"1F1E7-1F1EA","flag-bf":"1F1E7-1F1EB","flag-bg":"1F1E7-1F1EC","flag-bh":"1F1E7-1F1ED","flag-bi":"1F1E7-1F1EE","flag-bj":"1F1E7-1F1EF","flag-bl":"1F1E7-1F1F1","flag-bm":"1F1E7-1F1F2","flag-bn":"1F1E7-1F1F3","flag-bo":"1F1E7-1F1F4","flag-bq":"1F1E7-1F1F6","flag-br":"1F1E7-1F1F7","flag-bs":"1F1E7-1F1F8","flag-bt":"1F1E7-1F1F9","flag-bv":"1F1E7-1F1FB","flag-bw":"1F1E7-1F1FC","flag-by":"1F1E7-1F1FE","flag-bz":"1F1E7-1F1FF","flag-ca":"1F1E8-1F1E6","flag-cc":"1F1E8-1F1E8","flag-cd":"1F1E8-1F1E9","flag-cf":"1F1E8-1F1EB","flag-cg":"1F1E8-1F1EC","flag-ch":"1F1E8-1F1ED","flag-ci":"1F1E8-1F1EE","flag-ck":"1F1E8-1F1F0","flag-cl":"1F1E8-1F1F1","flag-cm":"1F1E8-1F1F2",cn:"1F1E8-1F1F3","flag-co":"1F1E8-1F1F4","flag-cp":"1F1E8-1F1F5","flag-cr":"1F1E8-1F1F7","flag-cu":"1F1E8-1F1FA","flag-cv":"1F1E8-1F1FB","flag-cw":"1F1E8-1F1FC","flag-cx":"1F1E8-1F1FD","flag-cy":"1F1E8-1F1FE","flag-cz":"1F1E8-1F1FF",de:"1F1E9-1F1EA","flag-dg":"1F1E9-1F1EC","flag-dj":"1F1E9-1F1EF","flag-dk":"1F1E9-1F1F0","flag-dm":"1F1E9-1F1F2","flag-do":"1F1E9-1F1F4","flag-dz":"1F1E9-1F1FF","flag-ea":"1F1EA-1F1E6","flag-ec":"1F1EA-1F1E8","flag-ee":"1F1EA-1F1EA","flag-eg":"1F1EA-1F1EC","flag-eh":"1F1EA-1F1ED","flag-er":"1F1EA-1F1F7",es:"1F1EA-1F1F8","flag-et":"1F1EA-1F1F9","flag-eu":"1F1EA-1F1FA","flag-fi":"1F1EB-1F1EE","flag-fj":"1F1EB-1F1EF","flag-fk":"1F1EB-1F1F0","flag-fm":"1F1EB-1F1F2","flag-fo":"1F1EB-1F1F4",fr:"1F1EB-1F1F7","flag-ga":"1F1EC-1F1E6",gb:"1F1EC-1F1E7","flag-gd":"1F1EC-1F1E9","flag-ge":"1F1EC-1F1EA","flag-gf":"1F1EC-1F1EB","flag-gg":"1F1EC-1F1EC","flag-gh":"1F1EC-1F1ED","flag-gi":"1F1EC-1F1EE","flag-gl":"1F1EC-1F1F1","flag-gm":"1F1EC-1F1F2","flag-gn":"1F1EC-1F1F3","flag-gp":"1F1EC-1F1F5","flag-gq":"1F1EC-1F1F6","flag-gr":"1F1EC-1F1F7","flag-gs":"1F1EC-1F1F8","flag-gt":"1F1EC-1F1F9","flag-gu":"1F1EC-1F1FA","flag-gw":"1F1EC-1F1FC","flag-gy":"1F1EC-1F1FE","flag-hk":"1F1ED-1F1F0","flag-hm":"1F1ED-1F1F2","flag-hn":"1F1ED-1F1F3","flag-hr":"1F1ED-1F1F7","flag-ht":"1F1ED-1F1F9","flag-hu":"1F1ED-1F1FA","flag-ic":"1F1EE-1F1E8","flag-id":"1F1EE-1F1E9","flag-ie":"1F1EE-1F1EA","flag-il":"1F1EE-1F1F1","flag-im":"1F1EE-1F1F2","flag-in":"1F1EE-1F1F3","flag-io":"1F1EE-1F1F4","flag-iq":"1F1EE-1F1F6","flag-ir":"1F1EE-1F1F7","flag-is":"1F1EE-1F1F8",it:"1F1EE-1F1F9","flag-je":"1F1EF-1F1EA","flag-jm":"1F1EF-1F1F2","flag-jo":"1F1EF-1F1F4",jp:"1F1EF-1F1F5","flag-ke":"1F1F0-1F1EA","flag-kg":"1F1F0-1F1EC","flag-kh":"1F1F0-1F1ED","flag-ki":"1F1F0-1F1EE","flag-km":"1F1F0-1F1F2","flag-kn":"1F1F0-1F1F3","flag-kp":"1F1F0-1F1F5",kr:"1F1F0-1F1F7","flag-kw":"1F1F0-1F1FC","flag-ky":"1F1F0-1F1FE","flag-kz":"1F1F0-1F1FF","flag-la":"1F1F1-1F1E6","flag-lb":"1F1F1-1F1E7","flag-lc":"1F1F1-1F1E8","flag-li":"1F1F1-1F1EE","flag-lk":"1F1F1-1F1F0","flag-lr":"1F1F1-1F1F7","flag-ls":"1F1F1-1F1F8","flag-lt":"1F1F1-1F1F9","flag-lu":"1F1F1-1F1FA","flag-lv":"1F1F1-1F1FB","flag-ly":"1F1F1-1F1FE","flag-ma":"1F1F2-1F1E6","flag-mc":"1F1F2-1F1E8","flag-md":"1F1F2-1F1E9","flag-me":"1F1F2-1F1EA","flag-mf":"1F1F2-1F1EB","flag-mg":"1F1F2-1F1EC","flag-mh":"1F1F2-1F1ED","flag-mk":"1F1F2-1F1F0","flag-ml":"1F1F2-1F1F1","flag-mm":"1F1F2-1F1F2","flag-mn":"1F1F2-1F1F3","flag-mo":"1F1F2-1F1F4","flag-mp":"1F1F2-1F1F5","flag-mq":"1F1F2-1F1F6","flag-mr":"1F1F2-1F1F7","flag-ms":"1F1F2-1F1F8","flag-mt":"1F1F2-1F1F9","flag-mu":"1F1F2-1F1FA","flag-mv":"1F1F2-1F1FB","flag-mw":"1F1F2-1F1FC","flag-mx":"1F1F2-1F1FD","flag-my":"1F1F2-1F1FE","flag-mz":"1F1F2-1F1FF","flag-na":"1F1F3-1F1E6","flag-nc":"1F1F3-1F1E8","flag-ne":"1F1F3-1F1EA","flag-nf":"1F1F3-1F1EB","flag-ng":"1F1F3-1F1EC","flag-ni":"1F1F3-1F1EE","flag-nl":"1F1F3-1F1F1","flag-no":"1F1F3-1F1F4","flag-np":"1F1F3-1F1F5","flag-nr":"1F1F3-1F1F7","flag-nu":"1F1F3-1F1FA","flag-nz":"1F1F3-1F1FF","flag-om":"1F1F4-1F1F2","flag-pa":"1F1F5-1F1E6","flag-pe":"1F1F5-1F1EA","flag-pf":"1F1F5-1F1EB","flag-pg":"1F1F5-1F1EC","flag-ph":"1F1F5-1F1ED","flag-pk":"1F1F5-1F1F0","flag-pl":"1F1F5-1F1F1","flag-pm":"1F1F5-1F1F2","flag-pn":"1F1F5-1F1F3","flag-pr":"1F1F5-1F1F7","flag-ps":"1F1F5-1F1F8","flag-pt":"1F1F5-1F1F9","flag-pw":"1F1F5-1F1FC","flag-py":"1F1F5-1F1FE","flag-qa":"1F1F6-1F1E6","flag-re":"1F1F7-1F1EA","flag-ro":"1F1F7-1F1F4","flag-rs":"1F1F7-1F1F8",ru:"1F1F7-1F1FA","flag-rw":"1F1F7-1F1FC","flag-sa":"1F1F8-1F1E6","flag-sb":"1F1F8-1F1E7","flag-sc":"1F1F8-1F1E8","flag-sd":"1F1F8-1F1E9","flag-se":"1F1F8-1F1EA","flag-sg":"1F1F8-1F1EC","flag-sh":"1F1F8-1F1ED","flag-si":"1F1F8-1F1EE","flag-sj":"1F1F8-1F1EF","flag-sk":"1F1F8-1F1F0","flag-sl":"1F1F8-1F1F1","flag-sm":"1F1F8-1F1F2","flag-sn":"1F1F8-1F1F3","flag-so":"1F1F8-1F1F4","flag-sr":"1F1F8-1F1F7","flag-ss":"1F1F8-1F1F8","flag-st":"1F1F8-1F1F9","flag-sv":"1F1F8-1F1FB","flag-sx":"1F1F8-1F1FD","flag-sy":"1F1F8-1F1FE","flag-sz":"1F1F8-1F1FF","flag-ta":"1F1F9-1F1E6","flag-tc":"1F1F9-1F1E8","flag-td":"1F1F9-1F1E9","flag-tf":"1F1F9-1F1EB","flag-tg":"1F1F9-1F1EC","flag-th":"1F1F9-1F1ED","flag-tj":"1F1F9-1F1EF","flag-tk":"1F1F9-1F1F0","flag-tl":"1F1F9-1F1F1","flag-tm":"1F1F9-1F1F2","flag-tn":"1F1F9-1F1F3","flag-to":"1F1F9-1F1F4","flag-tr":"1F1F9-1F1F7","flag-tt":"1F1F9-1F1F9","flag-tv":"1F1F9-1F1FB","flag-tw":"1F1F9-1F1FC","flag-tz":"1F1F9-1F1FF","flag-ua":"1F1FA-1F1E6","flag-ug":"1F1FA-1F1EC","flag-um":"1F1FA-1F1F2","flag-un":"1F1FA-1F1F3",us:"1F1FA-1F1F8","flag-uy":"1F1FA-1F1FE","flag-uz":"1F1FA-1F1FF","flag-va":"1F1FB-1F1E6","flag-vc":"1F1FB-1F1E8","flag-ve":"1F1FB-1F1EA","flag-vg":"1F1FB-1F1EC","flag-vi":"1F1FB-1F1EE","flag-vn":"1F1FB-1F1F3","flag-vu":"1F1FB-1F1FA","flag-wf":"1F1FC-1F1EB","flag-ws":"1F1FC-1F1F8","flag-xk":"1F1FD-1F1F0","flag-ye":"1F1FE-1F1EA","flag-yt":"1F1FE-1F1F9","flag-za":"1F1FF-1F1E6","flag-zm":"1F1FF-1F1F2","flag-zw":"1F1FF-1F1FC",koko:"1F201",sa:"1F202-FE0F",u7121:"1F21A",u6307:"1F22F",u7981:"1F232",u7a7a:"1F233",u5408:"1F234",u6e80:"1F235",u6709:"1F236",u6708:"1F237-FE0F",u7533:"1F238",u5272:"1F239",u55b6:"1F23A",ideograph_advantage:"1F250",accept:"1F251",cyclone:"1F300",foggy:"1F301",closed_umbrella:"1F302",night_with_stars:"1F303",sunrise_over_mountains:"1F304",sunrise:"1F305",city_sunset:"1F306",city_sunrise:"1F307",rainbow:"1F308",bridge_at_night:"1F309",ocean:"1F30A",volcano:"1F30B",milky_way:"1F30C",earth_africa:"1F30D",earth_americas:"1F30E",earth_asia:"1F30F",globe_with_meridians:"1F310",new_moon:"1F311",waxing_crescent_moon:"1F312",first_quarter_moon:"1F313",moon:"1F314",full_moon:"1F315",waning_gibbous_moon:"1F316",last_quarter_moon:"1F317",waning_crescent_moon:"1F318",crescent_moon:"1F319",new_moon_with_face:"1F31A",first_quarter_moon_with_face:"1F31B",last_quarter_moon_with_face:"1F31C",full_moon_with_face:"1F31D",sun_with_face:"1F31E",star2:"1F31F",stars:"1F320",thermometer:"1F321-FE0F",mostly_sunny:"1F324-FE0F",barely_sunny:"1F325-FE0F",partly_sunny_rain:"1F326-FE0F",rain_cloud:"1F327-FE0F",snow_cloud:"1F328-FE0F",lightning:"1F329-FE0F",tornado:"1F32A-FE0F",fog:"1F32B-FE0F",wind_blowing_face:"1F32C-FE0F",hotdog:"1F32D",taco:"1F32E",burrito:"1F32F",chestnut:"1F330",seedling:"1F331",evergreen_tree:"1F332",deciduous_tree:"1F333",palm_tree:"1F334",cactus:"1F335",hot_pepper:"1F336-FE0F",tulip:"1F337",cherry_blossom:"1F338",rose:"1F339",hibiscus:"1F33A",sunflower:"1F33B",blossom:"1F33C",corn:"1F33D",ear_of_rice:"1F33E",herb:"1F33F",four_leaf_clover:"1F340",maple_leaf:"1F341",fallen_leaf:"1F342",leaves:"1F343",mushroom:"1F344",tomato:"1F345",eggplant:"1F346",grapes:"1F347",melon:"1F348",watermelon:"1F349",tangerine:"1F34A",lemon:"1F34B",banana:"1F34C",pineapple:"1F34D",apple:"1F34E",green_apple:"1F34F",pear:"1F350",peach:"1F351",cherries:"1F352",strawberry:"1F353",hamburger:"1F354",pizza:"1F355",meat_on_bone:"1F356",poultry_leg:"1F357",rice_cracker:"1F358",rice_ball:"1F359",rice:"1F35A",curry:"1F35B",ramen:"1F35C",spaghetti:"1F35D",bread:"1F35E",fries:"1F35F",sweet_potato:"1F360",dango:"1F361",oden:"1F362",sushi:"1F363",fried_shrimp:"1F364",fish_cake:"1F365",icecream:"1F366",shaved_ice:"1F367",ice_cream:"1F368",doughnut:"1F369",cookie:"1F36A",chocolate_bar:"1F36B",candy:"1F36C",lollipop:"1F36D",custard:"1F36E",honey_pot:"1F36F",cake:"1F370",bento:"1F371",stew:"1F372",fried_egg:"1F373",fork_and_knife:"1F374",tea:"1F375",sake:"1F376",wine_glass:"1F377",cocktail:"1F378",tropical_drink:"1F379",beer:"1F37A",beers:"1F37B",baby_bottle:"1F37C",knife_fork_plate:"1F37D-FE0F",champagne:"1F37E",popcorn:"1F37F",ribbon:"1F380",gift:"1F381",birthday:"1F382",jack_o_lantern:"1F383",christmas_tree:"1F384",santa:"1F385",fireworks:"1F386",sparkler:"1F387",balloon:"1F388",tada:"1F389",confetti_ball:"1F38A",tanabata_tree:"1F38B",crossed_flags:"1F38C",bamboo:"1F38D",dolls:"1F38E",flags:"1F38F",wind_chime:"1F390",rice_scene:"1F391",school_satchel:"1F392",mortar_board:"1F393",medal:"1F396-FE0F",reminder_ribbon:"1F397-FE0F",studio_microphone:"1F399-FE0F",level_slider:"1F39A-FE0F",control_knobs:"1F39B-FE0F",film_frames:"1F39E-FE0F",admission_tickets:"1F39F-FE0F",carousel_horse:"1F3A0",ferris_wheel:"1F3A1",roller_coaster:"1F3A2",fishing_pole_and_fish:"1F3A3",microphone:"1F3A4",movie_camera:"1F3A5",cinema:"1F3A6",headphones:"1F3A7",art:"1F3A8",tophat:"1F3A9",circus_tent:"1F3AA",ticket:"1F3AB",clapper:"1F3AC",performing_arts:"1F3AD",video_game:"1F3AE",dart:"1F3AF",slot_machine:"1F3B0","8ball":"1F3B1",game_die:"1F3B2",bowling:"1F3B3",flower_playing_cards:"1F3B4",musical_note:"1F3B5",notes:"1F3B6",saxophone:"1F3B7",guitar:"1F3B8",musical_keyboard:"1F3B9",trumpet:"1F3BA",violin:"1F3BB",musical_score:"1F3BC",running_shirt_with_sash:"1F3BD",tennis:"1F3BE",ski:"1F3BF",basketball:"1F3C0",checkered_flag:"1F3C1",snowboarder:"1F3C2","woman-running":"1F3C3-200D-2640-FE0F","man-running":"1F3C3-200D-2642-FE0F",runner:"1F3C3-200D-2642-FE0F","woman-surfing":"1F3C4-200D-2640-FE0F","man-surfing":"1F3C4-200D-2642-FE0F",surfer:"1F3C4-200D-2642-FE0F",sports_medal:"1F3C5",trophy:"1F3C6",horse_racing:"1F3C7",football:"1F3C8",rugby_football:"1F3C9","woman-swimming":"1F3CA-200D-2640-FE0F","man-swimming":"1F3CA-200D-2642-FE0F",swimmer:"1F3CA-200D-2642-FE0F","woman-lifting-weights":"1F3CB-FE0F-200D-2640-FE0F","man-lifting-weights":"1F3CB-FE0F-200D-2642-FE0F",weight_lifter:"1F3CB-FE0F-200D-2642-FE0F","woman-golfing":"1F3CC-FE0F-200D-2640-FE0F","man-golfing":"1F3CC-FE0F-200D-2642-FE0F",golfer:"1F3CC-FE0F-200D-2642-FE0F",racing_motorcycle:"1F3CD-FE0F",racing_car:"1F3CE-FE0F",cricket_bat_and_ball:"1F3CF",volleyball:"1F3D0",field_hockey_stick_and_ball:"1F3D1",ice_hockey_stick_and_puck:"1F3D2",table_tennis_paddle_and_ball:"1F3D3",snow_capped_mountain:"1F3D4-FE0F",camping:"1F3D5-FE0F",beach_with_umbrella:"1F3D6-FE0F",building_construction:"1F3D7-FE0F",house_buildings:"1F3D8-FE0F",cityscape:"1F3D9-FE0F",derelict_house_building:"1F3DA-FE0F",classical_building:"1F3DB-FE0F",desert:"1F3DC-FE0F",desert_island:"1F3DD-FE0F",national_park:"1F3DE-FE0F",stadium:"1F3DF-FE0F",house:"1F3E0",house_with_garden:"1F3E1",office:"1F3E2",post_office:"1F3E3",european_post_office:"1F3E4",hospital:"1F3E5",bank:"1F3E6",atm:"1F3E7",hotel:"1F3E8",love_hotel:"1F3E9",convenience_store:"1F3EA",school:"1F3EB",department_store:"1F3EC",factory:"1F3ED",izakaya_lantern:"1F3EE",japanese_castle:"1F3EF",european_castle:"1F3F0","rainbow-flag":"1F3F3-FE0F-200D-1F308",waving_white_flag:"1F3F3-FE0F","flag-england":"1F3F4-E0067-E0062-E0065-E006E-E0067-E007F","flag-scotland":"1F3F4-E0067-E0062-E0073-E0063-E0074-E007F","flag-wales":"1F3F4-E0067-E0062-E0077-E006C-E0073-E007F",waving_black_flag:"1F3F4",rosette:"1F3F5-FE0F",label:"1F3F7-FE0F",badminton_racquet_and_shuttlecock:"1F3F8",bow_and_arrow:"1F3F9",amphora:"1F3FA","skin-tone-2":"1F3FB","skin-tone-3":"1F3FC","skin-tone-4":"1F3FD","skin-tone-5":"1F3FE","skin-tone-6":"1F3FF",rat:"1F400",mouse2:"1F401",ox:"1F402",water_buffalo:"1F403",cow2:"1F404",tiger2:"1F405",leopard:"1F406",rabbit2:"1F407",cat2:"1F408",dragon:"1F409",crocodile:"1F40A",whale2:"1F40B",snail:"1F40C",snake:"1F40D",racehorse:"1F40E",ram:"1F40F",goat:"1F410",sheep:"1F411",monkey:"1F412",rooster:"1F413",chicken:"1F414",dog2:"1F415",pig2:"1F416",boar:"1F417",elephant:"1F418",octopus:"1F419",shell:"1F41A",bug:"1F41B",ant:"1F41C",bee:"1F41D",beetle:"1F41E",fish:"1F41F",tropical_fish:"1F420",blowfish:"1F421",turtle:"1F422",hatching_chick:"1F423",baby_chick:"1F424",hatched_chick:"1F425",bird:"1F426",penguin:"1F427",koala:"1F428",poodle:"1F429",dromedary_camel:"1F42A",camel:"1F42B",dolphin:"1F42C",mouse:"1F42D",cow:"1F42E",tiger:"1F42F",rabbit:"1F430",cat:"1F431",dragon_face:"1F432",whale:"1F433",horse:"1F434",monkey_face:"1F435",dog:"1F436",pig:"1F437",frog:"1F438",hamster:"1F439",wolf:"1F43A",bear:"1F43B",panda_face:"1F43C",pig_nose:"1F43D",feet:"1F43E",chipmunk:"1F43F-FE0F",eyes:"1F440","eye-in-speech-bubble":"1F441-FE0F-200D-1F5E8-FE0F",eye:"1F441-FE0F",ear:"1F442",nose:"1F443",lips:"1F444",tongue:"1F445",point_up_2:"1F446",point_down:"1F447",point_left:"1F448",point_right:"1F449",facepunch:"1F44A",wave:"1F44B",ok_hand:"1F44C","+1":"1F44D","-1":"1F44E",clap:"1F44F",open_hands:"1F450",crown:"1F451",womans_hat:"1F452",eyeglasses:"1F453",necktie:"1F454",shirt:"1F455",jeans:"1F456",dress:"1F457",kimono:"1F458",bikini:"1F459",womans_clothes:"1F45A",purse:"1F45B",handbag:"1F45C",pouch:"1F45D",mans_shoe:"1F45E",athletic_shoe:"1F45F",high_heel:"1F460",sandal:"1F461",boot:"1F462",footprints:"1F463",bust_in_silhouette:"1F464",busts_in_silhouette:"1F465",boy:"1F466",girl:"1F467","male-farmer":"1F468-200D-1F33E","male-cook":"1F468-200D-1F373","male-student":"1F468-200D-1F393","male-singer":"1F468-200D-1F3A4","male-artist":"1F468-200D-1F3A8","male-teacher":"1F468-200D-1F3EB","male-factory-worker":"1F468-200D-1F3ED","man-boy-boy":"1F468-200D-1F466-200D-1F466","man-boy":"1F468-200D-1F466","man-girl-boy":"1F468-200D-1F467-200D-1F466","man-girl-girl":"1F468-200D-1F467-200D-1F467","man-girl":"1F468-200D-1F467","man-man-boy":"1F468-200D-1F468-200D-1F466","man-man-boy-boy":"1F468-200D-1F468-200D-1F466-200D-1F466","man-man-girl":"1F468-200D-1F468-200D-1F467","man-man-girl-boy":"1F468-200D-1F468-200D-1F467-200D-1F466","man-man-girl-girl":"1F468-200D-1F468-200D-1F467-200D-1F467","man-woman-boy":"1F468-200D-1F469-200D-1F466","man-woman-boy-boy":"1F468-200D-1F469-200D-1F466-200D-1F466","man-woman-girl":"1F468-200D-1F469-200D-1F467","man-woman-girl-boy":"1F468-200D-1F469-200D-1F467-200D-1F466","man-woman-girl-girl":"1F468-200D-1F469-200D-1F467-200D-1F467","male-technologist":"1F468-200D-1F4BB","male-office-worker":"1F468-200D-1F4BC","male-mechanic":"1F468-200D-1F527","male-scientist":"1F468-200D-1F52C","male-astronaut":"1F468-200D-1F680","male-firefighter":"1F468-200D-1F692","male-doctor":"1F468-200D-2695-FE0F","male-judge":"1F468-200D-2696-FE0F","male-pilot":"1F468-200D-2708-FE0F","man-heart-man":"1F468-200D-2764-FE0F-200D-1F468","man-kiss-man":"1F468-200D-2764-FE0F-200D-1F48B-200D-1F468",man:"1F468","female-farmer":"1F469-200D-1F33E","female-cook":"1F469-200D-1F373","female-student":"1F469-200D-1F393","female-singer":"1F469-200D-1F3A4","female-artist":"1F469-200D-1F3A8","female-teacher":"1F469-200D-1F3EB","female-factory-worker":"1F469-200D-1F3ED","woman-boy-boy":"1F469-200D-1F466-200D-1F466","woman-boy":"1F469-200D-1F466","woman-girl-boy":"1F469-200D-1F467-200D-1F466","woman-girl-girl":"1F469-200D-1F467-200D-1F467","woman-girl":"1F469-200D-1F467","woman-woman-boy":"1F469-200D-1F469-200D-1F466","woman-woman-boy-boy":"1F469-200D-1F469-200D-1F466-200D-1F466","woman-woman-girl":"1F469-200D-1F469-200D-1F467","woman-woman-girl-boy":"1F469-200D-1F469-200D-1F467-200D-1F466","woman-woman-girl-girl":"1F469-200D-1F469-200D-1F467-200D-1F467","female-technologist":"1F469-200D-1F4BB","female-office-worker":"1F469-200D-1F4BC","female-mechanic":"1F469-200D-1F527","female-scientist":"1F469-200D-1F52C","female-astronaut":"1F469-200D-1F680","female-firefighter":"1F469-200D-1F692","female-doctor":"1F469-200D-2695-FE0F","female-judge":"1F469-200D-2696-FE0F","female-pilot":"1F469-200D-2708-FE0F","woman-heart-man":"1F469-200D-2764-FE0F-200D-1F468","woman-heart-woman":"1F469-200D-2764-FE0F-200D-1F469","woman-kiss-man":"1F469-200D-2764-FE0F-200D-1F48B-200D-1F468","woman-kiss-woman":"1F469-200D-2764-FE0F-200D-1F48B-200D-1F469",woman:"1F469",family:"1F468-200D-1F469-200D-1F466",couple:"1F46B",two_men_holding_hands:"1F46C",two_women_holding_hands:"1F46D","female-police-officer":"1F46E-200D-2640-FE0F","male-police-officer":"1F46E-200D-2642-FE0F",cop:"1F46E-200D-2642-FE0F","woman-with-bunny-ears-partying":"1F46F-200D-2640-FE0F","man-with-bunny-ears-partying":"1F46F-200D-2642-FE0F",dancers:"1F46F-200D-2640-FE0F",bride_with_veil:"1F470","blond-haired-woman":"1F471-200D-2640-FE0F","blond-haired-man":"1F471-200D-2642-FE0F",person_with_blond_hair:"1F471-200D-2642-FE0F",man_with_gua_pi_mao:"1F472","woman-wearing-turban":"1F473-200D-2640-FE0F","man-wearing-turban":"1F473-200D-2642-FE0F",man_with_turban:"1F473-200D-2642-FE0F",older_man:"1F474",older_woman:"1F475",baby:"1F476","female-construction-worker":"1F477-200D-2640-FE0F","male-construction-worker":"1F477-200D-2642-FE0F",construction_worker:"1F477-200D-2642-FE0F",princess:"1F478",japanese_ogre:"1F479",japanese_goblin:"1F47A",ghost:"1F47B",angel:"1F47C",alien:"1F47D",space_invader:"1F47E",imp:"1F47F",skull:"1F480","woman-tipping-hand":"1F481-200D-2640-FE0F","man-tipping-hand":"1F481-200D-2642-FE0F",information_desk_person:"1F481-200D-2640-FE0F","female-guard":"1F482-200D-2640-FE0F","male-guard":"1F482-200D-2642-FE0F",guardsman:"1F482-200D-2642-FE0F",dancer:"1F483",lipstick:"1F484",nail_care:"1F485","woman-getting-massage":"1F486-200D-2640-FE0F","man-getting-massage":"1F486-200D-2642-FE0F",massage:"1F486-200D-2640-FE0F","woman-getting-haircut":"1F487-200D-2640-FE0F","man-getting-haircut":"1F487-200D-2642-FE0F",haircut:"1F487-200D-2640-FE0F",barber:"1F488",syringe:"1F489",pill:"1F48A",kiss:"1F48B",love_letter:"1F48C",ring:"1F48D",gem:"1F48E",couplekiss:"1F469-200D-2764-FE0F-200D-1F48B-200D-1F468",bouquet:"1F490",couple_with_heart:"1F469-200D-2764-FE0F-200D-1F468",wedding:"1F492",heartbeat:"1F493",broken_heart:"1F494",two_hearts:"1F495",sparkling_heart:"1F496",heartpulse:"1F497",cupid:"1F498",blue_heart:"1F499",green_heart:"1F49A",yellow_heart:"1F49B",purple_heart:"1F49C",gift_heart:"1F49D",revolving_hearts:"1F49E",heart_decoration:"1F49F",diamond_shape_with_a_dot_inside:"1F4A0",bulb:"1F4A1",anger:"1F4A2",bomb:"1F4A3",zzz:"1F4A4",boom:"1F4A5",sweat_drops:"1F4A6",droplet:"1F4A7",dash:"1F4A8",hankey:"1F4A9",muscle:"1F4AA",dizzy:"1F4AB",speech_balloon:"1F4AC",thought_balloon:"1F4AD",white_flower:"1F4AE",100:"1F4AF",moneybag:"1F4B0",currency_exchange:"1F4B1",heavy_dollar_sign:"1F4B2",credit_card:"1F4B3",yen:"1F4B4",dollar:"1F4B5",euro:"1F4B6",pound:"1F4B7",money_with_wings:"1F4B8",chart:"1F4B9",seat:"1F4BA",computer:"1F4BB",briefcase:"1F4BC",minidisc:"1F4BD",floppy_disk:"1F4BE",cd:"1F4BF",dvd:"1F4C0",file_folder:"1F4C1",open_file_folder:"1F4C2",page_with_curl:"1F4C3",page_facing_up:"1F4C4",date:"1F4C5",calendar:"1F4C6",card_index:"1F4C7",chart_with_upwards_trend:"1F4C8",chart_with_downwards_trend:"1F4C9",bar_chart:"1F4CA",clipboard:"1F4CB",pushpin:"1F4CC",round_pushpin:"1F4CD",paperclip:"1F4CE",straight_ruler:"1F4CF",triangular_ruler:"1F4D0",bookmark_tabs:"1F4D1",ledger:"1F4D2",notebook:"1F4D3",notebook_with_decorative_cover:"1F4D4",closed_book:"1F4D5",book:"1F4D6",green_book:"1F4D7",blue_book:"1F4D8",orange_book:"1F4D9",books:"1F4DA",name_badge:"1F4DB",scroll:"1F4DC",memo:"1F4DD",telephone_receiver:"1F4DE",pager:"1F4DF",fax:"1F4E0",satellite_antenna:"1F4E1",loudspeaker:"1F4E2",mega:"1F4E3",outbox_tray:"1F4E4",inbox_tray:"1F4E5",package:"1F4E6","e-mail":"1F4E7",incoming_envelope:"1F4E8",envelope_with_arrow:"1F4E9",mailbox_closed:"1F4EA",mailbox:"1F4EB",mailbox_with_mail:"1F4EC",mailbox_with_no_mail:"1F4ED",postbox:"1F4EE",postal_horn:"1F4EF",newspaper:"1F4F0",iphone:"1F4F1",calling:"1F4F2",vibration_mode:"1F4F3",mobile_phone_off:"1F4F4",no_mobile_phones:"1F4F5",signal_strength:"1F4F6",camera:"1F4F7",camera_with_flash:"1F4F8",video_camera:"1F4F9",tv:"1F4FA",radio:"1F4FB",vhs:"1F4FC",film_projector:"1F4FD-FE0F",prayer_beads:"1F4FF",twisted_rightwards_arrows:"1F500",repeat:"1F501",repeat_one:"1F502",arrows_clockwise:"1F503",arrows_counterclockwise:"1F504",low_brightness:"1F505",high_brightness:"1F506",mute:"1F507",speaker:"1F508",sound:"1F509",loud_sound:"1F50A",battery:"1F50B",electric_plug:"1F50C",mag:"1F50D",mag_right:"1F50E",lock_with_ink_pen:"1F50F",closed_lock_with_key:"1F510",key:"1F511",lock:"1F512",unlock:"1F513",bell:"1F514",no_bell:"1F515",bookmark:"1F516",link:"1F517",radio_button:"1F518",back:"1F519",end:"1F51A",on:"1F51B",soon:"1F51C",top:"1F51D",underage:"1F51E",keycap_ten:"1F51F",capital_abcd:"1F520",abcd:"1F521",1234:"1F522",symbols:"1F523",abc:"1F524",fire:"1F525",flashlight:"1F526",wrench:"1F527",hammer:"1F528",nut_and_bolt:"1F529",hocho:"1F52A",gun:"1F52B",microscope:"1F52C",telescope:"1F52D",crystal_ball:"1F52E",six_pointed_star:"1F52F",beginner:"1F530",trident:"1F531",black_square_button:"1F532",white_square_button:"1F533",red_circle:"1F534",large_blue_circle:"1F535",large_orange_diamond:"1F536",large_blue_diamond:"1F537",small_orange_diamond:"1F538",small_blue_diamond:"1F539",small_red_triangle:"1F53A",small_red_triangle_down:"1F53B",arrow_up_small:"1F53C",arrow_down_small:"1F53D",om_symbol:"1F549-FE0F",dove_of_peace:"1F54A-FE0F",kaaba:"1F54B",mosque:"1F54C",synagogue:"1F54D",menorah_with_nine_branches:"1F54E",clock1:"1F550",clock2:"1F551",clock3:"1F552",clock4:"1F553",clock5:"1F554",clock6:"1F555",clock7:"1F556",clock8:"1F557",clock9:"1F558",clock10:"1F559",clock11:"1F55A",clock12:"1F55B",clock130:"1F55C",clock230:"1F55D",clock330:"1F55E",clock430:"1F55F",clock530:"1F560",clock630:"1F561",clock730:"1F562",clock830:"1F563",clock930:"1F564",clock1030:"1F565",clock1130:"1F566",clock1230:"1F567",candle:"1F56F-FE0F",mantelpiece_clock:"1F570-FE0F",hole:"1F573-FE0F",man_in_business_suit_levitating:"1F574-FE0F","female-detective":"1F575-FE0F-200D-2640-FE0F","male-detective":"1F575-FE0F-200D-2642-FE0F",sleuth_or_spy:"1F575-FE0F-200D-2642-FE0F",dark_sunglasses:"1F576-FE0F",spider:"1F577-FE0F",spider_web:"1F578-FE0F",joystick:"1F579-FE0F",man_dancing:"1F57A",linked_paperclips:"1F587-FE0F",lower_left_ballpoint_pen:"1F58A-FE0F",lower_left_fountain_pen:"1F58B-FE0F",lower_left_paintbrush:"1F58C-FE0F",lower_left_crayon:"1F58D-FE0F",raised_hand_with_fingers_splayed:"1F590-FE0F",middle_finger:"1F595","spock-hand":"1F596",black_heart:"1F5A4",desktop_computer:"1F5A5-FE0F",printer:"1F5A8-FE0F",three_button_mouse:"1F5B1-FE0F",trackball:"1F5B2-FE0F",frame_with_picture:"1F5BC-FE0F",card_index_dividers:"1F5C2-FE0F",card_file_box:"1F5C3-FE0F",file_cabinet:"1F5C4-FE0F",wastebasket:"1F5D1-FE0F",spiral_note_pad:"1F5D2-FE0F",spiral_calendar_pad:"1F5D3-FE0F",compression:"1F5DC-FE0F",old_key:"1F5DD-FE0F",rolled_up_newspaper:"1F5DE-FE0F",dagger_knife:"1F5E1-FE0F",speaking_head_in_silhouette:"1F5E3-FE0F",left_speech_bubble:"1F5E8-FE0F",right_anger_bubble:"1F5EF-FE0F",ballot_box_with_ballot:"1F5F3-FE0F",world_map:"1F5FA-FE0F",mount_fuji:"1F5FB",tokyo_tower:"1F5FC",statue_of_liberty:"1F5FD",japan:"1F5FE",moyai:"1F5FF",grinning:"1F600",grin:"1F601",joy:"1F602",smiley:"1F603",smile:"1F604",sweat_smile:"1F605",laughing:"1F606",innocent:"1F607",smiling_imp:"1F608",wink:"1F609",blush:"1F60A",yum:"1F60B",relieved:"1F60C",heart_eyes:"1F60D",sunglasses:"1F60E",smirk:"1F60F",neutral_face:"1F610",expressionless:"1F611",unamused:"1F612",sweat:"1F613",pensive:"1F614",confused:"1F615",confounded:"1F616",kissing:"1F617",kissing_heart:"1F618",kissing_smiling_eyes:"1F619",kissing_closed_eyes:"1F61A",stuck_out_tongue:"1F61B",stuck_out_tongue_winking_eye:"1F61C",stuck_out_tongue_closed_eyes:"1F61D",disappointed:"1F61E",worried:"1F61F",angry:"1F620",rage:"1F621",cry:"1F622",persevere:"1F623",triumph:"1F624",disappointed_relieved:"1F625",frowning:"1F626",anguished:"1F627",fearful:"1F628",weary:"1F629",sleepy:"1F62A",tired_face:"1F62B",grimacing:"1F62C",sob:"1F62D",open_mouth:"1F62E",hushed:"1F62F",cold_sweat:"1F630",scream:"1F631",astonished:"1F632",flushed:"1F633",sleeping:"1F634",dizzy_face:"1F635",no_mouth:"1F636",mask:"1F637",smile_cat:"1F638",joy_cat:"1F639",smiley_cat:"1F63A",heart_eyes_cat:"1F63B",smirk_cat:"1F63C",kissing_cat:"1F63D",pouting_cat:"1F63E",crying_cat_face:"1F63F",scream_cat:"1F640",slightly_frowning_face:"1F641",slightly_smiling_face:"1F642",upside_down_face:"1F643",face_with_rolling_eyes:"1F644","woman-gesturing-no":"1F645-200D-2640-FE0F","man-gesturing-no":"1F645-200D-2642-FE0F",no_good:"1F645-200D-2640-FE0F","woman-gesturing-ok":"1F646-200D-2640-FE0F","man-gesturing-ok":"1F646-200D-2642-FE0F",ok_woman:"1F646-200D-2640-FE0F","woman-bowing":"1F647-200D-2640-FE0F","man-bowing":"1F647-200D-2642-FE0F",bow:"1F647-200D-2642-FE0F",see_no_evil:"1F648",hear_no_evil:"1F649",speak_no_evil:"1F64A","woman-raising-hand":"1F64B-200D-2640-FE0F","man-raising-hand":"1F64B-200D-2642-FE0F",raising_hand:"1F64B-200D-2640-FE0F",raised_hands:"1F64C","woman-frowning":"1F64D-200D-2640-FE0F","man-frowning":"1F64D-200D-2642-FE0F",person_frowning:"1F64D-200D-2640-FE0F","woman-pouting":"1F64E-200D-2640-FE0F","man-pouting":"1F64E-200D-2642-FE0F",person_with_pouting_face:"1F64E-200D-2640-FE0F",pray:"1F64F",rocket:"1F680",helicopter:"1F681",steam_locomotive:"1F682",railway_car:"1F683",bullettrain_side:"1F684",bullettrain_front:"1F685",train2:"1F686",metro:"1F687",light_rail:"1F688",station:"1F689",tram:"1F68A",train:"1F68B",bus:"1F68C",oncoming_bus:"1F68D",trolleybus:"1F68E",busstop:"1F68F",minibus:"1F690",ambulance:"1F691",fire_engine:"1F692",police_car:"1F693",oncoming_police_car:"1F694",taxi:"1F695",oncoming_taxi:"1F696",car:"1F697",oncoming_automobile:"1F698",blue_car:"1F699",truck:"1F69A",articulated_lorry:"1F69B",tractor:"1F69C",monorail:"1F69D",mountain_railway:"1F69E",suspension_railway:"1F69F",mountain_cableway:"1F6A0",aerial_tramway:"1F6A1",ship:"1F6A2","woman-rowing-boat":"1F6A3-200D-2640-FE0F","man-rowing-boat":"1F6A3-200D-2642-FE0F",rowboat:"1F6A3-200D-2642-FE0F",speedboat:"1F6A4",traffic_light:"1F6A5",vertical_traffic_light:"1F6A6",construction:"1F6A7",rotating_light:"1F6A8",triangular_flag_on_post:"1F6A9",door:"1F6AA",no_entry_sign:"1F6AB",smoking:"1F6AC",no_smoking:"1F6AD",put_litter_in_its_place:"1F6AE",do_not_litter:"1F6AF",potable_water:"1F6B0","non-potable_water":"1F6B1",bike:"1F6B2",no_bicycles:"1F6B3","woman-biking":"1F6B4-200D-2640-FE0F","man-biking":"1F6B4-200D-2642-FE0F",bicyclist:"1F6B4-200D-2642-FE0F","woman-mountain-biking":"1F6B5-200D-2640-FE0F","man-mountain-biking":"1F6B5-200D-2642-FE0F",mountain_bicyclist:"1F6B5-200D-2642-FE0F","woman-walking":"1F6B6-200D-2640-FE0F","man-walking":"1F6B6-200D-2642-FE0F",walking:"1F6B6-200D-2642-FE0F",no_pedestrians:"1F6B7",children_crossing:"1F6B8",mens:"1F6B9",womens:"1F6BA",restroom:"1F6BB",baby_symbol:"1F6BC",toilet:"1F6BD",wc:"1F6BE",shower:"1F6BF",bath:"1F6C0",bathtub:"1F6C1",passport_control:"1F6C2",customs:"1F6C3",baggage_claim:"1F6C4",left_luggage:"1F6C5",couch_and_lamp:"1F6CB-FE0F",sleeping_accommodation:"1F6CC",shopping_bags:"1F6CD-FE0F",bellhop_bell:"1F6CE-FE0F",bed:"1F6CF-FE0F",place_of_worship:"1F6D0",octagonal_sign:"1F6D1",shopping_trolley:"1F6D2",hammer_and_wrench:"1F6E0-FE0F",shield:"1F6E1-FE0F",oil_drum:"1F6E2-FE0F",motorway:"1F6E3-FE0F",railway_track:"1F6E4-FE0F",motor_boat:"1F6E5-FE0F",small_airplane:"1F6E9-FE0F",airplane_departure:"1F6EB",airplane_arriving:"1F6EC",satellite:"1F6F0-FE0F",passenger_ship:"1F6F3-FE0F",scooter:"1F6F4",motor_scooter:"1F6F5",canoe:"1F6F6",sled:"1F6F7",flying_saucer:"1F6F8",zipper_mouth_face:"1F910",money_mouth_face:"1F911",face_with_thermometer:"1F912",nerd_face:"1F913",thinking_face:"1F914",face_with_head_bandage:"1F915",robot_face:"1F916",hugging_face:"1F917",the_horns:"1F918",call_me_hand:"1F919",raised_back_of_hand:"1F91A","left-facing_fist":"1F91B","right-facing_fist":"1F91C",handshake:"1F91D",crossed_fingers:"1F91E",i_love_you_hand_sign:"1F91F",face_with_cowboy_hat:"1F920",clown_face:"1F921",nauseated_face:"1F922",rolling_on_the_floor_laughing:"1F923",drooling_face:"1F924",lying_face:"1F925","woman-facepalming":"1F926-200D-2640-FE0F","man-facepalming":"1F926-200D-2642-FE0F",face_palm:"1F926",sneezing_face:"1F927",face_with_raised_eyebrow:"1F928","star-struck":"1F929",zany_face:"1F92A",shushing_face:"1F92B",face_with_symbols_on_mouth:"1F92C",face_with_hand_over_mouth:"1F92D",face_vomiting:"1F92E",exploding_head:"1F92F",pregnant_woman:"1F930","breast-feeding":"1F931",palms_up_together:"1F932",selfie:"1F933",prince:"1F934",man_in_tuxedo:"1F935",mrs_claus:"1F936","woman-shrugging":"1F937-200D-2640-FE0F","man-shrugging":"1F937-200D-2642-FE0F",shrug:"1F937","woman-cartwheeling":"1F938-200D-2640-FE0F","man-cartwheeling":"1F938-200D-2642-FE0F",person_doing_cartwheel:"1F938","woman-juggling":"1F939-200D-2640-FE0F","man-juggling":"1F939-200D-2642-FE0F",juggling:"1F939",fencer:"1F93A","woman-wrestling":"1F93C-200D-2640-FE0F","man-wrestling":"1F93C-200D-2642-FE0F",wrestlers:"1F93C","woman-playing-water-polo":"1F93D-200D-2640-FE0F","man-playing-water-polo":"1F93D-200D-2642-FE0F",water_polo:"1F93D","woman-playing-handball":"1F93E-200D-2640-FE0F","man-playing-handball":"1F93E-200D-2642-FE0F",handball:"1F93E",wilted_flower:"1F940",drum_with_drumsticks:"1F941",clinking_glasses:"1F942",tumbler_glass:"1F943",spoon:"1F944",goal_net:"1F945",first_place_medal:"1F947",second_place_medal:"1F948",third_place_medal:"1F949",boxing_glove:"1F94A",martial_arts_uniform:"1F94B",curling_stone:"1F94C",croissant:"1F950",avocado:"1F951",cucumber:"1F952",bacon:"1F953",potato:"1F954",carrot:"1F955",baguette_bread:"1F956",green_salad:"1F957",shallow_pan_of_food:"1F958",stuffed_flatbread:"1F959",egg:"1F95A",glass_of_milk:"1F95B",peanuts:"1F95C",kiwifruit:"1F95D",pancakes:"1F95E",dumpling:"1F95F",fortune_cookie:"1F960",takeout_box:"1F961",chopsticks:"1F962",bowl_with_spoon:"1F963",cup_with_straw:"1F964",coconut:"1F965",broccoli:"1F966",pie:"1F967",pretzel:"1F968",cut_of_meat:"1F969",sandwich:"1F96A",canned_food:"1F96B",crab:"1F980",lion_face:"1F981",scorpion:"1F982",turkey:"1F983",unicorn_face:"1F984",eagle:"1F985",duck:"1F986",bat:"1F987",shark:"1F988",owl:"1F989",fox_face:"1F98A",butterfly:"1F98B",deer:"1F98C",gorilla:"1F98D",lizard:"1F98E",rhinoceros:"1F98F",shrimp:"1F990",squid:"1F991",giraffe_face:"1F992",zebra_face:"1F993",hedgehog:"1F994",sauropod:"1F995","t-rex":"1F996",cricket:"1F997",cheese_wedge:"1F9C0",face_with_monocle:"1F9D0",adult:"1F9D1",child:"1F9D2",older_adult:"1F9D3",bearded_person:"1F9D4",person_with_headscarf:"1F9D5",woman_in_steamy_room:"1F9D6-200D-2640-FE0F",man_in_steamy_room:"1F9D6-200D-2642-FE0F",person_in_steamy_room:"1F9D6-200D-2642-FE0F",woman_climbing:"1F9D7-200D-2640-FE0F",man_climbing:"1F9D7-200D-2642-FE0F",person_climbing:"1F9D7-200D-2640-FE0F",woman_in_lotus_position:"1F9D8-200D-2640-FE0F",man_in_lotus_position:"1F9D8-200D-2642-FE0F",person_in_lotus_position:"1F9D8-200D-2640-FE0F",female_mage:"1F9D9-200D-2640-FE0F",male_mage:"1F9D9-200D-2642-FE0F",mage:"1F9D9-200D-2640-FE0F",female_fairy:"1F9DA-200D-2640-FE0F",male_fairy:"1F9DA-200D-2642-FE0F",fairy:"1F9DA-200D-2640-FE0F",female_vampire:"1F9DB-200D-2640-FE0F",male_vampire:"1F9DB-200D-2642-FE0F",vampire:"1F9DB-200D-2640-FE0F",mermaid:"1F9DC-200D-2640-FE0F",merman:"1F9DC-200D-2642-FE0F",merperson:"1F9DC-200D-2642-FE0F",female_elf:"1F9DD-200D-2640-FE0F",male_elf:"1F9DD-200D-2642-FE0F",elf:"1F9DD-200D-2642-FE0F",female_genie:"1F9DE-200D-2640-FE0F",male_genie:"1F9DE-200D-2642-FE0F",genie:"1F9DE-200D-2642-FE0F",female_zombie:"1F9DF-200D-2640-FE0F",male_zombie:"1F9DF-200D-2642-FE0F",zombie:"1F9DF-200D-2642-FE0F",brain:"1F9E0",orange_heart:"1F9E1",billed_cap:"1F9E2",scarf:"1F9E3",gloves:"1F9E4",coat:"1F9E5",socks:"1F9E6",bangbang:"203C-FE0F",interrobang:"2049-FE0F",tm:"2122-FE0F",information_source:"2139-FE0F",left_right_arrow:"2194-FE0F",arrow_up_down:"2195-FE0F",arrow_upper_left:"2196-FE0F",arrow_upper_right:"2197-FE0F",arrow_lower_right:"2198-FE0F",arrow_lower_left:"2199-FE0F",leftwards_arrow_with_hook:"21A9-FE0F",arrow_right_hook:"21AA-FE0F",watch:"231A",hourglass:"231B",keyboard:"2328-FE0F",eject:"23CF-FE0F",fast_forward:"23E9",rewind:"23EA",arrow_double_up:"23EB",arrow_double_down:"23EC",black_right_pointing_double_triangle_with_vertical_bar:"23ED-FE0F",black_left_pointing_double_triangle_with_vertical_bar:"23EE-FE0F",black_right_pointing_triangle_with_double_vertical_bar:"23EF-FE0F",alarm_clock:"23F0",stopwatch:"23F1-FE0F",timer_clock:"23F2-FE0F",hourglass_flowing_sand:"23F3",double_vertical_bar:"23F8-FE0F",black_square_for_stop:"23F9-FE0F",black_circle_for_record:"23FA-FE0F",m:"24C2-FE0F",black_small_square:"25AA-FE0F",white_small_square:"25AB-FE0F",arrow_forward:"25B6-FE0F",arrow_backward:"25C0-FE0F",white_medium_square:"25FB-FE0F",black_medium_square:"25FC-FE0F",white_medium_small_square:"25FD",black_medium_small_square:"25FE",sunny:"2600-FE0F",cloud:"2601-FE0F",umbrella:"2602-FE0F",snowman:"2603-FE0F",comet:"2604-FE0F",phone:"260E-FE0F",ballot_box_with_check:"2611-FE0F",umbrella_with_rain_drops:"2614",coffee:"2615",shamrock:"2618-FE0F",point_up:"261D-FE0F",skull_and_crossbones:"2620-FE0F",radioactive_sign:"2622-FE0F",biohazard_sign:"2623-FE0F",orthodox_cross:"2626-FE0F",star_and_crescent:"262A-FE0F",peace_symbol:"262E-FE0F",yin_yang:"262F-FE0F",wheel_of_dharma:"2638-FE0F",white_frowning_face:"2639-FE0F",relaxed:"263A-FE0F",female_sign:"2640-FE0F",male_sign:"2642-FE0F",aries:"2648",taurus:"2649",gemini:"264A",cancer:"264B",leo:"264C",virgo:"264D",libra:"264E",scorpius:"264F",sagittarius:"2650",capricorn:"2651",aquarius:"2652",pisces:"2653",spades:"2660-FE0F",clubs:"2663-FE0F",hearts:"2665-FE0F",diamonds:"2666-FE0F",hotsprings:"2668-FE0F",recycle:"267B-FE0F",wheelchair:"267F",hammer_and_pick:"2692-FE0F",anchor:"2693",crossed_swords:"2694-FE0F",medical_symbol:"2695-FE0F",scales:"2696-FE0F",alembic:"2697-FE0F",gear:"2699-FE0F",atom_symbol:"269B-FE0F",fleur_de_lis:"269C-FE0F",warning:"26A0-FE0F",zap:"26A1",white_circle:"26AA",black_circle:"26AB",coffin:"26B0-FE0F",funeral_urn:"26B1-FE0F",soccer:"26BD",baseball:"26BE",snowman_without_snow:"26C4",partly_sunny:"26C5",thunder_cloud_and_rain:"26C8-FE0F",ophiuchus:"26CE",pick:"26CF-FE0F",helmet_with_white_cross:"26D1-FE0F",chains:"26D3-FE0F",no_entry:"26D4",shinto_shrine:"26E9-FE0F",church:"26EA",mountain:"26F0-FE0F",umbrella_on_ground:"26F1-FE0F",fountain:"26F2",golf:"26F3",ferry:"26F4-FE0F",boat:"26F5",skier:"26F7-FE0F",ice_skate:"26F8-FE0F","woman-bouncing-ball":"26F9-FE0F-200D-2640-FE0F","man-bouncing-ball":"26F9-FE0F-200D-2642-FE0F",person_with_ball:"26F9-FE0F-200D-2642-FE0F",tent:"26FA",fuelpump:"26FD",scissors:"2702-FE0F",white_check_mark:"2705",airplane:"2708-FE0F",email:"2709-FE0F",fist:"270A",hand:"270B",v:"270C-FE0F",writing_hand:"270D-FE0F",pencil2:"270F-FE0F",black_nib:"2712-FE0F",heavy_check_mark:"2714-FE0F",heavy_multiplication_x:"2716-FE0F",latin_cross:"271D-FE0F",star_of_david:"2721-FE0F",sparkles:"2728",eight_spoked_asterisk:"2733-FE0F",eight_pointed_black_star:"2734-FE0F",snowflake:"2744-FE0F",sparkle:"2747-FE0F",x:"274C",negative_squared_cross_mark:"274E",question:"2753",grey_question:"2754",grey_exclamation:"2755",exclamation:"2757",heavy_heart_exclamation_mark_ornament:"2763-FE0F",heart:"2764-FE0F",heavy_plus_sign:"2795",heavy_minus_sign:"2796",heavy_division_sign:"2797",arrow_right:"27A1-FE0F",curly_loop:"27B0",loop:"27BF",arrow_heading_up:"2934-FE0F",arrow_heading_down:"2935-FE0F",arrow_left:"2B05-FE0F",arrow_up:"2B06-FE0F",arrow_down:"2B07-FE0F",black_large_square:"2B1B",white_large_square:"2B1C",star:"2B50",o:"2B55",wavy_dash:"3030-FE0F",part_alternation_mark:"303D-FE0F",congratulations:"3297-FE0F",secret:"3299-FE0F"}});
define ("core/emoji/picker",["exports","core/localstorage","core/emoji/data","core/utils","core/str","core/templates"],function(a,b,c,d,e,f){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;b=function(a){return a&&a.__esModule?a:{default:a}}(b);c=function(a){if(a&&a.__esModule){return a}else{var b={};if(null!=a){for(var c in a){if(Object.prototype.hasOwnProperty.call(a,c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,c):{};if(d.get||d.set){Object.defineProperty(b,c,d)}else{b[c]=a[c]}}}}b.default=a;return b}}(c);function g(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){g=function(a){return typeof a}}else{g=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return g(a)}function h(a){return k(a)||j(a)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function j(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function k(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++){c[b]=a[b]}return c}}function l(a,b){return o(a)||n(a,b)||m()}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done);d=!0){c.push(h.value);if(b&&c.length===b)break}}catch(a){e=!0;f=a}finally{try{if(!d&&null!=g["return"])g["return"]()}finally{if(e)throw f}}return c}function o(a){if(Array.isArray(a))return a}function p(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}if(h.done){b(i)}else{Promise.resolve(i).then(d,e)}}function q(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var h=a.apply(b,c);function f(a){p(h,d,e,f,g,"next",a)}function g(a){p(h,d,e,f,g,"throw",a)}f(void 0)})}}function r(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);if("function"==typeof Object.getOwnPropertySymbols){d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))}d.forEach(function(b){s(a,b,c[b])})}return a}function s(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}var t=5,u="moodle-recent-emojis",v=40,w=7,x={EMOJI:0,HEADER:1},y={CATEGORY_SELECTOR:"[data-action=\"show-category\"]",EMOJIS_CONTAINER:"[data-region=\"emojis-container\"]",EMOJI_PREVIEW:"[data-region=\"emoji-preview\"]",EMOJI_SHORT_NAME:"[data-region=\"emoji-short-name\"]",ROW_CONTAINER:"[data-region=\"row-container\"]",SEARCH_INPUT:"[data-region=\"search-input\"]",SEARCH_RESULTS_CONTAINER:"[data-region=\"search-results-container\"]"},z=function(a,b,c,d){var e=[];e.push({index:d+e.length,type:x.HEADER,data:{name:a,displayName:b}});for(var f=0,g;f<c.length;f+=w){g=c.slice(f,f+w);e.push({index:d+e.length,type:x.EMOJI,data:g})}return e},A=function(a){return a.map(function(a,b){return r({},a,{index:b})})},B=function(a){return a.reduce(function(a,b,c){if(b.type===x.HEADER){a[b.data.name]=c*v}return a},{})},C=function(){var a=q(regeneratorRuntime.mark(function a(b,c){var d,e,g;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:d={index:b,text:c};a.next=3;return(0,f.render)("core/emoji/header_row",d);case 3:e=a.sent;g=document.createElement("div");g.innerHTML=e;return a.abrupt("return",g.firstChild);case 7:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}(),D=function(){var a=q(regeneratorRuntime.mark(function a(b,c){var d,e,g;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:d={index:b,emojis:c.map(function(a){var b=a.unified.split("-").map(function(a){return"0x".concat(a)}),c=String.fromCodePoint.apply(null,b);return{shortnames:":".concat(a.shortnames.join(": :"),":"),unified:a.unified,text:c,spacer:!1}}),spacers:Array(w-c.length).fill(!0)};a.next=3;return(0,f.render)("core/emoji/emoji_row",d);case 3:e=a.sent;g=document.createElement("div");g.innerHTML=e;return a.abrupt("return",g.firstChild);case 7:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}(),E=function(a){return null!==a.getAttribute("data-short-names")},F=function(a){if(!a){return null}if("show-category"===a.getAttribute("data-action")){return a}else{return F(a.parentElement)}},G=function(a,b){return a.querySelector("[data-category=\"".concat(b,"\"]"))},H=function(a,b){for(var c=a.querySelectorAll(y.CATEGORY_SELECTOR),d=0,e;d<c.length;d++){e=c[d];e.classList.remove("selected")}b.classList.add("selected")},I=function(a,b,c){var d=[];if(0>b){b=0}for(var i in c){var j=c[i];d.push([j,i])}d.sort(function(c,d){var e=l(c,1),f=e[0],a=l(d,1),g=a[0];if(f<g){return-1}else if(f>g){return 1}else{return 0}});var e=d.reduce(function(a,c){var d=l(c,2),e=d[0],f=d[1];if(e<=b){a.categoryName=f;a.previousPosition=a.currentPosition;a.currentPosition=b}else if(null===a.nextPosition){a.nextPosition=e}return a},{categoryName:null,currentPosition:null,previousPosition:null,nextPosition:null}),f=e.categoryName,g=e.previousPosition,h=e.nextPosition;return[G(a,f),g,h]},J=function(){var a=b.default.get(u);return a?JSON.parse(a):[]},K=function(a){b.default.set(u,JSON.stringify(a))},L=function(a,b,c){var d=a[0].data.name,e=a[0].data.displayName,f=J(),g=[c].concat(h(f.filter(function(a){return a.unified!=c.unified})));g=g.slice(0,3*w);var i=z(d,e,g);K(g);return[A(i.concat(a.slice(b))),i.length]},M=function(a,b,c){var d=a>v?Math.floor(a/v):0,e=d>=t?d-t:d,f=c.slice(e,d+b+t);return f},N=function(){var a=q(regeneratorRuntime.mark(function a(b){var c;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:c=null;if(!(b.type===x.HEADER)){a.next=7;break}a.next=4;return C(b.index,b.data.displayName);case 4:c=a.sent;a.next=10;break;case 7:a.next=9;return D(b.index,b.data);case 9:c=a.sent;case 10:c.style.position="absolute";c.style.left=0;c.style.right=0;c.style.top="".concat(b.index*v,"px");return a.abrupt("return",c);case 15:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}(),O=function(c,a){if(c.index!==a.index){return!1}if(c.type!==a.type){return!1}if(g(c.data)!=g(a.data)){return!1}if(c.type===x.HEADER){return c.data.name===a.data.name}else{if(c.data.length!==a.data.length){return!1}for(var b=0;b<c.data.length;b++){if(c.data[b].unified!=a.data[b].unified){return!1}}}return!0},P=function(){var a=q(regeneratorRuntime.mark(function a(b,c,d){var e,f,g,h,i;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:e=d.filter(function(a){return!c.some(function(b){return O(b,a)})});f=c.filter(function(a){return d.some(function(b){return O(a,b)})});g=c.filter(function(a){return!d.some(function(b){return O(a,b)})});h=g.map(function(a){return b.querySelectorAll("[data-row=\"".concat(a.index,"\"]"))});a.next=6;return Promise.all(e.map(function(a){return N(a)}));case 6:i=a.sent;i.forEach(function(a,c){for(var d=e[c],g=null,h=0,j;h<f.length;h++){j=f[h];if(j.index>d.index){g=h;break}}if(null!==g){var k=f[g],l=b.querySelector("[data-row=\"".concat(k.index,"\"]"));b.insertBefore(a,l);f.splice(g,0,f)}else{f.push(d);b.appendChild(a)}});h.forEach(function(a){for(var c=0,d;c<a.length;c++){d=a[c];b.removeChild(d)}});case 9:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}(),Q=function(a){var b=[],c=[],d=0,e=!1,f=function(){var d=q(regeneratorRuntime.mark(function d(){var g;return regeneratorRuntime.wrap(function(d){while(1){switch(d.prev=d.next){case 0:if(c.length){d.next=2;break}return d.abrupt("return");case 2:if(!e){d.next=4;break}return d.abrupt("return");case 4:e=!0;g=c.slice();c=[];d.next=9;return P(a,b,g);case 9:b=g;e=!1;f();case 12:case"end":return d.stop();}}},d)}));return function(){return d.apply(this,arguments)}}();return function(b,e){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:10;c=M(b,g,e);f();if(d!==e.length){a.style.height="".concat(e.length*v,"px")}d=e.length}},R=function(a,b){b.classList.remove("hidden");a.classList.add("hidden")},S=function(a,b,c){b.classList.add("hidden");a.classList.remove("hidden");c.value=""},T=function(a,b){return function(c){var d=c.target;if(E(d)){b.textContent=d.getAttribute("data-short-names");a.textContent=d.textContent}}},U=function(a,b){return function(c){var d=c.target;if(E(d)){b.textContent="";a.textContent=""}}},V=function(a,b,c,d,e,f){return function(g,h,i){var j=g.target,k=h,m=i;S(b,c,d);if(E(j)){var n=j.getAttribute("data-unified"),o=j.getAttribute("data-short-names").replace(/:/g,"").split(" "),p=b.scrollTop,q=null!==b.querySelector("[data-row=\"".concat(a-1,"\"]")),r=L(h,a,{unified:n,shortnames:o}),s=l(r,2);k=s[0];a=s[1];m=B(k);if(q){f(p,k)}e(j.textContent);return[k,m]}var t=F(j);if(t){var u=t.getAttribute("data-category"),v=i[u];b.scrollTop=v}return[k,m]}},W=function(a,b,c,d,e){var f=I(a,c.scrollTop,d),g=l(f,3),h=g[0],i=g[1],j=g[2];return function(d,f){var g=c.scrollTop,k=b+v,m=b-v,n=g>=j||g<i;if(n){var o=I(a,g,d),p=l(o,3);h=p[0];i=p[1];j=p[2];H(a,h)}if(g<m||g>k){requestAnimationFrame(function(){e(g,f);b=g})}}},X=function(a,b,d){var f=b.querySelector(y.ROW_CONTAINER),g=Q(f);b.appendChild(f);return q(regeneratorRuntime.mark(function f(){var h,i,j,k;return regeneratorRuntime.wrap(function(f){while(1){switch(f.prev=f.next){case 0:h=a.value.toLowerCase();if(!h){f.next=11;break}R(d,b);i=Object.keys(c.byShortName).reduce(function(a,b){if(b.includes(h)){a.push({shortnames:[b],unified:c.byShortName[b]})}return a},[]);f.next=6;return(0,e.get_string)("searchresults","core");case 6:j=f.sent;k=z(j,j,i,0);g(0,k,k.length);f.next=12;break;case 11:S(d,b,a);case 12:case"end":return f.stop();}}},f)}))},Y=function(a,b,c,e,f,g,h,i){var j=a.querySelector(y.SEARCH_INPUT),k=a.querySelector(y.SEARCH_RESULTS_CONTAINER),m=a.querySelector(y.EMOJI_PREVIEW),n=a.querySelector(y.EMOJI_SHORT_NAME),o=V(i,b,k,j,f,c),p=W(a,e,b,g,c),q=X(j,k,b);a.addEventListener("focus",T(m,n),!0);a.addEventListener("blur",U(m,n),!0);a.addEventListener("mouseenter",T(m,n),!0);a.addEventListener("mouseleave",U(m,n),!0);a.addEventListener("click",function(a){var b=o(a,h,g),c=l(b,2);h=c[0];g=c[1]});b.addEventListener("scroll",(0,d.throttle)(function(){return p(g,h)},50));j.addEventListener("input",(0,d.debounce)(q,200))},Z=function(a,b){var d=a.querySelector(y.EMOJIS_CONTAINER),e=d.querySelector(y.ROW_CONTAINER),f=J(),g=[{name:"Recent",emojis:f}].concat(h(c.byCategory)),i=[],j=0;g.forEach(function(b){var c=G(a,b.name),d=c.title,e=z(b.name,d,b.emojis,i.length);if("Recent"===b.name){j=e.length}i=i.concat(e)});i=A(i);var k=B(i),l=Q(e);l(0,i);Y(a,d,l,0,b,k,i,j)};a.default=Z;return a.default});
define ("core/chart_base",["core/chart_series","core/chart_axis"],function(a,b){function c(){this._series=[];this._labels=[];this._xaxes=[];this._yaxes=[];this._setDefaults()}c.prototype._series=null;c.prototype._labels=null;c.prototype._title=null;c.prototype._xaxes=null;c.prototype._yaxes=null;c.prototype.COLORSET=["#f3c300","#875692","#f38400","#a1caf1","#be0032","#c2b280","#7f180d","#008856","#e68fac","#0067a5"];c.prototype._configColorSet=null;c.prototype.TYPE=null;c.prototype.addSeries=function(a){this._validateSeries(a);this._series.push(a);if(null===a.getColor()){var b=this.getConfigColorSet()||c.prototype.COLORSET;a.setColor(b[this._series.length%b.length])}};c.prototype.create=function(c,d){var e=new c;e.setConfigColorSet(d.config_colorset);e.setLabels(d.labels);e.setTitle(d.title);d.series.forEach(function(b){e.addSeries(a.prototype.create(b))});d.axes.x.forEach(function(a,c){e.setXAxis(b.prototype.create(a),c)});d.axes.y.forEach(function(a,c){e.setYAxis(b.prototype.create(a),c)});return e};c.prototype.__getAxis=function(a,c,d){var e="x"===a?this._xaxes:this._yaxes,f=("x"===a?this.setXAxis:this.setYAxis).bind(this),g;c="undefined"==typeof c?0:c;d="undefined"==typeof d?!1:d;g=e[c];if("undefined"==typeof g){if(!d){throw new Error("Unknown axis.")}g=new b;f(g,c)}return g};c.prototype.getConfigColorSet=function(){return this._configColorSet};c.prototype.getLabels=function(){return this._labels};c.prototype.getSeries=function(){return this._series};c.prototype.getTitle=function(){return this._title};c.prototype.getType=function(){if(!this.TYPE){throw new Error("The TYPE property has not been set.")}return this.TYPE};c.prototype.getXAxes=function(){return this._xaxes};c.prototype.getXAxis=function(a,b){return this.__getAxis("x",a,b)};c.prototype.getYAxes=function(){return this._yaxes};c.prototype.getYAxis=function(a,b){return this.__getAxis("y",a,b)};c.prototype.setConfigColorSet=function(a){this._configColorSet=a};c.prototype._setDefaults=function(){};c.prototype.setLabels=function(a){if(a.length&&this._series.length&&this._series[0].length!=a.length){throw new Error("Series must match label values.")}this._labels=a};c.prototype.setTitle=function(a){this._title=a};c.prototype.setXAxis=function(a,b){b="undefined"==typeof b?0:b;this._validateAxis("x",a,b);this._xaxes[b]=a};c.prototype.setYAxis=function(a,b){b="undefined"==typeof b?0:b;this._validateAxis("y",a,b);this._yaxes[b]=a};c.prototype._validateAxis=function(a,b,c){c="undefined"==typeof c?0:c;if(0<c){var d="x"==a?this._xaxes:this._yaxes;if("undefined"==typeof d[c-1]){throw new Error("Missing "+a+" axis at index lower than "+c)}}};c.prototype._validateSeries=function(a){if(this._series.length&&this._series[0].getCount()!=a.getCount()){throw new Error("Series do not have an equal number of values.")}else if(this._labels.length&&this._labels.length!=a.getCount()){throw new Error("Series must match label values.")}};return c});
function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("core/chart_series",[],function(){function a(a,b){if("string"!=typeof a){throw new Error("Invalid label for series.")}else if("object"!==_typeof(b)){throw new Error("Values for a series must be an array.")}else if(1>b.length){throw new Error("Invalid values received for series.")}this._colors=[];this._label=a;this._values=b}a.prototype.TYPE_DEFAULT=null;a.prototype.TYPE_LINE="line";a.prototype._colors=null;a.prototype._label=null;a.prototype._labels=null;a.prototype._smooth=!1;a.prototype._type=a.prototype.TYPE_DEFAULT;a.prototype._values=null;a.prototype._xaxis=null;a.prototype._yaxis=null;a.prototype.create=function(b){var c=new a(b.label,b.values);c.setType(b.type);c.setXAxis(b.axes.x);c.setYAxis(b.axes.y);c.setLabels(b.labels);if(b.colors&&1<b.colors.length){c.setColors(b.colors)}else{c.setColor(b.colors[0])}c.setSmooth(b.smooth);return c};a.prototype.getColor=function(){return this._colors[0]||null};a.prototype.getColors=function(){return this._colors};a.prototype.getCount=function(){return this._values.length};a.prototype.getLabel=function(){return this._label};a.prototype.getLabels=function(){return this._labels};a.prototype.getSmooth=function(){return this._smooth};a.prototype.getType=function(){return this._type};a.prototype.getValues=function(){return this._values};a.prototype.getXAxis=function(){return this._xaxis};a.prototype.getYAxis=function(){return this._yaxis};a.prototype.hasColoredValues=function(){return this._colors.length==this.getCount()};a.prototype.setColor=function(a){this._colors=[a]};a.prototype.setColors=function(a){if(a&&a.length!=this.getCount()){throw new Error("When setting multiple colors there must be one per value.")}this._colors=a||[]};a.prototype.setLabels=function(a){this._validateLabels(a);a="undefined"==typeof a?null:a;this._labels=a};a.prototype.setSmooth=function(a){a="undefined"==typeof a?null:a;this._smooth=a};a.prototype.setType=function(a){if(a!=this.TYPE_DEFAULT&&a!=this.TYPE_LINE){throw new Error("Invalid serie type.")}this._type=a||null};a.prototype.setXAxis=function(a){this._xaxis=a||null};a.prototype.setYAxis=function(a){this._yaxis=a||null};a.prototype._validateLabels=function(a){if(a&&0<a.length&&a.length!=this.getCount()){throw new Error("Series labels must match series values.")}};return a});
define ("core/yui",function(){return Y});
function _typeof(e){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(e){return typeof e}}else{_typeof=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return _typeof(e)}define ("core/adapter",[],function(){return function c(d,e,t){function r(i,o){if(!e[i]){if(!d[i]){var s="function"==typeof require&&require;if(!o&&s)return s(i,!0);if(n)return n(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=e[i]={exports:{}};d[i][0].call(p.exports,function(t){var e=d[i][1][t];return r(e?e:t)},p,p.exports,c,d,e,t)}return e[i].exports}for(var n="function"==typeof require&&require,a=0;a<t.length;a++){r(t[a])}return r}({1:[function(e,t){'use strict';var d=e("sdp");function r(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function a(e,t,r,a,n){var i=d.writeRtpDescription(e.kind,t);i+=d.writeIceParameters(e.iceGatherer.getLocalParameters());i+=d.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":n||"active");i+="a=mid:"+e.mid+"\r\n";if(e.rtpSender&&e.rtpReceiver){i+="a=sendrecv\r\n"}else if(e.rtpSender){i+="a=sendonly\r\n"}else if(e.rtpReceiver){i+="a=recvonly\r\n"}else{i+="a=inactive\r\n"}if(e.rtpSender){var o=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=o;var s="msid:"+(a?a.id:"-")+" "+o+"\r\n";i+="a="+s;i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s;if(e.sendEncodingParameters[0].rtx){i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s;i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n"}}i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+d.localCName+"\r\n";if(e.rtpSender&&e.sendEncodingParameters[0].rtx){i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+d.localCName+"\r\n"}return i}function n(e,t){var r=!1;e=JSON.parse(JSON.stringify(e));return e.filter(function(e){if(e&&(e.urls||e.url)){var a=e.urls||e.url;if(e.url&&!e.urls){console.warn("RTCIceServer.url is deprecated! Use urls instead.")}var n="string"==typeof a;if(n){a=[a]}a=a.filter(function(e){var a=0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!r;if(a){r=!0;return!0}return 0===e.indexOf("stun:")&&14393<=t&&-1===e.indexOf("?transport=udp")});delete e.url;e.urls=n?a[0]:a;return!!a.length}})}function i(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},a=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++){if(t[r].payloadType===e||t[r].preferredPayloadType===e){return t[r]}}},n=function(e,t,r,n){var i=a(e.parameters.apt,r),o=a(t.parameters.apt,n);return i&&o&&i.name.toLowerCase()===o.name.toLowerCase()};e.codecs.forEach(function(a){for(var o=0,s;o<t.codecs.length;o++){s=t.codecs[o];if(a.name.toLowerCase()===s.name.toLowerCase()&&a.clockRate===s.clockRate){if("rtx"===a.name.toLowerCase()&&a.parameters&&s.parameters.apt){if(!n(a,s,e.codecs,t.codecs)){continue}}s=JSON.parse(JSON.stringify(s));s.numChannels=Math.min(a.numChannels,s.numChannels);r.codecs.push(s);s.rtcpFeedback=s.rtcpFeedback.filter(function(e){for(var t=0;t<a.rtcpFeedback.length;t++){if(a.rtcpFeedback[t].type===e.type&&a.rtcpFeedback[t].parameter===e.parameter){return!0}}return!1});break}}});e.headerExtensions.forEach(function(e){for(var a=0,n;a<t.headerExtensions.length;a++){n=t.headerExtensions[a];if(e.uri===n.uri){r.headerExtensions.push(n);break}}});return r}function o(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function s(e,t){var r=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});if(!r){e.addRemoteCandidate(t)}return!r}function c(t,r){var a=new Error(r);a.name=t;a.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[t];return a}t.exports=function(e,t){function p(t,r){r.addTrack(t);r.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function m(t,r){r.removeTrack(t);r.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}function l(t,r,a,n){var i=new Event("track");i.track=r;i.receiver=a;i.transceiver={receiver:a};i.streams=n;e.setTimeout(function(){t._dispatchEvent("track",i)})}var g=function(r){var a=this,o=document.createDocumentFragment();["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){a[e]=o[e].bind(o)});this.canTrickleIceCandidates=null;this.needNegotiation=!1;this.localStreams=[];this.remoteStreams=[];this._localDescription=null;this._remoteDescription=null;this.signalingState="stable";this.iceConnectionState="new";this.connectionState="new";this.iceGatheringState="new";r=JSON.parse(JSON.stringify(r||{}));this.usingBundle="max-bundle"===r.bundlePolicy;if("negotiate"===r.rtcpMuxPolicy){throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported")}else if(!r.rtcpMuxPolicy){r.rtcpMuxPolicy="require"}switch(r.iceTransportPolicy){case"all":case"relay":break;default:r.iceTransportPolicy="all";break;}switch(r.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:r.bundlePolicy="balanced";break;}r.iceServers=n(r.iceServers||[],t);this._iceGatherers=[];if(r.iceCandidatePoolSize){for(var s=r.iceCandidatePoolSize;0<s;s--){this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}))}}else{r.iceCandidatePoolSize=0}this._config=r;this.transceivers=[];this._sdpSessionId=d.generateSessionId();this._sdpSessionVersion=0;this._dtlsRole=void 0;this._isClosed=!1};Object.defineProperty(g.prototype,"localDescription",{configurable:!0,get:function get(){return this._localDescription}});Object.defineProperty(g.prototype,"remoteDescription",{configurable:!0,get:function get(){return this._remoteDescription}});g.prototype.onicecandidate=null;g.prototype.onaddstream=null;g.prototype.ontrack=null;g.prototype.onremovestream=null;g.prototype.onsignalingstatechange=null;g.prototype.oniceconnectionstatechange=null;g.prototype.onconnectionstatechange=null;g.prototype.onicegatheringstatechange=null;g.prototype.onnegotiationneeded=null;g.prototype.ondatachannel=null;g.prototype._dispatchEvent=function(e,t){if(this._isClosed){return}this.dispatchEvent(t);if("function"==typeof this["on"+e]){this["on"+e](t)}};g.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)};g.prototype.getConfiguration=function(){return this._config};g.prototype.getLocalStreams=function(){return this.localStreams};g.prototype.getRemoteStreams=function(){return this.remoteStreams};g.prototype._createTransceiver=function(e,t){var r=0<this.transceivers.length,a={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r){a.iceTransport=this.transceivers[0].iceTransport;a.dtlsTransport=this.transceivers[0].dtlsTransport}else{var n=this._createIceAndDtlsTransports();a.iceTransport=n.iceTransport;a.dtlsTransport=n.dtlsTransport}if(!t){this.transceivers.push(a)}return a};g.prototype.addTrack=function(t,r){if(this._isClosed){throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.")}var a=this.transceivers.find(function(e){return e.track===t});if(a){throw c("InvalidAccessError","Track already exists.")}for(var n,o=0;o<this.transceivers.length;o++){if(!this.transceivers[o].track&&this.transceivers[o].kind===t.kind){n=this.transceivers[o]}}if(!n){n=this._createTransceiver(t.kind)}this._maybeFireNegotiationNeeded();if(-1===this.localStreams.indexOf(r)){this.localStreams.push(r)}n.track=t;n.stream=r;n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport);return n.rtpSender};g.prototype.addStream=function(e){var r=this;if(15025<=t){e.getTracks().forEach(function(t){r.addTrack(t,e)})}else{var a=e.clone();e.getTracks().forEach(function(e,t){var r=a.getTracks()[t];e.addEventListener("enabled",function(e){r.enabled=e.enabled})});a.getTracks().forEach(function(e){r.addTrack(e,a)})}};g.prototype.removeTrack=function(r){if(this._isClosed){throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.")}if(!(r instanceof e.RTCRtpSender)){throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.")}var a=this.transceivers.find(function(e){return e.rtpSender===r});if(!a){throw c("InvalidAccessError","Sender was not created by this connection.")}var n=a.stream;a.rtpSender.stop();a.rtpSender=null;a.track=null;a.stream=null;var i=this.transceivers.map(function(e){return e.stream});if(-1===i.indexOf(n)&&-1<this.localStreams.indexOf(n)){this.localStreams.splice(this.localStreams.indexOf(n),1)}this._maybeFireNegotiationNeeded()};g.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var r=t.getSenders().find(function(t){return t.track===e});if(r){t.removeTrack(r)}})};g.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})};g.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})};g.prototype._createIceGatherer=function(t,r){var a=this;if(r&&0<t){return this.transceivers[0].iceGatherer}else if(this._iceGatherers.length){return this._iceGatherers.shift()}var n=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});Object.defineProperty(n,"state",{value:"new",writable:!0});this.transceivers[t].bufferedCandidateEvents=[];this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||0===Object.keys(e.candidate).length;n.state=r?"completed":"gathering";if(null!==a.transceivers[t].bufferedCandidateEvents){a.transceivers[t].bufferedCandidateEvents.push(e)}};n.addEventListener("localcandidate",this.transceivers[t].bufferCandidates);return n};g.prototype._gather=function(t,r){var a=this,n=this.transceivers[r].iceGatherer;if(n.onlocalcandidate){return}var i=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null;n.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates);n.onlocalcandidate=function(e){if(a.usingBundle&&0<r){return}var i=new Event("icecandidate");i.candidate={sdpMid:t,sdpMLineIndex:r};var o=e.candidate,s=!o||0===Object.keys(o).length;if(s){if("new"===n.state||"gathering"===n.state){n.state="completed"}}else{if("new"===n.state){n.state="gathering"}o.component=1;o.ufrag=n.getLocalParameters().usernameFragment;var c=d.writeCandidate(o);i.candidate=Object.assign(i.candidate,d.parseCandidate(c));i.candidate.candidate=c;i.candidate.toJSON=function(){return{candidate:i.candidate.candidate,sdpMid:i.candidate.sdpMid,sdpMLineIndex:i.candidate.sdpMLineIndex,usernameFragment:i.candidate.usernameFragment}}}var p=d.getMediaSections(a._localDescription.sdp);if(!s){p[i.candidate.sdpMLineIndex]+="a="+i.candidate.candidate+"\r\n"}else{p[i.candidate.sdpMLineIndex]+="a=end-of-candidates\r\n"}a._localDescription.sdp=d.getDescription(a._localDescription.sdp)+p.join("");var m=a.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});if("gathering"!==a.iceGatheringState){a.iceGatheringState="gathering";a._emitGatheringStateChange()}if(!s){a._dispatchEvent("icecandidate",i)}if(m){a._dispatchEvent("icecandidate",new Event("icecandidate"));a.iceGatheringState="complete";a._emitGatheringStateChange()}};e.setTimeout(function(){i.forEach(function(t){n.onlocalcandidate(t)})},0)};g.prototype._createIceAndDtlsTransports=function(){var t=this,r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState();t._updateConnectionState()};var a=new e.RTCDtlsTransport(r);a.ondtlsstatechange=function(){t._updateConnectionState()};a.onerror=function(){Object.defineProperty(a,"state",{value:"failed",writable:!0});t._updateConnectionState()};return{iceTransport:r,dtlsTransport:a}};g.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;if(t){delete t.onlocalcandidate;delete this.transceivers[e].iceGatherer}var r=this.transceivers[e].iceTransport;if(r){delete r.onicestatechange;delete this.transceivers[e].iceTransport}var a=this.transceivers[e].dtlsTransport;if(a){delete a.ondtlsstatechange;delete a.onerror;delete this.transceivers[e].dtlsTransport}};g.prototype._transceive=function(e,r,a){var n=i(e.localCapabilities,e.remoteCapabilities);if(r&&e.rtpSender){n.encodings=e.sendEncodingParameters;n.rtcp={cname:d.localCName,compound:e.rtcpParameters.compound};if(e.recvEncodingParameters.length){n.rtcp.ssrc=e.recvEncodingParameters[0].ssrc}e.rtpSender.send(n)}if(a&&e.rtpReceiver&&0<n.codecs.length){if("video"===e.kind&&e.recvEncodingParameters&&15019>t){e.recvEncodingParameters.forEach(function(e){delete e.rtx})}if(e.recvEncodingParameters.length){n.encodings=e.recvEncodingParameters}else{n.encodings=[{}]}n.rtcp={compound:e.rtcpParameters.compound};if(e.rtcpParameters.cname){n.rtcp.cname=e.rtcpParameters.cname}if(e.sendEncodingParameters.length){n.rtcp.ssrc=e.sendEncodingParameters[0].ssrc}e.rtpReceiver.receive(n)}};g.prototype.setLocalDescription=function(e){var t=this;if(-1===["offer","answer"].indexOf(e.type)){return Promise.reject(c("TypeError","Unsupported type \""+e.type+"\""))}if(!o("setLocalDescription",e.type,t.signalingState)||t._isClosed){return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+t.signalingState))}var r,a;if("offer"===e.type){r=d.splitSections(e.sdp);a=r.shift();r.forEach(function(e,r){var a=d.parseRtpParameters(e);t.transceivers[r].localCapabilities=a});t.transceivers.forEach(function(e,r){t._gather(e.mid,r)})}else if("answer"===e.type){r=d.splitSections(t._remoteDescription.sdp);a=r.shift();var n=0<d.matchPrefix(a,"a=ice-lite").length;r.forEach(function(e,r){var o=t.transceivers[r],s=o.iceGatherer,c=o.iceTransport,p=o.dtlsTransport,m=o.localCapabilities,l=o.remoteCapabilities,g=d.isRejected(e)&&0===d.matchPrefix(e,"a=bundle-only").length;if(!g&&!o.rejected){var h=d.getIceParameters(e,a),f=d.getDtlsParameters(e,a);if(n){f.role="server"}if(!t.usingBundle||0===r){t._gather(o.mid,r);if("new"===c.state){c.start(s,h,n?"controlling":"controlled")}if("new"===p.state){p.start(f)}}var C=i(m,l);t._transceive(o,0<C.codecs.length,!1)}})}t._localDescription={type:e.type,sdp:e.sdp};if("offer"===e.type){t._updateSignalingState("have-local-offer")}else{t._updateSignalingState("stable")}return Promise.resolve()};g.prototype.setRemoteDescription=function(r){var a=this;if(-1===["offer","answer"].indexOf(r.type)){return Promise.reject(c("TypeError","Unsupported type \""+r.type+"\""))}if(!o("setRemoteDescription",r.type,a.signalingState)||a._isClosed){return Promise.reject(c("InvalidStateError","Can not set remote "+r.type+" in state "+a.signalingState))}var n={};a.remoteStreams.forEach(function(e){n[e.id]=e});var g=[],h=d.splitSections(r.sdp),f=h.shift(),C=0<d.matchPrefix(f,"a=ice-lite").length,v=0<d.matchPrefix(f,"a=group:BUNDLE ").length;a.usingBundle=v;var y=d.matchPrefix(f,"a=ice-options:")[0];if(y){a.canTrickleIceCandidates=0<=y.substr(14).split(" ").indexOf("trickle")}else{a.canTrickleIceCandidates=!1}h.forEach(function(o,c){var l=d.splitLines(o),h=d.getKind(o),y=d.isRejected(o)&&0===d.matchPrefix(o,"a=bundle-only").length,u=l[0].substr(2).split(" ")[2],T=d.getDirection(o,f),S=d.parseMsid(o),R=d.getMid(o)||d.generateIdentifier();if(y||"application"===h&&("DTLS/SCTP"===u||"UDP/DTLS/SCTP"===u)){a.transceivers[c]={mid:R,kind:h,protocol:u,rejected:!0};return}if(!y&&a.transceivers[c]&&a.transceivers[c].rejected){a.transceivers[c]=a._createTransceiver(h,!0)}var P,E,k,b,_,x,M,L,I,D=d.parseRtpParameters(o),w,j;if(!y){w=d.getIceParameters(o,f);j=d.getDtlsParameters(o,f);j.role="client"}M=d.parseRtpEncodingParameters(o);var O=d.parseRtcpParameters(o),U=0<d.matchPrefix(o,"a=end-of-candidates",f).length,A=d.matchPrefix(o,"a=candidate:").map(function(e){return d.parseCandidate(e)}).filter(function(e){return 1===e.component});if(("offer"===r.type||"answer"===r.type)&&!y&&v&&0<c&&a.transceivers[c]){a._disposeIceAndDtlsTransports(c);a.transceivers[c].iceGatherer=a.transceivers[0].iceGatherer;a.transceivers[c].iceTransport=a.transceivers[0].iceTransport;a.transceivers[c].dtlsTransport=a.transceivers[0].dtlsTransport;if(a.transceivers[c].rtpSender){a.transceivers[c].rtpSender.setTransport(a.transceivers[0].dtlsTransport)}if(a.transceivers[c].rtpReceiver){a.transceivers[c].rtpReceiver.setTransport(a.transceivers[0].dtlsTransport)}}if("offer"===r.type&&!y){P=a.transceivers[c]||a._createTransceiver(h);P.mid=R;if(!P.iceGatherer){P.iceGatherer=a._createIceGatherer(c,v)}if(A.length&&"new"===P.iceTransport.state){if(U&&(!v||0===c)){P.iceTransport.setRemoteCandidates(A)}else{A.forEach(function(e){s(P.iceTransport,e)})}}L=e.RTCRtpReceiver.getCapabilities(h);if(15019>t){L.codecs=L.codecs.filter(function(e){return"rtx"!==e.name})}x=P.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var G=!1;if("sendrecv"===T||"sendonly"===T){G=!P.rtpReceiver;_=P.rtpReceiver||new e.RTCRtpReceiver(P.dtlsTransport,h);if(G){var N;I=_.track;if(S&&"-"===S.stream){}else if(S){if(!n[S.stream]){n[S.stream]=new e.MediaStream;Object.defineProperty(n[S.stream],"id",{get:function get(){return S.stream}})}Object.defineProperty(I,"id",{get:function get(){return S.track}});N=n[S.stream]}else{if(!n.default){n.default=new e.MediaStream}N=n.default}if(N){p(I,N);P.associatedRemoteMediaStreams.push(N)}g.push([I,_,N])}}else if(P.rtpReceiver&&P.rtpReceiver.track){P.associatedRemoteMediaStreams.forEach(function(e){var t=e.getTracks().find(function(e){return e.id===P.rtpReceiver.track.id});if(t){m(t,e)}});P.associatedRemoteMediaStreams=[]}P.localCapabilities=L;P.remoteCapabilities=D;P.rtpReceiver=_;P.rtcpParameters=O;P.sendEncodingParameters=x;P.recvEncodingParameters=M;a._transceive(a.transceivers[c],!1,G)}else if("answer"===r.type&&!y){P=a.transceivers[c];E=P.iceGatherer;k=P.iceTransport;b=P.dtlsTransport;_=P.rtpReceiver;x=P.sendEncodingParameters;L=P.localCapabilities;a.transceivers[c].recvEncodingParameters=M;a.transceivers[c].remoteCapabilities=D;a.transceivers[c].rtcpParameters=O;if(A.length&&"new"===k.state){if((C||U)&&(!v||0===c)){k.setRemoteCandidates(A)}else{A.forEach(function(e){s(P.iceTransport,e)})}}if(!v||0===c){if("new"===k.state){k.start(E,w,"controlling")}if("new"===b.state){b.start(j)}}var F=i(P.localCapabilities,P.remoteCapabilities),z=F.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length;if(!z&&P.sendEncodingParameters[0].rtx){delete P.sendEncodingParameters[0].rtx}a._transceive(P,"sendrecv"===T||"recvonly"===T,"sendrecv"===T||"sendonly"===T);if(_&&("sendrecv"===T||"sendonly"===T)){I=_.track;if(S){if(!n[S.stream]){n[S.stream]=new e.MediaStream}p(I,n[S.stream]);g.push([I,_,n[S.stream]])}else{if(!n.default){n.default=new e.MediaStream}p(I,n.default);g.push([I,_,n.default])}}else{delete P.rtpReceiver}}});if(a._dtlsRole===void 0){a._dtlsRole="offer"===r.type?"active":"passive"}a._remoteDescription={type:r.type,sdp:r.sdp};if("offer"===r.type){a._updateSignalingState("have-remote-offer")}else{a._updateSignalingState("stable")}Object.keys(n).forEach(function(t){var r=n[t];if(r.getTracks().length){if(-1===a.remoteStreams.indexOf(r)){a.remoteStreams.push(r);var i=new Event("addstream");i.stream=r;e.setTimeout(function(){a._dispatchEvent("addstream",i)})}g.forEach(function(e){var t=e[0],n=e[1];if(r.id!==e[2].id){return}l(a,t,n,[r])})}});g.forEach(function(e){if(e[2]){return}l(a,e[0],e[1],[])});e.setTimeout(function(){if(!(a&&a.transceivers)){return}a.transceivers.forEach(function(e){if(e.iceTransport&&"new"===e.iceTransport.state&&0<e.iceTransport.getRemoteCandidates().length){console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification");e.iceTransport.addRemoteCandidate({})}})},4e3);return Promise.resolve()};g.prototype.close=function(){this.transceivers.forEach(function(e){if(e.iceTransport){e.iceTransport.stop()}if(e.dtlsTransport){e.dtlsTransport.stop()}if(e.rtpSender){e.rtpSender.stop()}if(e.rtpReceiver){e.rtpReceiver.stop()}});this._isClosed=!0;this._updateSignalingState("closed")};g.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)};g.prototype._maybeFireNegotiationNeeded=function(){var t=this;if("stable"!==this.signalingState||!0===this.needNegotiation){return}this.needNegotiation=!0;e.setTimeout(function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}},0)};g.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};this.transceivers.forEach(function(e){t[e.iceTransport.state]++});e="new";if(0<t.failed){e="failed"}else if(0<t.checking){e="checking"}else if(0<t.disconnected){e="disconnected"}else if(0<t.new){e="new"}else if(0<t.connected){e="connected"}else if(0<t.completed){e="completed"}if(e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}};g.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};this.transceivers.forEach(function(e){t[e.iceTransport.state]++;t[e.dtlsTransport.state]++});t.connected+=t.completed;e="new";if(0<t.failed){e="failed"}else if(0<t.connecting){e="connecting"}else if(0<t.disconnected){e="disconnected"}else if(0<t.new){e="new"}else if(0<t.connected){e="connected"}if(e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}};g.prototype.createOffer=function(){var r=this;if(r._isClosed){return Promise.reject(c("InvalidStateError","Can not call createOffer after close"))}var n=r.transceivers.filter(function(e){return"audio"===e.kind}).length,i=r.transceivers.filter(function(e){return"video"===e.kind}).length,o=arguments[0];if(o){if(o.mandatory||o.optional){throw new TypeError("Legacy mandatory/optional constraints not supported.")}if(o.offerToReceiveAudio!==void 0){if(!0===o.offerToReceiveAudio){n=1}else if(!1===o.offerToReceiveAudio){n=0}else{n=o.offerToReceiveAudio}}if(o.offerToReceiveVideo!==void 0){if(!0===o.offerToReceiveVideo){i=1}else if(!1===o.offerToReceiveVideo){i=0}else{i=o.offerToReceiveVideo}}}r.transceivers.forEach(function(e){if("audio"===e.kind){n--;if(0>n){e.wantReceive=!1}}else if("video"===e.kind){i--;if(0>i){e.wantReceive=!1}}});while(0<n||0<i){if(0<n){r._createTransceiver("audio");n--}if(0<i){r._createTransceiver("video");i--}}var s=d.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach(function(a,n){var i=a.track,o=a.kind,s=a.mid||d.generateIdentifier();a.mid=s;if(!a.iceGatherer){a.iceGatherer=r._createIceGatherer(n,r.usingBundle)}var c=e.RTCRtpSender.getCapabilities(o);if(15019>t){c.codecs=c.codecs.filter(function(e){return"rtx"!==e.name})}c.codecs.forEach(function(e){if("H264"===e.name&&e.parameters["level-asymmetry-allowed"]===void 0){e.parameters["level-asymmetry-allowed"]="1"}if(a.remoteCapabilities&&a.remoteCapabilities.codecs){a.remoteCapabilities.codecs.forEach(function(t){if(e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate){e.preferredPayloadType=t.payloadType}})}});c.headerExtensions.forEach(function(e){var t=a.remoteCapabilities&&a.remoteCapabilities.headerExtensions||[];t.forEach(function(t){if(e.uri===t.uri){e.id=t.id}})});var p=a.sendEncodingParameters||[{ssrc:1001*(2*n+1)}];if(i){if(15019<=t&&"video"===o&&!p[0].rtx){p[0].rtx={ssrc:p[0].ssrc+1}}}if(a.wantReceive){a.rtpReceiver=new e.RTCRtpReceiver(a.dtlsTransport,o)}a.localCapabilities=c;a.sendEncodingParameters=p});if("max-compat"!==r._config.bundlePolicy){s+="a=group:BUNDLE "+r.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"}s+="a=ice-options:trickle\r\n";r.transceivers.forEach(function(e,t){s+=a(e,e.localCapabilities,"offer",e.stream,r._dtlsRole);s+="a=rtcp-rsize\r\n";if(e.iceGatherer&&"new"!==r.iceGatheringState&&(0===t||!r.usingBundle)){e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1;s+="a="+d.writeCandidate(e)+"\r\n"});if("completed"===e.iceGatherer.state){s+="a=end-of-candidates\r\n"}}});var p=new e.RTCSessionDescription({type:"offer",sdp:s});return Promise.resolve(p)};g.prototype.createAnswer=function(){var r=this;if(r._isClosed){return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"))}if(!("have-remote-offer"===r.signalingState||"have-local-pranswer"===r.signalingState)){return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState))}var n=d.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);if(r.usingBundle){n+="a=group:BUNDLE "+r.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"}n+="a=ice-options:trickle\r\n";var o=d.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach(function(e,s){if(s+1>o){return}if(e.rejected){if("application"===e.kind){if("DTLS/SCTP"===e.protocol){n+="m=application 0 DTLS/SCTP 5000\r\n"}else{n+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n"}}else if("audio"===e.kind){n+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n"}else if("video"===e.kind){n+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"}n+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n";return}if(e.stream){var c;if("audio"===e.kind){c=e.stream.getAudioTracks()[0]}else if("video"===e.kind){c=e.stream.getVideoTracks()[0]}if(c){if(15019<=t&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx){e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}}}}var d=i(e.localCapabilities,e.remoteCapabilities),p=d.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length;if(!p&&e.sendEncodingParameters[0].rtx){delete e.sendEncodingParameters[0].rtx}n+=a(e,d,"answer",e.stream,r._dtlsRole);if(e.rtcpParameters&&e.rtcpParameters.reducedSize){n+="a=rtcp-rsize\r\n"}});var s=new e.RTCSessionDescription({type:"answer",sdp:n});return Promise.resolve(s)};g.prototype.addIceCandidate=function(e){var t=this,r;if(e&&!(e.sdpMLineIndex!==void 0||e.sdpMid)){return Promise.reject(new TypeError("sdpMLineIndex or sdpMid required"))}return new Promise(function(a,n){if(!t._remoteDescription){return n(c("InvalidStateError","Can not add ICE candidate without a remote description"))}else if(!e||""===e.candidate){for(var o=0;o<t.transceivers.length;o++){if(t.transceivers[o].rejected){continue}t.transceivers[o].iceTransport.addRemoteCandidate({});r=d.getMediaSections(t._remoteDescription.sdp);r[o]+="a=end-of-candidates\r\n";t._remoteDescription.sdp=d.getDescription(t._remoteDescription.sdp)+r.join("");if(t.usingBundle){break}}}else{var p=e.sdpMLineIndex;if(e.sdpMid){for(var m=0;m<t.transceivers.length;m++){if(t.transceivers[m].mid===e.sdpMid){p=m;break}}}var l=t.transceivers[p];if(l){if(l.rejected){return a()}var g=0<Object.keys(e.candidate).length?d.parseCandidate(e.candidate):{};if("tcp"===g.protocol&&(0===g.port||9===g.port)){return a()}if(g.component&&1!==g.component){return a()}if(0===p||0<p&&l.iceTransport!==t.transceivers[0].iceTransport){if(!s(l.iceTransport,g)){return n(c("OperationError","Can not add ICE candidate"))}}var h=e.candidate.trim();if(0===h.indexOf("a=")){h=h.substr(2)}r=d.getMediaSections(t._remoteDescription.sdp);r[p]+="a="+(g.type?h:"end-of-candidates")+"\r\n";t._remoteDescription.sdp=d.getDescription(t._remoteDescription.sdp)+r.join("")}else{return n(c("OperationError","Can not add ICE candidate"))}}a()})};g.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;this.transceivers.forEach(function(e){if(e.rtpSender&&e.rtpSender.track===t){r=e.rtpSender}else if(e.rtpReceiver&&e.rtpReceiver.track===t){r=e.rtpReceiver}});if(!r){throw c("InvalidAccessError","Invalid selector.")}return r.getStats()}var a=[];this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(t){if(e[t]){a.push(e[t].getStats())}})});return Promise.all(a).then(function(e){var t=new Map;e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})});return t})};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(t){var a=e[t];if(a&&a.prototype&&a.prototype.getStats){var n=a.prototype.getStats;a.prototype.getStats=function(){return n.apply(this).then(function(e){var t=new Map;Object.keys(e).forEach(function(a){e[a].type=r(e[a]);t.set(a,e[a])});return t})}}});var h=["createOffer","createAnswer"];h.forEach(function(e){var t=g.prototype[e];g.prototype[e]=function(){var e=arguments;if("function"==typeof e[0]||"function"==typeof e[1]){return t.apply(this,[arguments[2]]).then(function(t){if("function"==typeof e[0]){e[0].apply(null,[t])}},function(t){if("function"==typeof e[1]){e[1].apply(null,[t])}})}return t.apply(this,arguments)}});h=["setLocalDescription","setRemoteDescription","addIceCandidate"];h.forEach(function(e){var t=g.prototype[e];g.prototype[e]=function(){var e=arguments;if("function"==typeof e[1]||"function"==typeof e[2]){return t.apply(this,arguments).then(function(){if("function"==typeof e[1]){e[1].apply(null)}},function(t){if("function"==typeof e[2]){e[2].apply(null,[t])}})}return t.apply(this,arguments)}});["getStats"].forEach(function(e){var t=g.prototype[e];g.prototype[e]=function(){var e=arguments;if("function"==typeof e[1]){return t.apply(this,arguments).then(function(){if("function"==typeof e[1]){e[1].apply(null)}})}return t.apply(this,arguments)}});return g}},{sdp:2}],2:[function(e,t){'use strict';var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier();r.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})};r.splitSections=function(e){var t=e.split("\nm=");return t.map(function(e,t){return(0<t?"m="+e:e).trim()+"\r\n"})};r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]};r.getMediaSections=function(e){var t=r.splitSections(e);t.shift();return t};r.matchPrefix=function(e,t){return r.splitLines(e).filter(function(e){return 0===e.indexOf(t)})};r.parseCandidate=function(e){var t;if(0===e.indexOf("a=candidate:")){t=e.substring(12).split(" ")}else{t=e.substring(10).split(" ")}for(var r={foundation:t[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},a=8;a<t.length;a+=2){switch(t[a]){case"raddr":r.relatedAddress=t[a+1];break;case"rport":r.relatedPort=parseInt(t[a+1],10);break;case"tcptype":r.tcpType=t[a+1];break;case"ufrag":r.ufrag=t[a+1];r.usernameFragment=t[a+1];break;default:r[t[a]]=t[a+1];break;}}return r};r.writeCandidate=function(e){var t=[e.foundation,e.component,e.protocol.toUpperCase(),e.priority,e.address||e.ip,e.port],r=e.type;t.push("typ");t.push(r);if("host"!==r&&e.relatedAddress&&e.relatedPort){t.push("raddr");t.push(e.relatedAddress);t.push("rport");t.push(e.relatedPort)}if(e.tcpType&&"tcp"===e.protocol.toLowerCase()){t.push("tcptype");t.push(e.tcpType)}if(e.usernameFragment||e.ufrag){t.push("ufrag");t.push(e.usernameFragment||e.ufrag)}return"candidate:"+t.join(" ")};r.parseIceOptions=function(e){return e.substr(14).split(" ")};r.parseRtpMap=function(e){var t=e.substr(9).split(" "),r={payloadType:parseInt(t.shift(),10)};t=t[0].split("/");r.name=t[0];r.clockRate=parseInt(t[1],10);r.channels=3===t.length?parseInt(t[2],10):1;r.numChannels=r.channels;return r};r.writeRtpMap=function(e){var t=e.payloadType;if(e.preferredPayloadType!==void 0){t=e.preferredPayloadType}var r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==r?"/"+r:"")+"\r\n"};r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:0<t[0].indexOf("/")?t[0].split("/")[1]:"sendrecv",uri:t[1]}};r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"};r.parseFmtp=function(e){for(var t={},r,a=e.substr(e.indexOf(" ")+1).split(";"),n=0;n<a.length;n++){r=a[n].trim().split("=");t[r[0].trim()]=r[1]}return t};r.writeFmtp=function(e){var t="",r=e.payloadType;if(e.preferredPayloadType!==void 0){r=e.preferredPayloadType}if(e.parameters&&Object.keys(e.parameters).length){var a=[];Object.keys(e.parameters).forEach(function(t){if(e.parameters[t]){a.push(t+"="+e.parameters[t])}else{a.push(t)}});t+="a=fmtp:"+r+" "+a.join(";")+"\r\n"}return t};r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}};r.writeRtcpFb=function(e){var t="",r=e.payloadType;if(e.preferredPayloadType!==void 0){r=e.preferredPayloadType}if(e.rtcpFeedback&&e.rtcpFeedback.length){e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})}return t};r.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substr(7,t-7),10)},a=e.indexOf(":",t);if(-1<a){r.attribute=e.substr(t+1,a-t-1);r.value=e.substr(a+1)}else{r.attribute=e.substr(t+1)}return r};r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(function(e){return parseInt(e,10)})}};r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t){return t.substr(6)}};r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}};r.getDtlsParameters=function(e,t){var a=r.matchPrefix(e+t,"a=fingerprint:");return{role:"auto",fingerprints:a.map(r.parseFingerprint)}};r.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";e.fingerprints.forEach(function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"});return r};r.getIceParameters=function(e,t){var a=r.splitLines(e);a=a.concat(r.splitLines(t));var n={usernameFragment:a.filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:a.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)};return n};r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"};r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=r.splitLines(e),n=a[0].split(" "),o=3;o<n.length;o++){var s=n[o],c=r.matchPrefix(e,"a=rtpmap:"+s+" ")[0];if(c){var d=r.parseRtpMap(c),p=r.matchPrefix(e,"a=fmtp:"+s+" ");d.parameters=p.length?r.parseFmtp(p[0]):{};d.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+s+" ").map(r.parseRtcpFb);t.codecs.push(d);switch(d.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(d.name.toUpperCase());break;default:break;}}}r.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(r.parseExtmap(e))});return t};r.writeRtpDescription=function(e,t){var a="";a+="m="+e+" ";a+=0<t.codecs.length?"9":"0";a+=" UDP/TLS/RTP/SAVPF ";a+=t.codecs.map(function(e){if(e.preferredPayloadType!==void 0){return e.preferredPayloadType}return e.payloadType}).join(" ")+"\r\n";a+="c=IN IP4 0.0.0.0\r\n";a+="a=rtcp:9 IN IP4 0.0.0.0\r\n";t.codecs.forEach(function(e){a+=r.writeRtpMap(e);a+=r.writeFmtp(e);a+=r.writeRtcpFb(e)});var n=0;t.codecs.forEach(function(e){if(e.maxptime>n){n=e.maxptime}});if(0<n){a+="a=maxptime:"+n+"\r\n"}a+="a=rtcp-mux\r\n";if(t.headerExtensions){t.headerExtensions.forEach(function(e){a+=r.writeExtmap(e)})}return a};r.parseRtpEncodingParameters=function(e){var t=[],a=r.parseRtpParameters(e),n=-1!==a.fecMechanisms.indexOf("RED"),i=-1!==a.fecMechanisms.indexOf("ULPFEC"),o=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),s=0<o.length&&o[0].ssrc,c,d=r.matchPrefix(e,"a=ssrc-group:FID").map(function(e){var t=e.substr(17).split(" ");return t.map(function(e){return parseInt(e,10)})});if(0<d.length&&1<d[0].length&&d[0][0]===s){c=d[0][1]}a.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10)};if(s&&c){r.rtx={ssrc:c}}t.push(r);if(n){r=JSON.parse(JSON.stringify(r));r.fec={ssrc:s,mechanism:i?"red+ulpfec":"red"};t.push(r)}}});if(0===t.length&&s){t.push({ssrc:s})}var p=r.matchPrefix(e,"b=");if(p.length){if(0===p[0].indexOf("b=TIAS:")){p=parseInt(p[0].substr(7),10)}else if(0===p[0].indexOf("b=AS:")){p=.95*(1e3*parseInt(p[0].substr(5),10))-16000}else{p=void 0}t.forEach(function(e){e.maxBitrate=p})}return t};r.parseRtcpParameters=function(e){var t={},a=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];if(a){t.cname=a.value;t.ssrc=a.ssrc}var n=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=0<n.length;t.compound=0===n.length;var i=r.matchPrefix(e,"a=rtcp-mux");t.mux=0<i.length;return t};r.parseMsid=function(e){var t,a=r.matchPrefix(e,"a=msid:");if(1===a.length){t=a[0].substr(7).split(" ");return{stream:t[0],track:t[1]}}var n=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});if(0<n.length){t=n[0].value.split(" ");return{stream:t[0],track:t[1]}}};r.generateSessionId=function(){return Math.random().toString().substr(2,21)};r.writeSessionBoilerplate=function(e,t,a){var n,i=t!==void 0?t:2;if(e){n=e}else{n=r.generateSessionId()}return"v=0\r\no="+(a||"thisisadapterortc")+" "+n+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"};r.writeMediaSection=function(e,t,a,n){var i=r.writeRtpDescription(e.kind,t);i+=r.writeIceParameters(e.iceGatherer.getLocalParameters());i+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===a?"actpass":"active");i+="a=mid:"+e.mid+"\r\n";if(e.direction){i+="a="+e.direction+"\r\n"}else if(e.rtpSender&&e.rtpReceiver){i+="a=sendrecv\r\n"}else if(e.rtpSender){i+="a=sendonly\r\n"}else if(e.rtpReceiver){i+="a=recvonly\r\n"}else{i+="a=inactive\r\n"}if(e.rtpSender){var o="msid:"+n.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+o;i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+o;if(e.sendEncodingParameters[0].rtx){i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+o;i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n"}}i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n";if(e.rtpSender&&e.sendEncodingParameters[0].rtx){i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"}return i};r.getDirection=function(e,t){for(var a=r.splitLines(e),n=0;n<a.length;n++){switch(a[n]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[n].substr(2);default:}}if(t){return r.getDirection(t)}return"sendrecv"};r.getKind=function(e){var t=r.splitLines(e),a=t[0].split(" ");return a[0].substr(2)};r.isRejected=function(e){return"0"===e.split(" ",2)[1]};r.parseMLine=function(e){var t=r.splitLines(e),a=t[0].substr(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}};r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0],a=t.substr(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}};r.isValidSDP=function(e){if("string"!=typeof e||0===e.length){return!1}for(var t=r.splitLines(e),a=0;a<t.length;a++){if(2>t[a].length||"="!==t[a].charAt(1)){return!1}}return!0};if("object"===_typeof(t)){t.exports=r}},{}],3:[function(e,t){(function(r){'use strict';var a=e("./adapter_factory.js");t.exports=a({window:r.window})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./adapter_factory.js":4}],4:[function(e,t){'use strict';var r=e("./utils");t.exports=function(t,a){var n=t&&t.window,i={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var o in a){if(hasOwnProperty.call(a,o)){i[o]=a[o]}}var s=r.log,c=r.detectBrowser(n),d=e("./chrome/chrome_shim")||null,p=e("./edge/edge_shim")||null,m=e("./firefox/firefox_shim")||null,l=e("./safari/safari_shim")||null,g=e("./common_shim")||null,h={browserDetails:c,commonShim:g,extractVersion:r.extractVersion,disableLog:r.disableLog,disableWarnings:r.disableWarnings};switch(c.browser){case"chrome":if(!d||!d.shimPeerConnection||!i.shimChrome){s("Chrome shim is not included in this adapter release.");return h}s("adapter.js shimming chrome.");h.browserShim=d;g.shimCreateObjectURL(n);d.shimGetUserMedia(n);d.shimMediaStream(n);d.shimSourceObject(n);d.shimPeerConnection(n);d.shimOnTrack(n);d.shimAddTrackRemoveTrack(n);d.shimGetSendersWithDtmf(n);d.shimSenderReceiverGetStats(n);d.fixNegotiationNeeded(n);g.shimRTCIceCandidate(n);g.shimMaxMessageSize(n);g.shimSendThrowTypeError(n);break;case"firefox":if(!m||!m.shimPeerConnection||!i.shimFirefox){s("Firefox shim is not included in this adapter release.");return h}s("adapter.js shimming firefox.");h.browserShim=m;g.shimCreateObjectURL(n);m.shimGetUserMedia(n);m.shimSourceObject(n);m.shimPeerConnection(n);m.shimOnTrack(n);m.shimRemoveStream(n);m.shimSenderGetStats(n);m.shimReceiverGetStats(n);m.shimRTCDataChannel(n);g.shimRTCIceCandidate(n);g.shimMaxMessageSize(n);g.shimSendThrowTypeError(n);break;case"edge":if(!p||!p.shimPeerConnection||!i.shimEdge){s("MS edge shim is not included in this adapter release.");return h}s("adapter.js shimming edge.");h.browserShim=p;g.shimCreateObjectURL(n);p.shimGetUserMedia(n);p.shimPeerConnection(n);p.shimReplaceTrack(n);g.shimMaxMessageSize(n);g.shimSendThrowTypeError(n);break;case"safari":if(!l||!i.shimSafari){s("Safari shim is not included in this adapter release.");return h}s("adapter.js shimming safari.");h.browserShim=l;g.shimCreateObjectURL(n);l.shimRTCIceServerUrls(n);l.shimCreateOfferLegacy(n);l.shimCallbacksAPI(n);l.shimLocalStreamsAPI(n);l.shimRemoteStreamsAPI(n);l.shimTrackEventTransceiver(n);l.shimGetUserMedia(n);g.shimRTCIceCandidate(n);g.shimMaxMessageSize(n);g.shimSendThrowTypeError(n);break;default:s("Unsupported browser!");break;}return h}},{"./chrome/chrome_shim":5,"./common_shim":7,"./edge/edge_shim":8,"./firefox/firefox_shim":11,"./safari/safari_shim":13,"./utils":14}],5:[function(e,t){'use strict';var n=e("../utils.js"),i=n.log;function r(e,t,a){if(!t||a.has(t.id)){return}a.set(t.id,t);Object.keys(t).forEach(function(n){if(n.endsWith("Id")){r(e,e.get(t[n]),a)}else if(n.endsWith("Ids")){t[n].forEach(function(t){r(e,e.get(t),a)})}})}function a(e,t,a){var n=a?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t){return i}var o=[];e.forEach(function(e){if("track"===e.type&&e.trackIdentifier===t.id){o.push(e)}});o.forEach(function(t){e.forEach(function(a){if(a.type===n&&a.trackId===t.id){r(e,a,i)}})});return i}t.exports={shimGetUserMedia:e("./getusermedia"),shimMediaStream:function shimMediaStream(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},shimOnTrack:function shimOnTrack(t){if("object"===_typeof(t)&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get:function get(){return this._ontrack},set:function set(e){if(this._ontrack){this.removeEventListener("track",this._ontrack)}this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var r=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){var a=this;if(!a._ontrackpoly){a._ontrackpoly=function(r){r.stream.addEventListener("addtrack",function(e){var n;if(t.RTCPeerConnection.prototype.getReceivers){n=a.getReceivers().find(function(t){return t.track&&t.track.id===e.track.id})}else{n={track:e.track}}var i=new Event("track");i.track=e.track;i.receiver=n;i.transceiver={receiver:n};i.streams=[r.stream];a.dispatchEvent(i)});r.stream.getTracks().forEach(function(e){var n;if(t.RTCPeerConnection.prototype.getReceivers){n=a.getReceivers().find(function(t){return t.track&&t.track.id===e.id})}else{n={track:e}}var i=new Event("track");i.track=e;i.receiver=n;i.transceiver={receiver:n};i.streams=[r.stream];a.dispatchEvent(i)})};a.addEventListener("addstream",a._ontrackpoly)}return r.apply(a,arguments)}}else{n.wrapPeerConnectionEvent(t,"track",function(t){if(!t.transceiver){Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}})}return t})}},shimGetSendersWithDtmf:function shimGetSendersWithDtmf(e){if("object"===_typeof(e)&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){if(this._dtmf===void 0){if("audio"===t.kind){this._dtmf=e.createDTMFSender(t)}else{this._dtmf=null}}return this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){this._senders=this._senders||[];return this._senders.slice()};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e){var a=this,n=r.apply(a,arguments);if(!n){n=t(a,e);a._senders.push(n)}return n};var a=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;a.apply(t,arguments);var r=t._senders.indexOf(e);if(-1!==r){t._senders.splice(r,1)}}}var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;r._senders=r._senders||[];n.apply(r,[e]);e.getTracks().forEach(function(e){r._senders.push(t(r,e))})};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._senders=t._senders||[];i.apply(t,[e]);e.getTracks().forEach(function(e){var r=t._senders.find(function(t){return t.track===e});if(r){t._senders.splice(t._senders.indexOf(r),1)}})}}else if("object"===_typeof(e)&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var o=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=o.apply(e,[]);t.forEach(function(t){t._pc=e});return t};Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function get(){if(this._dtmf===void 0){if("audio"===this.track.kind){this._dtmf=this._pc.createDTMFSender(this.track)}else{this._dtmf=null}}return this._dtmf}})}},shimSenderReceiverGetStats:function shimSenderReceiverGetStats(e){if(!("object"===_typeof(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver)){return}if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;if(t){e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(e,[]);r.forEach(function(t){t._pc=e});return r}}var r=e.RTCPeerConnection.prototype.addTrack;if(r){e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);e._pc=this;return e}}e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return a(t,e.track,!0)})}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var i=e.RTCPeerConnection.prototype.getReceivers;if(i){e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=i.apply(e,[]);t.forEach(function(t){t._pc=e});return t}}n.wrapPeerConnectionEvent(e,"track",function(t){t.receiver._pc=t.srcElement;return t});e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return a(t,e.track,!1)})}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype)){return}var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var t=this;if(0<arguments.length&&arguments[0]instanceof e.MediaStreamTrack){var a=arguments[0],n,i,s;t.getSenders().forEach(function(e){if(e.track===a){if(n){s=!0}else{n=e}}});t.getReceivers().forEach(function(e){if(e.track===a){if(i){s=!0}else{i=e}}return e.track===a});if(s||n&&i){return Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError"))}else if(n){return n.getStats()}else if(i){return i.getStats()}return Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(t,arguments)}},shimSourceObject:function shimSourceObject(e){var t=e&&e.URL;if("object"===_typeof(e)){if(e.HTMLMediaElement&&!("srcObject"in e.HTMLMediaElement.prototype)){Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function get(){return this._srcObject},set:function set(e){var r=this;this._srcObject=e;if(this.src){t.revokeObjectURL(this.src)}if(!e){this.src="";return}this.src=t.createObjectURL(e);e.addEventListener("addtrack",function(){if(r.src){t.revokeObjectURL(r.src)}r.src=t.createObjectURL(e)});e.addEventListener("removetrack",function(){if(r.src){t.revokeObjectURL(r.src)}r.src=t.createObjectURL(e)})}})}}},shimAddTrackRemoveTrackWithNative:function shimAddTrackRemoveTrackWithNative(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{};return Object.keys(this._shimmedLocalStreams).map(function(t){return e._shimmedLocalStreams[t][0]})};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r){return t.apply(this,arguments)}this._shimmedLocalStreams=this._shimmedLocalStreams||{};var a=t.apply(this,arguments);if(!this._shimmedLocalStreams[r.id]){this._shimmedLocalStreams[r.id]=[r,a]}else if(-1===this._shimmedLocalStreams[r.id].indexOf(a)){this._shimmedLocalStreams[r.id].push(a)}return a};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{};e.getTracks().forEach(function(e){var r=t.getSenders().find(function(t){return t.track===e});if(r){throw new DOMException("Track already exists.","InvalidAccessError")}});var a=t.getSenders();r.apply(this,arguments);var n=t.getSenders().filter(function(e){return-1===a.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(n)};var a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{};delete this._shimmedLocalStreams[e.id];return a.apply(this,arguments)};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{};if(e){Object.keys(this._shimmedLocalStreams).forEach(function(r){var a=t._shimmedLocalStreams[r].indexOf(e);if(-1!==a){t._shimmedLocalStreams[r].splice(a,1)}if(1===t._shimmedLocalStreams[r].length){delete t._shimmedLocalStreams[r]}})}return n.apply(this,arguments)}},shimAddTrackRemoveTrack:function shimAddTrackRemoveTrack(e){var a=n.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&65<=a.version){return this.shimAddTrackRemoveTrackWithNative(e)}var i=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=i.apply(this);e._reverseStreams=e._reverseStreams||{};return t.map(function(t){return e._reverseStreams[t.id]})};var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var r=this;r._streams=r._streams||{};r._reverseStreams=r._reverseStreams||{};t.getTracks().forEach(function(e){var t=r.getSenders().find(function(t){return t.track===e});if(t){throw new DOMException("Track already exists.","InvalidAccessError")}});if(!r._reverseStreams[t.id]){var a=new e.MediaStream(t.getTracks());r._streams[t.id]=a;r._reverseStreams[a.id]=t;t=a}o.apply(r,[t])};var s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._streams=t._streams||{};t._reverseStreams=t._reverseStreams||{};s.apply(t,[t._streams[e.id]||e]);delete t._reverseStreams[t._streams[e.id]?t._streams[e.id].id:e.id];delete t._streams[e.id]};e.RTCPeerConnection.prototype.addTrack=function(r,a){var n=this;if("closed"===n.signalingState){throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError")}var t=[].slice.call(arguments,1);if(1!==t.length||!t[0].getTracks().find(function(e){return e===r})){throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError")}var i=n.getSenders().find(function(e){return e.track===r});if(i){throw new DOMException("Track already exists.","InvalidAccessError")}n._streams=n._streams||{};n._reverseStreams=n._reverseStreams||{};var o=n._streams[a.id];if(o){o.addTrack(r);Promise.resolve().then(function(){n.dispatchEvent(new Event("negotiationneeded"))})}else{var s=new e.MediaStream([r]);n._streams[a.id]=s;n._reverseStreams[s.id]=a;n.addStream(s)}return n.getSenders().find(function(e){return e.track===r})};function t(e,t){var r=t.sdp;Object.keys(e._reverseStreams||[]).forEach(function(t){var a=e._reverseStreams[t],n=e._streams[a.id];r=r.replace(new RegExp(n.id,"g"),a.id)});return new RTCSessionDescription({type:t.type,sdp:r})}function r(e,t){var r=t.sdp;Object.keys(e._reverseStreams||[]).forEach(function(t){var a=e._reverseStreams[t],n=e._streams[a.id];r=r.replace(new RegExp(a.id,"g"),n.id)});return new RTCSessionDescription({type:t.type,sdp:r})}["createOffer","createAnswer"].forEach(function(r){var a=e.RTCPeerConnection.prototype[r];e.RTCPeerConnection.prototype[r]=function(){var e=this,r=arguments,n=arguments.length&&"function"==typeof arguments[0];if(n){return a.apply(e,[function(a){var n=t(e,a);r[0].apply(null,[n])},function(e){if(r[1]){r[1].apply(null,e)}},arguments[2]])}return a.apply(e,arguments).then(function(r){return t(e,r)})}});var c=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){var e=this;if(!arguments.length||!arguments[0].type){return c.apply(e,arguments)}arguments[0]=r(e,arguments[0]);return c.apply(e,arguments)};var d=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function get(){var e=this,r=d.get.apply(this);if(""===r.type){return r}return t(e,r)}});e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===t.signalingState){throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError")}if(!e._pc){throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError")}var r=e._pc===t;if(!r){throw new DOMException("Sender was not created by this connection.","InvalidAccessError")}t._streams=t._streams||{};var a;Object.keys(t._streams).forEach(function(r){var n=t._streams[r].getTracks().find(function(t){return e.track===t});if(n){a=t._streams[r]}});if(a){if(1===a.getTracks().length){t.removeStream(t._reverseStreams[a.id])}else{a.removeTrack(e.track)}t.dispatchEvent(new Event("negotiationneeded"))}}},shimPeerConnection:function shimPeerConnection(e){var t=n.detectBrowser(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection){e.RTCPeerConnection=function(t,r){i("PeerConnection");if(t&&t.iceTransportPolicy){t.iceTransports=t.iceTransportPolicy}return new e.webkitRTCPeerConnection(t,r)};e.RTCPeerConnection.prototype=e.webkitRTCPeerConnection.prototype;if(e.webkitRTCPeerConnection.generateCertificate){Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function get(){return e.webkitRTCPeerConnection.generateCertificate}})}}var r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,t,a){var n=this,i=arguments;if(0<arguments.length&&"function"==typeof e){return r.apply(this,arguments)}if(0===r.length&&(0===arguments.length||"function"!=typeof arguments[0])){return r.apply(this,[])}var o=function(e){var t={},r=e.result();r.forEach(function(e){var r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){r[t]=e.stat(t)});t[r.id]=r});return t},s=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};if(2<=arguments.length){var c=function(e){i[1](s(o(e)))};return r.apply(this,[c,arguments[0]])}return new Promise(function(e,t){r.apply(n,[function(t){e(s(o(t)))},t])}).then(t,a)};if(51>t.version){["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=arguments,t=this,a=new Promise(function(a,n){r.apply(t,[e[0],a,n])});if(2>e.length){return a}return a.then(function(){e[1].apply(null,[])},function(t){if(3<=e.length){e[2].apply(null,[t])}})}})}if(52>t.version){["createOffer","createAnswer"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this;if(1>arguments.length||1===arguments.length&&"object"===_typeof(arguments[0])){var t=1===arguments.length?arguments[0]:void 0;return new Promise(function(a,n){r.apply(e,[a,n,t])})}return r.apply(this,arguments)}})}["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]);return r.apply(this,arguments)}});var a=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){if(!arguments[0]){if(arguments[1]){arguments[1].apply(null)}return Promise.resolve()}return a.apply(this,arguments)}},fixNegotiationNeeded:function fixNegotiationNeeded(e){n.wrapPeerConnectionEvent(e,"negotiationneeded",function(t){var e=t.target;if("stable"!==e.signalingState){return}return t})},shimGetDisplayMedia:function shimGetDisplayMedia(e,t){if("getDisplayMedia"in e.navigator){return}if("function"!=typeof t){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}navigator.getDisplayMedia=function(e){return t(e).then(function(t){e.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:e.video.frameRate||3}};return navigator.mediaDevices.getUserMedia(e)})}}}},{"../utils.js":14,"./getusermedia":6}],6:[function(e,t){'use strict';var r=e("../utils.js"),a=r.log;t.exports=function(e){var t=r.detectBrowser(e),n=e&&e.navigator,i=function(e){if("object"!==_typeof(e)||e.mandatory||e.optional){return e}var t={};Object.keys(e).forEach(function(a){if("require"===a||"advanced"===a||"mediaSource"===a){return}var n="object"===_typeof(e[a])?e[a]:{ideal:e[a]};if(n.exact!==void 0&&"number"==typeof n.exact){n.min=n.max=n.exact}var r=function(e,t){if(e){return e+t.charAt(0).toUpperCase()+t.slice(1)}return"deviceId"===t?"sourceId":t};if(n.ideal!==void 0){t.optional=t.optional||[];var i={};if("number"==typeof n.ideal){i[r("min",a)]=n.ideal;t.optional.push(i);i={};i[r("max",a)]=n.ideal;t.optional.push(i)}else{i[r("",a)]=n.ideal;t.optional.push(i)}}if(n.exact!==void 0&&"number"!=typeof n.exact){t.mandatory=t.mandatory||{};t.mandatory[r("",a)]=n.exact}else{["min","max"].forEach(function(e){if(n[e]!==void 0){t.mandatory=t.mandatory||{};t.mandatory[r(e,a)]=n[e]}})}});if(e.advanced){t.optional=(t.optional||[]).concat(e.advanced)}return t},o=function(e,r){if(61<=t.version){return r(e)}e=JSON.parse(JSON.stringify(e));if(e&&"object"===_typeof(e.audio)){var o=function(e,t,r){if(t in e&&!(r in e)){e[r]=e[t];delete e[t]}};e=JSON.parse(JSON.stringify(e));o(e.audio,"autoGainControl","googAutoGainControl");o(e.audio,"noiseSuppression","googNoiseSuppression");e.audio=i(e.audio)}if(e&&"object"===_typeof(e.video)){var s=e.video.facingMode;s=s&&("object"===_typeof(s)?s:{ideal:s});var c=66>t.version;if(s&&("user"===s.exact||"environment"===s.exact||"user"===s.ideal||"environment"===s.ideal)&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!c)){delete e.video.facingMode;var p;if("environment"===s.exact||"environment"===s.ideal){p=["back","rear"]}else if("user"===s.exact||"user"===s.ideal){p=["front"]}if(p){return n.mediaDevices.enumerateDevices().then(function(t){t=t.filter(function(e){return"videoinput"===e.kind});var n=t.find(function(e){return p.some(function(t){return-1!==e.label.toLowerCase().indexOf(t)})});if(!n&&t.length&&-1!==p.indexOf("back")){n=t[t.length-1]}if(n){e.video.deviceId=s.exact?{exact:n.deviceId}:{ideal:n.deviceId}}e.video=i(e.video);a("chrome: "+JSON.stringify(e));return r(e)})}}e.video=i(e.video)}a("chrome: "+JSON.stringify(e));return r(e)},s=function(r){if(64<=t.version){return r}return{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[r.name]||r.name,message:r.message,constraint:r.constraint||r.constraintName,toString:function toString(){return this.name+(this.message&&": ")+this.message}}};n.getUserMedia=function getUserMedia_(e,t,r){o(e,function(e){n.webkitGetUserMedia(e,t,function(t){if(r){r(s(t))}})})};var c=function(e){return new Promise(function(t,r){n.getUserMedia(e,t,r)})};if(!n.mediaDevices){n.mediaDevices={getUserMedia:c,enumerateDevices:function enumerateDevices(){return new Promise(function(t){var r={audio:"audioinput",video:"videoinput"};return e.MediaStreamTrack.getSources(function(e){t(e.map(function(e){return{label:e.label,kind:r[e.kind],deviceId:e.id,groupId:""}}))})})},getSupportedConstraints:function getSupportedConstraints(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}}}if(!n.mediaDevices.getUserMedia){n.mediaDevices.getUserMedia=function(e){return c(e)}}else{var d=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return o(e,function(e){return d(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length){t.getTracks().forEach(function(e){e.stop()});throw new DOMException("","NotFoundError")}return t},function(t){return Promise.reject(s(t))})})}}if("undefined"==typeof n.mediaDevices.addEventListener){n.mediaDevices.addEventListener=function(){a("Dummy mediaDevices.addEventListener called.")}}if("undefined"==typeof n.mediaDevices.removeEventListener){n.mediaDevices.removeEventListener=function(){a("Dummy mediaDevices.removeEventListener called.")}}}},{"../utils.js":14}],7:[function(e,t){'use strict';var r=e("sdp"),a=e("./utils");t.exports={shimRTCIceCandidate:function shimRTCIceCandidate(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype){return}var n=t.RTCIceCandidate;t.RTCIceCandidate=function(e){if("object"===_typeof(e)&&e.candidate&&0===e.candidate.indexOf("a=")){e=JSON.parse(JSON.stringify(e));e.candidate=e.candidate.substr(2)}if(e.candidate&&e.candidate.length){var t=new n(e),a=r.parseCandidate(e.candidate),i=Object.assign(t,a);i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}};return i}return new n(e)};t.RTCIceCandidate.prototype=n.prototype;a.wrapPeerConnectionEvent(t,"icecandidate",function(r){if(r.candidate){Object.defineProperty(r,"candidate",{value:new t.RTCIceCandidate(r.candidate),writable:"false"})}return r})},shimCreateObjectURL:function shimCreateObjectURL(e){var t=e&&e.URL;if(!("object"===_typeof(e)&&e.HTMLMediaElement&&"srcObject"in e.HTMLMediaElement.prototype&&t.createObjectURL&&t.revokeObjectURL)){return}var r=t.createObjectURL.bind(t),n=t.revokeObjectURL.bind(t),i=new Map,o=0;t.createObjectURL=function(e){if("getTracks"in e){var t="polyblob:"+ ++o;i.set(t,e);a.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream");return t}return r(e)};t.revokeObjectURL=function(e){n(e);i.delete(e)};var s=Object.getOwnPropertyDescriptor(e.HTMLMediaElement.prototype,"src");Object.defineProperty(e.HTMLMediaElement.prototype,"src",{get:function get(){return s.get.apply(this)},set:function set(e){this.srcObject=i.get(e)||null;return s.set.apply(this,[e])}});var c=e.HTMLMediaElement.prototype.setAttribute;e.HTMLMediaElement.prototype.setAttribute=function(){if(2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()){this.srcObject=i.get(arguments[1])||null}return c.apply(this,arguments)}},shimMaxMessageSize:function shimMaxMessageSize(e){if(e.RTCSctpTransport||!e.RTCPeerConnection){return}var t=a.detectBrowser(e);if(!("sctp"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function get(){return"undefined"==typeof this._sctp?null:this._sctp}})}var n=function(e){var t=r.splitSections(e.sdp);t.shift();return t.some(function(e){var t=r.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})},i=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||2>t.length){return-1}var r=parseInt(t[1],10);return r!==r?-1:r},o=function(e){var r=65536;if("firefox"===t.browser){if(57>t.version){if(-1===e){r=16384}else{r=2147483637}}else if(60>t.version){r=57===t.version?65535:65536}else{r=2147483637}}return r},s=function(e,a){var n=65536;if("firefox"===t.browser&&57===t.version){n=65535}var i=r.matchPrefix(e.sdp,"a=max-message-size:");if(0<i.length){n=parseInt(i[0].substr(19),10)}else if("firefox"===t.browser&&-1!==a){n=2147483637}return n},c=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;e._sctp=null;if(n(arguments[0])){var t=i(arguments[0]),r=o(t),a=s(arguments[0],t),d;if(0===r&&0===a){d=Number.POSITIVE_INFINITY}else if(0===r||0===a){d=Math.max(r,a)}else{d=Math.min(r,a)}var p={};Object.defineProperty(p,"maxMessageSize",{get:function get(){return d}});e._sctp=p}return c.apply(e,arguments)}},shimSendThrowTypeError:function shimSendThrowTypeError(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype)){return}function t(e,t){var r=e.send;e.send=function(){var a=arguments[0],n=a.length||a.size||a.byteLength;if("open"===e.readyState&&t.sctp&&n>t.sctp.maxMessageSize){throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)")}return r.apply(e,arguments)}}var r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=this,a=r.apply(e,arguments);t(a,e);return a};a.wrapPeerConnectionEvent(e,"datachannel",function(r){t(r.channel,r.target);return r})}}},{"./utils":14,sdp:2}],8:[function(e,t){'use strict';var r=e("../utils"),a=e("./filtericeservers"),n=e("rtcpeerconnection-shim");t.exports={shimGetUserMedia:e("./getusermedia"),shimPeerConnection:function shimPeerConnection(e){var t=r.detectBrowser(e);if(e.RTCIceGatherer){if(!e.RTCIceCandidate){e.RTCIceCandidate=function(e){return e}}if(!e.RTCSessionDescription){e.RTCSessionDescription=function(e){return e}}if(15025>t.version){var i=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function set(e){i.set.call(this,e);var t=new Event("enabled");t.enabled=e;this.dispatchEvent(t)}})}}if(e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function get(){if(this._dtmf===void 0){if("audio"===this.track.kind){this._dtmf=new e.RTCDtmfSender(this)}else if("video"===this.track.kind){this._dtmf=null}}return this._dtmf}})}if(e.RTCDtmfSender&&!e.RTCDTMFSender){e.RTCDTMFSender=e.RTCDtmfSender}var o=n(e,t.version);e.RTCPeerConnection=function(e){if(e&&e.iceServers){e.iceServers=a(e.iceServers)}return new o(e)};e.RTCPeerConnection.prototype=o.prototype},shimReplaceTrack:function shimReplaceTrack(e){if(e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)){e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack}}}},{"../utils":14,"./filtericeservers":9,"./getusermedia":10,"rtcpeerconnection-shim":1}],9:[function(e,t){'use strict';var r=e("../utils");t.exports=function(e,t){var a=!1;e=JSON.parse(JSON.stringify(e));return e.filter(function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;if(e.url&&!e.urls){r.deprecated("RTCIceServer.url","RTCIceServer.urls")}var i="string"==typeof n;if(i){n=[n]}n=n.filter(function(e){var r=0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!a;if(r){a=!0;return!0}return 0===e.indexOf("stun:")&&14393<=t&&-1===e.indexOf("?transport=udp")});delete e.url;e.urls=i?n[0]:n;return!!n.length}})}},{"../utils":14}],10:[function(e,t){'use strict';t.exports=function(e){var t=e&&e.navigator,r=function(t){return{name:{PermissionDeniedError:"NotAllowedError"}[t.name]||t.name,message:t.message,constraint:t.constraint,toString:function toString(){return this.name}}},a=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return a(e).catch(function(t){return Promise.reject(r(t))})}}},{}],11:[function(e,t){'use strict';var r=e("../utils");t.exports={shimGetUserMedia:e("./getusermedia"),shimOnTrack:function shimOnTrack(e){if("object"===_typeof(e)&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function get(){return this._ontrack},set:function set(e){if(this._ontrack){this.removeEventListener("track",this._ontrack);this.removeEventListener("addstream",this._ontrackpoly)}this.addEventListener("track",this._ontrack=e);this.addEventListener("addstream",this._ontrackpoly=function(t){t.stream.getTracks().forEach(function(e){var r=new Event("track");r.track=e;r.receiver={track:e};r.transceiver={receiver:r.receiver};r.streams=[t.stream];this.dispatchEvent(r)}.bind(this))}.bind(this))},enumerable:!0,configurable:!0})}if("object"===_typeof(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)){Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function get(){return{receiver:this.receiver}}})}},shimSourceObject:function shimSourceObject(e){if("object"===_typeof(e)){if(e.HTMLMediaElement&&!("srcObject"in e.HTMLMediaElement.prototype)){Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function get(){return this.mozSrcObject},set:function set(e){this.mozSrcObject=e}})}}},shimPeerConnection:function shimPeerConnection(e){var t=r.detectBrowser(e);if("object"!==_typeof(e)||!(e.RTCPeerConnection||e.mozRTCPeerConnection)){return}if(!e.RTCPeerConnection){e.RTCPeerConnection=function(r,a){if(38>t.version){if(r&&r.iceServers){for(var n=[],o=0,s;o<r.iceServers.length;o++){s=r.iceServers[o];if(s.hasOwnProperty("urls")){for(var c=0,d;c<s.urls.length;c++){d={url:s.urls[c]};if(0===s.urls[c].indexOf("turn")){d.username=s.username;d.credential=s.credential}n.push(d)}}else{n.push(r.iceServers[o])}}r.iceServers=n}}return new e.mozRTCPeerConnection(r,a)};e.RTCPeerConnection.prototype=e.mozRTCPeerConnection.prototype;if(e.mozRTCPeerConnection.generateCertificate){Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function get(){return e.mozRTCPeerConnection.generateCertificate}})}e.RTCSessionDescription=e.mozRTCSessionDescription;e.RTCIceCandidate=e.mozRTCIceCandidate}["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]);return r.apply(this,arguments)}});var a=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){if(!arguments[0]){if(arguments[1]){arguments[1].apply(null)}return Promise.resolve()}return a.apply(this,arguments)};var n=function(e){var t=new Map;Object.keys(e).forEach(function(r){t.set(r,e[r]);t[r]=e[r]});return t},o={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,r,a){return s.apply(this,[e||null]).then(function(a){if(48>t.version){a=n(a)}if(53>t.version&&!r){try{a.forEach(function(e){e.type=o[e.type]||e.type})}catch(t){if("TypeError"!==t.name){throw t}a.forEach(function(e,t){a.set(t,Object.assign({},e,{type:o[e.type]||e.type}))})}}return a}).then(r,a)}},shimSenderGetStats:function shimSenderGetStats(e){if(!("object"===_typeof(e)&&e.RTCPeerConnection&&e.RTCRtpSender)){return}if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype){return}var t=e.RTCPeerConnection.prototype.getSenders;if(t){e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(e,[]);r.forEach(function(t){t._pc=e});return r}}var r=e.RTCPeerConnection.prototype.addTrack;if(r){e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);e._pc=this;return e}}e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}},shimReceiverGetStats:function shimReceiverGetStats(e){if(!("object"===_typeof(e)&&e.RTCPeerConnection&&e.RTCRtpSender)){return}if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype){return}var t=e.RTCPeerConnection.prototype.getReceivers;if(t){e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,r=t.apply(e,[]);r.forEach(function(t){t._pc=e});return r}}r.wrapPeerConnectionEvent(e,"track",function(t){t.receiver._pc=t.srcElement;return t});e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}},shimRemoveStream:function shimRemoveStream(e){if(!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype){return}e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;r.deprecated("removeStream","removeTrack");this.getSenders().forEach(function(r){if(r.track&&-1!==e.getTracks().indexOf(r.track)){t.removeTrack(r)}})}},shimRTCDataChannel:function shimRTCDataChannel(e){if(e.DataChannel&&!e.RTCDataChannel){e.RTCDataChannel=e.DataChannel}},shimGetDisplayMedia:function shimGetDisplayMedia(e,t){if("getDisplayMedia"in e.navigator){return}navigator.getDisplayMedia=function(e){if(!(e&&e.video)){var r=new DOMException("getDisplayMedia without video constraints is undefined");r.name="NotFoundError";r.code=8;return Promise.reject(r)}if(!0===e.video){e.video={mediaSource:t}}else{e.video.mediaSource=t}return navigator.mediaDevices.getUserMedia(e)}}}},{"../utils":14,"./getusermedia":12}],12:[function(e,t){'use strict';var r=e("../utils"),a=r.log;t.exports=function(e){var t=r.detectBrowser(e),n=e&&e.navigator,i=e&&e.MediaStreamTrack,o=function(t){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[t.name]||t.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[t.message]||t.message,constraint:t.constraint,toString:function toString(){return this.name+(this.message&&": ")+this.message}}},s=function(e,r,i){var s=function(e){if("object"!==_typeof(e)||e.require){return e}var t=[];Object.keys(e).forEach(function(a){if("require"===a||"advanced"===a||"mediaSource"===a){return}var n=e[a]="object"===_typeof(e[a])?e[a]:{ideal:e[a]};if(n.min!==void 0||n.max!==void 0||n.exact!==void 0){t.push(a)}if(n.exact!==void 0){if("number"==typeof n.exact){n.min=n.max=n.exact}else{e[a]=n.exact}delete n.exact}if(n.ideal!==void 0){e.advanced=e.advanced||[];var r={};if("number"==typeof n.ideal){r[a]={min:n.ideal,max:n.ideal}}else{r[a]=n.ideal}e.advanced.push(r);delete n.ideal;if(!Object.keys(n).length){delete e[a]}}});if(t.length){e.require=t}return e};e=JSON.parse(JSON.stringify(e));if(38>t.version){a("spec: "+JSON.stringify(e));if(e.audio){e.audio=s(e.audio)}if(e.video){e.video=s(e.video)}a("ff37: "+JSON.stringify(e))}return n.mozGetUserMedia(e,r,function(t){i(o(t))})},c=function(e){return new Promise(function(t,r){s(e,t,r)})};if(!n.mediaDevices){n.mediaDevices={getUserMedia:c,addEventListener:function addEventListener(){},removeEventListener:function removeEventListener(){}}}n.mediaDevices.enumerateDevices=n.mediaDevices.enumerateDevices||function(){return new Promise(function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})};if(41>t.version){var d=n.mediaDevices.enumerateDevices.bind(n.mediaDevices);n.mediaDevices.enumerateDevices=function(){return d().then(void 0,function(t){if("NotFoundError"===t.name){return[]}throw t})}}if(49>t.version){var p=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return p(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length){t.getTracks().forEach(function(e){e.stop()});throw new DOMException("The object can not be found here.","NotFoundError")}return t},function(t){return Promise.reject(o(t))})}}if(!(55<t.version&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var m=function(e,t,r){if(t in e&&!(r in e)){e[r]=e[t];delete e[t]}},l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){if("object"===_typeof(e)&&"object"===_typeof(e.audio)){e=JSON.parse(JSON.stringify(e));m(e.audio,"autoGainControl","mozAutoGainControl");m(e.audio,"noiseSuppression","mozNoiseSuppression")}return l(e)};if(i&&i.prototype.getSettings){var g=i.prototype.getSettings;i.prototype.getSettings=function(){var e=g.apply(this,arguments);m(e,"mozAutoGainControl","autoGainControl");m(e,"mozNoiseSuppression","noiseSuppression");return e}}if(i&&i.prototype.applyConstraints){var h=i.prototype.applyConstraints;i.prototype.applyConstraints=function(e){if("audio"===this.kind&&"object"===_typeof(e)){e=JSON.parse(JSON.stringify(e));m(e,"autoGainControl","mozAutoGainControl");m(e,"noiseSuppression","mozNoiseSuppression")}return h.apply(this,[e])}}}n.getUserMedia=function(e,a,i){if(44>t.version){return s(e,a,i)}r.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia");n.mediaDevices.getUserMedia(e).then(a,i)}}},{"../utils":14}],13:[function(e,t){'use strict';var r=e("../utils");t.exports={shimLocalStreamsAPI:function shimLocalStreamsAPI(e){if("object"!==_typeof(e)||!e.RTCPeerConnection){return}if(!("getLocalStreams"in e.RTCPeerConnection.prototype)){e.RTCPeerConnection.prototype.getLocalStreams=function(){if(!this._localStreams){this._localStreams=[]}return this._localStreams}}if(!("getStreamById"in e.RTCPeerConnection.prototype)){e.RTCPeerConnection.prototype.getStreamById=function(e){var t=null;if(this._localStreams){this._localStreams.forEach(function(r){if(r.id===e){t=r}})}if(this._remoteStreams){this._remoteStreams.forEach(function(r){if(r.id===e){t=r}})}return t}}if(!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){if(!this._localStreams){this._localStreams=[]}if(-1===this._localStreams.indexOf(e)){this._localStreams.push(e)}var r=this;e.getTracks().forEach(function(a){t.call(r,a,e)})};e.RTCPeerConnection.prototype.addTrack=function(e,r){if(r){if(!this._localStreams){this._localStreams=[r]}else if(-1===this._localStreams.indexOf(r)){this._localStreams.push(r)}}return t.call(this,e,r)}}if(!("removeStream"in e.RTCPeerConnection.prototype)){e.RTCPeerConnection.prototype.removeStream=function(e){if(!this._localStreams){this._localStreams=[]}var t=this._localStreams.indexOf(e);if(-1===t){return}this._localStreams.splice(t,1);var r=this,a=e.getTracks();this.getSenders().forEach(function(e){if(-1!==a.indexOf(e.track)){r.removeTrack(e)}})}}},shimRemoteStreamsAPI:function shimRemoteStreamsAPI(e){if("object"!==_typeof(e)||!e.RTCPeerConnection){return}if(!("getRemoteStreams"in e.RTCPeerConnection.prototype)){e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}}if(!("onaddstream"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function get(){return this._onaddstream},set:function set(e){if(this._onaddstream){this.removeEventListener("addstream",this._onaddstream)}this.addEventListener("addstream",this._onaddstream=e)}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;if(!this._onaddstreampoly){this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(function(t){if(!e._remoteStreams){e._remoteStreams=[]}if(0<=e._remoteStreams.indexOf(t)){return}e._remoteStreams.push(t);var r=new Event("addstream");r.stream=t;e.dispatchEvent(r)})})}return t.apply(e,arguments)}}},shimCallbacksAPI:function shimCallbacksAPI(e){if("object"!==_typeof(e)||!e.RTCPeerConnection){return}var t=e.RTCPeerConnection.prototype,r=t.createOffer,a=t.createAnswer,n=t.setLocalDescription,i=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(e,t){var a=2<=arguments.length?arguments[2]:arguments[0],n=r.apply(this,[a]);if(!t){return n}n.then(e,t);return Promise.resolve()};t.createAnswer=function(e,t){var r=2<=arguments.length?arguments[2]:arguments[0],n=a.apply(this,[r]);if(!t){return n}n.then(e,t);return Promise.resolve()};var s=function(e,t,r){var a=n.apply(this,[e]);if(!r){return a}a.then(t,r);return Promise.resolve()};t.setLocalDescription=s;s=function(e,t,r){var a=i.apply(this,[e]);if(!r){return a}a.then(t,r);return Promise.resolve()};t.setRemoteDescription=s;s=function(e,t,r){var a=o.apply(this,[e]);if(!r){return a}a.then(t,r);return Promise.resolve()};t.addIceCandidate=s},shimGetUserMedia:function shimGetUserMedia(e){var t=e&&e.navigator;if(!t.getUserMedia){if(t.webkitGetUserMedia){t.getUserMedia=t.webkitGetUserMedia.bind(t)}else if(t.mediaDevices&&t.mediaDevices.getUserMedia){t.getUserMedia=function(e,r,a){t.mediaDevices.getUserMedia(e).then(r,a)}.bind(t)}}},shimRTCIceServerUrls:function shimRTCIceServerUrls(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,a){if(e&&e.iceServers){for(var n=[],o=0,s;o<e.iceServers.length;o++){s=e.iceServers[o];if(!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")){r.deprecated("RTCIceServer.url","RTCIceServer.urls");s=JSON.parse(JSON.stringify(s));s.urls=s.url;delete s.url;n.push(s)}else{n.push(e.iceServers[o])}}e.iceServers=n}return new t(e,a)};e.RTCPeerConnection.prototype=t.prototype;if("generateCertificate"in e.RTCPeerConnection){Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function get(){return t.generateCertificate}})}},shimTrackEventTransceiver:function shimTrackEventTransceiver(e){if("object"===_typeof(e)&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver){Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function get(){return{receiver:this.receiver}}})}},shimCreateOfferLegacy:function shimCreateOfferLegacy(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){var r=this;if(e){if("undefined"!=typeof e.offerToReceiveAudio){e.offerToReceiveAudio=!!e.offerToReceiveAudio}var a=r.getTransceivers().find(function(e){return e.sender.track&&"audio"===e.sender.track.kind});if(!1===e.offerToReceiveAudio&&a){if("sendrecv"===a.direction){if(a.setDirection){a.setDirection("sendonly")}else{a.direction="sendonly"}}else if("recvonly"===a.direction){if(a.setDirection){a.setDirection("inactive")}else{a.direction="inactive"}}}else if(!0===e.offerToReceiveAudio&&!a){r.addTransceiver("audio")}if("undefined"!=typeof e.offerToReceiveVideo){e.offerToReceiveVideo=!!e.offerToReceiveVideo}var n=r.getTransceivers().find(function(e){return e.sender.track&&"video"===e.sender.track.kind});if(!1===e.offerToReceiveVideo&&n){if("sendrecv"===n.direction){n.setDirection("sendonly")}else if("recvonly"===n.direction){n.setDirection("inactive")}}else if(!0===e.offerToReceiveVideo&&!n){r.addTransceiver("video")}}return t.apply(r,arguments)}}}},{"../utils":14}],14:[function(e,t){'use strict';var a=!0,n=!0;function r(e,t,r){var a=e.match(t);return a&&a.length>=r&&parseInt(a[r],10)}t.exports={extractVersion:r,wrapPeerConnectionEvent:function(e,t,r){if(!e.RTCPeerConnection){return}var a=e.RTCPeerConnection.prototype,n=a.addEventListener;a.addEventListener=function(e,a){if(e!==t){return n.apply(this,arguments)}var i=function(t){var e=r(t);if(e){a(e)}};this._eventMap=this._eventMap||{};this._eventMap[a]=i;return n.apply(this,[e,i])};var i=a.removeEventListener;a.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[r]){return i.apply(this,arguments)}var a=this._eventMap[r];delete this._eventMap[r];return i.apply(this,[e,a])};Object.defineProperty(a,"on"+t,{get:function get(){return this["_on"+t]},set:function set(e){if(this["_on"+t]){this.removeEventListener(t,this["_on"+t]);delete this["_on"+t]}if(e){this.addEventListener(t,this["_on"+t]=e)}},enumerable:!0,configurable:!0})},disableLog:function disableLog(e){if("boolean"!=typeof e){return new Error("Argument type: "+_typeof(e)+". Please use a boolean.")}a=e;return e?"adapter.js logging disabled":"adapter.js logging enabled"},disableWarnings:function disableWarnings(e){if("boolean"!=typeof e){return new Error("Argument type: "+_typeof(e)+". Please use a boolean.")}n=!e;return"adapter.js deprecation warnings "+(e?"disabled":"enabled")},log:function log(){if("object"===("undefined"==typeof window?"undefined":_typeof(window))){if(a){return}if("undefined"!=typeof console&&"function"==typeof console.log){console.log.apply(console,arguments)}}},deprecated:function deprecated(e,t){if(!n){return}console.warn(e+" is deprecated, please use "+t+" instead.")},detectBrowser:function detectBrowser(e){var t=e&&e.navigator,a={};a.browser=null;a.version=null;if("undefined"==typeof e||!e.navigator){a.browser="Not a browser.";return a}if(t.mozGetUserMedia){a.browser="firefox";a.version=r(t.userAgent,/Firefox\/(\d+)\./,1)}else if(t.webkitGetUserMedia){a.browser="chrome";a.version=r(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2)}else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/)){a.browser="edge";a.version=r(t.userAgent,/Edge\/(\d+).(\d+)$/,2)}else if(e.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./)){a.browser="safari";a.version=r(t.userAgent,/AppleWebKit\/(\d+)\./,1)}else{a.browser="Not a supported browser.";return a}return a}}},{}]},{},[3])(3)});
define ("core/modal_save_cancel",["jquery","core/notification","core/custom_interaction_events","core/modal","core/modal_events"],function(a,b,c,d,f){var g={SAVE_BUTTON:"[data-action=\"save\"]",CANCEL_BUTTON:"[data-action=\"cancel\"]"},h=function(a){d.call(this,a);if(!this.getFooter().find(g.SAVE_BUTTON).length){b.exception({message:"No save button found"})}if(!this.getFooter().find(g.CANCEL_BUTTON).length){b.exception({message:"No cancel button found"})}};h.prototype=Object.create(d.prototype);h.prototype.constructor=h;h.prototype.setFooter=function(){b.exception({message:"Can not change the footer of a save cancel modal"})};h.prototype.registerEventListeners=function(){d.prototype.registerEventListeners.call(this);this.getModal().on(c.events.activate,g.SAVE_BUTTON,function(b,c){var d=a.Event(f.save);this.getRoot().trigger(d,this);if(!d.isDefaultPrevented()){this.hide();c.originalEvent.preventDefault()}}.bind(this));this.getModal().on(c.events.activate,g.CANCEL_BUTTON,function(b,c){var d=a.Event(f.cancel);this.getRoot().trigger(d,this);if(!d.isDefaultPrevented()){this.hide();c.originalEvent.preventDefault()}}.bind(this))};h.prototype.setSaveButtonText=function(a){var b=this.getFooter().find(g.SAVE_BUTTON);this.asyncSet(a,b.text.bind(b))};return h});
define ("core/chart_output_base",["jquery"],function(a){function b(b,c){this._node=a(b);this._chart=c}b.prototype.update=function(){throw new Error("Not supported.")};return b});
function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}(function(a,b){"use strict";if("function"==typeof define&&define.amd){define ("core/loglevel",b)}else if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports){module.exports=b()}else{a.log=b()}})(this,function(){"use strict";var g=function(){},h="undefined",j=["trace","debug","info","warn","error"];function a(a,b){var c=a[b];if("function"==typeof c.bind){return c.bind(a)}else{try{return Function.prototype.bind.call(c,a)}catch(b){return function(){return Function.prototype.apply.apply(c,[a,arguments])}}}}function b(b){if("debug"===b){b="log"}if(("undefined"==typeof console?"undefined":_typeof(console))===h){return!1}else if(console[b]!==void 0){return a(console,b)}else if(console.log!==void 0){return a(console,"log")}else{return g}}function c(a,b){for(var c=0,d;c<j.length;c++){d=j[c];this[d]=c<a?g:this.methodFactory(d,a,b)}this.log=this.debug}function d(a,b,d){return function(){if(("undefined"==typeof console?"undefined":_typeof(console))!==h){c.call(this,b,d);this[a].apply(this,arguments)}}}function e(a){return b(a)||d.apply(this,arguments)}function f(a,b,d){var i=this,k,l="loglevel";if(a){l+=":"+a}function f(a){var b=(j[a]||"silent").toUpperCase();if(("undefined"==typeof window?"undefined":_typeof(window))===h)return;try{window.localStorage[l]=b;return}catch(a){}try{window.document.cookie=encodeURIComponent(l)+"="+b+";"}catch(a){}}function g(){var a;if(("undefined"==typeof window?"undefined":_typeof(window))===h)return;try{a=window.localStorage[l]}catch(a){}if(_typeof(a)===h){try{var b=window.document.cookie,c=b.indexOf(encodeURIComponent(l)+"=");if(-1!==c){a=/^([^;]+)/.exec(b.slice(c))[1]}}catch(a){}}if(i.levels[a]===void 0){a=void 0}return a}i.name=a;i.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5};i.methodFactory=d||e;i.getLevel=function(){return k};i.setLevel=function(b,d){if("string"==typeof b&&i.levels[b.toUpperCase()]!==void 0){b=i.levels[b.toUpperCase()]}if("number"==typeof b&&0<=b&&b<=i.levels.SILENT){k=b;if(!1!==d){f(b)}c.call(i,b,a);if(("undefined"==typeof console?"undefined":_typeof(console))===h&&b<i.levels.SILENT){return"No console available for logging"}}else{throw"log.setLevel() called with invalid level: "+b}};i.setDefaultLevel=function(a){if(!g()){i.setLevel(a,!1)}};i.enableAll=function(a){i.setLevel(i.levels.TRACE,a)};i.disableAll=function(a){i.setLevel(i.levels.SILENT,a)};var m=g();if(null==m){m=null==b?"WARN":b}i.setLevel(m,!1)}var k=new f,l={};k.getLogger=function(a){if("string"!=typeof a||""===a){throw new TypeError("You must supply a name when creating a logger.")}var b=l[a];if(!b){b=l[a]=new f(a,k.getLevel(),k.methodFactory)}return b};var m=("undefined"==typeof window?"undefined":_typeof(window))!==h?window.log:void 0;k.noConflict=function(){if(("undefined"==typeof window?"undefined":_typeof(window))!==h&&window.log===k){window.log=m}return k};k.getLoggers=function(){return l};return k});
define ("core_backup/async_backup",["jquery","core/ajax","core/str","core/notification","core/templates"],function(a,b,c,d,e){var n=900,o=1e3,p={},q=15e3,r=15e3,s=1.5,t,u,v,w,x,y,z=2e3;function f(b,c){var d=Math.round(c)+"%",e=a("#"+b+"_bar"),f=c.toFixed(2)+"%";e.attr("aria-valuenow",d);e.css("width",d);e.text(f)}function g(a,b,c){clearInterval(a);return setInterval(b,c)}function h(c){var f=a("#"+c+"_bar").parent().parent(),g=f.parent(),h=f.siblings(),i=h[1],j=a(i).text(),k=h[0],l=a(k).text();b.call([{methodname:"core_backup_get_async_backup_links_backup",args:{filename:l,contextid:u}}])[0].done(function(a){var b={filename:l,time:j,size:a.filesize,fileurl:a.fileurl,restoreurl:a.restoreurl};e.render("core/async_backup_progress_row",b).then(function(a,b){e.replaceNodeContents(g,a,b)}).fail(function(){d.exception(new Error("Failed to load table row"))})})}function i(c){var f=a("#"+c+"_bar").parent().parent(),g=f.parent(),h=f.siblings(),i=h[0],j=h[1],k=a(j).text();b.call([{methodname:"core_backup_get_async_backup_links_restore",args:{backupid:c,contextid:u}}])[0].done(function(b){var c=a(i).text(),f={resourcename:c,restoreurl:b.restoreurl,time:k};e.render("core/async_restore_progress_row",f).then(function(a,b){e.replaceNodeContents(g,a,b)}).fail(function(){d.exception(new Error("Failed to load table row"))})})}function j(e){var g=100*e.progress,h=a("#"+t+"_bar"),i=a("#"+t+"_status"),j=a("#"+t+"_detail"),k=a("#"+t+"_button"),l;if(e.status==800){h.addClass("bg-success");f(t,g);var m="async"+w+"processing";c.get_string(m,"backup").then(function(a){i.text(a);return a}).catch(function(){d.exception(new Error("Failed to load string: backup "+m))})}else if(e.status==n){h.addClass("bg-danger");h.removeClass("bg-success");f(t,100);var p="async"+w+"error",q="async"+w+"errordetail";l=[{key:p,component:"backup"},{key:q,component:"backup"}];c.get_strings(l).then(function(a){i.text(a[0]);j.text(a[1]);return a}).catch(function(){d.exception(new Error("Failed to load string"))});a(".backup_progress").children("span").removeClass("backup_stage_current");a(".backup_progress").children("span").last().addClass("backup_stage_current");clearInterval(x)}else if(e.status==o){h.addClass("bg-success");f(t,100);var r="async"+w+"complete";c.get_string(r,"backup").then(function(a){i.text(a);return a}).catch(function(){d.exception(new Error("Failed to load string: backup "+r))});if("restore"==w){b.call([{methodname:"core_backup_get_async_backup_links_restore",args:{backupid:t,contextid:u}}])[0].done(function(a){var b="async"+w+"completedetail",e="async"+w+"completebutton",f=[{key:b,component:"backup",param:a.restoreurl},{key:e,component:"backup"}];c.get_strings(f).then(function(b){j.html(b[0]);k.text(b[1]);k.attr("href",a.restoreurl);return b}).catch(function(){d.exception(new Error("Failed to load string"))})})}else{var s="async"+w+"completedetail",y="async"+w+"completebutton";l=[{key:s,component:"backup",param:v},{key:y,component:"backup"}];c.get_strings(l).then(function(a){j.html(a[0]);k.text(a[1]);k.attr("href",v);return a}).catch(function(){d.exception(new Error("Failed to load string"))})}a(".backup_progress").children("span").removeClass("backup_stage_current");a(".backup_progress").children("span").last().addClass("backup_stage_current");clearInterval(x)}}function k(b){b.forEach(function(b){var c=100*b.progress,d=b.backupid,e=a("#"+d+"_bar"),g=b.operation;if(b.status==800){e.addClass("bg-success");f(d,c)}else if(b.status==n){e.addClass("bg-danger");e.addClass("complete");a("#"+d+"_bar").removeClass("bg-success");f(d,100)}else if(b.status==o){e.addClass("bg-success");e.addClass("complete");f(d,100);if("backup"==g){h(d)}else{i(d)}}})}function l(){b.call([{methodname:"core_backup_get_async_backup_progress",args:{backupids:[t],contextid:u}}],!0,!0,!1,z)[0].done(function(a){j(a[0]);r=q;x=g(x,l,q)}).fail(function(){r=r*s;x=g(x,l,r)})}function m(){var c=[],d=a(".progress").find(".progress-bar").not(".complete");d.each(function(){c.push(this.id.substring(0,32))});if(0<c.length){b.call([{methodname:"core_backup_get_async_backup_progress",args:{backupids:c,contextid:u}}],!0,!0,!1,z)[0].done(function(a){k(a);r=q;y=g(y,m,q)}).fail(function(){r=r*s;y=g(y,m,r)})}else{clearInterval(y)}}p.asyncBackupAllStatus=function(a){u=a;y=setInterval(m,r)};p.asyncBackupStatus=function(b,c,d,e){t=b;u=c;v=d;if("backup"==e){w="backup"}else{w="restore"}a(".backup_progress").children("a").removeAttr("href");x=setInterval(l,r)};return p});
define ("core_calendar/calendar_filter",["jquery","core_calendar/selectors","core_calendar/events","core/str","core/templates"],function(a,b,c,d,e){var f=function(d){d.on("click",b.eventFilterItem,function(b){var c=a(b.currentTarget);g(c);b.preventDefault()});a("body").on(c.viewUpdated,function(){var c=d.find(b.eventFilterItem);c.each(function(b,c){c=a(c);if(c.data("eventtype-hidden")){var d=i(c);h(d)}})})},g=function(a){var b=i(a);b.hidden=!b.hidden;return d.get_string("eventtype"+b.eventtype,"calendar").then(function(a){b.name=a;b.icon=!0;b.key="i/"+b.eventtype+"event";b.component="core";return b}).then(function(a){return e.render("core_calendar/event_filter_key",a)}).then(function(b,c){return e.replaceNode(a,b,c)}).then(function(){h(b)})},h=function(b){M.util.js_pending("month-mini-filterChanged");a("body").trigger(c.filterChanged,{type:b.eventtype,hidden:b.hidden});M.util.js_complete("month-mini-filterChanged")},i=function(a){return{eventtype:a.data("eventtype"),hidden:a.data("eventtype-hidden")}};return{init:function init(b){b=a(b);f(b)}}});
define ("core_calendar/repository",["jquery","core/ajax"],function(a,b){return{getEventById:function getEventById(a){return b.call([{methodname:"core_calendar_get_calendar_event_by_id",args:{eventid:a}}])[0]},deleteEvent:function deleteEvent(a,c){if("undefined"==typeof c){c=!1}var d={methodname:"core_calendar_delete_calendar_events",args:{events:[{eventid:a,repeat:c}]}};return b.call([d])[0]},updateEventStartDay:function updateEventStartDay(a,c){return b.call([{methodname:"core_calendar_update_event_start_day",args:{eventid:a,daytimestamp:c}}])[0]},submitCreateUpdateForm:function submitCreateUpdateForm(a){return b.call([{methodname:"core_calendar_submit_create_update_form",args:{formdata:a}}])[0]},getCalendarMonthData:function getCalendarMonthData(a,c,d,e,f,g,h){h=h||1;var i={methodname:"core_calendar_get_calendar_monthly_view",args:{year:a,month:c,courseid:d,categoryid:e,includenavigation:f,mini:g,day:h}};return b.call([i])[0]},getCalendarDayData:function getCalendarDayData(a,c,d,e,f){return b.call([{methodname:"core_calendar_get_calendar_day_view",args:{year:a,month:c,day:d,courseid:e,categoryid:f}}])[0]},getCalendarUpcomingData:function getCalendarUpcomingData(a,c){return b.call([{methodname:"core_calendar_get_calendar_upcoming_view",args:{courseid:a,categoryid:c}}])[0]},getCourseGroupsData:function getCourseGroupsData(a){return b.call([{methodname:"core_group_get_course_groups",args:{courseid:a}}])[0]}}});
define ("core_calendar/calendar",["jquery","core/ajax","core/str","core/templates","core/notification","core/custom_interaction_events","core/modal_events","core/modal_factory","core_calendar/modal_event_form","core_calendar/summary_modal","core_calendar/repository","core_calendar/events","core_calendar/view_manager","core_calendar/crud","core_calendar/selectors"],function(a,b,c,d,f,g,h,i,j,k,l,m,n,o,p){var q={ROOT:"[data-region='calendar']",DAY:"[data-region='day']",NEW_EVENT_BUTTON:"[data-action='new-event-button']",DAY_CONTENT:"[data-region='day-content']",LOADING_ICON:".loading-icon",VIEW_DAY_LINK:"[data-action='view-day-link']",CALENDAR_MONTH_WRAPPER:".calendarwrapper",TODAY:".today"},r=function(b,c,e,g){var h=null,i=g.attr("data-day-timestamp");if(e){h=e.attr("data-day-timestamp")}if(!e||h!=i){d.render("core/loading",{}).then(function(a,b){g.find(q.DAY_CONTENT).addClass("hidden");d.appendNodeContents(g,a,b);if(e){e.find(q.DAY_CONTENT).addClass("hidden");d.appendNodeContents(e,a,b)}}).then(function(){return l.updateEventStartDay(c,i)}).then(function(){a("body").trigger(m.eventMoved,[c,e,g])}).always(function(){var a=g.find(q.LOADING_ICON);g.find(q.DAY_CONTENT).removeClass("hidden");d.replaceNode(a,"","");if(e){var b=e.find(q.LOADING_ICON);e.find(q.DAY_CONTENT).removeClass("hidden");d.replaceNode(b,"","")}}).fail(f.exception)}},s=function(b,c){var d=a("body");d.on(m.created,function(){n.reloadCurrentMonth(b)});d.on(m.deleted,function(){n.reloadCurrentMonth(b)});d.on(m.updated,function(){n.reloadCurrentMonth(b)});d.on(m.editActionEvent,function(a,b){window.location.assign(b)});d.on(m.moveEvent,r);d.on(m.eventMoved,function(){n.reloadCurrentMonth(b)});o.registerEditListeners(b,c)},t=function(b){b.on("click",q.VIEW_DAY_LINK,function(c){var d=a(c.target),e=d.data("year"),g=d.data("month"),h=d.data("day"),i=d.data("courseid"),j=d.data("categoryid");n.refreshDayContent(b,e,g,h,i,j,b,"core_calendar/calendar_day").then(function(){c.preventDefault();var a="?view=day&time="+d.data("timestamp");return window.history.pushState({},"",a)}).fail(f.exception)});b.on("change",p.elements.courseSelector,function(){var c=a(this),d=c.val();n.reloadCurrentMonth(b,d,null).then(function(){return b.find(p.elements.courseSelector).val(d)}).fail(f.exception)});var c=o.registerEventFormModal(b),d=a(q.CALENDAR_MONTH_WRAPPER).data("context-id");s(b,c);if(d){b.on("click",q.DAY,function(b){var d=a(b.target);if(!d.is(q.VIEW_DAY_LINK)){var e=a(this).attr("data-new-event-timestamp");c.then(function(a){var b=d.closest(p.wrapper);a.setCourseId(b.data("courseid"));var c=b.data("categoryid");if("undefined"!=typeof c){a.setCategoryId(c)}a.setContextId(b.data("contextId"));a.setStartTime(e);a.show()}).fail(f.exception);b.preventDefault()}})}};return{init:function init(b){b=a(b);n.init(b);t(b)}}});
define ("core_calendar/summary_modal",["jquery","core/str","core/notification","core/custom_interaction_events","core/modal","core/modal_registry","core/modal_factory","core/modal_events","core_calendar/repository","core_calendar/events","core_calendar/crud"],function(a,b,c,d,e,f,g,h,i,j,k){var l=!1,m={ROOT:"[data-region='summary-modal-container']",EDIT_BUTTON:"[data-action=\"edit\"]",DELETE_BUTTON:"[data-action=\"delete\"]"},n=function(a){e.call(this,a)};n.TYPE="core_calendar-event_summary";n.prototype=Object.create(e.prototype);n.prototype.constructor=n;n.prototype.getEditButton=function(){if("undefined"==typeof this.editButton){this.editButton=this.getFooter().find(m.EDIT_BUTTON)}return this.editButton};n.prototype.getDeleteButton=function(){if("undefined"==typeof this.deleteButton){this.deleteButton=this.getFooter().find(m.DELETE_BUTTON)}return this.deleteButton};n.prototype.getEventId=function(){return this.getBody().find(m.ROOT).attr("data-event-id")};n.prototype.getEventTitle=function(){return this.getBody().find(m.ROOT).attr("data-event-title")};n.prototype.getEventCount=function(){return this.getBody().find(m.ROOT).attr("data-event-count")};n.prototype.getEditUrl=function(){return this.getBody().find(m.ROOT).attr("data-edit-url")};n.prototype.isActionEvent=function(){return"true"==this.getBody().find(m.ROOT).attr("data-action-event")};n.prototype.registerEventListeners=function(){e.prototype.registerEventListeners.call(this);this.getRoot().on(h.bodyRendered,function(){this.getModal().data({eventTitle:this.getEventTitle(),eventId:this.getEventId(),eventCount:this.getEventCount()}).attr("data-type","event");k.registerRemove(this.getModal())}.bind(this));a("body").on(j.deleted,function(){this.hide()}.bind(this));d.define(this.getEditButton(),[d.events.activate]);this.getEditButton().on(d.events.activate,function(b,c){if(this.isActionEvent()){a("body").trigger(j.editActionEvent,[this.getEditUrl()])}else{a("body").trigger(j.editEvent,[this.getEventId()])}this.hide();b.preventDefault();b.stopPropagation();c.originalEvent.preventDefault();c.originalEvent.stopPropagation()}.bind(this))};if(!l){f.register(n.TYPE,n,"core_calendar/event_summary_modal");l=!0}return n});
define ("core_calendar/calendar_threemonth",["jquery","core/notification","core_calendar/selectors","core_calendar/events","core/templates","core_calendar/view_manager"],function(a,b,c,d,e,f){var g=function(g){var h=a("body");h.on([d.monthChanged,d.dayChanged].join(" "),function(a,c,d,e,f){g.queue(function(g){return i(a,c,d,e,f).then(function(){return g()}).fail(b.exception)})});var i=function(b,d,e,h,i){var j=g.find("[data-year=\""+d+"\"][data-month=\""+e+"\"]"),k=j.closest(c.calendarPeriods.month),l=g.find(c.calendarPeriods.month),m=a(l[0]),n=a(l[2]),o=a("<span>");o.attr("data-template","core_calendar/threemonth_month");o.attr("data-includenavigation",!1);o.attr("data-mini",!0);var p=a("<div>");p.hide();p.append(o);var q,r,s;if(k.is(m)){p.insertBefore(m);q=m.data("previousYear");r=m.data("previousMonth");s=n}else if(k.is(n)){p.insertAfter(n);q=n.data("nextYear");r=n.data("nextMonth");s=m}else{return a.Deferred().resolve()}return f.refreshMonthContent(o,q,r,h,i,o).then(function(){var b=a.Deferred(),c=a.Deferred();s.slideUp("fast",function(){a(this).remove();b.resolve()});p.slideDown("fast",function(){c.resolve()});return a.when(b,c)})};g.on("click",c.links.miniDayLink,function(b){var d=a(b.target),e=d.data("year"),g=d.data("month"),h=d.text(),i=d.data("courseid"),j=d.data("categoryid"),k=a("body").find(c.calendarMain);f.refreshDayContent(k,e,g,h,i,j,k,"core_calendar/calendar_day");b.preventDefault();window.history.pushState({},"","?view=day")})};return{init:function init(b){b=a(b);g(b)}}});
define ("core_calendar/calendar_view",["jquery","core/str","core/notification","core_calendar/selectors","core_calendar/events","core_calendar/view_manager","core_calendar/repository","core/modal_factory","core_calendar/modal_event_form","core/modal_events","core_calendar/crud"],function(a,b,c,d,e,f,g,h,i,j,k){var l=function(b,g){var h=a("body");k.registerRemove(b);var i="reloadCurrent"+g.charAt(0).toUpperCase()+g.slice(1);h.on(e.created,function(){f[i](b)});h.on(e.deleted,function(){f[i](b)});h.on(e.updated,function(){f[i](b)});b.on("change",d.courseSelector,function(){var e=a(this),g=e.val();f[i](b,g,null).then(function(){return b.find(d.courseSelector).val(g)}).then(function(){window.history.pushState({},"","?view=upcoming&course="+g)}).fail(c.exception)});h.on(e.filterChanged,function(a,c){var e=b.find(d.eventType[c.type]);if(!0==c.hidden){e.addClass("hidden")}else{e.removeClass("hidden")}});var j=k.registerEventFormModal(b);k.registerEditListeners(b,j)};return{init:function init(b,c){b=a(b);f.init(b,c);l(b,c)}}});
define ("core_calendar/selectors",[],function(){return{eventFilterItem:"[data-action='filter-event-type']",eventType:{site:"[data-eventtype-site]",category:"[data-eventtype-category]",course:"[data-eventtype-course]",group:"[data-eventtype-group]",user:"[data-eventtype-user]"},popoverType:{site:"[data-popover-eventtype-site]",category:"[data-popover-eventtype-category]",course:"[data-popover-eventtype-course]",group:"[data-popover-eventtype-group]",user:"[data-popover-eventtype-user]"},calendarPeriods:{month:"[data-period='month']"},courseSelector:"select[name=\"course\"]",viewSelector:"div[data-region=\"view-selector\"]",actions:{create:"[data-action=\"new-event-button\"]",edit:"[data-action=\"edit\"]",remove:"[data-action=\"delete\"]",viewEvent:"[data-action=\"view-event\"]"},elements:{courseSelector:"select[name=\"course\"]"},today:".today",day:"[data-region=\"day\"]",calendarMain:"[data-region=\"calendar\"]",wrapper:".calendarwrapper",eventItem:"[data-type=\"event\"]",links:{navLink:".calendarwrapper .arrow_link",eventLink:"[data-region='event-item']",miniDayLink:"[data-region='mini-day-link']"},containers:{loadingIcon:"[data-region=\"overlay-icon-container\"]"}}});
define ("core_calendar/drag_drop_data_store",[],function(){var a=null,b=null,c=null,d=null,e=null,f=null,g=function(b){a=b},h=function(){return a},i=function(){return null!==a},j=function(a){b=a},k=function(){return b},l=function(a){c=a},m=function(){return c},n=function(){return null!==c},o=function(a){d=a},p=function(){return d},q=function(){return null!==d},r=function(a){e=a},s=function(){return e},t=function(a){f=a},u=function(){return f};return{setEventId:g,getEventId:h,hasEventId:i,setDurationDays:j,getDurationDays:k,setMinTimestart:l,getMinTimestart:m,hasMinTimestart:n,setMaxTimestart:o,getMaxTimestart:p,hasMaxTimestart:q,setMinError:r,getMinError:s,setMaxError:t,getMaxError:u,clearAll:function clearAll(){g(null);j(null);l(null);o(null);r(null);t(null)}}});
define ("core_calendar/calendar_mini",["jquery","core_calendar/selectors","core_calendar/events","core_calendar/view_manager"],function(a,b,c,d){var e=function(b){var d=a("body"),e="."+b.attr("id");d.on(c.created+e,b,f);d.on(c.deleted+e,b,f);d.on(c.updated+e,b,f);d.on(c.eventMoved+e,b,f)},f=function(b){var e=b.data,f=a("body"),g="."+e.attr("id");if(e.is(":visible")){d.reloadCurrentMonth(e)}else{f.off(c.created+g);f.off(c.deleted+g);f.off(c.updated+g);f.off(c.eventMoved+g)}},g=function(f){a("body").on(c.filterChanged,function(a,c){var d=f.find(b.eventType[c.type]);d.toggleClass("calendar_event_"+c.type,!c.hidden)});var g="."+f.attr("id");a("body").on("change"+g,b.elements.courseSelector,function(){if(f.is(":visible")){var b=a(this),c=b.val();d.reloadCurrentMonth(f,c,null)}else{a("body").off("change"+g)}})};return{init:function init(b,c){b=a(b);d.init(b);g(b);e(b);if(c){d.reloadCurrentMonth(b)}}}});
define ("core_calendar/modal_event_form",["jquery","core/event","core/str","core/notification","core/templates","core/custom_interaction_events","core/modal","core/modal_registry","core/fragment","core_calendar/events","core_calendar/repository"],function(a,b,c,d,e,f,g,h,i,j,k){var l=!1,m={SAVE_BUTTON:"[data-action=\"save\"]",LOADING_ICON_CONTAINER:"[data-region=\"loading-icon-container\"]"},n=function(a){g.call(this,a);this.eventId=null;this.startTime=null;this.courseId=null;this.categoryId=null;this.contextId=null;this.reloadingBody=!1;this.reloadingTitle=!1;this.saveButton=this.getFooter().find(m.SAVE_BUTTON)};n.TYPE="core_calendar-modal_event_form";n.prototype=Object.create(g.prototype);n.prototype.constructor=n;n.prototype.setContextId=function(a){this.contextId=a};n.prototype.getContextId=function(){return this.contextId};n.prototype.setCourseId=function(a){this.courseId=a};n.prototype.getCourseId=function(){return this.courseId};n.prototype.setCategoryId=function(a){this.categoryId=a};n.prototype.getCategoryId=function(){return this.categoryId};n.prototype.hasCourseId=function(){return null!==this.courseId};n.prototype.hasCategoryId=function(){return null!==this.categoryId};n.prototype.setEventId=function(a){this.eventId=a};n.prototype.getEventId=function(){return this.eventId};n.prototype.hasEventId=function(){return null!==this.eventId};n.prototype.setStartTime=function(a){this.startTime=a};n.prototype.getStartTime=function(){return this.startTime};n.prototype.hasStartTime=function(){return null!==this.startTime};n.prototype.getForm=function(){return this.getBody().find("form")};n.prototype.disableButtons=function(){this.saveButton.prop("disabled",!0)};n.prototype.enableButtons=function(){this.saveButton.prop("disabled",!1)};n.prototype.reloadTitleContent=function(){if(this.reloadingTitle){return this.titlePromise}this.reloadingTitle=!0;if(this.hasEventId()){this.titlePromise=c.get_string("editevent","calendar")}else{this.titlePromise=c.get_string("newevent","calendar")}this.titlePromise.then(function(a){this.setTitle(a);return a}.bind(this)).always(function(){this.reloadingTitle=!1}.bind(this)).fail(d.exception);return this.titlePromise};n.prototype.reloadBodyContent=function(a){if(this.reloadingBody){return this.bodyPromise}this.reloadingBody=!0;this.disableButtons();var b={};if(this.hasEventId()){b.eventid=this.getEventId()}if(this.hasStartTime()){b.starttime=this.getStartTime()}if(this.hasCourseId()){b.courseid=this.getCourseId()}if(this.hasCategoryId()){b.categoryid=this.getCategoryId()}if("undefined"!=typeof a){b.formdata=a}this.bodyPromise=i.loadFragment("calendar","event_form",this.getContextId(),b);this.setBody(this.bodyPromise);this.bodyPromise.then(function(){this.enableButtons()}.bind(this)).fail(d.exception).always(function(){this.reloadingBody=!1}.bind(this)).fail(d.exception);return this.bodyPromise};n.prototype.reloadAllContent=function(){return a.when(this.reloadTitleContent(),this.reloadBodyContent())};n.prototype.show=function(){this.reloadAllContent();g.prototype.show.call(this)};n.prototype.hide=function(){g.prototype.hide.call(this);this.setEventId(null);this.setStartTime(null);this.setCourseId(null);this.setCategoryId(null)};n.prototype.getFormData=function(){return this.getForm().serialize()};n.prototype.save=function(){var b,c=this.saveButton.find(m.LOADING_ICON_CONTAINER);b=this.getForm().find("[aria-invalid=\"true\"]");if(b.length){b.first().focus();return}c.removeClass("hidden");this.disableButtons();var e=this.getFormData();return k.submitCreateUpdateForm(e).then(function(b){if(b.validationerror){this.reloadBodyContent(e)}else{var c=this.hasEventId();this.hide();if(c){a("body").trigger(j.updated,[b.event])}else{a("body").trigger(j.created,[b.event])}}}.bind(this)).always(function(){c.addClass("hidden");this.enableButtons()}.bind(this)).fail(d.exception)};n.prototype.registerEventListeners=function(){g.prototype.registerEventListeners.call(this);this.getModal().on(f.events.activate,m.SAVE_BUTTON,function(a,b){this.getForm().submit();b.originalEvent.preventDefault();a.stopPropagation()}.bind(this));this.getModal().on("submit",function(a){b.notifyFormSubmitAjax(this.getForm()[0]);this.save();a.preventDefault();a.stopPropagation()}.bind(this))};if(!l){h.register(n.TYPE,n,"calendar/modal_event_form");l=!0}return n});
define ("core_calendar/event_form",["jquery","core_calendar/repository"],function(a,b){var c={EVENT_GROUP_COURSE_ID:"[name=\"groupcourseid\"]",EVENT_GROUP_ID:"[name=\"groupid\"]",SELECT_OPTION:"option"},d=function(d){var e=d.find(c.EVENT_GROUP_COURSE_ID),f=function(b){var e=d.find(c.EVENT_GROUP_ID),f=e.find(c.SELECT_OPTION),g=a(b);f.remove();e.prop("disabled",!1);g.each(function(b,c){a(e).append(a("<option></option>").attr("value",c.id).text(c.name))})};e.on("change",function(){var a=d.find(c.EVENT_GROUP_COURSE_ID).val();b.getCourseGroupsData(a).then(function(a){return f(a)}).catch(Notification.exception)})};return{init:function init(b){var c=a("#"+b);d(c)}}});
define ("core_calendar/view_manager",["jquery","core/templates","core/str","core/notification","core_calendar/repository","core_calendar/events","core_calendar/selectors","core/modal_factory","core/modal_events","core_calendar/summary_modal","core/custom_interaction_events"],function(a,b,c,d,e,f,g,h,i,j,k){var l=function(b){b=a(b);b.on("click",g.links.eventLink,function(b){var c=a(b.target),d=null,e;if(c.is(g.actions.viewEvent)){e=c}else{e=c.closest(g.actions.viewEvent)}if(e.length){d=e.data("eventId")}else{d=c.find(g.actions.viewEvent).data("eventId")}if(d){b.preventDefault();b.stopPropagation();u(d)}});b.on("click",g.links.navLink,function(c){var d=b.find(g.wrapper),e=d.data("view"),f=d.data("courseid"),h=d.data("categoryid"),i=a(c.currentTarget);if("month"===e){n(b,i.attr("href"),i.data("year"),i.data("month"),f,h,i.data("day"));c.preventDefault()}else if("day"===e){p(b,i.attr("href"),i.data("year"),i.data("month"),i.data("day"),f,h);c.preventDefault()}});var c=b.find(g.viewSelector);k.define(c,[k.events.activate]);c.on(k.events.activate,function(c){c.preventDefault();var e=a(c.target);if(e.hasClass("active")){return}var f=e.data("view"),g=e.data("year"),h=e.data("month"),i=e.data("day"),j=e.data("courseid"),k=e.data("categoryid");if("month"==f){m(b,g,h,j,k,b,"core_calendar/calendar_month",i).then(function(){return window.history.pushState({},"","?view=month")}).fail(d.exception)}else if("day"==f){o(b,g,h,i,j,k,b,"core_calendar/calendar_day").then(function(){return window.history.pushState({},"","?view=day")}).fail(d.exception)}else if("upcoming"==f){s(b,j,k,b,"core_calendar/calendar_upcoming").then(function(){return window.history.pushState({},"","?view=upcoming")}).fail(d.exception)}})},m=function(c,h,i,j,k,l,m,n){q(c);l=l||c.find(g.wrapper);m=m||c.attr("data-template");n=n||1;M.util.js_pending([c.get("id"),h,i,j].join("-"));var o=c.data("includenavigation"),p=c.data("mini");return e.getCalendarMonthData(h,i,j,k,o,p,n).then(function(a){a.viewingmonth=!0;return b.render(m,a)}).then(function(a,c){return b.replaceNode(l,a,c)}).then(function(){a("body").trigger(f.viewUpdated)}).always(function(){M.util.js_complete([c.get("id"),h,i,j].join("-"));return r(c)}).fail(d.exception)},n=function(b,c,d,e,g,h,i){i=i||1;return m(b,d,e,g,h,null,null,i).then(function(){if(c.length&&"#"!==c){window.history.pushState({},"",c)}return arguments}).then(function(){a("body").trigger(f.monthChanged,[d,e,g,h]);return arguments})},o=function(c,h,i,j,k,l,m,n){q(c);m=m||c.find(g.wrapper);n=n||c.attr("data-template");M.util.js_pending([c.get("id"),h,i,j,k,l].join("-"));var o=c.data("includenavigation");return e.getCalendarDayData(h,i,j,k,l,o).then(function(a){a.viewingday=!0;return b.render(n,a)}).then(function(a,c){return b.replaceNode(m,a,c)}).then(function(){a("body").trigger(f.viewUpdated)}).always(function(){M.util.js_complete([c.get("id"),h,i,j,k,l].join("-"));return r(c)}).fail(d.exception)},p=function(b,c,d,e,g,h,i){return o(b,d,e,g,h,i).then(function(){if(c.length&&"#"!==c){window.history.pushState({},"",c)}return arguments}).then(function(){a("body").trigger(f.dayChanged,[d,e,h,i]);return arguments})},q=function(a){var b=a.find(g.containers.loadingIcon);b.removeClass("hidden")},r=function(a){var b=a.find(g.containers.loadingIcon);b.addClass("hidden")},s=function(c,h,i,j,k){q(c);j=j||c.find(g.wrapper);k=k||c.attr("data-template");if("undefined"==typeof h){h=c.find(g.wrapper).data("courseid")}if("undefined"==typeof i){i=c.find(g.wrapper).data("categoryid")}return e.getCalendarUpcomingData(h,i).then(function(a){a.viewingupcoming=!0;return b.render(k,a)}).then(function(a,c){return b.replaceNode(j,a,c)}).then(function(){a("body").trigger(f.viewUpdated)}).always(function(){return r(c)}).fail(d.exception)},t=function(a){return"calendar_event_"+a},u=function(a){var c="";e.getEventById(a).then(function(b){if(!b.event){throw new Error("Error encountered while trying to fetch calendar event with ID: "+a)}var d=b.event;c=t(d.normalisedeventtype);return d}).then(function(a){var d={title:a.name,type:j.TYPE,body:b.render("core_calendar/event_summary_body",a),templateContext:{canedit:a.canedit,candelete:a.candelete,headerclasses:c,isactionevent:a.isactionevent,url:a.url}};return h.create(d)}).done(function(a){a.getRoot().on(i.hidden,function(){a.destroy()});a.show()}).fail(d.exception)};return{init:function init(a,b){l(a,b)},reloadCurrentMonth:function reloadCurrentMonth(a,b,c){var d=a.find(g.wrapper).data("year"),e=a.find(g.wrapper).data("month"),f=a.find(g.wrapper).data("day");if("undefined"==typeof b){b=a.find(g.wrapper).data("courseid")}if("undefined"==typeof c){c=a.find(g.wrapper).data("categoryid")}return m(a,d,e,b,c,null,null,f)},changeMonth:n,refreshMonthContent:m,reloadCurrentDay:function reloadCurrentDay(a,b,c){var d=a.find(g.wrapper),e=d.data("year"),f=d.data("month"),h=d.data("day");if(!b){b=a.find(g.wrapper).data("courseid")}if("undefined"==typeof c){c=a.find(g.wrapper).data("categoryid")}return o(a,e,f,h,b,c)},changeDay:p,refreshDayContent:o,reloadCurrentUpcoming:s}});
define ("core_calendar/month_navigation_drag_drop",["jquery","core_calendar/drag_drop_data_store"],function(a,b){var c={DRAGGABLE:"[draggable=\"true\"][data-region=\"event-item\"]",DROP_ZONE:"[data-drop-zone=\"nav-link\"]"},d="bg-primary text-white",e="drop-target",f=!1,g=null,h=null,i=function(a,b){if(b){a.addClass(d)}else{a.removeClass(d)}},j=function(){h.find(c.DROP_ZONE).addClass(e)},k=function(){h.find(c.DROP_ZONE).removeClass(e)},l=function(b){var d=a(b.target).closest(c.DROP_ZONE);return d.length?d:null},m=function(b){var d=a(b.target).closest(c.DRAGGABLE);if(d.length){j()}},n=function(a){if(!b.hasEventId()){return}a.preventDefault();var c=l(a);if(!c){return}if(!b.hasEventId()){return}if(!g){g=setTimeout(function(){c.click();g=null},1e3)}i(c,!0);k()},o=function(a){if(!b.hasEventId()){return}var c=l(a);if(!c){return}if(g){clearTimeout(g);g=null}i(c,!1);j();a.preventDefault()},p=function(a){if(!b.hasEventId()){return}k();var c=l(a);if(!c){return}i(c,!1);a.preventDefault()};return{init:function init(c){if(!f){document.addEventListener("dragstart",m,!1);document.addEventListener("dragover",n,!1);document.addEventListener("dragleave",o,!1);document.addEventListener("drop",p,!1);document.addEventListener("dragend",k,!1);f=!0}h=a(c);if(b.hasEventId()){j()}}}});
define ("core_calendar/modal_delete",["jquery","core/notification","core/custom_interaction_events","core/modal","core/modal_events","core/modal_registry","core_calendar/events"],function(a,b,c,d,f,g,h){var i=!1,j={DELETE_ONE_BUTTON:"[data-action=\"deleteone\"]",DELETE_ALL_BUTTON:"[data-action=\"deleteall\"]",CANCEL_BUTTON:"[data-action=\"cancel\"]"},k=function(a){d.call(this,a)};k.TYPE="core_calendar-modal_delete";k.prototype=Object.create(d.prototype);k.prototype.constructor=k;k.prototype.registerEventListeners=function(){d.prototype.registerEventListeners.call(this);this.getModal().on(c.events.activate,j.DELETE_ONE_BUTTON,function(b,c){var d=a.Event(f.save);this.getRoot().trigger(d,this);if(!d.isDefaultPrevented()){this.hide();c.originalEvent.preventDefault()}}.bind(this));this.getModal().on(c.events.activate,j.DELETE_ALL_BUTTON,function(b,c){var d=a.Event(h.deleteAll);this.getRoot().trigger(d,this);if(!d.isDefaultPrevented()){this.hide();c.originalEvent.preventDefault()}}.bind(this));this.getModal().on(c.events.activate,j.CANCEL_BUTTON,function(b,c){var d=a.Event(f.cancel);this.getRoot().trigger(d,this);if(!d.isDefaultPrevented()){this.hide();c.originalEvent.preventDefault()}}.bind(this))};if(!i){g.register(k.TYPE,k,"calendar/event_delete_modal");i=!0}return k});
define ("core_calendar/crud",["jquery","core/str","core/notification","core/custom_interaction_events","core/modal","core/modal_registry","core/modal_factory","core/modal_events","core_calendar/modal_event_form","core_calendar/repository","core_calendar/events","core_calendar/modal_delete","core_calendar/selectors","core/pending"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(d,e,f){var i=[{key:"deleteevent",component:"calendar"}];f=parseInt(f,10);var m,o=1<f;if(o){i.push({key:"confirmeventseriesdelete",component:"calendar",param:{name:e,count:f}});m=g.create({type:l.TYPE})}else{i.push({key:"confirmeventdelete",component:"calendar",param:e});m=g.create({type:g.types.SAVE_CANCEL})}var p=b.get_strings(i),q=a.when(p,m).then(function(b,e){e.setTitle(b[0]);e.setBody(b[1]);if(!o){e.setSaveButtonText(b[0])}e.show();e.getRoot().on(h.save,function(){var b=new n("calendar/crud:initModal:deletedevent");j.deleteEvent(d,!1).then(function(){a("body").trigger(k.deleted,[d,!1])}).then(b.resolve).catch(c.exception)});e.getRoot().on(k.deleteAll,function(){var b=new n("calendar/crud:initModal:deletedallevent");j.deleteEvent(d,!0).then(function(){a("body").trigger(k.deleted,[d,!0])}).then(b.resolve).catch(c.exception)});return e}).catch(c.exception);return q}return{registerRemove:function(b){b.on("click",m.actions.remove,function(b){var c=a(this).closest(m.eventItem),d=c.data("eventId"),e=c.data("eventTitle"),f=c.data("eventCount");o(d,e,f);b.preventDefault()})},registerEditListeners:function(b,d){d.then(function(c){a("body").on(k.editEvent,function(a,d){var e=b.find(m.wrapper);c.setEventId(d);c.setContextId(e.data("contextId"));c.show();a.stopImmediatePropagation()})}).fail(c.exception);return d},registerEventFormModal:function registerEventFormModal(b){var d=g.create({type:i.TYPE,large:!0});b.on("click",m.actions.create,function(a){d.then(function(a){var c=b.find(m.wrapper),d=c.data("categoryid");if("undefined"!=typeof d){a.setCategoryId(d)}var e=b.find(m.today),f=b.find(m.day);if(!e.length&&f.length){a.setStartTime(f.data("newEventTimestamp"))}a.setContextId(c.data("contextId"));a.setCourseId(c.data("courseid"));a.show()}).fail(c.exception);a.preventDefault()});b.on("click",m.actions.edit,function(b){b.preventDefault();var e=a(b.currentTarget),f=e.closest(m.wrapper),g=e.closest(m.eventItem);d.then(function(a){a.setEventId(g.data("eventId"));a.setContextId(f.data("contextId"));a.show();b.stopImmediatePropagation()}).fail(c.exception)});return d}}});
define ("core_calendar/events",[],function(){return{created:"calendar-events:created",deleted:"calendar-events:deleted",deleteAll:"calendar-events:delete_all",updated:"calendar-events:updated",editEvent:"calendar-events:edit_event",editActionEvent:"calendar-events:edit_action_event",eventMoved:"calendar-events:event_moved",dayChanged:"calendar-events:day_changed",monthChanged:"calendar-events:month_changed",moveEvent:"calendar-events:move_event",filterChanged:"calendar-events:filter_changed",viewUpdated:"calendar-events:view_updated"}});
define ("core_calendar/month_view_drag_drop",["jquery","core/notification","core/str","core_calendar/events","core_calendar/drag_drop_data_store"],function(a,b,c,d,f){var g={ROOT:"[data-region='calendar']",DRAGGABLE:"[draggable=\"true\"][data-region=\"event-item\"]",DROP_ZONE:"[data-drop-zone=\"month-view-day\"]",WEEK:"[data-region=\"month-view-week\"]"},h="bg-faded",i="bg-danger text-white",j="bg-primary text-white",k=h+" "+i+" "+j,l=!1,m=function(b){var c=a(b.target).closest(g.DROP_ZONE);return c.length?c:null},n=function(a){var b=a.attr("data-day-timestamp"),c=f.getMinTimestart(),d=f.getMaxTimestart();if(c&&c>b){return!1}if(d&&d<b){return!1}return!0},o=function(a){var b=a.attr("data-day-timestamp"),c=f.getMinTimestart(),d=f.getMaxTimestart();if(c&&c>b){return f.getMinError()}if(d&&d<b){return f.getMaxError()}return null},p=function(){a(g.ROOT).find(g.DROP_ZONE).each(function(b,c){c=a(c);c.removeClass(k)})},q=function(a,b,c){if("undefined"==typeof c){c=f.getDurationDays()}var d=n(a);a.removeClass(k);if(b){if(d){a.addClass(j)}else{a.addClass(i)}}else{a.removeClass(j+" "+i);if(!d){a.addClass(h)}}c--;if(0<c){var e=a.next();if(!e.length){var l=a.closest(g.WEEK).next();if(l.length){e=l.children(g.DROP_ZONE).first()}}if(e.length){q(e,b,c)}}},r=function(){a(g.ROOT).find(g.DROP_ZONE).each(function(b,c){c=a(c);if(!n(c)){q(c,!1)}})},s=function(b){var c=a(b.target),d=c.closest(g.DRAGGABLE);if(!d.length){return}var e=d.find("[data-event-id]"),h=e.attr("data-event-id"),i=d.attr("data-min-day-timestamp"),j=d.attr("data-max-day-timestamp"),k=d.attr("data-min-day-error"),l=d.attr("data-max-day-error"),m=g.ROOT+" [data-event-id=\""+h+"\"]",n=a(m).length;f.setEventId(h);f.setDurationDays(n);if(i){f.setMinTimestart(i)}if(j){f.setMaxTimestart(j)}if(k){f.setMinError(k)}if(l){f.setMaxError(l)}b.dataTransfer.effectAllowed="move";b.dataTransfer.dropEffect="move";b.dataTransfer.setData("text/plain",h);b.dropEffect="move";r()},t=function(a){if(!f.hasEventId()){return}a.preventDefault();var b=m(a);if(!b){return}q(b,!0)},u=function(a){if(!f.hasEventId()){return}var b=m(a);if(!b){return}q(b,!1);a.preventDefault()},v=function(h){if(!f.hasEventId()){return}var e=m(h);if(!e){f.clearAll();p();return}if(n(e)){var i=f.getEventId(),j=g.ROOT+" [data-event-id=\""+i+"\"]",k=a(j),l=null;if(k.length){l=k.closest(g.DROP_ZONE)}a("body").trigger(d.moveEvent,[i,l,e])}else{var q=o(e);c.get_string("errorinvaliddate","calendar").then(function(a){b.exception({name:a,message:q||a})})}f.clearAll();p();h.preventDefault()},w=function(){f.clearAll();p()},x=function(){r()};return{init:function init(){if(!l){document.addEventListener("dragstart",s,!1);document.addEventListener("dragover",t,!1);document.addEventListener("dragleave",u,!1);document.addEventListener("drop",v,!1);document.addEventListener("dragend",w,!1);a("body").on(d.monthChanged,x);l=!0}}}});
define ("core_course/repository",["jquery","core/ajax"],function(a,b){return{getEnrolledCoursesByTimelineClassification:function getEnrolledCoursesByTimelineClassification(a,c,d,e){var f={classification:a};if("undefined"!=typeof c){f.limit=c}if("undefined"!=typeof d){f.offset=d}if("undefined"!=typeof e){f.sort=e}return b.call([{methodname:"core_course_get_enrolled_courses_by_timeline_classification",args:f}])[0]},getLastAccessedCourses:function getLastAccessedCourses(a,c,d,e){var f={};if("undefined"!=typeof a){f.userid=a}if("undefined"!=typeof c){f.limit=c}if("undefined"!=typeof d){f.offset=d}if("undefined"!=typeof e){f.sort=e}return b.call([{methodname:"core_course_get_recent_courses",args:f}])[0]},getUsersFromCourseModuleID:function getEnrolledUsersFromCourseModuleID(a,c){return b.call([{methodname:"core_course_get_enrolled_users_by_cmid",args:{cmid:a,groupid:c}}])[0]}}});
define ("core_course/sectionlistener",["jquery"],function(a){var b=function(a,b){a.attr("aria-label",b);a.find(".hidden.sectionname").text(b)};a("body").on("updated",".inplaceeditable",function processUpdatedEvent(c){var d=a(this);if("sectionname"===d.data("itemtype")){var e=M.course.format.get_config(),f=d.closest("."+e.section_class);b(f,c.ajaxreturn.value)}})});
define ("core_course/actions",["jquery","core/ajax","core/templates","core/notification","core/str","core/url","core/yui","core/modal_factory","core/modal_events","core/key_codes"],function(a,b,c,d,e,f,g,h,i,j){var k={EDITINPROGRESS:"editinprogress",SECTIONDRAGGABLE:"sectiondraggable",EDITINGMOVE:"editing_move"},l={ACTIVITYLI:"li.activity",ACTIONAREA:".actions",ACTIVITYACTION:"a.cm-edit-action",MENU:".moodle-actionmenu[data-enhance=moodle-core-actionmenu]",TOGGLE:".toggle-display,.dropdown-toggle",SECTIONLI:"li.section",SECTIONACTIONMENU:".section_action_menu",ADDSECTIONS:"#changenumsections [data-add-sections]"};g.use("moodle-course-coursebase",function(){var a=M.course.format.get_section_selector();if(a){l.SECTIONLI=a}});var m=function(a){var b;g.use("moodle-course-util",function(c){b=c.Moodle.core_course.util.cm.getId(c.Node(a.get(0)))});return b},n=function(a){var b;g.use("moodle-course-util",function(c){b=c.Moodle.core_course.util.cm.getName(c.Node(a.get(0)))});return b},o=function(a){a.addClass(k.EDITINPROGRESS);var b=a.find(l.ACTIONAREA).get(0);if(b){var c=M.util.add_spinner(g,g.Node(b));c.show();return c}return null},p=function(a){a.addClass(k.EDITINPROGRESS);var b=a.find(l.SECTIONACTIONMENU).get(0);if(b){var c=M.util.add_spinner(g,g.Node(b));c.show();return c}return null},q=function(a){var b=M.util.add_lightbox(g,g.Node(a.get(0)));b.show();return b},r=function(a,b,c){window.setTimeout(function(){a.removeClass(k.EDITINPROGRESS);if(b){b.hide()}},c)},s=function(a,b){if(a){window.setTimeout(function(){a.hide()},b)}},t=function(a){g.use("moodle-course-coursebase",function(){M.course.coursebase.invoke_function("setup_for_resource","#"+a)});if(M.core.actionmenu&&M.core.actionmenu.newDOMNode){M.core.actionmenu.newDOMNode(g.one("#"+a))}},u=function(b,c){var d=a("#"+b),e="[data-action="+c+"]";if("groupsseparate"===c||"groupsvisible"===c||"groupsnone"===c){e="[data-action=groupsseparate],[data-action=groupsvisible],[data-action=groupsnone]"}if(d.find(e).is(":visible")){d.find(e).focus()}else{d.find(l.MENU).find(l.TOGGLE).focus()}},v=function(b){var c=a("a:visible"),d=!1,e=null;c.each(function(){if(a.contains(b[0],this)){d=!0}else if(d){e=this;return!1}});return e},w=function(c,e,f){var g=f.attr("data-action"),h=o(c),i=b.call([{methodname:"core_course_edit_module",args:{id:e,action:g,sectionreturn:f.attr("data-sectionreturn")?f.attr("data-sectionreturn"):0}}],!0),j;if("duplicate"===g){j=q(f.closest(l.SECTIONLI))}a.when.apply(a,i).done(function(b){var d=v(c);c.replaceWith(b);a("<div>"+b+"</div>").find(l.ACTIVITYLI).each(function(b){t(a(this).attr("id"));if(0===b){u(a(this).attr("id"),g);d=null}});if(d){d.focus()}r(c,h,400);s(j,400);c.trigger(a.Event("coursemoduleedited",{ajaxreturn:b,action:g}))}).fail(function(b){r(c,h);s(j);var f=a.Event("coursemoduleeditfailed",{exception:b,action:g});c.trigger(f);if(!f.isDefaultPrevented()){d.exception(b)}})},x=function(c,d,e){var f=o(c),g=b.call([{methodname:"core_course_get_module",args:{id:d,sectionreturn:e}}],!0);a.when.apply(a,g).done(function(a){r(c,f,400);C(a)}).fail(function(){r(c,f)})},y=function(a,b){var c=a.attr("class").match(/modtype_([^\s]*)/)[1],f=n(a);e.get_string("pluginname",c).done(function(a){e.get_strings([{key:"confirm"},{key:null===f?"deletechecktype":"deletechecktypename",param:{type:a,name:f}},{key:"yes"},{key:"no"}]).done(function(a){d.confirm(a[0],a[1],a[2],a[3],b)})})},z=function(a,b){e.get_strings([{key:"confirm"},{key:"yes"},{key:"no"}]).done(function(c){d.confirm(c[0],a,c[1],c[2],b)})},A=function(a,b,f,g,h,i,j){return e.get_strings([{key:f,component:g}]).then(function(d){a.find("span.menu-action-text").html(d[0]);return c.renderPix(b,"core")}).then(function(b){a.find(".icon").replaceWith(b);a.attr("data-action",j)}).catch(d.exception)},B=function(b,c,d,e){var f=c.attr("data-action");if("hide"===f||"show"===f){if("hide"===f){b.addClass("hidden");A(c,"i/show","showfromothers","format_"+e,null,null,"show")}else{b.removeClass("hidden");A(c,"i/hide","hidefromothers","format_"+e,null,null,"hide")}if(d.modules!==void 0){for(var g in d.modules){C(d.modules[g])}}if(d.section_availability!==void 0){b.find(".section_availability").first().replaceWith(d.section_availability)}}else if("setmarker"===f){var h=a(l.SECTIONLI+".current"),i=h.find(l.SECTIONACTIONMENU+" a[data-action=removemarker]");h.removeClass("current");A(i,"i/marker","highlight","core","markthistopic","core","setmarker");b.addClass("current");A(c,"i/marked","highlightoff","core","markedthistopic","core","removemarker")}else if("removemarker"===f){b.removeClass("current");A(c,"i/marker","highlight","core","markthistopic","core","setmarker")}},C=function(b){a("<div>"+b+"</div>").find(l.ACTIVITYLI).each(function(){var c=a(this).attr("id");a(l.ACTIVITYLI+"#"+c).replaceWith(b);t(c)})},D=function(c,e,f,g){var h=f.attr("data-action"),i=f.attr("data-sectionreturn")?f.attr("data-sectionreturn"):0,j=p(c),k=b.call([{methodname:"core_course_edit_section",args:{id:e,action:h,sectionreturn:i}}],!0),m=q(c);a.when.apply(a,k).done(function(b){var d=a.parseJSON(b);r(c,j);s(m);c.find(l.SECTIONACTIONMENU).find(l.TOGGLE).focus();var i=a.Event("coursesectionedited",{ajaxreturn:d,action:h});c.trigger(i);if(!i.isDefaultPrevented()){B(c,f,d,g)}}).fail(function(b){r(c,j);s(m);var f=a.Event("coursesectioneditfailed",{exception:b,action:h});c.trigger(f);if(!f.isDefaultPrevented()){d.exception(b)}})};g.use("moodle-course-coursebase",function(){M.course.coursebase.register_module({set_visibility_resource_ui:function set_visibility_resource_ui(b){var c=a(b.element.getDOMNode()),d=m(c);if(d){var e=c.find("."+k.EDITINGMOVE).attr("data-sectionreturn");x(c,d,e)}}})});return{initCoursePage:function initCoursePage(b){a("body").on("click keypress",l.ACTIVITYLI+" "+l.ACTIVITYACTION+"[data-action]",function(b){if("keypress"===b.type&&13!==b.keyCode){return}var c=a(this),d=c.closest(l.ACTIVITYLI),e=c.attr("data-action"),f=m(d);switch(e){case"moveleft":case"moveright":case"delete":case"duplicate":case"hide":case"stealth":case"show":case"groupsseparate":case"groupsvisible":case"groupsnone":break;default:return;}if(!f){return}b.preventDefault();if("delete"===e){y(d,function(){w(d,f,c)})}else{w(d,f,c)}});a("body").on("click keypress",l.SECTIONLI+" "+l.SECTIONACTIONMENU+"[data-sectionid] a[data-action]",function(c){if("keypress"===c.type&&13!==c.keyCode){return}var d=a(this),e=d.closest(l.SECTIONLI),f=d.closest(l.SECTIONACTIONMENU).attr("data-sectionid");c.preventDefault();if(d.attr("data-confirm")){z(d.attr("data-confirm"),function(){D(e,f,d,b)})}else{D(e,f,d,b)}});e.get_string("numberweeks").done(function(b){var c=a(l.ADDSECTIONS),d=c.attr("data-add-sections"),e=c.attr("data-new-sections"),f=a("<div><label for=\"add_section_numsections\"></label> <input id=\"add_section_numsections\" type=\"number\" min=\"1\" max=\""+e+"\" value=\"1\"></div>");f.find("label").html(b);h.create({title:d,type:h.types.SAVE_CANCEL,body:f.html()},c).done(function(b){var e=a(b.getBody()).find("#add_section_numsections"),f=function(){if(""+parseInt(e.val())===e.val()&&1<=parseInt(e.val())){document.location=c.attr("href")+"&numsections="+parseInt(e.val())}};b.setSaveButtonText(d);b.getRoot().on(i.shown,function(){e.focus().select().on("keydown",function(a){if(a.keyCode===j.enter){f()}})});b.getRoot().on(i.save,function(a){a.preventDefault();f()})})})},replaceSectionActionItem:function replaceSectionActionItem(a,b,c,d,e,f,g,h){var i=a.find(l.SECTIONACTIONMENU+" "+b);A(i,c,d,e,f,g,h)}}});
define ("core_course/events",[],function(){return{favourited:"core_course:favourited",unfavorited:"core_course:unfavorited"}});
define ("core_customfield/form",["jquery","core/str","core/notification","core/ajax","core/templates","core/sortable_list","core/inplace_editable"],function(a,b,c,d,e,f){var g=function(f,g,h,i,j){b.get_strings([{key:"confirm"},{key:"confirmdelete"+g,component:"core_customfield"},{key:"yes"},{key:"no"}]).done(function(b){c.confirm(b[0],b[1],b[2],b[3],function(){var b="field"===g?"core_customfield_delete_field":"core_customfield_delete_category";d.call([{methodname:b,args:{id:f}},{methodname:"core_customfield_reload_template",args:{component:h,area:i,itemid:j}}])[1].then(function(a){return e.render("core_customfield/list",a)}).then(function(b,c){e.replaceNode(a("[data-region=\"list-page\"]"),b,c);return null}).fail(c.exception)})}).fail(c.exception)},h=function(b,f,g){var h=d.call([{methodname:"core_customfield_create_category",args:{component:b,area:f,itemid:g}},{methodname:"core_customfield_reload_template",args:{component:b,area:f,itemid:g}}]),i;h[0].then(function(a){i=a;return null}).fail(c.exception);h[1].then(function(a){return e.render("core_customfield/list",a)}).then(function(b,c){e.replaceNode(a("[data-region=\"list-page\"]"),b,c);window.location.href="#category-"+i;return null}).fail(c.exception)};return{init:function init(){var e=a("#customfield_catlist"),i=e.attr("data-component"),j=e.attr("data-area"),k=e.attr("data-itemid");a("[data-role=deletefield]").on("click",function(b){g(a(this).attr("data-id"),"field",i,j,k);b.preventDefault()});a("[data-role=deletecategory]").on("click",function(b){g(a(this).attr("data-id"),"category",i,j,k);b.preventDefault()});a("[data-role=addnewcategory]").on("click",function(){h(i,j,k)});var l=function(a){return a.closest("[data-category-id]").find("[data-inplaceeditable][data-itemtype=category][data-component=core_customfield]").attr("data-value")},m=new f(a("#customfield_catlist .categorieslist"),{moveHandlerSelector:".movecategory [data-drag-type=move]"});m.getElementName=function(b){return a.Deferred().resolve(l(b))};a("[data-category-id]").on("sortablelist-drop",function(a,b){if(b.positionChanged){var e=d.call([{methodname:"core_customfield_move_category",args:{id:b.element.data("category-id"),beforeid:b.targetNextElement.data("category-id")}}]);e[0].fail(c.exception)}a.stopPropagation()});var n=new f(a("#customfield_catlist .fieldslist tbody"),{moveHandlerSelector:".movefield [data-drag-type=move]"});n.getDestinationName=function(c,d){if(!d.length){return b.get_string("totopofcategory","customfield",l(c))}else if(d.attr("data-field-name")){return b.get_string("afterfield","customfield",d.attr("data-field-name"))}else{return a.Deferred().resolve("")}};a("[data-field-name]").on("sortablelist-drop",function(a,b){a.stopPropagation();if(b.positionChanged){var e=d.call([{methodname:"core_customfield_move_field",args:{id:b.element.data("field-id"),beforeid:b.targetNextElement.data("field-id"),categoryid:+b.targetList.closest("[data-category-id]").attr("data-category-id")}}]);e[0].fail(c.exception)}}).on("sortablelist-drag",function(d){d.stopPropagation();b.get_string("therearenofields","core_customfield").then(function(b){a("#customfield_catlist .categorieslist").children().each(function(){var c=a(this).find(a(".field")),d=a(this).find(a(".nofields"));if(!c.length&&!d.length){a(this).find("tbody").append("<tr class=\"nofields\"><td colspan=\"5\">"+b+"</td></tr>")}if(c.length&&d.length){d.remove()}});return null}).fail(c.exception)});a("[data-category-id], [data-field-name]").on("sortablelist-dragstart",function(b,c){setTimeout(function(){a(".sortable-list-is-dragged").width(c.element.width())},501)})}}});
define ("core_form/submit",["exports"],function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;var b=0,c=[],d=function(a){c.push(a);if(!b){b=setInterval(function(){var a=document.cookie.split(e()+"=");if(2==a.length){f();clearInterval(b);b=0;c.forEach(function(a){a.disabled=!1})}},500)}},e=function(){return"moodledownload_"+M.cfg.sesskey},f=function(){document.cookie=encodeURIComponent(e())+"=deleted; expires="+new Date(0).toUTCString()};a.init=function init(a){var b=document.getElementById(a);if("off"===b.form.dataset.doubleSubmitProtection){return}b.form.addEventListener("submit",function(a){var c=function(){if(a.defaultPrevented||b.disabled){return}b.disabled=!0;f();d(b)};window.addEventListener("beforeunload",c);setTimeout(function(){window.removeEventListener("beforeunload",c)},0)},!1)}});
define ("core_form/passwordunmask",["jquery","core/templates"],function(a,b){var c=function(b){this.wrapperSelector="[data-passwordunmask=\"wrapper\"][data-passwordunmaskid=\""+b+"\"]";this.wrapper=a(this.wrapperSelector);this.editorSpace=this.wrapper.find("[data-passwordunmask=\"editor\"]");this.editLink=this.wrapper.find("a[data-passwordunmask=\"edit\"]");this.editInstructions=this.wrapper.find("[data-passwordunmask=\"instructions\"]");this.displayValue=this.wrapper.find("[data-passwordunmask=\"displayvalue\"]");this.inputFieldLabel=a("label[for=\""+b+"\"]");this.inputField=this.editorSpace.find(document.getElementById(b));this.inputField.attr("type","hidden");this.inputField.removeClass("hiddenifjs");if(!this.editInstructions.attr("id")){this.editInstructions.attr("id",b+"_instructions")}this.editInstructions.hide();this.setDisplayValue();this.addListeners()};c.prototype.addListeners=function(){this.wrapper.on("click keypress","[data-passwordunmask=\"edit\"]",a.proxy(function(b){if("keypress"===b.type&&13!==b.keyCode){return}b.stopImmediatePropagation();b.preventDefault();if("hidden"!==this.inputField.attr("type")){if("click"!==b.type&&!a(b.relatedTarget).is(":input")){this.turnEditingOff(!0)}else{this.turnEditingOff(!1)}}else{this.turnEditingOn()}},this));this.wrapper.on("click keypress","[data-passwordunmask=\"unmask\"]",a.proxy(function(a){if("keypress"===a.type&&13!==a.keyCode){return}a.stopImmediatePropagation();a.preventDefault();this.wrapper.data("unmasked",!this.wrapper.data("unmasked"));this.setDisplayValue()},this));this.wrapper.on("keydown","input",a.proxy(function(a){if("keydown"===a.type&&13!==a.keyCode){return}a.stopImmediatePropagation();a.preventDefault();this.turnEditingOff(!0)},this));this.inputFieldLabel.on("click",a.proxy(function(a){a.preventDefault();this.turnEditingOn()},this));return this};c.prototype.checkFocusOut=function(b){if(!this.isEditing()){return}window.setTimeout(a.proxy(function(){var c=b.relatedTarget||document.activeElement;if(this.wrapper.has(a(c)).length){return}this.turnEditingOff(!a(c).is(":input,a"))},this),100)};c.prototype.passwordVisible=function(){return!!this.wrapper.data("unmasked")};c.prototype.isEditing=function(){return"hidden"!==this.inputField.attr("type")};c.prototype.turnEditingOn=function(){var b=this.getDisplayValue();if(this.passwordVisible()){this.inputField.attr("type","text")}else{this.inputField.attr("type","password")}this.inputField.val(b);this.inputField.attr("size",this.inputField.attr("data-size"));if(this.editInstructions.length){this.inputField.attr("aria-describedby",this.editInstructions.attr("id"));this.editInstructions.show()}this.wrapper.attr("data-passwordunmask-visible",1);this.editLink.hide();this.inputField.focus().select();a("body").on("focusout",this.wrapperSelector,a.proxy(this.checkFocusOut,this));return this};c.prototype.turnEditingOff=function(b){a("body").off("focusout",this.wrapperSelector,this.checkFocusOut);var c=this.getDisplayValue();this.inputField.attr("type","hidden").attr("aria-describedby",null);this.inputField.val(c);this.editInstructions.hide();this.wrapper.removeAttr("data-passwordunmask-visible");this.inputField.removeAttr("size");this.editLink.show();this.setDisplayValue();if(b){this.editLink.focus()}return this};c.prototype.getDisplayValue=function(){return this.inputField.val()};c.prototype.setDisplayValue=function(){var c=this.getDisplayValue();if(this.isEditing()){if(this.wrapper.data("unmasked")){this.inputField.attr("type","text")}else{this.inputField.attr("type","password")}this.inputField.val(c)}if(c&&this.wrapper.data("unmasked")){this.displayValue.text(c)}else{if(!c){c=""}b.render("core_form/element-passwordunmask-fill",{element:{frozen:this.inputField.is("[readonly]"),value:c,valuechars:c.split("")}}).done(a.proxy(function(a,c){this.displayValue.html(a);b.runTemplateJS(c)},this))}return this};return c});
define ("core_form/filetypes",["jquery","core/log","core/str","core/modal_factory","core/modal_events","core/ajax","core/templates","core/tree"],function(a,b,c,d,e,f,g,h){"use strict";var i=function(c,d,e,f){this.elementId=c;this.elementLabel=d;this.onlyTypes=e;this.allowAll=f;this.inputField=a("#"+c);this.wrapperBrowserTrigger=a("[data-filetypesbrowser=\""+c+"\"]");this.wrapperDescriptions=a("[data-filetypesdescriptions=\""+c+"\"]");if(!this.wrapperBrowserTrigger.length){return}if(!this.inputField.length||!this.wrapperDescriptions.length){b.error("core_form/filetypes: Unexpected DOM structure, unable to enhance filetypes field "+c);return}this.prepareBrowserTrigger().then(function(){return this.prepareBrowserModal()}.bind(this)).then(function(){return this.prepareBrowserTree()}.bind(this))};i.prototype.prepareBrowserTrigger=function(){return g.render("core_form/filetypes-trigger",{}).then(function(a){this.wrapperBrowserTrigger.html(a);this.browserTrigger=this.wrapperBrowserTrigger.find("[data-filetypeswidget=\"browsertrigger\"]")}.bind(this))};i.prototype.prepareBrowserModal=function(){return d.create({type:d.types.SAVE_CANCEL,title:this.elementLabel}).then(function(a){this.browserModal=a}.bind(this)).then(function(){this.browserModal.getRoot().on(e.hidden,function(){this.browserTrigger.focus()}.bind(this));this.browserModal.getRoot().on(e.save,function(){this.saveBrowserModal()}.bind(this))}.bind(this))};i.prototype.prepareBrowserTree=function(){this.browserTrigger.on("click",function(b){b.preventDefault();if(this.inputField.is("[disabled]")){return}var c=this.loadBrowserModalBody();c.then(function(){this.browserTree=new h(this.browserModal.getBody());this.browserTree.handleKeyDown=function(a,b){if(b.keyCode==this.browserTree.keys.enter||b.keyCode==this.browserTree.keys.space){b.preventDefault();b.stopPropagation();this.toggleCheckbox(a.attr("data-filetypesbrowserkey"))}else{h.prototype.handleKeyDown.call(this.browserTree,a,b)}}.bind(this);if(this.allowAll){this.hideOrShowItemsDependingOnAllowAll(this.browserModal.getRoot().find("input[type=\"checkbox\"][data-filetypesbrowserkey=\"*\"]:first"));this.browserModal.getRoot().on("change","input[type=\"checkbox\"][data-filetypesbrowserkey=\"*\"]",function(b){this.hideOrShowItemsDependingOnAllowAll(a(b.currentTarget))}.bind(this))}this.browserModal.getRoot().on("change","input[type=\"checkbox\"][data-filetypesbrowserkey]",function(b){var c=a(b.currentTarget),d=c.attr("data-filetypesbrowserkey");this.browserModal.getRoot().find("input[type=\"checkbox\"][data-filetypesbrowserkey=\""+d+"\"]").prop("checked",c.prop("checked"))}.bind(this))}.bind(this)).then(function(){this.browserModal.show()}.bind(this));this.browserModal.setBody(c)}.bind(this));return a.when()};i.prototype.loadBrowserModalBody=function(){var a={onlytypes:this.onlyTypes.join(),allowall:this.allowAll,current:this.inputField.val()};return f.call([{methodname:"core_form_get_filetypes_browser_data",args:a}])[0].then(function(a){return g.render("core_form/filetypes-browser",{elementid:this.elementId,groups:a.groups})}.bind(this))};i.prototype.toggleCheckbox=function(a){var b=this.browserModal.getRoot().find("input[type=\"checkbox\"][data-filetypesbrowserkey=\""+a+"\"]:first");b.prop("checked",!b.prop("checked"))};i.prototype.saveBrowserModal=function(){if(this.allowAll){var b=this.browserModal.getRoot().find("input[type=\"checkbox\"][data-filetypesbrowserkey=\"*\"]");if(b.length&&b.prop("checked")){this.inputField.val("*");this.updateDescriptions(["*"]);return}}var c=[];this.browserModal.getRoot().find("input[type=\"checkbox\"]").each(function(){var b=a(this),d=b.attr("data-filetypesbrowserkey");if(b.prop("checked")){c.push(d)}});c=c.filter(function(b,c,d){return d.indexOf(b)==c});this.inputField.val(c.join(" "));this.updateDescriptions(c)};i.prototype.updateDescriptions=function(a){var b=[];a.forEach(function(a){b.push({description:this.browserModal.getRoot().find("[data-filetypesname=\""+a+"\"]:first").text().trim(),extensions:this.browserModal.getRoot().find("[data-filetypesextensions=\""+a+"\"]:first").text().trim()})}.bind(this));var c={hasdescriptions:0<b.length,descriptions:b};return g.render("core_form/filetypes-descriptions",c).then(function(a){this.wrapperDescriptions.html(a)}.bind(this))};i.prototype.hideOrShowItemsDependingOnAllowAll=function(a){var b=this.browserModal.getRoot().find("[role=\"treeitem\"][data-filetypesbrowserkey!=\"*\"]");if(a.prop("checked")){b.hide()}else{b.show()}};return{init:function init(a,b,c,d){new i(a,b,c,d)}}});
define ("core_form/defaultcustom",["jquery"],function(a){a("body").on("change","input[data-defaultcustom=true]",function onChangeSelect(b){var c=a(b.target),d=JSON.parse(c.attr("data-defaultvalue")),e=JSON.parse(c.attr("data-customvalue")),f=c.attr("data-type"),g=c.closest("form"),h=c.attr("name").replace(/\[customize\]$/,"[value]"),i=c.prop("checked")?e:d;if("text"===f){g.find("[name=\""+h+"\"]").val(i)}else if("date_selector"===f){g.find("[name=\""+h+"[day]\"]").val(i.day);g.find("[name=\""+h+"[month]\"]").val(i.month);g.find("[name=\""+h+"[year]\"]").val(i.year)}else if("date_time_selector"===f){g.find("[name=\""+h+"[day]\"]").val(i.day);g.find("[name=\""+h+"[month]\"]").val(i.month);g.find("[name=\""+h+"[year]\"]").val(i.year);g.find("[name=\""+h+"[hour]\"]").val(i.hour);g.find("[name=\""+h+"[minute]\"]").val(i.minute)}})});
define ("core_form/showadvanced",["jquery","core/log","core/str","core/notification"],function(a,b,c,d){var f={FIELDSETCONTAINSADVANCED:"fieldset.containsadvancedelements",DIVFITEMADVANCED:"div.fitem.advanced",DIVFCONTAINER:"div.fcontainer",MORELESSLINK:"fieldset.containsadvancedelements .moreless-toggler"},g={SHOW:"show",MORELESSACTIONS:"moreless-actions",MORELESSTOGGLER:"moreless-toggler",SHOWLESS:"moreless-less"},h={FITEM:"<div class=\"fitem\"></div>",FELEMENT:"<div class=\"felement\"></div>"},i=0,j=function(b){this.id=b;var c=a(document.getElementById(b));this.enhanceForm(c)};j.prototype.id="";j.prototype.enhanceForm=function(b){var c=b.find(f.FIELDSETCONTAINSADVANCED);c.each(function(b,c){this.enhanceFieldset(a(c))}.bind(this));b.on("click",f.MORELESSLINK,this.switchState);b.on("keydown",f.MORELESSLINK,function(a){if(13==a.which||32==a.which){return this.switchState(a)}return!0}.bind(this));return this};j.prototype.generateId=function(a){var b=a.prop("id");if("undefined"==typeof b){b="showadvancedid-"+i++;a.prop("id",b)}return b};j.prototype.enhanceFieldset=function(e){var i=a("input[name=mform_showmore_"+e.prop("id")+"]");if(!i.length){b.debug("M.form.showadvanced::processFieldset was called on an fieldset without a status field: '"+e.prop("id")+"'");return this}c.get_strings([{key:"showmore",component:"core_form"},{key:"showless",component:"core_form"}]).then(function(b){var c=b[0],d=b[1],j=a("<a href=\"#\"></a>");j.addClass(g.MORELESSTOGGLER);if("0"===i.val()){j.html(c)}else{j.html(d);j.addClass(g.SHOWLESS);e.find(f.DIVFITEMADVANCED).addClass(g.SHOW)}var k=[];e.find(f.DIVFITEMADVANCED).each(function(b,c){k[k.length]=this.generateId(a(c))}.bind(this));j.attr("role","button");j.attr("aria-controls",k.join(" "));var l=a(h.FITEM);l.addClass(g.MORELESSACTIONS);var m=a(h.FELEMENT);m.append(j);l.append(m);e.find(f.DIVFCONTAINER).append(l);return!0}.bind(this)).fail(d.exception);return this};j.prototype.switchState=function(b){b.preventDefault();c.get_strings([{key:"showmore",component:"core_form"},{key:"showless",component:"core_form"}]).then(function(c){var d=c[0],e=c[1],h=a(b.target).closest(f.FIELDSETCONTAINSADVANCED);h.find(f.DIVFITEMADVANCED).toggleClass(g.SHOW);var i=a("input[name=mform_showmore_"+h.prop("id")+"]");if("0"===i.val()){i.val(1);a(b.target).addClass(g.SHOWLESS);a(b.target).html(e)}else{i.val(0);a(b.target).removeClass(g.SHOWLESS);a(b.target).html(d)}return!0}).fail(d.exception);return this};return{init:function init(a){return new j(a)}}});
define ("core_grades/edittree_index",["jquery"],function(a){var b=function(){a("body").on("change",".itemselect.ignoredirty",b.checkMoveMenuState);a("body").on("click","[data-action=\"grade_edittree-index-bulkselect\"]",b.toggleAllSelectItems);a("body").on("change",".weightoverride",b.toggleWeightInput);a("#menumoveafter").on("change",function(){var b=a(this).closest("form"),c=b.find("#bulkmoveinput");c.val(1);b.submit()});b.checkMoveMenuState()};b.toggleWeightInput=function(b){b.preventDefault();var c=a(this),d=c.closest("tr");a("input[name=\"weight_"+d.data("itemid")+"\"]").prop("disabled",!c.prop("checked"))};b.toggleAllSelectItems=function(c){c.preventDefault();var d=a(this),e=d.closest("tr");a("."+e.data("category")+" .itemselect").prop("checked",d.data("checked"));b.checkMoveMenuState()};b.getMoveMenu=function(){return a("#menumoveafter")};b.checkMoveMenuState=function(){var c=b.getMoveMenu();if(!c.length){return!1}var d;a(".itemselect").each(function(){d=a(this).prop("checked");return!d});c.prop("disabled",!d);return d};return{enhance:b}});
define ("core_grades/grades/grader/gradingpanel/scale",["exports","./repository","core_grades/grades/grader/gradingpanel/comparison","jquery","./normalise"],function(a,b,c,d,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.storeCurrentGrade=a.fetchCurrentGrade=void 0;d=function(a){return a&&a.__esModule?a:{default:a}}(d);a.fetchCurrentGrade=function fetchCurrentGrade(){return(0,b.fetchGrade)("scale").apply(void 0,arguments)};var f=function(a,f,g,h,i,j){var k=j.querySelector("form"),l=k.querySelector("select[name=\"grade\"]");if(!l.checkValidity()||!l.value.trim()){return e.invalidResult}if(!0===(0,c.compareData)(k)){return(0,b.saveGrade)("scale")(a,f,g,h,i,(0,d.default)(k).serialize())}else{return""}};a.storeCurrentGrade=f});
define ("core_grades/grades/grader/gradingpanel/repository",["exports","core/ajax","./normalise"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.saveGrade=a.fetchGrade=void 0;function d(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}if(h.done){b(i)}else{Promise.resolve(i).then(d,e)}}function e(a){return function(){var b=this,c=arguments;return new Promise(function(e,f){var i=a.apply(b,c);function g(a){d(i,e,f,g,h,"next",a)}function h(a){d(i,e,f,g,h,"throw",a)}g(void 0)})}}a.fetchGrade=function fetchGrade(a){return function(c,d,e,f){return(0,b.call)([{methodname:"core_grades_grader_gradingpanel_".concat(a,"_fetch"),args:{component:c,contextid:d,itemname:e,gradeduserid:f}}])[0]}};a.saveGrade=function saveGrade(a){return function(){var d=e(regeneratorRuntime.mark(function d(e,f,g,h,i,j){return regeneratorRuntime.wrap(function(d){while(1){switch(d.prev=d.next){case 0:d.t0=c.normaliseResult;d.next=3;return(0,b.call)([{methodname:"core_grades_grader_gradingpanel_".concat(a,"_store"),args:{component:e,contextid:f,itemname:g,gradeduserid:h,notifyuser:i,formdata:j}}])[0];case 3:d.t1=d.sent;return d.abrupt("return",(0,d.t0)(d.t1));case 5:case"end":return d.stop();}}},d)}));return function(){return d.apply(this,arguments)}}()}});
define ("core_grades/grades/grader/gradingpanel/point",["exports","./repository","core_grades/grades/grader/gradingpanel/comparison","jquery","./normalise"],function(a,b,c,d,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.storeCurrentGrade=a.fetchCurrentGrade=void 0;d=function(a){return a&&a.__esModule?a:{default:a}}(d);function f(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}if(h.done){b(i)}else{Promise.resolve(i).then(d,e)}}function g(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var i=a.apply(b,c);function g(a){f(i,d,e,g,h,"next",a)}function h(a){f(i,d,e,g,h,"throw",a)}g(void 0)})}}a.fetchCurrentGrade=function fetchCurrentGrade(){return(0,b.fetchGrade)("point").apply(void 0,arguments)};var h=function(){var a=g(regeneratorRuntime.mark(function a(f,g,h,i,j,k){var l,m;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:l=k.querySelector("form");m=l.querySelector("input[name=\"grade\"]");if(!(!m.checkValidity()||!m.value.trim())){a.next=4;break}return a.abrupt("return",e.invalidResult);case 4:if(!(!0===(0,c.compareData)(l))){a.next=10;break}a.next=7;return(0,b.saveGrade)("point")(f,g,h,i,j,(0,d.default)(l).serialize());case 7:return a.abrupt("return",a.sent);case 10:return a.abrupt("return","");case 11:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}();a.storeCurrentGrade=h});
define ("core_grades/grades/grader/gradingpanel/comparison",["exports"],function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.compareData=a.fillInitialValues=void 0;var b=function(a){Array.prototype.forEach.call(a.elements,function(a){if("submit"===a.type||"button"===a.type){}else if("radio"===a.type||"checkbox"===a.type){a.dataset.initialValue=JSON.stringify(a.checked)}else if("undefined"!=typeof a.value){a.dataset.initialValue=JSON.stringify(a.value)}else if("select-one"===a.type){Array.prototype.forEach.call(a.options,function(a){a.dataset.initialValue=JSON.stringify(a.selected)})}})};a.fillInitialValues=b;a.compareData=function compareData(a){var c=Array.prototype.some.call(a.elements,function(a){if("submit"===a.type||"button"===a.type){return!1}else if("radio"===a.type||"checkbox"===a.type){if("undefined"!=typeof a.dataset.initialValue){return a.dataset.initialValue!==JSON.stringify(a.checked)}}else if("undefined"!=typeof a.value){if("undefined"!=typeof a.dataset.initialValue){return a.dataset.initialValue!==JSON.stringify(a.value)}}else if("select-one"===a.type){return Array.prototype.some.call(a.options,function(a){if("undefined"!=typeof a.dataset.initialValue){return a.dataset.initialValue!==JSON.stringify(a.selected)}return!1})}return!0});b(a);return c}});
define ("core_grades/grades/grader/gradingpanel/normalise",["exports"],function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.failedUpdate=a.invalidResult=a.normaliseResult=void 0;a.normaliseResult=function normaliseResult(a){return{result:a,failed:!!a.warnings.length,success:!a.warnings.length,error:null}};a.invalidResult=function invalidResult(){return{success:!1,failed:!1,result:{},error:null}};a.failedUpdate=function failedUpdate(a){return{success:!1,failed:!0,result:{},error:a}}});
function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("core_message/message_drawer_view_conversation_patcher",["jquery","core/user_date","core_message/message_drawer_view_conversation_constants"],function(a,b,c){var d=function(a,c){var d=a.reduce(function(a,d){var e=d.timeCreated?d.timeCreated:c,f=b.getUserMidnightForTimestamp(e,c);if(a.hasOwnProperty(f)){a[f].push(d)}else{a[f]=[d]}return a},{});return Object.keys(d).map(function(a){return{timestamp:a,messages:d[a]}})},e=function(c,a,d){a=a.slice();var e=[],f=[],g=[];c.forEach(function(b){var c=!1,e=0;for(;e<a.length;e++){var h=a[e];if(d(b,h)){c=!0;g.push({a:b,b:h});break}}if(c){a.splice(e,1)}else{f.push(b)}});e=a;return{missingFromA:e,missingFromB:f,matches:g}},f=function(a,b){for(var c=null,d=0,e;d<a.length;d++){e=a[d];if(b(e)){return e}}return c},g=function(c,d){c=c.slice();d=d.slice();c.sort();d.sort();var e=c.length,f=d.length;if(1>e&&1>f){return!0}if(e!=f){return!1}return c.every(function(a,b){return a==d[b]})},h=function(c,a){var b=Object.keys(c),d=Object.keys(a);if(b.length!=d.length){return!1}return b.every(function(b){var d=c[b],e=a[b],f=_typeof(d),i=_typeof(e);f=null===d?"null":f;i=null===d?"null":i;f="object"===f&&Array.isArray(f)?"array":f;i="object"===i&&Array.isArray(i)?"array":i;if(f!==i){return!1}switch(f){case"object":return h(d,e);case"array":return g(d,e);default:return c[b]==a[b];}})},i=function(c,a){return h({id:c.id,state:c.sendState,text:c.text,timeCreated:c.timeCreated},{id:a.id,state:a.sendState,text:a.text,timeCreated:a.timeCreated})},j=function(a,b,c){return{remove:b,add:c.map(function(b){var c=f(a,function(a){return b.timestamp<a.timestamp});return{before:c,value:b}})}},k=function(a){var b=[],c=[],d=[];a.forEach(function(a){var g=a.a,h=a.b,j=e(g.messages,h.messages,i),k=e(j.missingFromB,j.missingFromA,function(c,a){return c.id==a.id||c.sendState!=a.sendState&&c.timeAdded==a.timeAdded});b=b.concat(k.missingFromB);k.missingFromA.forEach(function(a){var b=null;if(a.timeCreated){b=f(g.messages,function(b){if(a.timeCreated==b.timeCreated){return a.id<b.id}else{return a.timeCreated<b.timeCreated}})}c.push({before:b,value:a,day:g})});d=d.concat(k.matches.map(function(a){return{before:a.a,after:a.b}}))});return{add:c,remove:b,update:d}},l=function(a,b){var c=e(a.messages,b.messages,i);if(c.missingFromA.length||c.missingFromB.length){var f=d(a.messages,a.midnight),g=d(b.messages,b.midnight),h=e(f,g,function(a,b){return a.timestamp==b.timestamp});return{days:j(f,h.missingFromB,h.missingFromA),messages:k(h.matches)}}else{return null}},m=function(a,b){var d=L(a,b),e=B(a,b),f=J(a),g=J(b),h=d&&d.show&&!d.hasMessages,i=d&&!d.show,j=!f&&g;j=j||h||i;j=j||null!==e;if(j){return{type:c.CONVERSATION_TYPES.PRIVATE,showControls:!h&&!e,context:{id:b.id,name:b.name,subname:b.subname,totalmembercount:b.totalMemberCount,imageurl:b.imageUrl,isfavourite:b.isFavourite,ismuted:b.isMuted,showfavourite:null!==b.id,userid:g.id,showonlinestatus:g.showonlinestatus,isonline:g.isonline,isblocked:g.isblocked,iscontact:g.iscontact}}}return null},n=function(a,b){var d=null===a.name&&null!==b.name;if(d){return{type:c.CONVERSATION_TYPES.SELF,showControls:!1,context:{id:b.id,name:b.name,subname:b.subname,imageurl:b.imageUrl,isfavourite:b.isFavourite,showfavourite:null!==b.id,showonlinestatus:!0}}}return null},o=function(a,b){var d=a.totalMemberCount,e=b.totalMemberCount;if(d!=e){return{type:c.CONVERSATION_TYPES.PUBLIC,showControls:!0,context:{id:b.id,name:b.name,subname:b.subname,totalmembercount:b.totalMemberCount,imageurl:b.imageUrl,isfavourite:b.isFavourite,ismuted:b.isMuted,showfavourite:null!==b.id}}}else{return null}},p=function(a,b){var c=a.messages,d=b.messages;if(1>d.length){return null}if(1>c.length){return d[d.length-1].id}var e=c[a.messages.length-1],f=d[d.length-1],g=c[0],h=d[0];if(e.id!=f.id){return f.id}else if(g.id!=h.id){return g.id}return null},q=function(a,b){if(!a.loadingMembers&&b.loadingMembers){return!0}else if(a.loadingMembers&&!b.loadingMembers){return!1}else{return null}},r=function(a,b){if(a.hasTriedToLoadMessages===b.hasTriedToLoadMessages){return null}else if(!b.hasTriedToLoadMessages&&b.loadingMessages){return!0}else if(b.hasTriedToLoadMessages&&!b.loadingMessages){return!1}else{return null}},s=function(a,b){if(!a.loadingMessages&&b.loadingMessages){return!0}else if(a.loadingMessages&&!b.loadingMessages){return!1}else{return null}},t=function(a,b){if(!a.showEmojiPicker&&b.showEmojiPicker){return!0}else if(a.showEmojiPicker&&!b.showEmojiPicker){return!1}else{return null}},u=function(a,b){if(!a.showEmojiAutoComplete&&b.showEmojiAutoComplete){return!0}else if(a.showEmojiAutoComplete&&!b.showEmojiAutoComplete){return!1}else{return null}},v=function(a,b){if(b.pendingBlockUserIds.length){var c=b.pendingBlockUserIds[0];return b.members[c]}else if(a.pendingBlockUserIds.length){return!1}return null},w=function(a,b){if(b.pendingUnblockUserIds.length){var c=b.pendingUnblockUserIds[0];return b.members[c]}else if(a.pendingUnblockUserIds.length){return!1}return null},x=function(a,b){if(b.pendingAddContactIds.length){var c=b.pendingAddContactIds[0];return b.members[c]}else if(a.pendingAddContactIds.length){return!1}return null},y=function(a,b){if(b.pendingRemoveContactIds.length){var c=b.pendingRemoveContactIds[0];return b.members[c]}else if(a.pendingRemoveContactIds.length){return!1}return null},z=function(a,b){var c=a.pendingDeleteMessageIds.length,d=b.pendingDeleteMessageIds.length;if(d&&!c){return{show:!0,type:b.type,canDeleteMessagesForAllUsers:b.canDeleteMessagesForAllUsers}}else if(c&&!d){return{show:!1}}return null},A=function(a,b){if(!a.pendingDeleteConversation&&b.pendingDeleteConversation){return b.type}else if(a.pendingDeleteConversation&&!b.pendingDeleteConversation){return!1}return null},B=function(a,b){var c=a.loggedInUserId,d=J(a),e=J(b),f=!d?[]:d.contactrequests.filter(function(a){return a.requesteduserid==c&&a.userid==d.id}),g=!e?[]:e.contactrequests.filter(function(a){return a.requesteduserid==c&&a.userid==e.id}),h=f.length?f[0]:null,i=g.length?g[0]:null;if(!h&&i){return e}else if(h&&!i){return!1}else{return null}},C=function(a,b){var c=J(a),d=J(b);if(!c&&!d){return null}else if(!c&&d){return d.isblocked?!0:null}else if(!d&&c){return c.isblocked?!1:null}else if(c.isblocked&&!d.isblocked){return!1}else if(!c.isblocked&&d.isblocked){return!0}else{return null}},D=function(a,b){var c=a.isFavourite,d=b.isFavourite;if(null===a.id&&null===b.id){return null}else if(null===a.id&&null!==b.id){return"show-add"}else if(null!==a.id&&null===b.id){return"hide"}else if(c==d){return null}else if(!c&&d){return"show-remove"}else if(c&&!d){return"show-add"}else{return null}},E=function(a,b){var c=a.isMuted,d=b.isMuted;if(null===a.id&&null===b.id){return null}else if(null===a.id&&null!==b.id){return"show-mute"}else if(null!==a.id&&null===b.id){return"hide"}else if(c==d){return null}else if(!c&&d){return"show-unmute"}else if(c&&!d){return"show-mute"}else{return null}},F=function(a,b){var c=a.loggedInUserId,d=J(a),e=J(b),f=!d?[]:d.contactrequests.filter(function(a){return a.userid==c&&a.requesteduserid==d.id||a.userid==d.id&&a.requesteduserid==c}),g=!e?[]:e.contactrequests.filter(function(a){return a.userid==c&&a.requesteduserid==e.id||a.userid==e.id&&a.requesteduserid==c}),h=0<f.length,i=0<g.length;if(!d&&!e){return null}else if(h&&i){return null}else if(!h&&i&&!e.iscontact){return"pending-contact"}else if(!d&&e){return e.iscontact?"contact":null}else if(!e&&d){return d.iscontact?"non-contact":null}else if(d.iscontact&&!e.iscontact){return i?"pending-contact":"non-contact"}else if(!d.iscontact&&e.iscontact){return"contact"}else{return null}},G=function(a,b){if(!a.loadingConfirmAction&&b.loadingConfirmAction){return!0}else if(a.loadingConfirmAction&&!b.loadingConfirmAction){return!1}else{return null}},H=function(a,b){var c=0<a.selectedMessageIds.length,d=0<b.selectedMessageIds.length,e=a.messages.length!=b.messages.length;if(!c&&d){return!0}else if(c&&!d){return!1}else if(c&&e){return!0}else{return null}},I=function(a,b){var c=a.selectedMessageIds,d=b.selectedMessageIds;if(g(c,d)){return null}var f=e(c,d,function(c,a){return c==a});return{count:d.length,add:f.missingFromA,remove:f.missingFromB}},J=function(a){return Object.keys(a.members).reduce(function(b,c){if(c!=a.loggedInUserId&&!b){b=a.members[c]}return b},null)},K=function(a,b){if(b.canmessage){return!1}var c=b.contactrequests.filter(function(b){return b.userid==a||b.requesteduserid}),d=0<c.length;return b.requirescontact&&!b.iscontact&&!d},L=function(a,b){var c=J(a),d=J(b),e=0<a.messages.length,f=0<b.messages.length,g=b.loggedInUserId,h=c&&K(g,c),i=d&&K(g,d),j=x(a,b);if(!a.hasTriedToLoadMessages&&!b.hasTriedToLoadMessages){return null}if(!c&&!d){return null}if(!c&&i){return{show:!0,hasMessages:f,user:d}}if(!1===j&&i){return{show:!0,hasMessages:f,user:d}}if(a.hasTriedToLoadMessages&&b.hasTriedToLoadMessages){if(!h&&i){return{show:!0,hasMessages:f,user:d}}if(h&&!i){return{show:!1,hasMessages:f}}}if(!a.hasTriedToLoadMessages&&b.hasTriedToLoadMessages){if(i){return{show:!0,hasMessages:f,user:d}}}if(a.hasTriedToLoadMessages&&!b.hasTriedToLoadMessages){if(h){return{show:!1,hasMessages:e}}}return null},M=function(a,b){var c=J(a),d=J(b);if(!c&&!d){return null}else if(c&&!d){return c.isblocked?!1:null}else if(!c&&d){return d.isblocked?!0:null}else if(!c.isblocked&&d.isblocked){return!0}else if(c.isblocked&&!d.isblocked){return!1}return null},N=function(a,b){var d=J(a),e=J(b);if(b.type==c.CONVERSATION_TYPES.SELF){return null}if(!d&&!e){return null}else if(d&&!e){return d.canmessage?null:!0}else if(!d&&e){return e.canmessage?null:!0}else if(!d.canmessage&&e.canmessage){return!1}else if(d.canmessage&&!e.canmessage){return!0}return null},O=function(a,b){var c=r(a,b),d=H(a,b),e=L(a,b),f=M(a,b),g=N(a,b),h=null!==e?e.show&&e.hasMessages:null,j=J(b),k=function(a,c){if(a){return c}else if(null!==a&&!a){if(!j){return{type:"content"}}else if(j.isblocked){return{type:"unblock"}}else if(b.messages.length&&K(b.loggedInUserId,j)){return{type:"add-contact",user:j}}else if(!j.canmessage&&j.requirescontact&&!j.iscontact){return{type:"unable-to-message"}}}return null};if(null===c&&null===d&&null===e&&null===f){return null}for(var l=[[c,{type:"placeholder"}],[d,{type:"edit-mode"}],[g,{type:"unable-to-message"}],[f,{type:"unblock"}],[h,{type:"add-contact",user:j}]],m=0;m<l.length;m++){var n=l[m][0],o=l[m][1],p=k(n,o);if(null!==p){return p}}return{type:"content"}},P=function(a,b){var c=r(a,b),d=H(a,b);if(null===c&&null===d){return null}if(c){return{type:"placeholder"}}if(d){return{type:"edit-mode"}}return{type:"content"}},Q=function(a,b){var c=a.type,d=b.type,e=a.id,f=b.id,g=Object.keys(a.members),h=Object.keys(b.members);g.sort();h.sort();var i=g.every(function(a,b){return a==h[b]});if(c!=d){return!0}else if(e&&!f){return!0}else if(e&&f&&e!=f){return!0}else if(!e&&!f&&!i){return!0}return null},R=function(a,b){if(a.type!=b.type){return b.type==c.CONVERSATION_TYPES.SELF}return null},S=function(a,b){var c=b.loggedInUserId,d=J(a),e=J(b),f=!d?[]:d.contactrequests.filter(function(a){return a.userid==c}),g=!e?[]:e.contactrequests.filter(function(a){return a.userid==c}),h=0<f.length,i=0<g.length,j=0<a.messages.length,k=0<a.messages.length;if(!h&&i&&!e.iscontact&&!k){return e.fullname}else if(d&&!d.iscontact&&i&&e.iscontact){return!1}else if(h&&!i){return!1}else if(!j&&k){return!1}else{return null}},T=function(b,d){var e={all:{reset:Q,conversation:l,scrollToMessage:p,loadingMembers:q,loadingFirstMessages:r,loadingMessages:s,confirmDeleteSelectedMessages:z,inEditMode:H,selectedMessages:I,isFavourite:D,isMuted:E,showEmojiPicker:t,showEmojiAutoComplete:u}};e[c.CONVERSATION_TYPES.PRIVATE]={header:m,footer:O,confirmBlockUser:v,confirmUnblockUser:w,confirmAddContact:x,confirmRemoveContact:y,confirmContactRequest:B,confirmDeleteConversation:A,isBlocked:C,isContact:F,loadingConfirmAction:G,requireAddContact:L,contactRequestSent:S};e[c.CONVERSATION_TYPES.PUBLIC]={header:o,footer:P};e[c.CONVERSATION_TYPES.SELF]={header:n,footer:P,confirmDeleteConversation:A,selfConversationMessage:R};var f=a.extend({},e.all);if(d.type&&d.type in e){f=a.extend(f,e[d.type])}return Object.keys(f).reduce(function(a,c){var e=f[c],g=e(b,d);if(null!==g){a[c]=g}return a},{})};return{buildPatch:T}});
define ("core_message/message_send_bulk",["exports","core/str","core/modal_factory","core/templates","core/modal_events","core/ajax","core/notification"],function(a,b,c,d,e,f,g){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.sendMessage=a.showModal=void 0;c=h(c);d=h(d);e=h(e);f=h(f);g=h(g);function h(a){return a&&a.__esModule?a:{default:a}}var i=function(a){var f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;if(!a.length){return Promise.resolve()}var g=null;if(1==a.length){g=(0,b.get_string)("sendbulkmessagesingle","core_message")}else{g=(0,b.get_string)("sendbulkmessage","core_message",a.length)}return c.default.create({type:c.default.types.SAVE_CANCEL,body:d.default.render("core_message/send_bulk_message",{}),title:g}).then(function(b){b.setSaveButtonText(g);b.getRoot().on(e.default.hidden,function(){if(f){f()}b.getRoot().remove()});b.getRoot().on(e.default.save,function(){var c=b.getRoot().find("form textarea").val();j(c,a)});b.show();return b})};a.showModal=i;var j=function(a,c){var d=[];c.forEach(function(b){d.push({touserid:b,text:a})});return f.default.call([{methodname:"core_message_send_instant_messages",args:{messages:d}}])[0].then(function(a){if(1==a.length){return(0,b.get_string)("sendbulkmessagesentsingle","core_message")}else{return(0,b.get_string)("sendbulkmessagesent","core_message",a.length)}}).then(function(a){g.default.addNotification({message:a,type:"success"});return!0}).catch(g.default.exception)};a.sendMessage=j});
define ("core_message/message_drawer_view_conversation_renderer",["jquery","core/notification","core/str","core/templates","core/user_date","core_message/message_drawer_view_conversation_constants"],function(a,b,c,d,e,f){var g=f.SELECTORS,h=f.TEMPLATES,i=f.CONVERSATION_TYPES,j=function(a){return a.find(g.CONTENT_MESSAGES_CONTAINER)},k=function(a){j(a).removeClass("hidden")},l=function(a){j(a).addClass("hidden")},m=function(a){return a.find(g.SELF_CONVERSATION_MESSAGE_CONTAINER)},n=function(a){return m(a).addClass("hidden")},o=function(a){return a.find(g.CONTACT_REQUEST_SENT_MESSAGE_CONTAINER)},p=function(a){return o(a).addClass("hidden")},q=function(a){return a.find(g.CONTENT_MESSAGES_FOOTER_CONTAINER)},r=function(a){q(a).removeClass("hidden")},s=function(a){q(a).addClass("hidden")},t=function(a){return a.find(g.CONTENT_MESSAGES_FOOTER_EDIT_MODE_CONTAINER)},u=function(a){t(a).removeClass("hidden")},v=function(a){t(a).addClass("hidden")},w=function(a){return a.find(g.PLACEHOLDER_CONTAINER)},x=function(a){w(a).removeClass("hidden")},y=function(a){w(a).addClass("hidden")},z=function(a){return a.find(g.CONTENT_MESSAGES_FOOTER_REQUIRE_CONTACT_CONTAINER)},A=function(a){z(a).removeClass("hidden")},B=function(a){z(a).addClass("hidden")},C=function(a){return a.find(g.CONTENT_MESSAGES_FOOTER_REQUIRE_UNBLOCK_CONTAINER)},D=function(a){C(a).removeClass("hidden")},E=function(a){C(a).addClass("hidden")},F=function(a){return a.find(g.CONTENT_MESSAGES_FOOTER_UNABLE_TO_MESSAGE_CONTAINER)},G=function(a){F(a).removeClass("hidden")},H=function(a){F(a).addClass("hidden")},I=function(a){P(a);S(a);V(a)},J=function(a){s(a);v(a);y(a);B(a);E(a);H(a)},K=function(a){return a.find(g.CONTENT_PLACEHOLDER_CONTAINER)},L=function(a){K(a).removeClass("hidden")},M=function(a){K(a).addClass("hidden")},N=function(a){return a.find(g.HEADER)},O=function(a){N(a).removeClass("hidden")},P=function(a){N(a).addClass("hidden")},Q=function(a){return a.find(g.HEADER_EDIT_MODE)},R=function(a){Q(a).removeClass("hidden")},S=function(a){Q(a).addClass("hidden")},T=function(a){return a.find(g.HEADER_PLACEHOLDER_CONTAINER)},U=function(a){T(a).removeClass("hidden")},V=function(a){T(a).addClass("hidden")},W=function(a){return a.find(g.EMOJI_PICKER_CONTAINER)},X=function(a){return a.find(g.EMOJI_AUTO_COMPLETE_CONTAINER)},Y=function(a,b){var c=j(a);return c.find("[data-message-id=\""+b+"\"]")},Z=function(a,b){var c=j(a);return c.find("[data-day-id=\""+b+"\"]")},$=function(a){return a.find(g.MORE_MESSAGES_LOADING_ICON_CONTAINER)},_=function(a){$(a).removeClass("hidden")},aa=function(a){$(a).addClass("hidden")},ba=function(a){return a.find(g.CONFIRM_DIALOGUE_CONTAINER)},ca=function(a){var b=ba(a),c=b.siblings(":not(.hidden)");c.attr("aria-hidden",!0);c.attr("tabindex",-1);c.attr("data-confirm-dialogue-hidden",!0);b.removeClass("hidden")},da=function(a){var b=ba(a),c=b.siblings("[data-confirm-dialogue-hidden=\"true\"]");c.removeAttr("aria-hidden");c.removeAttr("tabindex");c.removeAttr("data-confirm-dialogue-hidden");b.addClass("hidden")},ea=function(a,b){Q(a).find(g.MESSAGES_SELECTED_COUNT).text(b)},fa=function(a,b){return a.map(function(a){return{id:a.id,isread:a.isRead,fromloggedinuser:a.fromLoggedInUser,userfrom:a.userFrom,text:a.text,formattedtime:a.timeCreated?b[a.timeCreated]:null}})},ga=function(b,c,e,f,g){var i=j(c),k=f.map(function(a){return d.render(h.DAY,{timestamp:a.value.timestamp,messages:fa(a.value.messages,g)})});return a.when.apply(a,k).then(function(){f.forEach(function(b,d){k[d].then(function(d){if(b.before){var e=Z(c,b.before.timestamp);return a(d).insertBefore(e)}else{return i.append(d)}}).catch(function(){})})})},ha=function(b,c,e,f,i){var j=f.map(function(a){return a.value}),k=fa(j,i);return d.render(h.MESSAGES,{messages:k}).then(function(b){var d=a(b);f.forEach(function(a){var b=d.find("[data-message-id=\""+a.value.id+"\"]");if(a.before){var e=Y(c,a.before.id);return b.insertBefore(e)}else{var f=Z(c,a.day.timestamp),h=f.find(g.DAY_MESSAGES_CONTAINER);return h.append(b)}})})},ia=function(a,b,c,d,e){d.forEach(function(a){var c=a.before,d=a.after,f=Y(b,c.id);if(c.id!=d.id){f.attr("data-message-id",d.id)}if(c.timeCreated!=d.timeCreated){var h=e[d.timeCreated];f.find(g.LOADING_ICON_CONTAINER).addClass("hidden");f.find(g.TIME_CREATED).text(h).removeClass("hidden")}if(c.sendState!=d.sendState){var i=f.find(g.LOADING_ICON_CONTAINER),j=f.find(g.TIME_CREATED),k=f.find(g.RETRY_SEND);i.addClass("hidden");i.attr("aria-hidden","true");j.addClass("hidden");j.attr("aria-hidden","true");k.addClass("hidden");k.attr("aria-hidden","true");f.removeClass("border border-danger");switch(d.sendState){case"pending":i.removeClass("hidden");i.attr("aria-hidden","false");break;case"error":k.removeClass("hidden");k.attr("aria-hidden","false");f.addClass("border border-danger");break;case"sent":j.removeClass("hidden");j.attr("aria-hidden","false");break;}}if(c.text!=d.text){f.find(g.TEXT_CONTAINER).html(d.text)}if(c.errorMessage!=d.errorMessage){var l=f.find(g.ERROR_MESSAGE_CONTAINER),a=l.find(g.ERROR_MESSAGE);if(d.errorMessage){l.removeClass("hidden");l.attr("aria-hidden","false");a.text(d.errorMessage)}else{l.addClass("hidden");l.attr("aria-hidden","true");a.text("")}}})},ja=function(a,b){b.forEach(function(b){Z(a,b.timestamp).remove()})},ka=function(a,b){b.forEach(function(b){Y(a,b.id).remove()})},la=function(b,d,f,g){var h=[],i=0<g.days.add.length,j=0<g.messages.add.length,k=0<g.messages.update.length,l=[],m=a.Deferred().resolve({}).promise();if(i){l=l.concat(g.days.add.reduce(function(a,b){return a.concat(b.value.messages.reduce(function(a,b){if(b.timeCreated){a.push(b.timeCreated)}return a},[]))},[]))}if(j){l=l.concat(g.messages.add.reduce(function(a,b){if(b.value.timeCreated){a.push(b.value.timeCreated)}return a},[]))}if(k){l=l.concat(g.messages.update.reduce(function(a,b){if(b.before.timeCreated!=b.after.timeCreated){a.push(b.after.timeCreated)}return a},[]))}if(l.length){m=c.get_string("strftimetime24","core_langconfig").then(function(a){var b=l.map(function(b){return{timestamp:b,format:a}});return e.get(b)}).then(function(a){return l.reduce(function(b,c,d){b[c]=a[d];return b},{})})}if(i){h.push(m.then(function(a){return ga(b,d,f,g.days.add,a)}))}if(j){h.push(m.then(function(a){return ha(b,d,f,g.messages.add,a)}))}if(k){h.push(m.then(function(a){return ia(b,d,f,g.messages.update,a)}))}if(0<g.days.remove.length){ja(d,g.days.remove)}if(0<g.messages.remove.length){ka(d,g.messages.remove)}return a.when.apply(a,h)},ma=function(a,b,c,e){var f=N(a),g=h.HEADER_PUBLIC;e.context.showrouteback="false"===a.attr("data-from-panel");if(e.type==i.PRIVATE){g=e.showControls?h.HEADER_PRIVATE:h.HEADER_PRIVATE_NO_CONTROLS}else if(e.type==i.SELF){g=h.HEADER_SELF}return d.render(g,e.context).then(function(a,b){d.replaceNodeContents(f,a,b)})},na=function(a,b,d,e){J(d);switch(e.type){case"placeholder":return x(d);case"add-contact":return c.get_strings([{key:"requirecontacttomessage",component:"core_message",param:e.user.fullname},{key:"isnotinyourcontacts",component:"core_message",param:e.user.fullname}]).then(function(a){var b=a[1],c=a[0],e=z(d);e.find(g.TITLE).text(b);e.find(g.TEXT).text(c);A(d);return a});case"edit-mode":return u(d);case"content":return r(d);case"unblock":return D(d);case"unable-to-message":return G(d);}return!0},oa=function(a,b,c,d){var e=j(b),f=Y(b,d),g=f.position();if(g){var h=e.scrollTop()+g.top;e.scrollTop(h)}},pa=function(a,b,c,d){if(d){P(a);U(a)}else{O(a);V(a)}},qa=function(a,b,c,d){if(d){l(b);L(b)}else{k(b);M(b)}},ra=function(a,b,c,d){if(d){_(b)}else{aa(b)}},sa=function(a,b,c,d){var e=W(c);if(d){e.removeClass("hidden");e.attr("aria-hidden",!1);e.find(g.EMOJI_PICKER_SEARCH_INPUT).focus()}else{e.addClass("hidden");e.attr("aria-hidden",!0)}},ta=function(a,b,c,d){var e=X(c);if(d){e.removeClass("hidden");e.attr("aria-hidden",!1)}else{e.addClass("hidden");e.attr("aria-hidden",!0)}},ua=function(b,c,d,e,f,h,i,j,k){var l=ba(c),m=e.map(function(a){return l.find(a)}),n=l.find(g.CONFIRM_DIALOGUE_CANCEL_BUTTON),o=l.find(g.CONFIRM_DIALOGUE_OKAY_BUTTON),p=l.find(g.CONFIRM_DIALOGUE_TEXT),q=l.find(g.CONFIRM_DIALOGUE_HEADER);l.find("button").addClass("hidden");if(i){n.removeClass("hidden")}else{n.addClass("hidden")}if(k){o.removeClass("hidden")}else{o.addClass("hidden")}if(h){q=a("<h3 class=\"h6\" data-region=\"dialogue-header\"></h3>");q.text(h);var r=l.find(g.CONFIRM_DIALOGUE);r.prepend(q)}else if(q.length){q.remove()}m.forEach(function(a){a.removeClass("hidden")});p.text(f);ca(d);ca(c);if(!j){ca(b)}l.find(g.CAN_RECEIVE_FOCUS).filter(":visible").first().focus()},va=function(a,b,c){var d=ba(b),e=d.find(g.CONFIRM_DIALOGUE_CANCEL_BUTTON),f=d.find(g.CONFIRM_DIALOGUE_OKAY_BUTTON),h=d.find(g.CONFIRM_DIALOGUE_TEXT),i=d.find(g.CONFIRM_DIALOGUE_HEADER);Ea(b);da(b);da(c);da(a);d.find("button").addClass("hidden");e.removeClass("hidden");f.removeClass("hidden");h.text("");if(i.length){i.remove()}a.find(g.CAN_RECEIVE_FOCUS).first().focus();return!0},wa=function(a,b,d,e){if(e){if(e.canmessageevenifblocked){return c.get_string("cantblockuser","core_message",e.fullname).then(function(c){return ua(a,b,d,[],c,"",!1,!1,!0)})}else{return c.get_string("blockuserconfirm","core_message",e.fullname).then(function(c){return ua(a,b,d,[g.ACTION_CONFIRM_BLOCK],c,"",!0,!1)})}}else{return va(a,b,d)}},xa=function(a,b,d,e){if(e){return c.get_string("unblockuserconfirm","core_message",e.fullname).then(function(c){return ua(a,b,d,[g.ACTION_CONFIRM_UNBLOCK],c,"",!0,!1)})}else{return va(a,b,d)}},ya=function(a,b,d,e){if(e){return c.get_string("addcontactconfirm","core_message",e.fullname).then(function(c){return ua(a,b,d,[g.ACTION_CONFIRM_ADD_CONTACT],c,"",!0,!1)})}else{return va(a,b,d)}},za=function(a,b,d,e){if(e){return c.get_string("removecontactconfirm","core_message",e.fullname).then(function(c){return ua(a,b,d,[g.ACTION_CONFIRM_REMOVE_CONTACT],c,"",!0,!1)})}else{return va(a,b,d)}},Aa=function(a,b,d,e){var f=null;if(e.type==i.SELF){f="deleteselectedmessagesconfirmselfconversation"}else{if(e.canDeleteMessagesForAllUsers){Da(b);f="deleteforeveryoneselectedmessagesconfirm"}else{f="deleteselectedmessagesconfirm"}}if(e.show){return c.get_string(f,"core_message").then(function(c){return ua(a,b,d,[g.ACTION_CONFIRM_DELETE_SELECTED_MESSAGES],c,"",!0,!1)})}else{return va(a,b,d)}},Ba=function(a,b,d,e){var f=null;if(e==i.SELF){f="deleteallselfconfirm"}else if(e){f="deleteallconfirm"}if(f){return c.get_string(f,"core_message").then(function(c){return ua(a,b,d,[g.ACTION_CONFIRM_DELETE_CONVERSATION],c,"",!0,!1)})}else{return va(a,b,d)}},Ca=function(a,b,d,e){if(e){return c.get_string("userwouldliketocontactyou","core_message",e.fullname).then(function(c){var e=[g.ACTION_ACCEPT_CONTACT_REQUEST,g.ACTION_DECLINE_CONTACT_REQUEST];return ua(a,b,d,e,c,"",!1,!0)})}else{return va(a,b,d)}},Da=function(a){var b=ba(a),c=b.find(g.DELETE_MESSAGES_FOR_ALL_USERS_TOGGLE_CONTAINER);c.removeClass("hidden")},Ea=function(a){var b=ba(a),c=b.find(g.DELETE_MESSAGES_FOR_ALL_USERS_TOGGLE_CONTAINER),d=b.find(g.DELETE_MESSAGES_FOR_ALL_USERS_TOGGLE);d.prop("checked",!1);c.addClass("hidden")},Fa=function(a,b,c,d){if(d){a.find(g.ACTION_REQUEST_BLOCK).addClass("hidden");a.find(g.ACTION_REQUEST_UNBLOCK).removeClass("hidden")}else{a.find(g.ACTION_REQUEST_BLOCK).removeClass("hidden");a.find(g.ACTION_REQUEST_UNBLOCK).addClass("hidden")}},Ga=function(a,b,c,d){var e=a.find(g.FAVOURITE_ICON_CONTAINER),f=a.find(g.ACTION_CONFIRM_FAVOURITE),h=a.find(g.ACTION_CONFIRM_UNFAVOURITE);switch(d){case"hide":e.addClass("hidden");f.addClass("hidden");h.addClass("hidden");break;case"show-add":e.addClass("hidden");f.removeClass("hidden");h.addClass("hidden");break;case"show-remove":e.removeClass("hidden");f.addClass("hidden");h.removeClass("hidden");break;}},Ha=function(a,b,c,d){var e=a.find(g.MUTED_ICON_CONTAINER),f=a.find(g.ACTION_CONFIRM_MUTE),h=a.find(g.ACTION_CONFIRM_UNMUTE);switch(d){case"hide":e.addClass("hidden");f.addClass("hidden");h.addClass("hidden");break;case"show-mute":e.addClass("hidden");f.removeClass("hidden");h.addClass("hidden");break;case"show-unmute":e.removeClass("hidden");f.addClass("hidden");h.removeClass("hidden");break;}},Ia=function(a,b,c,d){var e=a.find(g.ACTION_REQUEST_ADD_CONTACT),f=a.find(g.ACTION_REQUEST_REMOVE_CONTACT);switch(d){case"pending-contact":e.addClass("hidden");f.addClass("hidden");break;case"contact":e.addClass("hidden");f.removeClass("hidden");break;case"non-contact":e.removeClass("hidden");f.addClass("hidden");break;}},Ja=function(a,b,c,d){var e=ba(b),f=e.find("button"),h=e.find(g.CONFIRM_DIALOGUE_BUTTON_TEXT),i=e.find(g.LOADING_ICON_CONTAINER);if(d){f.prop("disabled",!0);h.addClass("hidden");i.removeClass("hidden")}else{f.prop("disabled",!1);h.removeClass("hidden");i.addClass("hidden")}},Ka=function(a,b,c,d){var e=null;if(d){e=b.find(g.MESSAGE_NOT_SELECTED);e.find(g.MESSAGE_NOT_SELECTED_ICON).removeClass("hidden");P(a);R(a)}else{e=j(b);e.find(g.MESSAGE_NOT_SELECTED_ICON).addClass("hidden");e.find(g.MESSAGE_SELECTED_ICON).addClass("hidden");O(a);S(a)}},La=function(a,b,c,d){var e=0<d.count;if(d.add.length){d.add.forEach(function(a){var c=Y(b,a);c.find(g.MESSAGE_NOT_SELECTED_ICON).addClass("hidden");c.find(g.MESSAGE_SELECTED_ICON).removeClass("hidden");c.attr("aria-checked",!0)})}if(d.remove.length){d.remove.forEach(function(a){var c=Y(b,a);if(e){c.find(g.MESSAGE_NOT_SELECTED_ICON).removeClass("hidden")}c.find(g.MESSAGE_SELECTED_ICON).addClass("hidden");c.attr("aria-checked",!1)})}ea(a,d.count)},Ma=function(a,b,d,e){if(e.show&&!e.hasMessages){return c.get_strings([{key:"requirecontacttomessage",component:"core_message",param:e.user.fullname},{key:"isnotinyourcontacts",component:"core_message",param:e.user.fullname}]).then(function(c){var e=c[1],f=c[0];return ua(a,b,d,[g.ACTION_REQUEST_ADD_CONTACT],f,e,!1,!0)})}else{return va(a,b,d)}},Na=function(a,b,c,d){var e=m(b);if(d){e.removeClass("hidden")}else{e.addClass("hidden")}return!0},Oa=function(a,b,d,e){var f=o(b);if(e){return c.get_string("yourcontactrequestpending","core_message",e).then(function(a){f.find(g.TEXT).text(a);f.removeClass("hidden");return a})}else{f.addClass("hidden");return!0}},Pa=function(a,b,c){va(a,b,c);p(b);n(b);I(a);U(a);J(c);x(c);return!0};return{render:function render(c,d,e,f){var g=[{reset:Pa},{conversation:la,header:ma,footer:na,confirmBlockUser:wa,confirmUnblockUser:xa,confirmAddContact:ya,confirmRemoveContact:za,confirmDeleteSelectedMessages:Aa,confirmDeleteConversation:Ba,confirmContactRequest:Ca,requireAddContact:Ma,selfConversationMessage:Na,contactRequestSent:Oa},{loadingMembers:pa,loadingFirstMessages:qa,loadingMessages:ra,isBlocked:Fa,isContact:Ia,isFavourite:Ga,isMuted:Ha,loadingConfirmAction:Ja,inEditMode:Ka,showEmojiPicker:sa,showEmojiAutoComplete:ta},{scrollToMessage:oa,selectedMessages:La}],h=function(a){var b=[];for(var g in f){if(a.hasOwnProperty(g)){var h=a[g],i=f[g];b.push(h(c,d,e,i))}}return b},i=h(g[0]);i=i.concat(h(g[1]));return a.when.apply(a,i).then(function(){for(var a=2;a<g.length;a++){h(g[a])}}).catch(b.exception)}}});
define ("core_message/preferences_notifications_list_controller",["jquery","core/ajax","core/notification","core/custom_interaction_events","core_message/notification_preference","core_message/notification_processor_settings","core/modal_factory"],function(a,b,c,d,f,g,h){var i={DISABLE_NOTIFICATIONS:"[data-region=\"disable-notification-container\"] [data-disable-notifications]",DISABLE_NOTIFICATIONS_CONTAINER:"[data-region=\"disable-notification-container\"]",PREFERENCE:"[data-state]",PREFERENCE_ROW:"[data-region=\"preference-row\"]",PREFERENCE_INPUT:"[data-state] input",PROCESSOR_SETTING:"[data-processor-setting]"},j=function(b){this.root=a(b);this.userId=this.root.attr("data-user-id");this.registerEventListeners()};j.prototype.isDisabled=function(){return this.root.hasClass("disabled")};j.prototype.setDisabled=function(){this.root.addClass("disabled");this.root.find(i.PREFERENCE_INPUT).prop("disabled",!0)};j.prototype.setEnabled=function(){this.root.removeClass("disabled");this.root.find(i.PREFERENCE_INPUT).prop("disabled",!1)};j.prototype.toggleDisableAllStatus=function(){var d=a(i.DISABLE_NOTIFICATIONS),e=a(i.DISABLE_NOTIFICATIONS_CONTAINER),f=d.prop("checked");if(e.hasClass("loading")){return a.Deferred().resolve()}e.addClass("loading");var g={methodname:"core_user_update_user_preferences",args:{userid:this.userId,emailstop:f?1:0}};return b.call([g])[0].done(function(){if(f){this.setDisabled()}else{this.setEnabled()}}.bind(this)).always(function(){e.removeClass("loading")}).fail(c.exception)};j.prototype.registerEventListeners=function(){var b=a(i.DISABLE_NOTIFICATIONS);d.define(this.root,[d.events.activate]);this.root.on("change",function(b){if(!this.isDisabled()){var c=a(b.target).closest(i.PREFERENCE),d=a(b.target).closest(i.PREFERENCE_ROW),e=new f(d,this.userId);c.addClass("loading");e.save().always(function(){c.removeClass("loading")})}}.bind(this));var j=h.create({type:g.TYPE});this.root.on(d.events.activate,i.PROCESSOR_SETTING,function(b){var d=a(b.target).closest(i.PROCESSOR_SETTING);b.preventDefault();j.then(function(c){c.setUserId(a(d).attr("data-user-id"));c.setName(a(d).attr("data-name"));c.setContextId(a(d).attr("data-context-id"));c.setElement(d);c.show();b.stopImmediatePropagation()}).fail(c.exception)});d.define(b,[d.events.activate]);b.on(d.events.activate,function(){this.toggleDisableAllStatus()}.bind(this))};return j});
define ("core_message/notification_processor",["jquery"],function(a){var b={STATE_NONE:"[data-state=\"none\"]",STATE_BOTH:"[data-state=\"both\"]",STATE_LOGGED_IN:"[data-state=\"loggedin\"]",STATE_LOGGED_OFF:"[data-state=\"loggedoff\"]"},c=function(b){this.root=a(b)};c.prototype.getName=function(){return this.root.attr("data-processor-name")};c.prototype.isLoggedInEnabled=function(){var a=this.root.find(b.STATE_NONE).find("input");if(a.prop("checked")){return!1}var c=this.root.find(b.STATE_BOTH).find("input"),d=this.root.find(b.STATE_LOGGED_IN).find("input");return d.prop("checked")||c.prop("checked")};c.prototype.isLoggedOffEnabled=function(){var a=this.root.find(b.STATE_NONE).find("input");if(a.prop("checked")){return!1}var c=this.root.find(b.STATE_BOTH).find("input"),d=this.root.find(b.STATE_LOGGED_OFF).find("input");return d.prop("checked")||c.prop("checked")};return c});
define ("core_message/message_drawer_events",[],function(){return{CREATE_CONVERSATION_WITH_USER:"message-drawer-create-conversation-with-user",CONTACT_BLOCKED:"message-drawer-contact-blocked",CONTACT_UNBLOCKED:"message-drawer-contact-unblocked",CONTACT_ADDED:"message-drawer-contact-added",CONTACT_REMOVED:"message-drawer-contact-removed",CONTACT_REQUEST_ACCEPTED:"message-drawer-contact-request-accepted",CONTACT_REQUEST_DECLINED:"message-drawer-contact-request-declined",CONVERSATION_CREATED:"message-drawer-conversation-created",CONVERSATION_NEW_LAST_MESSAGE:"message-drawer-conversation-new-last-message",CONVERSATION_DELETED:"message-drawer-conversation-deleted",CONVERSATION_READ:"message-drawer-conversation-read",CONVERSATION_SET_FAVOURITE:"message-drawer-conversation-set-favourite",CONVERSATION_SET_MUTED:"message-drawer-conversation-set-muted",CONVERSATION_UNSET_FAVOURITE:"message-drawer-conversation-unset-favourite",CONVERSATION_UNSET_MUTED:"message-drawer-conversation-unset-muted",PREFERENCES_UPDATED:"message-drawer-preferences-updated",ROUTE_CHANGED:"message-drawer-route-change",SHOW:"message-drawer-show",HIDE:"message-drawer-hide",TOGGLE_VISIBILITY:"message-drawer-toggle",SHOW_CONVERSATION:"message-drawer-show-conversation",SHOW_SETTINGS:"message-drawer-show-settings"}});
define ("core_message/message_drawer_routes",[],function(){return{VIEW_CONTACT:"view-contact",VIEW_CONTACTS:"view-contacts",VIEW_CONVERSATION:"view-conversation",VIEW_GROUP_INFO:"view-group-info",VIEW_OVERVIEW:"view-overview",VIEW_SEARCH:"view-search",VIEW_SETTINGS:"view-settings"}});
define ("core_message/message_drawer_view_contacts_section_requests",["jquery","core/notification","core/pubsub","core/templates","core_message/message_repository","core_message/message_drawer_events","core_message/message_drawer_lazy_load_list"],function(a,b,c,d,e,f,g){var h={CONTACT_REQUEST:"[data-region=\"contact-request\"]"},i={REQUESTS_LIST:"core_message/message_drawer_view_contacts_body_section_requests_list"},j=function(a,c){var e=c.map(function(a){return{id:a.id,profileimageurl:a.profileimageurl,fullname:a.fullname}});return d.render(i.REQUESTS_LIST,{requests:e}).then(function(b){a.append(b);return b}).catch(b.exception)},k=function(a,c){return e.getContactRequests(c).then(function(b){g.setLoadedAll(a,!0);return b}).catch(b.exception)},l=function(a){return function(b){a.find("[data-request-id=\""+b.userid+"\"]").remove();var c=a.find(h.CONTACT_REQUEST);if(!c.length){g.showEmptyMessage(a);g.hideContent(a)}}},m=function(a){c.subscribe(f.CONTACT_REQUEST_ACCEPTED,l(a));c.subscribe(f.CONTACT_REQUEST_DECLINED,l(a))};return{show:function show(a){if(!a.attr("data-contacts-init")){m(a);a.attr("data-contacts-init",!0)}g.show(a,k,j)}}});
define ("core_message/message_popover",["jquery","core/custom_interaction_events","core/pubsub","core_message/message_drawer_events"],function(a,b,c,d){var e={COUNT_CONTAINER:"[data-region=\"count-container\"]"},f=function(a){c.publish(d.TOGGLE_VISIBILITY,a)},g=function(a){return function(){var b=a.find(e.COUNT_CONTAINER),c=parseInt(b.text(),10);if(isNaN(c)){b.addClass("hidden")}else if(!c||2>c){b.addClass("hidden")}else{c=c-1;b.text(c)}}},h=function(a){b.define(a,[b.events.activate]);a.on(b.events.activate,function(b,c){f(a.attr("id"));a.focus();c.originalEvent.preventDefault()});c.subscribe(d.CONVERSATION_READ,g(a));c.subscribe(d.CONTACT_REQUEST_ACCEPTED,g(a));c.subscribe(d.CONTACT_REQUEST_DECLINED,g(a))};return{init:function init(b){b=a(b);h(b)}}});
define ("core_message/preferences_processor_form",["jquery","core/ajax","core/notification"],function(a,b,c){var d=function(b){this.root=a(b);this.userId=this.root.attr("data-user-id");this.name=this.root.attr("data-processor-name");this.root.find("form").on("submit",function(c){c.preventDefault();this.save().done(function(){a(b).trigger("mpp:formsubmitted")})}.bind(this))};d.prototype.startLoading=function(){this.root.addClass("loading")};d.prototype.stopLoading=function(){this.root.removeClass("loading")};d.prototype.isLoading=function(){return this.root.hasClass("loading")};d.prototype.save=function(){if(this.isLoading()){return a.Deferred()}this.startLoading();var d=this.root.find("form").serializeArray(),e={methodname:"core_message_message_processor_config_form",args:{userid:this.userId,name:this.name,formvalues:d}};return b.call([e])[0].fail(c.exception).always(function(){this.stopLoading()}.bind(this))};return d});
define ("core_message/message_drawer_view_contacts",["jquery","core/pubsub","core/str","core_message/message_drawer_events","core_message/message_drawer_view_contacts_section_contacts","core_message/message_drawer_view_contacts_section_requests"],function(a,b,c,d,e,f){var g={ACTION_SHOW_CONTACTS_SECTION:"[data-action=\"show-contacts-section\"]",ACTION_SHOW_REQUESTS_SECTION:"[data-action=\"show-requests-section\"]",CONTACT_REQUEST_COUNT:"[data-region=\"contact-request-count\"]",CONTACTS_SECTION_CONTAINER:"[data-section=\"contacts\"]",REQUESTS_SECTION_CONTAINER:"[data-section=\"requests\"]"},h=function(a){return a.find(g.CONTACTS_SECTION_CONTAINER)},i=function(a){return a.find(g.REQUESTS_SECTION_CONTAINER)},j=function(a){return a.find(g.ACTION_SHOW_CONTACTS_SECTION)},k=function(a){return a.find(g.ACTION_SHOW_REQUESTS_SECTION)},l=function(a){return a.hasClass("active")},m=function(a){return function(){var b=a.find(g.CONTACT_REQUEST_COUNT),c=parseInt(b.text(),10);c=isNaN(c)?0:c-1;if(0>=c){b.addClass("hidden")}else{b.text(c)}}},n=function(a){var c=h(a),g=i(a),l=j(a),n=k(a);l.on("show.bs.tab",function(){e.show(c)});n.on("show.bs.tab",function(){f.show(g)});b.subscribe(d.CONTACT_REQUEST_ACCEPTED,m(a));b.subscribe(d.CONTACT_REQUEST_DECLINED,m(a))};return{show:function show(b,c,d,g,m){d=a(d);if(!d.attr("data-contacts-init")){n(d);d.attr("data-contacts-init",!0)}var o=h(d),p=i(d);if(m){var q=j(d),r=k(d);if("requests"==m){q.removeClass("active");o.removeClass("show active");r.addClass("active");p.addClass("show active")}else{r.removeClass("active");p.removeClass("show active");q.addClass("active");o.addClass("show active")}}if(l(o)){e.show(o)}else{f.show(p)}return a.Deferred().resolve().promise()},description:function description(){return c.get_string("messagedrawerviewcontacts","core_message")}}});
define ("core_message/notification_preference",["jquery","core/ajax","core/notification","core_message/notification_processor"],function(a,b,c,d){var e={PROCESSOR:"[data-processor-name]",STATE_INPUTS:"[data-state] input"},f=function(b,c){this.root=a(b);this.userId=c};f.prototype.getPreferenceKey=function(){return this.root.attr("data-preference-key")};f.prototype.getLoggedInPreferenceKey=function(){return this.getPreferenceKey()+"_loggedin"};f.prototype.getLoggedOffPreferenceKey=function(){return this.getPreferenceKey()+"_loggedoff"};f.prototype.getProcessors=function(){return this.root.find(e.PROCESSOR).map(function(b,c){return new d(a(c))})};f.prototype.startLoading=function(){this.root.addClass("loading");this.root.find(e.STATE_INPUTS).prop("disabled",!0)};f.prototype.stopLoading=function(){this.root.removeClass("loading");this.root.find(e.STATE_INPUTS).prop("disabled",!1)};f.prototype.isLoading=function(){return this.root.hasClass("loading")};f.prototype.save=function(){if(this.isLoading()){return a.Deferred().resolve()}this.startLoading();var d="",e="";this.getProcessors().each(function(a,b){if(b.isLoggedInEnabled()){if(""===d){d=b.getName()}else{d+=","+b.getName()}}if(b.isLoggedOffEnabled()){if(""===e){e=b.getName()}else{e+=","+b.getName()}}});if(""===d){d="none"}if(""===e){e="none"}var f={userid:this.userId,preferences:[{type:this.getLoggedInPreferenceKey(),value:d},{type:this.getLoggedOffPreferenceKey(),value:e}]};return b.call([{methodname:"core_user_update_user_preferences",args:f}])[0].fail(c.exception).always(function(){this.stopLoading()}.bind(this))};return f});
define ("core_message/message_drawer_helper",["core/pubsub","core_message/message_drawer_events"],function(a,b){return{createConversationWithUser:function createConversationWithUser(c){a.publish(b.CREATE_CONVERSATION_WITH_USER,c)},hide:function hide(){a.publish(b.HIDE)},show:function show(){a.publish(b.SHOW)},showConversation:function showConversation(c){a.publish(b.SHOW_CONVERSATION,c)},showSettings:function showSettings(){a.publish(b.SHOW_SETTINGS)}}});
define ("core_message/message_drawer_view_settings",["jquery","core/notification","core/str","core/pubsub","core/templates","core_message/message_repository","core/custom_interaction_events","core_message/message_drawer_events"],function(a,b,c,d,e,f,g,h){var i={CHECKBOX:"input[type=\"checkbox\"]",SETTINGS:"[data-region=\"settings\"]",PRIVACY_PREFERENCE:"[data-preference=\"blocknoncontacts\"] input[type=\"radio\"]",NOTIFICATIONS_PREFERENCE:"[data-preference=\"notifications\"] input[type=\"checkbox\"]",ENTER_TO_SEND_PREFERENCE:"[data-preference=\"entertosend\"] input[type=\"checkbox\"]",NOTIFICATION_PREFERENCES_CONTAINER:"[data-region=\"notification-preference-container\"]",CONTENT_CONTAINER:"[data-region=\"content-container\"]",PLACEHOLDER_CONTAINER:"[data-region=\"placeholder-container\"]"},j={NOTIFICATION_PREFERENCES:"core_message/message_drawer_view_settings_body_content_notification_preferences"},k=function(b,c){var d=b.find(i.PRIVACY_PREFERENCE);d.each(function(b,d){d=a(d);if(d.val()==c){d.prop("checked",!0)}else{d.prop("checked",!1)}})},l=function(a,b){var c=a.find(i.ENTER_TO_SEND_PREFERENCE);if(b){c.prop("checked",!0)}else{c.prop("checked",!1)}},m=function(a,c){return f.savePreferences(a,c).then(function(){d.publish(h.PREFERENCES_UPDATED,c)}).catch(b.exception)},n=function(b,c){var d=b.find(i.SETTINGS);g.define(d,[g.events.activate]);d.on(g.events.activate,i.NOTIFICATIONS_PREFERENCE,function(b){var d=a(b.target).closest(i.NOTIFICATION_PREFERENCES_CONTAINER),e=d.find(i.CHECKBOX);if(!e.length){return}var f=e.toArray().reduce(function(b,c){c=a(c);if(c.prop("checked")){b.push(c.attr("data-name"))}return b},[]),g=f.length?f.join(","):"none";m(c,[{type:"message_provider_moodle_instantmessage_loggedoff",value:g},{type:"message_provider_moodle_instantmessage_loggedin",value:g}])});d.on("change",i.PRIVACY_PREFERENCE,function(b){var d=a(b.target).val();m(c,[{type:"message_blocknoncontacts",value:d}])});d.on(g.events.activate,i.ENTER_TO_SEND_PREFERENCE,function(b){var d=a(b.target).prop("checked");m(c,[{type:"message_entertosend",value:d}])})},o=function(a,c){f.getUserMessagePreferences(c).then(function(b){k(a,b.blocknoncontacts);l(a,b.entertosend);var c=[];if(b.preferences.components.length){b.preferences.components.forEach(function(a){if(a.notifications.length){var b=a.notifications.filter(function(a){return a.preferencekey=="message_provider_moodle_instantmessage"});if(b.length){var d=a.notifications[0];c=d.processors.map(function(a){var b=a.loggedin.checked||a.loggedoff.checked;return{displayname:a.displayname,name:a.name,checked:b,locked:a.locked,lockedmessage:a.lockedmessage||null}})}}})}var d=a.find(i.NOTIFICATION_PREFERENCES_CONTAINER);if(c.length){d.removeClass("hidden");return e.render(j.NOTIFICATION_PREFERENCES,{processors:c}).then(function(a){d.append(a);return a})}else{return!0}}).then(function(){a.find(i.CONTENT_CONTAINER).removeClass("hidden");a.find(i.PLACEHOLDER_CONTAINER).addClass("hidden");n(a,c)}).catch(b.exception)};return{show:function show(b,c,d,e,f){if(!d.attr("data-init")){o(d,f);d.attr("data-init",!0)}return a.Deferred().resolve().promise()},description:function description(){return c.get_string("messagedrawerviewsettings","core_message")}}});
define ("core_message/notification_processor_settings",["jquery","core/ajax","core/str","core/notification","core/custom_interaction_events","core/modal","core/modal_registry","core/fragment"],function(a,b,c,d,e,f,g,h){var i=!1,j={SAVE_BUTTON:"[data-action=\"save\"]",CANCEL_BUTTON:"[data-action=\"cancel\"]",PROCESSOR:"[data-processor-name]",PREFERENCE_ROW:"[data-region=\"preference-row\"]"},k=function(a){f.call(this,a);this.name=null;this.userId=null;this.contextId=null;this.element=null;this.saveButton=this.getFooter().find(j.SAVE_BUTTON);this.cancelButton=this.getFooter().find(j.CANCEL_BUTTON)};k.TYPE="core_message-notification_processor_settings";k.prototype=Object.create(f.prototype);k.prototype.constructor=k;k.prototype.setUserId=function(a){this.userId=a};k.prototype.getUserId=function(){return this.userId};k.prototype.setElement=function(a){this.element=a};k.prototype.getElement=function(){return this.element};k.prototype.setName=function(a){this.name=a};k.prototype.getName=function(){return this.name};k.prototype.setContextId=function(a){this.contextId=a};k.prototype.getContextId=function(){return this.contextId};k.prototype.getForm=function(){return this.getBody().find("form")};k.prototype.disableButtons=function(){this.saveButton.prop("disabled",!0);this.cancelButton.prop("disabled",!0)};k.prototype.enableButtons=function(){this.saveButton.prop("disabled",!1);this.cancelButton.prop("disabled",!1)};k.prototype.loadTitleContent=function(){this.titlePromise=c.get_string("processorsettings","message");this.setTitle(this.titlePromise);return this.titlePromise};k.prototype.loadBodyContent=function(){this.disableButtons();var a={userid:this.getUserId(),type:this.getName()};this.bodyPromise=h.loadFragment("message","processor_settings",this.getContextId(),a);this.setBody(this.bodyPromise);this.bodyPromise.then(function(){this.enableButtons()}.bind(this)).fail(d.exception);return this.bodyPromise};k.prototype.loadAllContent=function(){return a.when(this.loadTitleContent(),this.loadBodyContent())};k.prototype.show=function(){this.loadAllContent();f.prototype.show.call(this)};k.prototype.hide=function(){f.prototype.hide.call(this);this.setContextId(null);this.setName(null);this.setUserId(null)};k.prototype.updateConfiguredStatus=function(){var c=a(this.getElement()).closest(j.PROCESSOR);if(!c.hasClass("unconfigured")){return!1}var e=c.attr("data-processor-name"),f={methodname:"core_message_get_message_processor",args:{name:e,userid:this.userId}};return b.call([f])[0].fail(d.exception).done(function(b){if(b.userconfigured){var d=a(j.PREFERENCE_ROW+" [data-processor-name=\""+e+"\"]");c.removeClass("unconfigured");d.removeClass("disabled")}})};k.prototype.registerEventListeners=function(){f.prototype.registerEventListeners.call(this);this.getModal().on(e.events.activate,j.SAVE_BUTTON,function(a,b){this.getForm().submit();b.originalEvent.preventDefault()}.bind(this));this.getModal().on("mpp:formsubmitted",function(a){this.hide();this.updateConfiguredStatus();a.stopPropagation()}.bind(this));this.getModal().on(e.events.activate,j.CANCEL_BUTTON,function(a,b){this.hide();b.originalEvent.preventDefault();a.stopPropagation()}.bind(this))};if(!i){g.register(k.TYPE,k,"core/modal_save_cancel");i=!0}return k});
function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("core_message/message_drawer_view_search",["jquery","core/custom_interaction_events","core/notification","core/pubsub","core/str","core/templates","core_message/message_repository","core_message/message_drawer_events"],function(a,b,c,d,e,f,g,h){var i=50,j=3,k={BLOCK_ICON_CONTAINER:"[data-region=\"block-icon-container\"]",CANCEL_SEARCH_BUTTON:"[data-action=\"cancel-search\"]",CONTACTS_CONTAINER:"[data-region=\"contacts-container\"]",CONTACTS_LIST:"[data-region=\"contacts-container\"] [data-region=\"list\"]",EMPTY_MESSAGE_CONTAINER:"[data-region=\"empty-message-container\"]",LIST:"[data-region=\"list\"]",LOADING_ICON_CONTAINER:"[data-region=\"loading-icon-container\"]",LOADING_PLACEHOLDER:"[data-region=\"loading-placeholder\"]",MESSAGES_LIST:"[data-region=\"messages-container\"] [data-region=\"list\"]",MESSAGES_CONTAINER:"[data-region=\"messages-container\"]",NON_CONTACTS_CONTAINER:"[data-region=\"non-contacts-container\"]",NON_CONTACTS_LIST:"[data-region=\"non-contacts-container\"] [data-region=\"list\"]",SEARCH_ICON_CONTAINER:"[data-region=\"search-icon-container\"]",SEARCH_ACTION:"[data-action=\"search\"]",SEARCH_INPUT:"[data-region=\"search-input\"]",SEARCH_RESULTS_CONTAINER:"[data-region=\"search-results-container\"]",LOAD_MORE_USERS:"[data-action=\"load-more-users\"]",LOAD_MORE_MESSAGES:"[data-action=\"load-more-messages\"]",BUTTON_TEXT:"[data-region=\"button-text\"]",NO_RESULTS_CONTAINTER:"[data-region=\"no-results-container\"]",ALL_CONTACTS_CONTAINER:"[data-region=\"all-contacts-container\"]"},l={CONTACTS_LIST:"core_message/message_drawer_contacts_list",NON_CONTACTS_LIST:"core_message/message_drawer_non_contacts_list",MESSAGES_LIST:"core_message/message_drawer_messages_list"},m=function(a){return a.attr("data-user-id")},n=function(a){return a.find(k.EMPTY_MESSAGE_CONTAINER)},o=function(a){return a.find(k.LOADING_ICON_CONTAINER)},p=function(a){return a.find(k.LOADING_PLACEHOLDER)},q=function(a){return a.find(k.SEARCH_ICON_CONTAINER)},r=function(a){return a.find(k.SEARCH_INPUT)},s=function(a){return a.find(k.SEARCH_RESULTS_CONTAINER)},t=function(a){return a.find(k.CONTACTS_CONTAINER)},u=function(a){return a.find(k.NON_CONTACTS_CONTAINER)},v=function(a){return a.find(k.MESSAGES_CONTAINER)},w=function(a){n(a).removeClass("hidden")},x=function(a){n(a).addClass("hidden")},y=function(a){o(a).removeClass("hidden")},z=function(a){o(a).addClass("hidden")},A=function(a){p(a).removeClass("hidden")},B=function(a){p(a).addClass("hidden")},C=function(a){q(a).removeClass("hidden")},D=function(a){q(a).addClass("hidden")},E=function(a){s(a).removeClass("hidden")},F=function(a){s(a).addClass("hidden")},G=function(a){var b=s(a);b.find(k.ALL_CONTACTS_CONTAINER).addClass("hidden");b.find(k.MESSAGES_CONTAINER).addClass("hidden");b.find(k.NO_RESULTS_CONTAINTER).removeClass("hidden")},H=function(a){var b=s(a);b.find(k.ALL_CONTACTS_CONTAINER).removeClass("hidden");b.find(k.MESSAGES_CONTAINER).removeClass("hidden");b.find(k.NO_RESULTS_CONTAINTER).addClass("hidden")},I=function(a){var b=s(a);b.find(k.ALL_CONTACTS_CONTAINER).removeClass("hidden")},J=function(a){var b=s(a);b.find(k.ALL_CONTACTS_CONTAINER).addClass("hidden")},K=function(a){var b=s(a);b.find(k.CONTACTS_CONTAINER).removeClass("hidden")},L=function(a){var b=s(a);b.find(k.CONTACTS_CONTAINER).addClass("hidden")},M=function(a){var b=s(a);b.find(k.NON_CONTACTS_CONTAINER).removeClass("hidden")},N=function(a){var b=s(a);b.find(k.NON_CONTACTS_CONTAINER).addClass("hidden")},O=function(a){var b=s(a);b.find(k.MESSAGES_CONTAINER).removeClass("hidden")},P=function(a){var b=s(a);b.find(k.MESSAGES_CONTAINER).addClass("hidden")},Q=function(a){r(a).prop("disabled",!0)},R=function(a){r(a).prop("disabled",!1)},S=function(a){r(a).val("")},T=function(a){a.find(k.CONTACTS_LIST).empty();a.find(k.NON_CONTACTS_LIST).empty();a.find(k.MESSAGES_LIST).empty();H(a);I(a);K(a);M(a);O(a);Y(a);aa(a)},U=function(a,b){D(a);x(b);F(b);y(a);A(b);Q(a)},V=function(a,b){C(a);x(b);E(b);z(a);B(b);R(a)},W=function(a){var b=a.find(k.LOAD_MORE_USERS);b.prop("disabled",!0);b.find(k.BUTTON_TEXT).addClass("hidden");b.find(k.LOADING_ICON_CONTAINER).removeClass("hidden")},X=function(a){var b=a.find(k.LOAD_MORE_USERS);b.prop("disabled",!1);b.find(k.BUTTON_TEXT).removeClass("hidden");b.find(k.LOADING_ICON_CONTAINER).addClass("hidden")},Y=function(a){a.find(k.LOAD_MORE_USERS).removeClass("hidden")},Z=function(a){a.find(k.LOAD_MORE_USERS).addClass("hidden")},$=function(a){var b=a.find(k.LOAD_MORE_MESSAGES);b.prop("disabled",!0);b.find(k.BUTTON_TEXT).addClass("hidden");b.find(k.LOADING_ICON_CONTAINER).removeClass("hidden")},_=function(a){var b=a.find(k.LOAD_MORE_MESSAGES);b.prop("disabled",!1);b.find(k.BUTTON_TEXT).removeClass("hidden");b.find(k.LOADING_ICON_CONTAINER).addClass("hidden")},aa=function(a){a.find(k.LOAD_MORE_MESSAGES).removeClass("hidden")},ba=function(a){a.find(k.LOAD_MORE_MESSAGES).addClass("hidden")},ca=function(a,b){return a.find("[data-contact-user-id=\""+b+"\"]")},da=function(a,b){var c=u(a),d=ca(c,b.userid);if(d.length){d.remove();var e=t(a);e.removeClass("hidden");e.find(k.LIST).append(d)}if(!c.find(k.LIST).children().length){c.addClass("hidden")}},ea=function(a,b){var c=t(a),d=ca(c,b);if(d.length){d.remove();var e=u(a);e.removeClass("hidden");e.find(k.LIST).append(d)}if(!c.find(k.LIST).children().length){c.addClass("hidden")}},fa=function(a,b){var c=ca(a,b);if(c.length){c.find(k.BLOCK_ICON_CONTAINER).removeClass("hidden")}},ga=function(a,b){var c=ca(a,b);if(c.length){c.find(k.BLOCK_ICON_CONTAINER).addClass("hidden")}},ha=function(a,b){if(!a){return""}var c=new RegExp("("+b+")","gi");return a.replace(c,"<span class=\"matchtext\">$1</span>")},ia=function(a,b){var c=t(a),d=a.attr("data-in-panel"),e=c.find(k.LIST);return f.render(l.CONTACTS_LIST,{contacts:b,frompanel:d}).then(function(a){e.append(a);return a})},ja=function(a,b){var c=u(a),d=a.attr("data-in-panel"),e=c.find(k.LIST);return f.render(l.NON_CONTACTS_LIST,{noncontacts:b,frompanel:d}).then(function(a){e.append(a);return a})},ka=function(a,b){var c=v(a),d=a.attr("data-in-panel"),e=c.find(k.LIST);return f.render(l.MESSAGES_LIST,{messages:b,frompanel:d}).then(function(a){e.append(a);return a})},la=function(b,c,d,e,f){var h=!1;W(b);return g.searchUsers(c,d,e+1,f).then(function(a){var b=a.contacts,c=a.noncontacts;if(b.length<=e&&c.length<=e){h=!0;return{contacts:b,noncontacts:c}}else{return{contacts:b.slice(0,e),noncontacts:c.slice(0,e)}}}).then(function(c){var e=c.contacts.length,f=c.noncontacts.length;if(e){c.contacts.forEach(function(a){a.highlight=ha(a.fullname,d)})}if(f){c.noncontacts.forEach(function(a){a.highlight=ha(a.fullname,d)})}return a.when(e?ia(b,c.contacts):!0,f?ja(b,c.noncontacts):!0).then(function(){return{contactsCount:e,nonContactsCount:f}})}).then(function(a){X(b);if(h){Z(b)}return a}).catch(function(a){X(b);throw a})},ma=function(a,b,c,d,e){var f=!1;$(a);return g.searchMessages(b,c,d+1,e).then(function(a){var b=a.contacts;if(b.length<=d){f=!0;return b}else{return b.slice(0,d)}}).then(function(b){if(b.length){b.forEach(function(a){a.lastmessage=ha(a.lastmessage,c)});return ka(a,b).then(function(){return b.length})}else{return b.length}}).then(function(b){_(a);if(f){ba(a)}return b}).catch(function(b){_(a);throw b})},na=function(b,c,d,e,f,g,h){var i=m(c);U(b,c);T(c);return a.when(la(c,i,d,e,f),ma(c,i,d,g,h)).then(function(a,d){var e=a.contactsCount,f=a.nonContactsCount;V(b,c);if(!e&&!f&&!d){G(c)}else{if(!e&&!f){J(c)}else{if(!e){L(c)}if(!f){N(c)}}if(!d){P(c)}}})},oa=function(a,e){var f=m(e),g=r(a),l="",n=0,o=0,p=function(b,d){l=g.val().trim();if(""!==l){n=0;o=0;na(a,e,l,j,o,50,n).then(function(){g.focus();o=o+j;n=n+50}).catch(c.exception)}d.originalEvent.preventDefault()};b.define(g,[b.events.enter]);b.define(a,[b.events.activate]);b.define(e,[b.events.activate]);g.on(b.events.enter,p);a.on(b.events.activate,k.SEARCH_ACTION,p);e.on(b.events.activate,k.LOAD_MORE_MESSAGES,function(a,b){if(""!==l){ma(e,f,l,50,n).then(function(){n=n+50}).catch(c.exception)}b.originalEvent.preventDefault()});e.on(b.events.activate,k.LOAD_MORE_USERS,function(a,b){if(""!==l){la(e,f,l,i,o).then(function(){o=o+i}).catch(c.exception)}b.originalEvent.preventDefault()});a.on(b.events.activate,k.CANCEL_SEARCH_BUTTON,function(){S(a);w(e);C(a);F(e);z(a);B(e);o=0;n=0});d.subscribe(h.CONTACT_ADDED,function(a){da(e,a)});d.subscribe(h.CONTACT_REMOVED,function(a){ea(e,a)});d.subscribe(h.CONTACT_BLOCKED,function(a){fa(e,a)});d.subscribe(h.CONTACT_UNBLOCKED,function(a){ga(e,a)})},pa=function(a,b){if("object"!==_typeof(b)){return e.get_string("messagedrawerviewsearch","core_message")}var c=r(b),d=c.val().trim();return e.get_string("messagedrawerviewsearch","core_message",d)};return{show:function show(b,c,d){if(!d.attr("data-init")){oa(c,d);d.attr("data-init",!0)}var e=r(c);e.focus();return a.Deferred().resolve().promise()},description:pa}});
define ("core_message/message_user_button",["jquery","core/custom_interaction_events","core_message/message_drawer_helper","core/templates"],function(a,b,c,d){var e={MESSAGE_TEXTAREA:"[data-region=\"send-message-txt\"]",MESSAGE_USER_BUTTON:"#message-user-button",MESSAGE_JUMP:"[data-region=\"jumpto\"]"},f={CONTENT:"core_message/message_jumpto"},g=function(a){return parseInt(a.attr("data-userid"))},h=function(a){return parseInt(a.attr("data-conversationid"))};return{send:function send(i){i=a(i);var j={conversationid:h(i),buttonid:a(i).attr("id"),userid:g(i)};d.render(f.CONTENT,{}).then(function(a){i.after(a)}).then(function(){a(e.MESSAGE_USER_BUTTON).next().focus(function(){a(e.MESSAGE_TEXTAREA).focus()})});b.define(i,[b.events.activate]);i.on(b.events.activate,function(b,d){if(a(b.target).hasClass("active")){c.hide();a(e.MESSAGE_USER_BUTTON).next().attr("tabindex",-1)}else{a(e.MESSAGE_USER_BUTTON).next().attr("tabindex",0);if(j.conversationid){c.showConversation(j)}else{c.createConversationWithUser(j)}}a(b.target).focus();a(b.target).toggleClass("active");b.preventDefault();d.originalEvent.preventDefault()})}}});
define ("core_message/message_drawer_view_group_info",["jquery","core/str","core/templates","core_message/message_repository","core_message/message_drawer_lazy_load_list"],function(a,b,c,d,e){var f={CONTENT_CONTAINER:"[data-region=\"group-info-content-container\"]",MEMBERS_LIST:"[data-region=\"members-list\"]"},g={CONTENT:"core_message/message_drawer_view_group_info_body_content",MEMBERS_LIST:"core_message/message_drawer_view_group_info_participants_list"},h=function(a){return a.find(f.CONTENT_CONTAINER)},i=function(a,b,d){var e=50<b.totalMemberCount?50:b.totalMemberCount,f=Array.apply(null,Array(e)).map(function(){return!0}),i={name:b.name,subname:b.subname,imageurl:b.imageUrl,placeholders:f,loggedinuser:{id:d}};return c.render(g.CONTENT,i).then(function(b){h(a).append(b);return b})},j=function(a,b,c){return function(f,g){return d.getConversationMembers(a.id,g,b+1,c).then(function(a){if(a.length>b){a=a.slice(0,-1)}else{e.setLoadedAll(f,!0)}c=c+b;return a.filter(function(a){return a.id!=g})})}},k=function(a,b){return c.render(g.MEMBERS_LIST,{contacts:b}).then(function(b){a.append(b);return b})};return{show:function show(b,c,d,f,g,l){var m=a(d);h(m).empty();return i(m,g,l).then(function(){var a=e.getRoot(m);e.show(a,j(g,50,0),k)})},description:function description(a,c){return b.get_string("messagedrawerviewgroupinfo","core_message",c.name)}}});
define ("core_message/message_preferences",["jquery","core/ajax","core/notification","core_message/message_notification_preference","core/custom_interaction_events"],function(a,b,c,d,e){var f={PREFERENCE:"[data-state]",PREFERENCES_CONTAINER:"[data-region=\"preferences-container\"]",CONTACTABLE_PRIVACY_CONTAINER:"[data-region=\"privacy-setting-container\"]"},g=function(b){this.root=a(b);this.userId=this.root.find(f.PREFERENCES_CONTAINER).attr("data-user-id");this.registerEventListeners()};g.prototype.preferencesDisabled=function(){return this.root.find(f.PREFERENCES_CONTAINER).hasClass("disabled")};g.prototype.saveContactablePrivacySetting=function(){var d=this.root.find(f.CONTACTABLE_PRIVACY_CONTAINER),e=a("input[type='radio']:checked").val();if(d.hasClass("loading")){return a.Deferred().resolve()}d.addClass("loading");var g={methodname:"core_user_update_user_preferences",args:{userid:this.userId,preferences:[{type:d.attr("data-preference-key"),value:e}]}};return b.call([g])[0].fail(c.exception).always(function(){d.removeClass("loading")})};g.prototype.registerEventListeners=function(){e.define(this.root,[e.events.activate]);this.root.on("change",function(b){if("message_blocknoncontacts"==b.target.name){this.saveContactablePrivacySetting()}else{if(!this.preferencesDisabled()){var c=a(b.target).closest(f.PREFERENCES_CONTAINER),e=a(b.target).closest(f.PREFERENCE),g=new d(c,this.userId);e.addClass("loading");g.save().always(function(){e.removeClass("loading")})}}}.bind(this))};return g});
define ("core_message/message_drawer_view_conversation_constants",[],function(){return{SELECTORS:{ACTION_ACCEPT_CONTACT_REQUEST:"[data-action=\"accept-contact-request\"]",ACTION_CANCEL_CONFIRM:"[data-action=\"cancel-confirm\"]",ACTION_OKAY_CONFIRM:"[data-action=\"okay-confirm\"]",ACTION_CANCEL_EDIT_MODE:"[data-action=\"cancel-edit-mode\"]",ACTION_CONFIRM_ADD_CONTACT:"[data-action=\"confirm-add-contact\"]",ACTION_CONFIRM_BLOCK:"[data-action=\"confirm-block\"]",ACTION_CONFIRM_DELETE_SELECTED_MESSAGES:"[data-action=\"confirm-delete-selected-messages\"]",ACTION_CONFIRM_DELETE_CONVERSATION:"[data-action=\"confirm-delete-conversation\"]",ACTION_CONFIRM_FAVOURITE:"[data-action=\"confirm-favourite\"]",ACTION_CONFIRM_MUTE:"[data-action=\"confirm-mute\"]",ACTION_CONFIRM_UNFAVOURITE:"[data-action=\"confirm-unfavourite\"]",ACTION_CONFIRM_REMOVE_CONTACT:"[data-action=\"confirm-remove-contact\"]",ACTION_CONFIRM_UNBLOCK:"[data-action=\"confirm-unblock\"]",ACTION_CONFIRM_UNMUTE:"[data-action=\"confirm-unmute\"]",ACTION_DECLINE_CONTACT_REQUEST:"[data-action=\"decline-contact-request\"]",ACTION_REQUEST_ADD_CONTACT:"[data-action=\"request-add-contact\"]",ACTION_REQUEST_BLOCK:"[data-action=\"request-block\"]",ACTION_REQUEST_DELETE_CONVERSATION:"[data-action=\"request-delete-conversation\"]",ACTION_REQUEST_DELETE_SELECTED_MESSAGES:"[data-action=\"delete-selected-messages\"]",ACTION_REQUEST_REMOVE_CONTACT:"[data-action=\"request-remove-contact\"]",ACTION_REQUEST_UNBLOCK:"[data-action=\"request-unblock\"]",ACTION_VIEW_CONTACT:"[data-action=\"view-contact\"]",ACTION_VIEW_GROUP_INFO:"[data-action=\"view-group-info\"]",CAN_RECEIVE_FOCUS:"input:not([type=\"hidden\"]), a[href], button, textarea, select, [tabindex]",CONFIRM_DIALOGUE:"[data-region=\"confirm-dialogue\"]",CONFIRM_DIALOGUE_BUTTON_TEXT:"[data-region=\"dialogue-button-text\"]",CONFIRM_DIALOGUE_CANCEL_BUTTON:"[data-action=\"cancel-confirm\"]",CONFIRM_DIALOGUE_CONTAINER:"[data-region=\"confirm-dialogue-container\"]",CONFIRM_DIALOGUE_HEADER:"[data-region=\"dialogue-header\"]",CONFIRM_DIALOGUE_OKAY_BUTTON:"[data-action=\"okay-confirm\"]",CONFIRM_DIALOGUE_TEXT:"[data-region=\"dialogue-text\"]",CONTACT_REQUEST_SENT_MESSAGE_CONTAINER:"[data-region=\"contact-request-sent-message-container\"]",CONTENT_PLACEHOLDER_CONTAINER:"[data-region=\"content-placeholder\"]",CONTENT_CONTAINER:"[data-region=\"content-container\"]",CONTENT_MESSAGES_CONTAINER:"[data-region=\"content-message-container\"]",CONTENT_MESSAGES_FOOTER_CONTAINER:"[data-region=\"content-messages-footer-container\"]",CONTENT_MESSAGES_FOOTER_EDIT_MODE_CONTAINER:"[data-region=\"content-messages-footer-edit-mode-container\"]",CONTENT_MESSAGES_FOOTER_REQUIRE_CONTACT_CONTAINER:"[data-region=\"content-messages-footer-require-contact-container\"]",CONTENT_MESSAGES_FOOTER_REQUIRE_UNBLOCK_CONTAINER:"[data-region=\"content-messages-footer-require-unblock-container\"]",CONTENT_MESSAGES_FOOTER_UNABLE_TO_MESSAGE_CONTAINER:"[data-region=\"content-messages-footer-unable-to-message\"]",DAY_MESSAGES_CONTAINER:"[data-region=\"day-messages-container\"]",DELETE_MESSAGES_FOR_ALL_USERS_TOGGLE:"[data-region=\"delete-messages-for-all-users-toggle\"]",DELETE_MESSAGES_FOR_ALL_USERS_TOGGLE_CONTAINER:"[data-region=\"delete-messages-for-all-users-toggle-container\"]",EMOJI_AUTO_COMPLETE_CONTAINER:"[data-region=\"emoji-auto-complete-container\"]",EMOJI_PICKER_CONTAINER:"[data-region=\"emoji-picker-container\"]",EMOJI_PICKER:"[data-region=\"emoji-picker\"]",EMOJI_PICKER_SEARCH_INPUT:"[data-region=\"search-input\"]",ERROR_MESSAGE_CONTAINER:"[data-region=\"error-message-container\"]",ERROR_MESSAGE:"[data-region=\"error-message\"]",FAVOURITE_ICON_CONTAINER:"[data-region=\"favourite-icon-container\"]",FOOTER_CONTAINER:"[data-region=\"content-messages-footer-container\"]",HEADER:"[data-region=\"header-content\"]",HEADER_EDIT_MODE:"[data-region=\"header-edit-mode\"]",HEADER_PLACEHOLDER_CONTAINER:"[data-region=\"header-placeholder\"]",LOADING_ICON_CONTAINER:"[data-region=\"loading-icon-container\"]",MESSAGE:"[data-region=\"message\"]",MESSAGE_NOT_SELECTED:"[data-region=\"message\"][aria-checked=\"false\"]",MESSAGE_NOT_SELECTED_ICON:"[data-region=\"not-selected-icon\"]",MESSAGE_SELECTED_ICON:"[data-region=\"selected-icon\"]",MESSAGES:"[data-region=\"content-message-container\"]",MESSAGES_CONTAINER:"[data-region=\"content-message-container\"]",MESSAGES_SELECTED_COUNT:"[data-region=\"message-selected-court\"]",MESSAGE_TEXT_AREA:"[data-region=\"send-message-txt\"]",MORE_MESSAGES_LOADING_ICON_CONTAINER:"[data-region=\"more-messages-loading-icon-container\"]",MUTED_ICON_CONTAINER:"[data-region=\"muted-icon-container\"]",PLACEHOLDER_CONTAINER:"[data-region=\"placeholder-container\"]",RETRY_SEND:"[data-region=\"retry-send\"]",SELF_CONVERSATION_MESSAGE_CONTAINER:"[data-region=\"self-conversation-message-container\"]",SEND_MESSAGE_BUTTON:"[data-action=\"send-message\"]",SEND_MESSAGE_ICON_CONTAINER:"[data-region=\"send-icon-container\"]",TEXT:"[data-region=\"text\"]",TEXT_CONTAINER:"[data-region=\"text-container\"]",TIME_CREATED:"[data-region=\"time-created\"]",TITLE:"[data-region=\"title\"]",TOGGLE_EMOJI_PICKER_BUTTON:"[data-action=\"toggle-emoji-picker\"]"},TEMPLATES:{HEADER_PRIVATE:"core_message/message_drawer_view_conversation_header_content_type_private",HEADER_PRIVATE_NO_CONTROLS:"core_message/message_drawer_view_conversation_header_content_type_private_no_controls",HEADER_PUBLIC:"core_message/message_drawer_view_conversation_header_content_type_public",HEADER_SELF:"core_message/message_drawer_view_conversation_header_content_type_self",DAY:"core_message/message_drawer_view_conversation_body_day",MESSAGE:"core_message/message_drawer_view_conversation_body_message",MESSAGES:"core_message/message_drawer_view_conversation_body_messages"},CONVERSATION_TYPES:{PRIVATE:1,PUBLIC:2,SELF:3},NEWEST_MESSAGES_FIRST:!0,LOAD_MESSAGE_LIMIT:100,MILLISECONDS_IN_SEC:1e3}});
define ("core_message/toggle_contact_button",["jquery","core/ajax","core/templates","core/notification","core/custom_interaction_events"],function(a,b,c,d,e){var f=function(a){return"1"==a.attr("data-is-contact")},g=function(a){a.attr("data-is-contact","1")},h=function(a){a.attr("data-is-contact","0")},i=function(a){return a.attr("data-userid")},j=function(a){return a.hasClass("loading")||a.attr("disabled")},k=function(c,e){if(j(c)){return a.Deferred()}c.addClass("loading");c.attr("disabled","disabled");return b.call([e])[0].fail(d.exception).always(function(){c.removeClass("loading");c.removeAttr("disabled")})},l=function(a){if(j(a)){return}var b={methodname:"core_message_create_contacts",args:{userids:[i(a)]}};k(a,b).done(function(){g(a);c.render("message/remove_contact_button",{}).done(function(b,d){c.replaceNodeContents(a,b,d)})})},m=function(a){if(j(a)){return}var b={methodname:"core_message_delete_contacts",args:{userids:[i(a)]}};k(a,b).done(function(){h(a);c.render("message/add_contact_button",{}).done(function(b,d){c.replaceNodeContents(a,b,d)})})};return{enhance:function enhance(b){b=a(b);if(!b.children(".loading-icon").length){c.render("core/loading",{}).done(function(a,c){b.append(a,c)})}e.define(b,[e.events.activate]);b.on(e.events.activate,function(a,c){if(f(b)){m(b)}else{l(b)}a.preventDefault();c.originalEvent.preventDefault()})}}});
define ("core_message/message_drawer_view_contacts_section_contacts",["jquery","core/notification","core/pubsub","core/templates","core_message/message_repository","core_message/message_drawer_events","core_message/message_drawer_lazy_load_list"],function(a,b,c,d,e,f,g){var h={BLOCK_ICON_CONTAINER:"[data-region=\"block-icon-container\"]",CONTACT:"[data-region=\"contact\"]",CONTENT_CONTAINER:"[data-region=\"contacts-content-container\"]"},i={CONTACTS_LIST:"core_message/message_drawer_contacts_list"},j=function(a,b){return a.find("[data-contact-user-id=\""+b+"\"]")},k=function(c,e){var f=e.map(function(b){return a.extend(b,{id:b.userid})});return d.render(i.CONTACTS_LIST,{contacts:f}).then(function(a){c.append(a);return a}).catch(b.exception)},l=function(a){return function(c,d){return e.getContacts(d,101,a).then(function(a){return a}).then(function(a){if(a.length>100){a.pop()}else{g.setLoadedAll(c,!0)}return a}).then(function(b){a=a+100;return b}).catch(b.exception)}},m=function(a,b){j(a,b).remove()},n=function(a,b){var c=j(a,b);if(c.length){c.find(h.BLOCK_ICON_CONTAINER).removeClass("hidden")}},o=function(a,b){var c=j(a,b);if(c.length){c.find(h.BLOCK_ICON_CONTAINER).addClass("hidden")}},p=function(a){c.subscribe(f.CONTACT_ADDED,function(b){var c=g.getContentContainer(a);k(c,[b]);g.hideEmptyMessage(a);g.showContent(a)});c.subscribe(f.CONTACT_REMOVED,function(b){m(a,b);var c=a.find(h.CONTACT);if(!c.length){g.hideContent(a);g.showEmptyMessage(a)}});c.subscribe(f.CONTACT_BLOCKED,function(b){n(a,b)});c.subscribe(f.CONTACT_UNBLOCKED,function(b){o(a,b)})};return{show:function show(a){if(!a.attr("data-contacts-init")){p(a);a.attr("data-contacts-init",!0)}g.show(a,l(0),k)}}});
function _typeof(e){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(e){return typeof e}}else{_typeof=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return _typeof(e)}define ("core_message/message_drawer_view_conversation",["jquery","core/auto_rows","core/backoff_timer","core/custom_interaction_events","core/notification","core/pending","core/pubsub","core/str","core_message/message_repository","core_message/message_drawer_events","core_message/message_drawer_view_conversation_constants","core_message/message_drawer_view_conversation_patcher","core_message/message_drawer_view_conversation_renderer","core_message/message_drawer_view_conversation_state_manager","core_message/message_drawer_router","core_message/message_drawer_routes","core/emoji/auto_complete","core/emoji/picker"],function(s,e,t,n,a,r,o,d,i,g,l,m,c,_,E,C,I,u){var v={},h=null,T=!1,A=0,f=null,O=!1,p=[],M=!0,S=!1,N=!1,b=[],R=null,U=[],L=l.NEWEST_MESSAGES_FIRST,D=l.LOAD_MESSAGE_LIMIT,w=l.MILLISECONDS_IN_SEC,y=l.SELECTORS,P=l.CONVERSATION_TYPES,B=function(){if(!h||h.type==P.PUBLIC){return null}var e=h.loggedInUserId;if(h.type==P.SELF){return e}var s=Object.keys(h.members).filter(function(s){return e!=s});return s.length?s[0]:null},F=function(e){return Object.keys(v).reduce(function(s,t){if(!s){var n=v[t].state;if(n.type!=P.PUBLIC){if(e in n.members){s=n.id}}}return s},null)},k=function(e){return{id:parseInt(e.attr("data-user-id"),10),fullname:null,profileimageurl:null,profileimageurlsmall:null,isonline:null,showonlinestatus:null,isblocked:null,iscontact:null,isdeleted:null,canmessage:null,canmessageevenifblocked:null,requirescontact:null,contactrequests:[]}},V=function(){return A},G=function(e){A=e;v[h.id].messagesOffset=e},x=function(){return T},q=function(e){T=e;v[h.id].loadedAllMessages=e},K=function(e){return e.find(y.MESSAGES_CONTAINER)},Q=function(e){return{id:e.id,name:e.name,subname:e.subname,imageUrl:e.imageUrl,isFavourite:e.isFavourite,isMuted:e.isMuted,type:e.type,totalMemberCount:e.totalMemberCount,loggedInUserId:e.loggedInUserId,messages:e.messages.map(function(e){return s.extend({},e)}),members:Object.keys(e.members).map(function(t){var n=s.extend({},e.members[t]);n.contactrequests=e.members[t].contactrequests.map(function(e){return s.extend({},e)});return n})}},j=function(e,s){var t=e.id,n=t==s?P.SELF:P.PRIVATE,r=_.setLoadingMembers(h,!0);r=_.setLoadingMessages(r,!0);R(r);return i.getMemberInfo(t,[s],!0,!0).then(function(e){if(e.length){return e[0]}else{throw new Error("Unable to load other user profile")}}).then(function(s){var t=n==P.SELF?[s]:[s,e],a=_.addMembers(h,t);a=_.setLoadingMembers(a,!1);a=_.setLoadingMessages(a,!1);a=_.setName(a,s.fullname);a=_.setType(a,n);a=_.setImageUrl(a,s.profileimageurl);a=_.setTotalMemberCount(a,t.length);R(a);return s}).catch(function(e){var s=_.setLoadingMembers(h,!1);R(s);a.exception(e)})},W=function(e,s){var t=null;if(e.type==P.PRIVATE){var n=e.members.filter(function(e){return e.id!=s});t=n.length?n[0]:null}else if(e.type==P.SELF){t=e.members[0]}var a=e.name,r=e.imageurl;if(e.type!=P.PUBLIC){a=a||t?t.fullname:"";r=r||t?t.profileimageurl:""}var o=_.addMembers(h,e.members);o=_.setName(o,a);o=_.setSubname(o,e.subname);o=_.setType(o,e.type);o=_.setImageUrl(o,r);o=_.setTotalMemberCount(o,e.membercount);o=_.setIsFavourite(o,e.isfavourite);o=_.setIsMuted(o,e.ismuted);o=_.addMessages(o,e.messages);o=_.setCanDeleteMessagesForAllUsers(o,e.candeletemessagesforallusers);return o},J=function(e,s,t,n,r){var o=s.id,d=_.setLoadingMembers(h,!0);d=_.setLoadingMessages(d,!0);R(d);return i.getConversation(o,e,!0,!0,0,0,t+1,n,r).then(function(e){if(e.messages.length>t){e.messages=e.messages.slice(1)}else{q(!0)}G(n+t);return e}).then(function(e){var t=e.members.filter(function(e){return e.id==s.id});if(1>t.length){e.members=e.members.concat([s])}var n=W(e,s.id);n=_.setLoadingMembers(n,!1);n=_.setLoadingMessages(n,!1);return R(n).then(function(){return e})}).then(function(){return z(e)}).catch(function(e){var s=_.setLoadingMembers(h,!1);s=_.setLoadingMessages(s,!1);R(s);a.exception(e)})},X=function(e,s,t,n){var r=e.members.filter(function(e){return e.id==s.id});if(1>r.length){e.members=e.members.concat([s])}var o=e.messages.length,d=o>=t,i=W(e,s.id);i=_.setLoadingMembers(i,!1);i=_.setLoadingMessages(i,!d);var g=R(i);return g.then(function(){if(!d){return Y(e.id,t,o,n,[])}else{return{messages:e.messages}}}).then(function(){var e=h.messages;G(e.length);z(h.id);return e}).catch(a.exception)},Y=function(e,s,t,n,a,r){return i.getMessages(h.loggedInUserId,e,s?s+1:s,t,n,r).then(function(e){if(e.id!=h.id){e.messages=[];if(e.id in v){delete v[e.id]}}return e}).then(function(e){if(e.messages.length&&a.length){e.messages=e.messages.filter(function(e){return 0>a.indexOf(parseInt(e.id,10))})}return e}).then(function(e){if(!s){return e}else if(e.messages.length>s){e.messages=e.messages.slice(0,-1)}else{q(!0)}return e}).then(function(e){var s=e.members.filter(function(e){return!(e.id in h.members)}),t=_.addMembers(h,s);t=_.addMessages(t,e.messages);t=_.setLoadingMessages(t,!1);return R(t).then(function(){return e})}).catch(function(e){var s=_.setLoadingMessages(h,!1);R(s);throw e})},H=function(e,t){return function(){var n=h.messages,a=n.length?n[n.length-1]:null,r=a?a.timeCreated:null;if(r&&!M&&!S&&!N){for(var d=[],l=n.length-1,m;0<=l;l--){m=n[l];if(m.timeCreated===r){d.push(m.id)}else{break}}return Y(e,0,0,t,d,r).then(function(s){if(s.messages.length){f.restart();var t=Q(h);o.publish(g.CONVERSATION_NEW_LAST_MESSAGE,t);return z(e)}else{return s}})}return s.Deferred().resolve().promise()}},z=function(e){var s=h.loggedInUserId,t=new r("core_message/message_drawer_view_conversation:markConversationAsRead");return i.markAllConversationMessagesAsRead(s,e).then(function(){var s=_.markMessagesAsRead(h,h.messages);o.publish(g.CONVERSATION_READ,e);return R(s)}).then(function(e){t.resolve();return e})},Z=function(e){Ee(e);var s=_.addPendingBlockUsersById(h,[e]);R(s)},$=function(e){var s=_.setLoadingConfirmAction(h,!0),t=new r("core_message/message_drawer_view_conversation:blockUser");R(s);return i.blockUser(h.loggedInUserId,e).then(function(s){var t=_.addMembers(h,[s]);t=_.removePendingBlockUsersById(t,[e]);t=_.setLoadingConfirmAction(t,!1);o.publish(g.CONTACT_BLOCKED,e);return R(t)}).then(function(e){t.resolve();return e})},ee=function(e){Ee(e);var s=_.addPendingUnblockUsersById(h,[e]);R(s)},se=function(e){var s=_.setLoadingConfirmAction(h,!0),t=new r("core_message/message_drawer_view_conversation:unblockUser");R(s);return i.unblockUser(h.loggedInUserId,e).then(function(s){var t=_.addMembers(h,[s]);t=_.removePendingUnblockUsersById(t,[e]);t=_.setLoadingConfirmAction(t,!1);o.publish(g.CONTACT_UNBLOCKED,e);return R(t)}).then(function(e){t.resolve();return e})},te=function(e){Ee(e);var s=_.addPendingRemoveContactsById(h,[e]);R(s)},ne=function(e){var s=_.setLoadingConfirmAction(h,!0),t=new r("core_message/message_drawer_view_conversation:removeContact");R(s);return i.deleteContacts(h.loggedInUserId,[e]).then(function(s){var t=_.addMembers(h,s);t=_.removePendingRemoveContactsById(t,[e]);t=_.setLoadingConfirmAction(t,!1);o.publish(g.CONTACT_REMOVED,e);return R(t)}).then(function(e){t.resolve();return e})},ae=function(e){Ee(e);var s=_.addPendingAddContactsById(h,[e]);R(s)},re=function(e){var s=_.setLoadingConfirmAction(h,!0),t=new r("core_message/message_drawer_view_conversation:addContactRequests");R(s);return i.createContactRequest(h.loggedInUserId,e).then(function(e){if(!e.request){throw new Error(e.warnings[0].message)}return e.request}).then(function(s){var t=_.removePendingAddContactsById(h,[e]);t=_.addContactRequests(t,[s]);t=_.setLoadingConfirmAction(t,!1);return R(t)}).then(function(e){t.resolve();return e})},oe=function(){var e=h.loggedInUserId,s=h.id,t=new r("core_message/message_drawer_view_conversation:setFavourite");return i.setFavouriteConversations(e,[s]).then(function(){var e=_.setIsFavourite(h,!0);return R(e)}).then(function(){return o.publish(g.CONVERSATION_SET_FAVOURITE,Q(h))}).then(function(e){t.resolve();return e})},de=function(){var e=h.loggedInUserId,s=h.id,t=new r("core_message/message_drawer_view_conversation:unsetFavourite");return i.unsetFavouriteConversations(e,[s]).then(function(){var e=_.setIsFavourite(h,!1);return R(e)}).then(function(){return o.publish(g.CONVERSATION_UNSET_FAVOURITE,Q(h))}).then(function(e){t.resolve();return e})},ie=function(){var e=h.loggedInUserId,s=h.id,t=new r("core_message/message_drawer_view_conversation:markConversationAsRead");return i.setMutedConversations(e,[s]).then(function(){var e=_.setIsMuted(h,!0);return R(e)}).then(function(){return o.publish(g.CONVERSATION_SET_MUTED,Q(h))}).then(function(e){t.resolve();return e})},ge=function(){var e=h.loggedInUserId,s=h.id;return i.unsetMutedConversations(e,[s]).then(function(){var e=_.setIsMuted(h,!1);return R(e)}).then(function(){return o.publish(g.CONVERSATION_UNSET_MUTED,Q(h))})},le=function(e){var s=h.selectedMessageIds;Ee(e);var t=_.addPendingDeleteMessagesById(h,s);R(t)},me=function(){var e=new r("core_message/message_drawer_view_conversation:deleteSelectedMessages"),t=h.pendingDeleteMessageIds,n=h.messages.filter(function(e){return 0<=t.indexOf(e.id)&&("sent"==e.sendState||null===e.sendState)}),d=_.setLoadingConfirmAction(h,!0);R(d);var l=s.Deferred().resolve().promise();if(n.length){var m=n.map(function(e){return e.id});if(d.deleteMessagesForAllUsers){l=i.deleteMessagesForAllUsers(h.loggedInUserId,m)}else{l=i.deleteMessages(h.loggedInUserId,m)}}N=!0;if(f){f.stop()}return l.then(function(){var e=_.removeMessagesById(h,t);e=_.removePendingDeleteMessagesById(e,t);e=_.removeSelectedMessagesById(e,t);e=_.setLoadingConfirmAction(e,!1);e=_.setDeleteMessagesForAllUsers(e,!1);var s=h.messages[h.messages.length-1],n=e.messages.length?e.messages[e.messages.length-1]:null;if(n&&n.id!=s.id){var a=Q(e);o.publish(g.CONVERSATION_NEW_LAST_MESSAGE,a)}else if(!e.messages.length){o.publish(g.CONVERSATION_DELETED,e.id)}N=!1;return R(e)}).then(function(s){e.resolve();return s}).catch(a.exception)},ce=function(e){Ee(e);var s=_.setPendingDeleteConversation(h,!0);R(s)},_e=function(){var e=new r("core_message/message_drawer_view_conversation:markConversationAsRead"),s=_.setLoadingConfirmAction(h,!0);R(s);N=!0;if(f){f.stop()}return i.deleteConversation(h.loggedInUserId,h.id).then(function(){var e=_.removeMessages(h,h.messages);e=_.removeSelectedMessagesById(e,h.selectedMessageIds);e=_.setPendingDeleteConversation(e,!1);e=_.setLoadingConfirmAction(e,!1);o.publish(g.CONVERSATION_DELETED,e.id);N=!1;return R(e)}).then(function(s){e.resolve();return s})},Ee=function(e){var s=h.pendingDeleteMessageIds,t=_.removePendingAddContactsById(h,[e]);t=_.removePendingRemoveContactsById(t,[e]);t=_.removePendingUnblockUsersById(t,[e]);t=_.removePendingBlockUsersById(t,[e]);t=_.removePendingDeleteMessagesById(t,s);t=_.setPendingDeleteConversation(t,!1);t=_.setDeleteMessagesForAllUsers(t,!1);R(t)},Ce=function(e){var s=new r("core_message/message_drawer_view_conversation:acceptContactRequest"),t=h.loggedInUserId,n=h.members[e].contactrequests.filter(function(e){return e.requesteduserid==t}),a=n[0],d=_.setLoadingConfirmAction(h,!0);R(d);return i.acceptContactRequest(e,t).then(function(e){var s=_.removeContactRequests(h,[a]);s=_.addMembers(h,[e]);s=_.setLoadingConfirmAction(s,!1);return R(s)}).then(function(){o.publish(g.CONTACT_ADDED,h.members[e]);o.publish(g.CONTACT_REQUEST_ACCEPTED,a)}).then(function(e){s.resolve();return e})},Ie=function(e){var s=new r("core_message/message_drawer_view_conversation:declineContactRequest"),t=h.loggedInUserId,n=h.members[e].contactrequests.filter(function(e){return e.requesteduserid==t}),a=n[0],d=_.setLoadingConfirmAction(h,!0);R(d);return i.declineContactRequest(e,t).then(function(e){var s=_.removeContactRequests(h,[a]);s=_.addMembers(h,[e]);s=_.setLoadingConfirmAction(s,!1);return R(s)}).then(function(){o.publish(g.CONTACT_REQUEST_DECLINED,a)}).then(function(e){s.resolve();return e})},ue=function(){if(S){return}if(!b.length){return}var e=new r("core_message/message_drawer_view_conversation:processSendMessageBuffer");S=!0;var t=b.slice();b=[];var n=h.id,a=null,l=t.map(function(e){return e.text}),m=t.map(function(e){return e.id}),c=null,E=null;if(!n&&h.type!=P.PUBLIC){var C=B();c=i.sendMessagesToUser(C,l).then(function(e){if(e.length){a=parseInt(e[0].conversationid,10);E=e[0].candeletemessagesforallusers}return e})}else{c=i.sendMessagesToConversation(n,l)}c.then(function(e){var s=e.map(function(e){return e.id}),n=[],r=[],d=[];t.forEach(function(s,t){var a=e[t];n.push([s,a]);if(0<=h.selectedMessageIds.indexOf(s.id)){r.push(s.id);d.push(a.id)}});var i=_.updateMessages(h,n);i=_.setMessagesSendSuccessById(i,s);if(r.length){i=_.removeSelectedMessagesById(i,r)}if(d.length){i=_.addSelectedMessagesById(i,d)}var l=Q(i);if(!i.id){i=_.setId(i,a);l.id=a;Ve(a);o.publish(g.CONVERSATION_CREATED,l);i=_.setCanDeleteMessagesForAllUsers(i,E)}R(i);S=!1;ue();o.publish(g.CONVERSATION_NEW_LAST_MESSAGE,l)}).then(function(s){e.resolve();return s}).catch(function(t){var n;if(t.message){n=s.Deferred().resolve(t.message).promise()}else{n=d.get_string("unknownerror","core")}var a=function(e){var s=_.setMessagesSendFailById(h,m,e);R(s);S=!1;ue()};n.then(a).then(function(s){e.resolve();return s}).catch(function(s){var e=s.message||"Something went wrong!";a(e)})})},ve=function(e){var s="temp"+Date.now(),t={id:s,useridfrom:h.loggedInUserId,text:e,timecreated:null},n=_.addMessages(h,[t]);R(n);b.push(t);ue()},he=function(e){var s=_.setMessagesSendPendingById(h,[e.id]);R(s);b.push(e);ue()},Te=function(e){var s=h;if(-1<h.selectedMessageIds.indexOf(e)){s=_.removeSelectedMessagesById(h,[e])}else{s=_.addSelectedMessagesById(h,[e])}R(s)},Ae=function(){Ee(B());var e=_.removeSelectedMessagesById(h,h.selectedMessageIds);R(e)},fe=function(e,t,n){if(O){return}if(!p.length){return}O=!0;var r=p.shift(),o=U.map(function(e){return e(r.patch)});s.when.apply(null,o).then(function(){O=!1;r.deferred.resolve(!0);fe(e,t,n)}).catch(function(e){O=!1;r.deferred.reject(e);a.exception(e)})},Oe=function(e,t,n,a){var r=function(s){return c.render(e,t,n,s)};if(!a){var o=_.buildInitialState(h.midnight,h.loggedInUserId,h.id),d=m.buildPatch(o,h);r(d)}U.push(r);return function(a){var r=m.buildPatch(h,a),o=s.Deferred();if(Object.keys(r).length){p.push({patch:r,deferred:o})}else{o.resolve(!0)}h=a;if(a.id){v[a.id]={state:a,messagesOffset:V(),loadedAllMessages:x()}}fe(e,t,n);return o.promise()}},pe=function(e){return function(s,t){if(!h.loadingConfirmAction){e(B());var n=_.setLoadingConfirmAction(h,!1);R(n)}t.originalEvent.preventDefault()}},Me=function(t,e){var n=s(t.target),a=n.closest(y.FOOTER_CONTAINER),r=a.find(y.MESSAGE_TEXT_AREA),o=r.val().trim();if(""!==o){ve(o);r.val("");r.focus()}e.originalEvent.preventDefault()},Se=function(t,e){var n=window.getSelection(),a=s(t.target);if(""!=n.toString()){return}if(a.is("a")){return}var r=a.closest(y.MESSAGE),o=r.attr("data-message-id");Te(o);e.originalEvent.preventDefault()},Ne=function(t,e){var n=s(t.target),a=n.closest(y.MESSAGE),r=a.attr("data-message-id"),o=h.messages.filter(function(e){return e.id==r}),d=o.length?o[0]:null;if(d){he(d)}e.originalEvent.preventDefault();e.originalEvent.stopPropagation();t.stopPropagation()},be=function(s,e){Ae();e.originalEvent.preventDefault()},Re=function(s){return function(t,e){var n=B(),a=h.members[n];E.go(s,C.VIEW_CONTACT,a);e.originalEvent.preventDefault()}},Ue=function(s,e){oe().catch(a.exception);e.originalEvent.preventDefault()},Le=function(s,e){de().catch(a.exception);e.originalEvent.preventDefault()},De=function(s,e){ie().catch(a.exception);e.originalEvent.preventDefault()},we=function(s,e){ge().catch(a.exception);e.originalEvent.preventDefault()},ye=function(t){var e=s(t.target).prop("checked"),n=_.setDeleteMessagesForAllUsers(h,e);R(n)},Pe=function(s){return function(t,e){E.go(s,C.VIEW_GROUP_INFO,{id:h.id,name:h.name,subname:h.subname,imageUrl:h.imageUrl,totalMemberCount:h.totalMemberCount},h.loggedInUserId);e.originalEvent.preventDefault()}},Be=function(s,e){var t=_.setShowEmojiPicker(h,!h.showEmojiPicker);R(t);e.originalEvent.preventDefault()},Fe=function(t){var e=s(t.target);if(h.showEmojiPicker&&!e.closest(y.EMOJI_PICKER_CONTAINER).length&&!e.closest(y.TOGGLE_EMOJI_PICKER_BUTTON).length){var n=_.setShowEmojiPicker(h,!1);R(n)}},ke=function(t,r,d,i){var l=!1,m=K(d),c=i.find(y.EMOJI_PICKER),E=i.find(y.EMOJI_AUTO_COMPLETE_CONTAINER),v=i.find(y.MESSAGE_TEXT_AREA),T=[[y.ACTION_REQUEST_BLOCK,pe(Z)],[y.ACTION_REQUEST_UNBLOCK,pe(ee)],[y.ACTION_REQUEST_ADD_CONTACT,pe(ae)],[y.ACTION_REQUEST_REMOVE_CONTACT,pe(te)],[y.ACTION_REQUEST_DELETE_CONVERSATION,pe(ce)],[y.ACTION_CANCEL_EDIT_MODE,be],[y.ACTION_VIEW_CONTACT,Re(t)],[y.ACTION_VIEW_GROUP_INFO,Pe(t)],[y.ACTION_CONFIRM_FAVOURITE,Ue],[y.ACTION_CONFIRM_MUTE,De],[y.ACTION_CONFIRM_UNFAVOURITE,Le],[y.ACTION_CONFIRM_UNMUTE,we]],A=[[y.ACTION_CANCEL_CONFIRM,pe(Ee)],[y.ACTION_CONFIRM_BLOCK,pe($)],[y.ACTION_CONFIRM_UNBLOCK,pe(se)],[y.ACTION_CONFIRM_ADD_CONTACT,pe(re)],[y.ACTION_CONFIRM_REMOVE_CONTACT,pe(ne)],[y.ACTION_CONFIRM_DELETE_SELECTED_MESSAGES,pe(me)],[y.ACTION_CONFIRM_DELETE_CONVERSATION,pe(_e)],[y.ACTION_OKAY_CONFIRM,pe(Ee)],[y.ACTION_REQUEST_ADD_CONTACT,pe(ae)],[y.ACTION_ACCEPT_CONTACT_REQUEST,pe(Ce)],[y.ACTION_DECLINE_CONTACT_REQUEST,pe(Ie)],[y.MESSAGE,Se],[y.DELETE_MESSAGES_FOR_ALL_USERS_TOGGLE,ye],[y.RETRY_SEND,Ne]],O=[[y.SEND_MESSAGE_BUTTON,Me],[y.TOGGLE_EMOJI_PICKER_BUTTON,Be],[y.ACTION_REQUEST_DELETE_SELECTED_MESSAGES,pe(le)],[y.ACTION_REQUEST_ADD_CONTACT,pe(ae)],[y.ACTION_REQUEST_UNBLOCK,pe(ee)]];e.init(i);if(E.length){I(E[0],v[0],function(e){var s=_.setShowEmojiAutoComplete(h,e);R(s)},function(e){var s=_.setShowEmojiAutoComplete(h,!1);R(s);v.focus();var t=v.prop("selectionStart"),n=v.val(),a=n.substring(0,t).replace(/\S*$/,""),r=n.substring(t).replace(/^\S*/,"");v.val(a+e+r);v.prop("selectionStart",a.length+e.length);v.prop("selectionEnd",a.length+e.length)})}if(c.length){u(c[0],function(e){var s=_.setShowEmojiPicker(h,!h.showEmojiPicker);R(s);v.focus();var t=v.prop("selectionStart"),n=v.val(),a=n.substring(0,t),r=n.substring(t,n.length);v.val(a+e+r);v.prop("selectionStart",t+e.length);v.prop("selectionEnd",t+e.length)})}n.define(r,[n.events.activate]);n.define(d,[n.events.activate]);n.define(i,[n.events.activate,n.events.enter,n.events.escape]);n.define(m,[n.events.scrollTop,n.events.scrollLock]);m.on(n.events.scrollTop,function(s,e){var t=1<Object.keys(h.members).length;if(!M&&!l&&!x()&&t){l=!0;var n=_.setLoadingMessages(h,!0);R(n);Y(h.id,D,V(),L,[]).then(function(){l=!1;G(V()+D)}).catch(function(e){l=!1;a.exception(e)})}e.originalEvent.preventDefault()});T.forEach(function(e){var s=e[0],t=e[1];r.on(n.events.activate,s,t)});A.forEach(function(e){var s=e[0],t=e[1];d.on(n.events.activate,s,t)});O.forEach(function(e){var s=e[0],t=e[1];i.on(n.events.activate,s,t)});i.on(n.events.enter,y.MESSAGE_TEXT_AREA,function(s,e){var t=i.attr("data-enter-to-send");if(t&&"false"!=t&&"0"!=t){Me(s,e)}});i.on(n.events.escape,y.EMOJI_PICKER_CONTAINER,Be);s(document.body).on("click",Fe);o.subscribe(g.ROUTE_CHANGED,function(e){if(f){if(e.route!=C.VIEW_CONVERSATION){f.stop()}}})},Ve=function(e){if(f){f.stop()}f=new t(H(e,L),t.getIncrementalCallback(h.messagePollMin*w,w,h.messagePollMax*w,h.messagePollAfterMax*w));f.start()},Ge=function(e,s,t){if(f){f.stop()}T=!1;A=0;f=null;O=!1;p=[];M=!0;S=!1;N=!1;b=[];var n=t.id,a=parseInt(e.attr("data-midnight"),10),r=parseInt(e.attr("data-message-poll-min"),10),o=parseInt(e.attr("data-message-poll-max"),10),d=parseInt(e.attr("data-message-poll-after-max"),10),i=_.buildInitialState(a,n,s,r,o,d);if(!h){h=i}R(i)},xe=function(e,s,t){Ge(e,null,s);var n=null;if(s.id!=t){n=i.getConversationBetweenUsers(s.id,t,!0,!0,0,0,D,0,L)}else{n=i.getSelfConversation(s.id,D,0,L)}return n.then(function(t){return Ke(e,t,s)}).catch(function(){return j(s,t)})},qe=function(e,t,n){var a=null;if(t in v){a=v[t]}Ge(e,t,n);var r=s.Deferred().resolve({}).promise();if(a){var o=a.state;o=_.setLoadingMessages(o,!1);o=_.setLoadingMembers(o,!1);G(a.messagesOffset);q(a.loadedAllMessages);R(o)}else{r=J(t,n,D,0,L)}return r.then(function(){return Ve(t)})},Ke=function(e,t,n){var a=null;if(t.id in v){a=v[t.id]}Ge(e,t.id,n);var r=s.Deferred().resolve({}).promise();if(a){var o=a.state;o=_.setLoadingMessages(o,!1);o=_.setLoadingMembers(o,!1);G(a.messagesOffset);q(a.loadedAllMessages);R(o)}else{r=X(t,n,D,L)}return r.then(function(){return Ve(t.id)})},Qe=function(e,t,n,r,o,d,i){var g=null,m=null;if(o&&null!==o&&"object"==_typeof(o)){g=o;m=parseInt(g.id,10)}else{g=null;m=parseInt(o,10);m=isNaN(m)?null:m}if(!m&&d&&i){m=F(i)}var c=!h||h.id!=m||i&&i!=B();if(!n.attr("data-init")){R=Oe(t,n,r,c);ke(e,t,n,r);n.attr("data-init",!0)}if(c){var _=null,E=k(n);if(g){_=Ke(n,g,E,i)}else if(m){_=qe(n,m,E,i)}else{_=xe(n,E,i)}return _.then(function(){M=!1;t.find(l.SELECTORS.CAN_RECEIVE_FOCUS).first().focus()}).catch(function(e){M=!1;a.exception(e)})}Ve(m);if(h.type==P.PRIVATE&&d){var C=B();switch(d){case"block":return Z(C);case"unblock":return ee(C);case"add-contact":return ae(C);case"remove-contact":return te(C);}}return s.Deferred().resolve().promise()},je=function(){return d.get_string("messagedrawerviewconversation","core_message",h.name)};return{show:Qe,description:je}});
define ("core_message/message_notification_preference",["jquery","core_message/notification_preference"],function(a,b){var c={PREFERENCE_KEY:"[data-preference-key]"},d=function(a,c){b.call(this,a,c)};d.prototype=Object.create(b.prototype);d.prototype.constructor=d;d.prototype.getPreferenceKey=function(){return this.root.find(c.PREFERENCE_KEY).attr("data-preference-key")};return d});
define ("core_message/message_drawer_view_overview",["jquery","core/key_codes","core/pubsub","core/str","core_message/message_drawer_router","core_message/message_drawer_routes","core_message/message_drawer_events","core_message/message_drawer_view_overview_section","core_message/message_repository","core_message/message_drawer_view_conversation_constants"],function(a,b,c,d,e,f,g,h,i,j){var k={CONTACT_REQUEST_COUNT:"[data-region=\"contact-request-count\"]",FAVOURITES:"[data-region=\"view-overview-favourites\"]",GROUP_MESSAGES:"[data-region=\"view-overview-group-messages\"]",MESSAGES:"[data-region=\"view-overview-messages\"]",SEARCH_INPUT:"[data-region=\"view-overview-search-input\"]",SECTION_TOGGLE_BUTTON:"[data-toggle]"},l={PRIVATE:[j.CONVERSATION_TYPES.PRIVATE,j.CONVERSATION_TYPES.SELF],PUBLIC:[j.CONVERSATION_TYPES.PUBLIC],FAVOURITE:null},m=null,n=function(a){if(null===m){m=i.getAllConversationCounts(a)}return m},o=function(a,b,c){var d=0;if(b&&b.length){d=b.reduce(function(b,c){return b+a.types[c]},d)}if(c){d+=a.favourites}return d},p=function(a){var b=a.some(function(a){var b=a[0];return h.isVisible(b)});if(b){return}a.sort(function(c,a){var b=c[1],d=c[2],e=a[1],f=a[2];if(0<d&&0==f){return-1}else if(0==d&&0<f){return 1}else if(0<b&&0==e){return-1}else if(0==b&&0<e){return 1}else{return 0}});var c=a[0][0],d=c.find(k.SECTION_TOGGLE_BUTTON);d.click()},q=function(a){return a.find(k.SEARCH_INPUT)},r=function(a){return a.attr("data-user-id")},s=function(a){return function(){var b=a.find(k.CONTACT_REQUEST_COUNT),c=parseInt(b.text(),10);c=isNaN(c)?0:c-1;if(0>=c){b.addClass("hidden")}else{b.text(c)}}},t=function(a,d){var h=q(d),i=[b.tab,b.shift,b.ctrl,b.alt];h.on("click",function(){e.go(a,f.VIEW_SEARCH)});h.on("keydown",function(b){if(0>i.indexOf(b.keyCode)&&"Meta"!=b.key){e.go(a,f.VIEW_SEARCH)}});c.subscribe(g.CONTACT_REQUEST_ACCEPTED,s(d));c.subscribe(g.CONTACT_REQUEST_DECLINED,s(d))};return{show:function show(a,b,c){if(!b.attr("data-init")){t(a,b);b.attr("data-init",!0)}var d=b.attr("data-in-panel")?"frompanel":null;q(b).val("");var e=r(c),f=n(e),g=[[c.find(k.FAVOURITES),l.FAVOURITE,!0],[c.find(k.GROUP_MESSAGES),l.PUBLIC,!1],[c.find(k.MESSAGES),l.PRIVATE,!1]];g.forEach(function(b){var c=b[0],e=b[1],g=b[2],i=f.then(function(a){return o(a.total,e,g)}),j=f.then(function(a){return o(a.unread,e,g)});h.show(a,null,c,null,e,g,i,j,d)});return f.then(function(a){var b=g.map(function(b){var c=b[0],d=b[1],e=b[2],f=o(a.total,d,e),g=o(a.unread,d,e);return[c,f,g]});return p(b)})},description:function description(){return d.get_string("messagedrawerviewoverview","core_message")}}});
function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("core_message/message_drawer_router",["jquery","core/pubsub","core/str","core_message/message_drawer_events"],function(a,b,c,d){var e={},f={},g={CAN_RECEIVE_FOCUS:"input:not([type=\"hidden\"]), a[href], button, textarea, select, [tabindex]",ROUTES_BACK:"[data-route-back]"},h=function(c,f){var h,j=[].slice.call(arguments).some(function(a){return"frompanel"==a}),k=[].slice.call(arguments,2),l=a.Deferred().resolve().promise();Object.keys(e[c]).forEach(function(a){var b=e[c][a],d=a===f;if(d){h=b}b.parameters.forEach(function(a){if("object"!==_typeof(a)||null===a){return}a.removeClass("previous");a.attr("data-from-panel",!1);if(d){if(j){a.attr("data-from-panel",!0)}a.removeClass("hidden");a.attr("aria-hidden",!1)}else{if(!a.attr("data-in-panel")){a.addClass("hidden");a.attr("aria-hidden",!0)}else if("view-search"==f||"view-overview"==f){a.addClass("hidden");a.attr("aria-hidden",!0)}}})});if(h){if(h.onGo){l=h.onGo.apply(void 0,h.parameters.concat(k));for(var m=a(document.activeElement),n=!1,o=null,p=1,q;p<h.parameters.length;p++){q=h.parameters[p];if("object"!==_typeof(q)||null===q){continue}if(!o){o=q}if(q.has(m).length){n=!0;break}}if(!n){o.find(g.CAN_RECEIVE_FOCUS).filter(":visible").first().focus()}}}var r={route:f,params:k,renderPromise:l};b.publish(d.ROUTE_CHANGED,r);return r},i=function(b){var d=a(document.activeElement),j=h.apply(b,arguments),k=!1;if(!f[b]){f[b]=[]}f[b]=f[b].reduce(function(a,b){if(b.route===j.route){k=!0}if(!k){a.push(b)}return a},[]);var l=f[b].length,m=l?f[b][l-1]:null;if(m){for(var n=e[b][m.route],o=n.parameters,p=1;p<o.length;p++){if("object"!==_typeof(o[p])||null===o[p]){continue}o[p].addClass("previous")}m.focusElement=d;if(n.getDescription){n.getDescription.apply(null,n.parameters.concat(m.params)).then(function(a){return c.get_string("backto","core_message",a)}).then(function(a){return j.renderPromise.then(function(){e[b][j.route].parameters.forEach(function(b){if("object"!==_typeof(b)||!b){return}b.find(g.ROUTES_BACK).attr("aria-label",a)})})}).catch(function(){})}}f[b].push(j);return j};return{add:function add(a,b,c,d,f){if(!e[a]){e[a]=[]}e[a][b]={parameters:c,onGo:d,getDescription:f}},go:i,back:function back(a){if(f[a].length){f[a].pop();var b=f[a].pop();if(b){i.apply(void 0,[a,b.route].concat(b.params));window.setTimeout(function(){b.focusElement.focus()},50)}}}}});
define ("core_message/message_drawer_view_conversation_state_manager",["jquery"],function(a){var b=function(b){return a.extend(!0,{},b)},c=function(a,b,c){return a.map(function(a){var d=a.useridfrom==b;return{id:""+a.id,fromLoggedInUser:d,userFrom:c[a.useridfrom],text:a.text,timeCreated:a.timecreated?parseInt(a.timecreated,10):null}})},d=function(a){return a.map(function(a){return{id:a.id,fullname:a.fullname,profileurl:a.profileurl,profileimageurl:a.profileimageurl,profileimageurlsmall:a.profileimageurlsmall,isonline:a.isonline,showonlinestatus:a.showonlinestatus,isblocked:a.isblocked,iscontact:a.iscontact,isdeleted:a.isdeleted,canmessage:a.canmessage,canmessageevenifblocked:a.canmessageevenifblocked,requirescontact:a.requirescontact,contactrequests:a.contactrequests||[]}})};return{buildInitialState:function buildInitialState(a,b,c,d,e,f){return{midnight:a,loggedInUserId:b,id:c,messagePollMin:d,messagePollMax:e,messagePollAfterMax:f,name:null,subname:null,type:null,totalMemberCount:null,imageUrl:null,isFavourite:null,isMuted:null,canDeleteMessagesForAllUsers:!1,deleteMessagesForAllUsers:!1,members:{},messages:[],hasTriedToLoadMessages:!1,loadingMessages:!0,loadingMembers:!0,loadingConfirmAction:!1,pendingBlockUserIds:[],pendingUnblockUserIds:[],pendingRemoveContactIds:[],pendingAddContactIds:[],pendingDeleteMessageIds:[],pendingSendMessageIds:[],pendingDeleteConversation:!1,selectedMessageIds:[],showEmojiAutoComplete:!1,showEmojiPicker:!1}},addMessages:function addMessages(a,d){var e=b(a),f=c(d,a.loggedInUserId,a.members);f=f.map(function(a){a.sendState=null;a.timeAdded=Date.now();a.errorMessage=null;return a});var g=a.messages.concat(f);g.sort(function(c,a){if(null===c.timeCreated&&null===a.timeCreated){if(c.timeAdded<a.timeAdded){return-1}else if(c.timeAdded>a.timeAdded){return 1}}if(null===c.timeCreated&&null!==a.timeCreated){return 1}else if(null!==c.timeCreated&&null===a.timeCreated){return-1}else if(c.timeCreated<a.timeCreated){return-1}else if(c.timeCreated>a.timeCreated){return 1}else if(c.id<a.id){return-1}else if(c.id>a.id){return 1}else{return 0}});e.messages=g.filter(function(a,b,c){return!b||a.id!=c[b-1].id});return e},updateMessages:function updateMessages(d,e){var f=b(d),g=e.reduce(function(a,b){var e=b[0],f=b[1],g=c([f],d.loggedInUserId,d.members),h=g[0];a[e.id]=h;return a},{});f.messages=f.messages.map(function(b){if(b.id in g){return a.extend(b,g[b.id])}else{return b}});return f},removeMessages:function removeMessages(a,c){var d=b(a),e=c.map(function(a){return""+a.id});d.messages=d.messages.filter(function(a){return 0>e.indexOf(a.id)});return d},removeMessagesById:function removeMessagesById(a,c){var d=b(a);c=c.map(function(a){return""+a});d.messages=d.messages.filter(function(a){return 0>c.indexOf(a.id)});return d},addMembers:function addMembers(a,c){var e=b(a),f=d(c);f.forEach(function(a){e.members[a.id]=a});return e},removeMembers:function removeMembers(a,c){var d=b(a);c.forEach(function(a){delete d.members[a.id]});return d},setLoadingMessages:function setLoadingMessages(a,c){var d=b(a);d.loadingMessages=c;if(a.loadingMessages&&!c){d.hasTriedToLoadMessages=!0}return d},setLoadingMembers:function setLoadingMembers(a,c){var d=b(a);d.loadingMembers=c;return d},setId:function setId(a,c){var d=b(a);d.id=c;return d},setName:function setName(a,c){var d=b(a);d.name=c;return d},setSubname:function setSubname(a,c){var d=b(a);d.subname=c;return d},setType:function setType(a,c){var d=b(a);d.type=c;return d},setIsFavourite:function setIsFavourite(a,c){var d=b(a);d.isFavourite=c;return d},setIsMuted:function setIsMuted(a,c){var d=b(a);d.isMuted=c;return d},setCanDeleteMessagesForAllUsers:function setCanDeleteMessagesForAllUsers(a,c){var d=b(a);d.canDeleteMessagesForAllUsers=c;return d},setDeleteMessagesForAllUsers:function setDeleteMessagesForAllUsers(a,c){var d=b(a);d.deleteMessagesForAllUsers=c;return d},setTotalMemberCount:function setTotalMemberCount(a,c){var d=b(a);d.totalMemberCount=c;return d},setImageUrl:function setImageUrl(a,c){var d=b(a);d.imageUrl=c;return d},setLoadingConfirmAction:function setLoadingConfirmAction(a,c){var d=b(a);d.loadingConfirmAction=c;return d},setPendingDeleteConversation:function setPendingDeleteConversation(a,c){var d=b(a);d.pendingDeleteConversation=c;return d},setMessagesSendPendingById:function setMessagesSendPendingById(a,c){var d=b(a);c=c.map(function(a){return""+a});d.messages.forEach(function(a){if(0<=c.indexOf(a.id)){a.sendState="pending";a.errorMessage=null}});return d},setMessagesSendSuccessById:function setMessagesSendSuccessById(a,c){var d=b(a);c=c.map(function(a){return""+a});d.messages.forEach(function(a){if(0<=c.indexOf(a.id)){a.sendState="sent";a.errorMessage=null}});return d},setMessagesSendFailById:function setMessagesSendFailById(a,c,d){var e=b(a);c=c.map(function(a){return""+a});e.messages.forEach(function(a){if(0<=c.indexOf(a.id)){a.sendState="error";a.errorMessage=d}});return e},setShowEmojiAutoComplete:function setShowEmojiAutoComplete(a,c){var d=b(a);d.showEmojiAutoComplete=c;return d},setShowEmojiPicker:function setShowEmojiPicker(a,c){var d=b(a);d.showEmojiPicker=c;return d},addPendingBlockUsersById:function addPendingBlockUsersById(a,c){var d=b(a);c.forEach(function(a){d.pendingBlockUserIds.push(a)});return d},addPendingRemoveContactsById:function addPendingRemoveContactsById(a,c){var d=b(a);c.forEach(function(a){d.pendingRemoveContactIds.push(a)});return d},addPendingUnblockUsersById:function addPendingUnblockUsersById(a,c){var d=b(a);c.forEach(function(a){d.pendingUnblockUserIds.push(a)});return d},addPendingAddContactsById:function addPendingAddContactsById(a,c){var d=b(a);c.forEach(function(a){d.pendingAddContactIds.push(a)});return d},addPendingDeleteMessagesById:function addPendingDeleteMessagesById(a,c){var d=b(a);c.forEach(function(a){d.pendingDeleteMessageIds.push(a)});return d},removePendingBlockUsersById:function removePendingBlockUsersById(a,c){var d=b(a);d.pendingBlockUserIds=d.pendingBlockUserIds.filter(function(a){return 0>c.indexOf(a)});return d},removePendingRemoveContactsById:function removePendingRemoveContactsById(a,c){var d=b(a);d.pendingRemoveContactIds=d.pendingRemoveContactIds.filter(function(a){return 0>c.indexOf(a)});return d},removePendingUnblockUsersById:function removePendingUnblockUsersById(a,c){var d=b(a);d.pendingUnblockUserIds=d.pendingUnblockUserIds.filter(function(a){return 0>c.indexOf(a)});return d},removePendingAddContactsById:function removePendingAddContactsById(a,c){var d=b(a);d.pendingAddContactIds=d.pendingAddContactIds.filter(function(a){return 0>c.indexOf(a)});return d},removePendingDeleteMessagesById:function removePendingDeleteMessagesById(a,c){var d=b(a);c=c.map(function(a){return""+a});d.pendingDeleteMessageIds=d.pendingDeleteMessageIds.filter(function(a){return 0>c.indexOf(a)});return d},addSelectedMessagesById:function addSelectedMessagesById(a,c){var d=b(a);c=c.map(function(a){return""+a});d.selectedMessageIds=d.selectedMessageIds.concat(c);return d},removeSelectedMessagesById:function removeSelectedMessagesById(a,c){var d=b(a);c=c.map(function(a){return""+a});d.selectedMessageIds=d.selectedMessageIds.filter(function(a){return 0>c.indexOf(a)});return d},markMessagesAsRead:function markMessagesAsRead(a,c){var d=b(a),e=c.map(function(a){return a.id});d.messages=d.messages.map(function(a){if(0<=e.indexOf(a.id)){a.isRead=!0}return a});return d},addContactRequests:function addContactRequests(a,c){var d=b(a);c.forEach(function(a){var b=a.userid,c=a.requesteduserid;d.members[b].contactrequests.push(a);d.members[c].contactrequests.push(a)});return d},removeContactRequests:function removeContactRequests(a,c){var d=b(a);c.forEach(function(a){var b=a.userid,c=a.requesteduserid;d.members[b].contactrequests=d.members[b].contactrequests.filter(function(a){return a.userid!=b});d.members[c].contactrequests=d.members[c].contactrequests.filter(function(a){return a.requesteduserid!=c})});return d}}});
function asyncGeneratorStep(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}if(h.done){b(i)}else{Promise.resolve(i).then(d,e)}}function _asyncToGenerator(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var h=a.apply(b,c);function f(a){asyncGeneratorStep(h,d,e,f,g,"next",a)}function g(a){asyncGeneratorStep(h,d,e,f,g,"throw",a)}f(void 0)})}}define ("core_message/message_drawer_view_overview_section",["jquery","core/custom_interaction_events","core/notification","core/pubsub","core/str","core/pending","core/templates","core/user_date","core_message/message_repository","core_message/message_drawer_events","core_message/message_drawer_router","core_message/message_drawer_routes","core_message/message_drawer_lazy_load_list","core_message/message_drawer_view_conversation_constants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o={TOGGLE:"[data-region=\"toggle\"]",CONVERSATION:"[data-conversation-id]",BLOCKED_ICON_CONTAINER:"[data-region=\"contact-icon-blocked\"]",LAST_MESSAGE:"[data-region=\"last-message\"]",LAST_MESSAGE_DATE:"[data-region=\"last-message-date\"]",MUTED_ICON_CONTAINER:"[data-region=\"muted-icon-container\"]",UNREAD_COUNT:"[data-region=\"unread-count\"]",SECTION_TOTAL_COUNT:"[data-region=\"section-total-count\"]",SECTION_TOTAL_COUNT_CONTAINER:"[data-region=\"section-total-count-container\"]",SECTION_UNREAD_COUNT:"[data-region=\"section-unread-count\"]",PLACEHOLDER_CONTAINER:"[data-region=\"placeholder-container\"]"},p={CONVERSATIONS_LIST:"core_message/message_drawer_conversations_list",CONVERSATIONS_LIST_ITEMS_PLACEHOLDER:"core_message/message_drawer_conversations_list_items_placeholder"},q=50,r={},s={},t=!1,u=!1,v=function(a){return m.getRoot(a).hasClass("show")},w=function(a){a.addClass("expanded")},x=function(a){a.removeClass("expanded")},y=function(a,b){var c=a.find(o.SECTION_TOTAL_COUNT_CONTAINER),d=c.find(o.SECTION_TOTAL_COUNT);d.text(b);c.removeClass("hidden");e.get_string("totalconversations","core_message",b).done(function(a){c.attr("aria-label",a)});var f=20<b?20:b,h=Array.apply(null,Array(f)).map(function(){return!0});g.render(p.CONVERSATIONS_LIST_ITEMS_PLACEHOLDER,{placeholders:h}).then(function(b){var c=a.find(o.PLACEHOLDER_CONTAINER);c.html(b)}).catch(function(){})},z=function(a,b){var c=a.find(o.SECTION_UNREAD_COUNT);c.text(b);e.get_string("unreadconversations","core_message",b).done(function(a){c.attr("aria-label",a)});if(0<b){c.removeClass("hidden")}},A=function(b){var c=function(b){return Object.keys(b).reduce(function(d,e){if(a.isArray(b[e])){d[e.toLowerCase()]=b[e].map(c)}else{d[e.toLowerCase()]=b[e]}return d},{})},d=c(b);d.messages=d.messages.map(function(a){a.useridfrom=a.userfrom.id;return a});return d},B=function(b,d){var h=new f,i=function(){var b=_asyncToGenerator(regeneratorRuntime.mark(function b(d){var f,h,i,j,k,l,m;return regeneratorRuntime.wrap(function(b){while(1){switch(b.prev=b.next){case 0:if(d){b.next=2;break}return b.abrupt("return",null);case 2:f=document.createElement("element");f.innerHTML=d.text.replace(/<img /g,"<noimg ");h=f.querySelector("[src]")||!1;if(h){b.next=10;break}i=a(d.text).text();if(!i){b.next=10;break}if(!(-1==i.indexOf("<"))){b.next=10;break}return b.abrupt("return",i);case 10:j="i/messagecontentmultimediageneral";k="messagecontentmultimediageneral";if(d.text.includes("<img")){j="i/messagecontentimage";k="messagecontentimage"}else if(d.text.includes("<video")){j="i/messagecontentvideo";k="messagecontentvideo"}else if(d.text.includes("<audio")){j="i/messagecontentaudio";k="messagecontentaudio"}b.prev=13;b.next=16;return e.get_string(k,"core_message");case 16:l=b.sent;b.next=19;return g.renderPix(j,"core",l);case 19:m=b.sent;return b.abrupt("return",m+" "+l);case 23:b.prev=23;b.t0=b["catch"](13);c.exception(b.t0);return b.abrupt("return",null);case 27:case"end":return b.stop();}}},b,null,[[13,23]])}));return function(){return b.apply(this,arguments)}}(),j=b.map(function(a){var b=a.messages.length?a.messages[a.messages.length-1]:null;return i(b).then(function(c){var e={id:a.id,imageurl:a.imageurl,name:a.name,subname:a.subname,unreadcount:a.unreadcount,ismuted:a.ismuted,lastmessagedate:b?b.timecreated:null,sentfromcurrentuser:b?b.useridfrom==d:null,lastmessage:c},f=null;if(a.type==n.CONVERSATION_TYPES.SELF){f=a.members[0]}else if(a.type==n.CONVERSATION_TYPES.PRIVATE){f=a.members.reduce(function(a,b){if(!a&&b.id!=d){a=b}return a},null)}if(null!==f){e.userid=f.id;e.showonlinestatus=f.showonlinestatus;e.isonline=f.isonline;e.isblocked=f.isblocked}if(a.type==n.CONVERSATION_TYPES.PUBLIC){e.lastsendername=a.members.reduce(function(a,c){if(!a&&b&&c.id==b.useridfrom){a=c.fullname}return a},null)}return e}).catch(c.exception)});return Promise.all(j).then(function(a){a.forEach(function(a){if(new Date().toDateString()==new Date(1e3*a.lastmessagedate).toDateString()){a.istoday=!0}});return g.render(p.CONVERSATIONS_LIST,{conversations:a})}).then(function(b,c){h.resolve();return a.Deferred().resolve(b,c)}).catch(function(a){h.resolve();c.exception(a)})},C=function(a,b,d){var e=null,f=!0;if(a&&a.length){var g=a.filter(function(a){return a!=n.CONVERSATION_TYPES.SELF});f=a.length!=g.length;e=g[0]}return function(a,g){return i.getConversations(g,e,q+1,d,b,f).then(function(b){var c=b.conversations;if(c.length>q){c=c.slice(0,-1)}else{m.setLoadedAll(a,!0)}d=d+q;c.forEach(function(a){r[a.id]=a});return c}).catch(c.exception)}},D=function(a){return a.find(o.SECTION_TOTAL_COUNT)},E=function(a){return a.find(o.SECTION_UNREAD_COUNT)},F=function(a){if(t){var b=D(a),c=parseInt(b.text());c=c+1;b.text(c)}},G=function(a){if(t){var b=D(a),c=parseInt(b.text());c=c-1;b.text(c)}},H=function(a){if(u){var b=E(a),c=parseInt(b.text());c=c-1;b.text(c);if(1>c){b.addClass("hidden")}}},I=function(a,b){return a.find("[data-conversation-id=\""+b+"\"]")},J=function(a,b){return a.find("[data-user-id=\""+b+"\"]")},K=function(a){a.find(o.MUTED_ICON_CONTAINER).removeClass("hidden")},L=function(a){a.find(o.MUTED_ICON_CONTAINER).addClass("hidden")},M=function(a){a.find(o.BLOCKED_ICON_CONTAINER).removeClass("hidden")},N=function(a){a.find(o.BLOCKED_ICON_CONTAINER).addClass("hidden")},O=function(a,b,d){var e=a.find(o.CONVERSATION);if(!e.length){var f=m.getRoot(a);m.showContent(f);m.hideEmptyMessage(f)}r[b.id]=b;return B([b],d).then(function(b){var c=m.getContentContainer(a);return c.prepend(b)}).then(function(){return F(a)}).catch(c.exception)},P=function(a,b){b.remove();G(a);var c=a.find(o.CONVERSATION);if(!c.length){var d=m.getRoot(a);m.hideContent(d);m.showEmptyMessage(d)}},Q=function(a,b){var c=b.find(o.UNREAD_COUNT);c.text("0");c.addClass("hidden");H(a)},R=function(g,h,i,n,p,q){var t=m.getRoot(h),u=function(a){var b=parseInt(a.type,10);if(n&&0>n.indexOf(b)||p&&!a.isFavourite||!p&&a.isFavourite){return!1}return!0},v=h.find(o.TOGGLE);h.css("min-height",v.outerHeight());h.on("show.bs.collapse",function(){w(h);m.show(t,i,function(a,b,d){return B(b,d).then(function(b){a.append(b);return b}).catch(c.exception)})});h.on("hidden.bs.collapse",function(){x(h)});d.subscribe(j.CONTACT_BLOCKED,function(a){var b=J(h,a);if(b.length){M(b)}});d.subscribe(j.CONTACT_UNBLOCKED,function(a){var b=J(h,a);if(b.length){N(b)}});d.subscribe(j.CONVERSATION_SET_MUTED,function(a){var b=a.id,c=I(h,b);if(c.length){K(c)}});d.subscribe(j.CONVERSATION_UNSET_MUTED,function(a){var b=a.id,c=I(h,b);if(c.length){L(c)}});d.subscribe(j.CONVERSATION_NEW_LAST_MESSAGE,function(a){if(!u(a)){return}var b=new f("core_message/message_drawer_view_overview_section:new"),d=a.loggedInUserId,e=a.id,g=I(h,e);a=A(a);if(g.length){var i=m.getContentContainer(h);B([a],d).then(function(b){if(s[e]){if(a.messages[0].timeadded<s[e]){return}}i.prepend(b);g.remove()}).then(b.resolve).catch(c.exception)}else if(a.messages.length){O(h,a,d).then(b.resolve).catch()}else{b.resolve()}});d.subscribe(j.CONVERSATION_DELETED,function(a){var b=I(h,a);delete r[a];s[a]=new Date;if(b.length){P(h,b)}});d.subscribe(j.CONVERSATION_READ,function(a){var b=I(h,a);if(b.length){Q(h,b)}});d.subscribe(j.CONVERSATION_SET_FAVOURITE,function(a){var b=null;if(u(a)){b=I(h,a.id);if(!b.length){O(h,A(a),a.loggedInUserId)}}else{b=I(h,a.id);if(b.length){P(h,b)}}});d.subscribe(j.CONVERSATION_UNSET_FAVOURITE,function(a){var b=null;if(u(a)){b=I(h,a.id);if(!b.length){O(h,A(a),a.loggedInUserId)}}else{b=I(h,a.id);if(b.length){P(h,b)}}});b.define(h,[b.events.activate]);h.on(b.events.activate,o.CONVERSATION,function(b,c){var d=a(b.target).closest(o.CONVERSATION),e=d.attr("data-conversation-id"),f=r[e];k.go(g,l.VIEW_CONVERSATION,f,q);c.originalEvent.preventDefault()})};return{show:function show(b,d,e,f,g,h,i,j,k){var l=a(e);if(!l.attr("data-init")){var n=C(g,h,0);R(b,l,n,g,h,k);if(v(l)){w(l);var o=m.getRoot(l);m.show(o,n,function(a,b,d){return B(b,d).then(function(b){a.append(b);return b}).catch(c.exception)})}i.then(function(a){y(l,a);t=!0}).catch(function(){});j.then(function(a){z(l,a);u=!0}).catch(function(){});l.attr("data-init",!0)}},isVisible:v}});
define ("core_message/message_repository",["jquery","core/ajax","core/notification","core_message/message_drawer_view_conversation_constants"],function(a,b,c,d){var e=d.CONVERSATION_TYPES,f=function(a,c){var d=c.map(function(b){return{touserid:a,text:b}});return b.call([{methodname:"core_message_send_instant_messages",args:{messages:d}}])[0].then(function(a){var b=a.reduce(function(a,b){if(b.errormessage){a.push(b.errormessage)}return a},[]);if(b.length){throw new Error(b.join("\n"))}return a}).then(function(a){return a.map(function(a){return{id:a.msgid,text:a.text,timecreated:a.timecreated,useridfrom:a.useridfrom,conversationid:a.conversationid,candeletemessagesforallusers:a.candeletemessagesforallusers}})})},g=function(a,c){var d=c.map(function(a){return{text:a}});return b.call([{methodname:"core_message_send_messages_to_conversation",args:{conversationid:a,messages:d}}])[0]};return{query:function query(a){if("undefined"==typeof a.limit){a.limit=0}if("undefined"==typeof a.offset){a.offset=0}if("undefined"==typeof a.type){a.type=null}if("undefined"==typeof a.favouritesonly){a.favouritesonly=!1}a.limitfrom=a.offset;a.limitnum=a.limit;delete a.limit;delete a.offset;var d=b.call([{methodname:"core_message_data_for_messagearea_conversations",args:a}])[0];d.fail(c.exception);return d},countUnreadConversations:function countUnreadConversations(a){var d=b.call([{methodname:"core_message_get_unread_conversations_count",args:a}])[0];d.fail(c.exception);return d},markAllAsRead:function markAllAsRead(a){var d=b.call([{methodname:"core_message_mark_all_messages_as_read",args:a}])[0];d.fail(c.exception);return d},getContacts:function getContacts(a,c,d){var e={userid:a};if("undefined"!=typeof c){e.limitnum=c}if("undefined"!=typeof d){e.limitfrom=d}return b.call([{methodname:"core_message_get_user_contacts",args:e}])[0]},getProfile:function getProfile(a,c){return b.call([{methodname:"core_message_data_for_messagearea_get_profile",args:{currentuserid:a,otheruserid:c}}])[0]},blockUser:function blockUser(c,d){return a.when.apply(null,b.call([{methodname:"core_message_block_user",args:{userid:c,blockeduserid:d}},{methodname:"core_message_get_member_info",args:{referenceuserid:c,userids:[d],includecontactrequests:!0,includeprivacyinfo:!0}}])).then(function(a,b){return b.length?b[0]:{}})},unblockUser:function unblockUser(c,d){return a.when.apply(null,b.call([{methodname:"core_message_unblock_user",args:{userid:c,unblockeduserid:d}},{methodname:"core_message_get_member_info",args:{referenceuserid:c,userids:[d],includecontactrequests:!0,includeprivacyinfo:!0}}])).then(function(a,b){return b.length?b[0]:{}})},createContactRequest:function createContactRequest(a,c){return b.call([{methodname:"core_message_create_contact_request",args:{userid:a,requesteduserid:c}}])[0]},deleteContacts:function deleteContacts(c,d){return a.when.apply(null,b.call([{methodname:"core_message_delete_contacts",args:{userid:c,userids:d}},{methodname:"core_message_get_member_info",args:{referenceuserid:c,userids:d,includecontactrequests:!0,includeprivacyinfo:!0}}])).then(function(a,b){return b})},getMessages:function getMessages(a,c,d,e,f,g){var h={currentuserid:a,convid:c,newest:f?!0:!1};if("undefined"!=typeof d){h.limitnum=d}if("undefined"!=typeof e){h.limitfrom=e}if("undefined"!=typeof g){h.timefrom=g}return b.call([{methodname:"core_message_get_conversation_messages",args:h}])[0]},searchUsers:function searchUsers(a,c,d,e){var f={userid:a,search:c};if("undefined"!=typeof d){f.limitnum=d}if("undefined"!=typeof e){f.limitfrom=e}return b.call([{methodname:"core_message_message_search_users",args:f}])[0]},searchMessages:function searchMessages(a,c,d,e){var f={userid:a,search:c};if("undefined"!=typeof d){f.limitnum=d}if("undefined"!=typeof e){f.limitfrom=e}return b.call([{methodname:"core_message_data_for_messagearea_search_messages",args:f}])[0]},sendMessagesToUser:f,sendMessageToUser:function sendMessageToUser(a,b){return f(a,[b]).then(function(a){return a[0]})},sendMessagesToConversation:g,sendMessageToConversation:function sendMessageToConversation(a,b){return g(a,[b]).then(function(a){return a[0]})},savePreferences:function savePreferences(a,c){return b.call([{methodname:"core_user_update_user_preferences",args:{userid:a,preferences:c}}])[0]},getPreferences:function getPreferences(a){return b.call([{methodname:"core_user_get_user_preferences",args:{userid:a}}])[0]},deleteMessages:function deleteMessages(c,d){return a.when.apply(null,b.call(d.map(function(a){return{methodname:"core_message_delete_message",args:{messageid:a,userid:c}}})))},deleteMessagesForAllUsers:function deleteMessagesForAllUsers(c,d){return a.when.apply(null,b.call(d.map(function(a){return{methodname:"core_message_delete_message_for_all_users",args:{messageid:a,userid:c}}})))},deleteConversation:function deleteConversation(a,c){return b.call([{methodname:"core_message_delete_conversations_by_id",args:{userid:a,conversationids:[c]}}])[0]},getContactRequests:function getContactRequests(a){return b.call([{methodname:"core_message_get_contact_requests",args:{userid:a}}])[0]},acceptContactRequest:function acceptContactRequest(c,d){return a.when.apply(null,b.call([{methodname:"core_message_confirm_contact_request",args:{userid:c,requesteduserid:d}},{methodname:"core_message_get_member_info",args:{referenceuserid:d,userids:[c],includecontactrequests:!0,includeprivacyinfo:!0}}])).then(function(a,b){return b.length?b[0]:{}})},declineContactRequest:function declineContactRequest(c,d){return a.when.apply(null,b.call([{methodname:"core_message_decline_contact_request",args:{userid:c,requesteduserid:d}},{methodname:"core_message_get_member_info",args:{referenceuserid:d,userids:[c],includecontactrequests:!0,includeprivacyinfo:!0}}])).then(function(a,b){return b.length?b[0]:{}})},getConversation:function getConversation(a,c,d,e,f,g,h,i,j){var k={userid:a,conversationid:c};if("undefined"!=typeof d&&null!==d){k.includecontactrequests=d}if("undefined"!=typeof e&&null!==e){k.includeprivacyinfo=e}if("undefined"!=typeof f&&null!==f){k.memberlimit=f}if("undefined"!=typeof g&&null!==g){k.memberoffset=g}if("undefined"!=typeof h&&null!==h){k.messagelimit=h}if("undefined"!=typeof i&&null!==i){k.messageoffset=i}if("undefined"!=typeof j&&null!==j){k.newestmessagesfirst=j}return b.call([{methodname:"core_message_get_conversation",args:k}])[0]},getConversationBetweenUsers:function getConversationBetweenUsers(a,c,d,e,f,g,h,i,j){var k={userid:a,otheruserid:c};if("undefined"!=typeof d&&null!==d){k.includecontactrequests=d}if("undefined"!=typeof e&&null!==e){k.includeprivacyinfo=e}if("undefined"!=typeof f&&null!==f){k.memberlimit=f}if("undefined"!=typeof g&&null!==g){k.memberoffset=g}if("undefined"!=typeof h&&null!==h){k.messagelimit=h}if("undefined"!=typeof i&&null!==i){k.messageoffset=i}if("undefined"!=typeof j&&null!==j){k.newestmessagesfirst=j}return b.call([{methodname:"core_message_get_conversation_between_users",args:k}])[0]},getSelfConversation:function getSelfConversation(a,c,d,e){var f={userid:a};if("undefined"!=typeof c&&null!==c){f.messagelimit=c}if("undefined"!=typeof d&&null!==d){f.messageoffset=d}if("undefined"!=typeof e&&null!==e){f.newestmessagesfirst=e}return b.call([{methodname:"core_message_get_self_conversation",args:f}])[0]},getConversations:function getConversations(a,c,d,f,g,h){var i={userid:a,type:c};if("undefined"!=typeof d&&null!==d){i.limitnum=d}if("undefined"!=typeof f&&null!==f){i.limitfrom=f}if("undefined"!=typeof g&&null!==g){i.favourites=g}if("undefined"!=typeof h&&null!==h){i.mergeself=h}return b.call([{methodname:"core_message_get_conversations",args:i}])[0].then(function(a){if(a.conversations.length){a.conversations=a.conversations.map(function(a){if(a.type==e.PRIVATE||a.type==e.SELF){var b=a.members.length?a.members[0]:null;if(b){a.name=a.name?a.name:b.fullname;a.imageurl=a.imageurl?a.imageurl:b.profileimageurl}}return a})}return a})},getConversationMembers:function getConversationMembers(a,c,d,e,f){var g={userid:c,conversationid:a};if("undefined"!=typeof d&&null!==d){g.limitnum=d}if("undefined"!=typeof e&&null!==e){g.limitfrom=e}if("undefined"!=typeof f&&null!==f){g.includecontactrequests=f}return b.call([{methodname:"core_message_get_conversation_members",args:g}])[0]},setFavouriteConversations:function setFavouriteConversations(a,c){return b.call([{methodname:"core_message_set_favourite_conversations",args:{userid:a,conversations:c}}])[0]},setMutedConversations:function setMutedConversations(a,c){return b.call([{methodname:"core_message_mute_conversations",args:{userid:a,conversationids:c}}])[0]},unsetFavouriteConversations:function unsetFavouriteConversations(a,c){return b.call([{methodname:"core_message_unset_favourite_conversations",args:{userid:a,conversations:c}}])[0]},unsetMutedConversations:function unsetMutedConversations(a,c){return b.call([{methodname:"core_message_unmute_conversations",args:{userid:a,conversationids:c}}])[0]},getMemberInfo:function getMemberInfo(a,c,d,e){var f={referenceuserid:a,userids:c};if("undefined"!=typeof d){f.includecontactrequests=d}if("undefined"!=typeof e){f.includeprivacyinfo=e}return b.call([{methodname:"core_message_get_member_info",args:f}])[0]},markAllConversationMessagesAsRead:function markAllConversationMessagesAsRead(a,c){return b.call([{methodname:"core_message_mark_all_conversation_messages_as_read",args:{userid:a,conversationid:c}}])[0]},getUserMessagePreferences:function getUserMessagePreferences(a){return b.call([{methodname:"core_message_get_user_message_preferences",args:{userid:a}}])[0]},getTotalConversationCounts:function getTotalConversationCounts(a){return b.call([{methodname:"core_message_get_conversation_counts",args:{userid:a}}])[0]},getUnreadConversationCounts:function getUnreadConversationCounts(a){return b.call([{methodname:"core_message_get_unread_conversation_counts",args:{userid:a}}])[0]},getAllConversationCounts:function getAllConversationCounts(c){return a.when.apply(null,b.call([{methodname:"core_message_get_conversation_counts",args:{userid:c}},{methodname:"core_message_get_unread_conversation_counts",args:{userid:c}}])).then(function(a,b){return{total:a,unread:b}})}}});
define ("core_message/message_drawer",["jquery","core/custom_interaction_events","core/pubsub","core_message/message_drawer_view_contact","core_message/message_drawer_view_contacts","core_message/message_drawer_view_conversation","core_message/message_drawer_view_group_info","core_message/message_drawer_view_overview","core_message/message_drawer_view_search","core_message/message_drawer_view_settings","core_message/message_drawer_router","core_message/message_drawer_routes","core_message/message_drawer_events","core/pending","core/drawer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p={DRAWER:"[data-region=\"right-hand-drawer\"]",JUMPTO:".popover-region [data-region=\"jumpto\"]",PANEL_BODY_CONTAINER:"[data-region=\"panel-body-container\"]",PANEL_HEADER_CONTAINER:"[data-region=\"panel-header-container\"]",VIEW_CONTACT:"[data-region=\"view-contact\"]",VIEW_CONTACTS:"[data-region=\"view-contacts\"]",VIEW_CONVERSATION:"[data-region=\"view-conversation\"]",VIEW_GROUP_INFO:"[data-region=\"view-group-info\"]",VIEW_OVERVIEW:"[data-region=\"view-overview\"]",VIEW_SEARCH:"[data-region=\"view-search\"]",VIEW_SETTINGS:"[data-region=\"view-settings\"]",ROUTES:"[data-route]",ROUTES_BACK:"[data-route-back]",HEADER_CONTAINER:"[data-region=\"header-container\"]",BODY_CONTAINER:"[data-region=\"body-container\"]",FOOTER_CONTAINER:"[data-region=\"footer-container\"]"},q=function(a,b,c){var d=b.find(p.HEADER_CONTAINER).find(c);if(!d.length){d=b.find(p.PANEL_HEADER_CONTAINER).find(c)}var e=b.find(p.BODY_CONTAINER).find(c);if(!e.length){e=b.find(p.PANEL_BODY_CONTAINER).find(c)}var f=b.find(p.FOOTER_CONTAINER).find(c);return[a,d.length?d:null,e.length?e:null,f.length?f:null]},r=[[l.VIEW_CONTACT,p.VIEW_CONTACT,d.show,d.description],[l.VIEW_CONTACTS,p.VIEW_CONTACTS,e.show,e.description],[l.VIEW_CONVERSATION,p.VIEW_CONVERSATION,f.show,f.description],[l.VIEW_GROUP_INFO,p.VIEW_GROUP_INFO,g.show,g.description],[l.VIEW_OVERVIEW,p.VIEW_OVERVIEW,h.show,h.description],[l.VIEW_SEARCH,p.VIEW_SEARCH,i.show,i.description],[l.VIEW_SETTINGS,p.VIEW_SETTINGS,j.show,j.description]],s=function(a,b){r.forEach(function(c){k.add(a,c[0],q(a,b,c[1]),c[2],c[3])})},t=function(a,b){if(!b.attr("data-shown")){k.go(a,l.VIEW_OVERVIEW);b.attr("data-shown",!0)}var c=o.getDrawerRoot(b);if(c.length){o.show(c)}},u=function(a){var b=o.getDrawerRoot(a);if(b.length){o.hide(b)}},v=function(a){var b=o.getDrawerRoot(a);if(b.length){return o.isVisible(b)}return!0},w=function(b){a(p.DRAWER).attr("data-origin",b)},x=function(d,e,f){b.define(e,[b.events.activate]);var g=/^data-route-param-?(\d*)$/;e.on(b.events.activate,p.ROUTES,function(b,c){for(var e=a(b.target).closest(p.ROUTES),f=e.attr("data-route"),h=[],j=0;j<e[0].attributes.length;j++){h.push(e[0].attributes[j])}var l=h.filter(function(a){var b=a.nodeName,c=g.test(b);return c});l.sort(function(c,a){var b=g.exec(c.nodeName),d=g.exec(a.nodeName),e=1<b.length?b[1]:0,f=1<d.length?d[1]:0;if(e<f){return-1}else if(f<e){return 1}else{return 0}});var m=l.map(function(a){return a.nodeValue}),n=[d,f].concat(m);k.go.apply(null,n);c.originalEvent.preventDefault()});e.on(b.events.activate,p.ROUTES_BACK,function(a,b){k.back(d);b.originalEvent.preventDefault()});e.on("hide.bs.collapse",".collapse",function(b){var c=new n;a(b.target).one("hidden.bs.collapse",function(){c.resolve()})});e.on("show.bs.collapse",".collapse",function(b){var c=new n;a(b.target).one("shown.bs.collapse",function(){c.resolve()})});a(p.JUMPTO).focus(function(){var b=a(p.HEADER_CONTAINER).find("input:visible");if(b.length){b.focus()}else{a(p.HEADER_CONTAINER).find(p.ROUTES_BACK).focus()}});a(p.DRAWER).focus(function(){var b=a(this).attr("data-origin");if(b){a("#"+b).focus()}});if(!f){c.subscribe(m.SHOW,function(){t(d,e)});c.subscribe(m.HIDE,function(){u(e)});c.subscribe(m.TOGGLE_VISIBILITY,function(b){if(v(e)){u(e);a(p.JUMPTO).attr("tabindex",-1)}else{t(d,e);w(b);a(p.JUMPTO).attr("tabindex",0)}})}c.subscribe(m.SHOW_CONVERSATION,function(a){w(a.buttonid);t(d,e);k.go(d,l.VIEW_CONVERSATION,a.conversationid)});c.subscribe(m.CREATE_CONVERSATION_WITH_USER,function(a){w(a.buttonid);t(d,e);k.go(d,l.VIEW_CONVERSATION,null,"create",a.userid)});c.subscribe(m.SHOW_SETTINGS,function(){t(d,e);k.go(d,l.VIEW_SETTINGS)});c.subscribe(m.PREFERENCES_UPDATED,function(a){var b=a.filter(function(a){return"message_entertosend"==a.type}),c=b.length?b[0]:null;if(c){var d=e.find(p.FOOTER_CONTAINER).find(p.VIEW_CONVERSATION);d.attr("data-enter-to-send",c.value)}})};return{init:function init(b,c,d,e){b=a(b);s(c,b);x(c,b,d);if(d){t(c,b);if(e){var f=e.params||[];f=[c,e.path].concat(f);k.go.apply(null,f)}}}}});
define ("core_message/message_drawer_view_contact",["jquery","core/str","core/templates"],function(a,b,c){var d={CONTENT_CONTAINER:"[data-region=\"content-container\"]"},e={CONTENT:"core_message/message_drawer_view_contact_body_content"},f=function(a){return a.find(d.CONTENT_CONTAINER)},g=function(a,b){return c.render(e.CONTENT,b).then(function(b){f(a).append(b);return b})};return{show:function show(b,c,d,e,h){var i=a(d);f(i).empty();return g(i,h)},description:function description(a,c){return b.get_string("messagedrawerviewcontact","core_message",c.fullname)}}});
define ("core_message/message_drawer_lazy_load_list",["jquery","core/custom_interaction_events"],function(a,b){var c={ROOT:"[data-region=\"lazy-load-list\"]",LOADING_ICON_CONTAINER:"[data-region=\"loading-icon-container\"]",CONTENT_CONTAINER:"[data-region=\"content-container\"]",EMPTY_MESSAGE:"[data-region=\"empty-message-container\"]",PLACEHOLDER:"[data-region=\"placeholder-container\"]"},d=function(a){a.attr("data-loading",!0)},e=function(a){a.attr("data-loading",!1)},f=function(a){return"true"===a.attr("data-loading")},g=function(a){return a.attr("data-user-id")},h=function(a){return a.find(c.CONTENT_CONTAINER)},i=function(a){a.find(c.LOADING_ICON_CONTAINER).removeClass("hidden")},j=function(a){a.find(c.LOADING_ICON_CONTAINER).addClass("hidden")},k=function(a){a.find(c.EMPTY_MESSAGE).removeClass("hidden")},l=function(a){a.find(c.PLACEHOLDER).removeClass("hidden")},m=function(a){a.find(c.PLACEHOLDER).addClass("hidden")},n=function(a){h(a).removeClass("hidden")},o=function(a){h(a).addClass("hidden")},p=function(a){return"true"==a.attr("data-loaded-all")},q=function(a,b){a.attr("data-loaded-all",b)},r=function(a){return!p(a)&&!f(a)},s=function(a,b,c){var f=g(a);d(a);return b(a,f).then(function(b){if(0<b.length){var d=h(a);return c(d,b,f).then(function(){return b})}else{return b}}).then(function(b){e(a);a.attr("data-seen",!0);if(!b.length){q(a,!0)}return b}).catch(function(){e(a);a.attr("data-seen",!0)})},t=function(a,b,c){h(a).empty();l(a);o(a);return s(a,b,c).then(function(b){m(a);if(!b.length){k(a)}else{n(a)}}).catch(function(){m(a);n(a)})},u=function(a,c,d){b.define(a,[b.events.scrollBottom]);a.on(b.events.scrollBottom,function(){if(r(a)){i(a);s(a,c,d).then(function(){return j(a)}).catch(function(){return j(a)})}})};return{show:function show(b,c,d){b=a(b);if(!b.attr("data-init")){u(b,c,d);t(b,c,d);b.attr("data-init",!0)}},getContentContainer:h,getRoot:function getRoot(a){return a.find(c.ROOT)},setLoadedAll:q,showEmptyMessage:k,hideEmptyMessage:function hideEmptyMessage(a){a.find(c.EMPTY_MESSAGE).addClass("hidden")},showContent:n,hideContent:o}});
define ("core_question/repository",["jquery","core/ajax"],function(a,b){return{submitTagCreateUpdateForm:function submitTagCreateUpdateForm(a,c,d){return b.call([{methodname:"core_question_submit_tags_form",args:{questionid:a,contextid:c,formdata:d}}])[0]}}});
define ("core_question/edit_tags",["jquery","core/fragment","core/str","core/modal_events","core/modal_factory","core/notification","core/custom_interaction_events","core_question/repository","core_question/selectors"],function(a,b,c,d,e,f,g,h,i){var j=function(a){a.find(i.actions.save).prop("disabled",!1)},k=function(a){a.find(i.actions.save).prop("disabled",!0)},l=function(a){return a.getBody().find("form").serialize()},m=function(a){var b=a.find(i.containers.loadingIcon);b.removeClass("hidden")},n=function(a){var b=a.find(i.containers.loadingIcon);b.addClass("hidden")},o=function(a,b){a.getBody().attr("data-contextid",b)},p=function(a){return a.getBody().data("contextid")},q=function(a,b){a.getBody().attr("data-questionid",b)},r=function(a){return a.getBody().data("questionid")},s=function(h){var l=e.create({type:e.types.SAVE_CANCEL,large:!1},[h,i.actions.edittags]).then(function(a){c.get_string("questiontags","question").then(function(b){a.setTitle(b);return b}).fail(f.exception);a.getRoot().on(d.save,function(b){var c=a.getBody().find("form");c.submit();b.preventDefault()});a.getRoot().on("submit","form",function(b){t(a,h).then(function(){a.hide();location.reload()}).fail(f.exception);b.preventDefault();b.stopPropagation()});return a});h.on(g.events.activate,i.actions.edittags,function(c){var d=a(c.currentTarget),e=d.data("questionid"),g=!!d.data("cantag"),p=d.data("contextid");l.then(function(a){k(h);m(h);var c=b.loadFragment("question","tags_form",p,{id:e});a.setBody(c);c.then(function(){j(h)}).always(function(){n(h)}).fail(f.exception);if(g){a.getRoot().find(i.actions.save).show()}else{a.getRoot().find(i.actions.save).hide()}q(a,e);o(a,p);return a}).fail(f.exception);c.preventDefault()})},t=function(a,b){k(b);m(b);var c=l(a),d=r(a),e=p(a);return h.submitTagCreateUpdateForm(d,e,c).always(function(){n(b);j(b)}).fail(f.exception)};return{init:function init(b){b=a(b);s(b)}}});
define ("core_question/selectors",[],function(){return{actions:{save:"[data-action=\"save\"]",edittags:"[data-action=\"edittags\"]"},containers:{loadingIcon:"[data-region=\"overlay-icon-container\"]"}}});
define ("core_search/form-search-user-selector",["jquery","core/ajax","core/templates"],function(a,b,c){return{processResults:function processResults(b,c){var d=[];a.each(c,function(a,b){d.push({value:b.id,label:b._label})});return d},transport:function transport(d,e,f,g){var h,i={query:e},j=a(d).attr("withincourseid");if("undefined"!=typeof j&&""!==a("#id_searchwithin").val()){i.courseid=j}else{i.courseid=0}h=b.call([{methodname:"core_search_get_relevant_users",args:i}]);h[0].then(function(b){var d=[];a.each(b,function(a,b){d.push(c.render("core_search/form-user-selector-suggestion",b))});return a.when.apply(a.when,d).then(function(){var c=arguments,d=0;a.each(b,function(a,b){b._label=c[d++]});f(b)})}).fail(g)}}});
define ("core_user/participants",["jquery","core/str","core/modal_factory","core/modal_events","core/templates","core/notification","core/ajax"],function(a,b,c,d,e,f,g){var h={BULKACTIONSELECT:"#formactionid",BULKUSERCHECKBOXES:"input.usercheckbox",BULKUSERNOSCHECKBOXES:"input.usercheckbox[value='0']",BULKUSERSELECTEDCHECKBOXES:"input.usercheckbox:checked",BULKACTIONFORM:"#participantsform",CHECKALLBUTTON:"#checkall",CHECKALLNOSBUTTON:"#checkallnos"},i=function(a){this.courseId=a.courseid;this.noteStateNames=a.noteStateNames;this.stateHelpIcon=a.stateHelpIcon;this.attachEventListeners()};i.prototype.modal=null;i.prototype.courseId=-1;i.prototype.noteStateNames={};i.prototype.stateHelpIcon="";i.prototype.attachEventListeners=function(){a(h.BULKACTIONSELECT).on("change",function(b){var c=a(b.target).val();if(-1!==c.indexOf("#")){b.preventDefault();var d=[];a(h.BULKUSERSELECTEDCHECKBOXES).each(function(b,c){var e=a(c).attr("name"),f=e.replace("user","");d.push(f)});if("#messageselect"==c){this.showSendMessage(d).fail(f.exception)}else if("#addgroupnote"==c){this.showAddNote(d).fail(f.exception)}a(h.BULKACTIONSELECT+" option[value=\"\"]").prop("selected","selected")}else if(""!==c){if(0<a(h.BULKUSERSELECTEDCHECKBOXES).length){a(h.BULKACTIONFORM).submit()}else{a(h.BULKACTIONSELECT+" option[value=\"\"]").prop("selected","selected")}}}.bind(this));a(h.CHECKALLBUTTON).on("click",function(){var b=a(this).data("showallink");if(b){window.location=b}});a(h.CHECKALLNOSBUTTON).on("click",function(){a(h.BULKUSERNOSCHECKBOXES).prop("checked",!0)})};i.prototype.showAddNote=function(f){if(0==f.length){return a.Deferred().resolve().promise()}var g=[];for(var i in this.noteStateNames){switch(i){case"draft":g.push({value:"personal",label:this.noteStateNames[i]});break;case"public":g.push({value:"course",label:this.noteStateNames[i],selected:1});break;case"site":g.push({value:i,label:this.noteStateNames[i]});break;}}var j={stateNames:g,stateHelpIcon:this.stateHelpIcon},k=null;if(1==f.length){k=b.get_string("addbulknotesingle","core_notes")}else{k=b.get_string("addbulknote","core_notes",f.length)}return a.when(c.create({type:c.types.SAVE_CANCEL,body:e.render("core_user/add_bulk_note",j)}),k).then(function(b,c){this.modal=b;this.modal.setTitle(c);this.modal.setSaveButtonText(c);this.modal.getRoot().on(d.hidden,function(){var b=a("#user-notifications [role=alert]");if(b.length){b.focus()}else{a(h.BULKACTIONSELECT).focus()}this.modal.getRoot().remove()}.bind(this));this.modal.getRoot().on(d.save,this.submitAddNote.bind(this,f));this.modal.show();return this.modal}.bind(this))};i.prototype.submitAddNote=function(a){var c=this.modal.getRoot().find("form textarea").val(),d=this.modal.getRoot().find("form select").val(),e=[],h=0;for(h=0;h<a.length;h++){e.push({userid:a[h],text:c,courseid:this.courseId,publishstate:d})}return g.call([{methodname:"core_notes_create_notes",args:{notes:e}}])[0].then(function(a){if(1==a.length){return b.get_string("addbulknotedonesingle","core_notes")}else{return b.get_string("addbulknotedone","core_notes",a.length)}}).then(function(a){f.addNotification({message:a,type:"success"});return!0}).catch(f.exception)};i.prototype.showSendMessage=function(f){if(0==f.length){return a.Deferred().resolve().promise()}var g=null;if(1==f.length){g=b.get_string("sendbulkmessagesingle","core_message")}else{g=b.get_string("sendbulkmessage","core_message",f.length)}return a.when(c.create({type:c.types.SAVE_CANCEL,body:e.render("core_user/send_bulk_message",{})}),g).then(function(b,c){this.modal=b;this.modal.setTitle(c);this.modal.setSaveButtonText(c);this.modal.getRoot().on(d.hidden,function(){a(h.BULKACTIONSELECT).focus();this.modal.getRoot().remove()}.bind(this));this.modal.getRoot().on(d.save,this.submitSendMessage.bind(this,f));this.modal.show();return this.modal}.bind(this))};i.prototype.submitSendMessage=function(a){var c=this.modal.getRoot().find("form textarea").val(),d=[],e=0;for(e=0;e<a.length;e++){d.push({touserid:a[e],text:c})}return g.call([{methodname:"core_message_send_instant_messages",args:{messages:d}}])[0].then(function(a){if(1==a.length){return b.get_string("sendbulkmessagesentsingle","core_message")}else{return b.get_string("sendbulkmessagesent","core_message",a.length)}}).then(function(a){f.addNotification({message:a,type:"success"});return!0}).catch(f.exception)};return{init:function init(a){return new i(a)}}});
define ("core_user/unified_filter_datasource",["jquery","core/ajax","core/notification"],function(a,b,c){return{list:function list(b,c){var d=[],e=a(b),f=a(b).data("originaloptionsjson"),g=e.val();a.each(f,function(b,e){if(""!==a.trim(c)&&-1===e.label.toLocaleLowerCase().indexOf(c.toLocaleLowerCase())){return!0}if(-1<a.inArray(e.value,g)){return!0}d.push(e);return!0});var h=new a.Deferred;h.resolve(d);return h.promise()},processResults:function processResults(b,c){var d=[];a.each(c,function(a,b){d.push({value:b.value,label:b.label})});return d},transport:function transport(a,b,d){this.list(a,b).then(d).catch(c.exception)}}});
define ("core_user/unified_filter",["jquery","core/form-autocomplete","core/str","core/notification"],function(a,b,c,d){var e={UNIFIED_FILTERS:"#unified-filters"},f=function init(){M.util.js_pending("unified_filter_datasource");c.get_strings([{key:"userfilterplaceholder",component:"moodle"},{key:"nofiltersapplied",component:"moodle"}]).done(function(a){var c=a[0],f=a[1];b.enhance(e.UNIFIED_FILTERS,!0,"core_user/unified_filter_datasource",c,!1,!0,f,!0).then(function(){M.util.js_complete("unified_filter_datasource")}).fail(d.exception)}).fail(d.exception);var f=a(e.UNIFIED_FILTERS).val();a(e.UNIFIED_FILTERS).on("change",function(){var b=a(this).val(),c=[],d=[],e=!1;a.each(b,function(a,b){var f=b.split(":",2);if(2!==f.length){d.push(b);return!0}var g=f[0],h=f[1];if("undefined"!=typeof c[g]){e=!0}c[g]=h;return!0});if(e){var g=[];for(var h in c){g.push(h+":"+c[h])}g=g.concat(d);a(this).val(g)}if(f.join(",")!=b.join(",")){this.form.submit()}})},g=function getForm(){return a(e.UNIFIED_FILTERS).closest("form")};return{init:function init(){f()},getForm:function getForm(){return g()}}});
define ("core_user/status_field",["core/templates","jquery","core/str","core/config","core/notification","core/modal_factory","core/modal_events","core/fragment","core/ajax"],function(a,b,c,d,f,g,h,i,j){var k={EDIT_ENROLMENT:"[data-action=\"editenrolment\"]",SHOW_DETAILS:"[data-action=\"showdetails\"]",UNENROL:"[data-action=\"unenrol\"]"},l=function(a){this.contextid=a.contextid;this.courseid=a.courseid;this.bindEditEnrol();this.bindUnenrol();this.bindStatusDetails()};l.prototype.courseid=0;l.prototype.bindEditEnrol=function(){var a=this;b(k.EDIT_ENROLMENT).click(function(d){d.preventDefault();var e=b(this),i=e.parent(),j=i.data("fullname"),k=e.attr("rel");b.when(c.get_string("edituserenrolment","enrol",j)).then(function(a){return g.create({large:!0,title:a,type:g.types.SAVE_CANCEL})}).done(function(b){b.getRoot().on(h.save,function(c){c.preventDefault();a.submitEditFormAjax(b)});b.getRoot().on(h.hidden,function(){b.destroy()});b.setBody(a.getBody(k));b.show()}).fail(f.exception)})};l.prototype.bindUnenrol=function(){var a=this;b(k.UNENROL).click(function(d){d.preventDefault();var e=b(this),i=e.parent(),j=[{key:"unenrol",component:"enrol"},{key:"unenrolconfirm",component:"enrol",param:{user:i.data("fullname"),course:i.data("coursename"),enrolinstancename:i.data("enrolinstancename")}}],k=g.create({type:g.types.SAVE_CANCEL});b.when(c.get_strings(j),k).done(function(c,f){var g=c[0],i=c[1];f.setTitle(g);f.setBody(i);f.setSaveButtonText(g);f.getRoot().on(h.save,function(){var c={ueid:b(e).attr("rel")};d.preventDefault();a.submitUnenrolFormAjax(f,c)});f.getRoot().on(h.hidden,function(){f.destroy()});f.show()}).fail(f.exception)})};l.prototype.bindStatusDetails=function(){b(k.SHOW_DETAILS).click(function(d){d.preventDefault();var e=b(this),i=e.parent(),j={fullname:i.data("fullname"),coursename:i.data("coursename"),enrolinstancename:i.data("enrolinstancename"),status:i.data("status"),statusclass:i.find("span").attr("class"),timestart:i.data("timestart"),timeend:i.data("timeend"),timeenrolled:i.data("timeenrolled")},l=e.next(k.EDIT_ENROLMENT);if(l.length){j.editenrollink=b("<div>").append(l.clone()).html()}var m=c.get_strings([{key:"enroldetails",component:"enrol"}]),n=g.create({large:!0,type:g.types.CANCEL});b.when(m,n).done(function(c,d){var e=a.render("core_user/status_details",j);d.setTitle(c[0]);d.setBody(e);if(l.length){d.getRoot().on("click",k.EDIT_ENROLMENT,function(a){a.preventDefault();d.hide();b(l).trigger("click")})}d.show();d.getRoot().on(h.hidden,function(){d.destroy()})}).fail(f.exception)})};l.prototype.submitEditFormAjax=function(a){var c=this,d=a.getRoot().find("form"),e=b(d).find("[name=\"ue\"]").val(),g={methodname:"core_enrol_submit_user_enrolment_form",args:{formdata:d.serialize()}};j.call([g])[0].done(function(b){if(b.result){a.hide();if("undefined"!=typeof window.M.core_formchangechecker){window.M.core_formchangechecker.reset_form_dirty_state()}window.location.reload()}else{var f=JSON.stringify(d.serialize());a.setBody(c.getBody(e,f))}}).fail(f.exception)};l.prototype.submitUnenrolFormAjax=function(a,b){j.call([{methodname:"core_enrol_unenrol_user_enrolment",args:b}])[0].done(function(b){if(b.result){a.hide();if("undefined"!=typeof window.M.core_formchangechecker){window.M.core_formchangechecker.reset_form_dirty_state()}window.location.reload()}else{f.alert(b.errors[0].key,b.errors[0].message)}}).fail(f.exception)};l.prototype.getBody=function(a,b){var c={ueid:a};if("undefined"!=typeof b){c.formdata=b}return i.loadFragment("enrol","user_enrolment_form",this.contextid,c).fail(f.exception)};return{init:function init(a){new l(a)}}});
define ("qtype_ddimageortext/form",["jquery","core/dragdrop"],function(a,b){"use strict";var c={maxBgImageSize:null,maxDragImageSize:null,fp:null,init:function init(b,d){c.maxBgImageSize=b;c.maxDragImageSize=d;c.fp=c.filePickers();a("#id_previewareaheader").append("<div class=\"ddarea\">  <div class=\"droparea\">    <img class=\"dropbackground\" />    <div class=\"dropzones\"></div>  </div>  <div class=\"dragitems\"></div></div>");c.updateVisibilityOfFilePickers();c.setOptionsForDragItemSelectors();c.setupEventHandlers();c.waitForFilePickerToInitialise()},waitForFilePickerToInitialise:function waitForFilePickerToInitialise(){if(null===c.fp.file("bgimage").href){setTimeout(c.waitForFilePickerToInitialise,1e3);return}M.util.js_pending("dragDropToImageForm");a("form.mform").on("change",".filepickerhidden",function(){M.util.js_pending("dragDropToImageForm");c.loadPreviewImage()});c.loadPreviewImage()},loadPreviewImage:function loadPreviewImage(){a("fieldset#id_previewareaheader .dropbackground").one("load",c.afterPreviewImageLoaded).attr("src",c.fp.file("bgimage").href)},afterPreviewImageLoaded:function afterPreviewImageLoaded(){var b=a("fieldset#id_previewareaheader .dropbackground");c.constrainImageSize(b,c.maxBgImageSize);c.createDropZones();M.util.js_complete("dragDropToImageForm")},constrainImageSize:function constrainImageSize(a,b){var c=Math.max(a.width()/b.width,a.height()/b.height);if(1<c){a.css("width",Math.floor(a.width()/c))}a.addClass("constrained")},createDropZones:function createDropZones(){var b=a(".dropzones");b.empty();var d=c.fp.file("bgimage").href;if(null===d){return}for(var e=c.form.getFormValue("nodropzone",[]),f=0,g;f<e;f++){g=c.form.getFormValue("drops",[f,"choice"]);if("0"===g){continue}g=g-1;var h=c.form.getFormValue("drags",[g,"draggroup"]),i=c.form.getFormValue("draglabel",[g]);if("image"===c.form.getFormValue("drags",[g,"dragitemtype"])){var j=c.fp.file("dragitem["+g+"]").href;if(null===j){continue}b.append("<img class=\"droppreview group"+h+" drop"+f+"\" src=\""+j+"\" alt=\""+i+"\" data-drop-no=\""+f+"\">")}else if(""!==i){b.append("<div class=\"droppreview group"+h+" drop"+f+"\"  data-drop-no=\""+f+"\">"+i+"</div>")}}c.waitForAllDropImagesToBeLoaded()},waitForAllDropImagesToBeLoaded:function waitForAllDropImagesToBeLoaded(){var b=a(".dropzones img").not(function(a,b){return c.imageIsLoaded(b)});if(0<b.length){setTimeout(function(){c.waitForAllDropImagesToBeLoaded()},100);return}c.updateDropZones()},imageIsLoaded:function imageIsLoaded(a){return a.complete&&0!==a.naturalHeight},updateDropZones:function updateDropZones(){var b=c.fp.file("bgimage").href;if(null===b){return}for(var d=a("fieldset#id_previewareaheader .dropbackground").offset(),e=c.form.getFormValue("nodropzone",[]),f=0,g;f<e;f++){g=a(".dropzones .drop"+f);if(0===g.length){continue}var h=c.form.getFormValue("drops",[f,"choice"])-1;g.offset({left:d.left+parseInt(c.form.getFormValue("drops",[f,"xleft"])),top:d.top+parseInt(c.form.getFormValue("drops",[f,"ytop"]))});var i=c.form.getFormValue("draglabel",[h]);if(g.is("img")){g.attr("alt",i)}else{g.html(i)}}a(".dropzones .droppreview").css("padding","0");for(var j=a("select.draggroup").first().find("option").length,k=1;k<=j;k++){c.resizeAllDragsAndDropsInGroup(k)}},resizeAllDragsAndDropsInGroup:function resizeAllDragsAndDropsInGroup(b){var c=a(".dropzones .droppreview.group"+b),d=0,e=0;c.each(function(a,b){d=Math.max(d,Math.ceil(b.offsetWidth));e=Math.max(e,Math.ceil(b.offsetHeight))});d+=10;e+=10;c.each(function(b,c){var f=Math.round((d-c.offsetWidth)/2),g=Math.floor((e-c.offsetHeight)/2);a(c).css({"padding-left":f+"px","padding-right":d-c.offsetWidth-f+"px","padding-top":g+"px","padding-bottom":e-c.offsetHeight-g+"px"})})},setupEventHandlers:function setupEventHandlers(){a("fieldset#id_draggableitemheader").on("change input","input, select",function(b){var d=a(b.target).closest("select, input");if(d.hasClass("dragitemtype")){c.updateVisibilityOfFilePickers()}c.setOptionsForDragItemSelectors();if(d.is(".dragitemtype, .draggroup")){c.createDropZones()}else if(d.is(".draglabel")){c.updateDropZones()}});a("fieldset#id_dropzoneheader").on("change input","input, select",function(b){var d=a(b.target).closest("select, input");if(d.is("select")){c.createDropZones()}else{c.updateDropZones()}});a("fieldset#id_previewareaheader").on("mousedown touchstart",".droppreview",function(a){c.dragStart(a)});a(window).on("resize",function(){c.updateDropZones()})},updateVisibilityOfFilePickers:function updateVisibilityOfFilePickers(){for(var b=c.form.getFormValue("noitems",[]),d=0,e;d<b;d++){e=a("input#id_dragitem_"+d).closest(".fitem_ffilepicker");if("image"===c.form.getFormValue("drags",[d,"dragitemtype"])){e.show()}else{e.hide()}}},setOptionsForDragItemSelectors:function setOptionsForDragItemSelectors(){for(var b={0:""},d=c.form.getFormValue("noitems",[]),e=c.form.getFormValue("nodropzone",[]),f=0;f<d;f++){var g=c.form.getFormValue("draglabel",[f]),h=c.fp.file(c.form.toNameWithIndex("dragitem",[f]));if("image"===c.form.getFormValue("drags",[f,"dragitemtype"])&&null!==h.name){b[f+1]=f+1+". "+g+" ("+h.name+")"}else if(""!==g){b[f+1]=f+1+". "+g}}for(var i=0;i<e;i++){var j=a("#id_drops_"+i+"_choice"),k=j.val();j.find("option").remove();for(var l in b){if(!b.hasOwnProperty(l)){continue}j.append("<option value=\""+l+"\">"+b[l]+"</option>");var m=j.find("option[value=\""+l+"\"]");if(parseInt(l)===parseInt(k)){m.attr("selected",!0)}else if(c.isItemUsed(parseInt(l))){m.attr("disabled",!0)}}}},isItemUsed:function isItemUsed(b){if(0===b){return!1}if(c.form.getFormValue("drags",[b-1,"infinite"])){return!1}return 0!==a("fieldset#id_dropzoneheader select").filter(function(c,d){return parseInt(a(d).val())===b}).length},dragStart:function dragStart(d){var e=a(d.target).closest(".droppreview"),f=b.prepare(d);if(!f.start){return}b.start(d,e,function(a,b,d){c.dragMove(d)},function(){c.dragEnd()})},dragMove:function dragMove(b){var d=a("fieldset#id_previewareaheader .dropbackground"),e=d.offset(),f=b.data("dropNo"),g=b.offset(),h=Math.round(g.left-e.left),i=Math.round(g.top-e.top);h=Math.max(0,Math.min(h,d.width()-b.width()-10));i=Math.max(0,Math.min(i,d.height()-b.height()-10));c.form.setFormValue("drops",[f,"xleft"],h);c.form.setFormValue("drops",[f,"ytop"],i)},dragEnd:function dragEnd(){c.updateDropZones()},form:{toNameWithIndex:function toNameWithIndex(a,b){for(var c=a,d=0;d<b.length;d++){c=c+"["+b[d]+"]"}return c},getEl:function getEl(b,c){var d=a("form.mform")[0];return d.elements[this.toNameWithIndex(b,c)]},getFormValue:function getFormValue(a,b){var c=this.getEl(a,b);if(!c.type){c=c[c.length-1]}if("checkbox"===c.type){return c.checked}else{return c.value}},setFormValue:function setFormValue(a,b,c){var d=this.getEl(a,b);if("checkbox"===d.type){d.checked=c}else{d.value=c}}},filePickers:function filePickers(){var b,c;if(b===void 0){b={};c={};var d=a("form.mform input.filepickerhidden");d.each(function(a,d){b[d.value]=d.name;c[d.name]=d.parentNode})}return{file:function file(b){var d=a(c[b]),e=d.find("div.filepicker-filelist a");if(e.length){return{href:e.get(0).href,name:e.get(0).innerHTML}}else{return{href:null,name:null}}},name:function name(a){return b[a]}}}};return{init:c.init}});
define ("qtype_ddimageortext/question",["jquery","core/dragdrop","core/key_codes"],function(a,b,c){"use strict";function d(a,b,c){this.containerId=a;M.util.js_pending("qtype_ddimageortext-init-"+this.containerId);this.places=c;this.allImagesLoaded=!1;this.imageLoadingTimeoutId=null;if(b){this.getRoot().addClass("qtype_ddimageortext-readonly")}var d=this;this.getNotYetLoadedImages().one("load",function(){d.waitForAllImagesToBeLoaded()});this.waitForAllImagesToBeLoaded()}d.prototype.waitForAllImagesToBeLoaded=function(){var a=this;if(this.allImagesLoaded){return}if(null!==this.imageLoadingTimeoutId){clearTimeout(this.imageLoadingTimeoutId)}if(0<this.getNotYetLoadedImages().length){this.imageLoadingTimeoutId=setTimeout(function(){a.waitForAllImagesToBeLoaded()},100);return}this.allImagesLoaded=!0;a.setupQuestion()};d.prototype.getNotYetLoadedImages=function(){var a=this;return this.getRoot().find(".ddarea img").not(function(b,c){return a.imageIsLoaded(c)})};d.prototype.imageIsLoaded=function(a){return a.complete&&0!==a.naturalHeight};d.prototype.setupQuestion=function(){this.resizeAllDragsAndDrops();this.cloneDrags();this.positionDragsAndDrops();M.util.js_complete("qtype_ddimageortext-init-"+this.containerId)};d.prototype.resizeAllDragsAndDrops=function(){var b=this;this.getRoot().find(".draghomes > div").each(function(c,d){b.resizeAllDragsAndDropsInGroup(b.getClassnameNumericSuffix(a(d),"dragitemgroup"))})};d.prototype.resizeAllDragsAndDropsInGroup=function(b){var c=this.getRoot(),d=c.find(".dragitemgroup"+b+" .draghome"),e=0,f=0;d.each(function(a,b){e=Math.max(e,Math.ceil(b.offsetWidth));f=Math.max(f,Math.ceil(b.offsetHeight))});e+=10;f+=10;d.each(function(b,c){var d=Math.round((e-c.offsetWidth)/2),g=Math.floor((f-c.offsetHeight)/2);a(c).css({"padding-left":d+"px","padding-right":e-c.offsetWidth-d+"px","padding-top":g+"px","padding-bottom":f-c.offsetHeight-g+"px"})});for(var g in this.places){if(!this.places.hasOwnProperty(g)){continue}var h=this.places[g],i=h.text;if(parseInt(h.group)!==b){continue}if(""===i){i=M.util.get_string("blank","qtype_ddimageortext")}c.find(".dropzones").append("<div class=\"dropzone group"+h.group+" place"+g+"\" tabindex=\"0\"><span class=\"accesshide\">"+i+"</span>&nbsp;</div>");c.find(".dropzone.place"+g).width(e-2).height(f-2)}};d.prototype.cloneDrags=function(){var b=this;this.getRoot().find(".ddarea .draghome").each(function(c,d){b.cloneDragsForOneChoice(a(d))})};d.prototype.cloneDragsForOneChoice=function(a){if(a.hasClass("infinite")){for(var b=this.noOfDropsInGroup(this.getGroup(a)),c=0;c<b;c++){this.cloneDrag(a)}}else{this.cloneDrag(a)}};d.prototype.cloneDrag=function(a){var b=a.clone();b.removeClass("draghome").addClass("drag unplaced moodle-has-zindex").offset(a.offset());this.getRoot().find(".dragitems").append(b)};d.prototype.positionDragsAndDrops=function(){var b=this,c=this.getRoot(),d=this.bgImage().offset();c.find(".ddarea .dropzone").each(function(c,e){var f=a(e),g=b.places[b.getPlace(f)];f.offset({left:d.left+parseInt(g.xy[0]),top:d.top+parseInt(g.xy[1])})});c.find(".ddarea .drag").each(function(c,d){var e=a(d),f=b.getClassnameNumericSuffix(e,"inplace");e.addClass("unplaced").removeClass("placed").offset(b.getDragHome(b.getGroup(e),b.getChoice(e)).offset());if(null!==f){e.removeClass("inplace"+f)}});c.find("input.placeinput").each(function(d,e){var f=a(e),g=f.val();if("0"===g){return}var h=b.getPlace(f);b.getUnplacedChoice(b.getGroup(f),g).removeClass("unplaced").addClass("placed inplace"+h).offset(c.find(".dropzone.place"+h).offset())});this.bgImage().data("prev-top",d.top).data("prev-left",d.left)};d.prototype.fixLayoutIfBackgroundMoved=function(){var a=this.bgImage(),b=a.offset(),c=a.data("prev-top"),d=a.data("prev-left");if(d===void 0||c===void 0){return}if(c===b.top&&d===b.left){return}this.positionDragsAndDrops()};d.prototype.handleDragStart=function(c){var d=this,e=a(c.target).closest(".drag"),f=b.prepare(c);if(!f.start){return}var g=this.getClassnameNumericSuffix(e,"inplace");if(null!==g){this.setInputValue(g,0);e.removeClass("inplace"+g)}e.addClass("beingdragged");b.start(c,e,function(a,b,c){d.dragMove(a,b,c)},function(a,b,c){d.dragEnd(a,b,c)})};d.prototype.dragMove=function(b,c,d){var e=this;this.getRoot().find(".dropzone.group"+this.getGroup(d)).each(function(d,f){var g=a(f);if(e.isPointInDrop(b,c,g)){g.addClass("valid-drag-over-drop")}else{g.removeClass("valid-drag-over-drop")}})};d.prototype.dragEnd=function(b,c,d){var e=this,f=this.getRoot(),g=!1;f.find(".dropzone.group"+this.getGroup(d)).each(function(f,h){var i=a(h);if(!e.isPointInDrop(b,c,i)){return!0}i.removeClass("valid-drag-over-drop");e.sendDragToDrop(d,i);g=!0;return!1});if(!g){this.sendDragHome(d)}};d.prototype.sendDragToDrop=function(a,b){var c=this.getCurrentDragInPlace(this.getPlace(b));if(0!==c.length){this.sendDragHome(c)}if(0===a.length){this.setInputValue(this.getPlace(b),0)}else{this.setInputValue(this.getPlace(b),this.getChoice(a));a.removeClass("unplaced").addClass("placed inplace"+this.getPlace(b));this.animateTo(a,b)}};d.prototype.sendDragHome=function(a){a.removeClass("placed").addClass("unplaced");var b=this.getClassnameNumericSuffix(a,"inplace");if(null!==b){a.removeClass("inplace"+b)}this.animateTo(a,this.getDragHome(this.getGroup(a),this.getChoice(a)))};d.prototype.handleKeyPress=function(b){var d=a(b.target).closest(".dropzone"),e=this.getCurrentDragInPlace(this.getPlace(d)),f=a();switch(b.keyCode){case c.space:case c.arrowRight:case c.arrowDown:f=this.getNextDrag(this.getGroup(d),e);break;case c.arrowLeft:case c.arrowUp:f=this.getPreviousDrag(this.getGroup(d),e);break;case c.escape:break;default:return;}b.preventDefault();this.sendDragToDrop(f,d)};d.prototype.getNextDrag=function(a,b){var c,d=this.noOfChoicesInGroup(a);if(0===b.length){c=1}else{c=this.getChoice(b)+1}var e=this.getUnplacedChoice(a,c);while(0===e.length&&c<d){c++;e=this.getUnplacedChoice(a,c)}return e};d.prototype.getPreviousDrag=function(a,b){var c;if(0===b.length){c=this.noOfChoicesInGroup(a)}else{c=this.getChoice(b)-1}var d=this.getUnplacedChoice(a,c);while(0===d.length&&1<c){c--;d=this.getUnplacedChoice(a,c)}return d};d.prototype.animateTo=function(a,b){var c=a.offset(),d=b.offset();a.addClass("beingdragged");a.animate({left:parseInt(a.css("left"))+d.left-c.left,top:parseInt(a.css("top"))+d.top-c.top},{duration:"fast",done:function done(){a.removeClass("beingdragged");a.offset(d)}})};d.prototype.isPointInDrop=function(a,b,c){var d=c.offset();return a>=d.left&&a<d.left+c.width()&&b>=d.top&&b<d.top+c.height()};d.prototype.setInputValue=function(a,b){this.getRoot().find("input.placeinput.place"+a).val(b)};d.prototype.getRoot=function(){return a(document.getElementById(this.containerId))};d.prototype.bgImage=function(){return this.getRoot().find("img.dropbackground")};d.prototype.getDragHome=function(a,b){return this.getRoot().find(".ddarea .draghome.group"+a+".choice"+b)};d.prototype.getUnplacedChoice=function(a,b){return this.getRoot().find(".ddarea .drag.group"+a+".choice"+b+".unplaced").slice(0,1)};d.prototype.getCurrentDragInPlace=function(a){return this.getRoot().find(".ddarea .drag.inplace"+a)};d.prototype.noOfDropsInGroup=function(a){return this.getRoot().find(".dropzone.group"+a).length};d.prototype.noOfChoicesInGroup=function(a){return this.getRoot().find(".dragitemgroup"+a+" .draghome").length};d.prototype.getClassnameNumericSuffix=function(a,b){var c=a.attr("class");if(""!==c){for(var d=c.split(" "),e=0,f;e<d.length;e++){f=new RegExp("^"+b+"([0-9])+$");if(f.test(d[e])){var g=/([0-9])+$/,h=g.exec(d[e]);return+h[0]}}}return null};d.prototype.getChoice=function(a){return this.getClassnameNumericSuffix(a,"choice")};d.prototype.getGroup=function(a){return this.getClassnameNumericSuffix(a,"group")};d.prototype.getPlace=function(a){return this.getClassnameNumericSuffix(a,"place")};var f={eventHandlersInitialised:!1,questions:{},init:function init(a,b,c){f.questions[a]=new d(a,b,c);if(!f.eventHandlersInitialised){f.setupEventHandlers();f.eventHandlersInitialised=!0}},setupEventHandlers:function setupEventHandlers(){a("body").on("mousedown touchstart",".que.ddimageortext:not(.qtype_ddimageortext-readonly) .dragitems .drag",f.handleDragStart).on("keydown",".que.ddimageortext:not(.qtype_ddimageortext-readonly) .dropzones .dropzone",f.handleKeyPress);a(window).on("resize",f.handleWindowResize);setTimeout(f.fixLayoutIfThingsMoved,100)},handleDragStart:function handleDragStart(a){a.preventDefault();var b=f.getQuestionForEvent(a);if(b){b.handleDragStart(a)}},handleKeyPress:function handleKeyPress(a){var b=f.getQuestionForEvent(a);if(b){b.handleKeyPress(a)}},handleWindowResize:function handleWindowResize(){for(var a in f.questions){if(f.questions.hasOwnProperty(a)){f.questions[a].positionDragsAndDrops()}}},fixLayoutIfThingsMoved:function fixLayoutIfThingsMoved(){for(var a in f.questions){if(f.questions.hasOwnProperty(a)){f.questions[a].fixLayoutIfBackgroundMoved()}}setTimeout(f.fixLayoutIfThingsMoved,100)},getQuestionForEvent:function getQuestionForEvent(b){var c=a(b.currentTarget).closest(".que.ddimageortext").attr("id");return f.questions[c]}};return{init:f.init}});
define ("qtype_ddmarker/form",["jquery","core/dragdrop","qtype_ddmarker/shapes"],function(a,b,c){"use strict";function d(a){this.dropzoneNo=a;this.svgEl=null;this.shape=c.make(this.getShapeType(),this.getLabel());this.updateCoordinatesFromForm()}d.prototype.updateCoordinatesFromForm=function(a){var b=this.getCoordinates(),c="polygon"===this.shape.getType()&&this.shape.points.length;if(this.shape.getCoordinates()===b){return}if(!this.shape.parse(b)){return}if("polygon"===this.shape.getType()&&c!==this.shape.points.length){var d=this.isActive();this.removeFromSvg();if(a){this.addToSvg(a);if(d){this.setActive()}}}else{this.updateSvgEl()}};d.prototype.updateLabel=function(){var a=this.getLabel();if(this.shape.label!==a){this.shape.label=a;this.updateSvgEl()}};d.prototype.changeShape=function(a){var b=this.getShapeType(),d=this.isActive();if(b===this.shape.getType()){return}this.removeFromSvg();this.shape=c.getSimilar(b,this.shape);if(a){this.addToSvg(a);if(d){this.setActive()}}this.setCoordinatesInForm()};d.prototype.addToSvg=function(a){if(null!==this.svgEl){throw new Error("this.svgEl already set")}this.svgEl=this.shape.makeSvg(a);if(!this.svgEl){return}this.svgEl.setAttribute("class","dropzone");this.svgEl.setAttribute("data-dropzone-no",this.dropzoneNo);var b=this.shape.getHandlePositions();if(null===b){return}var d=c.createSvgElement(this.svgEl,"circle");d.setAttribute("cx",b.moveHandle.x);d.setAttribute("cy",b.moveHandle.y);d.setAttribute("r",7);d.setAttribute("class","handle move");for(var e=0;e<b.editHandles.length;++e){this.makeEditHandle(e,b.editHandles[e])}};d.prototype.makeEditHandle=function(a,b){var d=c.createSvgElement(this.svgEl,"rect");d.setAttribute("x",b.x-6);d.setAttribute("y",b.y-6);d.setAttribute("width",11);d.setAttribute("height",11);d.setAttribute("class","handle edit");d.setAttribute("data-edit-handle-no",a)};d.prototype.removeFromSvg=function(){if(null!==this.svgEl){this.svgEl.parentNode.removeChild(this.svgEl);this.svgEl=null}};d.prototype.updateSvgEl=function(){if(null===this.svgEl){return}this.shape.updateSvg(this.svgEl);var a=this.shape.getHandlePositions();if(null===a){return}this.svgEl.childNodes[2].setAttribute("cx",a.moveHandle.x);this.svgEl.childNodes[2].setAttribute("cy",a.moveHandle.y);for(var b=0;b<a.editHandles.length;++b){this.svgEl.childNodes[3+b].setAttribute("x",a.editHandles[b].x-6);this.svgEl.childNodes[3+b].setAttribute("y",a.editHandles[b].y-6)}};d.prototype.isActive=function(){return null!==this.svgEl&&this.svgEl.getAttribute("class").match(/\bactive\b/)};d.prototype.setActive=function(){var a=this.svgEl.parentNode;a.removeChild(this.svgEl);a.appendChild(this.svgEl);this.svgEl.setAttribute("class",this.svgEl.getAttribute("class")+" active")};d.prototype.setCoordinatesInForm=function(){f.form.setFormValue("drops",[this.dropzoneNo,"coords"],this.shape.getCoordinates())};d.prototype.getCoordinates=function(){return f.form.getFormValue("drops",[this.dropzoneNo,"coords"]).replace(/\s*/g,"")};d.prototype.getChoiceNo=function(){return f.form.getFormValue("drops",[this.dropzoneNo,"choice"])};d.prototype.getLabel=function(){return f.form.getMarkerText(this.getChoiceNo())};d.prototype.getShapeType=function(){return f.form.getFormValue("drops",[this.dropzoneNo,"shape"])};d.prototype.handleMove=function(c){var d=b.prepare(c);if(!d.start){return}var e=this,f=d.x,g=d.y,h=this.makeDragProxy(d.x,d.y),i=a("fieldset#id_previewareaheader .dropbackground"),j=i.width(),k=i.height();b.start(c,a(h),function(a,b){e.shape.move(a-f,b-g,j,k);f=a;g=b;e.updateSvgEl();e.setCoordinatesInForm()},function(){document.body.removeChild(h)})};d.prototype.handleEdit=function(c,d,e){var f=b.prepare(c);if(!f.start){return}if("polygon"===this.shape.getType()&&(c.ctrlKey||c.metaKey)){this.shape.addNewPointAfter(d);this.removeFromSvg();this.addToSvg(e);this.setActive()}var g=this,h=f.x,i=f.y,j=this.makeDragProxy(f.x,f.y),k=a("fieldset#id_previewareaheader .dropbackground"),l=k.width(),m=k.height();b.start(c,a(j),function(a,b){g.shape.edit(d,a-h,b-i,l,m);h=a;i=b;g.updateSvgEl();g.setCoordinatesInForm()},function(){document.body.removeChild(j);g.shape.normalizeShape();g.updateSvgEl();g.setCoordinatesInForm()})};d.prototype.makeDragProxy=function(a,b){var c=document.createElement("div");c.style.position="absolute";c.style.top=b+"px";c.style.left=a+"px";c.style.width="1px";c.style.height="1px";document.body.appendChild(c);return c};var f={maxSizes:null,fp:null,noDropZones:null,dropZones:[],init:function init(a){f.maxSizes=a;f.fp=f.filePickers();f.noDropZones=f.form.getFormValue("nodropzone",[]);f.setupPreviewArea();f.setOptionsForDragItemSelectors();f.createShapes();f.setupEventHandlers();f.waitForFilePickerToInitialise()},setupPreviewArea:function setupPreviewArea(){a("fieldset#id_previewareaheader div.fcontainer").append("<div class=\"ddarea que ddmarker\">   <div id=\"ddm-droparea\" class=\"droparea\">       <img class=\"dropbackground\" />       <div id=\"ddm-dropzone\" class=\"dropzones\">       </div>   </div></div>")},setOptionsForDragItemSelectors:function setOptionsForDragItemSelectors(){var b={0:""},c=f.form.getFormValue("noitems",[]),d=[],e,g,h;for(g=1;g<=c;g++){h=f.form.getMarkerText(g);if(""!==h){b[g]=a("<div/>").text(h).html()}}for(g=0;g<f.noDropZones;g++){e=a("#id_drops_"+g+"_choice");d[g]=+e.val()}for(g=0;g<f.noDropZones;g++){e=a("#id_drops_"+g+"_choice");e.find("option").remove();for(var j in b){j=+j;var l="<option value=\""+j+"\">"+b[j]+"</option>";e.append(l);var m=e.find("option[value=\""+j+"\"]");if(0===j){continue}if(j===d[g]){m.attr("selected",!0);continue}var n=f.form.getFormValue("drags",[j-1,"noofdrags"]);if(0===+n){continue}for(var o in d){if(+d[o]!==j){continue}if(1===+n){m.attr("disabled",!0);break}else{n--}}}if(0<f.dropZones.length){f.dropZones[g].updateLabel()}}},createShapes:function createShapes(){for(var a=0;a<f.noDropZones;a++){f.dropZones[a]=new d(a)}},setupEventHandlers:function setupEventHandlers(){a("fieldset#id_draggableitemheader").on("change input","input, select",function(){f.setOptionsForDragItemSelectors()});a("fieldset#id_dropzoneheader").on("change input","input, select",function(a){var b=a.currentTarget.name.match(/^drops\[(\d+)]\[([a-z]*)]$/);if(!b){return}var c=b[1],d=b[2],e=f.dropZones[c];switch(d){case"shape":e.changeShape(f.form.getSvg());break;case"coords":e.updateCoordinatesFromForm(f.form.getSvg());break;case"choice":e.updateLabel();break;}});var b=a("fieldset#id_previewareaheader");b.on("click","g.dropzone",function(b){var c=a(b.currentTarget).data("dropzone-no"),d=f.dropZones[c].isActive();a(f.form.getSvg()).find(".dropzone.active").removeClass("active");if(!d){f.dropZones[c].setActive()}});b.on("mousedown touchstart",".dropzone .handle.move",function(b){var c=a(b.currentTarget).closest("g").data("dropzoneNo");f.dropZones[c].handleMove(b)});b.on("mousedown touchstart",".dropzone .handle.edit",function(b){var c=a(b.currentTarget).closest("g").data("dropzoneNo"),d=b.currentTarget.getAttribute("data-edit-handle-no");f.dropZones[c].handleEdit(b,d,f.form.getSvg())})},waitForFilePickerToInitialise:function waitForFilePickerToInitialise(){if(null===f.fp.file("bgimage").href){setTimeout(f.waitForFilePickerToInitialise,1e3);return}a("form.mform").on("change","#id_bgimage",f.loadPreviewImage);f.loadPreviewImage()},loadPreviewImage:function loadPreviewImage(){a("fieldset#id_previewareaheader .dropbackground").one("load",f.afterPreviewImageLoaded).attr("src",f.fp.file("bgimage").href)},afterPreviewImageLoaded:function afterPreviewImageLoaded(){var b=a("fieldset#id_previewareaheader .dropbackground");f.constrainImageSize();a("#ddm-dropzone").css("position","relative").css("top",-1*(b.height()+1));a("#ddm-droparea").css("height",b.height()+20);f.updateSvgDisplay()},constrainImageSize:function constrainImageSize(){var b=a("fieldset#id_previewareaheader .dropbackground"),c=Math.max(b.width()/f.maxSizes.width,b.height()/f.maxSizes.height);if(1<c){b.css("width",Math.floor(b.width()/c))}b.addClass("constrained")},updateSvgDisplay:function updateSvgDisplay(){var b=a("fieldset#id_previewareaheader .dropbackground"),c;if(f.form.getSvg()){for(c=0;c<f.noDropZones;c++){f.dropZones[c].updateSvgEl()}}else{a("#ddm-dropzone").html("<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"dropzones\" width=\""+b.outerWidth()+"\" height=\""+b.outerHeight()+"\"></svg>");for(c=0;c<f.noDropZones;c++){f.dropZones[c].addToSvg(f.form.getSvg())}}},form:{getMarkerText:function getMarkerText(a){if(0!==+a){var b=f.form.getFormValue("drags",[a-1,"label"]);return b.replace(/^\s*(.*)\s*$/,"$1")}else{return""}},getSvg:function getSvg(){var b=a("fieldset#id_previewareaheader svg");if(0===b.length){return null}else{return b[0]}},toNameWithIndex:function toNameWithIndex(a,b){for(var c=a,d=0;d<b.length;d++){c=c+"["+b[d]+"]"}return c},getEl:function getEl(b,c){var d=a("form.mform")[0];return d.elements[this.toNameWithIndex(b,c)]},getFormValue:function getFormValue(a,b){var c=this.getEl(a,b);if("checkbox"===c.type){return c.checked}else{return c.value}},setFormValue:function setFormValue(a,b,c){var d=this.getEl(a,b);if("checkbox"===d.type){d.checked=c}else{d.value=c}}},filePickers:function filePickers(){var b,c;if(b===void 0){b={};c={};a("form.mform input.filepickerhidden").each(function(a,d){b[d.value]=d.name;c[d.name]=d.parentNode})}return{file:function file(b){var d=a(c[b]).find("div.filepicker-filelist a");if(d.length){return{href:d.get(0).href,name:d.get(0).innerHTML}}else{return{href:null,name:null}}},name:function name(a){return b[a]}}}};return{init:f.init}});
define ("qtype_ddmarker/question",["jquery","core/dragdrop","qtype_ddmarker/shapes","core/key_codes"],function(a,b,c,d){"use strict";function e(a,b,c,d){this.containerId=a;this.visibleDropZones=d;if(c){this.getRoot().addClass("qtype_ddmarker-readonly")}this.loadImage(b)}e.prototype.loadImage=function(a){var b=this;this.getRoot().find(".dropbackground").one("load",function(){if(0<b.visibleDropZones.length){b.drawDropzones()}b.repositionDrags()}).attr("src",a).css({border:"1px solid #000","max-width":"none"})};e.prototype.drawDropzones=function(){var a=this.getRoot().find("img.dropbackground");this.getRoot().find("div.dropzones").html("<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"dropzones\" width=\""+a.outerWidth()+"\" height=\""+a.outerHeight()+"\"></svg>");var b=this.getRoot().find("svg.dropzones");b.css("position","absolute");for(var c=0,d=0,e;d<this.visibleDropZones.length;d++){e="color"+c;c=(c+1)%8;this.addDropzone(b,d,e)}};e.prototype.addDropzone=function(a,b,d){var e=this.visibleDropZones[b],f=c.make(e.shape,""),g;if(!f.parse(e.coords)){return}g=this.getRoot().find("div.markertexts span.markertext"+b);if(g.length){if(""!==e.markertext){g.html(e.markertext)}else{g.remove()}}else if(""!==e.markertext){this.getRoot().find("div.markertexts").append("<span class=\""+("markertext markertext"+b)+"\">"+e.markertext+"</span>")}var h=f.makeSvg(a[0]);h.setAttribute("class","dropzone "+d)};e.prototype.repositionDropZones=function(){var a=this.getRoot().find("svg.dropzones");if(0===a.length){return}var b=this.convertToWindowXY(new c.Point(-1,0));a.offset({left:b.x,top:b.y});for(var d=0,e;d<this.visibleDropZones.length;d++){e=this.getRoot().find("div.ddarea div.markertexts span.markertext"+d);if(0===e.length){continue}var f=this.visibleDropZones[d],g=c.make(f.shape,"");if(!g.parse(f.coords)){continue}var h=g.getHandlePositions(),i=this.convertToWindowXY(h.moveHandle.offset(-e.outerWidth()/2,-e.outerHeight()/2));e.offset({left:i.x-4,top:i.y})}};e.prototype.repositionDrags=function(){var b=this.getRoot(),c=this;b.find("div.dragitems .dragitem").each(function(b,c){a(c).addClass("unneeded")});b.find("input.choices").each(function(a,b){for(var d=c.getChoiceNoFromElement(b),e=c.getCoords(b),f=c.dragHome(d),g=0,h;g<e.length;g++){h=c.dragItem(d,g);if(!h.length||h.hasClass("beingdragged")){h=c.cloneNewDragItem(f,g)}else{h.removeClass("unneeded")}h.offset({left:e[g].x,top:e[g].y})}});b.find("div.dragitems .dragitem").each(function(b,c){var d=a(c);if(d.hasClass("unneeded")&&!d.hasClass("beingdragged")){d.remove()}});this.repositionDropZones();var d=this.bgImage(),e=d.offset();d.data("prev-top",e.top).data("prev-left",e.left)};e.prototype.getCoords=function(b){var d=this.getRoot(),e=this.getChoiceNoFromElement(b),f=+this.getClassnameNumericSuffix(b,"noofdrags"),g=0<d.find("span.dragitem.beingdragged.choice"+e).length,h=[],j=a(b).val();if(""!==j){for(var k=j.split(";"),l=0;l<k.length;l++){h[l]=this.convertToWindowXY(c.Point.parse(k[l]))}}var m=h.length+(g?1:0);if(a(b).hasClass("infinite")||m<f){h[h.length]=this.dragHomeXY(e)}return h};e.prototype.convertToWindowXY=function(a){var b=this.bgImage();return a.offset(b.offset().left+1,b.offset().top+1)};e.prototype.convertToBgImgXY=function(a){var b=this.bgImage();return a.offset(-b.offset().left-1,-b.offset().top-1)};e.prototype.coordsInBgImg=function(a){var b=this.bgImage();return 0<a.x&&a.x<=b.width()&&0<a.y&&a.y<=b.height()};e.prototype.dragHomeXY=function(a){var b=this.dragHome(a);return new c.Point(b.offset().left,b.offset().top)};e.prototype.getRoot=function(){return a(document.getElementById(this.containerId))};e.prototype.bgImage=function(){return this.getRoot().find("img.dropbackground")};e.prototype.dragHome=function(a){return this.getRoot().find("div.dragitems span.draghome.choice"+a)};e.prototype.dragItem=function(a,b){return this.getRoot().find("div.dragitems span.dragitem.choice"+a+".item"+b)};e.prototype.cloneNewDragItem=function(a,b){var c=a.clone(!0);c.removeClass("draghome").addClass("dragitem").addClass("item"+b);a.after(c);c.attr("tabIndex",0);return c};e.prototype.handleDragStart=function(c){var d=this,e=a(c.target).closest(".dragitem"),f=b.prepare(c);if(!f.start){return}e.addClass("beingdragged");b.start(c,e,function(){},function(a,b,c){d.dragEnd(c)})};e.prototype.dragEnd=function(a){a.removeClass("beingdragged");var b=this.getChoiceNoFromElement(a);this.saveCoordsForChoice(b,a);this.repositionDrags()};e.prototype.saveCoordsForChoice=function(a,b){for(var d=[],e=this.getRoot().find("span.dragitem.choice"+a).length,f,g=!0,h=0,j;h<=e;h++){j=this.dragItem(a,h);if(0===j.length){continue}if(!j.hasClass("beingdragged")){f=this.convertToBgImgXY(new c.Point(j.offset().left,j.offset().top));if(this.coordsInBgImg(f)){d[d.length]=f}}if(b&&0!==b.length&&b[0].innerText===j[0].innerText){g=!1}}if(g){f=this.convertToBgImgXY(new c.Point(b.offset().left,b.offset().top));if(this.coordsInBgImg(f)){d[d.length]=f}}this.getRoot().find("input.choice"+a).val(d.join(";"))};e.prototype.handleKeyPress=function(b){var e=a(b.target).closest(".dragitem"),f=new c.Point(e.offset().left,e.offset().top),g=this.getChoiceNoFromElement(e);switch(b.keyCode){case d.arrowLeft:case 65:f.x-=1;break;case d.arrowRight:case 68:f.x+=1;break;case d.arrowDown:case 83:f.y+=1;break;case d.arrowUp:case 87:f.y-=1;break;case d.space:case d.escape:f=null;break;default:return;}b.preventDefault();if(null!==f){f=this.constrainToBgImg(f)}else{f=this.dragHomeXY(g)}e.offset({left:f.x,top:f.y});this.saveCoordsForChoice(g,e);this.repositionDrags()};e.prototype.constrainToBgImg=function(a){var b=this.bgImage(),c=this.convertToBgImgXY(a);c.x=Math.max(0,c.x);c.y=Math.max(0,c.y);c.x=Math.min(b.width(),c.x);c.y=Math.min(b.height(),c.y);return this.convertToWindowXY(c)};e.prototype.getChoiceNoFromElement=function(a){return+this.getClassnameNumericSuffix(a,"choice")};e.prototype.getClassnameNumericSuffix=function(b,c){var d=a(b).attr("class");if(d!==void 0&&""!==d){for(var e=d.split(" "),f=0,g;f<e.length;f++){g=new RegExp("^"+c+"([0-9])+$");if(g.test(e[f])){var h=/([0-9])+$/,i=h.exec(e[f]);return+i[0]}}}return null};e.prototype.handleResize=function(){this.repositionDrags()};e.prototype.fixLayoutIfBackgroundMoved=function(){var a=this.bgImage(),b=a.offset(),c=a.data("prev-top"),d=a.data("prev-left");if(d===void 0||c===void 0){return}if(c===b.top&&d===b.left){return}this.repositionDrags()};var f={eventHandlersInitialised:!1,questions:{},init:function init(a,b,c,d){f.questions[a]=new e(a,b,c,d);if(!f.eventHandlersInitialised){f.setupEventHandlers();f.eventHandlersInitialised=!0}},setupEventHandlers:function setupEventHandlers(){a("body").on("mousedown touchstart",".que.ddmarker:not(.qtype_ddmarker-readonly) div.dragitems .dragitem",f.handleDragStart).on("keydown keypress",".que.ddmarker:not(.qtype_ddmarker-readonly) div.dragitems .dragitem",f.handleKeyPress);a(window).on("resize",f.handleWindowResize);setTimeout(f.fixLayoutIfThingsMoved,100)},handleDragStart:function handleDragStart(a){a.preventDefault();var b=f.getQuestionForEvent(a);if(b){b.handleDragStart(a)}},handleKeyPress:function handleKeyPress(a){var b=f.getQuestionForEvent(a);if(b){b.handleKeyPress(a)}},handleWindowResize:function handleWindowResize(){for(var a in f.questions){if(f.questions.hasOwnProperty(a)){f.questions[a].handleResize()}}},fixLayoutIfThingsMoved:function fixLayoutIfThingsMoved(){for(var a in f.questions){if(f.questions.hasOwnProperty(a)){f.questions[a].fixLayoutIfBackgroundMoved()}}setTimeout(f.fixLayoutIfThingsMoved,100)},getQuestionForEvent:function getQuestionForEvent(b){var c=a(b.currentTarget).closest(".que.ddmarker").attr("id");return f.questions[c]}};return{init:f.init}});
define ("qtype_ddmarker/shapes",function(){"use strict";function a(a,b){this.x=a;this.y=b}a.prototype.toString=function(){return this.x+","+this.y};a.prototype.move=function(a,b){this.x+=a;this.y+=b};a.prototype.offset=function(b,c){if(b instanceof a){c=b.y;b=b.x}return new a(this.x+b,this.y+c)};a.parse=function(b){var c=b.split(",");if(2!==c.length){throw new Error(b+" is not a valid point")}return new a(Math.round(c[0]),Math.round(c[1]))};function b(b,c,d){this.label=b;this.centre=new a(c||0,d||0)}b.prototype.getType=function(){throw new Error("Not implemented.")};b.prototype.getCoordinates=function(){throw new Error("Not implemented.")};b.prototype.parse=function(){throw new Error("Not implemented.")};b.prototype.move=function(){};b.prototype.edit=function(){};b.prototype.normalizeShape=function(){};b.prototype.makeSvg=function(){throw new Error("Not implemented.")};b.prototype.updateSvg=function(){};b.prototype.makeSimilarCircle=function(){throw new Error("Not implemented.")};b.prototype.makeSimilarRectangle=function(){throw new Error("Not implemented.")};b.prototype.makeSimilarPolygon=function(){throw new Error("Not implemented.")};b.prototype.getHandlePositions=function(){return null};function c(a,c,d,e){c=c||15;d=d||15;b.call(this,a,c,d);this.radius=e||15}c.prototype=new b;c.prototype.getType=function(){return"circle"};c.prototype.getCoordinates=function(){return this.centre+";"+Math.abs(this.radius)};c.prototype.makeSvg=function(a){var b=h(a,"circle");this.updateSvg(b);return b};c.prototype.updateSvg=function(a){a.childNodes[0].setAttribute("cx",this.centre.x);a.childNodes[0].setAttribute("cy",this.centre.y);a.childNodes[0].setAttribute("r",Math.abs(this.radius));a.childNodes[1].setAttribute("x",this.centre.x);a.childNodes[1].setAttribute("y",this.centre.y+15);a.childNodes[1].textContent=this.label};c.prototype.parse=function(b){if(!b.match(/^\d+,\d+;\d+$/)){return!1}var c=b.split(";");this.centre=a.parse(c[0]);this.radius=Math.round(c[1]);return!0};c.prototype.move=function(a,b,c,d){this.centre.move(a,b);if(this.centre.x<this.radius){this.centre.x=this.radius}if(this.centre.x>c-this.radius){this.centre.x=c-this.radius}if(this.centre.y<this.radius){this.centre.y=this.radius}if(this.centre.y>d-this.radius){this.centre.y=d-this.radius}};c.prototype.edit=function(a,b,c,d,e){this.radius+=b;var f=Math.min(this.centre.x,this.centre.y,d-this.centre.x,e-this.centre.y);if(this.radius>f){this.radius=f}if(this.radius<-f){this.radius=-f}};c.prototype.normalizeShape=function(){this.radius=Math.abs(this.radius)};c.prototype.makeSimilarRectangle=function(){return new d(this.label,this.centre.x-this.radius,this.centre.y-this.radius,2*this.radius,2*this.radius)};c.prototype.makeSimilarPolygon=function(){return new e(this.label,[this.centre.offset(-this.radius,-this.radius),this.centre.offset(-this.radius,this.radius),this.centre.offset(this.radius,this.radius),this.centre.offset(this.radius,-this.radius)])};c.prototype.getHandlePositions=function(){return{moveHandle:this.centre,editHandles:[this.centre.offset(this.radius,0)]}};function d(a,c,d,e,f){b.call(this,a,c,d);this.width=e||30;this.height=f||30}d.prototype=new b;d.prototype.getType=function(){return"rectangle"};d.prototype.getCoordinates=function(){return this.centre+";"+this.width+","+this.height};d.prototype.makeSvg=function(a){var b=h(a,"rect");this.updateSvg(b);return b};d.prototype.updateSvg=function(a){if(0<=this.width){a.childNodes[0].setAttribute("x",this.centre.x);a.childNodes[0].setAttribute("width",this.width)}else{a.childNodes[0].setAttribute("x",this.centre.x+this.width);a.childNodes[0].setAttribute("width",-this.width)}if(0<=this.height){a.childNodes[0].setAttribute("y",this.centre.y);a.childNodes[0].setAttribute("height",this.height)}else{a.childNodes[0].setAttribute("y",this.centre.y+this.height);a.childNodes[0].setAttribute("height",-this.height)}a.childNodes[1].setAttribute("x",this.centre.x+this.width/2);a.childNodes[1].setAttribute("y",this.centre.y+this.height/2+15);a.childNodes[1].textContent=this.label};d.prototype.parse=function(b){if(!b.match(/^\d+,\d+;\d+,\d+$/)){return!1}var c=b.split(";");this.centre=a.parse(c[0]);var d=a.parse(c[1]);this.width=d.x;this.height=d.y;return!0};d.prototype.move=function(a,b,c,d){this.centre.move(a,b);if(0>this.centre.x){this.centre.x=0}if(this.centre.x>c-this.width){this.centre.x=c-this.width}if(0>this.centre.y){this.centre.y=0}if(this.centre.y>d-this.height){this.centre.y=d-this.height}};d.prototype.edit=function(a,b,c,d,e){this.width+=b;this.height+=c;if(this.width<-this.centre.x){this.width=-this.centre.x}if(this.width>d-this.centre.x){this.width=d-this.centre.x}if(this.height<-this.centre.y){this.height=-this.centre.y}if(this.height>e-this.centre.y){this.height=e-this.centre.y}};d.prototype.normalizeShape=function(){if(0>this.width){this.centre.x+=this.width;this.width=-this.width}if(0>this.height){this.centre.y+=this.height;this.height=-this.height}};d.prototype.makeSimilarCircle=function(){return new c(this.label,Math.round(this.centre.x+this.width/2),Math.round(this.centre.y+this.height/2),Math.round((this.width+this.height)/4))};d.prototype.makeSimilarPolygon=function(){return new e(this.label,[this.centre,this.centre.offset(0,this.height),this.centre.offset(this.width,this.height),this.centre.offset(this.width,0)])};d.prototype.getHandlePositions=function(){return{moveHandle:this.centre.offset(this.width/2,this.height/2),editHandles:[this.centre.offset(this.width,this.height)]}};function e(c,d){b.call(this,c,0,0);this.points=d?d.slice():[new a(10,10),new a(40,10),new a(10,40)];this.normalizeShape()}e.prototype=new b;e.prototype.getType=function(){return"polygon"};e.prototype.getCoordinates=function(){for(var a="",b=0;b<this.points.length;b++){a+=this.centre.offset(this.points[b])+";"}return a.slice(0,a.length-1)};e.prototype.makeSvg=function(a){var b=h(a,"polygon");this.updateSvg(b);return b};e.prototype.updateSvg=function(a){a.childNodes[0].setAttribute("points",this.getCoordinates().replace(/[,;]/g," "));a.childNodes[1].setAttribute("x",this.centre.x);a.childNodes[1].setAttribute("y",this.centre.y+15);a.childNodes[1].textContent=this.label};e.prototype.parse=function(b){if(!b.match(/^\d+,\d+(?:;\d+,\d+)*$/)){return!1}for(var c=b.split(";"),d=[],e=0;e<c.length;e++){d.push(a.parse(c[e]))}this.points=d;this.centre.x=0;this.centre.y=0;this.normalizeShape();return!0};e.prototype.move=function(a,b,c,d){this.centre.move(a,b);for(var e=c,f=0,g=d,h=0,j=0;j<this.points.length;j++){e=Math.min(e,this.points[j].x);f=Math.max(f,this.points[j].x);g=Math.min(g,this.points[j].y);h=Math.max(h,this.points[j].y)}if(this.centre.x<-e){this.centre.x=-e}if(this.centre.x>c-f){this.centre.x=c-f}if(this.centre.y<-g){this.centre.y=-g}if(this.centre.y>d-h){this.centre.y=d-h}};e.prototype.edit=function(a,b,c,d,e){this.points[a].move(b,c);if(this.points[a].x<-this.centre.x){this.points[a].x=-this.centre.x}if(this.points[a].x>d-this.centre.x){this.points[a].x=d-this.centre.x}if(this.points[a].y<-this.centre.y){this.points[a].y=-this.centre.y}if(this.points[a].y>e-this.centre.y){this.points[a].y=e-this.centre.y}};e.prototype.addNewPointAfter=function(b){this.points.splice(b,0,new a(this.points[b].x,this.points[b].y))};e.prototype.normalizeShape=function(){var a,b=0,c=0;if(0===this.points.length){return}for(a=0;a<this.points.length;a++){b+=this.points[a].x;c+=this.points[a].y}b=Math.round(b/this.points.length);c=Math.round(c/this.points.length);if(0===b&&0===c){return}for(a=0;a<this.points.length;a++){this.points[a].move(-b,-c)}this.centre.move(b,c)};e.prototype.makeSimilarCircle=function(){return this.makeSimilarRectangle().makeSimilarCircle()};e.prototype.makeSimilarRectangle=function(){for(var a,b=0,c=0,e=0,f=0,g=0;g<this.points.length;g++){a=this.points[g];b=Math.min(b,a.x);c=Math.max(c,a.x);e=Math.min(e,a.y);f=Math.max(f,a.y)}return new d(this.label,this.centre.x+b,this.centre.y+e,Math.max(c-b,10),Math.max(f-e,10))};e.prototype.getHandlePositions=function(){for(var a=[],b=0;b<this.points.length;b++){a.push(this.points[b].offset(this.centre.x,this.centre.y))}return{moveHandle:this.centre,editHandles:a}};function f(a){b.call(this,a)}f.prototype=new b;f.prototype.getType=function(){return"null"};f.prototype.getCoordinates=function(){return""};f.prototype.makeSvg=function(){return null};f.prototype.updateSvg=function(){};f.prototype.parse=function(){return!1};f.prototype.makeSimilarCircle=function(){return new c(this.label)};f.prototype.makeSimilarRectangle=function(){return new d(this.label)};f.prototype.makeSimilarPolygon=function(){return new e(this.label)};function g(a,b){var c=a.ownerDocument.createElementNS("http://www.w3.org/2000/svg",b);a.appendChild(c);return c}function h(a,b){var c=g(a,"g");g(c,b).setAttribute("class","shape");g(c,"text").setAttribute("class","shapeLabel");return c}return{Point:a,Shape:b,Circle:c,Rectangle:d,Polygon:e,NullShape:f,createSvgElement:g,make:function make(a,b){switch(a){case"circle":return new c(b);case"rectangle":return new d(b);case"polygon":return new e(b);default:return new f(b);}},getSimilar:function getSimilar(a,b){if(a===b.getType()){return b}switch(a){case"circle":return b.makeSimilarCircle();case"rectangle":return b.makeSimilarRectangle();case"polygon":return b.makeSimilarPolygon();default:return new f(b.label);}}}});
define ("qtype_ddwtos/ddwtos",["jquery","core/dragdrop","core/key_codes"],function(a,b,c){"use strict";function d(a,b){this.containerId=a;if(b){this.getRoot().addClass("qtype_ddwtos-readonly")}this.resizeAllDragsAndDrops();this.cloneDrags();this.positionDrags()}d.prototype.resizeAllDragsAndDrops=function(){var b=this;this.getRoot().find(".answercontainer > div").each(function(c,d){b.resizeAllDragsAndDropsInGroup(b.getClassnameNumericSuffix(a(d),"draggrouphomes"))})};d.prototype.resizeAllDragsAndDropsInGroup=function(a){var b=this,c=this.getRoot().find(".draggrouphomes"+a+" span.draghome"),d=0,e=0;c.each(function(a,b){d=Math.max(d,Math.ceil(b.offsetWidth));e=Math.max(e,Math.ceil(0+b.offsetHeight))});d+=8;e+=2;c.each(function(a,c){b.setElementSize(c,d,e)});this.getRoot().find("span.drop.group"+a).each(function(a,c){b.setElementSize(c,d,e)})};d.prototype.setElementSize=function(b,c,d){a(b).width(c).height(d).css("lineHeight",d+"px")};d.prototype.cloneDrags=function(){var b=this;this.getRoot().find("span.draghome").each(function(c,d){b.cloneDragsForOneChoice(a(d))})};d.prototype.cloneDragsForOneChoice=function(a){if(a.hasClass("infinite")){for(var b=this.noOfDropsInGroup(this.getGroup(a)),c=0;c<b;c++){this.cloneDrag(a)}}else{this.cloneDrag(a)}};d.prototype.cloneDrag=function(a){var b=a.clone();b.removeClass("draghome").addClass("drag unplaced moodle-has-zindex").offset(a.offset());this.getRoot().find("div.drags").append(b)};d.prototype.positionDrags=function(){var b=this,c=this.getRoot();c.find("span.drag").each(function(c,d){var e=a(d),f=b.getClassnameNumericSuffix(e,"inplace");e.addClass("unplaced").removeClass("placed").offset(b.getDragHome(b.getGroup(e),b.getChoice(e)).offset());if(null!==f){e.removeClass("inplace"+f)}});c.find("input.placeinput").each(function(d,e){var f=a(e),g=f.val(),h=b.getPlace(f),i=c.find(".drop.place"+h),j=i.offset();i.data("prev-top",j.top).data("prev-left",j.left);if("0"===g){return}b.getUnplacedChoice(b.getGroup(f),g).removeClass("unplaced").addClass("placed inplace"+h).offset(c.find(".drop.place"+h).offset())})};d.prototype.fixLayoutIfDropsMoved=function(){var b=this,c=this.getRoot(),d=!1;c.find("input.placeinput").each(function(e,f){var g=b.getPlace(a(f)),h=c.find(".drop.place"+g),i=h.offset(),j=h.data("prev-top"),k=h.data("prev-left");if(k===void 0||j===void 0){return}if(j===i.top&&k===i.left){return}d=!0});if(d){this.positionDrags()}};d.prototype.handleDragStart=function(c){var d=this,e=a(c.target).closest(".drag"),f=b.prepare(c);if(!f.start){return}var g=this.getClassnameNumericSuffix(e,"inplace");if(null!==g){this.setInputValue(g,0);e.removeClass("inplace"+g)}e.addClass("beingdragged");b.start(c,e,function(a,b,c){d.dragMove(a,b,c)},function(a,b,c){d.dragEnd(a,b,c)})};d.prototype.dragMove=function(b,c,d){var e=this;this.getRoot().find("span.drop.group"+this.getGroup(d)).each(function(d,f){var g=a(f);if(e.isPointInDrop(b,c,g)){g.addClass("valid-drag-over-drop")}else{g.removeClass("valid-drag-over-drop")}})};d.prototype.dragEnd=function(b,c,d){var e=this,f=this.getRoot(),g=!1;f.find("span.drop.group"+this.getGroup(d)).each(function(f,h){var i=a(h);if(!e.isPointInDrop(b,c,i)){return!0}i.removeClass("valid-drag-over-drop");e.sendDragToDrop(d,i);g=!0;return!1});if(!g){this.sendDragHome(d)}};d.prototype.sendDragToDrop=function(a,b){var c=this.getCurrentDragInPlace(this.getPlace(b));if(0!==c.length){this.sendDragHome(c)}if(0===a.length){this.setInputValue(this.getPlace(b),0)}else{this.setInputValue(this.getPlace(b),this.getChoice(a));a.removeClass("unplaced").addClass("placed inplace"+this.getPlace(b));this.animateTo(a,b)}};d.prototype.sendDragHome=function(a){a.removeClass("placed").addClass("unplaced");var b=this.getClassnameNumericSuffix(a,"inplace");if(null!==b){a.removeClass("inplace"+b)}this.animateTo(a,this.getDragHome(this.getGroup(a),this.getChoice(a)))};d.prototype.handleKeyPress=function(b){var d=a(b.target).closest(".drop"),e=this.getCurrentDragInPlace(this.getPlace(d)),f=a();switch(b.keyCode){case c.space:case c.arrowRight:case c.arrowDown:f=this.getNextDrag(this.getGroup(d),e);break;case c.arrowLeft:case c.arrowUp:f=this.getPreviousDrag(this.getGroup(d),e);break;case c.escape:break;default:return;}b.preventDefault();this.sendDragToDrop(f,d)};d.prototype.getNextDrag=function(a,b){var c,d=this.noOfChoicesInGroup(a);if(0===b.length){c=1}else{c=this.getChoice(b)+1}var e=this.getUnplacedChoice(a,c);while(0===e.length&&c<d){c++;e=this.getUnplacedChoice(a,c)}return e};d.prototype.getPreviousDrag=function(a,b){var c;if(0===b.length){c=this.noOfChoicesInGroup(a)}else{c=this.getChoice(b)-1}var d=this.getUnplacedChoice(a,c);while(0===d.length&&1<c){c--;d=this.getUnplacedChoice(a,c)}return d};d.prototype.animateTo=function(a,b){var c=a.offset(),d=b.offset();a.addClass("beingdragged");a.animate({left:parseInt(a.css("left"))+d.left-c.left,top:parseInt(a.css("top"))+d.top-c.top},{duration:"fast",done:function done(){a.removeClass("beingdragged");a.offset(d)}})};d.prototype.isPointInDrop=function(a,b,c){var d=c.offset();return a>=d.left&&a<d.left+c.width()&&b>=d.top&&b<d.top+c.height()};d.prototype.setInputValue=function(a,b){this.getRoot().find("input.placeinput.place"+a).val(b)};d.prototype.getRoot=function(){return a(document.getElementById(this.containerId))};d.prototype.getDragHome=function(a,b){return this.getRoot().find(".draghome.group"+a+".choice"+b)};d.prototype.getUnplacedChoice=function(a,b){return this.getRoot().find(".drag.group"+a+".choice"+b+".unplaced").slice(0,1)};d.prototype.getCurrentDragInPlace=function(a){return this.getRoot().find("span.drag.inplace"+a)};d.prototype.noOfDropsInGroup=function(a){return this.getRoot().find(".drop.group"+a).length};d.prototype.noOfChoicesInGroup=function(a){return this.getRoot().find(".draghome.group"+a).length};d.prototype.getClassnameNumericSuffix=function(a,b){var c=a.attr("class");if(""!==c){for(var d=c.split(" "),e=0,f;e<d.length;e++){f=new RegExp("^"+b+"([0-9])+$");if(f.test(d[e])){var g=/([0-9])+$/,h=g.exec(d[e]);return+h[0]}}}return null};d.prototype.getChoice=function(a){return this.getClassnameNumericSuffix(a,"choice")};d.prototype.getGroup=function(a){return this.getClassnameNumericSuffix(a,"group")};d.prototype.getPlace=function(a){return this.getClassnameNumericSuffix(a,"place")};var f={eventHandlersInitialised:!1,questions:{},init:function init(a,b){f.questions[a]=new d(a,b);if(!f.eventHandlersInitialised){f.setupEventHandlers();f.eventHandlersInitialised=!0}},setupEventHandlers:function setupEventHandlers(){a("body").on("mousedown touchstart",".que.ddwtos:not(.qtype_ddwtos-readonly) span.drag",f.handleDragStart).on("keydown",".que.ddwtos:not(.qtype_ddwtos-readonly) span.drop",f.handleKeyPress);a(window).on("resize",f.handleWindowResize);setTimeout(f.fixLayoutIfThingsMoved,100)},handleDragStart:function handleDragStart(a){a.preventDefault();var b=f.getQuestionForEvent(a);if(b){b.handleDragStart(a)}},handleKeyPress:function handleKeyPress(a){var b=f.getQuestionForEvent(a);if(b){b.handleKeyPress(a)}},handleWindowResize:function handleWindowResize(){for(var a in f.questions){if(f.questions.hasOwnProperty(a)){f.questions[a].positionDrags()}}},fixLayoutIfThingsMoved:function fixLayoutIfThingsMoved(){for(var a in f.questions){if(f.questions.hasOwnProperty(a)){f.questions[a].fixLayoutIfDropsMoved()}}setTimeout(f.fixLayoutIfThingsMoved,100)},getQuestionForEvent:function getQuestionForEvent(b){var c=a(b.currentTarget).closest(".que.ddwtos").attr("id");return f.questions[c]}};return{init:f.init}});
define ("qtype_multichoice/clearchoice",["jquery","core/custom_interaction_events"],function(a,b){var c={ANSWER_RADIOS:".answer input",CLEARRESULTS_LINK:"a[data-action=\"clearresults\"]"},d="d-none",e=function(f){var g=f.find(c.CLEARRESULTS_LINK);f.on(b.events.activate,c.CLEARRESULTS_LINK,function(b,e){f.find(c.ANSWER_RADIOS).each(function(){a(this).prop("checked",!1)});a(b.target).addClass(d);e.originalEvent.preventDefault()});f.on(b.events.activate,c.ANSWER_RADIOS,function(){g.removeClass(d)})};return{init:function init(b){b=a("#"+b);e(b)}}});
define('qtype_ubmultichoice/emptyRadio', ["jquery"],function(e){return{init:function(n){var c=document.getElementsByName(n),t=e.escapeSelector(n);e("#"+t).click(function(){for(var n=0;n<c.length;n++)e("#"+t+n).prop("checked",!1)})}}});
define('qtype_ubtruefalse/emptyRadio', ["jquery"],function(a){return{init:function(b){var c=a.escapeSelector(b);a("#"+c).click(function(){a("#"+c+"false").prop("checked",!1),a("#"+c+"true").prop("checked",!1)})}}});
define ("mod_assign/participant_selector",["core/ajax","jquery","core/templates"],function(a,b,c){return{processResults:function processResults(a,b){return b},transport:function transport(d,e,f,g){var h=b(d).attr("data-assignmentid"),i=b(d).attr("data-groupid"),j=b("[data-region=\"configure-filters\"] input[type=\"checkbox\"]"),k=[];j.each(function(a,c){k[b(c).attr("name")]=b(c).prop("checked")});a.call([{methodname:"mod_assign_list_participants",args:{assignid:h,groupid:i,filter:e,limit:30,includeenrolments:!1,tablesort:!0}}])[0].then(function(a){var d=[],e=b("[data-showuseridentity]").data("showuseridentity").split(",");b.each(a,function(a,f){var g=f,h=[],i=!0;if(k.filter_submitted&&!f.submitted){i=!1}if(k.filter_notsubmitted&&f.submitted){i=!1}if(k.filter_requiregrading&&!f.requiregrading){i=!1}if(k.filter_grantedextension&&!f.grantedextension){i=!1}if(i){b.each(e,function(a,b){if("undefined"!=typeof f[b]&&""!==f[b]){g.hasidentity=!0;h.push(f[b])}});g.identity=h.join(", ");d.push(c.render("mod_assign/list_participant_user_summary",g).then(function(a){return{value:f.id,label:a}}))}});return b.when.apply(b,d)}).then(function(){var a=[];if(arguments[0]){a=Array.prototype.slice.call(arguments)}f(a)}).catch(g)}}});
define ("mod_assign/override_form",["exports","jquery"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;b=function(a){return a&&a.__esModule?a:{default:a}}(b);var c=function(a,c){var d=document.getElementById(a),e=d.querySelector("[name=\"".concat(c,"\"]"));(0,b.default)(e).on("change",function(){var a=document.createElement("input");a.setAttribute("type","hidden");a.setAttribute("name","userchange");a.setAttribute("value",!0);d.appendChild(a);if("undefined"!=typeof M.core_formchangechecker){M.core_formchangechecker.reset_form_dirty_state()}d.submit()})};a.init=c});
define ("mod_assign/grading_actions",["jquery","mod_assign/grading_events"],function(a,b){var c=function(b){this._regionSelector=b;this._region=a(b);this.registerEventListeners()};c.prototype._regionSelector=null;c.prototype._lastUserId=0;c.prototype._region=null;c.prototype._showActionsForm=function(a,b){var c=this._region.find("[data-region=grading-actions-form]");if(b!=this._lastUserId&&0<b){this._lastUserId=b}if(0<b){c.removeClass("hide")}else{c.addClass("hide")}};c.prototype._trigger=function(b){a(document).trigger(b)};c.prototype.getReviewPanelElement=function(){return a("[data-region=\"review-panel\"]")};c.prototype.hasReviewPanelElement=function(){return 0<this.getReviewPanelElement().length};c.prototype.getCollapseGradePanelButton=function(){return a("[data-region=\"grade-actions\"] .collapse-grade-panel")};c.prototype.getCollapseReviewPanelButton=function(){return a("[data-region=\"grade-actions\"] .collapse-review-panel")};c.prototype.getExpandAllPanelsButton=function(){return a("[data-region=\"grade-actions\"] .collapse-none")};c.prototype.resetLayoutButtons=function(){this.getCollapseGradePanelButton().removeClass("active");this.getCollapseReviewPanelButton().removeClass("active");this.getExpandAllPanelsButton().removeClass("active")};c.prototype.collapseReviewPanel=function(){a(document).trigger(b.COLLAPSE_REVIEW_PANEL);a(document).trigger(b.EXPAND_GRADE_PANEL);this.resetLayoutButtons();this.getCollapseReviewPanelButton().addClass("active")};c.prototype.collapseGradePanel=function(){a(document).trigger(b.COLLAPSE_GRADE_PANEL);a(document).trigger(b.EXPAND_REVIEW_PANEL);this.resetLayoutButtons();this.getCollapseGradePanelButton().addClass("active")};c.prototype.expandAllPanels=function(){a(document).trigger(b.EXPAND_GRADE_PANEL);a(document).trigger(b.EXPAND_REVIEW_PANEL);this.resetLayoutButtons();this.getExpandAllPanelsButton().addClass("active")};c.prototype.registerEventListeners=function(){if(this.hasReviewPanelElement()){var b=this.getCollapseReviewPanelButton();b.click(function(a){this.collapseReviewPanel();a.preventDefault()}.bind(this));b.keydown(function(a){if(!a.metaKey&&!a.shiftKey&&!a.altKey&&!a.ctrlKey){if(13===a.keyCode||32===a.keyCode){this.collapseReviewPanel();a.preventDefault()}}}.bind(this));var c=this.getCollapseGradePanelButton();c.click(function(a){this.collapseGradePanel();a.preventDefault()}.bind(this));c.keydown(function(a){if(!a.metaKey&&!a.shiftKey&&!a.altKey&&!a.ctrlKey){if(13===a.keyCode||32===a.keyCode){this.collapseGradePanel();a.preventDefault()}}}.bind(this));var d=this.getExpandAllPanelsButton();d.click(function(a){this.expandAllPanels();a.preventDefault()}.bind(this));d.keydown(function(a){if(!a.metaKey&&!a.shiftKey&&!a.altKey&&!a.ctrlKey){if(13===a.keyCode||32===a.keyCode){this.expandAllPanels();a.preventDefault()}}}.bind(this))}a(document).on("user-changed",this._showActionsForm.bind(this));this._region.find("[name=\"savechanges\"]").on("click",this._trigger.bind(this,"save-changes"));this._region.find("[name=\"saveandshownext\"]").on("click",this._trigger.bind(this,"save-and-show-next"));this._region.find("[name=\"resetbutton\"]").on("click",this._trigger.bind(this,"reset"));this._region.find("form").on("submit",function(a){a.preventDefault()})};return c});
define ("mod_assign/grading_navigation_user_info",["jquery","core/notification","core/ajax","core/templates"],function(a,b,c,d){var e=function(b){this._regionSelector=b;this._region=a(b);this._userCache={};a(document).on("user-changed",this._refreshUserInfo.bind(this))};e.prototype._regionSelector=null;e.prototype._userCache=null;e.prototype._region=null;e.prototype._lastUserId=0;e.prototype._getAssignmentId=function(){return this._region.attr("data-assignmentid")};e.prototype._refreshUserInfo=function(e,f){var g=a.Deferred();this._region.attr("data-userid",f);if(this._lastUserId==f){return}this._lastUserId=f;d.render("mod_assign/loading",{}).done(function(e,h){this._region.fadeOut("fast",function(){d.replaceNodeContents(this._region,e,h);this._region.fadeIn("fast")}.bind(this));if(0>f){d.render("mod_assign/grading_navigation_no_users",{}).done(function(a,b){if(f==this._lastUserId){this._region.fadeOut("fast",function(){d.replaceNodeContents(this._region,a,b);this._region.fadeIn("fast")}.bind(this))}}.bind(this)).fail(b.exception);return}if("undefined"!=typeof this._userCache[f]){g.resolve(this._userCache[f])}else{var i=this._getAssignmentId(),j=c.call([{methodname:"mod_assign_get_participant",args:{userid:f,assignid:i,embeduser:!0}}]);j[0].done(function(a){if(!a.hasOwnProperty("id")){g.reject("No users")}else{this._userCache[f]=a;g.resolve(this._userCache[f])}}.bind(this)).fail(b.exception)}g.done(function(c){var e=a("[data-showuseridentity]").data("showuseridentity").split(","),g=[];c.courseid=a("[data-region=\"grading-navigation-panel\"]").attr("data-courseid");if(c.user){a.each(e,function(a,b){if("undefined"!=typeof c.user[b]&&""!==c.user[b]){c.hasidentity=!0;g.push(c.user[b])}});c.identity=g.join(", ");if(c.user.profileimageurl){c.profileimageurl=c.user.profileimageurl}}d.render("mod_assign/grading_navigation_user_summary",c).done(function(a,b){if(f==this._lastUserId){this._region.fadeOut("fast",function(){d.replaceNodeContents(this._region,a,b);this._region.fadeIn("fast")}.bind(this))}}.bind(this)).fail(b.exception)}.bind(this)).fail(function(){d.render("mod_assign/grading_navigation_no_users",{}).done(function(a,b){this._region.fadeOut("fast",function(){d.replaceNodeContents(this._region,a,b);this._region.fadeIn("fast")}.bind(this))}.bind(this)).fail(b.exception)}.bind(this))}.bind(this)).fail(b.exception)};return e});
define ("mod_assign/grading_panel",["jquery","core/yui","core/notification","core/templates","core/fragment","core/ajax","core/str","mod_assign/grading_form_change_checker","mod_assign/grading_events","core/event"],function(a,b,c,d,e,f,g,h,i,j){var k=function(b){this._regionSelector=b;this._region=a(b);this._userCache=[];this.registerEventListeners()};k.prototype._regionSelector=null;k.prototype._lastUserId=0;k.prototype._lastAttemptNumber=-1;k.prototype._region=null;k.prototype.nextUserId=null;k.prototype.nextUser=!1;k.prototype._niceReplaceNodeContents=function(b,c,e){var f=a.Deferred();b.fadeOut("fast",function(){d.replaceNodeContents(b,c,e);b.fadeIn("fast",function(){f.resolve()})});return f.promise()};k.prototype._saveFormState=function(){var b=a("[data-region=\"grading-actions-form\"] [name=\"sendstudentnotifications\"]").prop("checked");a(".gradeform [name=\"sendstudentnotifications\"]").val(b)};k.prototype._submitForm=function(b,d,e){var g=a(this._region.find("form.gradeform"));a("[data-region=\"overlay\"]").show();g.trigger("save-form-state");j.notifyFormSubmitAjax(g[0]);var h=g.serialize(),i=this._region.attr("data-assignmentid");f.call([{methodname:"mod_assign_submit_grading_form",args:{assignmentid:i,userid:this._lastUserId,jsonformdata:JSON.stringify(h)},done:this._handleFormSubmissionResponse.bind(this,h,d,e),fail:c.exception}])};k.prototype._handleFormSubmissionResponse=function(d,e,f,h){if("undefined"==typeof e){e=this._lastUserId}if(h.length){a(document).trigger("reset",[this._lastUserId,d])}else{g.get_strings([{key:"changessaved",component:"core"},{key:"gradechangessaveddetail",component:"mod_assign"}]).done(function(a){c.alert(a[0],a[1])}).fail(c.exception);b.use("moodle-core-formchangechecker",function(){M.core_formchangechecker.reset_form_dirty_state()});if(e==this._lastUserId){a(document).trigger("reset",e)}else if(f){a(document).trigger("done-saving-show-next",!0)}else{a(document).trigger("user-changed",e)}}a("[data-region=\"overlay\"]").hide()};k.prototype._resetForm=function(b,c,d){var e=a.Event("custom");if("undefined"==typeof c){c=this._lastUserId}this._lastUserId=0;this._refreshGradingPanel(e,c,d)};k.prototype._chooseAttempt=function(b){var d=a(b.target),e=d.data("submissions"),f=a(document.getElementById(e)),h=f.clone(),i=h.wrap(a("<form/>")).html();g.get_strings([{key:"viewadifferentattempt",component:"mod_assign"},{key:"view",component:"core"},{key:"cancel",component:"core"}]).done(function(b){c.confirm(b[0],i,b[1],b[2],function(){var b=a("input:radio[name='select-attemptnumber']:checked").val();this._refreshGradingPanel(null,this._lastUserId,"",b)}.bind(this))}.bind(this)).fail(c.exception)};k.prototype._addPopoutButtons=function(b){var e=a(b);d.render("mod_assign/popout_button",{}).done(function(a){var b=e.find("[data-fieldtype=\"filemanager\"],[data-fieldtype=\"editor\"],[data-fieldtype=\"grading\"]").closest(".fitem");b.addClass("has-popout").find("label").parent().append(a);e.on("click","[data-region=\"popout-button\"]",this._togglePopout.bind(this))}.bind(this)).fail(c.exception)};k.prototype._togglePopout=function(b){b.preventDefault();var c=a(b.target).closest(".fitem");if(c.hasClass("popout")){a(".popout").removeClass("popout")}else{a(".popout").removeClass("popout");c.addClass("popout");c.addClass("moodle-has-zindex")}};k.prototype._refreshGradingPanel=function(b,f,g,i){var j=this._region.attr("data-contextid");if("undefined"==typeof g){g=""}if("undefined"==typeof i){i=-1}if(this._lastUserId==f&&this._lastAttemptNumber==i&&""===g){return}this._lastUserId=f;this._lastAttemptNumber=i;a(document).trigger("start-loading-user");window.M.util.js_pending("mod-assign-loading-user");d.render("mod_assign/loading",{}).done(function(b,d){this._niceReplaceNodeContents(this._region,b,d).done(function(){if(0<f){this._region.show();var b={userid:f,attemptnumber:i,jsonformdata:JSON.stringify(g)};e.loadFragment("mod_assign","gradingpanel",j,b).done(function(b,d){this._niceReplaceNodeContents(this._region,b,d).done(function(){h.saveFormState("[data-region=\"grade-panel\"] .gradeform");a(document).on("editor-content-restored",function(){h.saveFormState("[data-region=\"grade-panel\"] .gradeform")});a("[data-region=\"attempt-chooser\"]").on("click",this._chooseAttempt.bind(this));this._addPopoutButtons("[data-region=\"grade-panel\"] .gradeform");a(document).trigger("finish-loading-user");window.M.util.js_complete("mod-assign-loading-user")}.bind(this)).fail(c.exception)}.bind(this)).fail(c.exception);a("[data-region=\"review-panel\"]").show()}else{this._region.hide();a("[data-region=\"review-panel\"]").hide();a(document).trigger("finish-loading-user");window.M.util.js_complete("mod-assign-loading-user")}}.bind(this))}.bind(this)).fail(c.exception)};k.prototype._getNextUser=function(a,b){this.nextUserId=b.nextUserId;this.nextUser=b.nextUser};k.prototype._handleSaveAndShowNext=function(){this._submitForm(null,this.nextUserId,this.nextUser)};k.prototype.getPanelElement=function(){return a("[data-region=\"grade-panel\"]")};k.prototype.collapsePanel=function(){this.getPanelElement().addClass("collapsed")};k.prototype.expandPanel=function(){this.getPanelElement().removeClass("collapsed")};k.prototype.registerEventListeners=function(){var b=a(document),c=a(this._region);c.on("submit","form",function(a){a.preventDefault()});b.on("next-user",this._getNextUser.bind(this));b.on("user-changed",this._refreshGradingPanel.bind(this));b.on("save-changes",this._submitForm.bind(this));b.on("save-and-show-next",this._handleSaveAndShowNext.bind(this));b.on("reset",this._resetForm.bind(this));b.on("save-form-state",this._saveFormState.bind(this));b.on(i.COLLAPSE_GRADE_PANEL,function(){this.collapsePanel()}.bind(this));b.on(i.COLLAPSE_REVIEW_PANEL,function(){this.expandPanel()}.bind(this));b.on(i.EXPAND_GRADE_PANEL,function(){this.expandPanel()}.bind(this))};return k});
define ("mod_assign/grading_events",function(){return{COLLAPSE_REVIEW_PANEL:"grading:collapse-review-panel",EXPAND_REVIEW_PANEL:"grading:expand-review-panel",COLLAPSE_GRADE_PANEL:"grading:collapse-grade-panel",EXPAND_GRADE_PANEL:"grading:expand-grade-panel"}});
define ("mod_assign/grading_review_panel",["jquery","mod_assign/grading_events"],function(a,b){var c=function(){this._region=a("[data-region=\"review-panel-content\"]");this.registerEventListeners()};c.prototype._region=null;c.prototype.getReviewPanel=function(a){var b=this._region.data("panel-owner");if("undefined"==typeof b){this._region.data("review-panel-plugin",a)}if(this._region.data("review-panel-plugin")==a){return this._region[0]}return!1};c.prototype.getTogglePanelButton=function(){return this.getPanelElement().find("[data-region=\"review-panel-toggle\"]")};c.prototype.getPanelElement=function(){return a("[data-region=\"review-panel\"]")};c.prototype.getPanelContentElement=function(){return a("[data-region=\"review-panel-content\"]")};c.prototype.togglePanel=function(){if(this.getPanelElement().hasClass("collapsed")){a(document).trigger(b.EXPAND_REVIEW_PANEL)}else{a(document).trigger(b.COLLAPSE_REVIEW_PANEL)}};c.prototype.collapsePanel=function(){this.getPanelElement().addClass("collapsed").removeClass("grade-panel-collapsed");this.getPanelContentElement().attr("aria-hidden",!0)};c.prototype.expandPanel=function(){this.getPanelElement().removeClass("collapsed");this.getPanelContentElement().removeAttr("aria-hidden")};c.prototype.registerEventListeners=function(){var c=this.getTogglePanelButton();c.click(function(a){this.togglePanel();a.preventDefault()}.bind(this));c.keydown(function(a){if(!a.metaKey&&!a.shiftKey&&!a.altKey&&!a.ctrlKey){if(13===a.keyCode||32===a.keyCode){this.togglePanel();a.preventDefault()}}}.bind(this));var d=a(document);d.on(b.COLLAPSE_REVIEW_PANEL,function(){this.collapsePanel()}.bind(this));d.on(b.COLLAPSE_GRADE_PANEL,function(){this.expandPanel();this.getPanelElement().addClass("grade-panel-collapsed")}.bind(this));d.on(b.EXPAND_REVIEW_PANEL,function(){this.expandPanel()}.bind(this));d.on(b.EXPAND_GRADE_PANEL,function(){this.getPanelElement().removeClass("grade-panel-collapsed")}.bind(this))};return c});
define ("mod_assign/grading_navigation",["jquery","core/notification","core/str","core/form-autocomplete","core/ajax","mod_assign/grading_form_change_checker"],function(a,b,c,d,e,f){var g=function(e){this._regionSelector=e;this._region=a(e);this._filters=[];this._users=[];this._filteredUsers=[];this._lastXofYUpdate=0;this._firstLoadUsers=!0;this._loadAllUsers();this._region.find("[data-action=\"previous-user\"]").on("click",this._handlePreviousUser.bind(this));this._region.find("[data-action=\"next-user\"]").on("click",this._handleNextUser.bind(this));this._region.find("[data-action=\"change-user\"]").on("change",this._handleChangeUser.bind(this));this._region.find("[data-region=\"user-filters\"]").on("click",this._toggleExpandFilters.bind(this));a(document).on("user-changed",this._refreshSelector.bind(this));a(document).on("done-saving-show-next",this._handleNextUser.bind(this));var f=this._region.find("[data-region=\"user-filters\"]"),g=a(document.getElementById(f.attr("aria-controls")));g.on("change","select",this._filterChanged.bind(this));var h=a("[data-region=\"grading-navigation-panel\"]").data("first-userid");if(h){this._selectUserById(h)}c.get_string("changeuser","mod_assign").done(function(a){d.enhance("[data-action=change-user]",!1,"mod_assign/participant_selector",a)}).fail(b.exception);a(document).bind("start-loading-user",function(){this._isLoading=!0}.bind(this));a(document).bind("finish-loading-user",function(){this._isLoading=!1}.bind(this))};g.prototype._isLoading=!1;g.prototype._regionSelector=null;g.prototype._filters=null;g.prototype._users=null;g.prototype._region=null;g.prototype._lastFilters="";g.prototype._loadAllUsers=function(){var a=this._region.find("[data-action=change-user]"),c=a.attr("data-assignmentid"),d=a.attr("data-groupid"),f=this._region.find("[data-region=\"configure-filters\"]"),g=f.find("select[name=\"filter\"]").val(),h=f.find("select[name=\"workflowfilter\"]");if(h){g+=","+h.val()}var i=f.find("select[name=\"markerfilter\"]");if(i){g+=","+i.val()}if(this._lastFilters==g){return!1}this._lastFilters=g;e.call([{methodname:"mod_assign_list_participants",args:{assignid:c,groupid:d,filter:"",onlyids:!0,tablesort:!0},done:this._usersLoaded.bind(this),fail:b.exception}]);return!0};g.prototype._usersLoaded=function(b){this._firstLoadUsers=!1;this._filteredUsers=this._users=b;if(this._users.length){var c=this._region.find("[data-region=\"user-filters\"]"),d=a(document.getElementById(c.attr("aria-controls")));d.find("select[name=\"filter\"]").trigger("change")}else{this._selectNoUser()}this._triggerNextUserEvent()};g.prototype._checkClickOutsideConfigureFilters=function(b){var c=this._region.find("[data-region=\"configure-filters\"]");if(!c.is(b.target)&&0===c.has(b.target).length){var d=this._region.find("[data-region=\"user-filters\"]");c.hide();c.attr("aria-hidden","true");d.attr("aria-expanded","false");a(document).unbind("click.mod_assign_grading_navigation")}};g.prototype._updateFilterPreferences=function(b,c,d){var f=[],g=0;if(0==c.length||this._firstLoadUsers){var h=a.Deferred();h.resolve();return h}for(g=0;g<c.length;g++){var j=c[g];if("none"==j){j=""}f.push({userid:b,name:d[g],value:j})}return e.call([{methodname:"core_user_set_user_preferences",args:{preferences:f}}])[0]};g.prototype._filterChanged=function(){var d=this._region.find("[data-region=\"configure-filters\"]"),e=d.find("select");this._filters=[];e.each(function(b,c){this._filters.push(a(c).val())}.bind(this));var f=[];d.find("option:checked").each(function(b,c){f[f.length]=a(c).text()});if(f.length){this._region.find("[data-region=\"user-filters\"] span").text(f.join(", "))}else{c.get_string("nofilters","mod_assign").done(function(a){this._region.find("[data-region=\"user-filters\"] span").text(a)}.bind(this)).fail(b.exception)}var g=this._region.find("[data-action=change-user]"),h=g.data("currentuserid");this._updateFilterPreferences(h,this._filters,["assign_filter","assign_workflowfilter","assign_markerfilter"]).done(function(){if(!this._loadAllUsers()){var b=parseInt(g.attr("data-selected")),c=0;a.each(this._filteredUsers,function(a,d){if(b==d.id){c=a}});if(this._filteredUsers.length){this._selectUserById(this._filteredUsers[c].id)}else{this._selectNoUser()}}}.bind(this)).fail(b.exception);this._refreshCount()};g.prototype._selectNoUser=function(){if(this._isLoading){return}if(f.checkFormForChanges("[data-region=\"grade-panel\"] .gradeform")){c.get_strings([{key:"unsavedchanges",component:"mod_assign"},{key:"unsavedchangesquestion",component:"mod_assign"},{key:"saveandcontinue",component:"mod_assign"},{key:"cancel",component:"core"}]).done(function(c){b.confirm(c[0],c[1],c[2],c[3],function(){a(document).trigger("save-changes",-1)})})}else{a(document).trigger("user-changed",-1)}};g.prototype._selectUserById=function(d){var e=this._region.find("[data-action=change-user]"),g=parseInt(d,10);if(this._isLoading){return}if(f.checkFormForChanges("[data-region=\"grade-panel\"] .gradeform")){c.get_strings([{key:"unsavedchanges",component:"mod_assign"},{key:"unsavedchangesquestion",component:"mod_assign"},{key:"saveandcontinue",component:"mod_assign"},{key:"cancel",component:"core"}]).done(function(c){b.confirm(c[0],c[1],c[2],c[3],function(){a(document).trigger("save-changes",g)})})}else{e.attr("data-selected",d);if(!isNaN(g)&&0<g){a(document).trigger("user-changed",d)}}};g.prototype._toggleExpandFilters=function(b){b.preventDefault();var c=a(b.target).closest("[data-region=\"user-filters\"]"),d="true"==c.attr("aria-expanded"),e=a(document.getElementById(c.attr("aria-controls")));if(d){e.hide();e.attr("aria-hidden","true");c.attr("aria-expanded","false");a(document).unbind("click.mod_assign_grading_navigation")}else{e.css("display","inline-block");e.attr("aria-hidden","false");c.attr("aria-expanded","true");b.stopPropagation();a(document).on("click.mod_assign_grading_navigation",this._checkClickOutsideConfigureFilters.bind(this))}};g.prototype._handlePreviousUser=function(a){a.preventDefault();var b=this._region.find("[data-action=change-user]"),c=b.attr("data-selected"),d=0,e=0;for(d=0;d<this._filteredUsers.length;d++){if(this._filteredUsers[d].id==c){e=d;break}}var f=this._filteredUsers.length,g=e-1;if(0>g){g=f-1}if(f){this._selectUserById(this._filteredUsers[g].id)}};g.prototype._handleNextUser=function(b,c){b.preventDefault();var d=this._region.find("[data-action=change-user]"),e=d.attr("data-selected"),f=0,g=0;for(f=0;f<this._filteredUsers.length;f++){if(this._filteredUsers[f].id==e){g=f;break}}var h=this._filteredUsers.length,j=(g+1)%h;if(c&&h){var k=this._filteredUsers[j].id,l=parseInt(k,10);d.attr("data-selected",k);if(!isNaN(l)&&0<l){a(document).trigger("user-changed",k)}}else if(h){this._selectUserById(this._filteredUsers[j].id)}};g.prototype._setCountString=function(a,d){var e=0;this._lastXofYUpdate++;e=this._lastXofYUpdate;c.get_string("xofy","mod_assign",{x:a,y:d}).done(function(a){if(e==this._lastXofYUpdate){this._region.find("[data-region=\"user-count-summary\"]").text(a)}}.bind(this)).fail(b.exception)};g.prototype._refreshCount=function(){var a=this._region.find("[data-action=change-user]"),b=a.attr("data-selected"),c=0,d=0;if(isNaN(b)||0>=b){this._region.find("[data-region=\"user-count\"]").hide()}else{this._region.find("[data-region=\"user-count\"]").show();for(c=0;c<this._filteredUsers.length;c++){if(this._filteredUsers[c].id==b){d=c;break}}var e=this._filteredUsers.length;if(e){d+=1}this._setCountString(d,e);if(0<d){var f=new URL(window.location);if(0<parseInt(f.searchParams.get("blindid"))){var g=this._filteredUsers[d-1].recordid;f.searchParams.set("blindid",g)}else{f.searchParams.set("userid",b)}window.history.replaceState({},"",f)}}};g.prototype._refreshSelector=function(a,b){var c=this._region.find("[data-action=change-user]");b=parseInt(b,10);if(!isNaN(b)&&0<b){c.attr("data-selected",b)}this._refreshCount()};g.prototype._triggerNextUserEvent=function(){if(1<this._filteredUsers.length){a(document).trigger("next-user",{nextUserId:null,nextUser:!0})}else{a(document).trigger("next-user",{nextUser:!1})}};g.prototype._handleChangeUser=function(){var d=this._region.find("[data-action=change-user]"),e=parseInt(d.val(),10);if(this._isLoading){return}if(f.checkFormForChanges("[data-region=\"grade-panel\"] .gradeform")){c.get_strings([{key:"unsavedchanges",component:"mod_assign"},{key:"unsavedchangesquestion",component:"mod_assign"},{key:"saveandcontinue",component:"mod_assign"},{key:"cancel",component:"core"}]).done(function(c){b.confirm(c[0],c[1],c[2],c[3],function(){a(document).trigger("save-changes",e)})})}else{if(!isNaN(e)&&0<e){d.attr("data-selected",e);a(document).trigger("user-changed",e)}}};return g});
define ("mod_assign/grading_form_change_checker",["jquery"],function(a){return{saveFormState:function saveFormState(b){a(b).trigger("save-form-state");var c=a(b).serialize();a(b).data("saved-form-state",c)},checkFormForChanges:function checkFormForChanges(b){a(b).trigger("save-form-state");var c=a(b).serialize(),d=a(b).data("saved-form-state");if("undefined"==typeof d){return!1}return d!=c}}});
define('mod_choicegroup/select_all_choices', ["jquery"],function(a){return{init:function(){a(".selectallnone a").on("click",function(b){b.preventDefault(),a("#attemptsform").find("input:checkbox").prop("checked",a(this).data("selectInfo"))})}}});
define('mod_choicegroup/choicegroupdatadisplay', ["jquery","core/str"],function(a,b){return{init:function(){a(".choicegroup-memberdisplay").click(function(c){c.preventDefault(),a(".choicegroups-membersnames").toggleClass("hidden");var d=b.get_string("showgroupmembers","mod_choicegroup"),e=b.get_string("hidegroupmembers","mod_choicegroup");a(".choicegroups-membersnames").is(":visible")?a.when(e).done(function(b){a(".choicegroup-memberdisplay").html(b)}):a.when(d).done(function(b){a(".choicegroup-memberdisplay").html(b)})}),a(".choicegroup-descriptiondisplay").click(function(c){c.preventDefault(),a(".choicegroups-descriptions").toggleClass("hidden");var d=b.get_string("hidedescription","mod_choicegroup"),e=b.get_string("showdescription","mod_choicegroup");a(".choicegroups-descriptions").is(":visible")?a.when(d).done(function(b){a(".choicegroup-descriptiondisplay").html(b)}):a.when(e).done(function(b){a(".choicegroup-descriptiondisplay").html(b)})})}}});
define ("mod_collaborate/collaborate",["jquery"],function(a){var b=function(){return document.queryCommandSupported("copy")||document.queryCommandEnabled("copy")},c=function(){if(document.selection){document.selection.empty()}else{var a=window.getSelection();a.removeAllRanges()}},d=function(b){if(b instanceof a){b=b[0]}if(b.select){b.select();document.execCommand("copy");c();return}var d=document,e,f;if(d.body.createTextRange){e=document.body.createTextRange();e.moveToElementText(b);e.select();document.execCommand("copy");c()}else if(window.getSelection){f=window.getSelection();e=document.createRange();e.selectNodeContents(b);f.removeAllRanges();f.addRange(e);document.execCommand("copy");c()}},e=function(){if(b()){a(".copyablelink").addClass("enabled");a(".copyablelink button").click(function(b){b.preventDefault();d(a(this).parent("form").find("input"));a(this).parent("form").addClass("copied");a(this).parent("form").find("div").focus()})}};return{init:function init(){e()}}});
define ("mod_collaborate/settings",["jquery","core/str"],function(a,b){return{init:function init(c){var d=!1,e=!1,f={},g=function(b){for(var c in b){var d=b[c],e=""+a("#id_s_collaborate_"+d).val().trim();if(""===e){return!1}}return!0},h=function(){return g(["restserver","restkey","restsecret"])},i=function(){return g(["server","username","password"])},j=function(b,c,d){var e=f[b],g=a("#api_diag .noticetemplate_"+c).children().first().clone();a(g).addClass(d);a(g).html("<span class=\"api-connection-msg\">"+e+"</span>");a("#api_diag .api-connection-status").empty();a("#api_diag .api-connection-status").append(a(g))},k=function(){j("verifyingapi","message","spinner");var b;if(h()){b={server:a("#id_s_collaborate_restserver").val().trim(),restkey:a("#id_s_collaborate_restkey").val().trim(),restsecret:a("#id_s_collaborate_restsecret").val()}}else{b={server:a("#id_s_collaborate_server").val().trim(),username:a("#id_s_collaborate_username").val().trim(),password:a("#id_s_collaborate_password").val()}}b.contextid=c;a.ajax({url:M.cfg.wwwroot+"/mod/collaborate/testapi.php",context:document.body,data:b,success:function success(a){if(a.success){if(!d){j("connectionverified","success")}else{j("connectionverifiedchanged","success")}}else{j("connectionfailed","problem")}},error:function error(){j("connectionfailed","problem")}})},l=function(){a(".api_diag_btn").click(function(a){a.preventDefault();k()})},m=function(){a("#id_s_collaborate_server, #id_s_collaborate_username, #id_s_collaborate_password").keypress(function(){d=!0})};b.get_strings([{key:"connectionfailed",component:"mod_collaborate"},{key:"connectionverified",component:"mod_collaborate"},{key:"verifyingapi",component:"mod_collaborate"},{key:"connectionstatusunknown",component:"mod_collaborate"}]).then(function(b){f.connectionfailed=b[0];f.connectionverified=b[1];f.verifyingapi=b[2];f.connectionstatusunknown=b[3];if(!e){j("connectionstatusunknown","message")}m();l();if(""!==i()||""!==h()){k()}if(/Edge\/\d./i.test(navigator.userAgent)||/MSIE/i.test(navigator.userAgent)||/Trident/i.test(navigator.userAgent)){a("fieldset[disabled=\"true\"] input").attr("disabled","true")}if(!h()){a(".soapapisettings").css("display","block")}e=!0})}}});
define('mod_customcert/rearrange-area', ["jquery","core/yui","core/fragment","mod_customcert/dialogue","core/notification","core/str","core/templates","core/ajax"],function(a,b,c,d,e,f,g,h){var i=function(b){this._node=a(b),this._setEvents()};return i.prototype.CUSTOMCERT_REF_POINT_TOPLEFT=0,i.prototype.CUSTOMCERT_REF_POINT_TOPCENTER=1,i.prototype.CUSTOMCERT_REF_POINT_TOPRIGHT=2,i.prototype.PIXELSINMM=3.779527559055,i.prototype._setEvents=function(){this._node.on("click",".element",this._editElement.bind(this))},i.prototype._editElement=function(a){var g=a.currentTarget.id.substr(8),h=this._node.attr("data-contextid"),i={elementid:g};c.loadFragment("mod_customcert","editelement",h,i).done(function(a,c){f.get_string("editelement","mod_customcert").done(function(e){b.use("moodle-core-formchangechecker",function(){new d(e,"<div id='elementcontent'></div>",this._editElementDialogueConfig.bind(this,g,a,c),(void 0),(!0))}.bind(this))}.bind(this))}.bind(this)).fail(e.exception)},i.prototype._editElementDialogueConfig=function(b,c,d,f){g.replaceNode("#elementcontent",c,d),this._setPositionInForm(b);var h=a(f.getContent());h.on("click","#id_submitbutton",function(c){M.core_formchangechecker.reset_form_dirty_state(),this._saveElement(b).then(function(){this._getElementHTML(b).done(function(c){var d=this._node.find("#element-"+b),e=parseInt(a("#id_refpoint").val()),g="";e==this.CUSTOMCERT_REF_POINT_TOPLEFT?g="refpoint-left":e==this.CUSTOMCERT_REF_POINT_TOPCENTER?g="refpoint-center":e==this.CUSTOMCERT_REF_POINT_TOPRIGHT&&(g="refpoint-right"),d.empty().append(c),d.removeClass(),d.addClass("element "+g),d.attr("data-refpoint",e);var h=a("#editelementform #id_posx").val(),i=a("#editelementform #id_posy").val();this._setPosition(b,e,h,i),f.close()}.bind(this))}.bind(this)).fail(e.exception),c.preventDefault()}.bind(this)),h.on("click","#id_cancel",function(a){f.close(),a.preventDefault()})},i.prototype._setPosition=function(a,c,d,e){var f=b.one("#element-"+a);d=b.one("#pdf").getX()+d*this.PIXELSINMM,e=b.one("#pdf").getY()+e*this.PIXELSINMM;var g=parseFloat(f.getComputedStyle("width")),h=f.width*this.PIXELSINMM;switch(h&&g>h&&(g=h),c){case this.CUSTOMCERT_REF_POINT_TOPCENTER:d-=g/2;break;case this.CUSTOMCERT_REF_POINT_TOPRIGHT:d=d-g+2}f.setX(d),f.setY(e)},i.prototype._setPositionInForm=function(c){var d=a("#editelementform #id_posx"),e=a("#editelementform #id_posy");if(d.length&&e.length){var f=b.one("#element-"+c),g=f.getX()-b.one("#pdf").getX(),h=f.getY()-b.one("#pdf").getY(),i=parseInt(f.getData("refpoint")),j=parseFloat(f.getComputedStyle("width"));switch(i){case this.CUSTOMCERT_REF_POINT_TOPCENTER:g+=j/2;break;case this.CUSTOMCERT_REF_POINT_TOPRIGHT:g+=j}g=Math.round(parseFloat(g/this.PIXELSINMM)),h=Math.round(parseFloat(h/this.PIXELSINMM)),d.val(g),e.val(h)}},i.prototype._getElementHTML=function(a){var b=this._node.attr("data-templateid"),c=h.call([{methodname:"mod_customcert_get_element_html",args:{templateid:b,elementid:a}}]);return c[0]},i.prototype._saveElement=function(b){var c=this._node.attr("data-templateid"),d=a("#editelementform").serializeArray(),e=h.call([{methodname:"mod_customcert_save_element",args:{templateid:c,elementid:b,values:d}}]);return e[0]},{init:function(a){new i(a)}}});
define('mod_customcert/dialogue', ["core/yui"],function(a){var b=function(b,c,d,e,f){this.yuiDialogue=null;var g=this;"undefined"==typeof f&&(f=!1),a.use("moodle-core-notification","timers",function(){var h="480px";f&&(h="800px"),g.yuiDialogue=new M.core.dialogue({headerContent:b,bodyContent:c,draggable:!0,visible:!1,center:!0,modal:!0,width:h}),g.yuiDialogue.after("visibleChange",function(b){b.newVal?"undefined"!=typeof d&&a.soon(function(){d(g),g.yuiDialogue.centerDialogue()}):"undefined"!=typeof e&&a.soon(function(){e(g)})}),g.yuiDialogue.show()})};return b.prototype.close=function(){this.yuiDialogue.hide(),this.yuiDialogue.destroy()},b.prototype.getContent=function(){return this.yuiDialogue.bodyNode.getDOMNode()},b});
define ("mod_feedback/edit",["jquery","core/ajax","core/str","core/notification"],function(a,b,c,d){var e={deleteItem:function deleteItem(b){b.preventDefault();var e=a(b.currentTarget).attr("href");c.get_strings([{key:"confirmation",component:"admin"},{key:"confirmdeleteitem",component:"mod_feedback"},{key:"yes",component:"moodle"},{key:"no",component:"moodle"}]).then(function(a){d.confirm(a[0],a[1],a[2],a[3],function(){window.location=e})}).catch()},setup:function setup(){a("body").delegate("[data-action=\"delete\"]","click",e.deleteItem)}};return{setup:e.setup}});
define ("mod_forum/pin_toggle",["jquery","core/ajax","core/str","core/templates","core/notification","mod_forum/repository","mod_forum/selectors","core/str"],function(a,b,c,d,f,g,h,i){return{init:function registerEventListeners(b,c,d){b.on("click",h.pin.toggle,function(b){var e=a(this),h=e.data("forumid"),j=e.data("discussionid"),k=e.data("targetstate");g.setPinDiscussionState(h,j,k).then(function(a){return d(e,a)}).then(function(){return i.get_string("pinupdated","forum").done(function(a){return f.addNotification({message:a,type:"info"})})}).fail(f.exception);if(c){b.preventDefault()}})}}});
define ("mod_forum/repository",["core/ajax"],function(a){return{setDiscussionSubscriptionState:function setDiscussionSubscriptionState(b,c,d){return a.call([{methodname:"mod_forum_set_subscription_state",args:{forumid:b,discussionid:c,targetstate:d}}])[0]},addDiscussionPost:function addDiscussionPost(b,c,d,e,f,g){return a.call([{methodname:"mod_forum_add_discussion_post",args:{postid:b,message:d,messageformat:e,subject:c,options:[{name:"private",value:f},{name:"topreferredformat",value:g}]}}])[0]},setDiscussionLockState:function setDiscussionLockState(b,c,d){return a.call([{methodname:"mod_forum_set_lock_state",args:{forumid:b,discussionid:c,targetstate:d}}])[0]},setFavouriteDiscussionState:function setFavouriteDiscussionState(b,c,d){return a.call([{methodname:"mod_forum_toggle_favourite_state",args:{discussionid:c,targetstate:d}}])[0]},setPinDiscussionState:function setPinDiscussionState(b,c,d){return a.call([{methodname:"mod_forum_set_pin_state",args:{discussionid:c,targetstate:d}}])[0]},getDiscussionByUserID:function getDiscussionByUserID(b,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"modified",e=3<arguments.length&&arguments[3]!==void 0?arguments[3]:"DESC";return a.call([{methodname:"mod_forum_get_discussion_posts_by_userid",args:{userid:b,cmid:c,sortby:d,sortdirection:e}}])[0]},getDiscussionPosts:function getDiscussionPosts(b){var c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"created",d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"ASC";return a.call([{methodname:"mod_forum_get_discussion_posts",args:{discussionid:b,sortby:c,sortdirection:d}}])[0]}}});
define ("mod_forum/local/layouts",["exports","./layout/fullscreen"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});Object.defineProperty(a,"createFullScreenWindow",{enumerable:!0,get:function get(){return b.createLayout}})});
define ("mod_forum/local/layout/fullscreen",["exports","core/loadingicon","core/toast","core/local/aria/focuslock"],function(a,b,c,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.createLayout=void 0;d=function(a){if(a&&a.__esModule){return a}else{var b={};if(null!=a){for(var c in a){if(Object.prototype.hasOwnProperty.call(a,c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,c):{};if(d.get||d.set){Object.defineProperty(b,c,d)}else{b[c]=a[c]}}}}b.default=a;return b}}(d);var e=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=a.fullscreen,e=void 0===b?!0:b,h=a.showLoader,i=void 0===h?!1:h,j=a.focusOnClose,k=void 0===j?null:j,l=document.createElement("div");document.body.append(l);l.classList.add("layout");l.classList.add("fullscreen");l.setAttribute("role","application");(0,c.addToastRegion)(l);g();d.trapFocus(l);var m=f(l,d,k);if(i){m.showLoadingIcon()}if(e){m.requestFullscreen()}return m},f=function(a,c,d){var e=document.createElement("div");a.append(e);var f=document.createElement("div");a.append(f);var g=function(){if(a.requestFullscreen){a.requestFullscreen()}else if(a.msRequestFullscreen){a.msRequestFullscreen()}else if(a.mozRequestFullscreen){a.mozRequestFullscreen()}else if(a.webkitRequestFullscreen){a.webkitRequestFullscreen()}else{a.setTop(0)}},i=function(){if(document.exitRequestFullScreen){if(document.fullScreenElement!==a){return}document.exitRequestFullScreen()}else if(document.msExitFullscreen){if(document.msFullscreenElement!==a){return}document.msExitFullscreen()}else if(document.mozCancelFullScreen){if(document.mozFullScreenElement!==a){return}document.mozCancelFullScreen()}else if(document.webkitExitFullscreen){if(document.webkitFullscreenElement!==a){return}document.webkitExitFullscreen()}},j=function(){var a=f.lastElementChild;while(a){f.removeChild(a);a=f.lastElementChild}};return{close:function close(){i();h();c.untrapFocus();a.remove();if(d){try{d.focus()}catch(a){}}},toggleFullscreen:function toggleFullscreen(){if(document.exitRequestFullScreen){if(document.fullScreenElement===a){i()}else{g()}}else if(document.msExitFullscreen){if(document.msFullscreenElement===a){i()}else{g()}}else if(document.mozCancelFullScreen){if(document.mozFullScreenElement===a){i()}else{g()}}else if(document.webkitExitFullscreen){if(document.webkitFullscreenElement===a){i()}else{g()}}},requestFullscreen:g,exitFullscreen:i,getContainer:function getContainer(){return e},setContent:function setContent(a){j();var b=e.lastElementChild;while(b){e.removeChild(b);b=e.lastElementChild}e.append(a)},showLoadingIcon:function showLoadingIcon(){(0,b.addIconToContainer)(f)},hideLoadingIcon:j}},g=function(){document.querySelector("body").classList.add("overflow-hidden")},h=function(){document.querySelector("body").classList.remove("overflow-hidden")};a.createLayout=e});
define ("mod_forum/local/grades/local/grader/user_picker/selectors",["exports"],function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;a.default={regions:{currentUser:"[data-region=\"user_picker/current_user\"]",userRegion:"[data-region=\"user_picker/user\"]"},actions:{changeUser:"[data-action=\"change-user\"]"}};return a.default});
define ("mod_forum/local/grades/local/grader/selectors",["exports"],function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;var b=function(a,b){return"[data-".concat(a,"=\"").concat(b,"\"]")},c={buttons:{toggleFullscreen:b("action","togglefullscreen"),closeGrader:b("action","closegrader"),collapseGradingDrawer:b("action","collapse-grading-drawer"),saveGrade:b("action","savegrade"),selectUser:b("action","select-user"),toggleSearch:b("action","toggle-search")},regions:{bodyContainer:b("region","body-container"),moduleContainer:b("region","module_content_container"),moduleReplace:b("region","module_content"),pickerRegion:b("region","user_picker"),gradingInfoContainer:b("region","grading-info-container"),gradingPanel:b("region","grade"),gradingPanelContainer:b("region","grading-panel-container"),gradingPanelErrors:b("region","grade-errors"),searchResultsContainer:b("region","search-results-container"),statusContainer:b("region","status-container"),userSearchContainer:b("region","user-search-container"),userSearchInput:b("region","user-search-input")},values:{sendStudentNotifications:"[data-region=\"notification\"] input[type=\"radio\"]:checked"}};a.default=c;return a.default});
define ("mod_forum/local/grades/local/grader/user_picker",["exports","core/templates","./user_picker/selectors","core/str"],function(a,b,c,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;b=e(b);c=e(c);function e(a){return a&&a.__esModule?a:{default:a}}function f(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);if("function"==typeof Object.getOwnPropertySymbols){d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))}d.forEach(function(b){g(a,b,c[b])})}return a}function g(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}function h(a,b){return l(a)||k(a,b)||j()}function j(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function k(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done);d=!0){c.push(h.value);if(b&&c.length===b)break}}catch(a){e=!0;f=a}finally{try{if(!d&&null!=g["return"])g["return"]()}finally{if(e)throw f}}return c}function l(a){if(Array.isArray(a))return a}function m(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}if(h.done){b(i)}else{Promise.resolve(i).then(d,e)}}function n(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var h=a.apply(b,c);function f(a){m(h,d,e,f,g,"next",a)}function g(a){m(h,d,e,f,g,"throw",a)}f(void 0)})}}function o(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function p(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function q(a,b,c){if(b)p(a.prototype,b);if(c)p(a,c);return a}var r=function(){function a(b,c,d){o(this,a);this.userList=b;this.showUserCallback=c;this.preChangeUserCallback=d;this.currentUserIndex=0;this.render=this.render.bind(this);this.setUserId=this.setUserId.bind(this)}q(a,[{key:"setUserId",value:function setUserId(a){var b=this.userList.findIndex(function(b){return b.id===parseInt(a)});if(-1===b){throw Error("User with id ".concat(a," not found"))}this.currentUserIndex=b}},{key:"render",value:function(){var a=n(regeneratorRuntime.mark(function a(){var c,d,e;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:this.root=document.createElement("div");a.next=3;return this.renderNavigator();case 3:c=a.sent;d=c.html;e=c.js;b.default.replaceNodeContents(this.root,d,e);a.next=9;return this.showUser(this.currentUser);case 9:this.registerEventListeners();case 10:case"end":return a.stop();}}},a,this)}));return function render(){return a.apply(this,arguments)}}()},{key:"renderNavigator",value:function renderNavigator(){return b.default.renderForPromise("".concat("mod_forum/local/grades/local/grader","/user_picker"),{})}},{key:"renderUserChange",value:function renderUserChange(a){return b.default.renderForPromise("".concat("mod_forum/local/grades/local/grader","/user_picker/user"),a)}},{key:"showUser",value:function(){var a=n(regeneratorRuntime.mark(function a(e){var f,g,i,j,k,l,m;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:a.next=2;return Promise.all([this.renderUserChange(e),this.showUserCallback(e)]);case 2:f=a.sent;g=h(f,1);i=g[0];j=i.html;k=i.js;l=this.root.querySelector(c.default.regions.userRegion);b.default.replaceNodeContents(l,j,k);m=this.root.querySelector(c.default.regions.currentUser);a.next=12;return(0,d.get_string)("nowgradinguser","mod_forum",e.fullname);case 12:m.textContent=a.sent;case 13:case"end":return a.stop();}}},a,this)}));return function showUser(){return a.apply(this,arguments)}}()},{key:"registerEventListeners",value:function registerEventListeners(){var a=this;this.root.addEventListener("click",function(){var b=n(regeneratorRuntime.mark(function b(d){var e,f;return regeneratorRuntime.wrap(function(b){while(1){switch(b.prev=b.next){case 0:e=d.target.closest(c.default.actions.changeUser);if(!e){b.next=9;break}b.next=4;return a.preChangeUserCallback(a.currentUser);case 4:f=b.sent;if(f.failed){b.next=9;break}a.updateIndex(parseInt(e.dataset.direction));b.next=9;return a.showUser(a.currentUser);case 9:case"end":return b.stop();}}},b)}));return function(){return b.apply(this,arguments)}}())}},{key:"updateIndex",value:function updateIndex(a){this.currentUserIndex+=a;if(0>this.currentUserIndex){this.currentUserIndex=this.userList.length-1}else if(this.currentUserIndex>this.userList.length-1){this.currentUserIndex=0}return this.currentUserIndex}},{key:"currentUser",get:function get(){return f({},this.userList[this.currentUserIndex],{total:this.userList.length,displayIndex:this.currentUserIndex+1})}},{key:"rootNode",get:function get(){return this.root}}]);return a}(),s=function(){var a=n(regeneratorRuntime.mark(function a(b,c,d){var e,f,g,h,i=arguments;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:e=3<i.length&&i[3]!==void 0?i[3]:{},f=e.initialUserId,g=void 0===f?null:f;h=new r(b,c,d);if(g){h.setUserId(g)}a.next=5;return h.render();case 5:return a.abrupt("return",h);case 6:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}();a.default=s;return a.default});
define ("mod_forum/local/grades/local/grader/gradingpanel",["exports"],function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;var d="undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof global?global:{};function b(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}if(h.done){b(i)}else{Promise.resolve(i).then(d,e)}}function c(a){return function(){var c=this,d=arguments;return new Promise(function(e,f){var i=a.apply(c,d);function g(a){b(i,e,f,g,h,"next",a)}function h(a){b(i,e,f,g,h,"throw",a)}g(void 0)})}}var e=function(){var a=c(regeneratorRuntime.mark(function a(b,c,e,f,g){var h,i;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:h="".concat(e,"/grades/grader/gradingpanel");if(f){h+="/".concat(f)}a.next=4;return"function"==typeof d.define&&d.define.amd?new Promise(function(a,b){d.require([h],a,b)}):"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require||"undefined"!=typeof module&&module.component&&d.require&&"component"===d.require.loader?Promise.resolve(require((h))):Promise.resolve(d[h]);case 4:i=a.sent;return a.abrupt("return",{getter:function(a){return i.fetchCurrentGrade(b,c,g,a)},setter:function(a,d,e){return i.storeCurrentGrade(b,c,g,a,d,e)}});case 6:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}();a.default=e;return a.default});
define ("mod_forum/local/grades/grader",["exports","core/templates","./local/grader/selectors","./local/grader/user_picker","mod_forum/local/layout/fullscreen","./local/grader/gradingpanel","core/toast","core/notification","core/str","core_grades/grades/grader/gradingpanel/normalise","core/loadingicon","core/utils","core_grades/grades/grader/gradingpanel/comparison","core/modal_factory","core/modal_events","core/pubsub","core/drawer_events"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";Object.defineProperty(a,"__esModule",{value:!0});Object.defineProperty(a,"getGradingPanelFunctions",{enumerable:!0,get:function get(){return f.default}});a.view=a.launch=void 0;b=s(b);c=s(c);d=s(d);f=s(f);n=r(n);o=r(o);q=s(q);function r(a){if(a&&a.__esModule){return a}else{var b={};if(null!=a){for(var c in a){if(Object.prototype.hasOwnProperty.call(a,c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,c):{};if(d.get||d.set){Object.defineProperty(b,c,d)}else{b[c]=a[c]}}}}b.default=a;return b}}function s(a){return a&&a.__esModule?a:{default:a}}function t(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);if("function"==typeof Object.getOwnPropertySymbols){d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))}d.forEach(function(b){u(a,b,c[b])})}return a}function u(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}function v(a,b){return y(a)||x(a,b)||w()}function w(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function x(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done);d=!0){c.push(h.value);if(b&&c.length===b)break}}catch(a){e=!0;f=a}finally{try{if(!d&&null!=g["return"])g["return"]()}finally{if(e)throw f}}return c}function y(a){if(Array.isArray(a))return a}function z(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}if(h.done){b(i)}else{Promise.resolve(i).then(d,e)}}function A(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var h=a.apply(b,c);function f(a){z(h,d,e,f,g,"next",a)}function g(a){z(h,d,e,f,g,"throw",a)}f(void 0)})}}var B={grader:{app:"mod_forum/local/grades/grader",gradingPanel:{error:"mod_forum/local/grades/local/grader/gradingpanel/error"},searchResults:"mod_forum/local/grades/local/grader/user_picker/user_search",status:"mod_forum/local/grades/local/grader/status"}},C=function(a,d){var e=a.querySelector(c.default.regions.pickerRegion);b.default.replaceNodeContents(e,d,"")},D=function(a,b){return[a,b]},E=function(a,d,e,f){var g=!0;return function(){var h=A(regeneratorRuntime.mark(function h(i){var j,l,n,o,p,q,r,s,t,u,w,x,y,z;return regeneratorRuntime.wrap(function(h){while(1){switch(h.prev=h.next){case 0:j=g?null:(0,k.addIconToContainerWithPromise)(a);h.next=3;return Promise.all([d(i.id).then(D),e(i.id)]);case 3:l=h.sent;n=v(l,2);o=v(n[0],2);p=o[0];q=o[1];r=n[1];b.default.replaceNodeContents(a.querySelector(c.default.regions.moduleReplace),p,q);h.next=12;return b.default.render(r.templatename,r.grade).then(D);case 12:s=h.sent;t=v(s,2);u=t[0];w=t[1];x=a.querySelector(c.default.regions.gradingPanelContainer);y=x.querySelector(c.default.regions.gradingPanel);b.default.replaceNodeContents(y,u,w);z=y.querySelector("form");(0,m.fillInitialValues)(z);z.addEventListener("submit",function(a){f(i);a.preventDefault()});x.scrollTop=0;g=!1;if(j){j.resolve()}case 25:case"end":return h.stop();}}},h)}));return function(){return h.apply(this,arguments)}}()},F=function(a,b,c){a.classList.add("hidden");b.classList.add("hidden");c.classList.remove("hidden")},G=function(a,b,c){a.classList.remove("hidden");b.classList.remove("hidden");c.classList.add("hidden")},H=function(a,b,d){b.classList.remove("collapsed");a.setAttribute("aria-expanded","true");a.classList.add("expand");a.classList.remove("collapse");var e=b.parentElement.querySelector(c.default.regions.gradingInfoContainer);e.setAttribute("aria-hidden","true");var f=b.parentElement.querySelector(c.default.buttons.collapseGradingDrawer);f.setAttribute("aria-hidden","true");f.setAttribute("tabindex","-1");d.focus()},I=function(a,b,d){b.classList.add("collapsed");a.setAttribute("aria-expanded","false");a.classList.add("collapse");a.classList.remove("expand");a.focus();var e=b.parentElement.querySelector(c.default.regions.gradingInfoContainer);e.removeAttribute("aria-hidden");var f=b.parentElement.querySelector(c.default.buttons.collapseGradingDrawer);f.removeAttribute("aria-hidden");f.setAttribute("tabindex","0");d.value=""},J=function(a,b){if(""===b){return a}b=b.toLowerCase();return a.filter(function(a){return a.fullname.toLowerCase().includes(b)})},K=function(){var a=A(regeneratorRuntime.mark(function a(c,d){var e,f,g;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:a.next=2;return b.default.renderForPromise(B.grader.searchResults,{users:d});case 2:e=a.sent;f=e.html;g=e.js;b.default.replaceNodeContents(c,f,g);case 6:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}(),L=function(a,b,d,e){var f=a.getContainer(),g=f.querySelector(c.default.buttons.toggleSearch),h=f.querySelector(c.default.regions.userSearchContainer),i=h.querySelector(c.default.regions.userSearchInput),j=f.querySelector(c.default.regions.bodyContainer),k=f.querySelector(c.default.regions.pickerRegion),m=f.querySelector(c.default.regions.searchResultsContainer);f.addEventListener("click",function(f){if(f.target.closest(c.default.buttons.toggleFullscreen)){f.stopImmediatePropagation();f.preventDefault();a.toggleFullscreen();return}if(f.target.closest(c.default.buttons.closeGrader)){f.stopImmediatePropagation();f.preventDefault();a.close();return}if(f.target.closest(c.default.buttons.saveGrade)){d(b.currentUser)}if(f.target.closest(c.default.buttons.toggleSearch)){if("true"===g.getAttribute("aria-expanded")){I(g,h,i);G(j,k,m);m.innerHTML=""}else{H(g,h,i);F(j,k,m);K(m,e)}return}var l=f.target.closest(c.default.buttons.selectUser);if(l){var n=l.getAttribute("data-userid"),o=e.find(function(a){return a.id==n});b.setUserId(n);b.showUser(o);I(g,h,i);G(j,k,m);m.innerHTML=""}});i.addEventListener("input",(0,l.debounce)(function(){var a=J(e,i.value);K(m,a)},300));(0,p.subscribe)(q.default.DRAWER_HIDDEN,function(a){var b=a[0];if(b.querySelector(c.default.regions.gradingPanel)){M(f,0)}});(0,p.subscribe)(q.default.DRAWER_SHOWN,function(a){var b=a[0];if(b.querySelector(c.default.regions.gradingPanel)){M(f,b.offsetWidth)}})},M=function(a,b){var d=a.querySelector(c.default.regions.moduleContainer);if(d){d.style.marginRight="".concat(b,"px")}},N=function(a,b){return function(){var d=A(regeneratorRuntime.mark(function d(e){var f;return regeneratorRuntime.wrap(function(d){while(1){switch(d.prev=d.next){case 0:d.prev=0;a.querySelector(c.default.regions.gradingPanelErrors).innerHTML="";d.next=4;return b(e.id,a.querySelector(c.default.values.sendStudentNotifications).value,a.querySelector(c.default.regions.gradingPanel));case 4:f=d.sent;if(!f.success){d.next=11;break}d.t0=g.add;d.next=9;return(0,i.get_string)("grades:gradesavedfor","mod_forum",e);case 9:d.t1=d.sent;(0,d.t0)(d.t1);case 11:if(f.failed){O(a,e,f.error)}return d.abrupt("return",f);case 15:d.prev=15;d.t2=d["catch"](0);O(a,e,d.t2);return d.abrupt("return",(0,j.failedUpdate)(d.t2));case 19:case"end":return d.stop();}}},d,null,[[0,15]])}));return function(){return d.apply(this,arguments)}}()},O=function(){var a=A(regeneratorRuntime.mark(function a(d,e,f){var h,j,k,l,m,n;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:a.t0=Promise;a.t1=b.default.renderForPromise(B.grader.gradingPanel.error,{error:f});a.next=4;return(0,i.get_string)("grades:gradesavefailed","mod_forum",t({error:f.message},e));case 4:a.t2=a.sent;a.t3=[a.t1,a.t2];a.next=8;return a.t0.all.call(a.t0,a.t3);case 8:h=a.sent;j=v(h,2);k=j[0];l=k.html;m=k.js;n=j[1];b.default.replaceNodeContents(d.querySelector(c.default.regions.gradingPanelErrors),l,m);(0,g.add)(n);case 16:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}(),P=function(){var a=A(regeneratorRuntime.mark(function a(f,g,j,k){var l,m,n,o,p,q,r,s,t,u,w,x,y,z,A,D,F,G,H,I,J,K,M=arguments;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:l=4<M.length&&M[4]!==void 0?M[4]:{},m=l.initialUserId,n=void 0===m?null:m,o=l.moduleName,p=l.courseName,q=l.courseUrl,r=l.sendStudentNotifications,s=l.focusOnClose,t=void 0===s?null:s;a.next=3;return f();case 3:u=a.sent;if(u.length){a.next=12;break}a.t0=h.addNotification;a.next=8;return(0,i.get_string)("nouserstograde","core_grades");case 8:a.t1=a.sent;a.t2={message:a.t1,type:"error"};(0,a.t0)(a.t2);return a.abrupt("return");case 12:a.next=14;return Promise.all([(0,e.createLayout)({fullscreen:!1,showLoader:!1,focusOnClose:t}),b.default.renderForPromise(B.grader.app,{moduleName:o,courseName:p,courseUrl:q,drawer:{show:!0},defaultsendnotifications:r})]);case 14:w=a.sent;x=v(w,2);y=x[0];z=x[1];A=z.html;D=z.js;F=y.getContainer();G=N(F,k);b.default.replaceNodeContents(F,A,D);H=E(F,g,j,G);I=u.map(function(a){return a.id});J=F.querySelector(c.default.regions.statusContainer);a.next=28;return(0,d.default)(u,function(a){var c={status:null,index:I.indexOf(a.id)+1,total:u.length};b.default.render(B.grader.status,c).then(function(a){J.innerHTML=a;return a}).catch();H(a)},G,{initialUserId:n});case 28:K=a.sent;L(y,K,G,u);C(F,K.rootNode);case 31:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}();a.launch=P;var Q=function(){var a=A(regeneratorRuntime.mark(function a(c,d,e){var f,g,h,i,j,l,m,p,q,r,s,t,u,w,x,y,z,A=arguments;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:f=3<A.length&&A[3]!==void 0?A[3]:{},g=f.focusOnClose,h=void 0===g?null:g;a.next=3;return Promise.all([c(d),n.create({title:e,large:!0,type:n.types.CANCEL})]);case 3:i=a.sent;j=v(i,2);l=j[0];m=j[1];p=(0,k.addIconToContainerWithPromise)(m.getRoot());m.getRoot().on(o.hidden,function(){m.destroy();if(h){try{h.focus()}catch(a){}}});m.show();q=document.createElement("div");a.next=13;return b.default.renderForPromise("mod_forum/local/grades/view_grade",l);case 13:r=a.sent;s=r.html;t=r.js;b.default.replaceNodeContents(q,s,t);a.next=19;return R(l);case 19:u=a.sent;w=v(u,2);x=w[0];y=w[1];z=q.querySelector("[data-region=\"grade-template\"]");b.default.replaceNodeContents(z,x,y);m.setBody(q.outerHTML);p.resolve();case 27:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}();a.view=Q;var R=function(){var a=A(regeneratorRuntime.mark(function a(c){var d,e,f;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:a.next=2;return b.default.renderForPromise(c.templatename,c.grade);case 2:d=a.sent;e=d.html;f=d.js;return a.abrupt("return",[e,f]);case 6:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}()});
define ("mod_forum/form-user-selector",["jquery","core/ajax","core/templates"],function(a,b,c){return{processResults:function processResults(b,c){var d=[];a.each(c,function(a,b){d.push({value:b.id,label:b._label})});return d},transport:function transport(d,e,f,g){var h,i=a(d).attr("courseid");h=b.call([{methodname:"core_enrol_search_users",args:{courseid:i,search:e,searchanywhere:!0,page:0,perpage:30}}]);h[0].then(function(b){var d=[],e=0;a.each(b,function(a,b){d.push(c.render("mod_forum/form-user-selector-suggestion",b))});return a.when.apply(a.when,d).then(function(){var c=arguments;a.each(b,function(a,b){b._label=c[e];e++});f(b)})}).fail(g)}}});
define ("mod_forum/inpage_reply",["jquery","core/templates","core/notification","mod_forum/repository","mod_forum/selectors"],function(a,b,c,d,f){var g={NESTED_V2:4,THREADED:2,NESTED:3,FLAT_OLDEST_FIRST:1,FLAT_NEWEST_FIRST:-1},h={POST_CREATED:"mod_forum-post-created"},i={MOODLE:0},j=function(a){var b=a.find(f.post.inpageSubmitBtnText),c=a.find(f.post.loadingIconContainer),d=a.outerWidth();a.css("width",d);b.addClass("hidden");c.removeClass("hidden")},k=function(a){var b=a.find(f.post.inpageSubmitBtnText),c=a.find(f.post.loadingIconContainer);a.css("width","");b.removeClass("hidden");c.addClass("hidden")},l=function(l){l.on("click",f.post.inpageSubmitBtn,function(m){m.preventDefault();var e=a(m.currentTarget),n=e.parent().find(f.post.inpageReplyButton),o=e.parents(f.post.inpageReplyForm).get(0),p=o.elements.post.value.trim(),q=i.MOODLE,r=o.elements.reply.value,s=o.elements.subject.value,t=e.closest(f.post.post),u=o.elements.privatereply!=void 0?o.elements.privatereply.checked:!1,v=l.find(f.post.modeSelect),w=v.length?parseInt(v.get(0).value):null,x;if(p.length){j(e);n.prop("disabled",!0);d.addDiscussionPost(r,s,p,q,u,!0).then(function(a){var b=a.messages.reduce(function(a,b){if("success"==b.type){a+="<p>"+b.message+"</p>"}return a},"");c.addNotification({message:b,type:"success"});return a}).then(function(a){o.reset();var c=a.post;x=c.id;switch(w){case g.NESTED_V2:var d=c.capabilities,e=t.children().not(f.post.repliesContainer).find(f.post.authorName).text();c.parentauthorname=e;c.showactionmenu=d.view||d.controlreadstatus||d.edit||d.split||d.delete||d.export||c.urls.viewparent;return b.render("mod_forum/forum_discussion_nested_v2_post_reply",c);case g.THREADED:return b.render("mod_forum/forum_discussion_threaded_post",c);case g.NESTED:return b.render("mod_forum/forum_discussion_nested_post",c);default:return b.render("mod_forum/forum_discussion_post",c);}}).then(function(a,c){var d=t.find(f.post.repliesContainer).first();if(w==g.FLAT_NEWEST_FIRST){return b.prependNodeContents(d,a,c)}else{return b.appendNodeContents(d,a,c)}}).then(function(){e.trigger(h.POST_CREATED,x);k(e);n.prop("disabled",!1);return t.find(f.post.inpageReplyContent).hide()}).then(function(){location.href="#p"+x}).catch(function(a){k(e);n.prop("disabled",!1);return c.exception(a)})}})};return{init:function init(a){l(a)},CONTENT_FORMATS:i,EVENTS:h}});
define ("mod_forum/discussion",["jquery","core/custom_interaction_events","mod_forum/selectors","core/pubsub","mod_forum/forum_events","core/str","core/notification"],function(a,b,c,d,e,f,g){var h=function(a){var b=a.prev(c.post.post);if(b.length){var d=b.find(c.post.post).last();if(d.length){d.focus()}else{b.focus()}}else{a.parents(c.post.post).first().focus()}},i=function(b){var d=b.find(c.post.post).first();if(d.length){d.focus()}else{var e=b.next(c.post.post);if(e.length){e.focus()}else{for(var f=b.parents(c.post.post).toArray(),g=0,h;g<f.length;g++){h=a(f[g]).next(c.post.post);if(h.length){h.focus();break}}}}},j=function(b){var d=a(b).closest(c.post.inpageReplyContent);return d.length?!0:!1},k=function(k){var l=k.find(c.post.post);l.each(function(b,d){var e=a(d).find(c.post.action),f=e.first();e.attr("tabindex","-1");f.attr("tabindex",0)});b.define(k,[b.events.up,b.events.down,b.events.next,b.events.previous,b.events.home,b.events.end]);k.on(b.events.up,function(b,d){var e=document.activeElement;if(j(e)){return}var f=a(e).closest(c.post.post);if(f.length){h(f)}else{k.find(c.post.post).first().focus()}d.originalEvent.preventDefault()});k.on(b.events.down,function(b,d){var e=document.activeElement;if(j(e)){return}var f=a(e).closest(c.post.post);if(f.length){i(f)}else{k.find(c.post.post).first().focus()}d.originalEvent.preventDefault()});k.on(b.events.home,function(a,b){if(j(document.activeElement)){return}k.find(c.post.post).first().focus();b.originalEvent.preventDefault()});k.on(b.events.end,function(a,b){if(j(document.activeElement)){return}k.find(c.post.post).last().focus();b.originalEvent.preventDefault()});k.on(b.events.next,c.post.action,function(b,d){var e=a(b.target),f=e.closest(c.post.actionsContainer),g=f.find(c.post.action),h=e.next(c.post.action);g.attr("tabindex","-1");if(!h.length){h=g.first()}h.attr("tabindex",0);h.focus();d.originalEvent.preventDefault()});k.on(b.events.previous,c.post.action,function(b,d){var e=a(b.target),f=e.closest(c.post.actionsContainer),g=f.find(c.post.action),h=e.prev(c.post.action);g.attr("tabindex","-1");if(!h.length){h=g.last()}h.attr("tabindex",0);h.focus();d.originalEvent.preventDefault()});k.on(b.events.home,c.post.action,function(b,d){var e=a(b.target),f=e.closest(c.post.actionsContainer),g=f.find(c.post.action),h=g.first();g.attr("tabindex","-1");h.attr("tabindex",0);h.focus();b.stopPropagation();d.originalEvent.preventDefault()});k.on(b.events.end,c.post.action,function(b,d){var e=a(b.target),f=e.closest(c.post.actionsContainer),g=f.find(c.post.action),h=g.last();g.attr("tabindex","-1");h.attr("tabindex",0);h.focus();b.stopPropagation();d.originalEvent.preventDefault()});d.subscribe(e.SUBSCRIPTION_TOGGLED,function(a){var b=a.subscriptionState,c=b?"discussionsubscribed":"discussionunsubscribed";f.get_string(c,"forum").then(function(a){return g.addNotification({message:a,type:"info"})}).catch(g.exception)})};return{init:function init(a){k(a)}}});
define ("mod_forum/forum_events",[],function(){return{SUBSCRIPTION_TOGGLED:"mod_forum/subscription_toggle:subscriptionToggled"}});
define ("mod_forum/selectors",[],function(){return{subscription:{toggle:"[data-type='subscription-toggle'][data-action='toggle']"},summary:{actions:"[data-container='discussion-summary-actions']"},post:{post:"[data-region=\"post\"]",action:"[data-region=\"post-action\"]",actionsContainer:"[data-region=\"post-actions-container\"]",authorName:"[data-region=\"author-name\"]",forumCoreContent:"[data-region-content='forum-post-core']",forumContent:"[data-content='forum-post']",forumSubject:"[data-region-content='forum-post-core-subject']",inpageReplyButton:"button",inpageReplyLink:"[data-action='collapsible-link']",inpageReplyCancelButton:"[data-action='cancel-inpage-reply']",inpageReplyCreateButton:"[data-action='create-inpage-reply']",inpageReplyContainer:"[data-region=\"inpage-reply-container\"]",inpageReplyContent:"[data-content='inpage-reply-content']",inpageReplyForm:"form[data-content='inpage-reply-form']",inpageSubmitBtn:"[data-action='forum-inpage-submit']",inpageSubmitBtnText:"[data-region='submit-text']",loadingIconContainer:"[data-region='loading-icon-container']",repliesContainer:"[data-region='replies-container']",replyCount:"[data-region=\"reply-count\"]",modeSelect:"select[name='mode']",showReplies:"[data-action=\"show-replies\"]",hideReplies:"[data-action=\"hide-replies\"]",repliesVisibilityToggleContainer:"[data-region=\"replies-visibility-toggle-container\"]"},lock:{toggle:"[data-action='toggle'][data-type='lock-toggle']",icon:"[data-region='locked-icon']"},favourite:{toggle:"[data-type='favorite-toggle'][data-action='toggle']"},pin:{toggle:"[data-type='pin-toggle'][data-action='toggle']"},discussion:{tools:"[data-container=\"discussion-tools\"]",item:"[data-region=\"discussion-list-item\"]",lockedLabel:"[data-region='locked-label']",subscribedLabel:"[data-region='subscribed-label']",timedLabel:"[data-region='timed-label']"}}});
define ("mod_forum/discussion_list",["jquery","core/templates","core/str","core/notification","mod_forum/subscription_toggle","mod_forum/selectors","mod_forum/repository","core/pubsub","mod_forum/forum_events"],function(a,b,c,d,e,f,g,h,i){var j=function(e){h.subscribe(i.SUBSCRIPTION_TOGGLED,function(a){var b=a.discussionId,c=a.subscriptionState,d=e.find(f.discussion.item+"[data-discussionid= "+b+"]"),g=d.find(f.discussion.subscribedLabel);if(c){d.addClass("subscribed");g.removeAttr("hidden")}else{d.removeClass("subscribed");g.attr("hidden",!0)}});e.on("click",f.favourite.toggle,function(){var b=a(this),c=b.data("forumid"),e=b.data("discussionid"),f=b.data("targetstate");g.setFavouriteDiscussionState(c,e,f).then(function(){return location.reload()}).catch(d.exception)});e.on("click",f.pin.toggle,function(b){b.preventDefault();var c=a(this),e=c.data("forumid"),f=c.data("discussionid"),h=c.data("targetstate");g.setPinDiscussionState(e,f,h).then(function(){return location.reload()}).catch(d.exception)});e.on("click",f.lock.toggle,function(h){var e=a(this),i=e.data("forumid"),j=e.data("discussionid"),k=e.data("state");g.setDiscussionLockState(i,j,k).then(function(a){var b=e.parents(f.summary.actions).find(f.lock.icon),c=e.parents(f.discussion.item).find(f.discussion.lockedLabel);if(a.locked){b.removeClass("hidden");c.removeAttr("hidden")}else{b.addClass("hidden");c.attr("hidden",!0)}return a}).then(function(a){a.forumid=i;return b.render("mod_forum/discussion_lock_toggle",a)}).then(function(a,c){return b.replaceNode(e,a,c)}).then(function(){return c.get_string("lockupdated","forum").done(function(a){return d.addNotification({message:a,type:"info"})})}).catch(d.exception);h.preventDefault()})};return{init:function init(a){e.init(a,!1,function(a,b){var d=a.attr("id"),e=b.userstate.subscribed?0:1;a.data("targetstate",e);var f=b.userstate.subscribed?"unsubscribediscussion":"subscribediscussion";return c.get_string(f,"mod_forum").then(function(b){a.closest("td").find("label[for=\""+d+"\"]").text(b);return b})});j(a)}}});
define ("mod_forum/grades/expandconversation",["exports","./grader/selectors","mod_forum/repository","core/notification","core/templates","core/modal_factory","core/modal_events"],function(a,b,c,d,e,f,g){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.registerEventListeners=void 0;b=i(b);c=h(c);e=h(e);f=i(f);g=i(g);function h(a){return a&&a.__esModule?a:{default:a}}function i(a){if(a&&a.__esModule){return a}else{var b={};if(null!=a){for(var c in a){if(Object.prototype.hasOwnProperty.call(a,c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,c):{};if(d.get||d.set){Object.defineProperty(b,c,d)}else{b[c]=a[c]}}}}b.default=a;return b}}function j(a,b){return m(a)||l(a,b)||k()}function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done);d=!0){c.push(h.value);if(b&&c.length===b)break}}catch(a){e=!0;f=a}finally{try{if(!d&&null!=g["return"])g["return"]()}finally{if(e)throw f}}return c}function m(a){if(Array.isArray(a))return a}function n(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}if(h.done){b(i)}else{Promise.resolve(i).then(d,e)}}function o(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var h=a.apply(b,c);function f(a){n(h,d,e,f,g,"next",a)}function g(a){n(h,d,e,f,g,"throw",a)}f(void 0)})}}var p=function(a){return a.closest(b.expandConversation)},q=function(){var a=o(regeneratorRuntime.mark(function a(b){var d,h,i,k,l,m,n,o,p,q,r,s,t,u,v=arguments;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:d=1<v.length&&v[1]!==void 0?v[1]:{},h=d.focusOnClose,i=void 0===h?null:h;k=b.dataset.postid;l=b.dataset.discussionid;m=b.dataset.name;n="1"==b.dataset.experimentalDisplayMode;a.next=7;return Promise.all([c.default.getDiscussionPosts(parseInt(l)),f.create({title:m,large:!0,type:f.types.CANCEL})]);case 7:o=a.sent;p=j(o,2);q=p[0];r=p[1];s=new Map(q.posts.map(function(a){a.readonly=!0;a.hasreplies=!1;a.replies=[];return[a.id,a]}));t=[];q.posts.forEach(function(a){if(a.parentid){var b=s.get(a.parentid);if(b){a.parentauthorname=b.author.fullname;b.hasreplies=!0;b.replies.push(a)}else{t.push(a)}}else{t.push(a)}});r.getRoot().on(g.hidden,function(){r.destroy();try{i.focus()}catch(a){}});r.getRoot().on(g.bodyRendered,function(){var a=r.getRoot()[0].querySelector("#p".concat(k));if(a){a.scrollIntoView({behavior:"smooth"})}});r.show();u=e.default.render("mod_forum/grades/grader/discussion/post_modal",{posts:t,experimentaldisplaymode:n});r.setBody(u);case 19:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}();a.registerEventListeners=function registerEventListeners(a){a.addEventListener("click",function(a){var b=p(a.target);if(b){a.preventDefault();try{q(b,{focusOnClose:a.target})}catch(a){(0,d.exception)(a)}}})}});
define ("mod_forum/grades/grader/selectors",["exports"],function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;a.default={launch:"[data-grade-action=\"launch\"]",gradableItem:"[data-gradable-itemtype]",gradableItems:{wholeForum:"[data-gradable-itemtype=\"forum\"]"},expandConversation:"[data-action=\"view-context\"]",posts:"[data-region=\"posts\"]",viewGrade:"[data-grade-action=\"view\"]"};return a.default});
define ("mod_forum/grades/grader",["exports","./grader/selectors","mod_forum/repository","core/templates","../local/grades/grader","core/notification","core_course/repository","core/url"],function(a,b,c,d,e,f,g,h){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.registerLaunchListeners=void 0;b=j(b);c=i(c);d=i(d);e=j(e);f=i(f);g=i(g);function i(a){return a&&a.__esModule?a:{default:a}}function j(a){if(a&&a.__esModule){return a}else{var b={};if(null!=a){for(var c in a){if(Object.prototype.hasOwnProperty.call(a,c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,c):{};if(d.get||d.set){Object.defineProperty(b,c,d)}else{b[c]=a[c]}}}}b.default=a;return b}}function k(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);if("function"==typeof Object.getOwnPropertySymbols){d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))}d.forEach(function(b){l(a,b,c[b])})}return a}function l(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}function m(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}if(h.done){b(i)}else{Promise.resolve(i).then(d,e)}}function n(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var h=a.apply(b,c);function f(a){m(h,d,e,f,g,"next",a)}function g(a){m(h,d,e,f,g,"throw",a)}f(void 0)})}}var o={contentRegion:"mod_forum/grades/grader/discussion/posts"},p=function(a,b){return function(e){return c.default.getDiscussionByUserID(e,a).then(function(a){a.discussions=a.discussions.map(s);a.experimentaldisplaymode=b?!0:!1;return d.default.render(o.contentRegion,a)}).catch(f.default.exception)}},q=function(a,b){return n(regeneratorRuntime.mark(function c(){var d;return regeneratorRuntime.wrap(function(c){while(1){switch(c.prev=c.next){case 0:c.next=2;return g.default.getUsersFromCourseModuleID(a,b);case 2:d=c.sent;return c.abrupt("return",d.users);case 4:case"end":return c.stop();}}},c)}))},r=function(a){return a.closest(b.gradableItem)},s=function(a){var b=new Map;a.posts.parentposts.forEach(function(a){return b.set(a.id,a)});var c=a.posts.userposts.map(function(a){a.readonly=!0;a.hasreplies=!1;a.replies=[];var c=a.parentid?b.get(a.parentid):null;if(c){c.hasreplies=!1;c.replies=[];c.readonly=!0;a.parentauthorname=c.author.fullname}return{parent:c,post:a}});return k({},a,{posts:c})},t=function(){var a=n(regeneratorRuntime.mark(function a(b){var c,d,f,g,i,j,k=arguments;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:c=1<k.length&&k[1]!==void 0?k[1]:{},d=c.focusOnClose,f=void 0===d?null:d;g=b.dataset;a.next=4;return e.getGradingPanelFunctions("mod_forum",g.contextid,g.gradingComponent,g.gradingComponentSubtype,g.gradableItemtype);case 4:i=a.sent;j=g.group?g.group:0;a.next=8;return e.launch(q(g.cmid,j),p(g.cmid,"1"==g.experimentalDisplayMode),i.getter,i.setter,{groupid:g.groupid,initialUserId:g.initialuserid,moduleName:g.name,courseName:g.courseName,courseUrl:(0,h.relativeUrl)("/course/view.php",{id:g.courseId}),sendStudentNotifications:g.sendStudentNotifications,focusOnClose:f});case 8:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}(),u=function(){var a=n(regeneratorRuntime.mark(function a(b){var c,d,f,g,h,i=arguments;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:c=1<i.length&&i[1]!==void 0?i[1]:{},d=c.focusOnClose,f=void 0===d?null:d;g=b.dataset;a.next=4;return e.getGradingPanelFunctions("mod_forum",g.contextid,g.gradingComponent,g.gradingComponentSubtype,g.gradableItemtype);case 4:h=a.sent;a.next=7;return e.view(h.getter,g.userid,g.name,{focusOnClose:f});case 7:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}();a.registerLaunchListeners=function registerLaunchListeners(){document.addEventListener("click",function(){var a=n(regeneratorRuntime.mark(function a(c){var d,e;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:if(!c.target.matches(b.launch)){a.next=17;break}d=r(c.target);if(d){a.next=4;break}throw Error("Unable to find a gradable item");case 4:if(!d.matches(b.gradableItems.wholeForum)){a.next=16;break}c.preventDefault();a.prev=6;a.next=9;return t(d,{focusOnClose:c.target});case 9:a.next=14;break;case 11:a.prev=11;a.t0=a["catch"](6);f.default.exception(a.t0);case 14:a.next=17;break;case 16:throw Error("Unable to find a valid gradable item");case 17:if(!c.target.matches(b.viewGrade)){a.next=35;break}c.preventDefault();e=r(c.target);if(e){a.next=22;break}throw Error("Unable to find a gradable item");case 22:if(!e.matches(b.gradableItems.wholeForum)){a.next=34;break}c.preventDefault();a.prev=24;a.next=27;return u(e,{focusOnClose:c.target});case 27:a.next=32;break;case 29:a.prev=29;a.t1=a["catch"](24);f.default.exception(a.t1);case 32:a.next=35;break;case 34:throw Error("Unable to find a valid gradable item");case 35:case"end":return a.stop();}}},a,null,[[6,11],[24,29]])}));return function(){return a.apply(this,arguments)}}())}});
define ("mod_forum/posts_list",["jquery","core/templates","core/notification","core/pending","mod_forum/selectors","mod_forum/inpage_reply"],function(a,b,c,d,f,g){var h=function(e){e.on("click",f.post.inpageReplyLink,function(h){h.preventDefault();if(window.location.hash){var e=window.location.href.split("#")[0];history.pushState({},document.title,e)}var i=new d("inpage-reply"),j=a(h.currentTarget).parents(f.post.forumCoreContent),k=j.find(f.post.forumSubject),l=a(h.currentTarget).parents(f.post.forumContent),m={postid:a(l).data("post-id"),reply_url:a(h.currentTarget).attr("href"),sesskey:M.cfg.sesskey,parentsubject:k.data("replySubject"),canreplyprivately:a(h.currentTarget).data("can-reply-privately"),postformat:g.CONTENT_FORMATS.MOODLE};if(!l.find(f.post.inpageReplyContent).length){b.render("mod_forum/inpage_reply",m).then(function(a,c){return b.appendNodeContents(j,a,c)}).then(function(){return l.find(f.post.inpageReplyContent).slideToggle(300,i.resolve).find("textarea").focus()}).fail(c.exception)}else{var n=l.find(f.post.inpageReplyContent);n.slideToggle(300,i.resolve);if(n.is(":visible")){n.find("textarea").focus()}}})};return{init:function init(a){h(a);g.init(a)}}});
define ("mod_forum/discussion_nested_v2",["exports","jquery","core/auto_rows","core/custom_interaction_events","core/notification","core/templates","mod_forum/discussion","mod_forum/inpage_reply","mod_forum/lock_toggle","mod_forum/favourite_toggle","mod_forum/pin_toggle","mod_forum/selectors","mod_forum/subscription_toggle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;b=n(b);c=n(c);d=n(d);e=n(e);f=n(f);g=n(g);h=n(h);i=n(i);j=n(j);k=n(k);l=n(l);m=n(m);function n(a){return a&&a.__esModule?a:{default:a}}function o(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);if("function"==typeof Object.getOwnPropertySymbols){d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))}d.forEach(function(b){p(a,b,c[b])})}return a}function p(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}function q(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}if(h.done){b(i)}else{Promise.resolve(i).then(d,e)}}function r(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var h=a.apply(b,c);function f(a){q(h,d,e,f,g,"next",a)}function g(a){q(h,d,e,f,g,"throw",a)}f(void 0)})}}var s=function(a){return a.closest(l.default.post.post)},t=function(a,b){return a.find("".concat(l.default.post.post,"[data-post-id=").concat(b,"]"))},u=function(a){return a.parents(l.default.post.post)},v=function(a){return a.children().not(l.default.post.repliesContainer).find(l.default.post.forumCoreContent)},w=function(a){return a.children().filter(l.default.post.inpageReplyContainer)},x=function(a){return w(a).find(l.default.post.inpageReplyContent)},y=function(a){return v(a).find(l.default.post.inpageReplyCreateButton)},z=function(a){return a.children(l.default.post.repliesVisibilityToggleContainer)},A=function(a){return a.children(l.default.post.repliesContainer)},B=function(a){return 0<A(a).children().length},C=function(a){return a.find(l.default.post.showReplies)},D=function(a){return a.find(l.default.post.hideReplies)},E=function(a){var b=A(a);return b.is(":visible")},F=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,c=A(a),d=z(a),e=C(d),f=D(d);e.addClass("hidden");f.removeClass("hidden");c.slideDown({duration:150,queue:!1,complete:function complete(){if(b){var a=t(c,b);if(a.length){a[0].scrollIntoView()}}}}).css("display","none").fadeIn(150)},G=function(a){var b=A(a),c=z(a),d=C(c),e=D(c);d.removeClass("hidden");e.addClass("hidden");b.slideUp({duration:150,queue:!1}).fadeOut(150)},H=null,I=function(a){return function(){var b=r(regeneratorRuntime.mark(function b(c){var d,g,h,i;return regeneratorRuntime.wrap(function(b){while(1){switch(b.prev=b.next){case 0:d=w(c);g=z(c);h=y(c);if(K(d)){b.next=14;break}b.prev=4;b.next=7;return L(a,h,c);case 7:i=b.sent;f.default.appendNodeContents(d,i,"");b.next=14;break;case 11:b.prev=11;b.t0=b["catch"](4);e.default.exception(b.t0);case 14:h.fadeOut(150,function(){var a=x(c);a.slideDown({duration:150,queue:!1,complete:function complete(){a.find("textarea").focus()}}).css("display","none").fadeIn(150);if(g.length&&B(c)){g.fadeIn(150);G(c)}});case 15:case"end":return b.stop();}}},b,null,[[4,11]])}));return function(){return b.apply(this,arguments)}}()},J=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,c=x(a),d=y(a),e=z(a);if(e.length&&B(a)){e.fadeOut(150);if(!E(a)){F(a,b)}}c.slideUp({duration:150,queue:!1,complete:function complete(){d.fadeIn(150)}}).fadeOut(200)},K=function(a){return 0<a.find(l.default.post.inpageReplyContent).length},L=function(a,b,c){var d=v(c),e=d.find(l.default.post.forumSubject).text(),g=d.find(l.default.post.authorName).text(),i=o({postid:c.data("post-id"),reply_url:b.attr("data-href"),sesskey:M.cfg.sesskey,parentsubject:e,parentauthorname:g,canreplyprivately:b.data("can-reply-privately"),postformat:h.default.CONTENT_FORMATS.MOODLE},a);return f.default.render("mod_forum/inpage_reply_v2",i)},N=function(a){z(a).find(l.default.post.replyCount).each(function(a,b){var c=parseInt(b.innerText,10);b.innerText=c+1})},O=function(a){d.default.define(a,[d.default.events.activate]);c.default.init(a);a.on(d.default.events.activate,l.default.post.inpageReplyCreateButton,function(a,c){c.originalEvent.preventDefault();var d=s((0,b.default)(a.currentTarget));H(d)});a.on(d.default.events.activate,l.default.post.inpageReplyCancelButton,function(a,c){c.originalEvent.preventDefault();var d=s((0,b.default)(a.currentTarget));J(d)});a.on(d.default.events.activate,l.default.post.showReplies,function(a,c){c.originalEvent.preventDefault();var d=s((0,b.default)(a.target));F(d)});a.on(d.default.events.activate,l.default.post.hideReplies,function(a,c){c.originalEvent.preventDefault();var d=s((0,b.default)(a.target));G(d)});a.on(h.default.EVENTS.POST_CREATED,l.default.post.inpageSubmitBtn,function(a,c){var d=(0,b.default)(a.currentTarget),e=s(d),f=u(d);J(e,c);f.each(function(a,c){N((0,b.default)(c))})})},P=function(a,b){H=I(b);O(a);g.default.init(a);h.default.init(a);var c=a.find(l.default.discussion.tools);i.default.init(c,!1);j.default.init(c,!1,function(a,b){var c=b.userstate.favourited?0:1;return a.data("targetstate",c)});k.default.init(c,!1,function(a,b){var c=b.pinned?0:1;return a.data("targetstate",c)});m.default.init(c,!1,function(a,b){var c=b.userstate.subscribed?0:1;a.data("targetstate",c)})};a.init=P});
define ("mod_forum/subscription_toggle",["jquery","core/templates","core/notification","mod_forum/repository","mod_forum/selectors","core/pubsub","mod_forum/forum_events"],function(a,b,c,d,e,f,g){return{init:function registerEventListeners(b,h,i){b.on("click",e.subscription.toggle,function(b){var e=a(this),j=e.data("forumid"),k=e.data("discussionid"),l=e.data("targetstate");d.setDiscussionSubscriptionState(j,k,l).then(function(a){f.publish(g.SUBSCRIPTION_TOGGLED,{discussionId:k,subscriptionState:l});return i(e,a)}).catch(c.exception);if(h){b.preventDefault()}})}}});
define ("mod_forum/favourite_toggle",["jquery","core/templates","core/notification","mod_forum/repository","mod_forum/selectors","core/str"],function(a,b,c,d,e,f){return{init:function registerEventListeners(b,g,h){b.on("click",e.favourite.toggle,function(b){var e=a(this),i=e.data("forumid"),j=e.data("discussionid"),k=e.data("targetstate");d.setFavouriteDiscussionState(i,j,k).then(function(a){return h(e,a)}).then(function(){return f.get_string("favouriteupdated","forum").done(function(a){return c.addNotification({message:a,type:"info"})})}).catch(c.exception);if(g){b.preventDefault()}})}}});
define ("mod_forum/lock_toggle",["jquery","core/templates","core/notification","mod_forum/repository","mod_forum/selectors"],function(a,b,c,d,e){return{init:function registerEventListeners(b,f){b.on("click",e.lock.toggle,function(b){var e=a(this),g=e.data("forumid"),h=e.data("discussionid"),i=e.data("state");d.setDiscussionLockState(g,h,i).then(function(){return location.reload()}).catch(c.exception);if(f){b.preventDefault()}})}}});
define ("mod_hsuforum/accessibility",["jquery"],function(a){return{init:function init(){a(".pinbutton.btn.btn-default").click(function(){a(this).attr("aria-pressed","true")});var b=a("a.hsuforum-toggle-bookmark, a.hsuforum-toggle-substantive");b.off("keypress").on("keypress",function(a){a.preventDefault();if(32===a.keyCode){a.target.click()}})}}});
define('mod_iassign/participant_selector', ["core/ajax","jquery","core/templates"],function(a,b,c){return{processResults:function(a,b){return b},transport:function(d,e,f,g){var h=b(d).attr("data-iassignmentid"),i=b(d).attr("data-groupid"),j=b('[data-region="configure-filters"] input[type="checkbox"]'),k=[];j.each(function(a,c){k[b(c).attr("name")]=b(c).prop("checked")}),a.call([{methodname:"mod_iassign_list_participants",args:{iassignid:h,groupid:i,filter:e,limit:30,includeenrolments:!1}}])[0].then(function(a){var d=[],e=b("[data-showuseridentity]").data("showuseridentity").split(",");return b.each(a,function(a,f){var g=f,h=[],i=!0;k.filter_submitted&&!f.submitted&&(i=!1),k.filter_notsubmitted&&f.submitted&&(i=!1),k.filter_requiregrading&&!f.requiregrading&&(i=!1),k.filter_grantedextension&&!f.grantedextension&&(i=!1),i&&(b.each(e,function(a,b){"undefined"!=typeof f[b]&&""!==f[b]&&(g.hasidentity=!0,h.push(f[b]))}),g.identity=h.join(", "),d.push(c.render("mod_iassign/list_participant_user_summary",g).then(function(a){return{value:f.id,label:a}})))}),b.when.apply(b,d)}).then(function(){var a=[];arguments[0]&&(a=Array.prototype.slice.call(arguments)),f(a)})["catch"](g)}}});
define('mod_iassign/onedrive_iassign_api', ["jquery","core/ajax"],function(e,i){window.load_onedrivefilearea=function(n,o){e(".onedrive-filepicker").html("<div class='noty-loading'>Loading...</div>"),i.call([{methodname:"iassignsubmission_onedrive_load_filearea",args:{id:n,path:o}}])[0].done(function(i){e(".onedrive-filepicker").html(i.result)}).fail(function(e){console.log(e)})},e("html").on("input",".onedrive-filepicker .search-box input",function(){var i=e(this).val().toLowerCase();i?(e(".onedrive-filepicker table tr").hide(),e(".onedrive-filepicker table td span").each(function(){e(this).text().toLowerCase().indexOf(i)>=0&&e(this).parent().parent().show()}),e(".onedrive-filepicker table td a").each(function(){e(this).text().toLowerCase().indexOf(i)>=0&&e(this).parent().parent().show()})):e(".onedrive-filepicker table tr").show()})});
define('mod_iassign/office365_iassign_api', ["jquery","core/ajax"],function(o,t){window.load_office365filearea=function(e,i){o(".office365-filepicker").html("<div class='noty-loading'>Loading...</div>"),t.call([{methodname:"iassignsubmission_office365_load_filearea",args:{id:e,path:i}}])[0].done(function(e){o(".office365-filepicker").html(e.result)}).fail(function(e){console.log(e)})},o("html").on("input",".office365-filepicker .search-box input",function(){var e=o(this).val().toLowerCase();e?(o(".office365-filepicker table tr").hide(),o(".office365-filepicker table td span").each(function(){0<=o(this).text().toLowerCase().indexOf(e)&&o(this).parent().parent().show()}),o(".office365-filepicker table td a").each(function(){0<=o(this).text().toLowerCase().indexOf(e)&&o(this).parent().parent().show()})):o(".office365-filepicker table tr").show()})});
define('mod_iassign/grading_actions', ["jquery","mod_iassign/grading_events"],function(a,b){var c=function(b){this._regionSelector=b,this._region=a(b),this.registerEventListeners()};return c.prototype._regionSelector=null,c.prototype._lastUserId=0,c.prototype._region=null,c.prototype._showActionsForm=function(a,b){var c=this._region.find("[data-region=grading-actions-form]");b!=this._lastUserId&&b>0&&(this._lastUserId=b),b>0?c.removeClass("hide"):c.addClass("hide")},c.prototype._trigger=function(b){a(document).trigger(b)},c.prototype.getReviewPanelElement=function(){return a('[data-region="review-panel"]')},c.prototype.hasReviewPanelElement=function(){return this.getReviewPanelElement().length>0},c.prototype.getCollapseGradePanelButton=function(){return a('[data-region="grade-actions"] .collapse-grade-panel')},c.prototype.getCollapseReviewPanelButton=function(){return a('[data-region="grade-actions"] .collapse-review-panel')},c.prototype.getExpandAllPanelsButton=function(){return a('[data-region="grade-actions"] .collapse-none')},c.prototype.resetLayoutButtons=function(){this.getCollapseGradePanelButton().removeClass("active"),this.getCollapseReviewPanelButton().removeClass("active"),this.getExpandAllPanelsButton().removeClass("active")},c.prototype.collapseReviewPanel=function(){a(document).trigger(b.COLLAPSE_REVIEW_PANEL),a(document).trigger(b.EXPAND_GRADE_PANEL),this.resetLayoutButtons(),this.getCollapseReviewPanelButton().addClass("active")},c.prototype.collapseGradePanel=function(){a(document).trigger(b.COLLAPSE_GRADE_PANEL),a(document).trigger(b.EXPAND_REVIEW_PANEL),this.resetLayoutButtons(),this.getCollapseGradePanelButton().addClass("active")},c.prototype.expandAllPanels=function(){a(document).trigger(b.EXPAND_GRADE_PANEL),a(document).trigger(b.EXPAND_REVIEW_PANEL),this.resetLayoutButtons(),this.getExpandAllPanelsButton().addClass("active")},c.prototype.registerEventListeners=function(){if(this.hasReviewPanelElement()){var b=this.getCollapseReviewPanelButton();b.click(function(a){this.collapseReviewPanel(),a.preventDefault()}.bind(this)),b.keydown(function(a){a.metaKey||a.shiftKey||a.altKey||a.ctrlKey||13!==a.keyCode&&32!==a.keyCode||(this.collapseReviewPanel(),a.preventDefault())}.bind(this));var c=this.getCollapseGradePanelButton();c.click(function(a){this.collapseGradePanel(),a.preventDefault()}.bind(this)),c.keydown(function(a){a.metaKey||a.shiftKey||a.altKey||a.ctrlKey||13!==a.keyCode&&32!==a.keyCode||(this.collapseGradePanel(),a.preventDefault())}.bind(this));var d=this.getExpandAllPanelsButton();d.click(function(a){this.expandAllPanels(),a.preventDefault()}.bind(this)),d.keydown(function(a){a.metaKey||a.shiftKey||a.altKey||a.ctrlKey||13!==a.keyCode&&32!==a.keyCode||(this.expandAllPanels(),a.preventDefault())}.bind(this))}a(document).on("user-changed",this._showActionsForm.bind(this)),this._region.find('[name="savechanges"]').on("click",this._trigger.bind(this,"save-changes")),this._region.find('[name="resetbutton"]').on("click",this._trigger.bind(this,"reset")),this._region.find("form").on("submit",function(a){a.preventDefault()})},c});
define('mod_iassign/googledocs_iassign_api', ["jquery","core/ajax"],function(e,o){window.load_googlfilearea=function(i,t){e(".googledocs-filepicker").html("<div class='noty-loading'>Loading...</div>"),o.call([{methodname:"iassignsubmission_googledocs_load_filearea",args:{id:i,path:t}}])[0].done(function(o){e(".googledocs-filepicker").html(o.result)}).fail(function(e){console.log(e)})},e("html").on("input",".googledocs-filepicker .search-box input",function(){var o=e(this).val().toLowerCase();o?(e(".googledocs-filepicker table tr").hide(),e(".googledocs-filepicker table td span").each(function(){e(this).text().toLowerCase().indexOf(o)>=0&&e(this).parent().parent().show()}),e(".googledocs-filepicker table td a").each(function(){e(this).text().toLowerCase().indexOf(o)>=0&&e(this).parent().parent().show()})):e(".googledocs-filepicker table tr").show()})});
define('mod_iassign/grading_navigation_user_info', ["jquery","core/notification","core/ajax","core/templates"],function(a,b,c,d){var e=function(b){this._regionSelector=b,this._region=a(b),this._userCache={},a(document).on("user-changed",this._refreshUserInfo.bind(this))};return e.prototype._regionSelector=null,e.prototype._userCache=null,e.prototype._region=null,e.prototype._lastUserId=0,e.prototype._getiassignmentId=function(){return this._region.attr("data-iassignmentid")},e.prototype._refreshUserInfo=function(e,f){var g=a.Deferred();this._lastUserId!=f&&(this._lastUserId=f,d.render("mod_iassign/loading",{}).done(function(e,h){if(this._region.fadeOut("fast",function(){d.replaceNodeContents(this._region,e,h),this._region.fadeIn("fast")}.bind(this)),f<0)return void d.render("mod_iassign/grading_navigation_no_users",{}).done(function(a,b){this._region.fadeOut("fast",function(){d.replaceNodeContents(this._region,a,b),this._region.fadeIn("fast")}.bind(this))}.bind(this)).fail(b.exception);if("undefined"!=typeof this._userCache[f])g.resolve(this._userCache[f]);else{var i=this._getiassignmentId(),j=c.call([{methodname:"mod_iassign_get_participant",args:{userid:f,iassignid:i,embeduser:!0}}]);j[0].done(function(a){a.hasOwnProperty("id")?(this._userCache[f]=a,g.resolve(this._userCache[f])):g.reject("No users")}.bind(this)).fail(b.exception)}g.done(function(c){var e=a("[data-showuseridentity]").data("showuseridentity").split(","),f=[];c.courseid=a('[data-region="grading-navigation-panel"]').attr("data-courseid"),c.user&&(a.each(e,function(a,b){"undefined"!=typeof c.user[b]&&""!==c.user[b]&&(c.hasidentity=!0,f.push(c.user[b]))}),c.identity=f.join(", "),c.user.profileimageurl&&(c.profileimageurl=c.user.profileimageurl)),d.render("mod_iassign/grading_navigation_user_summary",c).done(function(a,b){this._region.fadeOut("fast",function(){d.replaceNodeContents(this._region,a,b),this._region.fadeIn("fast")}.bind(this))}.bind(this)).fail(b.exception)}.bind(this)).fail(function(){d.render("mod_iassign/grading_navigation_no_users",{}).done(function(a,b){this._region.fadeOut("fast",function(){d.replaceNodeContents(this._region,a,b),this._region.fadeIn("fast")}.bind(this))}.bind(this)).fail(b.exception)}.bind(this))}.bind(this)).fail(b.exception))},e});
define('mod_iassign/document_popup', ["jquery","core/config","core/ajax"],function(s,e,t){s(".preview-popup");window.delete_googledoc=function(e){s("#if_"+e).remove(),s("#fid_"+e).remove(),s("#fn_"+e).remove(),s('input[value="'+e+'"]').remove(),s("#gf_"+e+" .insert-btn").css("opacity",1),s("#gf_"+e+" .insert-btn").parent().parent().removeClass("inserted")},window.delete_onedrive=function(e){s('tr[data-fileid="if_'+e+'"]').remove(),s("input[data-fileid=\"fid_' + file_id+'\"]").remove(),s("input[data-fileid=\"fid_' + file_id+'\"]").remove(),s('input[value="'+e+'"]').remove(),s('td[data-fileid="gf_'+e+'"] .insert-btn').css("opacity",1),s('td[data-fileid="gf_'+e+'"] .insert-btn').parent().parent().removeClass("inserted")},window.delete_office365=function(e){s('tr[data-fileid="if_'+e+'"]').remove(),s("input[data-fileid=\"fid_' + file_id+'\"]").remove(),s("input[data-fileid=\"fid_' + file_id+'\"]").remove(),s('input[value="'+e+'"]').remove(),s('td[data-fileid="gf_'+e+'"] .insert-btn').css("opacity",1),s('td[data-fileid="gf_'+e+'"] .insert-btn').parent().parent().removeClass("inserted")},window.generate_googledoc_download_link=function(e,i,n,a){e.find(".tab-content i").removeClass(),e.find("i").addClass("fa fa-spin fa-spinner"),t.call([{methodname:"iassignsubmission_googledocs_generate_download_link",args:{fileid:i,courseid:a,filename:n}}])[0].done(function(e){1==e.result?s(".google-loading").after(e.link).remove():(s(".google-loading").removeClass("google-loading"),s(".googledocs-files-table").before('<div class="action-noty">'+e.message+"</div>"))}).fail(function(e){console.log(e)})},window.generate_onedrive_download_link=function(e,i,n,a){e.find("i").removeClass(),e.find("i").addClass("fa fa-spin fa-spinner"),t.call([{methodname:"iassignsubmission_onedrive_generate_download_link",args:{fileid:i,courseid:a,filename:n}}])[0].done(function(e){1==e.result?s(".onedrive-loading").after(e.link).remove():(s(".onedrive-loading").removeClass("onedrive-loading"),s(".onedrive-files-table").before('<div class="action-noty">'+e.message+"</div>"))}).fail(function(e){console.log(e)})},window.generate_office365_download_link=function(e,i,n,a,o){e.find("i").removeClass(),e.find("i").addClass("fa fa-spin fa-spinner"),t.call([{methodname:"iassignsubmission_office365_generate_download_link",args:{fileid:i,courseid:a,filename:n,driveid:o}}])[0].done(function(e){1==e.result?s(".office365-loading").after(e.link).remove():(s(".office365-loading").removeClass("office365-loading"),s(".office365-files-table").before('<div class="action-noty">'+e.message+"</div>"))}).fail(function(e){console.log(e)})},window.copy_googledoc=function(e,i,n){e.find("i").removeClass(),e.find("i").addClass("fa fa-spin fa-spinner"),t.call([{methodname:"iassignsubmission_googledocs_copy_googledoc",args:{fileid:i,filename:n}}])[0].done(function(e){1==e.result?s(".google-loading").removeClass("google-loading").addClass("disabled").text("Copied").attr("onclick","return false;"):(s(".loadgoogle-loadinging").removeClass("google-loading"),s(".googledocs-files-table").before('<div class="action-noty">'+e.message+"</div>"))}).fail(function(e){console.log(e)})},window.copy_onedrive=function(e,i,n,a){e.find("i").removeClass(),e.find("i").addClass("fa fa-spin fa-spinner"),t.call([{methodname:"iassignsubmission_onedrive_copy",args:{fileid:i,filename:n,courseid:a}}])[0].done(function(e){1==e.result?s(".onedrive-loading").removeClass("onedrive-loading").addClass("disabled").text(e.message).attr("onclick","return false;"):(s(".loadonedrive-loadinging").removeClass("onedrive-loading"),s(".onedrive-files-table").before('<div class="action-noty">'+e.message+"</div>"))}).fail(function(e){console.log(e)})},window.copy_office365=function(e,i,n,a,o){e.find("i").removeClass(),e.find("i").addClass("fa fa-spin fa-spinner"),t.call([{methodname:"iassignsubmission_office365_copy",args:{fileid:i,filename:n,courseid:a,driveid:o}}])[0].done(function(e){1==e.result?s(".office365-loading").removeClass("office365-loading").addClass("disabled").text(e.message).attr("onclick","return false;"):(s(".loadoffice365-loadinging").removeClass("ooffice365-loading"),s(".office365-files-table").before('<div class="action-noty">'+e.message+"</div>"))}).fail(function(e){console.log(e)})},s(".googledocs-filepicker").on("click","a.insert-btn",function(e){e.preventDefault();var i=s(this).attr("data-fileid"),n=s(this).attr("data-itemid"),a=s(this).attr("data-itemicon"),o=s(this).attr("data-ext"),t=s(this).attr("data-fileurl");insert_googledoc(i,n,a,o,t)}),window.insert_googledoc=function(e,i,n,a,o){var t=parseInt(s("input[name='googledocs_files']").val())+1;s("input[name='googledocs_files']").val(t),s(".googledocs-filearea").append("<input id='fid_"+e+"' type='hidden' name='googledoc_file["+t+"]' value='"+e+"' />"),s(".googledocs-filearea").append("<input id='fn_"+e+"' type='hidden' name='googledoc_filename["+t+"]' value='"+i+"' />"),s(".googledocs-filearea").append("<input id='fi_"+e+"' type='hidden' name='googledoc_fileicon["+t+"]' value='"+n+"' />"),s("#gf_"+e+" .insert-btn").css("opacity",0),s(".inserted-files-table-googledocs").append("<tr id='if_"+e+"' class='tr-files'><td class='t1'><img src='"+n+"' /></td><td class='t2'><span>"+i+"</span></td><td class='t3'><button class='btn btn-secondary delete-btn' onclick='delete_googledoc(\""+e+"\"); return false;'><i class='fa fa-trash'></i> Remove</button><a class='btn btn-secondary' href='"+o+"' target='_blank'><i class='fa fa-search'></i> Preview</a></td></tr>"),s("#gf_"+e+" .insert-btn").parent().parent().addClass("inserted"),s(".inserted-title, .inserted-files-inner-googledocs").show()},window.insert_onedrive=function(e,i,n,a,o){var t=parseInt(s("input[name='onedrive_files']").val())+1;s("input[name='onedrive_files']").val(t),s(".onedrive-filearea").append("<input id='fid_"+e+"' data-fileid='if_"+e+"' type='hidden' name='onedrive_file["+t+"]' value='"+e+"' />"),s(".onedrive-filearea").append("<input id='fn_"+e+"' data-fileid='fn_"+e+"' type='hidden' name='onedrive_filename["+t+"]' value='"+i+"' />"),s(".onedrive-filearea").append("<input id='fi_"+e+"' type='hidden' name='onedrive_fileicon["+t+"]' value='"+n+"' />"),s("td[data-fileid='gf_"+e+"'] .insert-btn").css("opacity",0),s(".inserted-files-table-onedrive").append("<tr id='if_"+e+"' class='tr-files' data-fileid='if_"+e+"'><td class='t1'><img src='"+n+"' /></td><td class='t2'><span>"+i+"</span></td><td class='t3'><button class='btn btn-secondary delete-btn' onclick='delete_onedrive(\""+e+"\"); return false;'><i class='fa fa-trash'></i> Remove</button><a class='btn btn-secondary' href='"+o+"' target='_blank'><i class='fa fa-search'></i> Preview</a></td></tr>"),s("td[data-fileid='gf_"+e+"'] .insert-btn").parent().parent().addClass("inserted"),s(".inserted-title, .inserted-files-inner-onedrive").show()},window.insert_office365=function(e,i,n,a,o){var t=parseInt(s("input[name='office365_files']").val())+1;s("input[name='office365_files']").val(t),s(".office365-filearea").append("<input id='fid_"+e+"' data-fileid='if_"+e+"' type='hidden' name='office365_file["+t+"]' value='"+e+"' />"),s(".office365-filearea").append("<input id='fn_"+e+"' data-fileid='fn_"+e+"' type='hidden' name='office365_filename["+t+"]' value='"+i+"' />"),s(".office365-filearea").append("<input id='fi_"+e+"' type='hidden' name='office365_fileicon["+t+"]' value='"+n+"' />"),s("td[data-fileid='gf_"+e+"'] .insert-btn").css("opacity",0),s(".inserted-files-table-office365").append("<tr id='if_"+e+"' class='tr-files' data-fileid='if_"+e+"'><td class='t1'><img src='"+n+"' /></td><td class='t2'><span>"+i+"</span></td><td class='t3'><button class='btn btn-secondary delete-btn' onclick='delete_office365(\""+e+"\"); return false;'><i class='fa fa-trash'></i> Remove</button><a class='btn btn-secondary' href='"+o+"' target='_blank'><i class='fa fa-search'></i> Preview</a></td></tr>"),s("td[data-fileid='gf_"+e+"'] .insert-btn").parent().parent().addClass("inserted"),s(".inserted-title, .inserted-files-inner-office365").show()},window.set_panels_position=function(){0<s(".submission-tabs-wrap").length&&setTimeout(function(){var e=s(".grade-navigation").outerHeight()+s(".submission-tabs-wrap").outerHeight()+s(".grade-review").outerHeight()+s(".page-heading").outerHeight()+s(".grade-actions").outerHeight()+30;s('div[role="main"]').css("min-height",e+"px")},200)},s(document).ready(function(){set_panels_position(),s(".editsubmissionform .tab-content #"+s(".editsubmissionform .nav-link.active").attr("aria-controls")+"-content").addClass("active"),s("#id_general .fcontainer .tab-content #"+s(".nav-link.active").attr("aria-controls")+"-content").addClass("active"),s(".submission-tabs-wrap .tab-wrapper li, .comment-link").click(function(){s(".submission-tabs-wrap").trigger("resize")}),s(".submission-tabs-wrap").resize(function(){set_panels_position()})})});
define('mod_iassign/grading_panel', ["jquery","core/yui","core/notification","core/templates","core/fragment","core/ajax","core/str","mod_iassign/grading_form_change_checker","mod_iassign/grading_events"],function(a,b,c,d,e,f,g,h,i){var j=function(b){this._regionSelector=b,this._region=a(b),this._userCache=[],this.registerEventListeners()};return j.prototype._regionSelector=null,j.prototype._lastUserId=0,j.prototype._lastAttemptNumber=-1,j.prototype._region=null,j.prototype._niceReplaceNodeContents=function(b,c,e){var f=a.Deferred();return b.fadeOut("fast",function(){d.replaceNodeContents(b,c,e),b.fadeIn("fast",function(){f.resolve()})}),f.promise()},j.prototype._saveFormState=function(){"undefined"!=typeof window.tinyMCE&&window.tinyMCE.triggerSave();var b=a('[data-region="grading-actions-form"] [name="sendstudentnotifications"]').prop("checked");a('.gradeform [name="sendstudentnotifications"]').val(b)},j.prototype._submitForm=function(d,e){var g=a(this._region.find("form.gradeform"));a('[data-region="overlay"]').show(),g.trigger("save-form-state");var h=g.serialize(),i=this._region.attr("data-iassignmentid"),j=b.one(".file-add-data"),k=j&&j.hasOwnProperty("value")?j.get("value"):0,l=a(g).attr("data-currentfileid")?a(g).attr("data-currentfileid"):k,m=0!=a(".teacher-editor").length;f.call([{methodname:"mod_iassign_submit_grading_form",args:{iassignmentid:i,userid:this._lastUserId,jsonformdata:JSON.stringify(h),currentfileid:l,teachersannotation:m},done:this._handleFormSubmissionResponse.bind(this,h,e),fail:c.exception}])},j.prototype._handleFormSubmissionResponse=function(d,e,f){"undefined"==typeof e&&(e=this._lastUserId),f.length?a(document).trigger("reset",[this._lastUserId,d]):(g.get_strings([{key:"changessaved",component:"core"},{key:"gradechangessaveddetail",component:"mod_iassign"}]).done(function(a){c.alert(a[0],a[1])}).fail(c.exception),b.use("moodle-core-formchangechecker",function(){M.core_formchangechecker.reset_form_dirty_state()}),e==this._lastUserId?a(document).trigger("reset",e):a(document).trigger("user-changed",e)),a('[data-region="overlay"]').hide()},j.prototype._resetForm=function(b,c,d){var e=a.Event("custom");"undefined"==typeof c&&(c=this._lastUserId),this._lastUserId=0,this._refreshGradingPanel(e,c,d)},j.prototype._chooseAttempt=function(b){var d=a(b.target),e=d.data("submissions"),f=a(document.getElementById(e)),h=f.clone(),i=h.wrap(a("<form/>")).html();g.get_strings([{key:"viewadifferentattempt",component:"mod_iassign"},{key:"view",component:"core"},{key:"cancel",component:"core"}]).done(function(b){c.confirm(b[0],i,b[1],b[2],function(){var b=a("input:radio[name='select-attemptnumber']:checked").val();this._refreshGradingPanel(null,this._lastUserId,"",b)}.bind(this))}.bind(this)).fail(c.exception)},j.prototype._addPopoutButtons=function(b){var e=a(b);d.render("mod_iassign/popout_button",{}).done(function(a){var b=e.find('[data-fieldtype="filemanager"],[data-fieldtype="editor"],[data-fieldtype="grading"]').closest(".fitem");b.addClass("has-popout").find("label").parent().append(a),e.on("click",'[data-region="popout-button"]',this._togglePopout.bind(this))}.bind(this)).fail(c.exception)},j.prototype._togglePopout=function(b){b.preventDefault();var c=a(b.target).closest(".fitem");c.hasClass("popout")?a(".popout").removeClass("popout"):(a(".popout").removeClass("popout"),c.addClass("popout"),c.addClass("moodle-has-zindex"))},j.prototype._refreshGradingPanel=function(b,f,g,i){var j=this._region.attr("data-contextid");"undefined"==typeof g&&(g=""),"undefined"==typeof i&&(i=-1),this._lastUserId==f&&this._lastAttemptNumber==i&&""===g||(this._lastUserId=f,this._lastAttemptNumber=i,a(document).trigger("start-loading-user"),window.M.util.js_pending("mod-iassign-loading-user"),d.render("mod_iassign/loading",{}).done(function(b,d){this._niceReplaceNodeContents(this._region,b,d).done(function(){if(f>0){this._region.show();var b={userid:f,attemptnumber:i,jsonformdata:JSON.stringify(g)};e.loadFragment("mod_iassign","gradingpanel",j,b).done(function(b,d){this._niceReplaceNodeContents(this._region,b,d).done(function(){h.saveFormState('[data-region="grade-panel"] .gradeform'),a(document).on("editor-content-restored",function(){h.saveFormState('[data-region="grade-panel"] .gradeform')}),a('[data-region="attempt-chooser"]').on("click",this._chooseAttempt.bind(this)),this._addPopoutButtons('[data-region="grade-panel"] .gradeform'),a(document).trigger("finish-loading-user"),window.M.util.js_complete("mod-iassign-loading-user")}.bind(this)).fail(c.exception)}.bind(this)).fail(c.exception),e.loadFragment("mod_iassign","submissiontabs",j,b).done(function(b,d){this._niceReplaceNodeContents(a(".submisson-tabs"),b,d).done(function(){}.bind(this)).fail(c.exception)}.bind(this)).fail(c.exception),a('[data-region="review-panel"]').show()}else this._region.hide(),a('[data-region="review-panel"]').hide(),a(document).trigger("finish-loading-user"),window.M.util.js_complete("mod-iassign-loading-user")}.bind(this))}.bind(this)).fail(c.exception))},j.prototype.getPanelElement=function(){return a('[data-region="grade-panel"]')},j.prototype.collapsePanel=function(){this.getPanelElement().addClass("collapsed")},j.prototype.expandPanel=function(){this.getPanelElement().removeClass("collapsed")},j.prototype.registerEventListeners=function(){var b=a(document),c=a(this._region);c.on("submit","form",function(a){a.preventDefault()}),b.on("user-changed",this._refreshGradingPanel.bind(this)),b.on("save-changes",this._submitForm.bind(this)),b.on("reset",this._resetForm.bind(this)),b.on("save-form-state",this._saveFormState.bind(this)),b.on(i.COLLAPSE_GRADE_PANEL,function(){this.collapsePanel()}.bind(this)),b.on(i.COLLAPSE_REVIEW_PANEL,function(){this.expandPanel()}.bind(this)),b.on(i.EXPAND_GRADE_PANEL,function(){this.expandPanel()}.bind(this))},j});
define('mod_iassign/grading_events', function(){return{COLLAPSE_REVIEW_PANEL:"grading:collapse-review-panel",EXPAND_REVIEW_PANEL:"grading:expand-review-panel",COLLAPSE_GRADE_PANEL:"grading:collapse-grade-panel",EXPAND_GRADE_PANEL:"grading:expand-grade-panel"}});
define('mod_iassign/grading_review_panel', ["jquery","mod_iassign/grading_events"],function(a,b){var c=function(){this._region=a('[data-region="review-panel-content"]'),this.registerEventListeners()};return c.prototype._region=null,c.prototype.getReviewPanel=function(a){var b=this._region.data("panel-owner");return"undefined"==typeof b&&this._region.data("review-panel-plugin",a),this._region.data("review-panel-plugin")==a&&this._region[0]},c.prototype.getTogglePanelButton=function(){return this.getPanelElement().find('[data-region="review-panel-toggle"]')},c.prototype.getPanelElement=function(){return a('[data-region="review-panel"]')},c.prototype.getPanelContentElement=function(){return a('[data-region="review-panel-content"]')},c.prototype.togglePanel=function(){this.getPanelElement().hasClass("collapsed")?a(document).trigger(b.EXPAND_REVIEW_PANEL):a(document).trigger(b.COLLAPSE_REVIEW_PANEL)},c.prototype.collapsePanel=function(){this.getPanelElement().addClass("collapsed").removeClass("grade-panel-collapsed"),this.getPanelContentElement().attr("aria-hidden",!0)},c.prototype.expandPanel=function(){this.getPanelElement().removeClass("collapsed"),this.getPanelContentElement().removeAttr("aria-hidden")},c.prototype.registerEventListeners=function(){var c=this.getTogglePanelButton();c.click(function(a){this.togglePanel(),a.preventDefault()}.bind(this)),c.keydown(function(a){a.metaKey||a.shiftKey||a.altKey||a.ctrlKey||13!==a.keyCode&&32!==a.keyCode||(this.togglePanel(),a.preventDefault())}.bind(this));var d=a(document);d.on(b.COLLAPSE_REVIEW_PANEL,function(){this.collapsePanel()}.bind(this)),d.on(b.COLLAPSE_GRADE_PANEL,function(){this.expandPanel(),this.getPanelElement().addClass("grade-panel-collapsed")}.bind(this)),d.on(b.EXPAND_REVIEW_PANEL,function(){this.expandPanel()}.bind(this)),d.on(b.EXPAND_GRADE_PANEL,function(){this.getPanelElement().removeClass("grade-panel-collapsed")}.bind(this))},c});
define('mod_iassign/grading_navigation', ["jquery","core/notification","core/str","core/form-autocomplete","core/ajax","mod_iassign/grading_form_change_checker"],function(a,b,c,d,e,f){var g=function(e){this._regionSelector=e,this._region=a(e),this._filters=[],this._users=[],this._filteredUsers=[],this._loadAllUsers(),this._region.find('[data-action="previous-user"]').on("click",this._handlePreviousUser.bind(this)),this._region.find('[data-action="next-user"]').on("click",this._handleNextUser.bind(this)),this._region.find('[data-action="change-user"]').on("change",this._handleChangeUser.bind(this)),this._region.find('[data-region="user-filters"]').on("click",this._toggleExpandFilters.bind(this)),a(document).on("user-changed",this._refreshSelector.bind(this));var f=this._region.find('[data-region="user-filters"]'),g=a(document.getElementById(f.attr("aria-controls")));g.on("change",'[type="checkbox"]',this._filterChanged.bind(this));var h=a('[data-region="grading-navigation-panel"]').data("first-userid");h&&this._selectUserById(h),c.get_string("changeuser","mod_iassign").done(function(a){d.enhance("[data-action=change-user]",!1,"mod_iassign/participant_selector",a)}).fail(b.exception),a(document).bind("start-loading-user",function(){this._isLoading=!0}.bind(this)),a(document).bind("finish-loading-user",function(){this._isLoading=!1}.bind(this))};return g.prototype._isLoading=!1,g.prototype._regionSelector=null,g.prototype._filters=null,g.prototype._users=null,g.prototype._region=null,g.prototype._loadAllUsers=function(){var a=this._region.find("[data-action=change-user]"),c=a.attr("data-iassignmentid"),d=a.attr("data-groupid");e.call([{methodname:"mod_iassign_list_participants",args:{iassignid:c,groupid:d,filter:"",onlyids:!0},done:this._usersLoaded.bind(this),fail:b.exception}])},g.prototype._usersLoaded=function(b){if(this._filteredUsers=this._users=b,this._users.length){var c=this._region.find('[data-region="user-filters"]'),d=a(document.getElementById(c.attr("aria-controls")));d.find('[type="checkbox"]').trigger("change")}else this._selectNoUser()},g.prototype._checkClickOutsideConfigureFilters=function(b){var c=this._region.find('[data-region="configure-filters"]');if(!c.is(b.target)&&0===c.has(b.target).length){var d=this._region.find('[data-region="user-filters"]');c.hide(),c.attr("aria-hidden","true"),d.attr("aria-expanded","false"),a(document).unbind("click.mod_iassign_grading_navigation")}},g.prototype._filterChanged=function(d){var e=a(d.target).attr("name"),f=e.split("_").pop(),g=a(d.target).prop("checked");if(g)this._filters.indexOf(f)==-1&&(this._filters[this._filters.length]=f);else{var h=this._filters.indexOf(f);h!=-1&&this._filters.splice(h,1)}var i=[];this._region.find('[data-region="configure-filters"]').find('[type="checkbox"]').each(function(b,c){a(c).prop("checked")&&(i[i.length]=a(c).closest("label").text())}),i.length?this._region.find('[data-region="user-filters"] span').text(i.join(", ")):c.get_string("nofilters","mod_iassign").done(function(a){this._region.find('[data-region="user-filters"] span').text(a)}.bind(this)).fail(b.exception);var j=this._region.find("[data-action=change-user]"),k=j.attr("data-selected"),l=0;this._filteredUsers=[],a.each(this._users,function(b,c){var d=!0;a.each(this._filters,function(a,b){"submitted"==b?"0"==c.submitted&&(d=!1):"notsubmitted"==b?"1"==c.submitted&&(d=!1):"requiregrading"==b?"0"==c.requiregrading&&(d=!1):"grantedextension"==b&&"0"==c.grantedextension&&(d=!1)}),d&&(this._filteredUsers[this._filteredUsers.length]=c,k==c.id&&(l=this._filteredUsers.length-1))}.bind(this)),this._filteredUsers.length?this._selectUserById(this._filteredUsers[l].id):this._selectNoUser()},g.prototype._selectNoUser=function(){this._isLoading||(f.checkFormForChanges('[data-region="grade-panel"] .gradeform')?c.get_strings([{key:"unsavedchanges",component:"mod_iassign"},{key:"unsavedchangesquestion",component:"mod_iassign"},{key:"saveandcontinue",component:"mod_iassign"},{key:"cancel",component:"core"}]).done(function(c){b.confirm(c[0],c[1],c[2],c[3],function(){a(document).trigger("save-changes",-1)})}):a(document).trigger("user-changed",-1))},g.prototype._selectUserById=function(d){var e=this._region.find("[data-action=change-user]"),g=parseInt(d,10);this._isLoading||(f.checkFormForChanges('[data-region="grade-panel"] .gradeform')?c.get_strings([{key:"unsavedchanges",component:"mod_iassign"},{key:"unsavedchangesquestion",component:"mod_iassign"},{key:"saveandcontinue",component:"mod_iassign"},{key:"cancel",component:"core"}]).done(function(c){b.confirm(c[0],c[1],c[2],c[3],function(){a(document).trigger("save-changes",g)})}):(e.attr("data-selected",d),!isNaN(g)&&g>0&&a(document).trigger("user-changed",d)))},g.prototype._toggleExpandFilters=function(b){b.preventDefault();var c=a(b.target).closest('[data-region="user-filters"]'),d="true"==c.attr("aria-expanded"),e=a(document.getElementById(c.attr("aria-controls")));d?(e.hide(),e.attr("aria-hidden","true"),c.attr("aria-expanded","false"),a(document).unbind("click.mod_iassign_grading_navigation")):(e.css("display","inline-block"),e.attr("aria-hidden","false"),c.attr("aria-expanded","true"),b.stopPropagation(),a(document).on("click.mod_iassign_grading_navigation",this._checkClickOutsideConfigureFilters.bind(this)))},g.prototype._handlePreviousUser=function(a){a.preventDefault();var b=this._region.find("[data-action=change-user]"),c=b.attr("data-selected"),d=0,e=0;for(d=0;d<this._filteredUsers.length;d++)if(this._filteredUsers[d].id==c){e=d;break}var f=this._filteredUsers.length,g=e-1;g<0&&(g=f-1),f&&this._selectUserById(this._filteredUsers[g].id)},g.prototype._handleNextUser=function(a){a.preventDefault();var b=this._region.find("[data-action=change-user]"),c=b.attr("data-selected"),d=0,e=0;for(d=0;d<this._filteredUsers.length;d++)if(this._filteredUsers[d].id==c){e=d;break}var f=this._filteredUsers.length,g=(e+1)%f;f&&this._selectUserById(this._filteredUsers[g].id)},g.prototype._refreshCount=function(){var a=this._region.find("[data-action=change-user]"),d=a.attr("data-selected"),e=0,f=0;if(isNaN(d)||d<=0)this._region.find('[data-region="user-count"]').hide();else{for(this._region.find('[data-region="user-count"]').show(),e=0;e<this._filteredUsers.length;e++)if(this._filteredUsers[e].id==d){f=e;break}var g=this._filteredUsers.length;g&&(f+=1);var h={x:f,y:g};c.get_string("xofy","mod_iassign",h).done(function(a){this._region.find('[data-region="user-count-summary"]').text(a)}.bind(this)).fail(b.exception)}},g.prototype._refreshSelector=function(a,b){var c=this._region.find("[data-action=change-user]");b=parseInt(b,10),!isNaN(b)&&b>0&&c.attr("data-selected",b),this._refreshCount()},g.prototype._handleChangeUser=function(){var d=this._region.find("[data-action=change-user]"),e=parseInt(d.val(),10);this._isLoading||(f.checkFormForChanges('[data-region="grade-panel"] .gradeform')?c.get_strings([{key:"unsavedchanges",component:"mod_iassign"},{key:"unsavedchangesquestion",component:"mod_iassign"},{key:"saveandcontinue",component:"mod_iassign"},{key:"cancel",component:"core"}]).done(function(c){b.confirm(c[0],c[1],c[2],c[3],function(){a(document).trigger("save-changes",e)})}):!isNaN(e)&&e>0&&(d.attr("data-selected",e),a(document).trigger("user-changed",e)))},g});
define('mod_iassign/document_actions', ["jquery"],function(e){});
define('mod_iassign/grading_form_change_checker', ["jquery"],function(a){return{saveFormState:function(b){a(b).trigger("save-form-state");var c=a(b).serialize();a(b).data("saved-form-state",c)},checkFormForChanges:function(b){a(b).trigger("save-form-state");var c=a(b).serialize(),d=a(b).data("saved-form-state");return"undefined"!=typeof d&&d!=c}}});
define('mod_iassign/tabs_init', ["jquery","core/config"],function(n,t){return{init:function(){n(document).ready(function(){if(n("div[role=main] > span, div[role=main] > h2, div[role=main] > div").wrapAll('<div class="role-main-wrap" />'),"page-mod-iassign-view"==n("body").attr("id"))setInterval(function(){0!=n(".tab-pane").length&&n(".tab-pane").each(function(){(0==n(this).html().length||"file-tab-content"==n(this).attr("id")&&0==n(this).find("input.file-add-data").length)&&n('.nav-tabs a[href="#'+n(this).attr("id")+'"]').css("display","none")})},250);if("page-mod-iassign-editsubmission"==n("body").attr("id"))var t=setInterval(function(){0!=n(".tab-pane").length&&(n(".tab-pane").each(function(){0==n(this).html().length&&n('.nav-tabs a[href="#'+n(this).attr("id")+'"]').css("display","none")}),clearInterval(t))},250)})}}});
define ("mod_lti/tool_proxy_card_controller",["jquery","core/ajax","core/notification","core/templates","mod_lti/tool_proxy","mod_lti/events","mod_lti/keys","core/str"],function(a,b,c,d,e,f,g,h){var i={DELETE_BUTTON:".delete",CAPABILITIES_CONTAINER:".capabilities-container",ACTIVATE_BUTTON:".tool-card-footer a.activate"},j=2e3,k=function(a){return a.find(i.DELETE_BUTTON)},l=function(a){return a.find(i.ACTIVATE_BUTTON)},m=function(a){return a.attr("data-proxy-id")},n=function(a){a.removeClass("announcement loading success fail capabilities")},o=function(a){n(a);a.addClass("announcement loading")},p=function(a){a.removeClass("announcement loading")},q=function(b){var c=a.Deferred();n(b);b.addClass("announcement success");setTimeout(function(){b.removeClass("announcement success");c.resolve()},j);return c},r=function(b){var c=a.Deferred();n(b);b.addClass("announcement fail");setTimeout(function(){b.removeClass("announcement fail");c.resolve()},j);return c},s=function(b){var d=a.Deferred(),f=m(b);o(b);if(""===f){return a.Deferred().resolve()}h.get_strings([{key:"delete",component:"mod_lti"},{key:"delete_confirmation",component:"mod_lti"},{key:"delete",component:"mod_lti"},{key:"cancel",component:"core"}]).done(function(a){c.confirm(a[0],a[1],a[2],a[3],function(){e.delete(f).done(function(){p(b);q(b).done(function(){b.remove();d.resolve()}).fail(c.exception)}).fail(function(a){r(b);d.reject(a)})},function(){p(b);d.resolve()})}).fail(function(a){p(b);c.exception(a);d.reject(a)});return d},t=function(b){var c={proxyid:m(b)};a(document).trigger(f.START_EXTERNAL_REGISTRATION,c)},u=function(a){var b=k(a);b.click(function(b){b.preventDefault();s(a)});b.keypress(function(a){if(!a.metaKey&&!a.shiftKey&&!a.altKey&&!a.ctrlKey){if(a.keyCode==g.ENTER||a.keyCode==g.SPACE){a.preventDefault();b.click()}}});var c=l(a);c.click(function(b){b.preventDefault();t(a)});c.keypress(function(a){if(!a.metaKey&&!a.shiftKey&&!a.altKey&&!a.ctrlKey){if(a.keyCode==g.ENTER||a.keyCode==g.SPACE){a.preventDefault();c.click()}}})};return{init:function init(a){u(a)}}});
define ("mod_lti/keys",[],function(){return{ENTER:13,SPACE:32}});
define ("mod_lti/contentitem",["jquery","core/notification","core/str","core/templates","mod_lti/form-field","core/modal_factory","core/modal_events"],function(a,b,c,d,e,f,g){var h,i,j=[new e("name",e.TYPES.TEXT,!1,""),new e("introeditor",e.TYPES.EDITOR,!1,""),new e("toolurl",e.TYPES.TEXT,!0,""),new e("securetoolurl",e.TYPES.TEXT,!0,""),new e("instructorchoiceacceptgrades",e.TYPES.CHECKBOX,!0,!0),new e("instructorchoicesendname",e.TYPES.CHECKBOX,!0,!0),new e("instructorchoicesendemailaddr",e.TYPES.CHECKBOX,!0,!0),new e("instructorcustomparameters",e.TYPES.TEXT,!0,""),new e("icon",e.TYPES.TEXT,!0,""),new e("secureicon",e.TYPES.TEXT,!0,""),new e("launchcontainer",e.TYPES.SELECT,!0,0),new e("grade_modgrade_point",e.TYPES.TEXT,!1,""),new e("cmidnumber",e.TYPES.TEXT,!0,"")];window.processContentItemReturnData=function(a){if(h){h.hide()}for(var b in j){var c=j[b],d=null;if("undefined"!=typeof a[c.name]){d=a[c.name]}c.setFieldValue(d)}if(i){i()}};return{init:function init(a,e,j){i=j;var k=d.render("mod_lti/contentitem",{url:a,postData:e});if(h){h.setBody(k);h.show();return}c.get_string("selectcontent","lti").then(function(a){return f.create({title:a,body:k,large:!0})}).then(function(a){h=a;a.getRoot().on(g.hidden,function(){a.setBody("");b.fetchNotifications()});a.show()}).catch(b.exception)}}});
define ("mod_lti/external_registration",["jquery","core/ajax","core/notification","core/templates","mod_lti/events","mod_lti/tool_proxy","mod_lti/tool_type","mod_lti/keys","core/str"],function(a,b,c,d,e,f,g,h,i){var j={EXTERNAL_REGISTRATION_CONTAINER:"#external-registration-page-container",EXTERNAL_REGISTRATION_TEMPLATE_CONTAINER:"#external-registration-template-container",EXTERNAL_REGISTRATION_CANCEL_BUTTON:"#cancel-external-registration",TOOL_TYPE_CAPABILITIES_CONTAINER:"#tool-type-capabilities-container",TOOL_TYPE_CAPABILITIES_TEMPLATE_CONTAINER:"#tool-type-capabilities-template-container",CAPABILITIES_AGREE_CONTAINER:".capabilities-container"},k=function(){return a(j.EXTERNAL_REGISTRATION_CANCEL_BUTTON)},l=function(){return a(j.EXTERNAL_REGISTRATION_CONTAINER)},m=function(){return a(j.EXTERNAL_REGISTRATION_TEMPLATE_CONTAINER)},n=function(){return a(j.TOOL_TYPE_CAPABILITIES_CONTAINER)},o=function(){return a(j.TOOL_TYPE_CAPABILITIES_TEMPLATE_CONTAINER)},p=function(){n().addClass("loading")},q=function(){n().removeClass("loading")},r=function(){k().addClass("loading")},s=function(){k().removeClass("loading")},t=function(){n().addClass("hidden")},u=function(){n().removeClass("hidden")},v=function(){l().addClass("hidden")},w=function(){l().removeClass("hidden")},x=function(a){var b=k();b.attr("data-tool-proxy-id",a)},y=function(){var a=k();return a.attr("data-tool-proxy-id")},z=function(){var a=k();a.removeAttr("data-tool-proxy-id")},A=function(){return y()?!0:!1},B=function(){var a=k();return a.attr("data-tool-proxy-new")&&A()},C=function(){var a=k();return a.attr("data-tool-proxy-new","new")},D=function(){var a=k();return a.removeAttr("data-tool-proxy-new")},E=function(a){return b.call([{methodname:"mod_lti_get_tool_proxy_registration_request",args:{id:a}}])[0]},F=function(){r();var b=a.Deferred();if(B()){var d=y();f.delete(d).done(function(){b.resolve()}).fail(function(a){b.reject(a)})}else{b.resolve()}b.done(function(){L();s()}).fail(function(b){c.exception(b);L();s();i.get_string("failedtodeletetoolproxy","mod_lti").done(function(b){a(document).trigger(e.REGISTRATION_FEEDBACK,{message:b,error:!0})}).fail(c.exception)});return b},G=function(a){var b=d.render("mod_lti/tool_proxy_registration_form",a);b.done(function(a,b){var c=m();c.append(a);d.runTemplateJS(b);c.find("form").submit();w()}).fail(c.exception);return b},H=function(a){return g.update({id:a.id,state:g.constants.state.configured})},I=function(b){var f=a.Deferred();d.render("mod_lti/tool_type_capabilities_agree",b).done(function(a,c){var g=o();v();u();d.replaceNodeContents(g,a,c);var h=g.find(j.CAPABILITIES_AGREE_CONTAINER);h.on(e.CAPABILITIES_AGREE,function(){p();H(b).always(function(){q();g.empty();f.resolve()})});h.on(e.CAPABILITIES_DECLINE,function(){g.empty();f.resolve()})}).fail(f.reject);f.done(function(){t()}).fail(c.exception);return f},J=function(b){var c=a.Deferred();if(!b||""===b){c.resolve()}else{f.create({regurl:b}).done(function(a){C();c=K(a.id)}).fail(function(b){F();var d={message:b.message,error:!0};a(document).trigger(e.REGISTRATION_FEEDBACK,d);c.reject(b)})}return c},K=function(b){var c=a.Deferred();x(b);E(b).done(function(a){G(a).done(function(){c.resolve()}).fail(c.fail)}).fail(c.fail);return c},L=function(){if(A()){z()}D(!1);v();var b=m();b.empty();a(document).trigger(e.STOP_EXTERNAL_REGISTRATION)},M=function(){a(document).on(e.START_EXTERNAL_REGISTRATION,function(a,b){if(!b){return}if(b.url){J(b.url)}if(b.proxyid){K(b.proxyid)}});var b=k();b.click(function(a){a.preventDefault();F()});b.keypress(function(a){if(!a.metaKey&&!a.shiftKey&&!a.altKey&&!a.ctrlKey){if(a.keyCode==h.ENTER||a.keyCode==h.SPACE){a.preventDefault();F()}}});window.triggerExternalRegistrationComplete=function(b){var d=a.Deferred(),f={message:"",error:!1};if("success"==b.status){i.get_string("successfullycreatedtooltype","mod_lti").done(function(a){f.message=a}).fail(c.exception);d.done(function(){L();a(document).trigger(e.REGISTRATION_FEEDBACK,f);a(document).trigger(e.NEW_TOOL_TYPE)}).fail(c.exception);if(B()){var h=y();g.getFromToolProxyId(h).done(function(a){if(a&&a.length){var b=a[0];if(b.hascapabilitygroups){I(b).always(function(){d.resolve()})}else{d.resolve()}}else{d.resolve()}}).fail(function(){d.resolve()})}}else{f.message=b.error;f.error=!0;d.done(function(){F().always(function(){a(document).trigger(e.REGISTRATION_FEEDBACK,f)})}).fail(c.exception);d.resolve()}return d}};return{init:function init(){M()}}});
define ("mod_lti/tool_card_controller",["jquery","core/ajax","core/notification","core/templates","core/modal_factory","mod_lti/tool_type","mod_lti/events","mod_lti/keys","core/str"],function(a,b,c,d,e,f,g,h,i){var j={DELETE_BUTTON:".delete",NAME_ELEMENT:".name",DESCRIPTION_ELEMENT:".description",CAPABILITIES_CONTAINER:".capabilities-container",ACTIVATE_BUTTON:".tool-card-footer a.activate"},k=2e3,l=function(a){return a.find(j.DELETE_BUTTON)},m=function(a){return a.find(j.NAME_ELEMENT)},n=function(a){return a.find(j.DESCRIPTION_ELEMENT)},o=function(a){return a.find(j.ACTIVATE_BUTTON)},p=function(a){return o(a).length?!0:!1},q=function(a){return a.find(j.CAPABILITIES_CONTAINER)},r=function(a){return q(a).length?!0:!1},s=function(a){return a.attr("data-type-id")},t=function(a){a.removeClass("announcement loading success fail capabilities")},u=function(a){t(a);a.addClass("announcement loading")},v=function(a){a.removeClass("announcement loading")},w=function(b){var c=a.Deferred();t(b);b.addClass("announcement success");setTimeout(function(){b.removeClass("announcement success");c.resolve()},k);return c},x=function(b){var c=a.Deferred();t(b);b.addClass("announcement fail");setTimeout(function(){b.removeClass("announcement fail");c.resolve()},k);return c},y=function(b){var d=a.Deferred(),e=s(b);u(b);if(""===e){return a.Deferred().resolve()}i.get_strings([{key:"delete",component:"mod_lti"},{key:"delete_confirmation",component:"mod_lti"},{key:"delete",component:"mod_lti"},{key:"cancel",component:"core"}]).done(function(a){c.confirm(a[0],a[1],a[2],a[3],function(){f.delete(e).done(function(){v(b);w(b).done(function(){b.remove()}).fail(c.exception).always(function(){d.resolve()})}).fail(function(a){x(b);d.reject(a)})},function(){v(b);d.resolve()})}).fail(function(a){v(b);c.exception(a);d.reject(a)});return d},z=function(a,b){a.attr("data-val-snapshot",b)},A=function(a){return a.attr("data-val-snapshot")},B=function(a){var b=n(a);if(b.hasClass("loading")){return}var c=b.text().trim();z(b,c)},C=function(b){var d=s(b);if(""===d){return a.Deferred().resolve()}var e=n(b);if(e.hasClass("loading")){return a.Deferred().resolve()}var g=e.text().trim(),h=A(e);if(h==g){return a.Deferred().resolve()}e.addClass("loading");var i=f.update({id:d,description:g});i.done(function(a){e.removeClass("loading");e.text(a.description)}).fail(c.exception);i.fail(function(){e.removeClass("loading")});return i},D=function(a){var b=m(a);if(b.hasClass("loading")){return}var c=b.text().trim();z(b,c)},E=function(b){var c=s(b);if(""===c){return a.Deferred().resolve()}var d=m(b);if(d.hasClass("loading")){return a.Deferred().resolve()}var e=d.text().trim(),g=A(d);if(g==e){return a.Deferred().resolve()}d.addClass("loading");var h=f.update({id:c,name:e});h.done(function(a){d.removeClass("loading");d.text(a.name)});h.fail(function(){d.removeClass("loading")});return h},F=function(b){var c=s(b);if(""===c){return a.Deferred().resolve()}u(b);var e=f.update({id:c,state:f.constants.state.configured});e.then(function(a){v(b);w(b);return a}).then(function(a){return d.render("mod_lti/tool_card",a)}).then(function(a){var c=a[0],e=a[1];d.replaceNode(b,c,e)}).catch(function(){v(b);x(b)});return e},G=function(a){a.addClass("announcement capabilities")},H=function(a){a.removeClass("announcement capabilities")},I=function(a){if(r(a)){G(a)}else{F(a)}},J=function(a){var b=l(a);b.click(function(b){b.preventDefault();y(a)});b.keypress(function(a){if(!a.metaKey&&!a.shiftKey&&!a.altKey&&!a.ctrlKey){if(a.keyCode==h.ENTER||a.keyCode==h.SPACE){a.preventDefault();b.click()}}});var c=n(a);c.focus(function(b){b.preventDefault();B(a)});c.blur(function(b){b.preventDefault();C(a)});c.keypress(function(a){if(!a.metaKey&&!a.shiftKey&&!a.altKey&&!a.ctrlKey){if(a.keyCode==h.ENTER){a.preventDefault();c.blur()}}});var d=m(a);d.focus(function(b){b.preventDefault();D(a)});d.blur(function(b){b.preventDefault();E(a)});d.keypress(function(a){if(!a.metaKey&&!a.shiftKey&&!a.altKey&&!a.ctrlKey){if(a.keyCode==h.ENTER){a.preventDefault();d.blur()}}});if(p(a)){var f=o(a);f.click(function(b){b.preventDefault();I(a)});f.keypress(function(a){if(!a.metaKey&&!a.shiftKey&&!a.altKey&&!a.ctrlKey){if(a.keyCode==h.ENTER||a.keyCode==h.SPACE){a.preventDefault();f.click()}}})}if(r(a)){var i=q(a);i.on(g.CAPABILITIES_AGREE,function(){F(a)});i.on(g.CAPABILITIES_DECLINE,function(){H(a)})}},K=function(b){var c=a("#"+b.data("uniqid")+"-"+b.data("deploymentid")),f={uniqid:b.data("uniqid"),platformid:b.data("platformid"),clientid:b.data("clientid"),deploymentid:b.data("deploymentid"),urls:{publickeyset:b.data("publickeyseturl"),accesstoken:b.data("accesstokenurl"),authrequest:b.data("authrequesturl")}},g=d.render("mod_lti/tool_config_modal_body",f),h="mailto:?subject="+encodeURIComponent(b.data("mailtosubject"))+"&body="+encodeURIComponent(b.data("platformidstr"))+":%20"+encodeURIComponent(b.data("platformid"))+"%0D%0A"+encodeURIComponent(b.data("clientidstr"))+":%20"+encodeURIComponent(b.data("clientid"))+"%0D%0A"+encodeURIComponent(b.data("deploymentidstr"))+":%20"+encodeURIComponent(b.data("deploymentid"))+"%0D%0A"+encodeURIComponent(b.data("publickeyseturlstr"))+":%20"+encodeURIComponent(b.data("publickeyseturl"))+"%0D%0A"+encodeURIComponent(b.data("accesstokenurlstr"))+":%20"+encodeURIComponent(b.data("accesstokenurl"))+"%0D%0A"+encodeURIComponent(b.data("authrequesturlstr"))+":%20"+encodeURIComponent(b.data("authrequesturl"))+"%0D%0A";f={mailto:h};var i=d.render("mod_lti/tool_config_modal_footer",f);e.create({large:!0,title:b.data("modaltitle"),body:g,footer:i},c)};return{init:function init(a){J(a);K(a)}}});
define ("mod_lti/form-field",["jquery"],function(a){var b=function(a,b,c,d){this.name=a;this.id="id_"+this.name;this.selector="#"+this.id;this.type=b;this.resetIfUndefined=c;this.defaultValue=d};b.TYPES={TEXT:1,SELECT:2,CHECKBOX:3,EDITOR:4};b.prototype.setFieldValue=function(c){if(null===c){if(this.resetIfUndefined){c=this.defaultValue}else{return}}switch(this.type){case b.TYPES.CHECKBOX:if(c){a(this.selector).prop("checked",!0)}else{a(this.selector).prop("checked",!1)}break;case b.TYPES.EDITOR:if("undefined"!=typeof c.text){var d=a(this.selector+"editable");if(d.length){d.html(c.text)}else if("undefined"!=typeof tinyMCE){tinyMCE.execInstanceCommand(this.id,"mceInsertContent",!1,c.text)}a(this.selector).val(c.text)}break;default:a(this.selector).val(c);break;}};return b});
define ("mod_lti/tool_configure_controller",["jquery","core/ajax","core/notification","core/templates","mod_lti/events","mod_lti/keys","mod_lti/tool_type","mod_lti/tool_proxy","core/str"],function(a,b,c,d,e,f,g,h,i){var j={EXTERNAL_REGISTRATION_CONTAINER:"#external-registration-container",EXTERNAL_REGISTRATION_PAGE_CONTAINER:"#external-registration-page-container",CARTRIDGE_REGISTRATION_CONTAINER:"#cartridge-registration-container",CARTRIDGE_REGISTRATION_FORM:"#cartridge-registration-form",ADD_TOOL_FORM:"#add-tool-form",TOOL_LIST_CONTAINER:"#tool-list-container",TOOL_CREATE_BUTTON:"#tool-create-button",REGISTRATION_CHOICE_CONTAINER:"#registration-choice-container",TOOL_URL:"#tool-url"},k=function(){return a(j.TOOL_CREATE_BUTTON)},l=function(){return a(j.TOOL_LIST_CONTAINER)},m=function(){return a(j.EXTERNAL_REGISTRATION_CONTAINER)},n=function(){return a(j.CARTRIDGE_REGISTRATION_CONTAINER)},o=function(){return a(j.REGISTRATION_CHOICE_CONTAINER)},p=function(){return a(j.TOOL_URL).val()},q=function(){m().addClass("hidden")},r=function(){n().addClass("hidden")},s=function(){o().addClass("hidden")},t=function(){r();s();m().removeClass("hidden");w(m())},u=function(a){q();s();var b=n();b.find("input").val("");b.removeClass("hidden");b.find(j.CARTRIDGE_REGISTRATION_FORM).attr("data-cartridge-url",a);w(b)},v=function(){q();r();o().removeClass("hidden");w(o())},w=function(a){var b=a.children().detach();b.appendTo(a)},x=function(){l().addClass("hidden")},y=function(){l().removeClass("hidden")},z=function(a){var b=a.error?"error":"success";c.addNotification({message:a.message,type:b})},A=function(a){a.addClass("loading")},B=function(a){a.removeClass("loading")},C=function(){var b=a.Deferred(),e=l();A(e);a.when(g.query(),h.query({orphanedonly:!0})).done(function(a,c){d.render("mod_lti/tool_list",{tools:a,proxies:c}).done(function(a,c){e.empty();e.append(a);d.runTemplateJS(c);b.resolve()}).fail(b.reject)}).fail(b.reject);b.fail(c.exception).always(function(){B(e)})},D=function(){var b=a.trim(p());if(""===b){return a.Deferred().resolve()}var d=k();A(d);var f=g.isCartridge(b);f.always(function(){B(d)});f.done(function(c){if(c.iscartridge){a(j.TOOL_URL).val("");a(document).trigger(e.START_CARTRIDGE_REGISTRATION,b)}else{a(document).trigger(e.START_EXTERNAL_REGISTRATION,{url:b})}});f.fail(function(){i.get_string("errorbadurl","mod_lti").done(function(b){a(document).trigger(e.REGISTRATION_FEEDBACK,{message:b,error:!0})}).fail(c.exception)});return f},E=function(){a(document).on(e.NEW_TOOL_TYPE,function(){C()});a(document).on(e.START_EXTERNAL_REGISTRATION,function(){t();a(j.TOOL_URL).val("");x()});a(document).on(e.STOP_EXTERNAL_REGISTRATION,function(){y();v()});a(document).on(e.START_CARTRIDGE_REGISTRATION,function(a,b){u(b)});a(document).on(e.STOP_CARTRIDGE_REGISTRATION,function(){n().find(j.CARTRIDGE_REGISTRATION_FORM).removeAttr("data-cartridge-url");v()});a(document).on(e.REGISTRATION_FEEDBACK,function(a,b){z(b)});var b=a(j.ADD_TOOL_FORM);b.submit(function(a){a.preventDefault();D()})};return{init:function init(){E();C()}}});
define ("mod_lti/external_registration_return",[],function(){return{init:function init(a,b,c,d){if(window.parent){window.parent.triggerExternalRegistrationComplete({message:a,error:b,id:c,status:d})}}}});
define ("mod_lti/tool_type",["core/ajax","core/notification"],function(a,b){return{query:function query(c){var d=a.call([{methodname:"mod_lti_get_tool_types",args:c||{}}])[0];d.fail(b.exception);return d},create:function create(b){var c=a.call([{methodname:"mod_lti_create_tool_type",args:b}])[0];return c},update:function update(c){var d=a.call([{methodname:"mod_lti_update_tool_type",args:c}])[0];d.fail(b.exception);return d},delete:function _delete(c){var d=a.call([{methodname:"mod_lti_delete_tool_type",args:{id:c}}])[0];d.fail(b.exception);return d},getFromToolProxyId:function getFromToolProxyId(a){return this.query({toolproxyid:a})},isCartridge:function isCartridge(b){var c=a.call([{methodname:"mod_lti_is_cartridge",args:{url:b}}])[0];return c},constants:{state:{configured:1,pending:2,rejected:3}}}});
define ("mod_lti/tool_proxy",["core/ajax","core/notification"],function(a,b){return{query:function query(c){var d=a.call([{methodname:"mod_lti_get_tool_proxies",args:c||{}}])[0];d.fail(b.exception);return d},delete:function _delete(c){var d=a.call([{methodname:"mod_lti_delete_tool_proxy",args:{id:c}}])[0];d.fail(b.exception);return d},create:function create(b){var c=a.call([{methodname:"mod_lti_create_tool_proxy",args:b}])[0];return c}}});
define ("mod_lti/cartridge_registration_form",["jquery","core/ajax","core/notification","mod_lti/tool_type","mod_lti/events","mod_lti/keys","core/str"],function(a,b,c,d,f,g,h){var i={CARTRIDGE_URL:"#cartridge-url",CONSUMER_KEY:"#registration-key",SHARED_SECRET:"#registration-secret",REGISTRATION_FORM:"#cartridge-registration-form",REGISTRATION_SUBMIT_BUTTON:"#cartridge-registration-submit",REGISTRATION_CANCEL_BUTTON:"#cartridge-registration-cancel"},j=function(){return a(i.REGISTRATION_FORM).attr("data-cartridge-url")},k=function(){return a(i.REGISTRATION_SUBMIT_BUTTON)},l=function(){return a(i.REGISTRATION_CANCEL_BUTTON)},m=function(){return a(i.CONSUMER_KEY).val()},n=function(){return a(i.SHARED_SECRET).val()},o=function(){k().addClass("loading")},p=function(){k().removeClass("loading")},q=function(){return k().hasClass("loading")},r=function(){if(q()){return!1}var b=j();if(""===b){return!1}o();var e=m(),g=n(),i=d.create({cartridgeurl:b,key:e,secret:g});i.done(function(){h.get_string("successfullycreatedtooltype","mod_lti").done(function(b){a(document).trigger(f.NEW_TOOL_TYPE);a(document).trigger(f.STOP_CARTRIDGE_REGISTRATION);a(document).trigger(f.REGISTRATION_FEEDBACK,{message:b})}).fail(c.exception)}).fail(function(){h.get_string("failedtocreatetooltype","mod_lti").done(function(b){a(document).trigger(f.NEW_TOOL_TYPE);a(document).trigger(f.STOP_CARTRIDGE_REGISTRATION);a(document).trigger(f.REGISTRATION_FEEDBACK,{message:b,error:!0})}).fail(c.exception)}).always(function(){p()});return i},s=function(){var b=a(i.REGISTRATION_FORM);b.submit(function(a){a.preventDefault();r()});var c=l();c.click(function(b){b.preventDefault();a(document).trigger(f.STOP_CARTRIDGE_REGISTRATION)});c.keypress(function(a){if(!a.metaKey&&!a.shiftKey&&!a.altKey&&!a.ctrlKey){if(a.keyCode==g.ENTER||a.keyCode==g.SPACE){a.preventDefault();c.click()}}})};return{init:function init(){s()}}});
define ("mod_lti/events",[],function(){return{NEW_TOOL_TYPE:"lti.tool.type.new",START_EXTERNAL_REGISTRATION:"lti.registration.external.start",STOP_EXTERNAL_REGISTRATION:"lti.registration.external.stop",START_CARTRIDGE_REGISTRATION:"lti.registration.cartridge.start",STOP_CARTRIDGE_REGISTRATION:"lti.registration.cartridge.stop",REGISTRATION_FEEDBACK:"lti.registration.feedback",CAPABILITIES_AGREE:"lti.tool.type.capabilities.agree",CAPABILITIES_DECLINE:"lti.tool.type.capabilities.decline"}});
define ("mod_lti/contentitem_return",["jquery"],function(a){return{init:function init(b){a(window).ready(function(){if(window!=top){parent.processContentItemReturnData(b)}else{window.processContentItemReturnData(b)}})}}});
define ("mod_quiz/add_question_modal_launcher",["jquery","core/notification","core/modal_factory"],function(a,b,c){return{init:function init(d,e,f,g){var h=a("body");return c.create({type:d,large:!0,preShowCallback:function preShowCallback(b,c){b=a(b);c.setContextId(f);c.setAddOnPageId(b.attr("data-addonpage"));c.setTitle(b.attr("data-header"));if(g){g(b,c)}}},[h,e]).fail(b.exception)}}});
define ("mod_quiz/random_question_form_preview",["jquery","core/ajax","core/str","core/notification","core/templates","core/paged_content_factory"],function(a,b,c,d,e,f){var g="mod_quiz/random_question_form_preview_question_list",h={LOADING_ICON_CONTAINER:"[data-region=\"overlay-icon-container\"]",QUESTION_COUNT_CONTAINER:"[data-region=\"question-count-container\"]",QUESTION_LIST_CONTAINER:"[data-region=\"question-list-container\"]"},i=function(a){a.find(h.LOADING_ICON_CONTAINER).removeClass("hidden")},j=function(a){a.find(h.LOADING_ICON_CONTAINER).addClass("hidden")},k=function(a,b){c.get_string("questionsmatchingfilter","mod_quiz",b).then(function(b){a.find(h.QUESTION_COUNT_CONTAINER).html(b)}).fail(d.exception)},l=function(a,c,d,e,f,g){return b.call([{methodname:"core_question_get_random_question_summaries",args:{categoryid:a,includesubcategories:c,tagids:d,contextid:e,limit:f,offset:g}}])[0]},m=function(a,b,c,h,i,j){return f.createFromAjax(i,5,function(f){return f.map(function(f){var i=f.limit,k=f.offset;if(0==k){return e.render(g,{questions:j})}else{return l(a,b,c,h,i,k).then(function(a){var b=a.questions;return e.render(g,{questions:b})}).fail(d.exception)}})})};return{reload:function reload(b,c,f,g,n){i(b);return l(c,f,g,n,5,0).then(function(a){var c=a.totalcount;k(b,c);return a}).then(function(b){var d=b.totalcount,e=b.questions;if(e.length){return m(c,f,g,n,d,e)}else{return a.Deferred().resolve("","")}}).then(function(a,c){var d=b.find(h.QUESTION_LIST_CONTAINER);e.replaceNodeContents(d,a,c)}).always(function(){j(b)}).fail(d.exception)},showLoadingIcon:i,hideLoadingIcon:j}});
define ("mod_quiz/add_random_form",["jquery","mod_quiz/random_question_form_preview"],function(a,b){var c={PREVIEW_CONTAINER:"[data-region=\"random-question-preview-container\"]",CATEGORY_FORM_ELEMENT:"[name=\"category\"]",SUBCATEGORY_FORM_ELEMENT:"[name=\"includesubcategories\"]",TAG_IDS_FORM_ELEMENT:"[name=\"fromtags[]\"]"},d=function(a){return a.find(c.CATEGORY_FORM_ELEMENT).val()},e=function(a){var b=d(a),c=b.split(",");return c[0]},f=function(a,b){var c=d(a);return-1<b.indexOf(c)},g=function(a,b){if(f(a,b)){return!0}else{return a.find(c.SUBCATEGORY_FORM_ELEMENT).is(":checked")}},h=function(a){var b=a.find(c.TAG_IDS_FORM_ELEMENT).val();return b.map(function(a){var b=a.split(",");return b[0]})},i=function(a,d,f){var i=a.find(c.PREVIEW_CONTAINER);b.reload(i,e(a),g(a,f),h(a),d)},j=function(a){if(0<a.closest(c.CATEGORY_FORM_ELEMENT).length){return!0}if(0<a.closest(c.SUBCATEGORY_FORM_ELEMENT).length){return!0}if(0<a.closest(c.TAG_IDS_FORM_ELEMENT).length){return!0}return!1},k=function(c,d,e){var f=null;c.on("change",function(g){if(!j(a(g.target))){return}b.showLoadingIcon(c);if(f){clearTimeout(f)}f=setTimeout(function(){i(c,d,e)},2000)})};return{init:function init(b,c,d,e){if(!0==e){var f=a("#"+b);i(f,c,d,e);k(f,c,d,e)}}}});
define ("mod_quiz/quizquestionbank",["mod_quiz/add_question_modal_launcher","mod_quiz/modal_quiz_question_bank"],function(a,b){return{init:function init(c){a.init(b.TYPE,".menu [data-action=\"questionbank\"]",c)}}});
define ("mod_quiz/repaginate",["jquery","core/modal_factory"],function(a,b){var c={REPAGINATECOMMAND:"#repaginatecommand",HEADER:"header",BODY:"form"};return{init:function init(){b.create({title:a(c.REPAGINATECOMMAND).data(c.HEADER),body:a(c.REPAGINATECOMMAND).data(c.BODY),large:!1},a(c.REPAGINATECOMMAND))}}});
define ("mod_quiz/modal_quiz_question_bank",["jquery","core/yui","core/notification","core/modal","core/modal_events","core/modal_registry","core/fragment"],function(a,b,c,d,e,f,g){var h=!1,i={ADD_TO_QUIZ_CONTAINER:"td.addtoquizaction",ANCHOR:"a[href]",PREVIEW_CONTAINER:"td.previewaction",SEARCH_OPTIONS:"#advancedsearch",DISPLAY_OPTIONS:"#displayoptions",ADD_QUESTIONS_FORM:"form[action=\"edit.php\"]"},j=function(a){d.call(this,a);this.contextId=null;this.addOnPageId=null};j.TYPE="mod_quiz-quiz-question-bank";j.prototype=Object.create(d.prototype);j.prototype.constructor=j;j.prototype.setContextId=function(a){this.contextId=a};j.prototype.getContextId=function(){return this.contextId};j.prototype.setAddOnPageId=function(a){this.addOnPageId=a};j.prototype.getAddOnPageId=function(){return this.addOnPageId};j.prototype.show=function(){this.reloadBodyContent(window.location.search);return d.prototype.show.call(this)};j.prototype.reloadBodyContent=function(a){var b=g.loadFragment("mod_quiz","quiz_question_bank",this.getContextId(),{querystring:a}).fail(c.exception);this.setBody(b)};j.prototype.handleAddToQuizEvent=function(a,b){var c=b.attr("href")+"&addonpage="+this.getAddOnPageId();b.attr("href",c)};j.prototype.handlePreviewContainerEvent=function(a,b){window.openpopup(a,{url:b.attr("href"),name:"questionpreview",options:["height=600","width=800","top=0","left=0","menubar=0","location=0","scrollbars","resizable","toolbar","status","directories=0","fullscreen=0","dependent"].join(",")})};j.prototype.handleDisplayOptionFormEvent=function(b){b.stopPropagation();b.preventDefault();var c=a(b.target).closest(i.DISPLAY_OPTIONS),d="?"+c.serialize();this.reloadBodyContent(d)};j.prototype.registerDisplayOptionListeners=function(){this.getModal().on("change",i.DISPLAY_OPTIONS,function(b){var c=a(b.target);if(c.attr("aria-autocomplete")){return}this.handleDisplayOptionFormEvent(b)}.bind(this));this.getModal().on("submit",i.DISPLAY_OPTIONS,function(a){this.handleDisplayOptionFormEvent(a)}.bind(this))};j.prototype.registerEventListeners=function(){d.prototype.registerEventListeners.call(this);this.registerDisplayOptionListeners();this.getModal().on("submit",i.ADD_QUESTIONS_FORM,function(b){var c=a(b.currentTarget);a("<input />").attr("type","hidden").attr("name","addonpage").attr("value",this.getAddOnPageId()).appendTo(c)}.bind(this));this.getModal().on("click",i.ANCHOR,function(b){var c=a(b.currentTarget);if(c.closest(i.ADD_TO_QUIZ_CONTAINER).length){this.handleAddToQuizEvent(b,c);return}if(c.closest(i.PREVIEW_CONTAINER).length){this.handlePreviewContainerEvent(b,c);return}if(c.closest(i.SEARCH_OPTIONS).length){return}b.preventDefault();this.reloadBodyContent(c.prop("search"))}.bind(this));this.getRoot().on(e.bodyRendered,function(){b.use("moodle-core-formchangechecker",function(){M.core_formchangechecker.reset_form_dirty_state()})})};if(!h){f.register(j.TYPE,j,"core/modal");h=!0}return j});
define ("mod_quiz/add_random_question",["mod_quiz/add_question_modal_launcher","mod_quiz/modal_add_random_question"],function(a,b){return{init:function init(c,d,e,f){a.init(b.TYPE,".menu [data-action=\"addarandomquestion\"]",c,function(a,b){b.setCategory(d);b.setReturnUrl(e);b.setCMID(f)})}}});
define ("mod_quiz/modal_add_random_question",["jquery","core/yui","core/notification","core/modal","core/modal_events","core/modal_registry","core/fragment","core/templates"],function(a,b,c,d,e,f,g,h){var i=!1,j={EXISTING_CATEGORY_CONTAINER:"[data-region=\"existing-category-container\"]",EXISTING_CATEGORY_FORM_ELEMENT:"#id_existingcategoryheader",NEW_CATEGORY_CONTAINER:"[data-region=\"new-category-container\"]",NEW_CATEGORY_FORM_ELEMENT:"#id_newcategoryheader",TAB_CONTENT:"[data-region=\"tab-content\"]",ADD_ON_PAGE_FORM_ELEMENT:"[name=\"addonpage\"]",SUBMIT_BUTTON_ELEMENT:"input[type=\"submit\"]",CANCEL_BUTTON_ELEMENT:"input[type=\"submit\"][name=\"cancel\"]",FORM_HEADER:"legend",BUTTON_CONTAINER:".fitem"},k=function(a){d.call(this,a);this.contextId=null;this.addOnPageId=null;this.category=null;this.returnUrl=null;this.cmid=null;this.loadedForm=!1};k.TYPE="mod_quiz-quiz-add-random-question";k.prototype=Object.create(d.prototype);k.prototype.constructor=k;k.prototype.setContextId=function(a){this.contextId=a};k.prototype.getContextId=function(){return this.contextId};k.prototype.setAddOnPageId=function(a){this.addOnPageId=a;this.getBody().find(j.ADD_ON_PAGE_FORM_ELEMENT).val(a)};k.prototype.getAddOnPageId=function(){return this.addOnPageId};k.prototype.setCategory=function(a){this.category=a};k.prototype.getCategory=function(){return this.category};k.prototype.setReturnUrl=function(a){this.returnUrl=a};k.prototype.getReturnUrl=function(){return this.returnUrl};k.prototype.setCMID=function(a){this.cmid=a};k.prototype.getCMID=function(){return this.cmid};k.prototype.moveFormElementIntoTab=function(b,c){var d=b.find(j.SUBMIT_BUTTON_ELEMENT),e=a("<div class=\"modal-footer mt-1\" data-region=\"footer\"></div>");b.find(j.FORM_HEADER).addClass("hidden");b.wrap(c);d.closest(j.BUTTON_CONTAINER).remove();d.appendTo(e);e.appendTo(b)};k.prototype.moveTabsIntoTabContent=function(a){var b=this.getBody().find(j.TAB_CONTENT).empty();a.find("[role=\"tabpanel\"]").wrapAll(b)};k.prototype.moveCancelButtonToTabs=function(a){var b=a.find(j.CANCEL_BUTTON_ELEMENT).addClass("ml-1"),c=a.find("[data-region=\"footer\"]");b.closest(j.BUTTON_CONTAINER).remove();b.clone().appendTo(c)};k.prototype.loadForm=function(){return g.loadFragment("mod_quiz","add_random_question_form",this.getContextId(),{addonpage:this.getAddOnPageId(),cat:this.getCategory(),returnurl:this.getReturnUrl(),cmid:this.getCMID()}).then(function(b,c){var d=a(b),e=d.find(j.EXISTING_CATEGORY_FORM_ELEMENT),f=this.getBody().find(j.EXISTING_CATEGORY_CONTAINER),g=d.find(j.NEW_CATEGORY_FORM_ELEMENT),i=this.getBody().find(j.NEW_CATEGORY_CONTAINER);this.moveFormElementIntoTab(e,f);this.moveFormElementIntoTab(g,i);this.moveTabsIntoTabContent(d);this.moveCancelButtonToTabs(d);h.replaceNode(this.getBody().find(j.TAB_CONTENT),d,c)}.bind(this)).then(function(){b.use("moodle-core-formchangechecker",function(){M.core_formchangechecker.reset_form_dirty_state()})}).fail(c.exception)};k.prototype.show=function(){d.prototype.show.call(this);if(!this.loadedForm){this.loadForm();this.loadedForm=!0}};if(!i){f.register(k.TYPE,k,"mod_quiz/modal_add_random_question");i=!0}return k});
define ("mod_quiz/preflightcheck",["jquery","core/yui"],function(a,b){var c={confirmDialogue:null,init:function init(a,d,e,f){var g=a;b.use("moodle-core-notification",function(){if(b.one(e)){c.confirmDialogue=new M.core.dialogue({headerContent:d,bodyContent:b.one(e),draggable:!0,visible:!1,center:!0,modal:!0,width:null,extraClasses:["mod_quiz_preflight_popup"]});b.one(a).on("click",c.displayDialogue);b.one("#id_cancel").on("click",c.hideDialogue);g=c.confirmDialogue.get("boundingBox").one("[name=\"submitbutton\"]")}if(f){b.one(g).on("click",c.launchQuizPopup,c,f)}})},displayDialogue:function displayDialogue(a){if(a){a.halt()}c.confirmDialogue.show()},hideDialogue:function hideDialogue(a){if(a){a.halt()}c.confirmDialogue.hide(a)},launchQuizPopup:function launchQuizPopup(a,c){a.halt();b.use("moodle-core-formchangechecker","io-form",function(){M.core_formchangechecker.reset_form_dirty_state();var d=a.target.ancestor("form");window.openpopup(a,{url:d.get("action")+"?"+b.IO.stringify(d).replace(/\bcancel=/,"x="),windowname:"quizpopup",options:c,fullscreen:!0})})}};return c});
define ("mod_survey/validation",["jquery","core/str","core/modal_factory","core/notification"],function(a,b,c,d){return{ensureRadiosChosen:function ensureRadiosChosen(e){var f=b.get_strings([{key:"error",component:"moodle"},{key:"questionsnotanswered",component:"survey"}]).then(function(a){return c.create({type:c.types.CANCEL,title:a[0],body:a[1]})}).catch(d.exception),g=a("#"+e);g.submit(function(a){if(0!==g.find("input:radio[data-survey-default=\"true\"]:checked").length){a.preventDefault();return f.then(function(a){a.show();return!1})}return!0})}}});
define('mod_turnitintooltwo/migration_tool_launch', ["jquery","core/templates","core/modal_factory","core/modal_events","mod_turnitintooltwo/modal_migration_tool","mod_turnitintooltwo/migration_tool_migrate"],function(a,b,c,d,e,f){return{migration_tool_launch:function(){a.ajax({dataType:"json",type:"POST",url:M.cfg.wwwroot+"/mod/turnitintooltwo/ajax.php",data:{action:"check_migrated",turnitintoolid:a("#migrate_type").data("turnitintoolid"),sesskey:M.cfg.sesskey},success:function(b){b.migrated===!0?window.location.href=M.cfg.wwwroot+"/mod/turnitintooltwo/view.php?id="+b.v2id:c.create({type:e.TYPE}).then(function(b){b.show(),2===a("#migrate_type").data("migratetype")&&(a(".asktomigrate").hide(),a(".migrating").show(),f.migration_tool_migrate(a("#migrate_type").data("courseid"),a("#migrate_type").data("turnitintoolid")))})}})}}});
define('mod_turnitintooltwo/modal_migration_tool', ["jquery","core/notification","core/custom_interaction_events","core/modal","core/modal_registry","core/modal_events","core/config","mod_turnitintooltwo/migration_tool_migrate"],function(a,b,c,d,e,f,g,h){var i=!1,j={MIGRATE_BUTTON:'[data-action="migrate-assignment"]',CANCEL_BUTTON:'[data-action="cancel"]'},k=function(a){d.call(this,a)};return k.TYPE="mod_turnitintooltwo-migration_tool",k.prototype=Object.create(d.prototype),k.prototype.constructor=k,k.prototype.registerEventListeners=function(){d.prototype.registerEventListeners.call(this),this.getModal().on(c.events.activate,j.MIGRATE_BUTTON,function(){a(".asktomigrate").hide(),a(".migrating").show(),h.migration_tool_migrate(a("#migrate_type").data("courseid"),a("#migrate_type").data("turnitintoolid"))}.bind(this)),this.getModal().on(c.events.activate,j.CANCEL_BUTTON,function(b,c){var d=a.Event(f.cancel);this.getRoot().trigger(d,this),d.isDefaultPrevented()||(this.hide(),c.originalEvent.preventDefault())}.bind(this))},i||(e.register(k.TYPE,k,"mod_turnitintooltwo/modal_migration_tool"),i=!0),k});
define('mod_turnitintooltwo/migration_tool_migrate', ["jquery"],function(a){return{migration_tool_migrate:function(b,c){a.ajax({dataType:"json",type:"POST",url:M.cfg.wwwroot+"/mod/turnitintooltwo/ajax.php",data:{action:"begin_migration",courseid:b,turnitintoolid:c,sesskey:M.cfg.sesskey},success:function(a){window.location.href=M.cfg.wwwroot+"/mod/turnitintooltwo/view.php?id="+a.id},error:function(b){var c=b.responseJSON;a("#turnitintool_style").prepend('<div id="full-error" class="box generalbox noticebox">'+c.error+" "+c.message+"</div>")}})}}});
define ("mod_workshop/modform",["jquery"],function(a){var e={text:{available:null,required:null,requiredHidden:null},file:{available:null,required:null,requiredHidden:null}};function b(a,b){if(!a.available.prop("checked")){a.required.prop("disabled",!0);a.required.prop("checked",!1);if(b.available.prop("checked")){b.required.prop("disabled",!0);b.required.prop("checked",!0);b.requiredHidden.val(1)}}}function c(a){a.required.prop("disabled",!1);a.required.prop("checked",!1);a.requiredHidden.val(0)}function d(){b(e.file,e.text);b(e.text,e.file);if(e.text.available.prop("checked")&&e.file.available.prop("checked")){c(e.text);c(e.file)}}return{init:function init(){e.text.available=a("#id_submissiontypetextavailable");e.text.required=a("#id_submissiontypetextrequired");e.text.requiredHidden=a("input[name=\"submissiontypetextrequired\"][type=\"hidden\"]");e.file.available=a("#id_submissiontypefileavailable");e.file.required=a("#id_submissiontypefilerequired");e.file.requiredHidden=a("input[name=\"submissiontypefilerequired\"][type=\"hidden\"]");e.text.available.on("change",d);e.file.available.on("change",d);d()}}});
define ("mod_workshop/workshopview",["jquery"],function(a){function b(b){var c=0;b.height("auto");b.each(function(){var b=a(this).height();if(b>c){c=b}});b.height(c)}return{init:function init(){var c=a(".path-mod-workshop .userplan dt"),d=a(".path-mod-workshop .userplan dd");b(c);b(d);a(window).on("resize",function(){b(c);b(d)})}}});
define ("enrol_manual/quickenrolment",["core/templates","jquery","core/str","core/config","core/notification","core/modal_factory","core/modal_events","core/fragment","core/pending"],function(a,b,c,d,f,g,h,i,j){var k={COHORTSELECT:"#id_cohortlist",TRIGGERBUTTONS:".enrolusersbutton.enrol_manual_plugin [type='submit']",UNWANTEDHIDDENFIELDS:":input[value='_qf__force_multiselect_submission']"},l=function(a){this.contextid=a.contextid;this.initModal()};l.prototype.courseid=0;l.prototype.modal=null;l.prototype.initModal=function(){var a=b(k.TRIGGERBUTTONS);b.when(c.get_strings([{key:"enroluserscohorts",component:"enrol_manual"},{key:"enrolusers",component:"enrol_manual"}]),g.create({type:g.types.SAVE_CANCEL,large:!0},a)).then(function(a,c){this.modal=c;c.setTitle(a[1]);c.setSaveButtonText(a[1]);c.getRoot().on(h.save,this.submitForm.bind(this));c.getRoot().on("submit","form",this.submitFormAjax.bind(this));c.getRoot().on(h.hidden,function(){c.setBody("")});c.getRoot().on(h.shown,function(){var d=new j("enrol_manual/quickenrolment:initModal:shown"),e=this.getBody();e.then(function(d){var e=b(d).find(k.COHORTSELECT).length?0:1;c.setSaveButtonText(a[e])}).then(d.resolve).catch(f.exception);c.setBody(e)}.bind(this))}.bind(this)).fail(f.exception)};l.prototype.submitForm=function(a){a.preventDefault();this.modal.getRoot().find("form").submit()};l.prototype.submitFormAjax=function(a){a.preventDefault();var c=this.modal.getRoot().find("form"),e=c.find(k.UNWANTEDHIDDENFIELDS);e.each(function(){b(this).remove()});var g=c.serialize();this.modal.hide();var h=d.wwwroot+"/enrol/manual/ajax.php?"+g;b.ajax(h,{type:"GET",processData:!1,contentType:"application/json"}).then(function(a){if(a.error){f.addNotification({message:a.error,type:"error"})}else{if("undefined"!=typeof window.M.core_formchangechecker){window.M.core_formchangechecker.reset_form_dirty_state()}window.location.reload()}}).fail(f.exception)};l.prototype.getBody=function(){return i.loadFragment("enrol_manual","enrol_users_form",this.contextid,{}).fail(f.exception)};l.prototype.getFooter=function(){return a.render("enrol_manual/enrol_modal_footer",{})};return{init:function init(a){new l(a)}}});
define ("enrol_manual/form-potential-user-selector",["jquery","core/ajax","core/templates","core/str"],function(a,b,c,d){return{processResults:function processResults(b,c){var d=[];if(a.isArray(c)){a.each(c,function(a,b){d.push({value:b.id,label:b._label})});return d}else{return c}},transport:function transport(e,f,g,h){var i,j=a(e).attr("courseid"),k=a(e).attr("userfields").split(",");if("undefined"==typeof j){j="1"}var l=a(e).attr("enrolid");if("undefined"==typeof l){l=""}var m=parseInt(a(e).attr("perpage"));if(isNaN(m)){m=100}i=b.call([{methodname:"core_enrol_get_potential_users",args:{courseid:j,enrolid:l,search:f,searchanywhere:!0,page:0,perpage:m+1}}]);i[0].then(function(b){var e=[],f=0;if(b.length<=m){a.each(b,function(b,d){var f=d,g=[];a.each(k,function(a,b){if("undefined"!=typeof d[b]&&""!==d[b]){f.hasidentity=!0;g.push(d[b])}});f.identity=g.join(", ");e.push(c.render("enrol_manual/form-user-selector-suggestion",f))});return a.when.apply(a.when,e).then(function(){var c=arguments;a.each(b,function(a,b){b._label=c[f];f++});g(b)})}else{return d.get_string("toomanyuserstoshow","core",">"+m).then(function(a){g(a)})}}).fail(h)}}});
function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("message_popup/notification_area_control_area",["jquery","core/templates","core/notification","core/custom_interaction_events","message_popup/notification_repository","message_popup/notification_area_events"],function(a,b,c,d,e,f){var g={CONTAINER:"[data-region=\"notification-area\"]",CONTENT:"[data-region=\"content\"]",NOTIFICATION:"[data-region=\"notification-content-item-container\"]",CAN_RECEIVE_FOCUS:"input:not([type=\"hidden\"]), a[href], button, textarea, select, [tabindex]"},h={NOTIFICATION:"message_popup/notification_content_item"},i=function(b,c){this.root=a(b);this.container=this.root.closest(g.CONTAINER);this.userId=c;this.content=this.root.find(g.CONTENT);this.offset=0;this.limit=20;this.initialLoad=!1;this.isLoading=!1;this.loadedAll=!1;this.notifications={};this.registerEventListeners()};i.prototype.getRoot=function(){return this.root};i.prototype.getContainer=function(){return this.container};i.prototype.getUserId=function(){return this.userId};i.prototype.getContent=function(){return this.content};i.prototype.getOffset=function(){return this.offset};i.prototype.getLimit=function(){return this.limit};i.prototype.setOffset=function(a){this.offset=a};i.prototype.setLimit=function(a){this.limit=a};i.prototype.incrementOffset=function(){this.offset+=this.limit};i.prototype.startLoading=function(){this.isLoading=!0;this.getRoot().addClass("loading")};i.prototype.stopLoading=function(){this.isLoading=!1;this.getRoot().removeClass("loading")};i.prototype.hasDoneInitialLoad=function(){return this.initialLoad};i.prototype.hasLoadedAllContent=function(){return this.loadedAll};i.prototype.setLoadedAllContent=function(a){this.loadedAll=a};i.prototype.setCacheNotification=function(a){this.notifications[a.id]=a};i.prototype.getCacheNotification=function(a){return this.notifications[a]};i.prototype.getNotificationElement=function(a){var b=this.getRoot().find(g.NOTIFICATION+"[data-id=\""+a+"\"]");return 1==b.length?b:null};i.prototype.scrollNotificationIntoView=function(a){var b=a.position(),c=this.getRoot(),d=b.top-c.scrollTop();if(d>c.innerHeight()){var e=a.outerHeight();e=4*e;var f=b.top-e;c.scrollTop(f)}};i.prototype.showNotification=function(b){if("object"!==_typeof(b)){b=this.getNotificationElement(b)}if(b&&b.length){this.getRoot().find(g.NOTIFICATION).removeClass("selected");b.addClass("selected").find(g.CAN_RECEIVE_FOCUS).focus();var c=b.attr("data-id"),d=this.getCacheNotification(c);this.scrollNotificationIntoView(b);this.getContainer().trigger(f.showNotification,[a.extend({},d)])}};i.prototype.markNotificationAsRead=function(a){return e.markAsRead(a.attr("data-id")).done(function(){a.removeClass("unread")})};i.prototype.renderNotifications=function(c){var d=[],e=this.getContent();a.each(c,function(a,c){var e=c.contexturl;delete c.contexturl;var f=b.render(h.NOTIFICATION,c).then(function(a,b){c.contexturl=e;this.setCacheNotification(c);return{html:a,js:b}}.bind(this));d.push(f)}.bind(this));return a.when.apply(a,d).then(function(){a.each(arguments,function(a,c){e.append(c.html);b.runTemplateJS(c.js)})})};i.prototype.loadMoreNotifications=function(){if(this.isLoading||this.hasLoadedAllContent()){return a.Deferred().resolve()}this.startLoading();var b={limit:this.getLimit(),offset:this.getOffset(),useridto:this.getUserId()};if(!this.initialLoad){b.limit=this.getOffset()+this.getLimit();b.offset=0}var c=e.query(b).then(function(a){var b=a.notifications;this.unreadCount=a.unreadcount;this.setLoadedAllContent(!b.length||b.length<this.getLimit());this.initialLoad=!0;if(b.length){this.incrementOffset();return this.renderNotifications(b)}return!1}.bind(this)).always(function(){this.stopLoading()}.bind(this));return c};i.prototype.registerEventListeners=function(){d.define(this.getRoot(),[d.events.activate,d.events.scrollBottom,d.events.scrollLock,d.events.up,d.events.down]);this.getRoot().on(d.events.scrollBottom,function(){this.loadMoreNotifications()}.bind(this));this.getRoot().on(d.events.activate,g.NOTIFICATION,function(b){var c=a(b.target).closest(g.NOTIFICATION);this.showNotification(c)}.bind(this));this.getRoot().on(d.events.up,g.NOTIFICATION,function(b,c){var d=a(b.target).closest(g.NOTIFICATION);this.showNotification(d.prev());c.originalEvent.preventDefault()}.bind(this));this.getRoot().on(d.events.down,g.NOTIFICATION,function(b,c){var d=a(b.target).closest(g.NOTIFICATION);this.showNotification(d.next());c.originalEvent.preventDefault()}.bind(this));this.getContainer().on(f.notificationShown,function(a,b){if(!b.read){var c=this.getNotificationElement(b.id);if(c){this.markNotificationAsRead(c)}var d=this.getCacheNotification(b.id);if(d){d.read=!0}}}.bind(this))};return i});
define ("message_popup/notification_area_content_area",["jquery","core/templates","core/notification","core/custom_interaction_events","message_popup/notification_repository","message_popup/notification_area_events"],function(a,b,c,d,e,f){var g={CONTAINER:"[data-region=\"notification-area\"]",CONTENT:"[data-region=\"content\"]",HEADER:"[data-region=\"header\"]",FOOTER:"[data-region=\"footer\"]",TOGGLE_MODE:"[data-action=\"toggle-mode\"]"},h={HEADER:"message_popup/notification_area_content_area_header",CONTENT:"message_popup/notification_area_content_area_content",FOOTER:"message_popup/notification_area_content_area_footer"},i=function(b,c){this.root=a(b);this.container=this.root.closest(g.CONTAINER);this.userId=c;this.header=this.root.find(g.HEADER);this.content=this.root.find(g.CONTENT);this.footer=this.root.find(g.FOOTER);this.registerEventListeners()};i.prototype.getRoot=function(){return this.root};i.prototype.getContainer=function(){return this.container};i.prototype.getUserId=function(){return this.userId};i.prototype.getHeader=function(){return this.header};i.prototype.getContent=function(){return this.content};i.prototype.getFooter=function(){return this.footer};i.prototype.show=function(){this.getContainer().addClass("show-content-area")};i.prototype.hide=function(){this.getContainer().removeClass("show-content-area")};i.prototype.setHeaderHTML=function(a){this.getHeader().empty().html(a)};i.prototype.setContentHTML=function(a){this.getContent().empty().html(a)};i.prototype.setFooterHTML=function(a){this.getFooter().empty().html(a)};i.prototype.showNotification=function(c){var d=b.render(h.HEADER,c).done(function(a){this.setHeaderHTML(a)}.bind(this)),e=b.render(h.CONTENT,c).done(function(a){this.setContentHTML(a)}.bind(this)),g=b.render(h.FOOTER,c).done(function(a){this.setFooterHTML(a)}.bind(this));return a.when(d,e,g).done(function(){this.show();this.getContainer().trigger(f.notificationShown,[c])}.bind(this))};i.prototype.registerEventListeners=function(){d.define(this.getRoot(),[d.events.activate]);this.getRoot().on(d.events.activate,g.VIEW_TOGGLE,function(){this.hide()}.bind(this));this.getContainer().on(f.showNotification,function(a,b){this.showNotification(b)}.bind(this))};return i});
define ("message_popup/notification_area_events",[],function(){return{showNotification:"notification-area-events:showNotification",notificationShown:"notification-area-events:notificationShown"}});
define ("message_popup/notification_repository",["core/ajax","core/notification"],function(a,b){return{query:function query(c){if("undefined"==typeof c.limit){c.limit=20}if("undefined"==typeof c.offset){c.offset=0}var d=a.call([{methodname:"message_popup_get_popup_notifications",args:c}])[0];d.fail(b.exception);return d},countUnread:function countUnread(c){var d=a.call([{methodname:"message_popup_get_unread_popup_notification_count",args:c}])[0];d.fail(b.exception);return d},markAllAsRead:function markAllAsRead(c){var d=a.call([{methodname:"core_message_mark_all_notifications_as_read",args:c}])[0];d.fail(b.exception);return d},markAsRead:function markAsRead(c,d){var e={notificationid:c};if(d){e.timeread=d}var f=a.call([{methodname:"core_message_mark_notification_read",args:e}])[0];f.fail(b.exception);return f}}});
define ("message_popup/notification_popover_controller",["jquery","core/ajax","core/templates","core/str","core/url","core/notification","core/custom_interaction_events","core/popover_region_controller","message_popup/notification_repository","message_popup/notification_area_events"],function(a,b,c,d,e,f,g,h,i,j){var k={MARK_ALL_READ_BUTTON:"[data-action=\"mark-all-read\"]",ALL_NOTIFICATIONS_CONTAINER:"[data-region=\"all-notifications\"]",NOTIFICATION:"[data-region=\"notification-content-item-container\"]",UNREAD_NOTIFICATION:"[data-region=\"notification-content-item-container\"].unread",NOTIFICATION_LINK:"[data-action=\"content-item-link\"]",EMPTY_MESSAGE:"[data-region=\"empty-message\"]",COUNT_CONTAINER:"[data-region=\"count-container\"]"},l=function(a){h.call(this,a);this.markAllReadButton=this.root.find(k.MARK_ALL_READ_BUTTON);this.unreadCount=0;this.userId=this.root.attr("data-userid");this.container=this.root.find(k.ALL_NOTIFICATIONS_CONTAINER);this.limit=20;this.offset=0;this.loadedAll=!1;this.initialLoad=!1;this.unreadCount=this.root.find(k.COUNT_CONTAINER).html()};l.prototype=Object.create(h.prototype);l.prototype.constructor=l;l.prototype.updateButtonAriaLabel=function(){if(this.isMenuOpen()){d.get_string("hidenotificationwindow","message").done(function(a){this.menuToggle.attr("aria-label",a)}.bind(this))}else{if(this.unreadCount){d.get_string("shownotificationwindowwithcount","message",this.unreadCount).done(function(a){this.menuToggle.attr("aria-label",a)}.bind(this))}else{d.get_string("shownotificationwindownonew","message").done(function(a){this.menuToggle.attr("aria-label",a)}.bind(this))}}};l.prototype.getContent=function(){return this.container};l.prototype.getOffset=function(){return this.offset};l.prototype.incrementOffset=function(){this.offset+=this.limit};l.prototype.hasDoneInitialLoad=function(){return this.initialLoad};l.prototype.hasLoadedAllContent=function(){return this.loadedAll};l.prototype.setLoadedAllContent=function(a){this.loadedAll=a};l.prototype.renderUnreadCount=function(){var a=this.root.find(k.COUNT_CONTAINER);if(this.unreadCount){a.text(this.unreadCount);a.removeClass("hidden")}else{a.addClass("hidden")}};l.prototype.hideUnreadCount=function(){this.root.find(k.COUNT_CONTAINER).addClass("hidden")};l.prototype.getNotificationElement=function(a){var b=this.root.find(k.NOTIFICATION+"[data-id=\""+a+"\"]");return 1==b.length?b:null};l.prototype.renderNotifications=function(b,d){var f=[];a.each(b,function(a,b){var d=this.getOffset()-this.limit;b.viewmoreurl=e.relativeUrl("/message/output/popup/notifications.php",{notificationid:b.id,offset:d});var g={notificationid:b.id};b.contexturl=e.relativeUrl("message/output/popup/mark_notification_read.php",g);var h=c.render("message_popup/notification_content_item",b).then(function(a,b){return{html:a,js:b}});f.push(h)}.bind(this));return a.when.apply(a,f).then(function(){a.each(arguments,function(a,b){d.append(b.html);c.runTemplateJS(b.js)})})};l.prototype.loadMoreNotifications=function(){if(this.isLoading||this.hasLoadedAllContent()){return a.Deferred().resolve()}this.startLoading();var b={limit:this.limit,offset:this.getOffset(),useridto:this.userId},c=this.getContent();return i.query(b).then(function(a){var b=a.notifications;this.unreadCount=a.unreadcount;this.setLoadedAllContent(!b.length||b.length<this.limit);this.initialLoad=!0;this.updateButtonAriaLabel();if(b.length){this.incrementOffset();return this.renderNotifications(b,c)}return!1}.bind(this)).always(function(){this.stopLoading()}.bind(this))};l.prototype.markAllAsRead=function(){this.markAllReadButton.addClass("loading");return i.markAllAsRead({useridto:this.userId}).then(function(){this.unreadCount=0;this.root.find(k.UNREAD_NOTIFICATION).removeClass("unread")}.bind(this)).always(function(){this.markAllReadButton.removeClass("loading")}.bind(this))};l.prototype.registerEventListeners=function(){g.define(this.root,[g.events.activate]);this.root.on(g.events.activate,k.MARK_ALL_READ_BUTTON,function(a,b){this.markAllAsRead();a.stopPropagation();b.originalEvent.preventDefault()}.bind(this));this.root.on(g.events.activate,k.NOTIFICATION_LINK,function(b){var c=a(b.target).closest(k.NOTIFICATION);if(c.hasClass("unread")){this.unreadCount--;c.removeClass("unread")}b.stopPropagation()}.bind(this));this.root.on(this.events().menuOpened,function(){this.hideUnreadCount();this.updateButtonAriaLabel();if(!this.hasDoneInitialLoad()){this.loadMoreNotifications()}}.bind(this));this.root.on(this.events().menuClosed,function(){this.renderUnreadCount();this.updateButtonAriaLabel()}.bind(this));this.root.on(this.events().startLoading,function(){this.getContent().attr("aria-busy","true")}.bind(this));this.root.on(this.events().stopLoading,function(){this.getContent().attr("aria-busy","false")}.bind(this));this.getContentContainer().on(g.events.scrollBottom,function(){if(!this.isLoading&&!this.hasLoadedAllContent()){this.loadMoreNotifications()}}.bind(this));g.define(this.getContentContainer(),[g.events.scrollLock]);a(document).on(j.notificationShown,function(a,b){if(!b.read){var c=this.getNotificationElement(b.id);if(c){c.removeClass("unread")}this.unreadCount--;this.renderUnreadCount()}}.bind(this))};return l});
define('block_conduit/selection', ["jquery"],function(a){return{init:function(b,c,d){var e=a("#"+b),f=a("#"+c),g=function(b){var c=a("#"+d);c.find("input").each(function(){"checkbox"===this.type&&(this.checked=b)})};e.click(function(a){g("checked"),a.preventDefault()}),f.click(function(a){g(""),a.preventDefault()})},disableChoose:function(){a('div.mr_file_export > div.urlselect > form > select > option[value=""]').attr("disabled","disabled")}}});
define('block_intellicart_sessions/sessionslist', ["jquery","core/ajax","core/str","core/log","core/modal_factory"],function(l,c,s,r,n){var d={toogleButton:".ic-toogle-button",container:".block_intellicart_sessions",mysessionstab:".intellicart_mysessions_tab",sessionsTab:".intellicart_sessions_tab",btnattend:".btn-attend",btnDataArea:".session-attendance-button",loader:".dashboard-sessions-box .tab-content .sessions-list-loader",showPopupInfo:".show-popup-info",init:function(){var s=l(d.container);l(document).on("click",d.toogleButton,function(){var s=l(this).data("toogle");return 0<l(s).length&&l(s).slideToggle(200),!1}),s.on("click",".see-more-btn, .btn-pagination",function(){var s=l(this).closest(".tab-pane"),e=s.data("pagetype"),t=s.data("courseid"),n=l(this).data("page"),a=s.find(".sessions-list-area");d.loadMore(e,t,n,a)}),s.on("click",d.sessionsTab,function(){var s=l(this).find("a").attr("href"),e=l(s),t=e.data("pagetype"),n=e.data("courseid"),a=e.find(".sessions-list-area");d.loadMore(t,n,0,a)}),s.on("click",d.btnattend,function(){var t=l(this),s=t.closest(d.btnDataArea),n=s.data("sessionid"),a=s.data("courseid"),i=s.data("productid"),o=s.data("checkoutid"),e=t.data("action");t.prop("disabled",!0),c.call([{methodname:"local_intellicart_session_"+e,args:{sessionid:n,checkoutid:o}}])[0].done(function(s){try{var e=l(t).closest(".session-item");if(1==s.status)d.loadsession(n,i,o,a,e),l(d.container).find(d.mysessionstab).length<1&&d.addMySessionsTab();else l(t).prop("disabled",!1),d.notification(s.message,"#"+e[0].id);d.setStyles()}catch(s){r.debug(s.message)}}).fail(function(s){r.debug(s.message)})}),s.on("click",d.showPopupInfo,function(s){var e=l(this).data("selector"),t=(s=l(this).data("title"),l(e).html());n.create({title:s,body:t,large:!0}).then(function(s){s.show()})}),d.setStyles()},loadsession:function(s,e,t,n,a){c.call([{methodname:"block_intellicart_sessions_load_session",args:{sessionid:s,productid:e,checkoutid:t,courseid:n}}])[0].done(function(s){try{null!=s.session&&s.session&&(a.replaceWith(s.session),d.setStyles())}catch(s){r.debug(s.message)}}).fail(function(s){r.debug(s.message)})},notification:function(s,e){l(null!=e?e:"#user-notifications").prepend('<div class="alert alert-info ic-notification alert-block fade in" role="alert"> <button type="button" class="close" data-dismiss="alert">×</button>'+s+"</div>"),d.setStyles(),setTimeout(function(){l(".ic-notification").remove(),d.setStyles()},5e3)},loadMore:function(s,e,t,n){var a="#"+n.closest(".tab-pane")[0].id;d.loading(a),c.call([{methodname:"block_intellicart_sessions_load_more",args:{pagetype:s,courseid:e,page:t}}])[0].done(function(s){d.endLoading(a);try{null!=s.sessions&&(n.html(s.sessions),d.setStyles())}catch(s){r.debug(s.message)}}).fail(function(s){r.debug(s.message)})},addMySessionsTab:function(){s.get_strings([{key:"my",component:"block_intellicart_sessions"}]).done(function(s){var e='<li class="intellicart_sessions_tab nav-item intellicart_mysessions_tab">';e+='<a class="nav-link" href="#intellicartsessions_mysessions_view" role="tab"',e+=' data-toggle="tab" data-tabname="mysessions">'+s[0],e+=' <i class="fa fa-angle-down" aria-hidden="true"></i></a></li>',l(d.container).find(".intellicart_availablesessions_tab").after(e),d.setStyles()}).fail(function(s){r.debug(s.message)})},loading:function(s){l(d.loader).clone().appendTo(s),l(s).addClass("loading"),l(s).find(".sessions-list-loader").removeClass("hidden")},endLoading:function(s){l(s).removeClass("loading"),l(s).find(".sessions-list-loader").remove()},setStyles:function(){l(d.container).find(".before-line").each(function(){var s=l(this).parents(".session-item").css("height"),e=l(this).parents(".session-item").next().css("height");if(parseInt(s)>parseInt(e)&&NaN!==parseInt(e)){var t=parseInt(s)-parseInt(e);l(this).css({height:parseInt(e)+t-25+"px"})}if(parseInt(s)<parseInt(e)&&NaN!==parseInt(e)){t=parseInt(e)-parseInt(s);l(this).css({height:parseInt(e)-t+"px"})}if(parseInt(s)===parseInt(e)&&NaN!==parseInt(e)){t=parseInt(e)-parseInt(s);l(this).css({height:parseInt(e)-10+"px"})}})}};return d});
define ("block_myoverview/repository",["core/ajax","core/notification"],function(a,b){return{getEnrolledCoursesByTimeline:function getEnrolledCoursesByTimeline(b){var c=a.call([{methodname:"core_course_get_enrolled_courses_by_timeline_classification",args:b}])[0];return c},setFavouriteCourses:function setFavouriteCourses(b){var c=a.call([{methodname:"core_course_set_favourite_courses",args:b}])[0];return c},updateUserPreferences:function updateUserPreferences(c){a.call([{methodname:"core_user_update_user_preferences",args:c}])[0].fail(b.exception)}}});
define ("block_myoverview/view",["jquery","block_myoverview/repository","core/paged_content_factory","core/pubsub","core/custom_interaction_events","core/notification","core/templates","core_course/events","block_myoverview/selectors","core/paged_content_events"],function(a,b,c,d,e,f,g,h,i,j){var k={COURSE_REGION:"[data-region=\"course-view-content\"]",ACTION_HIDE_COURSE:"[data-action=\"hide-course\"]",ACTION_SHOW_COURSE:"[data-action=\"show-course\"]",ACTION_ADD_FAVOURITE:"[data-action=\"add-favourite\"]",ACTION_REMOVE_FAVOURITE:"[data-action=\"remove-favourite\"]",FAVOURITE_ICON:"[data-region=\"favourite-icon\"]",ICON_IS_FAVOURITE:"[data-region=\"is-favourite\"]",ICON_NOT_FAVOURITE:"[data-region=\"not-favourite\"]",PAGED_CONTENT_CONTAINER:"[data-region=\"page-container\"]"},l={COURSES_CARDS:"block_myoverview/view-cards",COURSES_LIST:"block_myoverview/view-list",COURSES_SUMMARY:"block_myoverview/view-summary",NOCOURSES:"core_course/no-courses"},m={GROUPING_ALLINCLUDINGHIDDEN:"allincludinghidden",GROUPING_ALL:"all",GROUPING_INPROGRESS:"inprogress",GROUPING_FUTURE:"future",GROUPING_PAST:"past",GROUPING_FAVOURITES:"favourites",GROUPING_HIDDEN:"hidden"},n=[12,24,48,96,0],o=[],p=0,q=0,r=0,s=null,t=function(a){var b=a.find(i.courseView.region);return{display:b.attr("data-display"),grouping:b.attr("data-grouping"),sort:b.attr("data-sort"),displaycategories:b.attr("data-displaycategories"),customfieldname:b.attr("data-customfieldname"),customfieldvalue:b.attr("data-customfieldvalue")}},u={ignoreControlWhileLoading:!0,controlPlacementBottom:!0,persistentLimitKey:"block_myoverview_user_paging_preference"},v=function(a,c){return b.getEnrolledCoursesByTimeline({offset:p,limit:c,classification:a.grouping,sort:a.sort,customfieldname:a.customfieldname,customfieldvalue:a.customfieldvalue})},w=function(a,b){return a.find(k.FAVOURITE_ICON+"[data-course-id=\""+b+"\"]")},x=function(a,b){return a.find("[data-region=\"paged-content-page\"][data-page=\""+b+"\"]")},y=function(a){return a.attr("data-course-id")},z=function(a,b){var c=w(a,b),d=c.find(k.ICON_IS_FAVOURITE);d.addClass("hidden");d.attr("aria-hidden",!0);var e=c.find(k.ICON_NOT_FAVOURITE);e.removeClass("hidden");e.attr("aria-hidden",!1)},A=function(a,b){var c=w(a,b),d=c.find(k.ICON_IS_FAVOURITE);d.removeClass("hidden");d.attr("aria-hidden",!1);var e=c.find(k.ICON_NOT_FAVOURITE);e.addClass("hidden");e.attr("aria-hidden",!0)},B=function(a,b){return a.find("[data-action=\"add-favourite\"][data-course-id=\""+b+"\"]")},C=function(a,b){return a.find("[data-action=\"remove-favourite\"][data-course-id=\""+b+"\"]")},D=function(a,b){var c=C(a,b),e=B(a,b);L(b,!0).then(function(g){if(g){d.publish(h.favourited,b);c.removeClass("hidden");e.addClass("hidden");A(a,b)}else{f.alert("Starring course failed","Could not change favourite state")}}).catch(f.exception)},E=function(a,b){var c=C(a,b),e=B(a,b);L(b,!1).then(function(g){if(g){d.publish(h.unfavorited,b);c.addClass("hidden");e.removeClass("hidden");z(a,b)}else{f.alert("Starring course failed","Could not change favourite state")}}).catch(f.exception)},F=function(a,b){return a.find("[data-action=\"hide-course\"][data-course-id=\""+b+"\"]")},G=function(a,b){return a.find("[data-action=\"show-course\"][data-course-id=\""+b+"\"]")},H=function(a,b){var c=F(a,b),d=G(a,b),e=t(a);J(b,!0);if(e.grouping!=m.GROUPING_ALLINCLUDINGHIDDEN){K(a,b)}c.addClass("hidden");d.removeClass("hidden")},I=function(a,b){var c=F(a,b),d=G(a,b),e=t(a);J(b,null);if(e.grouping!=m.GROUPING_ALLINCLUDINGHIDDEN){K(a,b)}c.removeClass("hidden");d.addClass("hidden")},J=function(a,c){if(!1===c){c=null}return b.updateUserPreferences({preferences:[{type:"block_myoverview_hidden_course_"+a,value:c}]})},K=function(b,d){var e=b.find("[data-region=\"paging-bar\"]"),h=parseInt(e.attr("data-active-page-number")),i=o[h],j=i.courses.reduce(function(a,b){if(d!=b.id){a.push(b)}return a},[]);if(o[h+1]!=void 0){var k=o[h+1].courses.slice(0,1);o.forEach(function(b,c){if(c>h){var d=[];if(o[c+1]!=void 0){d=o[c+1].courses.slice(0,1)}o[c].courses=a.merge(o[c].courses.slice(1),d)}});j=a.merge(j,k)}if(q==h+1&&0==o[h+1].courses.length){var l=b.find("[data-region=\"paged-content-container\"]");c.resetLastPageNumber(a(l).attr("id"),h)}o[h].courses=j;p--;var m=x(b,h);M(b,o[h]).then(function(a,b){return g.replaceNodeContents(m,a,b)}).catch(f.exception);o.forEach(function(a,c){if(c>h){var d=x(b,c);d.remove()}})},L=function(a,c){return b.setFavouriteCourses({courses:[{id:a,favourite:c}]}).then(function(b){if(0==b.warnings.length){o.forEach(function(b){b.courses.forEach(function(d,e){if(d.id==a){b.courses[e].isfavourite=c}})});return!0}else{return!1}}).catch(f.exception)},M=function(a,b){var c=t(a),d="";if("card"==c.display){d=l.COURSES_CARDS}else if("list"==c.display){d=l.COURSES_LIST}else{d=l.COURSES_SUMMARY}b.courses=b.courses.map(function(a){a.showcoursecategory="on"==c.displaycategories?!0:!1;return a});if(b.courses.length){return g.render(d,{courses:b.courses})}else{var e=a.find(i.courseView.region).attr("data-nocoursesimg");return g.render(l.NOCOURSES,{nocoursesimg:e})}},N=function(a){this.find(i.courseView.region).attr("data-paging",a)},O=function(a,b){var c=b+j.SET_ITEMS_PER_PAGE_LIMIT;d.subscribe(c,N.bind(a))},P=function(b){s="block_myoverview_"+b.attr("id")+"_"+Math.random();var d=parseInt(b.find(i.courseView.region).attr("data-paging"),10),e=n.map(function(a){var b=!1;if(a==d){b=!0}return{value:a,active:b}}),h=parseInt(b.find(i.courseView.region).attr("data-totalcoursecount"),10);if(h){e=e.filter(function(a){return a.value<h})}var j=t(b),k=a.extend({},u);k.eventNamespace=s;var l=c.createWithLimit(e,function(c,d){var e=[];c.forEach(function(c){var g=c.pageNumber,h=0<c.limit?c.limit:0;if(r!=h){o=[];p=0;q=0}if(q==g){d.allItemsLoaded(q);e.push(M(b,o[g]));return}r=h;if(o[g+1]==void 0){if(o[g]==void 0){h*=2}}var i=v(j,h).then(function(e){var f=e.courses,h=0,i=[];if(o[g]!=void 0){i=o[g].courses;var j=i.length;if(j<c.limit){h=c.limit-j;i=a.merge(o[g].courses,f.slice(0,h))}}else{h=c.limit;i=0<c.limit?f.slice(0,c.limit):f}o[g]={courses:i};var k=h?f.slice(h,f.length):[];if(k.length){o[g+1]={courses:k}}if(o[g].courses.length<c.limit||!k.length){q=g;d.allItemsLoaded(g)}else if(o[g+1]!=void 0&&o[g+1].courses.length<c.limit){q=g+1}p=e.nextoffset;return M(b,o[g])}).catch(f.exception);e.push(i)});return e},k);l.then(function(a,c){O(b,s);return g.replaceNodeContents(b.find(i.courseView.region),a,c)}).catch(f.exception)},Q=function(b){e.define(b,[e.events.activate]);b.on(e.events.activate,k.ACTION_ADD_FAVOURITE,function(c,d){var e=a(c.target).closest(k.ACTION_ADD_FAVOURITE),f=y(e);D(b,f);d.originalEvent.preventDefault()});b.on(e.events.activate,k.ACTION_REMOVE_FAVOURITE,function(c,d){var e=a(c.target).closest(k.ACTION_REMOVE_FAVOURITE),f=y(e);E(b,f);d.originalEvent.preventDefault()});b.on(e.events.activate,k.FAVOURITE_ICON,function(a,b){b.originalEvent.preventDefault()});b.on(e.events.activate,k.ACTION_HIDE_COURSE,function(c,d){var e=a(c.target).closest(k.ACTION_HIDE_COURSE),f=y(e);H(b,f);d.originalEvent.preventDefault()});b.on(e.events.activate,k.ACTION_SHOW_COURSE,function(c,d){var e=a(c.target).closest(k.ACTION_SHOW_COURSE),f=y(e);I(b,f);d.originalEvent.preventDefault()})},R=function(b){b=a(b);o=[];q=0;p=0;P(b);if(!b.attr("data-init")){Q(b);b.attr("data-init",!0)}},S=function(a){if(0<o.length){o.forEach(function(b,c){var d=x(a,c);M(a,b).then(function(a,b){return g.replaceNodeContents(d,a,b)}).catch(f.exception)})}else{R(a)}};return{init:R,reset:S}});
define ("block_myoverview/main",["jquery","block_myoverview/view","block_myoverview/view_nav"],function(a,b,c){return{init:function init(d){d=a(d);c.init(d);b.init(d)}}});
define ("block_myoverview/selectors",[],function(){return{courseView:{region:"[data-region=\"courses-view\"]",regionContent:"[data-region=\"course-view-content\"]"}}});
define ("block_myoverview/view_nav",["jquery","core/custom_interaction_events","block_myoverview/repository","block_myoverview/view","block_myoverview/selectors"],function(a,b,c,d,f){var g={FILTERS:"[data-region=\"filter\"]",FILTER_OPTION:"[data-filter]",DISPLAY_OPTION:"[data-display-option]"},h=function(a,b){var d=null;if("display"==a){d="block_myoverview_user_view_preference"}else if("sort"==a){d="block_myoverview_user_sort_preference"}else if("customfieldvalue"==a){d="block_myoverview_user_grouping_customfieldvalue_preference"}else{d="block_myoverview_user_grouping_preference"}c.updateUserPreferences({preferences:[{type:d,value:b}]})},i=function(c){var e=c.find(g.FILTERS);b.define(e,[b.events.activate]);e.on(b.events.activate,g.FILTER_OPTION,function(b,e){var g=a(b.target);if(g.hasClass("active")){return}var i=g.attr("data-filter"),j=g.attr("data-pref"),k=g.attr("data-customfieldvalue");c.find(f.courseView.region).attr("data-"+i,g.attr("data-value"));h(i,j);if(k){c.find(f.courseView.region).attr("data-customfieldvalue",k);h("customfieldvalue",k)}d.init(c);e.originalEvent.preventDefault()});b.define(e,[b.events.activate]);e.on(b.events.activate,g.DISPLAY_OPTION,function(b,e){var g=a(b.target);if(g.hasClass("active")){return}var i=g.attr("data-display-option"),j=g.attr("data-pref");c.find(f.courseView.region).attr("data-display",g.attr("data-value"));h(i,j);d.reset(c);e.originalEvent.preventDefault()})};return{init:function init(b){b=a(b);i(b)}}});
define ("block_navigation/navblock",["jquery","core/tree"],function(a,b){return{init:function init(a){var c=new b(".block_navigation .block_tree");c.finishExpandingGroup=function(c){b.prototype.finishExpandingGroup.call(this,c);Y.use("moodle-core-event",function(){Y.Global.fire(M.core.globalEvents.BLOCK_CONTENT_UPDATED,{instanceid:a})})};c.collapseGroup=function(c){b.prototype.collapseGroup.call(this,c);Y.use("moodle-core-event",function(){Y.Global.fire(M.core.globalEvents.BLOCK_CONTENT_UPDATED,{instanceid:a})})}}}});
function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("block_navigation/ajax_response_renderer",["jquery","core/templates","core/notification","core/url"],function(a,b,c,d){var f={ACTIVITY:40,RESOURCE:50};function e(g,h){var i=a("<ul></ul>");i.attr("role","group");i.attr("aria-hidden",!0);a.each(h,function(g,h){if("object"!==_typeof(h)){return}var j=a("<li></li>"),k=a("<p></p>"),l=h.id||h.key+"_tree_item",m=null,n=h.expandable||h.haschildren?!0:!1;k.addClass("tree_item");k.attr("id",l);k.attr("role","treeitem");k.attr("tabindex","-1");if(h.requiresajaxloading){k.attr("data-requires-ajax",!0);k.attr("data-node-id",h.id);k.attr("data-node-key",h.key);k.attr("data-node-type",h.type)}if(n){j.addClass("collapsed contains_branch");k.attr("aria-expanded",!1);k.addClass("branch")}var o=null;if(h.link){var p=a("<a title=\""+h.title+"\" href=\""+h.link+"\"></a>");o=p;p.append("<span class=\"item-content-wrap\">"+h.name+"</span>");if(h.hidden){p.addClass("dimmed")}k.append(p)}else{var q=a("<span></span>");o=q;q.append("<span class=\"item-content-wrap\">"+h.name+"</span>");if(h.hidden){q.addClass("dimmed")}k.append(q)}if(h.icon&&(!n||h.type===f.ACTIVITY||h.type===f.RESOURCE)){j.addClass("item_with_icon");k.addClass("hasicon");if(h.type===f.ACTIVITY||h.type===f.RESOURCE){m=a("<img/>");m.attr("alt",h.icon.alt);m.attr("title",h.icon.title);m.attr("src",d.imageUrl(h.icon.pix,h.icon.component));a.each(h.icon.classes,function(a,b){m.addClass(b)});o.prepend(m)}else{if("moodle"==h.icon.component){h.icon.component="core"}b.renderPix(h.icon.pix,h.icon.component,h.icon.title).then(function(a){o.prepend(a)}).catch(c.exception)}}j.append(k);i.append(j);if(h.children&&h.children.length){e(k,h.children)}else if(n&&!h.requiresajaxloading){j.removeClass("contains_branch");k.addClass("emptybranch")}});g.parent().append(i);var j=g.attr("id")+"_group";i.attr("id",j);g.attr("aria-owns",j);g.attr("role","treeitem")}return{render:function render(a,b){if(b.children&&b.children.length){e(a,b.children);var c=a.children("[role='treeitem']").first(),d=a.find("#"+c.attr("aria-owns"));c.attr("aria-expanded",!0);d.attr("aria-hidden",!1)}else{if(a.parent().hasClass("contains_branch")){a.parent().removeClass("contains_branch");a.addClass("emptybranch")}}}}});
define ("block_navigation/nav_loader",["jquery","core/ajax","core/config","block_navigation/ajax_response_renderer"],function(a,b,c,d){var f=c.wwwroot+"/lib/ajax/getnavbranch.php";function e(a){return a.closest("[data-block]").attr("data-instanceid")}return{load:function load(b){b=a(b);var g=a.Deferred(),h={elementid:b.attr("data-node-id"),id:b.attr("data-node-key"),type:b.attr("data-node-type"),sesskey:c.sesskey,instance:e(b)};a.ajax(f,{type:"POST",dataType:"json",data:h}).done(function(a){d.render(b,a);g.resolve()});return g}}});
define ("block_navigation/site_admin_loader",["jquery","core/ajax","core/config","block_navigation/ajax_response_renderer"],function(a,b,c,d){var e=c.wwwroot+"/lib/ajax/getsiteadminbranch.php";return{load:function load(b){b=a(b);var f=a.Deferred(),g={type:71,sesskey:c.sesskey};a.ajax(e,{type:"POST",dataType:"json",data:g}).done(function(a){d.render(b,a);f.resolve()});return f}}});
define ("block_online_users/change_user_visibility",["jquery","core/ajax","core/str","core/notification"],function(a,b,c,d){var e={CHANGE_VISIBILITY_LINK:"#change-user-visibility",CHANGE_VISIBILITY_ICON:"#change-user-visibility .icon"},f=function(a,c){var e="show"==a?1:0;b.call([{methodname:"core_user_set_user_preferences",args:{preferences:[{name:"block_online_users_uservisibility",value:e,userid:c}]}}])[0].then(function(b){if(b.saved){var c=g(a);h(c);i(c)}}).catch(d.exception)},g=function(a){return"show"==a?"hide":"show"},h=function(b){k(b).then(function(c){a(e.CHANGE_VISIBILITY_LINK).attr({"data-action":b,title:c})}).catch(d.exception)},i=function(b){var c=a(e.CHANGE_VISIBILITY_ICON);k(b).then(function(d){a(c).attr({title:d,"aria-label":d});if(c.is("img")){a(c).attr({src:M.util.image_url("t/"+b),alt:d})}else{a(c).addClass(j(b));a(c).removeClass(j(g(b)))}}).catch(d.exception)},j=function(a){return"show"==a?"fa-eye-slash":"fa-eye"},k=function(a){return c.get_string("online_status:"+a,"block_online_users")};return{init:function init(){a(e.CHANGE_VISIBILITY_LINK).on("click",function(b){b.preventDefault();var c=a(this).attr("data-action"),d=a(this).attr("data-userid");f(c,d)})}}});
define ("block_products_catalog/calendar",["jquery","core/ajax","local_intellicart/fullcalendar","local_intellicart/intellicart_calendar","core/str","core/config","core/modal_factory","core/modal_events","core/templates","core/notification"],function(a,b,c,d,e,f,g,h,i,j){var k={canedit:!1,disablecreatepopup:!1,createsessioninpasttime:!1,timezone:"",products:[],Calendar:null,loader:"<i class=\"loader fa fa-circle-o-notch fa-spin\"></i>",calendarbox:".ic-calendar-box",calendarcontainer:"#ic_calendar",eventcontainer:".ic-event-box",container:".sessions-list.privatetutoring",init:function init(b,c,d,e){k.canedit=b;k.timezone=c;k.disablecreatepopup=d;k.createsessioninpasttime=e;k.loadCalendar();a(k.eventcontainer).on("click",".backtocalendar-btn",function(){k.showCalendar()});a(".dashboard-products-box").on("click",".nav-link[data-tabname=\"calendar\"]",function(){k.refreshCalendar()})},loadCalendar:function loadCalendar(){k.Calendar=a(k.calendarcontainer).fullCalendar({header:{left:"today,month,agendaWeek,agendaDay",center:"prev title next",right:""},events:function events(a,c,d,e){var f=b.call([{methodname:"local_intellicart_calendar_sessions",args:{start:a,end:c,productid:0,type:"all"}}]);f[0].done(function(a){var b=[];if(a.length){for(var c=0;c<a.length;c++){b.push({id:a[c].id,title:a[c].title,start:a[c].start,end:a[c].end,allDay:!1,className:a[c].class});if(a[c].courselink!=void 0&&a[c].courselink){b.push({id:a[c].id+"_cl",title:a[c].coursename,start:a[c].start,end:a[c].end,allDay:!1,className:a[c].courseclass,url:a[c].courselink})}}}e(b)});f[0].fail(function(a){console.log(a)})},dayClick:function dayClick(a){var b=new Date(new Date().toISOString().slice(0,10)).getTime(),c=new Date(a.format()).getTime();if(!k.createsessioninpasttime||c>=b){if(k.disablecreatepopup){window.location.href=f.wwwroot+"/local/intellicart/products/editsession.php?datestart="+new Date(a).getTime()/1e3+"&iscalendarcreate=1"}else{k.showCreateSessionForm(a)}}},eventClick:function eventClick(b){if(a(this).hasClass("course-link")){return!0}k.loadEvent(b.id);var c=b.start;a(k.calendarcontainer).fullCalendar("gotoDate",c.format())}})},showCalendar:function showCalendar(){a(k.calendarbox).show();a(k.eventcontainer).addClass("hidden").html("")},refreshCalendar:function refreshCalendar(){a(k.calendarcontainer).fullCalendar("refetchEvents")},loadEvent:function loadEvent(c){a(k.calendarbox).hide();a(k.eventcontainer).removeClass("hidden").html(k.loader);var d=b.call([{methodname:"local_intellicart_calendar_get_session",args:{sessionid:c}}]);d[0].done(function(b){a(k.eventcontainer).removeClass("hidden").html(b.content)});d[0].fail(function(a){console.log(a)})},showCreateSessionForm:function showCreateSessionForm(c){var f="",l=!1,m=d.formatDate(new Date(c));e.get_strings([{key:"spdatetitle",component:"local_intellicart",param:{date:m}},{key:"save",component:"local_intellicart"}]).then(function(a){f=a[1];return g.create({type:g.types.SAVE_CANCEL,title:a[0],body:i.render("local_intellicart/create-session-modal",{productid:d.productid,timezone:k.timezone})})}).then(function(d){d.setSaveButtonText(f);d.getRoot().on(h.hidden,function(){d.setBody("");j.fetchNotifications()});d.getBody().find("#create_session_form input[name=starttime], #create_session_form  input[name=endtime], \n                        #create_session_form  input[name=repeat_until]").change(function(){var a=d.getBody().find("#create_session_form"),e=b.call([{methodname:"local_intellicart_session_validation",args:{formdata:a.serialize(),date:c}}]);e[0].done(function(b){if(b.status){l=0;a.find("input[name=\"starttime\"]").removeClass("alert-danger");a.find("input[name=\"endtime\"]").removeClass("alert-danger")}else{l=1;a.find("input[name=\"starttime\"]").addClass("alert-danger");a.find("input[name=\"endtime\"]").addClass("alert-danger")}k.notification(b.error,"#create_session_form .timeisbusy","danger",0)});e[0].fail(function(a){console.log(a)})});d.getRoot().on(h.save,function(f){f.preventDefault();var e=a("#create_session_form"),g=e.find(".form-control[name=\"productid\"]").val(),h=e.find("input[name=\"starttime\"]").val(),i=e.find("input[name=\"endtime\"]").val(),j=e.find("input[name=\"repeat\"]:checked").val(),m=e.find("input[name=\"repeat_until\"]").val(),n=e.find("input[name=\"name\"]").val();if(0<g){e.find(".field-products .form-control").removeClass("alert-danger")}else{e.find(".field-products .form-control").addClass("alert-danger")}if(h.length){e.find("input[name=\"starttime\"]").removeClass("alert-danger")}else{e.find("input[name=\"starttime\"]").addClass("alert-danger")}if(i.length){e.find("input[name=\"endtime\"]").removeClass("alert-danger")}else{e.find("input[name=\"endtime\"]").addClass("alert-danger")}if("yes"==j){if(m.length){e.find("input[name=\"repeat_until\"]").removeClass("alert-danger")}else{e.find("input[name=\"repeat_until\"]").addClass("alert-danger")}}else{e.find("input[name=\"repeat_until\"]").removeClass("alert-danger")}if(l){e.find("input[name=\"starttime\"]").addClass("alert-danger");e.find("input[name=\"endtime\"]").addClass("alert-danger")}if(!l&&h.length&&i.length&&("yes"==j&&m.length||j==void 0||"yes"!=j)){d.hide();var o=b.call([{methodname:"local_intellicart_calendar_save_session",args:{id:0,productid:g,date:c,starttime:h,endtime:i,repeat:j!=void 0?j:"no",repeat_until:m,name:n}}]);o[0].done(function(){d.hide();k.refreshCalendar()});o[0].fail(function(a){console.log(a)})}});d.show()}).catch(j.exception)},notification:function(b,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"info",e=3<arguments.length&&arguments[3]!==void 0?arguments[3]:5e3,f=c!=void 0?c:"#user-notifications";if(!b){a(f).html("");return null}a(f).html("<div class=\"alert alert-"+d+" ic-notification alert-block\" role=\"alert\">    <button type=\"button\" class=\"close\" data-dismiss=\"alert\">\xD7</button>"+b+"</div>");if(e){setTimeout(function(){a(".ic-notification").remove()},5e3)}}};return k});
define ("block_products_catalog/productscatalog",["jquery","core/ajax","core/str","core/config","core/log","local_intellicart/intellicart","local_intellicart/flatpickr","local_intellicart/intellicart_rating","local_intellicart/intellicart_reviews","local_intellicart/private_tutoring"],function(a,b,c,d,e,f,g,h,i,j){f.init();var k={loader:".product-catalog-loader",contentcontainer:".dashboard-products-box",tabcontent:".tab-content",tabcatalog:"#productscatalog_catalog_view",breadcrumbscontainer:".products-catalog-breadcrumbs",catalogview:"#catalog_content",myproductsview:"#myproducts_content",teachingproductsview:"#teachingproducts_content",filtersearch:"#catalog_filter_search",filterinstructors:"#catalog_filter_instructors",filtermyproducts:"#myproducts_filter_search",filterteachingproducts:"#teachingproducts_filter_search",mycoursesrsearch:"#mycourses_filter_search",fitergiftcards:"#giftcards_filter_search",sessionstimefrom:"#sessiontime_from",sessionstimeto:"#sessiontime_to",categories:".products-categories",customfiltersform:".custom-filters",hidefeatured:!1,listtypeselector:".listtype-selector",giftcardsview:"#giftcards_content",certificationsview:"#certifications_content",init:function init(b,c){k.hidefeatured=b;var d=a(k.contentcontainer);a("body").click(function(b){var c=a(b.target);if(!c.is(".nav-link[data-tabname=\"catalog\"]")&&!c.is(".nav-link[data-tabname=\"catalog\"] i")&&!c.is(".products-categories")&&!c.parents(".products-categories").length&&a(".products-categories").css("display")){a(".products-categories").hide()}if(!c.is(".custom-filters")&&!c.is(".filter-toggler")&&!c.parents(".custom-filters").length&&!c.parents(".filter-toggler").length&&a(".custom-filters").hasClass("active")){a(".filter-toggler").trigger("click")}});d.on("click",".nav-link",function(){if("catalog"==a(this).attr("data-tabname")){a(".products-categories").toggle()}});d.on("click",".filter-toggler",function(){a(this).toggleClass("active");d.find(".custom-filters").toggleClass("active")});d.on("click",".see-more-btn",function(b){b.preventDefault();var c=a(this).parents(".items-list").attr("data-pagetype"),d=a(this).parents(".tab-pane").attr("data-categoryid"),e=a(this).parents(".tab-pane").attr("data-page");a(this).parents(".tab-pane").attr("data-pagetype",c);k.loadPage(c,d,e)});d.on("click",".load-more-btn",function(b){b.preventDefault();var c=a(this).parents(".items-list").attr("data-pagetype"),d=a(this).parents(".tab-pane").attr("data-categoryid"),e=a(this).attr("data-page");k.loadMore(c,d,e)});d.on("click",".btn-pagination",function(b){b.preventDefault();var c=a(this).parents(".tab-pane").attr("data-pagetype"),d=a(this).parents(".tab-pane").attr("data-categoryid"),e=a(this).attr("data-page");a(this).parents(".tab-pane").attr("data-page",e);k.loadPage(c,d,e)});d.on("click",k.breadcrumbscontainer+" a",function(b){b.preventDefault();var c=a(this).attr("data-type"),d=a(this).attr("data-id"),e=a(this).parents(".tab-pane").attr("data-categoryid"),f=a(this).parents(".tab-pane").attr("data-page"),g=a(this).parents(".tab-pane").attr("data-pagetype");if("productspage"==c){k.loadPage(d,e,f);a(this).parents(".tab-pane").attr("data-pagetype",d)}else if("category"==c){a(this).parents(".tab-pane").attr("data-categoryid",d);k.loadPage(g,d,f)}else if("parentcategory"==c){e=a(this).attr("data-id");k.loadCategory(e,"true")}else{a(this).parents(".tab-pane").attr("data-page",0);a(this).parents(".tab-pane").attr("data-pagetype","dashboard");k.loadCatalog(!1)}});d.on("click",".product-view-btn",function(b){b.preventDefault();var c=a(this).parents(".productbox").attr("data-productid"),d=a(this).parents(".productbox").attr("data-checkoutid"),e=a(this).parents(".items-list").attr("data-pagetype"),f=a(this).parents(".tab-pane").attr("data-categoryid");a(this).parents(".tab-pane").attr("data-pagetype","product");k.loadProduct(c,e,f,d)});d.on("click",".category-view-btn",function(b){b.preventDefault();var c=a(this).parents(".categorybox").attr("data-categoryid"),d=a(this).attr("data-ischildren");k.loadCategory(c,d)});d.on("keyup",k.filtersearch,function(){var b=a(this).parents(".tab-pane").attr("data-pagetype"),c=a(this).parents(".tab-pane").attr("data-categoryid");a(this).parents(".tab-pane").attr("data-page",0);if("dashboard"==b||"product"==b){k.loadCatalog(!0)}else{k.loadPage(b,c,0)}});d.on("keypress",k.filtersearch,function(a){return 13!==a.which});d.on("keyup",k.filterinstructors,function(){var b=a(this).parents(".tab-pane").attr("data-pagetype"),c=a(this).parents(".tab-pane").attr("data-categoryid");a(this).parents(".tab-pane").attr("data-page",0);if("dashboard"==b||"product"==b){k.loadCatalog(!0)}else{k.loadPage(b,c,0)}});d.on("keypress",k.filterinstructors,function(a){return 13!==a.which});d.on("keyup",k.filtermyproducts,function(){a(this).parents(".tab-pane").attr("data-page",0);k.loadPage("myproducts",0,0)});d.on("keyup",k.filterteachingproducts,function(){a(this).parents(".tab-pane").attr("data-page",0);k.loadPage("teachingproducts",0,0)});d.on("keypress",k.filtermyproducts,function(a){return 13!==a.which});d.on("keypress",k.filterteachingproducts,function(a){return 13!==a.which});d.on("keyup",k.mycoursesrsearch,function(){var b=d.find(k.mycoursesrsearch).val(),c=b.toLowerCase();if(c){a("#bpc_mycourses .productbox").hide();a("#bpc_mycourses .productbox .product-name, #bpc_mycourses .productbox .product-description").each(function(){if(0<=a(this).text().toLowerCase().indexOf(c)){a(this).parents(".productbox").show()}})}else{a("#bpc_mycourses .productbox").show()}});d.on("change",k.sessionstimefrom,function(){a(k.filtersearch).trigger("keyup")});d.on("change",k.sessionstimeto,function(){a(k.filtersearch).trigger("keyup")});d.on("change",k.customfiltersform+" select",function(){a(k.filtersearch).trigger("keyup")});d.on("keyup",k.customfiltersform+" input",function(){a(k.filtersearch).trigger("keyup")});d.on("click",k.categories+" li > span",function(){var b=a(this).attr("data-categoryid");d.find(k.categories+" li").removeClass("active");var c=a(this).parent();c.addClass("active");if(c.hasClass("parent-item")){d.find(k.categories+" li.category-item").removeClass("open")}if(c.find(".subcategories").length){d.find(k.categories+" li.parent-item").removeClass("open");c.addClass("open");c.parents("li.category-item").addClass("open");c.find("ul li.category-item").removeClass("open");a(".products-categories").toggle()}else if(c.hasClass("products-categories-allcategories")){d.find(k.categories+" li.category-item").removeClass("open")}var e=a(k.tabcatalog).attr("data-pagetype");a(k.tabcatalog).attr("data-page",0);a(k.tabcatalog).attr("data-categoryid",b);if("dashboard"==e||"product"==e){k.loadCatalog(!0)}else{k.loadPage(e,b,0)}});d.on("keyup",k.fitergiftcards,function(){var b=a(this).parents(".tab-pane").attr("data-pagetype"),c=a(this).parents(".tab-pane").attr("data-categoryid");a(this).parents(".tab-pane").attr("data-page",0);k.loadPage(b,c,0)});d.on("keypress",k.fitergiftcards,function(a){return 13!==a.which});k.initSessionsFilter();if(0<c){k.loadCategory(c,"true")}a(".button_filter_view").click(function(b){b.preventDefault();if("list"===a(this).data("view")){a(".button_filter_view").removeClass("active");a(".list-opt").addClass("active");a(".items-list").addClass("catalog-list-view ");k.setUserPreferences("intellicart_productslisttype","list")}else{a(".items-list").removeClass("catalog-list-view ");a(".button_filter_view").addClass("active");a(".list-opt").removeClass("active");k.setUserPreferences("intellicart_productslisttype","grid")}});var e=window.location.hash,f="[id ^= block-products-catalog-choices]";if(a(f).length){if(e){a(".tab-pane").removeClass("active show");a(f+" .nav-link").removeClass("active show");a(e).addClass("active show");a(f+" a[href=\""+e+"\"]").addClass("active show")}a(f+" a").click(function(){a(this).tab("show");var b=a("body").scrollTop();window.location.hash=this.hash;a("html,body").scrollTop(b)})}},loadCatalog:function loadCatalog(c){var d=a(k.contentcontainer);if(d.length){d.find(k.loader).removeClass("hidden");d.addClass("loading");d.find(".catalog-filter").removeClass("hidden");if(k.hidefeatured){d.find(".featuredproducts-box").removeClass("hidden")}var f=a("#productscatalog_catalog_view").attr("data-categoryid"),g=d.find(k.filtersearch).val(),h=d.find(k.filterinstructors).val(),i=d.find(".filter-price-from").val(),j=d.find(".filter-price-to").val(),l="",m="",n="";if(d.find(k.sessionstimefrom).length){l=d.find(k.sessionstimefrom).val()}if(d.find(k.sessionstimeto).length){m=d.find(k.sessionstimeto).val()}if(d.find(k.customfiltersform).length){n=d.find(k.customfiltersform).serialize()}b.call([{methodname:"block_products_catalog_load_catalog",args:{categoryid:f,search:g,searchinstructor:h,price_from:i,price_to:j,sessiontime_from:l,sessiontime_to:m,customfilters:n,categoryview:c}}])[0].done(function(a){try{d.find(k.catalogview).html(a.content);d.find(k.loader).addClass("hidden");d.removeClass("loading")}catch(a){e.debug(a.message)}}).fail(function(a){e.debug(a.message);d.find(k.loader).addClass("hidden");d.removeClass("loading")})}},loadCategory:function loadCategory(c,d){var f=a(k.contentcontainer),g=k.catalogview;if(f.length){f.find(k.loader).removeClass("hidden");f.addClass("loading");a("#productscatalog_catalog_view").attr("data-categoryid",c);if("true"==d){f.find(".catalog-filter").removeClass("hidden");if(k.hidefeatured){f.find(".featuredproducts-box").removeClass("hidden")}b.call([{methodname:"block_products_catalog_load_category",args:{categoryid:c}}])[0].done(function(a){try{f.find(g).html(a.content);f.find(k.loader).addClass("hidden");f.removeClass("loading")}catch(a){e.debug(a.message)}}).fail(function(a){e.debug(a.message);f.find(k.loader).addClass("hidden");f.removeClass("loading")})}else{k.loadCatalog(!0)}}},loadPage:function loadPage(c,d,f){var g=a(k.contentcontainer),h=k.catalogview,i=k.filtersearch;if("myproducts"==c){h=k.myproductsview}else if("teachingproducts"==c){h=k.teachingproductsview}else if("giftcards"==c){h=k.giftcardsview}else if("certifications"==c){h=k.certificationsview}if("myproducts"==c){i=k.filtermyproducts}else if("teachingproducts"==c){i=k.filterteachingproducts}else if("giftcards"==c){i=k.fitergiftcards}if(g.length){g.find(k.loader).removeClass("hidden");g.addClass("loading");g.find(".catalog-filter").removeClass("hidden");if(k.hidefeatured){g.find(".featuredproducts-box").removeClass("hidden")}var j=g.find(i).val(),l=g.find(k.filterinstructors).val(),m=g.find(".filter-price-from").val(),n=g.find(".filter-price-to").val(),o="",p="",q="";if(g.find(k.sessionstimefrom).length){o=g.find(k.sessionstimefrom).val()}if(g.find(k.sessionstimeto).length){p=g.find(k.sessionstimeto).val()}if(g.find(k.customfiltersform).length){q=g.find(k.customfiltersform).serialize()}b.call([{methodname:"block_products_catalog_load_page",args:{pagetype:c,page:f,categoryid:d,search:j,searchinstructor:l,price_from:m,price_to:n,sessiontime_from:o,sessiontime_to:p,customfilters:q}}])[0].done(function(a){try{g.find(h).html(a.content);g.find(k.loader).addClass("hidden");g.removeClass("loading")}catch(a){e.debug(a.message)}}).fail(function(a){e.debug(a.message);g.find(k.loader).addClass("hidden");g.removeClass("loading")})}},loadMore:function loadMore(c,d,f){var g=a(k.contentcontainer),h=k.catalogview,i=k.filtersearch;if("myproducts"==c){h=k.myproductsview}else if("teachingproducts"==c){h=k.teachingproductsview}if("myproducts"==c){i=k.filtermyproducts}else if("teachingproducts"==c){i=k.filterteachingproducts}if(g.length){g.find(k.loader).removeClass("hidden");g.addClass("loading");g.find(".catalog-filter").removeClass("hidden");if(k.hidefeatured){g.find(".featuredproducts-box").removeClass("hidden")}var j=g.find(i).val(),l=g.find(k.filterinstructors).val(),m=g.find(".filter-price-from").val(),n=g.find(".filter-price-to").val(),o="",p="",q="";if(g.find(k.sessionstimefrom).length){o=g.find(k.sessionstimefrom).val()}if(g.find(k.sessionstimeto).length){p=g.find(k.sessionstimeto).val()}if(g.find(k.customfiltersform).length){q=g.find(k.customfiltersform).serialize()}b.call([{methodname:"block_products_catalog_load_more",args:{pagetype:c,page:f,categoryid:d,search:j,searchinstructor:l,price_from:m,price_to:n,sessiontime_from:o,sessiontime_to:p,customfilters:q}}])[0].done(function(a){try{g.find(h).find("[data-pagetype=\""+c+"\"] .frontpage-products-wrap").append(a.content);g.find(h).find("[data-pagetype=\""+c+"\"] .load-more-btn").attr("data-page",a.page);if(!a.showloadmore){g.find(h).find("[data-pagetype=\""+c+"\"] .see-more-box").hide()}g.find(k.loader).addClass("hidden");g.removeClass("loading")}catch(a){e.debug(a.message)}}).fail(function(a){e.debug(a.message);g.find(k.loader).addClass("hidden");g.removeClass("loading")})}},loadProduct:function loadProduct(c,d,g,l){var m=a(k.contentcontainer),n="myproducts"==d?k.myproductsview:k.catalogview,o="myproducts"==d?".my-products-filter":".products-filter";if(m.length){m.find(k.loader).removeClass("hidden");m.addClass("loading");if(l==void 0){l=0}b.call([{methodname:"block_products_catalog_load_product",args:{productid:c,pagetype:d,categoryid:g,checkoutid:l}}])[0].done(function(a){try{if(k.hidefeatured){m.find(".featuredproducts-box").addClass("hidden")}m.find(n).html(a.content);m.find(o).addClass("hidden");m.find(k.loader).addClass("hidden");m.removeClass("loading");var b="myproducts"==d?!0:!1;if("myproducts"==d&&0<m.find(".product-sessions.sessions-attendance").length){b=!1}f.initsessions(c,0,b);h.init(c,"product");i.init(c,"product","#product_reviews");j.init(c)}catch(a){e.debug(a.message)}}).fail(function(a){e.debug(a.message);m.find(k.loader).addClass("hidden");m.removeClass("loading")})}},initSessionsFilter:function initSessionsFilter(){var b=a(k.contentcontainer);if(b.length){c.get_strings([{key:"sessionsfiltertimeformat",component:"block_products_catalog"}]).then(function(a){if(b.find(k.sessionstimefrom).length){b.find(k.sessionstimefrom).flatpickr({enableTime:!0,dateFormat:a[0],onChange:function onChange(){}})}if(b.find(k.sessionstimeto).length){b.find(k.sessionstimeto).flatpickr({enableTime:!0,dateFormat:a[0],onChange:function onChange(){}})}})}},setUserPreferences:function setUserPreferences(a,c){b.call([{methodname:"block_products_catalog_set_user_preferences",args:{key:a,value:c}}])[0].done(function(){try{}catch(a){e.debug(a.message)}}).fail(function(a){e.debug(a.message)})}};return k});
function _typeof(e){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(e){return typeof e}}else{_typeof=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return _typeof(e)}(function(e){if("function"==typeof define&&define.amd){define ("block_products_catalog/jquery-ui",["jquery"],e)}else{e(jQuery)}})(function(e){e.ui=e.ui||{};var l=e.ui.version="1.12.1",d=0,c=Array.prototype.slice;e.cleanData=function(t){return function(n){var o,a,s;for(s=0;null!=(a=n[s]);s++){try{o=e._data(a,"events");if(o&&o.remove){e(a).triggerHandler("remove")}}catch(t){}}t(n)}}(e.cleanData);e.widget=function(t,i,n){var o,a,s,r={},l=t.split(".")[0];t=t.split(".")[1];var d=l+"-"+t;if(!n){n=i;i=e.Widget}if(e.isArray(n)){n=e.extend.apply(null,[{}].concat(n))}e.expr[":"][d.toLowerCase()]=function(t){return!!e.data(t,d)};e[l]=e[l]||{};o=e[l][t];a=e[l][t]=function(e,t){if(!this._createWidget){return new a(e,t)}if(arguments.length){this._createWidget(e,t)}};e.extend(a,o,{version:n.version,_proto:e.extend({},n),_childConstructors:[]});s=new i;s.options=e.widget.extend({},s.options);e.each(n,function(t,n){if(!e.isFunction(n)){r[t]=n;return}r[t]=function(){function e(){return i.prototype[t].apply(this,arguments)}function o(e){return i.prototype[t].apply(this,e)}return function(){var t=this._super,i=this._superApply,a;this._super=e;this._superApply=o;a=n.apply(this,arguments);this._super=t;this._superApply=i;return a}}()});a.prototype=e.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||t:t},r,{constructor:a,namespace:l,widgetName:t,widgetFullName:d});if(o){e.each(o._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,a,i._proto)});delete o._childConstructors}else{i._childConstructors.push(a)}e.widget.bridge(t,a);return a};e.widget.extend=function(t){var i=c.call(arguments,1),n=0,o=i.length,a,s;for(;n<o;n++){for(a in i[n]){s=i[n][a];if(i[n].hasOwnProperty(a)&&s!==void 0){if(e.isPlainObject(s)){t[a]=e.isPlainObject(t[a])?e.widget.extend({},t[a],s):e.widget.extend({},s)}else{t[a]=s}}}}return t};e.widget.bridge=function(t,i){var n=i.prototype.widgetFullName||t;e.fn[t]=function(o){var a="string"==typeof o,s=c.call(arguments,1),r=this;if(a){if(!this.length&&"instance"===o){r=void 0}else{this.each(function(){var i,a=e.data(this,n);if("instance"===o){r=a;return!1}if(!a){return e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")}if(!e.isFunction(a[o])||"_"===o.charAt(0)){return e.error("no such method '"+o+"' for "+t+" widget instance")}i=a[o].apply(a,s);if(i!==a&&i!==void 0){r=i&&i.jquery?r.pushStack(i.get()):i;return!1}})}}else{if(s.length){o=e.widget.extend.apply(null,[o].concat(s))}this.each(function(){var t=e.data(this,n);if(t){t.option(o||{});if(t._init){t._init()}}else{e.data(this,n,new i(o,this))}})}return r}};e.Widget=function(){};e.Widget._childConstructors=[];e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function _createWidget(t,i){i=e(i||this.defaultElement||this)[0];this.element=e(i);this.uuid=d++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=e();this.hoverable=e();this.focusable=e();this.classesElementLookup={};if(i!==this){e.data(i,this.widgetFullName,this);this._on(!0,this.element,{remove:function remove(e){if(e.target===i){this.destroy()}}});this.document=e(i.style?i.ownerDocument:i.document||i);this.window=e(this.document[0].defaultView||this.document[0].parentWindow)}this.options=e.widget.extend({},this.options,this._getCreateOptions(),t);this._create();if(this.options.disabled){this._setOptionDisabled(this.options.disabled)}this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function _getCreateOptions(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function destroy(){var t=this;this._destroy();e.each(this.classesElementLookup,function(e,i){t._removeClass(i,e)});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function widget(){return this.element},option:function option(t,n){var o=t,a,s,r;if(0===arguments.length){return e.widget.extend({},this.options)}if("string"==typeof t){o={};a=t.split(".");t=a.shift();if(a.length){s=o[t]=e.widget.extend({},this.options[t]);for(r=0;r<a.length-1;r++){s[a[r]]=s[a[r]]||{};s=s[a[r]]}t=a.pop();if(1===arguments.length){return s[t]===void 0?null:s[t]}s[t]=n}else{if(1===arguments.length){return this.options[t]===void 0?null:this.options[t]}o[t]=n}}this._setOptions(o);return this},_setOptions:function _setOptions(e){for(var t in e){this._setOption(t,e[t])}return this},_setOption:function _setOption(e,t){if("classes"===e){this._setOptionClasses(t)}this.options[e]=t;if("disabled"===e){this._setOptionDisabled(t)}return this},_setOptionClasses:function _setOptionClasses(t){var i,n,o;for(i in t){o=this.classesElementLookup[i];if(t[i]===this.options.classes[i]||!o||!o.length){continue}n=e(o.get());this._removeClass(o,i);n.addClass(this._classes({element:n,keys:i,classes:t,add:!0}))}},_setOptionDisabled:function _setOptionDisabled(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e);if(e){this._removeClass(this.hoverable,null,"ui-state-hover");this._removeClass(this.focusable,null,"ui-state-focus")}},enable:function enable(){return this._setOptions({disabled:!1})},disable:function disable(){return this._setOptions({disabled:!0})},_classes:function _classes(t){var n=[],o=this;t=e.extend({element:this.element,classes:this.options.classes||{}},t);function i(a,s){var r,l;for(l=0;l<a.length;l++){r=o.classesElementLookup[a[l]]||e();if(t.add){r=e(e.unique(r.get().concat(t.element.get())))}else{r=e(r.not(t.element).get())}o.classesElementLookup[a[l]]=r;n.push(a[l]);if(s&&t.classes[a[l]]){n.push(t.classes[a[l]])}}}this._on(t.element,{remove:"_untrackClassesElement"});if(t.keys){i(t.keys.match(/\S+/g)||[],!0)}if(t.extra){i(t.extra.match(/\S+/g)||[])}return n.join(" ")},_untrackClassesElement:function _untrackClassesElement(t){var i=this;e.each(i.classesElementLookup,function(n,o){if(-1!==e.inArray(t.target,o)){i.classesElementLookup[n]=e(o.not(t.target).get())}})},_removeClass:function _removeClass(e,t,i){return this._toggleClass(e,t,i,!1)},_addClass:function _addClass(e,t,i){return this._toggleClass(e,t,i,!0)},_toggleClass:function _toggleClass(e,t,i,n){n="boolean"==typeof n?n:i;var o="string"==typeof e||null===e,a={extra:o?t:i,keys:o?e:t,element:o?this.element:e,add:n};a.element.toggleClass(this._classes(a),n);return this},_on:function _on(t,i,n){var o,a=this;if("boolean"!=typeof t){n=i;i=t;t=!1}if(!n){n=i;i=this.element;o=this.widget()}else{i=o=e(i);this.bindings=this.bindings.add(i)}e.each(n,function(n,s){function r(){if(!t&&(!0===a.options.disabled||e(this).hasClass("ui-state-disabled"))){return}return("string"==typeof s?a[s]:s).apply(a,arguments)}if("string"!=typeof s){r.guid=s.guid=s.guid||r.guid||e.guid++}var l=n.match(/^([\w:-]*)\s*(.*)$/),d=l[1]+a.eventNamespace,c=l[2];if(c){o.on(d,c,r)}else{i.on(d,r)}})},_off:function _off(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;t.off(i).off(i);this.bindings=e(this.bindings.not(t).get());this.focusable=e(this.focusable.not(t).get());this.hoverable=e(this.hoverable.not(t).get())},_delay:function _delay(e,t){var i=this;return setTimeout(function(){return("string"==typeof e?i[e]:e).apply(i,arguments)},t||0)},_hoverable:function _hoverable(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function mouseenter(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function mouseleave(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function _focusable(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function focusin(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function focusout(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function _trigger(t,i,n){var o,a,s=this.options[t];n=n||{};i=e.Event(i);i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase();i.target=this.element[0];a=i.originalEvent;if(a){for(o in a){if(!(o in i)){i[o]=a[o]}}}this.element.trigger(i,n);return!(e.isFunction(s)&&!1===s.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}};e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,o,a){if("string"==typeof o){o={effect:o}}var s,r=!o?t:!0===o||"number"==typeof o?i:o.effect||i;o=o||{};if("number"==typeof o){o={duration:o}}s=!e.isEmptyObject(o);o.complete=a;if(o.delay){n.delay(o.delay)}if(s&&e.effects&&e.effects.effect[r]){n[t](o)}else if(r!==t&&n[r]){n[r](o.duration,o.easing,a)}else{n.queue(function(i){e(this)[t]();if(a){a.call(n[0])}i()})}}});e.widget;(function(){var o,a=Math.max,s=Math.abs,r=/left|center|right/,l=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,p=/%$/,u=e.fn.position;function t(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function n(t){var i=t[0];if(9===i.nodeType){return{width:t.width(),height:t.height(),offset:{top:0,left:0}}}if(e.isWindow(i)){return{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}}if(i.preventDefault){return{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}}return{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.position={scrollbarWidth:function scrollbarWidth(){if(o!==void 0){return o}var t,i,n=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=n.children()[0];e("body").append(n);t=a.offsetWidth;n.css("overflow","scroll");i=a.offsetWidth;if(t===i){i=n[0].clientWidth}n.remove();return o=t-i},getScrollInfo:function getScrollInfo(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),o="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,a="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function getWithinInfo(t){var i=e(t||window),n=e.isWindow(i[0]),o=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:o,offset:!n&&!o?e(t).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}};e.fn.position=function(o){if(!o||!o.of){return u.apply(this,arguments)}o=e.extend({},o);var p,g,h,m,f,_,b=e(o.of),v=e.position.getWithinInfo(o.within),y=e.position.getScrollInfo(v),w=(o.collision||"flip").split(" "),x={};_=n(b);if(b[0].preventDefault){o.at="left top"}g=_.width;h=_.height;m=_.offset;f=e.extend({},m);e.each(["my","at"],function(){var e=(o[this]||"").split(" "),t,i;if(1===e.length){e=r.test(e[0])?e.concat(["center"]):l.test(e[0])?["center"].concat(e):["center","center"]}e[0]=r.test(e[0])?e[0]:"center";e[1]=l.test(e[1])?e[1]:"center";t=d.exec(e[0]);i=d.exec(e[1]);x[this]=[t?t[0]:0,i?i[0]:0];o[this]=[c.exec(e[0])[0],c.exec(e[1])[0]]});if(1===w.length){w[1]=w[0]}if("right"===o.at[0]){f.left+=g}else if("center"===o.at[0]){f.left+=g/2}if("bottom"===o.at[1]){f.top+=h}else if("center"===o.at[1]){f.top+=h/2}p=t(x.at,g,h);f.left+=p[0];f.top+=p[1];return this.each(function(){var n,r,l=e(this),d=l.outerWidth(),c=l.outerHeight(),u=i(this,"marginLeft"),_=i(this,"marginTop"),k=d+u+i(this,"marginRight")+y.width,C=c+_+i(this,"marginBottom")+y.height,D=e.extend({},f),P=t(x.my,l.outerWidth(),l.outerHeight());if("right"===o.my[0]){D.left-=d}else if("center"===o.my[0]){D.left-=d/2}if("bottom"===o.my[1]){D.top-=c}else if("center"===o.my[1]){D.top-=c/2}D.left+=P[0];D.top+=P[1];n={marginLeft:u,marginTop:_};e.each(["left","top"],function(t,i){if(e.ui.position[w[t]]){e.ui.position[w[t]][i](D,{targetWidth:g,targetHeight:h,elemWidth:d,elemHeight:c,collisionPosition:n,collisionWidth:k,collisionHeight:C,offset:[p[0]+P[0],p[1]+P[1]],my:o.my,at:o.at,within:v,elem:l})}});if(o.using){r=function(e){var t=m.left-D.left,i=t+g-d,n=m.top-D.top,r=n+h-c,p={target:{element:b,left:m.left,top:m.top,width:g,height:h},element:{element:l,left:D.left,top:D.top,width:d,height:c},horizontal:0>i?"left":0<t?"right":"center",vertical:0>r?"top":0<n?"bottom":"middle"};if(g<d&&s(t+i)<g){p.horizontal="center"}if(h<c&&s(n+r)<h){p.vertical="middle"}if(a(s(t),s(i))>a(s(n),s(r))){p.important="horizontal"}else{p.important="vertical"}o.using.call(this,e,p)}}l.offset(e.extend(D,{using:r}))})};e.ui.position={fit:{left:function left(e,t){var i=t.within,n=i.isWindow?i.scrollLeft:i.offset.left,o=i.width,s=e.left-t.collisionPosition.marginLeft,r=n-s,l=s+t.collisionWidth-o-n,d;if(t.collisionWidth>o){if(0<r&&0>=l){d=e.left+r+t.collisionWidth-o-n;e.left+=r-d}else if(0<l&&0>=r){e.left=n}else{if(r>l){e.left=n+o-t.collisionWidth}else{e.left=n}}}else if(0<r){e.left+=r}else if(0<l){e.left-=l}else{e.left=a(e.left-s,e.left)}},top:function top(e,t){var i=t.within,n=i.isWindow?i.scrollTop:i.offset.top,o=t.within.height,s=e.top-t.collisionPosition.marginTop,r=n-s,l=s+t.collisionHeight-o-n,d;if(t.collisionHeight>o){if(0<r&&0>=l){d=e.top+r+t.collisionHeight-o-n;e.top+=r-d}else if(0<l&&0>=r){e.top=n}else{if(r>l){e.top=n+o-t.collisionHeight}else{e.top=n}}}else if(0<r){e.top+=r}else if(0<l){e.top-=l}else{e.top=a(e.top-s,e.top)}}},flip:{left:function left(e,t){var i=t.within,n=i.offset.left+i.scrollLeft,o=i.width,a=i.isWindow?i.scrollLeft:i.offset.left,r=e.left-t.collisionPosition.marginLeft,l=r-a,d=r+t.collisionWidth-o-a,c="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,u=-2*t.offset[0],g,h;if(0>l){g=e.left+c+p+u+t.collisionWidth-o-n;if(0>g||g<s(l)){e.left+=c+p+u}}else if(0<d){h=e.left-t.collisionPosition.marginLeft+c+p+u-a;if(0<h||s(h)<d){e.left+=c+p+u}}},top:function(e,t){var i=t.within,n=i.offset.top+i.scrollTop,o=i.height,a=i.isWindow?i.scrollTop:i.offset.top,r=e.top-t.collisionPosition.marginTop,l=r-a,d=r+t.collisionHeight-o-a,c="top"===t.my[1],p=c?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,u="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,g=-2*t.offset[1],h,m;if(0>l){m=e.top+p+u+g+t.collisionHeight-o-n;if(0>m||m<s(l)){e.top+=p+u+g}}else if(0<d){h=e.top-t.collisionPosition.marginTop+p+u+g-a;if(0<h||s(h)<d){e.top+=p+u+g}}}},flipfit:{left:function left(){e.ui.position.flip.left.apply(this,arguments);e.ui.position.fit.left.apply(this,arguments)},top:function top(){e.ui.position.flip.top.apply(this,arguments);e.ui.position.fit.top.apply(this,arguments)}}}})();var p=e.ui.position,u=e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,n,i){return!!e.data(t,i[3])}}),g=e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function enableSelection(){return this.off(".ui-disableSelection")}});e.ui.focusable=function(i,n){var o,a,s,r,l,d=i.nodeName.toLowerCase();if("area"===d){o=i.parentNode;a=o.name;if(!i.href||!a||"map"!==o.nodeName.toLowerCase()){return!1}s=e("img[usemap='#"+a+"']");return 0<s.length&&s.is(":visible")}if(/^(input|select|textarea|button|object)$/.test(d)){r=!i.disabled;if(r){l=e(i).closest("fieldset")[0];if(l){r=!l.disabled}}}else if("a"===d){r=i.href||n}else{r=n}return r&&e(i).is(":visible")&&t(e(i))};function t(e){var t=e.css("visibility");while("inherit"===t){e=e.parent();t=e.css("visibility")}return"hidden"!==t}e.extend(e.expr[":"],{focusable:function(t){return e.ui.focusable(t,null!=e.attr(t,"tabindex"))}});var h=e.ui.focusable,m=e.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):e(this[0].form)},f=e.ui.formResetMixin={_formResetHandler:function _formResetHandler(){var t=e(this);setTimeout(function(){var i=t.data("ui-form-reset-instances");e.each(i,function(){this.refresh()})})},_bindFormResetHandler:function _bindFormResetHandler(){this.form=this.element.form();if(!this.form.length){return}var e=this.form.data("ui-form-reset-instances")||[];if(!e.length){this.form.on("reset.ui-form-reset",this._formResetHandler)}e.push(this);this.form.data("ui-form-reset-instances",e)},_unbindFormResetHandler:function _unbindFormResetHandler(){if(!this.form.length){return}var t=this.form.data("ui-form-reset-instances");t.splice(e.inArray(this,t),1);if(t.length){this.form.data("ui-form-reset-instances",t)}else{this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}};if("1.7"===e.fn.jquery.substring(0,3)){e.each(["Width","Height"],function(t,i){var o="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};function n(t,i,n,a){e.each(o,function(){i-=parseFloat(e.css(t,"padding"+this))||0;if(n){i-=parseFloat(e.css(t,"border"+this+"Width"))||0}if(a){i-=parseFloat(e.css(t,"margin"+this))||0}});return i}e.fn["inner"+i]=function(t){if(t===void 0){return s["inner"+i].call(this)}return this.each(function(){e(this).css(a,n(this,t)+"px")})};e.fn["outer"+i]=function(t,o){if("number"!=typeof t){return s["outer"+i].call(this,t)}return this.each(function(){e(this).css(a,n(this,t,!0,o)+"px")})}});e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}var _=e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},b=e.ui.escapeSelector=function(){return function(e){return e.replace(/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,"\\$1")}}(),v=e.fn.labels=function(){var t,i,n,o,a;if(this[0].labels&&this[0].labels.length){return this.pushStack(this[0].labels)}o=this.eq(0).parents("label");n=this.attr("id");if(n){t=this.eq(0).parents().last();a=t.add(t.length?t.siblings():this.siblings());i="label[for='"+e.ui.escapeSelector(n)+"']";o=o.add(a.find(i).addBack(i))}return this.pushStack(o)},y=e.fn.scrollParent=function(t){var i=this.css("position"),n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var t=e(this);if("absolute"===i&&"static"===t.css("position")){return!1}return n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"===i||!o.length?e(this[0].ownerDocument||document):o},w=e.extend(e.expr[":"],{tabbable:function(t){var i=e.attr(t,"tabindex"),n=null!=i;return(!n||0<=i)&&e.ui.focusable(t,n)}}),x=e.fn.extend({uniqueId:function(){var e=0;return function(){return this.each(function(){if(!this.id){this.id="ui-id-"+ ++e}})}}(),removeUniqueId:function removeUniqueId(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id)){e(this).removeAttr("id")}})}}),k=e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),C=!1;e(document).on("mouseup",function(){C=!1});var D=e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function _mouseInit(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent")){e.removeData(i.target,t.widgetName+".preventClickEvent");i.stopImmediatePropagation();return!1}});this.started=!1},_mouseDestroy:function _mouseDestroy(){this.element.off("."+this.widgetName);if(this._mouseMoveDelegate){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function _mouseDown(t){if(C){return}this._mouseMoved=!1;this._mouseStarted&&this._mouseUp(t);this._mouseDownEvent=t;var i=this,n=1===t.which,o="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!n||o||!this._mouseCapture(t)){return!0}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)}if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=!1!==this._mouseStart(t);if(!this._mouseStarted){t.preventDefault();return!0}}if(!0===e.data(t.target,this.widgetName+".preventClickEvent")){e.removeData(t.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(e){return i._mouseMove(e)};this._mouseUpDelegate=function(e){return i._mouseUp(e)};this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate);t.preventDefault();C=!0;return!0},_mouseMove:function _mouseMove(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button){return this._mouseUp(t)}else if(!t.which){if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey){this.ignoreMissingWhich=!0}else if(!this.ignoreMissingWhich){return this._mouseUp(t)}}}if(t.which||t.button){this._mouseMoved=!0}if(this._mouseStarted){this._mouseDrag(t);return t.preventDefault()}if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t);this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)}return!this._mouseStarted},_mouseUp:function _mouseUp(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=!1;if(t.target===this._mouseDownEvent.target){e.data(t.target,this.widgetName+".preventClickEvent",!0)}this._mouseStop(t)}if(this._mouseDelayTimer){clearTimeout(this._mouseDelayTimer);delete this._mouseDelayTimer}this.ignoreMissingWhich=!1;C=!1;t.preventDefault()},_mouseDistanceMet:function _mouseDistanceMet(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function _mouseDelayMet(){return this.mouseDelayMet},_mouseStart:function _mouseStart(){},_mouseDrag:function _mouseDrag(){},_mouseStop:function _mouseStop(){},_mouseCapture:function _mouseCapture(){return!0}}),P=e.ui.plugin={add:function add(t,n,o){var a,s=e.ui[t].prototype;for(a in o){s.plugins[a]=s.plugins[a]||[];s.plugins[a].push([n,o[a]])}},call:function call(e,t,n,o){var a,s=e.plugins[t];if(!s){return}if(!o&&(!e.element[0].parentNode||11===e.element[0].parentNode.nodeType)){return}for(a=0;a<s.length;a++){if(e.options[s[a][0]]){s[a][1].apply(e.element,n)}}}},T=e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(i){t=e.body}if(!t){t=e.body}if(!t.nodeName){t=e.body}return t},I=e.ui.safeBlur=function(t){if(t&&"body"!==t.nodeName.toLowerCase()){e(t).trigger("blur")}};e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function _create(){if("original"===this.options.helper){this._setPositionRelative()}if(this.options.addClasses){this._addClass("ui-draggable")}this._setHandleClassName();this._mouseInit()},_setOption:function _setOption(e,t){this._super(e,t);if("handle"===e){this._removeHandleClassName();this._setHandleClassName()}},_destroy:function _destroy(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=!0;return}this._removeHandleClassName();this._mouseDestroy()},_mouseCapture:function _mouseCapture(t){var i=this.options;if(this.helper||i.disabled||0<e(t.target).closest(".ui-resizable-handle").length){return!1}this.handle=this._getHandle(t);if(!this.handle){return!1}this._blurActiveElement(t);this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix);return!0},_blockFrames:function _blockFrames(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function _unblockFrames(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_blurActiveElement:function _blurActiveElement(t){var i=e.ui.safeActiveElement(this.document[0]),n=e(t.target);if(n.closest(i).length){return}e.ui.safeBlur(i)},_mouseStart:function _mouseStart(t){var i=this.options;this.helper=this._createHelper(t);this._addClass(this.helper,"ui-draggable-dragging");this._cacheHelperProportions();if(e.ui.ddmanager){e.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(!0);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length;this.positionAbs=this.element.offset();this._refreshOffsets(t);this.originalPosition=this.position=this._generatePosition(t,!1);this.originalPageX=t.pageX;this.originalPageY=t.pageY;i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt);this._setContainment();if(!1===this._trigger("start",t)){this._clear();return!1}this._cacheHelperProportions();if(e.ui.ddmanager&&!i.dropBehaviour){e.ui.ddmanager.prepareOffsets(this,t)}this._mouseDrag(t,!0);if(e.ui.ddmanager){e.ui.ddmanager.dragStart(this,t)}return!0},_refreshOffsets:function _refreshOffsets(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function _mouseDrag(t,i){if(this.hasFixedAncestor){this.offset.parent=this._getParentOffset()}this.position=this._generatePosition(t,!0);this.positionAbs=this._convertPositionTo("absolute");if(!i){var n=this._uiHash();if(!1===this._trigger("drag",t,n)){this._mouseUp(new e.Event("mouseup",t));return!1}this.position=n.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if(e.ui.ddmanager){e.ui.ddmanager.drag(this,t)}return!1},_mouseStop:function _mouseStop(t){var i=this,n=!1;if(e.ui.ddmanager&&!this.options.dropBehaviour){n=e.ui.ddmanager.drop(this,t)}if(this.dropped){n=this.dropped;this.dropped=!1}if("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(!1!==i._trigger("stop",t)){i._clear()}})}else{if(!1!==this._trigger("stop",t)){this._clear()}}return!1},_mouseUp:function _mouseUp(t){this._unblockFrames();if(e.ui.ddmanager){e.ui.ddmanager.dragStop(this,t)}if(this.handleElement.is(t.target)){this.element.trigger("focus")}return e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function cancel(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp(new e.Event("mouseup",{target:this.element[0]}))}else{this._clear()}return this},_getHandle:function _getHandle(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function _setHandleClassName(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function _removeHandleClassName(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function _createHelper(t){var i=this.options,n=e.isFunction(i.helper),o=n?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;if(!o.parents("body").length){o.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo)}if(n&&o[0]===this.element[0]){this._setPositionRelative()}if(o[0]!==this.element[0]&&!/(fixed|absolute)/.test(o.css("position"))){o.css("position","absolute")}return o},_setPositionRelative:function _setPositionRelative(){if(!/^(?:r|a|f)/.test(this.element.css("position"))){this.element[0].style.position="relative"}},_adjustOffsetFromHelper:function _adjustOffsetFromHelper(t){if("string"==typeof t){t=t.split(" ")}if(e.isArray(t)){t={left:+t[0],top:+t[1]||0}}if("left"in t){this.offset.click.left=t.left+this.margins.left}if("right"in t){this.offset.click.left=this.helperProportions.width-t.right+this.margins.left}if("top"in t){this.offset.click.top=t.top+this.margins.top}if("bottom"in t){this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top}},_isRootNode:function _isRootNode(e){return /(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function _getParentOffset(){var t=this.offsetParent.offset(),i=this.document[0];if("absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])){t.left+=this.scrollParent.scrollLeft();t.top+=this.scrollParent.scrollTop()}if(this._isRootNode(this.offsetParent[0])){t={top:0,left:0}}return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function _getRelativeOffset(){if("relative"!==this.cssPosition){return{top:0,left:0}}var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(!t?this.scrollParent.scrollTop():0),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(!t?this.scrollParent.scrollLeft():0)}},_cacheMargins:function _cacheMargins(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function _cacheHelperProportions(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function _setContainment(){var t,i,n,a=this.options,o=this.document[0];this.relativeContainer=null;if(!a.containment){this.containment=null;return}if("window"===a.containment){this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if("document"===a.containment){this.containment=[0,0,e(o).width()-this.helperProportions.width-this.margins.left,(e(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(a.containment.constructor===Array){this.containment=a.containment;return}if("parent"===a.containment){a.containment=this.helper[0].parentNode}i=e(a.containment);n=i[0];if(!n){return}t=/(scroll|auto)/.test(i.css("overflow"));this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relativeContainer=i},_convertPositionTo:function _convertPositionTo(e,t){if(!t){t=this.position}var i="absolute"===e?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function _generatePosition(e,t){var i,n,a,s,r=this.options,o=this._isRootNode(this.scrollParent[0]),l=e.pageX,d=e.pageY;if(!o||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}}if(t){if(this.containment){if(this.relativeContainer){n=this.relativeContainer.offset();i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]}else{i=this.containment}if(e.pageX-this.offset.click.left<i[0]){l=i[0]+this.offset.click.left}if(e.pageY-this.offset.click.top<i[1]){d=i[1]+this.offset.click.top}if(e.pageX-this.offset.click.left>i[2]){l=i[2]+this.offset.click.left}if(e.pageY-this.offset.click.top>i[3]){d=i[3]+this.offset.click.top}}if(r.grid){a=r.grid[1]?this.originalPageY+Math.round((d-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY;d=i?a-this.offset.click.top>=i[1]||a-this.offset.click.top>i[3]?a:a-this.offset.click.top>=i[1]?a-r.grid[1]:a+r.grid[1]:a;s=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX;l=i?s-this.offset.click.left>=i[0]||s-this.offset.click.left>i[2]?s:s-this.offset.click.left>=i[0]?s-r.grid[0]:s+r.grid[0]:s}if("y"===r.axis){l=this.originalPageX}if("x"===r.axis){d=this.originalPageY}}return{top:d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:o?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:o?0:this.offset.scroll.left)}},_clear:function _clear(){this._removeClass(this.helper,"ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=!1;if(this.destroyOnClear){this.destroy()}},_trigger:function _trigger(t,i,n){n=n||this._uiHash();e.ui.plugin.call(this,t,[i,n,this],!0);if(/^(drag|start|stop)/.test(t)){this.positionAbs=this._convertPositionTo("absolute");n.offset=this.positionAbs}return e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function _uiHash(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});e.ui.plugin.add("draggable","connectToSortable",{start:function start(t,i,n){var o=e.extend({},i,{item:n.element});n.sortables=[];e(n.options.connectToSortable).each(function(){var i=e(this).sortable("instance");if(i&&!i.options.disabled){n.sortables.push(i);i.refreshPositions();i._trigger("activate",t,o)}})},stop:function stop(t,i,n){var o=e.extend({},i,{item:n.element});n.cancelHelperRemoval=!1;e.each(n.sortables,function(){var e=this;if(e.isOver){e.isOver=0;n.cancelHelperRemoval=!0;e.cancelHelperRemoval=!1;e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")};e._mouseStop(t);e.options.helper=e.options._helper}else{e.cancelHelperRemoval=!0;e._trigger("deactivate",t,o)}})},drag:function drag(t,i,n){e.each(n.sortables,function(){var o=!1,a=this;a.positionAbs=n.positionAbs;a.helperProportions=n.helperProportions;a.offset.click=n.offset.click;if(a._intersectsWith(a.containerCache)){o=!0;e.each(n.sortables,function(){this.positionAbs=n.positionAbs;this.helperProportions=n.helperProportions;this.offset.click=n.offset.click;if(this!==a&&this._intersectsWith(this.containerCache)&&e.contains(a.element[0],this.element[0])){o=!1}return o})}if(o){if(!a.isOver){a.isOver=1;n._parent=i.helper.parent();a.currentItem=i.helper.appendTo(a.element).data("ui-sortable-item",!0);a.options._helper=a.options.helper;a.options.helper=function(){return i.helper[0]};t.target=a.currentItem[0];a._mouseCapture(t,!0);a._mouseStart(t,!0,!0);a.offset.click.top=n.offset.click.top;a.offset.click.left=n.offset.click.left;a.offset.parent.left-=n.offset.parent.left-a.offset.parent.left;a.offset.parent.top-=n.offset.parent.top-a.offset.parent.top;n._trigger("toSortable",t);n.dropped=a.element;e.each(n.sortables,function(){this.refreshPositions()});n.currentItem=n.element;a.fromOutside=n}if(a.currentItem){a._mouseDrag(t);i.position=a.position}}else{if(a.isOver){a.isOver=0;a.cancelHelperRemoval=!0;a.options._revert=a.options.revert;a.options.revert=!1;a._trigger("out",t,a._uiHash(a));a._mouseStop(t,!0);a.options.revert=a.options._revert;a.options.helper=a.options._helper;if(a.placeholder){a.placeholder.remove()}i.helper.appendTo(n._parent);n._refreshOffsets(t);i.position=n._generatePosition(t,!0);n._trigger("fromSortable",t);n.dropped=!1;e.each(n.sortables,function(){this.refreshPositions()})}}})}});e.ui.plugin.add("draggable","cursor",{start:function start(i,n,a){var s=e("body"),t=a.options;if(s.css("cursor")){t._cursor=s.css("cursor")}s.css("cursor",t.cursor)},stop:function stop(t,i,n){var a=n.options;if(a._cursor){e("body").css("cursor",a._cursor)}}});e.ui.plugin.add("draggable","opacity",{start:function start(i,n,a){var s=e(n.helper),t=a.options;if(s.css("opacity")){t._opacity=s.css("opacity")}s.css("opacity",t.opacity)},stop:function stop(t,i,n){var a=n.options;if(a._opacity){e(i.helper).css("opacity",a._opacity)}}});e.ui.plugin.add("draggable","scroll",{start:function start(e,t,n){if(!n.scrollParentNotHidden){n.scrollParentNotHidden=n.helper.scrollParent(!1)}if(n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName){n.overflowOffset=n.scrollParentNotHidden.offset()}},drag:function drag(t,n,a){var i=a.options,o=!1,s=a.scrollParentNotHidden[0],r=a.document[0];if(s!==r&&"HTML"!==s.tagName){if(!i.axis||"x"!==i.axis){if(a.overflowOffset.top+s.offsetHeight-t.pageY<i.scrollSensitivity){s.scrollTop=o=s.scrollTop+i.scrollSpeed}else if(t.pageY-a.overflowOffset.top<i.scrollSensitivity){s.scrollTop=o=s.scrollTop-i.scrollSpeed}}if(!i.axis||"y"!==i.axis){if(a.overflowOffset.left+s.offsetWidth-t.pageX<i.scrollSensitivity){s.scrollLeft=o=s.scrollLeft+i.scrollSpeed}else if(t.pageX-a.overflowOffset.left<i.scrollSensitivity){s.scrollLeft=o=s.scrollLeft-i.scrollSpeed}}}else{if(!i.axis||"x"!==i.axis){if(t.pageY-e(r).scrollTop()<i.scrollSensitivity){o=e(r).scrollTop(e(r).scrollTop()-i.scrollSpeed)}else if(e(window).height()-(t.pageY-e(r).scrollTop())<i.scrollSensitivity){o=e(r).scrollTop(e(r).scrollTop()+i.scrollSpeed)}}if(!i.axis||"y"!==i.axis){if(t.pageX-e(r).scrollLeft()<i.scrollSensitivity){o=e(r).scrollLeft(e(r).scrollLeft()-i.scrollSpeed)}else if(e(window).width()-(t.pageX-e(r).scrollLeft())<i.scrollSensitivity){o=e(r).scrollLeft(e(r).scrollLeft()+i.scrollSpeed)}}}if(!1!==o&&e.ui.ddmanager&&!i.dropBehaviour){e.ui.ddmanager.prepareOffsets(a,t)}}});e.ui.plugin.add("draggable","snap",{start:function start(t,n,a){var i=a.options;a.snapElements=[];e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var t=e(this),i=t.offset();if(this!==a.element[0]){a.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})}})},drag:function drag(n,a,s){var c,p,u,g,h,m,f,_,v,y,w=s.options,o=w.snapTolerance,d=a.offset.left,x=d+s.helperProportions.width,k=a.offset.top,C=k+s.helperProportions.height;for(v=s.snapElements.length-1;0<=v;v--){h=s.snapElements[v].left-s.margins.left;m=h+s.snapElements[v].width;f=s.snapElements[v].top-s.margins.top;_=f+s.snapElements[v].height;if(x<h-o||d>m+o||C<f-o||k>_+o||!e.contains(s.snapElements[v].item.ownerDocument,s.snapElements[v].item)){if(s.snapElements[v].snapping){s.options.snap.release&&s.options.snap.release.call(s.element,n,e.extend(s._uiHash(),{snapItem:s.snapElements[v].item}))}s.snapElements[v].snapping=!1;continue}if("inner"!==w.snapMode){c=Math.abs(f-C)<=o;p=Math.abs(_-k)<=o;u=Math.abs(h-x)<=o;g=Math.abs(m-d)<=o;if(c){a.position.top=s._convertPositionTo("relative",{top:f-s.helperProportions.height,left:0}).top}if(p){a.position.top=s._convertPositionTo("relative",{top:_,left:0}).top}if(u){a.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left}if(g){a.position.left=s._convertPositionTo("relative",{top:0,left:m}).left}}y=c||p||u||g;if("outer"!==w.snapMode){c=Math.abs(f-k)<=o;p=Math.abs(_-C)<=o;u=Math.abs(h-d)<=o;g=Math.abs(m-x)<=o;if(c){a.position.top=s._convertPositionTo("relative",{top:f,left:0}).top}if(p){a.position.top=s._convertPositionTo("relative",{top:_-s.helperProportions.height,left:0}).top}if(u){a.position.left=s._convertPositionTo("relative",{top:0,left:h}).left}if(g){a.position.left=s._convertPositionTo("relative",{top:0,left:m-s.helperProportions.width}).left}}if(!s.snapElements[v].snapping&&(c||p||u||g||y)){s.options.snap.snap&&s.options.snap.snap.call(s.element,n,e.extend(s._uiHash(),{snapItem:s.snapElements[v].item}))}s.snapElements[v].snapping=c||p||u||g||y}}});e.ui.plugin.add("draggable","stack",{start:function start(t,i,n){var a,s=n.options,o=e.makeArray(e(s.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});if(!o.length){return}a=parseInt(e(o[0]).css("zIndex"),10)||0;e(o).each(function(t){e(this).css("zIndex",a+t)});this.css("zIndex",a+o.length)}});e.ui.plugin.add("draggable","zIndex",{start:function start(i,n,a){var s=e(n.helper),t=a.options;if(s.css("zIndex")){t._zIndex=s.css("zIndex")}s.css("zIndex",t.zIndex)},stop:function stop(t,i,n){var a=n.options;if(a._zIndex){e(i.helper).css("zIndex",a._zIndex)}}});e.ui.draggable;e.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function _create(){var t,i=this.options,n=i.accept;this.isover=!1;this.isout=!0;this.accept=e.isFunction(n)?n:function(e){return e.is(n)};this.proportions=function(){if(arguments.length){t=arguments[0]}else{return t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}}};this._addToManager(i.scope);i.addClasses&&this._addClass("ui-droppable")},_addToManager:function _addToManager(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[];e.ui.ddmanager.droppables[t].push(this)},_splice:function _splice(e){var t=0;for(;t<e.length;t++){if(e[t]===this){e.splice(t,1)}}},_destroy:function _destroy(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function _setOption(t,i){if("accept"===t){this.accept=e.isFunction(i)?i:function(e){return e.is(i)}}else if("scope"===t){var n=e.ui.ddmanager.droppables[this.options.scope];this._splice(n);this._addToManager(i)}this._super(t,i)},_activate:function _activate(t){var i=e.ui.ddmanager.current;this._addActiveClass();if(i){this._trigger("activate",t,this.ui(i))}},_deactivate:function _deactivate(t){var i=e.ui.ddmanager.current;this._removeActiveClass();if(i){this._trigger("deactivate",t,this.ui(i))}},_over:function _over(t){var i=e.ui.ddmanager.current;if(!i||(i.currentItem||i.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],i.currentItem||i.element)){this._addHoverClass();this._trigger("over",t,this.ui(i))}},_out:function _out(t){var i=e.ui.ddmanager.current;if(!i||(i.currentItem||i.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],i.currentItem||i.element)){this._removeHoverClass();this._trigger("out",t,this.ui(i))}},_drop:function _drop(t,i){var n=i||e.ui.ddmanager.current,o=!1;if(!n||(n.currentItem||n.element)[0]===this.element[0]){return!1}this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=e(this).droppable("instance");if(i.options.greedy&&!i.options.disabled&&i.options.scope===n.options.scope&&i.accept.call(i.element[0],n.currentItem||n.element)&&S(n,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,t)){o=!0;return!1}});if(o){return!1}if(this.accept.call(this.element[0],n.currentItem||n.element)){this._removeActiveClass();this._removeHoverClass();this._trigger("drop",t,this.ui(n));return this.element}return!1},ui:function ui(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function _addHoverClass(){this._addClass("ui-droppable-hover")},_removeHoverClass:function _removeHoverClass(){this._removeClass("ui-droppable-hover")},_addActiveClass:function _addActiveClass(){this._addClass("ui-droppable-active")},_removeActiveClass:function _removeActiveClass(){this._removeClass("ui-droppable-active")}});var S=e.ui.intersect=function(){function e(e,t,i){return e>=t&&e<t+i}return function(i,n,o,a){if(!n.offset){return!1}var s=(i.positionAbs||i.position.absolute).left+i.margins.left,d=(i.positionAbs||i.position.absolute).top+i.margins.top,c=s+i.helperProportions.width,p=d+i.helperProportions.height,u=n.offset.left,l=n.offset.top,t=u+n.proportions().width,r=l+n.proportions().height;switch(o){case"fit":return u<=s&&c<=t&&l<=d&&p<=r;case"intersect":return u<s+i.helperProportions.width/2&&c-i.helperProportions.width/2<t&&l<d+i.helperProportions.height/2&&p-i.helperProportions.height/2<r;case"pointer":return e(a.pageY,l,n.proportions().height)&&e(a.pageX,u,n.proportions().width);case"touch":return(d>=l&&d<=r||p>=l&&p<=r||d<l&&p>r)&&(s>=u&&s<=t||c>=u&&c<=t||s<u&&c>t);default:return!1;}}}();e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function prepareOffsets(n,t){var o,a,s=e.ui.ddmanager.droppables[n.options.scope]||[],r=t?t.type:null,l=(n.currentItem||n.element).find(":data(ui-droppable)").addBack();droppablesLoop:for(o=0;o<s.length;o++){if(s[o].options.disabled||n&&!s[o].accept.call(s[o].element[0],n.currentItem||n.element)){continue}for(a=0;a<l.length;a++){if(l[a]===s[o].element[0]){s[o].proportions().height=0;continue droppablesLoop}}s[o].visible="none"!==s[o].element.css("display");if(!s[o].visible){continue}if("mousedown"===r){s[o]._activate.call(s[o],t)}s[o].offset=s[o].element.offset();s[o].proportions({width:s[o].element[0].offsetWidth,height:s[o].element[0].offsetHeight})}},drop:function drop(t,i){var n=!1;e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&S(t,this,this.options.tolerance,i)){n=this._drop.call(this,i)||n}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)){this.isout=!0;this.isover=!1;this._deactivate.call(this,i)}});return n},dragStart:function dragStart(t,i){t.element.parentsUntil("body").on("scroll.droppable",function(){if(!t.options.refreshPositions){e.ui.ddmanager.prepareOffsets(t,i)}})},drag:function drag(t,i){if(t.options.refreshPositions){e.ui.ddmanager.prepareOffsets(t,i)}e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var n,o,a,s=S(t,this,this.options.tolerance,i),r=!s&&this.isover?"isout":s&&!this.isover?"isover":null;if(!r){return}if(this.options.greedy){o=this.options.scope;a=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===o});if(a.length){n=e(a[0]).droppable("instance");n.greedyChild="isover"===r}}if(n&&"isover"===r){n.isover=!1;n.isout=!0;n._out.call(n,i)}this[r]=!0;this["isout"===r?"isover":"isout"]=!1;this["isover"===r?"_over":"_out"].call(this,i);if(n&&"isout"===r){n.isout=!1;n.isover=!0;n._over.call(n,i)}})},dragStop:function dragStop(t,i){t.element.parentsUntil("body").off("scroll.droppable");if(!t.options.refreshPositions){e.ui.ddmanager.prepareOffsets(t,i)}}};if(!1!==e.uiBackCompat){e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function _addActiveClass(){this._super();if(this.options.activeClass){this.element.addClass(this.options.activeClass)}},_removeActiveClass:function _removeActiveClass(){this._super();if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}},_addHoverClass:function _addHoverClass(){this._super();if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}},_removeHoverClass:function _removeHoverClass(){this._super();if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}}})}e.ui.droppable;e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function _num(e){return parseFloat(e)||0},_isNumber:function _isNumber(e){return!isNaN(parseFloat(e))},_hasScroll:function _hasScroll(t,i){if("hidden"===e(t).css("overflow")){return!1}var n=i&&"left"===i?"scrollLeft":"scrollTop",o=!1;if(0<t[n]){return!0}t[n]=1;o=0<t[n];t[n]=0;return o},_create:function _create(){var t,i=this.options,n=this;this._addClass("ui-resizable");e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=!0;t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")};this.element.css(t);this.originalElement.css("margin",0);this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css(t);this._proportionallyResize()}this._setupHandles();if(i.autoHide){e(this.element).on("mouseenter",function(){if(i.disabled){return}n._removeClass("ui-resizable-autohide");n._handles.show()}).on("mouseleave",function(){if(i.disabled){return}if(!n.resizing){n._addClass("ui-resizable-autohide");n._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){i(this.element);t=this.element;this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t);t.remove()}this.originalElement.css("resize",this.originalResizeStyle);i(this.originalElement);return this},_setOption:function _setOption(e,t){this._super(e,t);switch(e){case"handles":this._removeHandles();this._setupHandles();break;default:break;}},_setupHandles:function _setupHandles(){var t=this.options,o,a,s,r,l,d=this;this.handles=t.handles||(!e(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});this._handles=e();if(this.handles.constructor===String){if("all"===this.handles){this.handles="n,e,s,w,se,sw,ne,nw"}s=this.handles.split(",");this.handles={};for(a=0;a<s.length;a++){o=e.trim(s[a]);r="ui-resizable-"+o;l=e("<div>");this._addClass(l,"ui-resizable-handle "+r);l.css({zIndex:t.zIndex});this.handles[o]=".ui-resizable-"+o;this.element.append(l)}}this._renderAxis=function(t){var n,o,a,s;t=t||this.element;for(n in this.handles){if(this.handles[n].constructor===String){this.handles[n]=this.element.children(this.handles[n]).first().show()}else if(this.handles[n].jquery||this.handles[n].nodeType){this.handles[n]=e(this.handles[n]);this._on(this.handles[n],{mousedown:d._mouseDown})}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){o=e(this.handles[n],this.element);s=/sw|ne|nw|se|n|s/.test(n)?o.outerHeight():o.outerWidth();a=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(a,s);this._proportionallyResize()}this._handles=this._handles.add(this.handles[n])}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.on("mouseover",function(){if(!d.resizing){if(this.className){l=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}d.axis=l&&l[1]?l[1]:"se"}});if(t.autoHide){this._handles.hide();this._addClass("ui-resizable-autohide")}},_removeHandles:function _removeHandles(){this._handles.remove()},_mouseCapture:function _mouseCapture(t){var n,o,a=!1;for(n in this.handles){o=e(this.handles[n])[0];if(o===t.target||e.contains(o,t.target)){a=!0}}return!this.options.disabled&&a},_mouseStart:function _mouseStart(t){var i,n,a,s=this.options,o=this.element;this.resizing=!0;this._renderProxy();i=this._num(this.helper.css("left"));n=this._num(this.helper.css("top"));if(s.containment){i+=e(s.containment).scrollLeft()||0;n+=e(s.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:i,top:n};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()};this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()};this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()};this.originalPosition={left:i,top:n};this.originalMousePosition={left:t.pageX,top:t.pageY};this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1;a=e(".ui-resizable-"+this.axis).css("cursor");e("body").css("cursor","auto"===a?this.axis+"-resize":a);this._addClass("ui-resizable-resizing");this._propagate("start",t);return!0},_mouseDrag:function _mouseDrag(t){var i,n,o=this.originalMousePosition,s=this.axis,a=t.pageX-o.left||0,r=t.pageY-o.top||0,l=this._change[s];this._updatePrevProperties();if(!l){return!1}i=l.apply(this,[t,a,r]);this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey){i=this._updateRatio(i,t)}i=this._respectSize(i,t);this._updateCache(i);this._propagate("resize",t);n=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}if(!e.isEmptyObject(n)){this._updatePrevProperties();this._trigger("resize",t,this.ui());this._applyChanges()}return!1},_mouseStop:function _mouseStop(t){this.resizing=!1;var i,n,a,r,l,d,c,p=this.options,o=this;if(this._helper){i=this._proportionallyResizeElements;n=i.length&&/textarea/i.test(i[0].nodeName);a=n&&this._hasScroll(i[0],"left")?0:o.sizeDiff.height;r=n?0:o.sizeDiff.width;l={width:o.helper.width()-r,height:o.helper.height()-a};d=parseFloat(o.element.css("left"))+(o.position.left-o.originalPosition.left)||null;c=parseFloat(o.element.css("top"))+(o.position.top-o.originalPosition.top)||null;if(!p.animate){this.element.css(e.extend(l,{top:c,left:d}))}o.helper.height(o.size.height);o.helper.width(o.size.width);if(this._helper&&!p.animate){this._proportionallyResize()}}e("body").css("cursor","auto");this._removeClass("ui-resizable-resizing");this._propagate("stop",t);if(this._helper){this.helper.remove()}return!1},_updatePrevProperties:function _updatePrevProperties(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function _applyChanges(){var e={};if(this.position.top!==this.prevPosition.top){e.top=this.position.top+"px"}if(this.position.left!==this.prevPosition.left){e.left=this.position.left+"px"}if(this.size.width!==this.prevSize.width){e.width=this.size.width+"px"}if(this.size.height!==this.prevSize.height){e.height=this.size.height+"px"}this.helper.css(e);return e},_updateVirtualBoundaries:function _updateVirtualBoundaries(e){var t,i,n,a,s,r=this.options;s={minWidth:this._isNumber(r.minWidth)?r.minWidth:0,maxWidth:this._isNumber(r.maxWidth)?r.maxWidth:1/0,minHeight:this._isNumber(r.minHeight)?r.minHeight:0,maxHeight:this._isNumber(r.maxHeight)?r.maxHeight:1/0};if(this._aspectRatio||e){t=s.minHeight*this.aspectRatio;n=s.minWidth/this.aspectRatio;i=s.maxHeight*this.aspectRatio;a=s.maxWidth/this.aspectRatio;if(t>s.minWidth){s.minWidth=t}if(n>s.minHeight){s.minHeight=n}if(i<s.maxWidth){s.maxWidth=i}if(a<s.maxHeight){s.maxHeight=a}}this._vBoundaries=s},_updateCache:function _updateCache(e){this.offset=this.helper.offset();if(this._isNumber(e.left)){this.position.left=e.left}if(this._isNumber(e.top)){this.position.top=e.top}if(this._isNumber(e.height)){this.size.height=e.height}if(this._isNumber(e.width)){this.size.width=e.width}},_updateRatio:function _updateRatio(e){var t=this.position,i=this.size,n=this.axis;if(this._isNumber(e.height)){e.width=e.height*this.aspectRatio}else if(this._isNumber(e.width)){e.height=e.width/this.aspectRatio}if("sw"===n){e.left=t.left+(i.width-e.width);e.top=null}if("nw"===n){e.top=t.top+(i.height-e.height);e.left=t.left+(i.width-e.width)}return e},_respectSize:function _respectSize(e){var t=this._vBoundaries,i=this.axis,n=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,s=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,r=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,d=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);if(a){e.width=t.minWidth}if(s){e.height=t.minHeight}if(n){e.width=t.maxWidth}if(o){e.height=t.maxHeight}if(a&&d){e.left=r-t.minWidth}if(n&&d){e.left=r-t.maxWidth}if(s&&c){e.top=l-t.minHeight}if(o&&c){e.top=l-t.maxHeight}if(!e.width&&!e.height&&!e.left&&e.top){e.top=null}else if(!e.width&&!e.height&&!e.top&&e.left){e.left=null}return e},_getPaddingPlusBorderDimensions:function _getPaddingPlusBorderDimensions(e){var t=0,n=[],o=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],a=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];for(;4>t;t++){n[t]=parseFloat(o[t])||0;n[t]+=parseFloat(a[t])||0}return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function _proportionallyResize(){if(!this._proportionallyResizeElements.length){return}var e,t=0,n=this.helper||this.element;for(;t<this._proportionallyResizeElements.length;t++){e=this._proportionallyResizeElements[t];if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(e)}e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})}},_renderProxy:function _renderProxy(){var t=this.element,i=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||e("<div style='overflow:hidden;'></div>");this._addClass(this.helper,this._helper);this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function e(e,t){return{width:this.originalSize.width+t}},w:function w(e,t){var i=this.originalSize,n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function n(e,t,i){var n=this.originalSize,o=this.originalPosition;return{top:o.top+i,height:n.height-i}},s:function s(e,t,i){return{height:this.originalSize.height+i}},se:function se(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function sw(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function ne(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function nw(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function _propagate(t,i){e.ui.plugin.call(this,t,[i,this.ui()]);"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function ui(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});e.ui.plugin.add("resizable","animate",{stop:function stop(t){var i=e(this).resizable("instance"),n=i.options,o=i._proportionallyResizeElements,a=o.length&&/textarea/i.test(o[0].nodeName),s=a&&i._hasScroll(o[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-s},d=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,c=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,c&&d?{top:c,left:d}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function step(){var n={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};if(o&&o.length){e(o[0]).css({width:n.width,height:n.height})}i._updateCache(n);i._propagate("resize",t)}})}});e.ui.plugin.add("resizable","containment",{start:function start(){var t,n,i,a,s,r,l,d=e(this).resizable("instance"),c=d.options,o=d.element,u=c.containment,g=u instanceof e?u.get(0):/parent/.test(u)?o.parent().get(0):u;if(!g){return}d.containerElement=e(g);if(/document/.test(u)||u===document){d.containerOffset={left:0,top:0};d.containerPosition={left:0,top:0};d.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}}else{t=e(g);n=[];e(["Top","Right","Left","Bottom"]).each(function(e,i){n[e]=d._num(t.css("padding"+i))});d.containerOffset=t.offset();d.containerPosition=t.position();d.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]};i=d.containerOffset;a=d.containerSize.height;s=d.containerSize.width;r=d._hasScroll(g,"left")?g.scrollWidth:s;l=d._hasScroll(g)?g.scrollHeight:a;d.parentData={element:g,left:i.left,top:i.top,width:r,height:l}}},resize:function resize(t){var i,n,a,s,r=e(this).resizable("instance"),l=r.options,o=r.containerOffset,d=r.position,c=r._aspectRatio||t.shiftKey,p={top:0,left:0},u=r.containerElement,g=!0;if(u[0]!==document&&/static/.test(u.css("position"))){p=o}if(d.left<(r._helper?o.left:0)){r.size.width=r.size.width+(r._helper?r.position.left-o.left:r.position.left-p.left);if(c){r.size.height=r.size.width/r.aspectRatio;g=!1}r.position.left=l.helper?o.left:0}if(d.top<(r._helper?o.top:0)){r.size.height=r.size.height+(r._helper?r.position.top-o.top:r.position.top);if(c){r.size.width=r.size.height*r.aspectRatio;g=!1}r.position.top=r._helper?o.top:0}a=r.containerElement.get(0)===r.element.parent().get(0);s=/relative|absolute/.test(r.containerElement.css("position"));if(a&&s){r.offset.left=r.parentData.left+r.position.left;r.offset.top=r.parentData.top+r.position.top}else{r.offset.left=r.element.offset().left;r.offset.top=r.element.offset().top}i=Math.abs(r.sizeDiff.width+(r._helper?r.offset.left-p.left:r.offset.left-o.left));n=Math.abs(r.sizeDiff.height+(r._helper?r.offset.top-p.top:r.offset.top-o.top));if(i+r.size.width>=r.parentData.width){r.size.width=r.parentData.width-i;if(c){r.size.height=r.size.width/r.aspectRatio;g=!1}}if(n+r.size.height>=r.parentData.height){r.size.height=r.parentData.height-n;if(c){r.size.width=r.size.height*r.aspectRatio;g=!1}}if(!g){r.position.left=r.prevPosition.left;r.position.top=r.prevPosition.top;r.size.width=r.prevSize.width;r.size.height=r.prevSize.height}},stop:function stop(){var t=e(this).resizable("instance"),i=t.options,n=t.containerOffset,o=t.containerPosition,a=t.containerElement,s=e(t.helper),r=s.offset(),l=s.outerWidth()-t.sizeDiff.width,d=s.outerHeight()-t.sizeDiff.height;if(t._helper&&!i.animate&&/relative/.test(a.css("position"))){e(this).css({left:r.left-o.left-n.left,width:l,height:d})}if(t._helper&&!i.animate&&/static/.test(a.css("position"))){e(this).css({left:r.left-o.left-n.left,width:l,height:d})}}});e.ui.plugin.add("resizable","alsoResize",{start:function start(){var t=e(this).resizable("instance"),i=t.options;e(i.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function resize(t,i){var n=e(this).resizable("instance"),a=n.options,o=n.originalSize,s=n.originalPosition,r={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-s.top||0,left:n.position.left-s.left||0};e(a.alsoResize).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),o={},a=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var i=(n[t]||0)+(r[t]||0);if(i&&0<=i){o[t]=i||null}});t.css(o)})},stop:function stop(){e(this).removeData("ui-resizable-alsoresize")}});e.ui.plugin.add("resizable","ghost",{start:function start(){var t=e(this).resizable("instance"),i=t.size;t.ghost=t.originalElement.clone();t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0});t._addClass(t.ghost,"ui-resizable-ghost");if(!1!==e.uiBackCompat&&"string"==typeof t.options.ghost){t.ghost.addClass(this.options.ghost)}t.ghost.appendTo(t.helper)},resize:function resize(){var t=e(this).resizable("instance");if(t.ghost){t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})}},stop:function stop(){var t=e(this).resizable("instance");if(t.ghost&&t.helper){t.helper.get(0).removeChild(t.ghost.get(0))}}});e.ui.plugin.add("resizable","grid",{resize:function resize(){var t,i=e(this).resizable("instance"),n=i.options,o=i.size,s=i.originalSize,r=i.originalPosition,l=i.axis,a="number"==typeof n.grid?[n.grid,n.grid]:n.grid,d=a[0]||1,c=a[1]||1,p=Math.round((o.width-s.width)/d)*d,u=Math.round((o.height-s.height)/c)*c,g=s.width+p,h=s.height+u,m=n.maxWidth&&n.maxWidth<g,f=n.maxHeight&&n.maxHeight<h,_=n.minWidth&&n.minWidth>g,b=n.minHeight&&n.minHeight>h;n.grid=a;if(_){g+=d}if(b){h+=c}if(m){g-=d}if(f){h-=c}if(/^(se|s|e)$/.test(l)){i.size.width=g;i.size.height=h}else if(/^(ne)$/.test(l)){i.size.width=g;i.size.height=h;i.position.top=r.top-u}else if(/^(sw)$/.test(l)){i.size.width=g;i.size.height=h;i.position.left=r.left-p}else{if(0>=h-c||0>=g-d){t=i._getPaddingPlusBorderDimensions(this)}if(0<h-c){i.size.height=h;i.position.top=r.top-u}else{h=c-t.height;i.size.height=h;i.position.top=r.top+s.height-h}if(0<g-d){i.size.width=g;i.position.left=r.left-p}else{g=d-t.width;i.size.width=g;i.position.left=r.left+s.width-g}}}});var H=e.ui.resizable,M=e.widget("ui.selectable",e.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function _create(){var t=this;this._addClass("ui-selectable");this.dragged=!1;this.refresh=function(){t.elementPos=e(t.element[0]).offset();t.selectees=e(t.options.filter,t.element[0]);t._addClass(t.selectees,"ui-selectee");t.selectees.each(function(){var i=e(this),n=i.offset(),o={left:n.left-t.elementPos.left,top:n.top-t.elementPos.top};e.data(this,"selectable-item",{element:this,$element:i,left:o.left,top:o.top,right:o.left+i.outerWidth(),bottom:o.top+i.outerHeight(),startselected:!1,selected:i.hasClass("ui-selected"),selecting:i.hasClass("ui-selecting"),unselecting:i.hasClass("ui-unselecting")})})};this.refresh();this._mouseInit();this.helper=e("<div>");this._addClass(this.helper,"ui-selectable-helper")},_destroy:function _destroy(){this.selectees.removeData("selectable-item");this._mouseDestroy()},_mouseStart:function _mouseStart(t){var i=this,n=this.options;this.opos=[t.pageX,t.pageY];this.elementPos=e(this.element[0]).offset();if(this.options.disabled){return}this.selectees=e(n.filter,this.element[0]);this._trigger("start",t);e(n.appendTo).append(this.helper);this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0});if(n.autoRefresh){this.refresh()}this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");n.startselected=!0;if(!t.metaKey&&!t.ctrlKey){i._removeClass(n.$element,"ui-selected");n.selected=!1;i._addClass(n.$element,"ui-unselecting");n.unselecting=!0;i._trigger("unselecting",t,{unselecting:n.element})}});e(t.target).parents().addBack().each(function(){var n,o=e.data(this,"selectable-item");if(o){n=!t.metaKey&&!t.ctrlKey||!o.$element.hasClass("ui-selected");i._removeClass(o.$element,n?"ui-unselecting":"ui-selected")._addClass(o.$element,n?"ui-selecting":"ui-unselecting");o.unselecting=!n;o.selecting=n;o.selected=n;if(n){i._trigger("selecting",t,{selecting:o.element})}else{i._trigger("unselecting",t,{unselecting:o.element})}return!1}})},_mouseDrag:function _mouseDrag(t){this.dragged=!0;if(this.options.disabled){return}var i,n=this,o=this.options,a=this.opos[0],s=this.opos[1],r=t.pageX,l=t.pageY;if(a>r){i=r;r=a;a=i}if(s>l){i=l;l=s;s=i}this.helper.css({left:a,top:s,width:r-a,height:l-s});this.selectees.each(function(){var i=e.data(this,"selectable-item"),d=!1,c={};if(!i||i.element===n.element[0]){return}c.left=i.left+n.elementPos.left;c.right=i.right+n.elementPos.left;c.top=i.top+n.elementPos.top;c.bottom=i.bottom+n.elementPos.top;if("touch"===o.tolerance){d=!(c.left>r||c.right<a||c.top>l||c.bottom<s)}else if("fit"===o.tolerance){d=c.left>a&&c.right<r&&c.top>s&&c.bottom<l}if(d){if(i.selected){n._removeClass(i.$element,"ui-selected");i.selected=!1}if(i.unselecting){n._removeClass(i.$element,"ui-unselecting");i.unselecting=!1}if(!i.selecting){n._addClass(i.$element,"ui-selecting");i.selecting=!0;n._trigger("selecting",t,{selecting:i.element})}}else{if(i.selecting){if((t.metaKey||t.ctrlKey)&&i.startselected){n._removeClass(i.$element,"ui-selecting");i.selecting=!1;n._addClass(i.$element,"ui-selected");i.selected=!0}else{n._removeClass(i.$element,"ui-selecting");i.selecting=!1;if(i.startselected){n._addClass(i.$element,"ui-unselecting");i.unselecting=!0}n._trigger("unselecting",t,{unselecting:i.element})}}if(i.selected){if(!t.metaKey&&!t.ctrlKey&&!i.startselected){n._removeClass(i.$element,"ui-selected");i.selected=!1;n._addClass(i.$element,"ui-unselecting");i.unselecting=!0;n._trigger("unselecting",t,{unselecting:i.element})}}}});return!1},_mouseStop:function _mouseStop(t){var i=this;this.dragged=!1;e(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");i._removeClass(n.$element,"ui-unselecting");n.unselecting=!1;n.startselected=!1;i._trigger("unselected",t,{unselected:n.element})});e(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");i._removeClass(n.$element,"ui-selecting")._addClass(n.$element,"ui-selected");n.selecting=!1;n.selected=!0;n.startselected=!0;i._trigger("selected",t,{selected:n.element})});this._trigger("stop",t);this.helper.remove();return!1}}),z=e.widget("ui.sortable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function _isOverAxis(e,t,i){return e>=t&&e<t+i},_isFloating:function _isFloating(e){return /left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function _create(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=!0},_setOption:function _setOption(e,t){this._super(e,t);if("handle"===e){this._setHandleClassName()}},_setHandleClassName:function _setHandleClassName(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");e.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function _destroy(){this._mouseDestroy();for(var e=this.items.length-1;0<=e;e--){this.items[e].item.removeData(this.widgetName+"-item")}return this},_mouseCapture:function _mouseCapture(t,i){var n=null,o=!1,a=this;if(this.reverting){return!1}if(this.options.disabled||"static"===this.options.type){return!1}this._refreshItems(t);e(t.target).parents().each(function(){if(e.data(this,a.widgetName+"-item")===a){n=e(this);return!1}});if(e.data(t.target,a.widgetName+"-item")===a){n=e(t.target)}if(!n){return!1}if(this.options.handle&&!i){e(this.options.handle,n).find("*").addBack().each(function(){if(this===t.target){o=!0}});if(!o){return!1}}this.currentItem=n;this._removeCurrentsFromItems();return!0},_mouseStart:function _mouseStart(t,n,a){var s,r,l=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(t);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(t);this.originalPageX=t.pageX;this.originalPageY=t.pageY;l.cursorAt&&this._adjustOffsetFromHelper(l.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(l.containment){this._setContainment()}if(l.cursor&&"auto"!==l.cursor){r=this.document.find("body");this.storedCursor=r.css("cursor");r.css("cursor",l.cursor);this.storedStylesheet=e("<style>*{ cursor: "+l.cursor+" !important; }</style>").appendTo(r)}if(l.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",l.opacity)}if(l.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",l.zIndex)}if(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",t,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!a){for(s=this.containers.length-1;0<=s;s--){this.containers[s]._trigger("activate",t,this._uiHash(this))}}if(e.ui.ddmanager){e.ui.ddmanager.current=this}if(e.ui.ddmanager&&!l.dropBehaviour){e.ui.ddmanager.prepareOffsets(this,t)}this.dragging=!0;this._addClass(this.helper,"ui-sortable-helper");this._mouseDrag(t);return!0},_mouseDrag:function _mouseDrag(t){var n,a,s,r,l=this.options,o=!1;this.position=this._generatePosition(t);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){if(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<l.scrollSensitivity){this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop+l.scrollSpeed}else if(t.pageY-this.overflowOffset.top<l.scrollSensitivity){this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop-l.scrollSpeed}if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<l.scrollSensitivity){this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft+l.scrollSpeed}else if(t.pageX-this.overflowOffset.left<l.scrollSensitivity){this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft-l.scrollSpeed}}else{if(t.pageY-this.document.scrollTop()<l.scrollSensitivity){o=this.document.scrollTop(this.document.scrollTop()-l.scrollSpeed)}else if(this.window.height()-(t.pageY-this.document.scrollTop())<l.scrollSensitivity){o=this.document.scrollTop(this.document.scrollTop()+l.scrollSpeed)}if(t.pageX-this.document.scrollLeft()<l.scrollSensitivity){o=this.document.scrollLeft(this.document.scrollLeft()-l.scrollSpeed)}else if(this.window.width()-(t.pageX-this.document.scrollLeft())<l.scrollSensitivity){o=this.document.scrollLeft(this.document.scrollLeft()+l.scrollSpeed)}}if(!1!==o&&e.ui.ddmanager&&!l.dropBehaviour){e.ui.ddmanager.prepareOffsets(this,t)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||"y"!==this.options.axis){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||"x"!==this.options.axis){this.helper[0].style.top=this.position.top+"px"}for(n=this.items.length-1;0<=n;n--){a=this.items[n];s=a.item[0];r=this._intersectsWithPointer(a);if(!r){continue}if(a.instance!==this.currentContainer){continue}if(s!==this.currentItem[0]&&this.placeholder[1===r?"next":"prev"]()[0]!==s&&!e.contains(this.placeholder[0],s)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],s):!0)){this.direction=1===r?"down":"up";if("pointer"===this.options.tolerance||this._intersectsWithSides(a)){this._rearrange(t,a)}else{break}this._trigger("change",t,this._uiHash());break}}this._contactContainers(t);if(e.ui.ddmanager){e.ui.ddmanager.drag(this,t)}this._trigger("sort",t,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function _mouseStop(t,i){if(!t){return}if(e.ui.ddmanager&&!this.options.dropBehaviour){e.ui.ddmanager.drop(this,t)}if(this.options.revert){var n=this,o=this.placeholder.offset(),a=this.options.axis,s={};if(!a||"x"===a){s.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)}if(!a||"y"===a){s.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)}this.reverting=!0;e(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else{this._clear(t,i)}return!1},cancel:function cancel(){if(this.dragging){this._mouseUp(new e.Event("mouseup",{target:null}));if("original"===this.options.helper){this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else{this.currentItem.show()}for(var t=this.containers.length-1;0<=t;t--){this.containers[t]._trigger("deactivate",null,this._uiHash(this));if(this.containers[t].containerCache.over){this.containers[t]._trigger("out",null,this._uiHash(this));this.containers[t].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if("original"!==this.options.helper&&this.helper&&this.helper[0].parentNode){this.helper.remove()}e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null});if(this.domPosition.prev){e(this.domPosition.prev).after(this.currentItem)}else{e(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function serialize(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];t=t||{};e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);if(i){n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}});if(!n.length&&t.key){n.push(t.key+"=")}return n.join("&")},toArray:function toArray(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];t=t||{};i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")});return n},_intersectsWith:function _intersectsWith(e){var i=this.positionAbs.left,n=i+this.helperProportions.width,o=this.positionAbs.top,a=o+this.helperProportions.height,s=e.left,l=s+e.width,r=e.top,t=r+e.height,d=this.offset.click.top,c=this.offset.click.left,p="x"===this.options.axis||o+d>r&&o+d<t,u="y"===this.options.axis||i+c>s&&i+c<l;if("pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]){return p&&u}else{return s<i+this.helperProportions.width/2&&n-this.helperProportions.width/2<l&&r<o+this.helperProportions.height/2&&a-this.helperProportions.height/2<t}},_intersectsWithPointer:function _intersectsWithPointer(e){var t,i,n="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),o="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width);if(!(n&&o)){return!1}t=this._getDragVerticalDirection();i=this._getDragHorizontalDirection();return this.floating?"right"===i||"down"===t?2:1:t&&("down"===t?2:1)},_intersectsWithSides:function _intersectsWithSides(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();if(this.floating&&o){return"right"===o&&i||"left"===o&&!i}else{return n&&("down"===n&&t||"up"===n&&!t)}},_getDragVerticalDirection:function _getDragVerticalDirection(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(0<e?"down":"up")},_getDragHorizontalDirection:function _getDragHorizontalDirection(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(0<e?"right":"left")},refresh:function refresh(e){this._refreshItems(e);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function _connectWith(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function _getItemsAsjQuery(t){var o,a,s,r,l=[],d=[],c=this._connectWith();if(c&&t){for(o=c.length-1;0<=o;o--){s=e(c[o],this.document[0]);for(a=s.length-1;0<=a;a--){r=e.data(s[a],this.widgetFullName);if(r&&r!==this&&!r.options.disabled){d.push([e.isFunction(r.options.items)?r.options.items.call(r.element):e(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r])}}}}d.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function n(){l.push(this)}for(o=d.length-1;0<=o;o--){d[o][0].each(n)}return e(l)},_removeCurrentsFromItems:function _removeCurrentsFromItems(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++){if(t[i]===e.item[0]){return!1}}return!0})},_refreshItems:function _refreshItems(t){this.items=[];this.containers=[this];var n,o,a,s,r,l,d,c,p=this.items,u=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],g=this._connectWith();if(g&&this.ready){for(n=g.length-1;0<=n;n--){a=e(g[n],this.document[0]);for(o=a.length-1;0<=o;o--){s=e.data(a[o],this.widgetFullName);if(s&&s!==this&&!s.options.disabled){u.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]);this.containers.push(s)}}}}for(n=u.length-1;0<=n;n--){r=u[n][1];l=u[n][0];for(o=0,c=l.length;o<c;o++){d=e(l[o]);d.data(this.widgetName+"-item",r);p.push({item:d,instance:r,width:0,height:0,left:0,top:0})}}},refreshPositions:function refreshPositions(n){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1;if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}var o,a,s,r;for(o=this.items.length-1;0<=o;o--){a=this.items[o];if(a.instance!==this.currentContainer&&this.currentContainer&&a.item[0]!==this.currentItem[0]){continue}s=this.options.toleranceElement?e(this.options.toleranceElement,a.item):a.item;if(!n){a.width=s.outerWidth();a.height=s.outerHeight()}r=s.offset();a.left=r.left;a.top=r.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(o=this.containers.length-1;0<=o;o--){r=this.containers[o].element.offset();this.containers[o].containerCache.left=r.left;this.containers[o].containerCache.top=r.top;this.containers[o].containerCache.width=this.containers[o].element.outerWidth();this.containers[o].containerCache.height=this.containers[o].element.outerHeight()}}return this},_createPlaceholder:function _createPlaceholder(t){t=t||this;var i,n=t.options;if(!n.placeholder||n.placeholder.constructor===String){i=n.placeholder;n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),o=e("<"+n+">",t.document[0]);t._addClass(o,"ui-sortable-placeholder",i||t.currentItem[0].className)._removeClass(o,"ui-sortable-helper");if("tbody"===n){t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(o))}else if("tr"===n){t._createTrPlaceholder(t.currentItem,o)}else if("img"===n){o.attr("src",t.currentItem.attr("src"))}if(!i){o.css("visibility","hidden")}return o},update:function update(e,o){if(i&&!n.forcePlaceholderSize){return}if(!o.height()){o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10))}if(!o.width()){o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}}}}t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem));t.currentItem.after(t.placeholder);n.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function _createTrPlaceholder(t,i){var n=this;t.children().each(function(){e("<td>&#160;</td>",n.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function _contactContainers(t){var n,o,a,s,r,l,d,c,p,u,g=null,h=null;for(n=this.containers.length-1;0<=n;n--){if(e.contains(this.currentItem[0],this.containers[n].element[0])){continue}if(this._intersectsWith(this.containers[n].containerCache)){if(g&&e.contains(this.containers[n].element[0],g.element[0])){continue}g=this.containers[n];h=n}else{if(this.containers[n].containerCache.over){this.containers[n]._trigger("out",t,this._uiHash(this));this.containers[n].containerCache.over=0}}}if(!g){return}if(1===this.containers.length){if(!this.containers[h].containerCache.over){this.containers[h]._trigger("over",t,this._uiHash(this));this.containers[h].containerCache.over=1}}else{a=1e4;s=null;p=g.floating||this._isFloating(this.currentItem);r=p?"left":"top";l=p?"width":"height";u=p?"pageX":"pageY";for(o=this.items.length-1;0<=o;o--){if(!e.contains(this.containers[h].element[0],this.items[o].item[0])){continue}if(this.items[o].item[0]===this.currentItem[0]){continue}d=this.items[o].item.offset()[r];c=!1;if(t[u]-d>this.items[o][l]/2){c=!0}if(Math.abs(t[u]-d)<a){a=Math.abs(t[u]-d);s=this.items[o];this.direction=c?"up":"down"}}if(!s&&!this.options.dropOnEmpty){return}if(this.currentContainer===this.containers[h]){if(!this.currentContainer.containerCache.over){this.containers[h]._trigger("over",t,this._uiHash());this.currentContainer.containerCache.over=1}return}s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[h].element,!0);this._trigger("change",t,this._uiHash());this.containers[h]._trigger("change",t,this._uiHash(this));this.currentContainer=this.containers[h];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[h]._trigger("over",t,this._uiHash(this));this.containers[h].containerCache.over=1}},_createHelper:function _createHelper(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;if(!n.parents("body").length){e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0])}if(n[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(!n[0].style.width||i.forceHelperSize){n.width(this.currentItem.width())}if(!n[0].style.height||i.forceHelperSize){n.height(this.currentItem.height())}return n},_adjustOffsetFromHelper:function _adjustOffsetFromHelper(t){if("string"==typeof t){t=t.split(" ")}if(e.isArray(t)){t={left:+t[0],top:+t[1]||0}}if("left"in t){this.offset.click.left=t.left+this.margins.left}if("right"in t){this.offset.click.left=this.helperProportions.width-t.right+this.margins.left}if("top"in t){this.offset.click.top=t.top+this.margins.top}if("bottom"in t){this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top}},_getParentOffset:function _getParentOffset(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();if("absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])){t.left+=this.scrollParent.scrollLeft();t.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie){t={top:0,left:0}}return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function _getRelativeOffset(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function _cacheMargins(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function _cacheHelperProportions(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function _setContainment(){var t,i,n,a=this.options;if("parent"===a.containment){a.containment=this.helper[0].parentNode}if("document"===a.containment||"window"===a.containment){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===a.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===a.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(a.containment)){t=e(a.containment)[0];i=e(a.containment).offset();n="hidden"!==e(t).css("overflow");this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function _convertPositionTo(t,i){if(!i){i=this.position}var n="absolute"===t?1:-1,o="absolute"===this.cssPosition&&!(this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,a=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:o.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:o.scrollLeft())*n}},_generatePosition:function _generatePosition(t){var i,n,a=this.options,o=t.pageX,s=t.pageY,r="absolute"===this.cssPosition&&!(this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(r[0].tagName);if("relative"===this.cssPosition&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}if(this.originalPosition){if(this.containment){if(t.pageX-this.offset.click.left<this.containment[0]){o=this.containment[0]+this.offset.click.left}if(t.pageY-this.offset.click.top<this.containment[1]){s=this.containment[1]+this.offset.click.top}if(t.pageX-this.offset.click.left>this.containment[2]){o=this.containment[2]+this.offset.click.left}if(t.pageY-this.offset.click.top>this.containment[3]){s=this.containment[3]+this.offset.click.top}}if(a.grid){i=this.originalPageY+Math.round((s-this.originalPageY)/a.grid[1])*a.grid[1];s=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-a.grid[1]:i+a.grid[1]:i;n=this.originalPageX+Math.round((o-this.originalPageX)/a.grid[0])*a.grid[0];o=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-a.grid[0]:n+a.grid[0]:n}}return{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:r.scrollLeft())}},_rearrange:function _rearrange(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){if(o===this.counter){this.refreshPositions(!n)}})},_clear:function _clear(e,t){this.reverting=!1;var o,a=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(o in this._storedCSS){if("auto"===this._storedCSS[o]||"static"===this._storedCSS[o]){this._storedCSS[o]=""}}this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!t){a.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!t){a.push(function(e){this._trigger("update",e,this._uiHash())})}if(this!==this.currentContainer){if(!t){a.push(function(e){this._trigger("remove",e,this._uiHash())});a.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer));a.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))}}function n(e,t,i){return function(n){i._trigger(e,n,t._uiHash(t))}}for(o=this.containers.length-1;0<=o;o--){if(!t){a.push(n("deactivate",this,this.containers[o]))}if(this.containers[o].containerCache.over){a.push(n("out",this,this.containers[o]));this.containers[o].containerCache.over=0}}if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove()}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex)}this.dragging=!1;if(!t){this._trigger("beforeStop",e,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){if(this.helper[0]!==this.currentItem[0]){this.helper.remove()}this.helper=null}if(!t){for(o=0;o<a.length;o++){a[o].call(this,e)}this._trigger("stop",e,this._uiHash())}this.fromOutside=!1;return!this.cancelHelperRemoval},_trigger:function _trigger(){if(!1===e.Widget.prototype._trigger.apply(this,arguments)){this.cancel()}},_uiHash:function _uiHash(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),O=e.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function _create(){var t=this.options;this.prevShow=this.prevHide=e();this._addClass("ui-accordion","ui-widget ui-helper-reset");this.element.attr("role","tablist");if(!t.collapsible&&(!1===t.active||null==t.active)){t.active=0}this._processPanels();if(0>t.active){t.active+=this.headers.length}this._refresh()},_getCreateEventData:function _getCreateEventData(){return{header:this.active,panel:!this.active.length?e():this.active.next()}},_createIcons:function _createIcons(){var t,i,n=this.options.icons;if(n){t=e("<span>");this._addClass(t,"ui-accordion-header-icon","ui-icon "+n.header);t.prependTo(this.headers);i=this.active.children(".ui-accordion-header-icon");this._removeClass(i,n.header)._addClass(i,null,n.activeHeader)._addClass(this.headers,"ui-accordion-icons")}},_destroyIcons:function _destroyIcons(){this._removeClass(this.headers,"ui-accordion-icons");this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function _destroy(){var e;this.element.removeAttr("role");this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId();this._destroyIcons();e=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId();if("content"!==this.options.heightStyle){e.css("height","")}},_setOption:function _setOption(e,t){if("active"===e){this._activate(t);return}if("event"===e){if(this.options.event){this._off(this.headers,this.options.event)}this._setupEvents(t)}this._super(e,t);if("collapsible"===e&&!t&&!1===this.options.active){this._activate(0)}if("icons"===e){this._destroyIcons();if(t){this._createIcons()}}},_setOptionDisabled:function _setOptionDisabled(e){this._super(e);this.element.attr("aria-disabled",e);this._toggleClass(null,"ui-state-disabled",!!e);this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!e)},_keydown:function _keydown(t){if(t.altKey||t.ctrlKey){return}var i=e.ui.keyCode,n=this.headers.length,o=this.headers.index(t.target),a=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(o+1)%n];break;case i.LEFT:case i.UP:a=this.headers[(o-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:a=this.headers[0];break;case i.END:a=this.headers[n-1];break;}if(a){e(t.target).attr("tabIndex",-1);e(a).attr("tabIndex",0);e(a).trigger("focus");t.preventDefault()}},_panelKeyDown:function _panelKeyDown(t){if(t.keyCode===e.ui.keyCode.UP&&t.ctrlKey){e(t.currentTarget).prev().trigger("focus")}},refresh:function refresh(){var t=this.options;this._processPanels();if(!1===t.active&&!0===t.collapsible||!this.headers.length){t.active=!1;this.active=e()}else if(!1===t.active){this._activate(0)}else if(this.active.length&&!e.contains(this.element[0],this.active[0])){if(this.headers.length===this.headers.find(".ui-state-disabled").length){t.active=!1;this.active=e()}else{this._activate(Math.max(0,t.active-1))}}else{t.active=this.headers.index(this.active)}this._destroyIcons();this._refresh()},_processPanels:function _processPanels(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header);this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default");this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide();this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content");if(t){this._off(e.not(this.headers));this._off(t.not(this.panels))}},_refresh:function _refresh(){var t,i=this.options,n=i.heightStyle,o=this.element.parent();this.active=this._findActive(i.active);this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed");this._addClass(this.active.next(),"ui-accordion-content-active");this.active.next().show();this.headers.attr("role","tab").each(function(){var t=e(this),i=t.uniqueId().attr("id"),n=t.next(),o=n.uniqueId().attr("id");t.attr("aria-controls",o);n.attr("aria-labelledby",i)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();if(!this.active.length){this.headers.eq(0).attr("tabIndex",0)}else{this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"})}this._createIcons();this._setupEvents(i.event);if("fill"===n){t=o.height();this.element.siblings(":visible").each(function(){var i=e(this),n=i.css("position");if("absolute"===n||"fixed"===n){return}t-=i.outerHeight(!0)});this.headers.each(function(){t-=e(this).outerHeight(!0)});this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")}else if("auto"===n){t=0;this.headers.next().each(function(){var i=e(this).is(":visible");if(!i){e(this).show()}t=Math.max(t,e(this).css("height","").height());if(!i){e(this).hide()}}).height(t)}},_activate:function _activate(t){var i=this._findActive(t)[0];if(i===this.active[0]){return}i=i||this.active[0];this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop})},_findActive:function _findActive(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function _setupEvents(t){var i={keydown:"_keydown"};if(t){e.each(t.split(" "),function(e,t){i[t]="_eventHandler"})}this._off(this.headers.add(this.headers.next()));this._on(this.headers,i);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function _eventHandler(t){var i,n,o=this.options,a=this.active,s=e(t.currentTarget),r=s[0]===a[0],l=r&&o.collapsible,d=l?e():s.next(),c=a.next(),p={oldHeader:a,oldPanel:c,newHeader:l?e():s,newPanel:d};t.preventDefault();if(r&&!o.collapsible||!1===this._trigger("beforeActivate",t,p)){return}o.active=l?!1:this.headers.index(s);this.active=r?e():s;this._toggle(p);this._removeClass(a,"ui-accordion-header-active","ui-state-active");if(o.icons){i=a.children(".ui-accordion-header-icon");this._removeClass(i,null,o.icons.activeHeader)._addClass(i,null,o.icons.header)}if(!r){this._removeClass(s,"ui-accordion-header-collapsed")._addClass(s,"ui-accordion-header-active","ui-state-active");if(o.icons){n=s.children(".ui-accordion-header-icon");this._removeClass(n,null,o.icons.header)._addClass(n,null,o.icons.activeHeader)}this._addClass(s.next(),"ui-accordion-content-active")}},_toggle:function _toggle(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=i;this.prevHide=n;if(this.options.animate){this._animate(i,n,t)}else{n.hide();i.show();this._toggleComplete(t)}n.attr({"aria-hidden":"true"});n.prev().attr({"aria-selected":"false","aria-expanded":"false"});if(i.length&&n.length){n.prev().attr({tabIndex:-1,"aria-expanded":"false"})}else if(i.length){this.headers.filter(function(){return 0===parseInt(e(this).attr("tabIndex"),10)}).attr("tabIndex",-1)}i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function _animate(e,t,i){var n,o,a,s=this,r=0,l=e.css("box-sizing"),d=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},p=d&&c.down||c,u=function(){s._toggleComplete(i)};if("number"==typeof p){a=p}if("string"==typeof p){o=p}o=o||p.easing||c.easing;a=a||p.duration||c.duration;if(!t.length){return e.animate(this.showProps,a,o,u)}if(!e.length){return t.animate(this.hideProps,a,o,u)}n=e.show().outerHeight();t.animate(this.hideProps,{duration:a,easing:o,step:function step(e,t){t.now=Math.round(e)}});e.hide().animate(this.showProps,{duration:a,easing:o,complete:u,step:function step(e,i){i.now=Math.round(e);if("height"!==i.prop){if("content-box"===l){r+=i.now}}else if("content"!==s.options.heightStyle){i.now=Math.round(n-t.outerHeight()-r);r=0}}})},_toggleComplete:function _toggleComplete(e){var t=e.oldPanel,i=t.prev();this._removeClass(t,"ui-accordion-content-active");this._removeClass(i,"ui-accordion-header-active")._addClass(i,"ui-accordion-header-collapsed");if(t.length){t.parent()[0].className=t.parent()[0].className}this._trigger("activate",null,e)}}),A=e.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function _create(){this.activeMenu=this.element;this.mouseHandled=!1;this.element.uniqueId().attr({role:this.options.role,tabIndex:0});this._addClass("ui-menu","ui-widget ui-widget-content");this._on({"mousedown .ui-menu-item":function mousedownUiMenuItem(e){e.preventDefault()},"click .ui-menu-item":function clickUiMenuItem(t){var i=e(t.target),n=e(e.ui.safeActiveElement(this.document[0]));if(!this.mouseHandled&&i.not(".ui-state-disabled").length){this.select(t);if(!t.isPropagationStopped()){this.mouseHandled=!0}if(i.has(".ui-menu").length){this.expand(t)}else if(!this.element.is(":focus")&&n.closest(".ui-menu").length){this.element.trigger("focus",[!0]);if(this.active&&1===this.active.parents(".ui-menu").length){clearTimeout(this.timer)}}}},"mouseenter .ui-menu-item":function mouseenterUiMenuItem(t){if(this.previousFilter){return}var i=e(t.target).closest(".ui-menu-item"),n=e(t.currentTarget);if(i[0]!==n[0]){return}this._removeClass(n.siblings().children(".ui-state-active"),null,"ui-state-active");this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function focus(e,t){var i=this.active||this.element.find(this.options.items).eq(0);if(!t){this.focus(e,i)}},blur:function blur(t){this._delay(function(){var i=!e.contains(this.element[0],e.ui.safeActiveElement(this.document[0]));if(i){this.collapseAll(t)}})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function click(e){if(this._closeOnDocumentClick(e)){this.collapseAll(e)}this.mouseHandled=!1}})},_destroy:function _destroy(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),i=t.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show();i.children().each(function(){var t=e(this);if(t.data("ui-menu-submenu-caret")){t.remove()}})},_keydown:function _keydown(t){var i,n,o,a,s=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled")){this.expand(t)}break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:s=!1;n=this.previousFilter||"";a=!1;o=96<=t.keyCode&&105>=t.keyCode?(t.keyCode-96).toString():String.fromCharCode(t.keyCode);clearTimeout(this.filterTimer);if(o===n){a=!0}else{o=n+o}i=this._filterMenuItems(o);i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i;if(!i.length){o=String.fromCharCode(t.keyCode);i=this._filterMenuItems(o)}if(i.length){this.focus(t,i);this.previousFilter=o;this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)}else{delete this.previousFilter}}if(s){t.preventDefault()}},_activate:function _activate(e){if(this.active&&!this.active.is(".ui-state-disabled")){if(this.active.children("[aria-haspopup='true']").length){this.expand(e)}else{this.select(e)}}},refresh:function refresh(){var t,i,n,o,a,s=this,r=this.options.icons.submenu,l=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length);n=l.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.prev(),n=e("<span>").data("ui-menu-submenu-caret",!0);s._addClass(n,"ui-menu-icon","ui-icon "+r);i.attr("aria-haspopup","true").prepend(n);t.attr("aria-labelledby",i.attr("id"))});this._addClass(n,"ui-menu","ui-widget ui-widget-content ui-front");t=l.add(this.element);i=t.find(this.options.items);i.not(".ui-menu-item").each(function(){var t=e(this);if(s._isDivider(t)){s._addClass(t,"ui-menu-divider","ui-widget-content")}});o=i.not(".ui-menu-item, .ui-menu-divider");a=o.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()});this._addClass(o,"ui-menu-item")._addClass(a,"ui-menu-item-wrapper");i.filter(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!e.contains(this.element[0],this.active[0])){this.blur()}},_itemRole:function _itemRole(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function _setOption(e,t){if("icons"===e){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function _setOptionDisabled(e){this._super(e);this.element.attr("aria-disabled",e+"");this._toggleClass(null,"ui-state-disabled",!!e)},focus:function focus(e,t){var i,n,o;this.blur(e,e&&"focus"===e.type);this._scrollIntoView(t);this.active=t.first();n=this.active.children(".ui-menu-item-wrapper");this._addClass(n,null,"ui-state-active");if(this.options.role){this.element.attr("aria-activedescendant",n.attr("id"))}o=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper");this._addClass(o,null,"ui-state-active");if(e&&"keydown"===e.type){this._close()}else{this.timer=this._delay(function(){this._close()},this.delay)}i=t.children(".ui-menu");if(i.length&&e&&/^mouse/.test(e.type)){this._startOpening(i)}this.activeMenu=t.parent();this._trigger("focus",e,{item:t})},_scrollIntoView:function _scrollIntoView(t){var i,n,o,a,s,r;if(this._hasScroll()){i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0;n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0;o=t.offset().top-this.activeMenu.offset().top-i-n;a=this.activeMenu.scrollTop();s=this.activeMenu.height();r=t.outerHeight();if(0>o){this.activeMenu.scrollTop(a+o)}else if(o+r>s){this.activeMenu.scrollTop(a+o-s+r)}}},blur:function blur(e,t){if(!t){clearTimeout(this.timer)}if(!this.active){return}this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active");this._trigger("blur",e,{item:this.active});this.active=null},_startOpening:function _startOpening(e){clearTimeout(this.timer);if("true"!==e.attr("aria-hidden")){return}this.timer=this._delay(function(){this._close();this._open(e)},this.delay)},_open:function _open(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true");t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function collapseAll(t,i){clearTimeout(this.timer);this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));if(!n.length){n=this.element}this._close(n);this.blur(t);this._removeClass(n.find(".ui-state-active"),null,"ui-state-active");this.activeMenu=n},this.delay)},_close:function _close(e){if(!e){e=this.active?this.active.parent():this.element}e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function _closeOnDocumentClick(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function _isDivider(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function collapse(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(t&&t.length){this._close();this.focus(e,t)}},expand:function expand(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();if(t&&t.length){this._open(t.parent());this._delay(function(){this.focus(e,t)})}},next:function next(e){this._move("next","first",e)},previous:function previous(e){this._move("prev","last",e)},isFirstItem:function isFirstItem(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function isLastItem(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function _move(e,t,i){var n;if(this.active){if("first"===e||"last"===e){n=this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1)}else{n=this.active[e+"All"](".ui-menu-item").eq(0)}}if(!n||!n.length||!this.active){n=this.activeMenu.find(this.options.items)[t]()}this.focus(i,n)},nextPage:function nextPage(t){var i,n,o;if(!this.active){this.next(t);return}if(this.isLastItem()){return}if(this._hasScroll()){n=this.active.offset().top;o=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){i=e(this);return 0>i.offset().top-n-o});this.focus(t,i)}else{this.focus(t,this.activeMenu.find(this.options.items)[!this.active?"first":"last"]())}},previousPage:function previousPage(t){var i,n,o;if(!this.active){this.next(t);return}if(this.isFirstItem()){return}if(this._hasScroll()){n=this.active.offset().top;o=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){i=e(this);return 0<i.offset().top-n+o});this.focus(t,i)}else{this.focus(t,this.activeMenu.find(this.options.items).first())}},_hasScroll:function _hasScroll(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function select(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};if(!this.active.has(".ui-menu").length){this.collapseAll(t,!0)}this._trigger("select",t,i)},_filterMenuItems:function _filterMenuItems(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=new RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return n.test(e.trim(e(this).children(".ui-menu-item-wrapper").text()))})}});e.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function _create(){var t,i,n,o=this.element[0].nodeName.toLowerCase(),a="textarea"===o,s="input"===o;this.isMultiLine=a||!s&&this._isContentEditable(this.element);this.valueMethod=this.element[a||s?"val":"text"];this.isNewMenu=!0;this._addClass("ui-autocomplete-input");this.element.attr("autocomplete","off");this._on(this.element,{keydown:function keydown(o){if(this.element.prop("readOnly")){t=!0;n=!0;i=!0;return}t=!1;n=!1;i=!1;var a=e.ui.keyCode;switch(o.keyCode){case a.PAGE_UP:t=!0;this._move("previousPage",o);break;case a.PAGE_DOWN:t=!0;this._move("nextPage",o);break;case a.UP:t=!0;this._keyEvent("previous",o);break;case a.DOWN:t=!0;this._keyEvent("next",o);break;case a.ENTER:if(this.menu.active){t=!0;o.preventDefault();this.menu.select(o)}break;case a.TAB:if(this.menu.active){this.menu.select(o)}break;case a.ESCAPE:if(this.menu.element.is(":visible")){if(!this.isMultiLine){this._value(this.term)}this.close(o);o.preventDefault()}break;default:i=!0;this._searchTimeout(o);break;}},keypress:function keypress(n){if(t){t=!1;if(!this.isMultiLine||this.menu.element.is(":visible")){n.preventDefault()}return}if(i){return}var o=e.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:this._move("previousPage",n);break;case o.PAGE_DOWN:this._move("nextPage",n);break;case o.UP:this._keyEvent("previous",n);break;case o.DOWN:this._keyEvent("next",n);break;}},input:function input(e){if(n){n=!1;e.preventDefault();return}this._searchTimeout(e)},focus:function focus(){this.selectedItem=null;this.previous=this._value()},blur:function blur(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching);this.close(e);this._change(e)}});this._initSource();this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");this._addClass(this.menu.element,"ui-autocomplete","ui-front");this._on(this.menu.element,{mousedown:function mousedown(t){t.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;if(this.element[0]!==e.ui.safeActiveElement(this.document[0])){this.element.trigger("focus")}})},menufocus:function menufocus(t,i){var n,o;if(this.isNewMenu){this.isNewMenu=!1;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}o=i.item.data("ui-autocomplete-item");if(!1!==this._trigger("focus",t,{item:o})){if(t.originalEvent&&/^key/.test(t.originalEvent.type)){this._value(o.value)}}n=i.item.attr("aria-label")||o.value;if(n&&e.trim(n).length){this.liveRegion.children().hide();e("<div>").text(n).appendTo(this.liveRegion)}},menuselect:function menuselect(t,i){var n=i.item.data("ui-autocomplete-item"),o=this.previous;if(this.element[0]!==e.ui.safeActiveElement(this.document[0])){this.element.trigger("focus");this.previous=o;this._delay(function(){this.previous=o;this.selectedItem=n})}if(!1!==this._trigger("select",t,{item:n})){this._value(n.value)}this.term=this._value();this.close(t);this.selectedItem=n}});this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this._on(this.window,{beforeunload:function beforeunload(){this.element.removeAttr("autocomplete")}})},_destroy:function _destroy(){clearTimeout(this.searching);this.element.removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function _setOption(e,t){this._super(e,t);if("source"===e){this._initSource()}if("appendTo"===e){this.menu.element.appendTo(this._appendTo())}if("disabled"===e&&t&&this.xhr){this.xhr.abort()}},_isEventTargetInWidget:function _isEventTargetInWidget(t){var i=this.menu.element[0];return t.target===this.element[0]||t.target===i||e.contains(i,t.target)},_closeOnClickOutside:function _closeOnClickOutside(e){if(!this._isEventTargetInWidget(e)){this.close()}},_appendTo:function _appendTo(){var t=this.options.appendTo;if(t){t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)}if(!t||!t[0]){t=this.element.closest(".ui-front, dialog")}if(!t.length){t=this.document[0].body}return t},_initSource:function _initSource(){var t,i,n=this;if(e.isArray(this.options.source)){t=this.options.source;this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}}else if("string"==typeof this.options.source){i=this.options.source;this.source=function(t,o){if(n.xhr){n.xhr.abort()}n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function success(e){o(e)},error:function error(){o([])}})}}else{this.source=this.options.source}},_searchTimeout:function _searchTimeout(e){clearTimeout(this.searching);this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),n=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(!t||t&&!i&&!n){this.selectedItem=null;this.search(null,e)}},this.options.delay)},search:function search(e,t){e=null!=e?e:this._value();this.term=this._value();if(e.length<this.options.minLength){return this.close(t)}if(!1===this._trigger("search",t)){return}return this._search(e)},_search:function _search(e){this.pending++;this._addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:e},this._response())},_response:function _response(){var t=++this.requestIndex;return e.proxy(function(e){if(t===this.requestIndex){this.__response(e)}this.pending--;if(!this.pending){this._removeClass("ui-autocomplete-loading")}},this)},__response:function __response(e){if(e){e=this._normalize(e)}this._trigger("response",null,{content:e});if(!this.options.disabled&&e&&e.length&&!this.cancelSearch){this._suggest(e);this._trigger("open")}else{this._close()}},close:function close(e){this.cancelSearch=!0;this._close(e)},_close:function _close(e){this._off(this.document,"mousedown");if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=!0;this._trigger("close",e)}},_change:function _change(e){if(this.previous!==this._value()){this._trigger("change",e,{item:this.selectedItem})}},_normalize:function _normalize(t){if(t.length&&t[0].label&&t[0].value){return t}return e.map(t,function(t){if("string"==typeof t){return{label:t,value:t}}return e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function _suggest(t){var i=this.menu.element.empty();this._renderMenu(i,t);this.isNewMenu=!0;this.menu.refresh();i.show();this._resizeMenu();i.position(e.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next()}this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function _resizeMenu(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function _renderMenu(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function _renderItemData(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function _renderItem(t,i){return e("<li>").append(e("<div>").text(i.label)).appendTo(t)},_move:function _move(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){if(!this.isMultiLine){this._value(this.term)}this.menu.blur();return}this.menu[e](t)},widget:function widget(){return this.menu.element},_value:function _value(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function _keyEvent(e,t){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(e,t);t.preventDefault()}},_isContentEditable:function _isContentEditable(e){if(!e.length){return!1}var t=e.prop("contentEditable");if("inherit"===t){return this._isContentEditable(e.parent())}return"true"===t}});e.extend(e.ui.autocomplete,{escapeRegex:function escapeRegex(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function filter(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}});e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function results(e){return e+(1<e?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function __response(t){var i;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return}if(t&&t.length){i=this.options.messages.results(t.length)}else{i=this.options.messages.noResults}this.liveRegion.children().hide();e("<div>").text(i).appendTo(this.liveRegion)}});var N=e.ui.autocomplete,W=e.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function _create(){this._enhance()},_enhance:function _enhance(){this.element.attr("role","toolbar");this.refresh()},_destroy:function _destroy(){this._callChildMethod("destroy");this.childWidgets.removeData("ui-controlgroup-data");this.element.removeAttr("role");if(this.options.items.controlgroupLabel){this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()}},_initWidgets:function _initWidgets(){var t=this,i=[];e.each(this.options.items,function(n,o){var a,s={};if(!o){return}if("controlgroupLabel"===n){a=t.element.find(o);a.each(function(){var t=e(this);if(t.children(".ui-controlgroup-label-contents").length){return}t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")});t._addClass(a,null,"ui-widget ui-widget-content ui-state-default");i=i.concat(a.get());return}if(!e.fn[n]){return}if(t["_"+n+"Options"]){s=t["_"+n+"Options"]("middle")}else{s={classes:{}}}t.element.find(o).each(function(){var o=e(this),a=o[n]("instance"),r=e.widget.extend({},s);if("button"===n&&o.parent(".ui-spinner").length){return}if(!a){a=o[n]()[n]("instance")}if(a){r.classes=t._resolveClassesValues(r.classes,a)}o[n](r);var l=o[n]("widget");e.data(l[0],"ui-controlgroup-data",a?a:o[n]("instance"));i.push(l[0])})});this.childWidgets=e(e.unique(i));this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function _callChildMethod(t){this.childWidgets.each(function(){var i=e(this),n=i.data("ui-controlgroup-data");if(n&&n[t]){n[t]()}})},_updateCornerClass:function _updateCornerClass(e,t){var i=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all");this._addClass(e,null,i)},_buildSimpleOptions:function _buildSimpleOptions(e,t){var i="vertical"===this.options.direction,n={classes:{}};n.classes[t]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[e];return n},_spinnerOptions:function _spinnerOptions(e){var t=this._buildSimpleOptions(e,"ui-spinner");t.classes["ui-spinner-up"]="";t.classes["ui-spinner-down"]="";return t},_buttonOptions:function _buttonOptions(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function _checkboxradioOptions(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function _selectmenuOptions(e){var t="vertical"===this.options.direction;return{width:t?"auto":!1,classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function _resolveClassesValues(t,i){var n={};e.each(t,function(o){var a=i.options.classes[o]||"";a=e.trim(a.replace(/ui-corner-([a-z]){2,6}/g,""));n[o]=(a+" "+t[o]).replace(/\s+/g," ")});return n},_setOption:function _setOption(e,t){if("direction"===e){this._removeClass("ui-controlgroup-"+this.options.direction)}this._super(e,t);if("disabled"===e){this._callChildMethod(t?"disable":"enable");return}this.refresh()},refresh:function refresh(){var t,i=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction);if("horizontal"===this.options.direction){this._addClass(null,"ui-helper-clearfix")}this._initWidgets();t=this.childWidgets;if(this.options.onlyVisible){t=t.filter(":visible")}if(t.length){e.each(["first","last"],function(e,n){var o=t[n]().data("ui-controlgroup-data");if(o&&i["_"+o.widgetName+"Options"]){var a=i["_"+o.widgetName+"Options"](1===t.length?"only":n);a.classes=i._resolveClassesValues(a.classes,o);o.element[o.widgetName](a)}else{i._updateCornerClass(t[n](),n)}});this._callChildMethod("refresh")}}});e.widget("ui.checkboxradio",[e.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function _getCreateOptions(){var t,i,n=this,o=this._super()||{};this._readType();i=this.element.labels();this.label=e(i[i.length-1]);if(!this.label.length){e.error("No label found for checkboxradio widget")}this.originalLabel="";this.label.contents().not(this.element[0]).each(function(){n.originalLabel+=3===this.nodeType?e(this).text():this.outerHTML});if(this.originalLabel){o.label=this.originalLabel}t=this.element[0].disabled;if(null!=t){o.disabled=t}return o},_create:function _create(){var e=this.element[0].checked;this._bindFormResetHandler();if(null==this.options.disabled){this.options.disabled=this.element[0].disabled}this._setOption("disabled",this.options.disabled);this._addClass("ui-checkboxradio","ui-helper-hidden-accessible");this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget");if("radio"===this.type){this._addClass(this.label,"ui-checkboxradio-radio-label")}if(this.options.label&&this.options.label!==this.originalLabel){this._updateLabel()}else if(this.originalLabel){this.options.label=this.originalLabel}this._enhance();if(e){this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active");if(this.icon){this._addClass(this.icon,null,"ui-state-hover")}}this._on({change:"_toggleClasses",focus:function focus(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function blur(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function _readType(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type;if("input"!==t||!/radio|checkbox/.test(this.type)){e.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)}},_enhance:function _enhance(){this._updateIcon(this.element[0].checked)},widget:function widget(){return this.label},_getRadioGroup:function _getRadioGroup(){var t,i=this.element[0].name,n="input[name='"+e.ui.escapeSelector(i)+"']";if(!i){return e([])}if(this.form.length){t=e(this.form[0].elements).filter(n)}else{t=e(n).filter(function(){return 0===e(this).form().length})}return t.not(this.element)},_toggleClasses:function _toggleClasses(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t);if(this.options.icon&&"checkbox"===this.type){this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t)}if("radio"===this.type){this._getRadioGroup().each(function(){var t=e(this).checkboxradio("instance");if(t){t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")}})}},_destroy:function _destroy(){this._unbindFormResetHandler();if(this.icon){this.icon.remove();this.iconSpace.remove()}},_setOption:function _setOption(e,t){if("label"===e&&!t){return}this._super(e,t);if("disabled"===e){this._toggleClass(this.label,null,"ui-state-disabled",t);this.element[0].disabled=t;return}this.refresh()},_updateIcon:function _updateIcon(t){var i="ui-icon ui-icon-background ";if(this.options.icon){if(!this.icon){this.icon=e("<span>");this.iconSpace=e("<span> </span>");this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")}if("checkbox"===this.type){i+=t?"ui-icon-check ui-state-checked":"ui-icon-blank";this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")}else{i+="ui-icon-blank"}this._addClass(this.icon,"ui-checkboxradio-icon",i);if(!t){this._removeClass(this.icon,null,"ui-icon-check ui-state-checked")}this.icon.prependTo(this.label).after(this.iconSpace)}else if(this.icon!==void 0){this.icon.remove();this.iconSpace.remove();delete this.icon}},_updateLabel:function _updateLabel(){var e=this.label.contents().not(this.element[0]);if(this.icon){e=e.not(this.icon[0])}if(this.iconSpace){e=e.not(this.iconSpace[0])}e.remove();this.label.append(this.options.label)},refresh:function refresh(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e);this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e);if(null!==this.options.label){this._updateLabel()}if(t!==this.options.disabled){this._setOptions({disabled:t})}}}]);e.ui.checkboxradio;e.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function _getCreateOptions(){var e,t=this._super()||{};this.isInput=this.element.is("input");e=this.element[0].disabled;if(null!=e){t.disabled=e}this.originalLabel=this.isInput?this.element.val():this.element.html();if(this.originalLabel){t.label=this.originalLabel}return t},_create:function _create(){if(!this.option.showLabel&!this.options.icon){this.options.showLabel=!0}if(null==this.options.disabled){this.options.disabled=this.element[0].disabled||!1}this.hasTitle=!!this.element.attr("title");if(this.options.label&&this.options.label!==this.originalLabel){if(this.isInput){this.element.val(this.options.label)}else{this.element.html(this.options.label)}}this._addClass("ui-button","ui-widget");this._setOption("disabled",this.options.disabled);this._enhance();if(this.element.is("a")){this._on({keyup:function keyup(t){if(t.keyCode===e.ui.keyCode.SPACE){t.preventDefault();if(this.element[0].click){this.element[0].click()}else{this.element.trigger("click")}}}})}},_enhance:function _enhance(){if(!this.element.is("button")){this.element.attr("role","button")}if(this.options.icon){this._updateIcon("icon",this.options.icon);this._updateTooltip()}},_updateTooltip:function _updateTooltip(){this.title=this.element.attr("title");if(!this.options.showLabel&&!this.title){this.element.attr("title",this.options.label)}},_updateIcon:function _updateIcon(t,i){var n="iconPosition"!==t,o=n?this.options.iconPosition:i;if(!this.icon){this.icon=e("<span>");this._addClass(this.icon,"ui-button-icon","ui-icon");if(!this.options.showLabel){this._addClass("ui-button-icon-only")}}else if(n){this._removeClass(this.icon,null,this.options.icon)}if(n){this._addClass(this.icon,null,i)}this._attachIcon(o);if("top"===o||"bottom"===o){this._addClass(this.icon,null,"ui-widget-icon-block");if(this.iconSpace){this.iconSpace.remove()}}else{if(!this.iconSpace){this.iconSpace=e("<span> </span>");this._addClass(this.iconSpace,"ui-button-icon-space")}this._removeClass(this.icon,null,"ui-wiget-icon-block");this._attachIconSpace(o)}},_destroy:function _destroy(){this.element.removeAttr("role");if(this.icon){this.icon.remove()}if(this.iconSpace){this.iconSpace.remove()}if(!this.hasTitle){this.element.removeAttr("title")}},_attachIconSpace:function _attachIconSpace(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function _attachIcon(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function _setOptions(e){var t=e.showLabel===void 0?this.options.showLabel:e.showLabel,i=e.icon===void 0?this.options.icon:e.icon;if(!t&&!i){e.showLabel=!0}this._super(e)},_setOption:function _setOption(e,t){if("icon"===e){if(t){this._updateIcon(e,t)}else if(this.icon){this.icon.remove();if(this.iconSpace){this.iconSpace.remove()}}}if("iconPosition"===e){this._updateIcon(e,t)}if("showLabel"===e){this._toggleClass("ui-button-icon-only",null,!t);this._updateTooltip()}if("label"===e){if(this.isInput){this.element.val(t)}else{this.element.html(t);if(this.icon){this._attachIcon(this.options.iconPosition);this._attachIconSpace(this.options.iconPosition)}}}this._super(e,t);if("disabled"===e){this._toggleClass(null,"ui-state-disabled",t);this.element[0].disabled=t;if(t){this.element.blur()}}},refresh:function refresh(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");if(e!==this.options.disabled){this._setOptions({disabled:e})}this._updateTooltip()}});if(!1!==e.uiBackCompat){e.widget("ui.button",e.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function _create(){if(this.options.showLabel&&!this.options.text){this.options.showLabel=this.options.text}if(!this.options.showLabel&&this.options.text){this.options.text=this.options.showLabel}if(!this.options.icon&&(this.options.icons.primary||this.options.icons.secondary)){if(this.options.icons.primary){this.options.icon=this.options.icons.primary}else{this.options.icon=this.options.icons.secondary;this.options.iconPosition="end"}}else if(this.options.icon){this.options.icons.primary=this.options.icon}this._super()},_setOption:function _setOption(e,t){if("text"===e){this._super("showLabel",t);return}if("showLabel"===e){this.options.text=t}if("icon"===e){this.options.icons.primary=t}if("icons"===e){if(t.primary){this._super("icon",t.primary);this._super("iconPosition","beginning")}else if(t.secondary){this._super("icon",t.secondary);this._super("iconPosition","end")}}this._superApply(arguments)}});e.fn.button=function(t){return function(){if(!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")){return t.apply(this,arguments)}if(!e.ui.checkboxradio){e.error("Checkboxradio widget missing")}if(0===arguments.length){return this.checkboxradio({icon:!1})}return this.checkboxradio.apply(this,arguments)}}(e.fn.button);e.fn.buttonset=function(){if(!e.ui.controlgroup){e.error("Controlgroup widget missing")}if("option"===arguments[0]&&"items"===arguments[1]&&arguments[2]){return this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]])}if("option"===arguments[0]&&"items"===arguments[1]){return this.controlgroup.apply(this,[arguments[0],"items.button"])}if("object"===_typeof(arguments[0])&&arguments[0].items){arguments[0].items={button:arguments[0].items}}return this.controlgroup.apply(this,arguments)}}e.ui.button;e.extend(e.ui,{datepicker:{version:"1.12.1"}});var E;function i(e){var t,i;while(e.length&&e[0]!==document){t=e.css("position");if("absolute"===t||"relative"===t||"fixed"===t){i=parseInt(e.css("zIndex"),10);if(!isNaN(i)&&0!==i){return i}}e=e.parent()}return 0}function n(){this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._datepickerShowing=!1;this._inDialog=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};e.extend(this._defaults,this.regional[""]);this.regional.en=e.extend(!0,{},this.regional[""]);this.regional["en-US"]=e.extend(!0,{},this.regional.en);this.dpDiv=o(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function _widgetDatepicker(){return this.dpDiv},setDefaults:function setDefaults(e){s(this._defaults,e||{});return this},_attachDatepicker:function _attachDatepicker(t,i){var n,o,a;n=t.nodeName.toLowerCase();o="div"===n||"span"===n;if(!t.id){this.uuid+=1;t.id="dp"+this.uuid}a=this._newInst(e(t),o);a.settings=e.extend({},i||{});if("input"===n){this._connectDatepicker(t,a)}else if(o){this._inlineDatepicker(t,a)}},_newInst:function _newInst(t,i){var n=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:n,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:!i?this.dpDiv:o(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}},_connectDatepicker:function _connectDatepicker(t,i){var n=e(t);i.append=e([]);i.trigger=e([]);if(n.hasClass(this.markerClassName)){return}this._attachments(n,i);n.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp);this._autoSize(i);e.data(t,"datepicker",i);if(i.settings.disabled){this._disableDatepicker(t)}},_attachments:function _attachments(t,i){var n,o,a,s=this._get(i,"appendText"),r=this._get(i,"isRTL");if(i.append){i.append.remove()}if(s){i.append=e("<span class='"+this._appendClass+"'>"+s+"</span>");t[r?"before":"after"](i.append)}t.off("focus",this._showDatepicker);if(i.trigger){i.trigger.remove()}n=this._get(i,"showOn");if("focus"===n||"both"===n){t.on("focus",this._showDatepicker)}if("button"===n||"both"===n){o=this._get(i,"buttonText");a=this._get(i,"buttonImage");i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:o,title:o}):e("<button type='button'></button>").addClass(this._triggerClass).html(!a?o:e("<img/>").attr({src:a,alt:o,title:o})));t[r?"before":"after"](i.trigger);i.trigger.on("click",function(){if(e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]){e.datepicker._hideDatepicker()}else if(e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]){e.datepicker._hideDatepicker();e.datepicker._showDatepicker(t[0])}else{e.datepicker._showDatepicker(t[0])}return!1})}},_autoSize:function _autoSize(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,o,a,s=new Date(2009,11,20),r=this._get(e,"dateFormat");if(r.match(/[DM]/)){t=function(e){n=0;o=0;for(a=0;a<e.length;a++){if(e[a].length>n){n=e[a].length;o=a}}return o};s.setMonth(t(this._get(e,r.match(/MM/)?"monthNames":"monthNamesShort")));s.setDate(t(this._get(e,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())}e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function _inlineDatepicker(t,i){var n=e(t);if(n.hasClass(this.markerClassName)){return}n.addClass(this.markerClassName).append(i.dpDiv);e.data(t,"datepicker",i);this._setDate(i,this._getDefaultDate(i),!0);this._updateDatepicker(i);this._updateAlternate(i);if(i.settings.disabled){this._disableDatepicker(t)}i.dpDiv.css("display","block")},_dialogDatepicker:function _dialogDatepicker(t,i,n,o,a){var r,l,d,c,p,u=this._dialogInst;if(!u){this.uuid+=1;r="dp"+this.uuid;this._dialogInput=e("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.on("keydown",this._doKeyDown);e("body").append(this._dialogInput);u=this._dialogInst=this._newInst(this._dialogInput,!1);u.settings={};e.data(this._dialogInput[0],"datepicker",u)}s(u.settings,o||{});i=i&&i.constructor===Date?this._formatDate(u,i):i;this._dialogInput.val(i);this._pos=a?a.length?a:[a.pageX,a.pageY]:null;if(!this._pos){l=document.documentElement.clientWidth;d=document.documentElement.clientHeight;c=document.documentElement.scrollLeft||document.body.scrollLeft;p=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[l/2-100+c,d/2-150+p]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");u.settings.onSelect=n;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if(e.blockUI){e.blockUI(this.dpDiv)}e.data(this._dialogInput[0],"datepicker",u);return this},_destroyDatepicker:function _destroyDatepicker(t){var i,n=e(t),o=e.data(t,"datepicker");if(!n.hasClass(this.markerClassName)){return}i=t.nodeName.toLowerCase();e.removeData(t,"datepicker");if("input"===i){o.append.remove();o.trigger.remove();n.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)}else if("div"===i||"span"===i){n.removeClass(this.markerClassName).empty()}if(E===o){E=null}},_enableDatepicker:function _enableDatepicker(t){var i,n,o=e(t),a=e.data(t,"datepicker");if(!o.hasClass(this.markerClassName)){return}i=t.nodeName.toLowerCase();if("input"===i){t.disabled=!1;a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})}else if("div"===i||"span"===i){n=o.children("."+this._inlineClass);n.children().removeClass("ui-state-disabled");n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e})},_disableDatepicker:function _disableDatepicker(t){var i,n,o=e(t),a=e.data(t,"datepicker");if(!o.hasClass(this.markerClassName)){return}i=t.nodeName.toLowerCase();if("input"===i){t.disabled=!0;a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if("div"===i||"span"===i){n=o.children("."+this._inlineClass);n.children().addClass("ui-state-disabled");n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e});this._disabledInputs[this._disabledInputs.length]=t},_isDisabledDatepicker:function _isDisabledDatepicker(e){if(!e){return!1}for(var t=0;t<this._disabledInputs.length;t++){if(this._disabledInputs[t]===e){return!0}}return!1},_getInst:function _getInst(t){try{return e.data(t,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function _optionDatepicker(t,i,n){var o,a,r,l,d=this._getInst(t);if(2===arguments.length&&"string"==typeof i){return"defaults"===i?e.extend({},e.datepicker._defaults):d?"all"===i?e.extend({},d.settings):this._get(d,i):null}o=i||{};if("string"==typeof i){o={};o[i]=n}if(d){if(this._curInst===d){this._hideDatepicker()}a=this._getDateDatepicker(t,!0);r=this._getMinMaxDate(d,"min");l=this._getMinMaxDate(d,"max");s(d.settings,o);if(null!==r&&o.dateFormat!==void 0&&o.minDate===void 0){d.settings.minDate=this._formatDate(d,r)}if(null!==l&&o.dateFormat!==void 0&&o.maxDate===void 0){d.settings.maxDate=this._formatDate(d,l)}if("disabled"in o){if(o.disabled){this._disableDatepicker(t)}else{this._enableDatepicker(t)}}this._attachments(e(t),d);this._autoSize(d);this._setDate(d,a);this._updateAlternate(d);this._updateDatepicker(d)}},_changeDatepicker:function _changeDatepicker(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function _refreshDatepicker(e){var t=this._getInst(e);if(t){this._updateDatepicker(t)}},_setDateDatepicker:function _setDateDatepicker(e,t){var i=this._getInst(e);if(i){this._setDate(i,t);this._updateDatepicker(i);this._updateAlternate(i)}},_getDateDatepicker:function _getDateDatepicker(e,t){var i=this._getInst(e);if(i&&!i.inline){this._setDateFromField(i,t)}return i?this._getDate(i):null},_doKeyDown:function _doKeyDown(t){var i,n,o,a=e.datepicker._getInst(t.target),s=!0,r=a.dpDiv.is(".ui-datepicker-rtl");a._keyEvent=!0;if(e.datepicker._datepickerShowing){switch(t.keyCode){case 9:e.datepicker._hideDatepicker();s=!1;break;case 13:o=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv);if(o[0]){e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,o[0])}i=e.datepicker._get(a,"onSelect");if(i){n=e.datepicker._formatDate(a);i.apply(a.input?a.input[0]:null,[n,a])}else{e.datepicker._hideDatepicker()}return!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:if(t.ctrlKey||t.metaKey){e.datepicker._clearDate(t.target)}s=t.ctrlKey||t.metaKey;break;case 36:if(t.ctrlKey||t.metaKey){e.datepicker._gotoToday(t.target)}s=t.ctrlKey||t.metaKey;break;case 37:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,r?1:-1,"D")}s=t.ctrlKey||t.metaKey;if(t.originalEvent.altKey){e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M")}break;case 38:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,-7,"D")}s=t.ctrlKey||t.metaKey;break;case 39:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,r?-1:1,"D")}s=t.ctrlKey||t.metaKey;if(t.originalEvent.altKey){e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M")}break;case 40:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,7,"D")}s=t.ctrlKey||t.metaKey;break;default:s=!1;}}else if(36===t.keyCode&&t.ctrlKey){e.datepicker._showDatepicker(this)}else{s=!1}if(s){t.preventDefault();t.stopPropagation()}},_doKeyPress:function _doKeyPress(t){var i,n,o=e.datepicker._getInst(t.target);if(e.datepicker._get(o,"constrainInput")){i=e.datepicker._possibleChars(e.datepicker._get(o,"dateFormat"));n=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode);return t.ctrlKey||t.metaKey||" ">n||!i||-1<i.indexOf(n)}},_doKeyUp:function _doKeyUp(t){var i,n=e.datepicker._getInst(t.target);if(n.input.val()!==n.lastVal){try{i=e.datepicker.parseDate(e.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,e.datepicker._getFormatConfig(n));if(i){e.datepicker._setDateFromField(n);e.datepicker._updateAlternate(n);e.datepicker._updateDatepicker(n)}}catch(e){}}return!0},_showDatepicker:function _showDatepicker(t){t=t.target||t;if("input"!==t.nodeName.toLowerCase()){t=e("input",t.parentNode)[0]}if(e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t){return}var n,o,a,r,l,d,c;n=e.datepicker._getInst(t);if(e.datepicker._curInst&&e.datepicker._curInst!==n){e.datepicker._curInst.dpDiv.stop(!0,!0);if(n&&e.datepicker._datepickerShowing){e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])}}o=e.datepicker._get(n,"beforeShow");a=o?o.apply(t,[t,n]):{};if(!1===a){return}s(n.settings,a);n.lastVal=null;e.datepicker._lastInput=t;e.datepicker._setDateFromField(n);if(e.datepicker._inDialog){t.value=""}if(!e.datepicker._pos){e.datepicker._pos=e.datepicker._findPos(t);e.datepicker._pos[1]+=t.offsetHeight}r=!1;e(t).parents().each(function(){r|="fixed"===e(this).css("position");return!r});l={left:e.datepicker._pos[0],top:e.datepicker._pos[1]};e.datepicker._pos=null;n.dpDiv.empty();n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});e.datepicker._updateDatepicker(n);l=e.datepicker._checkOffset(n,l,r);n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":r?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"});if(!n.inline){d=e.datepicker._get(n,"showAnim");c=e.datepicker._get(n,"duration");n.dpDiv.css("z-index",i(e(t))+1);e.datepicker._datepickerShowing=!0;if(e.effects&&e.effects.effect[d]){n.dpDiv.show(d,e.datepicker._get(n,"showOptions"),c)}else{n.dpDiv[d||"show"](d?c:null)}if(e.datepicker._shouldFocusInput(n)){n.input.trigger("focus")}e.datepicker._curInst=n}},_updateDatepicker:function _updateDatepicker(t){this.maxRows=4;E=t;t.dpDiv.empty().append(this._generateHTML(t));this._attachHandlers(t);var i,n=this._getNumberOfMonths(t),o=n[1],s=t.dpDiv.find("."+this._dayOverClass+" a");if(0<s.length){a.apply(s.get(0))}t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(1<o){t.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",17*o+"em")}t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi");t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)){t.input.trigger("focus")}if(t.yearshtml){i=t.yearshtml;setTimeout(function(){if(i===t.yearshtml&&t.yearshtml){t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml)}i=t.yearshtml=null},0)}},_shouldFocusInput:function _shouldFocusInput(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function _checkOffset(t,i,n){var o=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),s=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),d=document.documentElement.clientHeight+(n?0:e(document).scrollTop());i.left-=this._get(t,"isRTL")?o-s:0;i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0;i.top-=n&&i.top===t.input.offset().top+r?e(document).scrollTop():0;i.left-=Math.min(i.left,i.left+o>l&&l>o?Math.abs(i.left+o-l):0);i.top-=Math.min(i.top,i.top+a>d&&d>a?Math.abs(a+r):0);return i},_findPos:function _findPos(t){var i,n=this._getInst(t),o=this._get(n,"isRTL");while(t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t))){t=t[o?"previousSibling":"nextSibling"]}i=e(t).offset();return[i.left,i.top]},_hideDatepicker:function _hideDatepicker(t){var i,n,o,a,s=this._curInst;if(!s||t&&s!==e.data(t,"datepicker")){return}if(this._datepickerShowing){i=this._get(s,"showAnim");n=this._get(s,"duration");o=function(){e.datepicker._tidyDialog(s)};if(e.effects&&(e.effects.effect[i]||e.effects[i])){s.dpDiv.hide(i,e.datepicker._get(s,"showOptions"),n,o)}else{s.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,o)}if(!i){o()}this._datepickerShowing=!1;a=this._get(s,"onClose");if(a){a.apply(s.input?s.input[0]:null,[s.input?s.input.val():"",s])}this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(e.blockUI){e.unblockUI();e("body").append(this.dpDiv)}}this._inDialog=!1}},_tidyDialog:function _tidyDialog(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function _checkExternalClick(t){if(!e.datepicker._curInst){return}var i=e(t.target),n=e.datepicker._getInst(i[0]);if(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&!(e.datepicker._inDialog&&e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==n){e.datepicker._hideDatepicker()}},_adjustDate:function _adjustDate(t,i,n){var o=e(t),a=this._getInst(o[0]);if(this._isDisabledDatepicker(o[0])){return}this._adjustInstDate(a,i+("M"===n?this._get(a,"showCurrentAtPos"):0),n);this._updateDatepicker(a)},_gotoToday:function _gotoToday(t){var i,n=e(t),o=this._getInst(n[0]);if(this._get(o,"gotoCurrent")&&o.currentDay){o.selectedDay=o.currentDay;o.drawMonth=o.selectedMonth=o.currentMonth;o.drawYear=o.selectedYear=o.currentYear}else{i=new Date;o.selectedDay=i.getDate();o.drawMonth=o.selectedMonth=i.getMonth();o.drawYear=o.selectedYear=i.getFullYear()}this._notifyChange(o);this._adjustDate(n)},_selectMonthYear:function _selectMonthYear(t,i,n){var o=e(t),a=this._getInst(o[0]);a["selected"+("M"===n?"Month":"Year")]=a["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10);this._notifyChange(a);this._adjustDate(o)},_selectDay:function _selectDay(t,i,n,o){var a,s=e(t);if(e(o).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])){return}a=this._getInst(s[0]);a.selectedDay=a.currentDay=e("a",o).html();a.selectedMonth=a.currentMonth=i;a.selectedYear=a.currentYear=n;this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear))},_clearDate:function _clearDate(t){var i=e(t);this._selectDate(i,"")},_selectDate:function _selectDate(t,i){var n,o=e(t),a=this._getInst(o[0]);i=null!=i?i:this._formatDate(a);if(a.input){a.input.val(i)}this._updateAlternate(a);n=this._get(a,"onSelect");if(n){n.apply(a.input?a.input[0]:null,[i,a])}else if(a.input){a.input.trigger("change")}if(a.inline){this._updateDatepicker(a)}else{this._hideDatepicker();this._lastInput=a.input[0];if("object"!==_typeof(a.input[0])){a.input.trigger("focus")}this._lastInput=null}},_updateAlternate:function _updateAlternate(t){var i,n,o,a=this._get(t,"altField");if(a){i=this._get(t,"altFormat")||this._get(t,"dateFormat");n=this._getDate(t);o=this.formatDate(i,n,this._getFormatConfig(t));e(a).val(o)}},noWeekends:function noWeekends(e){var t=e.getDay();return[0<t&&6>t,""]},iso8601Week:function iso8601Week(e){var t,i=new Date(e.getTime());i.setDate(i.getDate()+4-(i.getDay()||7));t=i.getTime();i.setMonth(0);i.setDate(1);return Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function parseDate(t,n,o){if(null==t||null==n){throw"Invalid arguments"}n="object"===_typeof(n)?n.toString():n+"";if(""===n){return null}var a,s,r,l=0,d=(o?o.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof d?d:new Date().getFullYear()%100+parseInt(d,10),p=(o?o.dayNamesShort:null)||this._defaults.dayNamesShort,u=(o?o.dayNames:null)||this._defaults.dayNames,g=(o?o.monthNamesShort:null)||this._defaults.monthNamesShort,h=(o?o.monthNames:null)||this._defaults.monthNames,m=-1,f=-1,_=-1,b=-1,v=!1,y,w=function(e){var i=a+1<t.length&&t.charAt(a+1)===e;if(i){a++}return i},x=function(e){var t=w(e),i="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,o="y"===e?i:1,a=new RegExp("^\\d{"+o+","+i+"}"),s=n.substring(l).match(a);if(!s){throw"Missing number at position "+l}l+=s[0].length;return parseInt(s[0],10)},k=function(t,i,o){var a=-1,s=e.map(w(t)?o:i,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});e.each(s,function(e,t){var i=t[1];if(n.substr(l,i.length).toLowerCase()===i.toLowerCase()){a=t[0];l+=i.length;return!1}});if(-1!==a){return a+1}else{throw"Unknown name at position "+l}},C=function(){if(n.charAt(l)!==t.charAt(a)){throw"Unexpected literal at position "+l}l++};for(a=0;a<t.length;a++){if(v){if("'"===t.charAt(a)&&!w("'")){v=!1}else{C()}}else{switch(t.charAt(a)){case"d":_=x("d");break;case"D":k("D",p,u);break;case"o":b=x("o");break;case"m":f=x("m");break;case"M":f=k("M",g,h);break;case"y":m=x("y");break;case"@":y=new Date(x("@"));m=y.getFullYear();f=y.getMonth()+1;_=y.getDate();break;case"!":y=new Date((x("!")-this._ticksTo1970)/1e4);m=y.getFullYear();f=y.getMonth()+1;_=y.getDate();break;case"'":if(w("'")){C()}else{v=!0}break;default:C();}}}if(l<n.length){r=n.substr(l);if(!/^\s+/.test(r)){throw"Extra/unparsed characters found in date: "+r}}if(-1===m){m=new Date().getFullYear()}else if(100>m){m+=new Date().getFullYear()-new Date().getFullYear()%100+(m<=c?0:-100)}if(-1<b){f=1;_=b;do{s=this._getDaysInMonth(m,f-1);if(_<=s){break}f++;_-=s}while(!0)}y=this._daylightSavingAdjust(new Date(m,f-1,_));if(y.getFullYear()!==m||y.getMonth()+1!==f||y.getDate()!==_){throw"Invalid date"}return y},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*(60*(60*(24*(718685+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))))),formatDate:function formatDate(e,t,i){if(!t){return""}var n,o=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,s=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=n+1<e.length&&e.charAt(n+1)===t;if(i){n++}return i},d=function(e,t,i){var n=""+t;if(l(e)){while(n.length<i){n="0"+n}}return n},c=function(e,t,i,n){return l(e)?n[t]:i[t]},p="",u=!1;if(t){for(n=0;n<e.length;n++){if(u){if("'"===e.charAt(n)&&!l("'")){u=!1}else{p+=e.charAt(n)}}else{switch(e.charAt(n)){case"d":p+=d("d",t.getDate(),2);break;case"D":p+=c("D",t.getDay(),o,a);break;case"o":p+=d("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":p+=d("m",t.getMonth()+1,2);break;case"M":p+=c("M",t.getMonth(),s,r);break;case"y":p+=l("y")?t.getFullYear():(10>t.getFullYear()%100?"0":"")+t.getFullYear()%100;break;case"@":p+=t.getTime();break;case"!":p+=1e4*t.getTime()+this._ticksTo1970;break;case"'":if(l("'")){p+="'"}else{u=!0}break;default:p+=e.charAt(n);}}}}return p},_possibleChars:function _possibleChars(e){var t,i="",n=!1,o=function(i){var n=t+1<e.length&&e.charAt(t+1)===i;if(n){t++}return n};for(t=0;t<e.length;t++){if(n){if("'"===e.charAt(t)&&!o("'")){n=!1}else{i+=e.charAt(t)}}else{switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":if(o("'")){i+="'"}else{n=!0}break;default:i+=e.charAt(t);}}}return i},_get:function _get(e,t){return e.settings[t]!==void 0?e.settings[t]:this._defaults[t]},_setDateFromField:function _setDateFromField(e,t){if(e.input.val()===e.lastVal){return}var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,o=this._getDefaultDate(e),a=o,s=this._getFormatConfig(e);try{a=this.parseDate(i,n,s)||o}catch(e){n=t?"":n}e.selectedDay=a.getDate();e.drawMonth=e.selectedMonth=a.getMonth();e.drawYear=e.selectedYear=a.getFullYear();e.currentDay=n?a.getDate():0;e.currentMonth=n?a.getMonth():0;e.currentYear=n?a.getFullYear():0;this._adjustInstDate(e)},_getDefaultDate:function _getDefaultDate(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function _determineDate(t,i,n){var o=null==i||""===i?n:"string"==typeof i?function offsetString(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(t){}var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,o=n.getFullYear(),a=n.getMonth(),s=n.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=r.exec(i);while(l){switch(l[2]||"d"){case"d":case"D":s+=parseInt(l[1],10);break;case"w":case"W":s+=7*parseInt(l[1],10);break;case"m":case"M":a+=parseInt(l[1],10);s=Math.min(s,e.datepicker._getDaysInMonth(o,a));break;case"y":case"Y":o+=parseInt(l[1],10);s=Math.min(s,e.datepicker._getDaysInMonth(o,a));break;}l=r.exec(i)}return new Date(o,a,s)}(i):"number"==typeof i?isNaN(i)?n:function offsetNumeric(e){var t=new Date;t.setDate(t.getDate()+e);return t}(i):new Date(i.getTime());o=o&&"Invalid Date"===o.toString()?n:o;if(o){o.setHours(0);o.setMinutes(0);o.setSeconds(0);o.setMilliseconds(0)}return this._daylightSavingAdjust(o)},_daylightSavingAdjust:function _daylightSavingAdjust(e){if(!e){return null}e.setHours(12<e.getHours()?e.getHours()+2:0);return e},_setDate:function _setDate(e,t,i){var n=e.selectedMonth,o=e.selectedYear,a=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=a.getDate();e.drawMonth=e.selectedMonth=e.currentMonth=a.getMonth();e.drawYear=e.selectedYear=e.currentYear=a.getFullYear();if((n!==e.selectedMonth||o!==e.selectedYear)&&!i){this._notifyChange(e)}this._adjustInstDate(e);if(e.input){e.input.val(!t?"":this._formatDate(e))}},_getDate:function _getDate(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function _attachHandlers(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){e(this).on(this.getAttribute("data-event"),{prev:function prev(){e.datepicker._adjustDate(n,-i,"M")},next:function next(){e.datepicker._adjustDate(n,+i,"M")},hide:function hide(){e.datepicker._hideDatepicker()},today:function today(){e.datepicker._gotoToday(n)},selectDay:function selectDay(){e.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return!1},selectMonth:function selectMonth(){e.datepicker._selectMonthYear(n,this,"M");return!1},selectYear:function selectYear(){e.datepicker._selectMonthYear(n,this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function _generateHTML(e){var t,i,n,o,a,s,r,l,d,c,p,u,g,h,m,f,_,b,v,y,w,x,k,C,D,P,T,I,S,H,M,z,O,A,N,W,E,F,L,R=new Date,B=this._daylightSavingAdjust(new Date(R.getFullYear(),R.getMonth(),R.getDate())),Y=this._get(e,"isRTL"),j=this._get(e,"showButtonPanel"),q=this._get(e,"hideIfNoPrevNext"),K=this._get(e,"navigationAsDateFormat"),U=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),X=this._get(e,"stepMonths"),G=1!==U[0]||1!==U[1],$=this._daylightSavingAdjust(!e.currentDay?new Date(9999,9,9):new Date(e.currentYear,e.currentMonth,e.currentDay)),Q=this._getMinMaxDate(e,"min"),J=this._getMinMaxDate(e,"max"),Z=e.drawMonth-V,ee=e.drawYear;if(0>Z){Z+=12;ee--}if(J){t=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-U[0]*U[1]+1,J.getDate()));t=Q&&t<Q?Q:t;while(this._daylightSavingAdjust(new Date(ee,Z,1))>t){Z--;if(0>Z){Z=11;ee--}}}e.drawMonth=Z;e.drawYear=ee;i=this._get(e,"prevText");i=!K?i:this.formatDate(i,this._daylightSavingAdjust(new Date(ee,Z-X,1)),this._getFormatConfig(e));n=this._canAdjustMonth(e,-1,ee,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":q?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>";o=this._get(e,"nextText");o=!K?o:this.formatDate(o,this._daylightSavingAdjust(new Date(ee,Z+X,1)),this._getFormatConfig(e));a=this._canAdjustMonth(e,1,ee,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+o+"</span></a>":q?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+o+"</span></a>";s=this._get(e,"currentText");r=this._get(e,"gotoCurrent")&&e.currentDay?$:B;s=!K?s:this.formatDate(s,r,this._getFormatConfig(e));l=!e.inline?"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>":"";d=j?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?l:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+s+"</button>":"")+(Y?"":l)+"</div>":"";c=parseInt(this._get(e,"firstDay"),10);c=isNaN(c)?0:c;p=this._get(e,"showWeek");u=this._get(e,"dayNames");g=this._get(e,"dayNamesMin");h=this._get(e,"monthNames");m=this._get(e,"monthNamesShort");f=this._get(e,"beforeShowDay");_=this._get(e,"showOtherMonths");b=this._get(e,"selectOtherMonths");v=this._getDefaultDate(e);y="";for(x=0;x<U[0];x++){k="";this.maxRows=4;for(C=0;C<U[1];C++){D=this._daylightSavingAdjust(new Date(ee,Z,e.selectedDay));P=" ui-corner-all";T="";if(G){T+="<div class='ui-datepicker-group";if(1<U[1]){switch(C){case 0:T+=" ui-datepicker-group-first";P=" ui-corner-"+(Y?"right":"left");break;case U[1]-1:T+=" ui-datepicker-group-last";P=" ui-corner-"+(Y?"left":"right");break;default:T+=" ui-datepicker-group-middle";P="";break;}}T+="'>"}T+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+P+"'>"+(/all|left/.test(P)&&0===x?Y?a:n:"")+(/all|right/.test(P)&&0===x?Y?n:a:"")+this._generateMonthYearHeader(e,Z,ee,Q,J,0<x||0<C,h,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>";I=p?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"";for(w=0;7>w;w++){S=(w+c)%7;I+="<th scope='col'"+(5<=(w+c+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+u[S]+"'>"+g[S]+"</span></th>"}T+=I+"</tr></thead><tbody>";H=this._getDaysInMonth(ee,Z);if(ee===e.selectedYear&&Z===e.selectedMonth){e.selectedDay=Math.min(e.selectedDay,H)}M=(this._getFirstDayOfMonth(ee,Z)-c+7)%7;z=Math.ceil((M+H)/7);O=G?this.maxRows>z?this.maxRows:z:z;this.maxRows=O;A=this._daylightSavingAdjust(new Date(ee,Z,1-M));for(N=0;N<O;N++){T+="<tr>";W=!p?"":"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(A)+"</td>";for(w=0;7>w;w++){E=f?f.apply(e.input?e.input[0]:null,[A]):[!0,""];F=A.getMonth()!==Z;L=F&&!b||!E[0]||Q&&A<Q||J&&A>J;W+="<td class='"+(5<=(w+c+6)%7?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(A.getTime()===D.getTime()&&Z===e.selectedMonth&&e._keyEvent||v.getTime()===A.getTime()&&v.getTime()===D.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!_?"":" "+E[1]+(A.getTime()===$.getTime()?" "+this._currentClass:"")+(A.getTime()===B.getTime()?" ui-datepicker-today":""))+"'"+((!F||_)&&E[2]?" title='"+E[2].replace(/'/g,"&#39;")+"'":"")+(L?"":" data-handler='selectDay' data-event='click' data-month='"+A.getMonth()+"' data-year='"+A.getFullYear()+"'")+">"+(F&&!_?"&#xa0;":L?"<span class='ui-state-default'>"+A.getDate()+"</span>":"<a class='ui-state-default"+(A.getTime()===B.getTime()?" ui-state-highlight":"")+(A.getTime()===$.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+A.getDate()+"</a>")+"</td>";A.setDate(A.getDate()+1);A=this._daylightSavingAdjust(A)}T+=W+"</tr>"}Z++;if(11<Z){Z=0;ee++}T+="</tbody></table>"+(G?"</div>"+(0<U[0]&&C===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");k+=T}y+=k}y+=d;e._keyEvent=!1;return y},_generateMonthYearHeader:function _generateMonthYearHeader(e,t,i,n,o,a,s,r){var l,d,c,p,u,g,h,m,f=this._get(e,"changeMonth"),_=this._get(e,"changeYear"),b=this._get(e,"showMonthAfterYear"),v="<div class='ui-datepicker-title'>",y="";if(a||!f){y+="<span class='ui-datepicker-month'>"+s[t]+"</span>"}else{l=n&&n.getFullYear()===i;d=o&&o.getFullYear()===i;y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(c=0;12>c;c++){if((!l||c>=n.getMonth())&&(!d||c<=o.getMonth())){y+="<option value='"+c+"'"+(c===t?" selected='selected'":"")+">"+r[c]+"</option>"}}y+="</select>"}if(!b){v+=y+(a||!(f&&_)?"&#xa0;":"")}if(!e.yearshtml){e.yearshtml="";if(a||!_){v+="<span class='ui-datepicker-year'>"+i+"</span>"}else{p=this._get(e,"yearRange").split(":");u=new Date().getFullYear();g=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?u+parseInt(e,10):parseInt(e,10);return isNaN(t)?u:t};h=g(p[0]);m=Math.max(h,g(p[1]||""));h=n?Math.max(h,n.getFullYear()):h;m=o?Math.min(m,o.getFullYear()):m;e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;h<=m;h++){e.yearshtml+="<option value='"+h+"'"+(h===i?" selected='selected'":"")+">"+h+"</option>"}e.yearshtml+="</select>";v+=e.yearshtml;e.yearshtml=null}}v+=this._get(e,"yearSuffix");if(b){v+=(a||!(f&&_)?"&#xa0;":"")+y}v+="</div>";return v},_adjustInstDate:function _adjustInstDate(e,t,i){var n=e.selectedYear+("Y"===i?t:0),o=e.selectedMonth+("M"===i?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(n,o))+("D"===i?t:0),s=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,o,a)));e.selectedDay=s.getDate();e.drawMonth=e.selectedMonth=s.getMonth();e.drawYear=e.selectedYear=s.getFullYear();if("M"===i||"Y"===i){this._notifyChange(e)}},_restrictMinMax:function _restrictMinMax(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),o=i&&t<i?i:t;return n&&o>n?n:o},_notifyChange:function _notifyChange(e){var t=this._get(e,"onChangeMonthYear");if(t){t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])}},_getNumberOfMonths:function _getNumberOfMonths(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function _getMinMaxDate(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function _getDaysInMonth(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function _getFirstDayOfMonth(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function _canAdjustMonth(e,t,i,n){var o=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,n+(0>t?t:o[0]*o[1]),1));if(0>t){a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth()))}return this._isInRange(e,a)},_isInRange:function _isInRange(e,t){var i,n,o=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),s=null,r=null,l=this._get(e,"yearRange");if(l){i=l.split(":");n=new Date().getFullYear();s=parseInt(i[0],10);r=parseInt(i[1],10);if(i[0].match(/[+\-].*/)){s+=n}if(i[1].match(/[+\-].*/)){r+=n}}return(!o||t.getTime()>=o.getTime())&&(!a||t.getTime()<=a.getTime())&&(!s||t.getFullYear()>=s)&&(!r||t.getFullYear()<=r)},_getFormatConfig:function _getFormatConfig(e){var t=this._get(e,"shortYearCutoff");t="string"!=typeof t?t:new Date().getFullYear()%100+parseInt(t,10);return{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function _formatDate(e,t,i,n){if(!t){e.currentDay=e.selectedDay;e.currentMonth=e.selectedMonth;e.currentYear=e.selectedYear}var o=t?"object"===_typeof(t)?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),o,this._getFormatConfig(e))}});function o(t){return t.on("mouseout","button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",function(){e(this).removeClass("ui-state-hover");if(-1!==this.className.indexOf("ui-datepicker-prev")){e(this).removeClass("ui-datepicker-prev-hover")}if(-1!==this.className.indexOf("ui-datepicker-next")){e(this).removeClass("ui-datepicker-next-hover")}}).on("mouseover","button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",a)}function a(){if(!e.datepicker._isDisabledDatepicker(E.inline?E.dpDiv.parent()[0]:E.input[0])){e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");e(this).addClass("ui-state-hover");if(-1!==this.className.indexOf("ui-datepicker-prev")){e(this).addClass("ui-datepicker-prev-hover")}if(-1!==this.className.indexOf("ui-datepicker-next")){e(this).addClass("ui-datepicker-next-hover")}}}function s(t,i){e.extend(t,i);for(var n in i){if(null==i[n]){t[n]=i[n]}}return t}e.fn.datepicker=function(t){if(!this.length){return this}if(!e.datepicker.initialized){e(document).on("mousedown",e.datepicker._checkExternalClick);e.datepicker.initialized=!0}if(0===e("#"+e.datepicker._mainDivId).length){e("body").append(e.datepicker.dpDiv)}var i=Array.prototype.slice.call(arguments,1);if("string"==typeof t&&("isDisabled"===t||"getDate"===t||"widget"===t)){return e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))}if("option"===t&&2===arguments.length&&"string"==typeof arguments[1]){return e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))}return this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)})};e.datepicker=new n;e.datepicker.initialized=!1;e.datepicker.uuid=new Date().getTime();e.datepicker.version="1.12.1";e.datepicker;e.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function using(t){var i=e(this).css(t).offset().top;if(0>i){e(this).css("top",t.top-i)}}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function _create(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");if(null==this.options.title&&null!=this.originalTitle){this.options.title=this.originalTitle}if(this.options.disabled){this.options.disabled=!1}this._createWrapper();this.element.show().removeAttr("title").appendTo(this.uiDialog);this._addClass("ui-dialog-content","ui-widget-content");this._createTitlebar();this._createButtonPane();if(this.options.draggable&&e.fn.draggable){this._makeDraggable()}if(this.options.resizable&&e.fn.resizable){this._makeResizable()}this._isOpen=!1;this._trackFocus()},_init:function _init(){if(this.options.autoOpen){this.open()}},_appendTo:function _appendTo(){var t=this.options.appendTo;if(t&&(t.jquery||t.nodeType)){return e(t)}return this.document.find(t||"body").eq(0)},_destroy:function _destroy(){var e,t=this.originalPosition;this._untrackInstance();this._destroyOverlay();this.element.removeUniqueId().css(this.originalCss).detach();this.uiDialog.remove();if(this.originalTitle){this.element.attr("title",this.originalTitle)}e=t.parent.children().eq(t.index);if(e.length&&e[0]!==this.element[0]){e.before(this.element)}else{t.parent.append(this.element)}},widget:function widget(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function close(t){var i=this;if(!this._isOpen||!1===this._trigger("beforeClose",t)){return}this._isOpen=!1;this._focusedElement=null;this._destroyOverlay();this._untrackInstance();if(!this.opener.filter(":focusable").trigger("focus").length){e.ui.safeBlur(e.ui.safeActiveElement(this.document[0]))}this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)})},isOpen:function isOpen(){return this._isOpen},moveToTop:function moveToTop(){this._moveToTop()},_moveToTop:function _moveToTop(t,i){var n=!1,o=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),a=Math.max.apply(null,o);if(a>=+this.uiDialog.css("z-index")){this.uiDialog.css("z-index",a+1);n=!0}if(n&&!i){this._trigger("focus",t)}return n},open:function open(){var t=this;if(this._isOpen){if(this._moveToTop()){this._focusTabbable()}return}this._isOpen=!0;this.opener=e(e.ui.safeActiveElement(this.document[0]));this._size();this._position();this._createOverlay();this._moveToTop(null,!0);if(this.overlay){this.overlay.css("z-index",this.uiDialog.css("z-index")-1)}this._show(this.uiDialog,this.options.show,function(){t._focusTabbable();t._trigger("focus")});this._makeFocusTarget();this._trigger("open")},_focusTabbable:function _focusTabbable(){var e=this._focusedElement;if(!e){e=this.element.find("[autofocus]")}if(!e.length){e=this.element.find(":tabbable")}if(!e.length){e=this.uiDialogButtonPane.find(":tabbable")}if(!e.length){e=this.uiDialogTitlebarClose.filter(":tabbable")}if(!e.length){e=this.uiDialog}e.eq(0).trigger("focus")},_keepFocus:function _keepFocus(t){function i(){var t=e.ui.safeActiveElement(this.document[0]),i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);if(!i){this._focusTabbable()}}t.preventDefault();i.call(this);this._delay(i)},_createWrapper:function _createWrapper(){this.uiDialog=e("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front");this._on(this.uiDialog,{keydown:function keydown(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE){t.preventDefault();this.close(t);return}if(t.keyCode!==e.ui.keyCode.TAB||t.isDefaultPrevented()){return}var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),o=i.filter(":last");if((t.target===o[0]||t.target===this.uiDialog[0])&&!t.shiftKey){this._delay(function(){n.trigger("focus")});t.preventDefault()}else if((t.target===n[0]||t.target===this.uiDialog[0])&&t.shiftKey){this._delay(function(){o.trigger("focus")});t.preventDefault()}},mousedown:function mousedown(e){if(this._moveToTop(e)){this._focusTabbable()}}});if(!this.element.find("[aria-describedby]").length){this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})}},_createTitlebar:function _createTitlebar(){var t;this.uiDialogTitlebar=e("<div>");this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix");this._on(this.uiDialogTitlebar,{mousedown:function mousedown(t){if(!e(t.target).closest(".ui-dialog-titlebar-close")){this.uiDialog.trigger("focus")}}});this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:e("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar);this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close");this._on(this.uiDialogTitlebarClose,{click:function click(e){e.preventDefault();this.close(e)}});t=e("<span>").uniqueId().prependTo(this.uiDialogTitlebar);this._addClass(t,"ui-dialog-title");this._title(t);this.uiDialogTitlebar.prependTo(this.uiDialog);this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function _title(e){if(this.options.title){e.text(this.options.title)}else{e.html("&#160;")}},_createButtonPane:function _createButtonPane(){this.uiDialogButtonPane=e("<div>");this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix");this.uiButtonSet=e("<div>").appendTo(this.uiDialogButtonPane);this._addClass(this.uiButtonSet,"ui-dialog-buttonset");this._createButtons()},_createButtons:function _createButtons(){var t=this,i=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if(e.isEmptyObject(i)||e.isArray(i)&&!i.length){this._removeClass(this.uiDialog,"ui-dialog-buttons");return}e.each(i,function(i,n){var o,a;n=e.isFunction(n)?{click:n,text:i}:n;n=e.extend({type:"button"},n);o=n.click;a={icon:n.icon,iconPosition:n.iconPosition,showLabel:n.showLabel,icons:n.icons,text:n.text};delete n.click;delete n.icon;delete n.iconPosition;delete n.showLabel;delete n.icons;if("boolean"==typeof n.text){delete n.text}e("<button></button>",n).button(a).appendTo(t.uiButtonSet).on("click",function(){o.apply(t.element[0],arguments)})});this._addClass(this.uiDialog,"ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function _makeDraggable(){var i=this,n=this.options;function t(e){return{position:e.position,offset:e.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function start(n,o){i._addClass(e(this),"ui-dialog-dragging");i._blockFrames();i._trigger("dragStart",n,t(o))},drag:function drag(e,n){i._trigger("drag",e,t(n))},stop:function stop(o,a){var s=a.offset.left-i.document.scrollLeft(),r=a.offset.top-i.document.scrollTop();n.position={my:"left top",at:"left"+(0<=s?"+":"")+s+" top"+(0<=r?"+":"")+r,of:i.window};i._removeClass(e(this),"ui-dialog-dragging");i._unblockFrames();i._trigger("dragStop",o,t(a))}})},_makeResizable:function _makeResizable(){var i=this,n=this.options,o=n.resizable,a=this.uiDialog.css("position"),s="string"==typeof o?o:"n,e,s,w,se,sw,ne,nw";function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:s,start:function start(n,o){i._addClass(e(this),"ui-dialog-resizing");i._blockFrames();i._trigger("resizeStart",n,t(o))},resize:function resize(e,n){i._trigger("resize",e,t(n))},stop:function stop(o,a){var s=i.uiDialog.offset(),r=s.left-i.document.scrollLeft(),l=s.top-i.document.scrollTop();n.height=i.uiDialog.height();n.width=i.uiDialog.width();n.position={my:"left top",at:"left"+(0<=r?"+":"")+r+" top"+(0<=l?"+":"")+l,of:i.window};i._removeClass(e(this),"ui-dialog-resizing");i._unblockFrames();i._trigger("resizeStop",o,t(a))}}).css("position",a)},_trackFocus:function _trackFocus(){this._on(this.widget(),{focusin:function focusin(t){this._makeFocusTarget();this._focusedElement=e(t.target)}})},_makeFocusTarget:function _makeFocusTarget(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function _untrackInstance(){var t=this._trackingInstances(),i=e.inArray(this,t);if(-1!==i){t.splice(i,1)}},_trackingInstances:function _trackingInstances(){var e=this.document.data("ui-dialog-instances");if(!e){e=[];this.document.data("ui-dialog-instances",e)}return e},_minHeight:function _minHeight(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function _position(){var e=this.uiDialog.is(":visible");if(!e){this.uiDialog.show()}this.uiDialog.position(this.options.position);if(!e){this.uiDialog.hide()}},_setOptions:function _setOptions(t){var i=this,n=!1,o={};e.each(t,function(e,t){i._setOption(e,t);if(e in i.sizeRelatedOptions){n=!0}if(e in i.resizableRelatedOptions){o[e]=t}});if(n){this._size();this._position()}if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option",o)}},_setOption:function _setOption(t,i){var n,o,a=this.uiDialog;if("disabled"===t){return}this._super(t,i);if("appendTo"===t){this.uiDialog.appendTo(this._appendTo())}if("buttons"===t){this._createButtons()}if("closeText"===t){this.uiDialogTitlebarClose.button({label:e("<a>").text(""+this.options.closeText).html()})}if("draggable"===t){n=a.is(":data(ui-draggable)");if(n&&!i){a.draggable("destroy")}if(!n&&i){this._makeDraggable()}}if("position"===t){this._position()}if("resizable"===t){o=a.is(":data(ui-resizable)");if(o&&!i){a.resizable("destroy")}if(o&&"string"==typeof i){a.resizable("option","handles",i)}if(!o&&!1!==i){this._makeResizable()}}if("title"===t){this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))}},_size:function _size(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});if(n.minWidth>n.width){n.width=n.minWidth}e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight();t=Math.max(0,n.minHeight-e);i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none";if("auto"===n.height){this.element.css({minHeight:t,maxHeight:i,height:"auto"})}else{this.element.height(Math.max(0,n.height-e))}if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight())}},_blockFrames:function _blockFrames(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function _unblockFrames(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_allowInteraction:function _allowInteraction(t){if(e(t.target).closest(".ui-dialog").length){return!0}return!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function _createOverlay(){if(!this.options.modal){return}var t=!0;this._delay(function(){t=!1});if(!this.document.data("ui-dialog-overlays")){this._on(this.document,{focusin:function focusin(e){if(t){return}if(!this._allowInteraction(e)){e.preventDefault();this._trackingInstances()[0]._focusTabbable()}}})}this.overlay=e("<div>").appendTo(this._appendTo());this._addClass(this.overlay,null,"ui-widget-overlay ui-front");this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)},_destroyOverlay:function _destroyOverlay(){if(!this.options.modal){return}if(this.overlay){var e=this.document.data("ui-dialog-overlays")-1;if(!e){this._off(this.document,"focusin");this.document.removeData("ui-dialog-overlays")}else{this.document.data("ui-dialog-overlays",e)}this.overlay.remove();this.overlay=null}}});if(!1!==e.uiBackCompat){e.widget("ui.dialog",e.ui.dialog,{options:{dialogClass:""},_createWrapper:function _createWrapper(){this._super();this.uiDialog.addClass(this.options.dialogClass)},_setOption:function _setOption(e,t){if("dialogClass"===e){this.uiDialog.removeClass(this.options.dialogClass).addClass(t)}this._superApply(arguments)}})}var F=e.ui.dialog,L=e.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function _create(){this.oldValue=this.options.value=this._constrainedValue();this.element.attr({role:"progressbar","aria-valuemin":this.min});this._addClass("ui-progressbar","ui-widget ui-widget-content");this.valueDiv=e("<div>").appendTo(this.element);this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header");this._refreshValue()},_destroy:function _destroy(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow");this.valueDiv.remove()},value:function value(e){if(e===void 0){return this.options.value}this.options.value=this._constrainedValue(e);this._refreshValue()},_constrainedValue:function _constrainedValue(e){if(e===void 0){e=this.options.value}this.indeterminate=!1===e;if("number"!=typeof e){e=0}return this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function _setOptions(e){var t=e.value;delete e.value;this._super(e);this.options.value=this._constrainedValue(t);this._refreshValue()},_setOption:function _setOption(e,t){if("max"===e){t=Math.max(this.min,t)}this._super(e,t)},_setOptionDisabled:function _setOptionDisabled(e){this._super(e);this.element.attr("aria-disabled",e);this._toggleClass(null,"ui-state-disabled",!!e)},_percentage:function _percentage(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function _refreshValue(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).width(i.toFixed(0)+"%");this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,t===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate);if(this.indeterminate){this.element.removeAttr("aria-valuenow");if(!this.overlayDiv){this.overlayDiv=e("<div>").appendTo(this.valueDiv);this._addClass(this.overlayDiv,"ui-progressbar-overlay")}}else{this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t});if(this.overlayDiv){this.overlayDiv.remove();this.overlayDiv=null}}if(this.oldValue!==t){this.oldValue=t;this._trigger("change")}if(t===this.options.max){this._trigger("complete")}}}),R=e.widget("ui.selectmenu",[e.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function _create(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"};this._drawButton();this._drawMenu();this._bindFormResetHandler();this._rendered=!1;this.menuItems=e()},_drawButton:function _drawButton(){var t,i=this,n=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button);this._on(this.labels,{click:function click(e){this.button.focus();e.preventDefault()}});this.element.hide();this.button=e("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element);this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget");t=e("<span>").appendTo(this.button);this._addClass(t,"ui-selectmenu-icon","ui-icon "+this.options.icons.button);this.buttonItem=this._renderButtonItem(n).appendTo(this.button);if(!1!==this.options.width){this._resizeButton()}this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){if(!i._rendered){i._refreshMenu()}})},_drawMenu:function _drawMenu(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=e("<div>").append(this.menu);this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front");this.menuWrap.appendTo(this._appendTo());this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function select(e,i){e.preventDefault();t._setSelection();t._select(i.item.data("ui-selectmenu-item"),e)},focus:function focus(e,i){var n=i.item.data("ui-selectmenu-item");if(null!=t.focusIndex&&n.index!==t.focusIndex){t._trigger("focus",e,{item:n});if(!t.isOpen){t._select(n,e)}}t.focusIndex=n.index;t.button.attr("aria-activedescendant",t.menuItems.eq(n.index).attr("id"))}}).menu("instance");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return!1};this.menuInstance._isDivider=function(){return!1}},refresh:function refresh(){this._refreshMenu();this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{}));if(null===this.options.width){this._resizeButton()}},_refreshMenu:function _refreshMenu(){var e,t=this.element.find("option");this.menu.empty();this._parseOptions(t);this._renderMenu(this.menu,this.items);this.menuInstance.refresh();this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper");this._rendered=!0;if(!t.length){return}e=this._getSelectedItem();this.menuInstance.focus(null,e);this._setAria(e.data("ui-selectmenu-item"));this._setOption("disabled",this.element.prop("disabled"))},open:function open(e){if(this.options.disabled){return}if(!this._rendered){this._refreshMenu()}else{this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active");this.menuInstance.focus(null,this._getSelectedItem())}if(!this.menuItems.length){return}this.isOpen=!0;this._toggleAttr();this._resizeMenu();this._position();this._on(this.document,this._documentClick);this._trigger("open",e)},_position:function _position(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function close(e){if(!this.isOpen){return}this.isOpen=!1;this._toggleAttr();this.range=null;this._off(this.document);this._trigger("close",e)},widget:function widget(){return this.button},menuWidget:function menuWidget(){return this.menu},_renderButtonItem:function _renderButtonItem(t){var i=e("<span>");this._setText(i,t.label);this._addClass(i,"ui-selectmenu-text");return i},_renderMenu:function _renderMenu(t,i){var n=this,o="";e.each(i,function(i,a){var s;if(a.optgroup!==o){s=e("<li>",{text:a.optgroup});n._addClass(s,"ui-selectmenu-optgroup","ui-menu-divider"+(a.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""));s.appendTo(t);o=a.optgroup}n._renderItemData(t,a)})},_renderItemData:function _renderItemData(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function _renderItem(t,i){var n=e("<li>"),o=e("<div>",{title:i.element.attr("title")});if(i.disabled){this._addClass(n,null,"ui-state-disabled")}this._setText(o,i.label);return n.append(o).appendTo(t)},_setText:function _setText(e,t){if(t){e.text(t)}else{e.html("&#160;")}},_move:function _move(e,t){var i,n,o=".ui-menu-item";if(this.isOpen){i=this.menuItems.eq(this.focusIndex).parent("li")}else{i=this.menuItems.eq(this.element[0].selectedIndex).parent("li");o+=":not(.ui-state-disabled)"}if("first"===e||"last"===e){n=i["first"===e?"prevAll":"nextAll"](o).eq(-1)}else{n=i[e+"All"](o).eq(0)}if(n.length){this.menuInstance.focus(t,n)}},_getSelectedItem:function _getSelectedItem(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function _toggle(e){this[this.isOpen?"close":"open"](e)},_setSelection:function _setSelection(){var e;if(!this.range){return}if(window.getSelection){e=window.getSelection();e.removeAllRanges();e.addRange(this.range)}else{this.range.select()}this.button.focus()},_documentClick:{mousedown:function mousedown(t){if(!this.isOpen){return}if(!e(t.target).closest(".ui-selectmenu-menu, #"+e.ui.escapeSelector(this.ids.button)).length){this.close(t)}}},_buttonEvents:{mousedown:function mousedown(){var e;if(window.getSelection){e=window.getSelection();if(e.rangeCount){this.range=e.getRangeAt(0)}}else{this.range=document.selection.createRange()}},click:function click(e){this._setSelection();this._toggle(e)},keydown:function keydown(t){var i=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t);i=!1;break;case e.ui.keyCode.ENTER:if(this.isOpen){this._selectFocusedItem(t)}break;case e.ui.keyCode.UP:if(t.altKey){this._toggle(t)}else{this._move("prev",t)}break;case e.ui.keyCode.DOWN:if(t.altKey){this._toggle(t)}else{this._move("next",t)}break;case e.ui.keyCode.SPACE:if(this.isOpen){this._selectFocusedItem(t)}else{this._toggle(t)}break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t);i=!1;}if(i){t.preventDefault()}}},_selectFocusedItem:function _selectFocusedItem(e){var t=this.menuItems.eq(this.focusIndex).parent("li");if(!t.hasClass("ui-state-disabled")){this._select(t.data("ui-selectmenu-item"),e)}},_select:function _select(e,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index;this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(e));this._setAria(e);this._trigger("select",t,{item:e});if(e.index!==i){this._trigger("change",t,{item:e})}this.close(t)},_setAria:function _setAria(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t});this.menu.attr("aria-activedescendant",t)},_setOption:function _setOption(e,t){if("icons"===e){var i=this.button.find("span.ui-icon");this._removeClass(i,null,this.options.icons.button)._addClass(i,null,t.button)}this._super(e,t);if("appendTo"===e){this.menuWrap.appendTo(this._appendTo())}if("width"===e){this._resizeButton()}},_setOptionDisabled:function _setOptionDisabled(e){this._super(e);this.menuInstance.option("disabled",e);this.button.attr("aria-disabled",e);this._toggleClass(this.button,null,"ui-state-disabled",e);this.element.prop("disabled",e);if(e){this.button.attr("tabindex",-1);this.close()}else{this.button.attr("tabindex",0)}},_appendTo:function _appendTo(){var t=this.options.appendTo;if(t){t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)}if(!t||!t[0]){t=this.element.closest(".ui-front, dialog")}if(!t.length){t=this.document[0].body}return t},_toggleAttr:function _toggleAttr(){this.button.attr("aria-expanded",this.isOpen);this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function _resizeButton(){var e=this.options.width;if(!1===e){this.button.css("width","");return}if(null===e){e=this.element.show().outerWidth();this.element.hide()}this.button.outerWidth(e)},_resizeMenu:function _resizeMenu(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function _getCreateOptions(){var e=this._super();e.disabled=this.element.prop("disabled");return e},_parseOptions:function _parseOptions(t){var i=this,n=[];t.each(function(t,o){n.push(i._parseOption(e(o),t))});this.items=n},_parseOption:function _parseOption(e,t){var i=e.parent("optgroup");return{element:e,index:t,value:e.val(),label:e.text(),optgroup:i.attr("label")||"",disabled:i.prop("disabled")||e.prop("disabled")}},_destroy:function _destroy(){this._unbindFormResetHandler();this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.labels.attr("for",this.ids.element)}}]),B=e.widget("ui.slider",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function _create(){this._keySliding=!1;this._mouseSliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content");this._refresh();this._animateOff=!1},_refresh:function _refresh(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function _createHandles(){var t,n,o=this.options,a=this.element.find(".ui-slider-handle"),s=[];n=o.values&&o.values.length||1;if(a.length>n){a.slice(n).remove();a=a.slice(0,n)}for(t=a.length;t<n;t++){s.push("<span tabindex='0'></span>")}this.handles=a.add(e(s.join("")).appendTo(this.element));this._addClass(this.handles,"ui-slider-handle","ui-state-default");this.handle=this.handles.eq(0);this.handles.each(function(t){e(this).data("ui-slider-handle-index",t).attr("tabIndex",0)})},_createRange:function _createRange(){var t=this.options;if(t.range){if(!0===t.range){if(!t.values){t.values=[this._valueMin(),this._valueMin()]}else if(t.values.length&&2!==t.values.length){t.values=[t.values[0],t.values[0]]}else if(e.isArray(t.values)){t.values=t.values.slice(0)}}if(!this.range||!this.range.length){this.range=e("<div>").appendTo(this.element);this._addClass(this.range,"ui-slider-range")}else{this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max");this.range.css({left:"",bottom:""})}if("min"===t.range||"max"===t.range){this._addClass(this.range,"ui-slider-range-"+t.range)}}else{if(this.range){this.range.remove()}this.range=null}},_setupEvents:function _setupEvents(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function _destroy(){this.handles.remove();if(this.range){this.range.remove()}this._mouseDestroy()},_mouseCapture:function _mouseCapture(t){var i,n,a,s,r,l,d,c,p=this,u=this.options;if(u.disabled){return!1}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();i={x:t.pageX,y:t.pageY};n=this._normValueFromMouse(i);a=this._valueMax()-this._valueMin()+1;this.handles.each(function(t){var i=Math.abs(n-p.values(t));if(a>i||a===i&&(t===p._lastChangedValue||p.values(t)===u.min)){a=i;s=e(this);r=t}});l=this._start(t,r);if(!1===l){return!1}this._mouseSliding=!0;this._handleIndex=r;this._addClass(s,null,"ui-state-active");s.trigger("focus");d=s.offset();c=!e(t.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=c?{left:0,top:0}:{left:t.pageX-d.left-s.width()/2,top:t.pageY-d.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(t,r,n)}this._animateOff=!0;return!0},_mouseStart:function _mouseStart(){return!0},_mouseDrag:function _mouseDrag(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);this._slide(e,this._handleIndex,i);return!1},_mouseStop:function _mouseStop(e){this._removeClass(this.handles,null,"ui-state-active");this._mouseSliding=!1;this._stop(e,this._handleIndex);this._change(e,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=!1;return!1},_detectOrientation:function _detectOrientation(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function _normValueFromMouse(e){var t,i,n,o,a;if("horizontal"===this.orientation){t=this.elementSize.width;i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{t=this.elementSize.height;i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}n=i/t;if(1<n){n=1}if(0>n){n=0}if("vertical"===this.orientation){n=1-n}o=this._valueMax()-this._valueMin();a=this._valueMin()+n*o;return this._trimAlignValue(a)},_uiHash:function _uiHash(e,t,i){var n={handle:this.handles[e],handleIndex:e,value:t!==void 0?t:this.value()};if(this._hasMultipleValues()){n.value=t!==void 0?t:this.values(e);n.values=i||this.values()}return n},_hasMultipleValues:function _hasMultipleValues(){return this.options.values&&this.options.values.length},_start:function _start(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function _slide(e,t,i){var n,o,a=this.value(),s=this.values();if(this._hasMultipleValues()){o=this.values(t?0:1);a=this.values(t);if(2===this.options.values.length&&!0===this.options.range){i=0===t?Math.min(o,i):Math.max(o,i)}s[t]=i}if(i===a){return}n=this._trigger("slide",e,this._uiHash(t,i,s));if(!1===n){return}if(this._hasMultipleValues()){this.values(t,i)}else{this.value(i)}},_stop:function _stop(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function _change(e,t){if(!this._keySliding&&!this._mouseSliding){this._lastChangedValue=t;this._trigger("change",e,this._uiHash(t))}},value:function value(e){if(arguments.length){this.options.value=this._trimAlignValue(e);this._refreshValue();this._change(null,0);return}return this._value()},values:function values(t,n){var o,a,s;if(1<arguments.length){this.options.values[t]=this._trimAlignValue(n);this._refreshValue();this._change(null,t);return}if(arguments.length){if(e.isArray(arguments[0])){o=this.options.values;a=arguments[0];for(s=0;s<o.length;s+=1){o[s]=this._trimAlignValue(a[s]);this._change(null,s)}this._refreshValue()}else{if(this._hasMultipleValues()){return this._values(t)}else{return this.value()}}}else{return this._values()}},_setOption:function _setOption(t,n){var o,a=0;if("range"===t&&!0===this.options.range){if("min"===n){this.options.value=this._values(0);this.options.values=null}else if("max"===n){this.options.value=this._values(this.options.values.length-1);this.options.values=null}}if(e.isArray(this.options.values)){a=this.options.values.length}this._super(t,n);switch(t){case"orientation":this._detectOrientation();this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation);this._refreshValue();if(this.options.range){this._refreshRange(n)}this.handles.css("horizontal"===n?"bottom":"left","");break;case"value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case"values":this._animateOff=!0;this._refreshValue();for(o=a-1;0<=o;o--){this._change(null,o)}this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0;this._calculateNewMax();this._refreshValue();this._animateOff=!1;break;case"range":this._animateOff=!0;this._refresh();this._animateOff=!1;break;}},_setOptionDisabled:function _setOptionDisabled(e){this._super(e);this._toggleClass(null,"ui-state-disabled",!!e)},_value:function _value(){var e=this.options.value;e=this._trimAlignValue(e);return e},_values:function _values(e){var t,n,o;if(arguments.length){t=this.options.values[e];t=this._trimAlignValue(t);return t}else if(this._hasMultipleValues()){n=this.options.values.slice();for(o=0;o<n.length;o+=1){n[o]=this._trimAlignValue(n[o])}return n}else{return[]}},_trimAlignValue:function _trimAlignValue(e){if(e<=this._valueMin()){return this._valueMin()}if(e>=this._valueMax()){return this._valueMax()}var t=0<this.options.step?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;if(2*Math.abs(i)>=t){n+=0<i?t:-t}return parseFloat(n.toFixed(5))},_calculateNewMax:function _calculateNewMax(){var e=this.options.max,t=this._valueMin(),i=this.options.step,n=Math.round((e-t)/i)*i;e=n+t;if(e>this.options.max){e-=i}this.max=parseFloat(e.toFixed(this._precision()))},_precision:function _precision(){var e=this._precisionOf(this.options.step);if(null!==this.options.min){e=Math.max(e,this._precisionOf(this.options.min))}return e},_precisionOf:function _precisionOf(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_valueMin:function _valueMin(){return this.options.min},_valueMax:function _valueMax(){return this.max},_refreshRange:function _refreshRange(e){if("vertical"===e){this.range.css({width:"",left:""})}if("horizontal"===e){this.range.css({height:"",bottom:""})}},_refreshValue:function _refreshValue(){var t,n,a,s,r,l=this.options.range,d=this.options,o=this,c=!this._animateOff?d.animate:!1,p={};if(this._hasMultipleValues()){this.handles.each(function(a){n=100*((o.values(a)-o._valueMin())/(o._valueMax()-o._valueMin()));p["horizontal"===o.orientation?"left":"bottom"]=n+"%";e(this).stop(1,1)[c?"animate":"css"](p,d.animate);if(!0===o.options.range){if("horizontal"===o.orientation){if(0===a){o.range.stop(1,1)[c?"animate":"css"]({left:n+"%"},d.animate)}if(1===a){o.range[c?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:d.animate})}}else{if(0===a){o.range.stop(1,1)[c?"animate":"css"]({bottom:n+"%"},d.animate)}if(1===a){o.range[c?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:d.animate})}}}t=n})}else{a=this.value();s=this._valueMin();r=this._valueMax();n=r!==s?100*((a-s)/(r-s)):0;p["horizontal"===this.orientation?"left":"bottom"]=n+"%";this.handle.stop(1,1)[c?"animate":"css"](p,d.animate);if("min"===l&&"horizontal"===this.orientation){this.range.stop(1,1)[c?"animate":"css"]({width:n+"%"},d.animate)}if("max"===l&&"horizontal"===this.orientation){this.range.stop(1,1)[c?"animate":"css"]({width:100-n+"%"},d.animate)}if("min"===l&&"vertical"===this.orientation){this.range.stop(1,1)[c?"animate":"css"]({height:n+"%"},d.animate)}if("max"===l&&"vertical"===this.orientation){this.range.stop(1,1)[c?"animate":"css"]({height:100-n+"%"},d.animate)}}},_handleEvents:{keydown:function keydown(t){var i,n,o,a,s=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=!0;this._addClass(e(t.target),null,"ui-state-active");i=this._start(t,s);if(!1===i){return}}break;}a=this.options.step;if(this._hasMultipleValues()){n=o=this.values(s)}else{n=o=this.value()}switch(t.keyCode){case e.ui.keyCode.HOME:o=this._valueMin();break;case e.ui.keyCode.END:o=this._valueMax();break;case e.ui.keyCode.PAGE_UP:o=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(n===this._valueMax()){return}o=this._trimAlignValue(n+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n===this._valueMin()){return}o=this._trimAlignValue(n-a);break;}this._slide(t,s,o)},keyup:function keyup(t){var i=e(t.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=!1;this._stop(t,i);this._change(t,i);this._removeClass(e(t.target),null,"ui-state-active")}}}});function r(e){return function(){var t=this.element.val();e.apply(this,arguments);this._refresh();if(t!==this.element.val()){this._trigger("change")}}}e.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function _create(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);if(""!==this.value()){this._value(this.element.val(),!0)}this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function beforeunload(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function _getCreateOptions(){var t=this._super(),n=this.element;e.each(["min","max","step"],function(e,i){var o=n.attr(i);if(null!=o&&o.length){t[i]=o}});return t},_events:{keydown:function keydown(e){if(this._start(e)&&this._keydown(e)){e.preventDefault()}},keyup:"_stop",focus:function focus(){this.previous=this.element.val()},blur:function blur(e){if(this.cancelBlur){delete this.cancelBlur;return}this._stop();this._refresh();if(this.previous!==this.element.val()){this._trigger("change",e)}},mousewheel:function mousewheel(e,t){if(!t){return}if(!this.spinning&&!this._start(e)){return!1}this._spin((0<t?1:-1)*this.options.step,e);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){if(this.spinning){this._stop(e)}},100);e.preventDefault()},"mousedown .ui-spinner-button":function mousedownUiSpinnerButton(t){var n=this.element[0]===e.ui.safeActiveElement(this.document[0])?this.previous:this.element.val();function i(){var t=this.element[0]===e.ui.safeActiveElement(this.document[0]);if(!t){this.element.trigger("focus");this.previous=n;this._delay(function(){this.previous=n})}}t.preventDefault();i.call(this);this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;i.call(this)});if(!1===this._start(t)){return}this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function mouseenterUiSpinnerButton(t){if(!e(t.currentTarget).hasClass("ui-state-active")){return}if(!1===this._start(t)){return!1}this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function _enhance(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function _draw(){this._enhance();this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content");this._addClass("ui-spinner-input");this.element.attr("role","spinbutton");this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}});this._removeClass(this.buttons,"ui-corner-all");this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up");this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down");this.buttons.first().button({icon:this.options.icons.up,showLabel:!1});this.buttons.last().button({icon:this.options.icons.down,showLabel:!1});if(this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&0<this.uiSpinner.height()){this.uiSpinner.height(this.uiSpinner.height())}},_keydown:function _keydown(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:this._repeat(null,1,t);return!0;case n.DOWN:this._repeat(null,-1,t);return!0;case n.PAGE_UP:this._repeat(null,i.page,t);return!0;case n.PAGE_DOWN:this._repeat(null,-i.page,t);return!0;}return!1},_start:function _start(e){if(!this.spinning&&!1===this._trigger("start",e)){return!1}if(!this.counter){this.counter=1}this.spinning=!0;return!0},_repeat:function _repeat(e,t,n){e=e||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,t,n)},e);this._spin(t*this.options.step,n)},_spin:function _spin(e,t){var i=this.value()||0;if(!this.counter){this.counter=1}i=this._adjustValue(i+e*this._increment(this.counter));if(!this.spinning||!1!==this._trigger("spin",t,{value:i})){this._value(i);this.counter++}},_increment:function _increment(t){var i=this.options.incremental;if(i){return e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1)}return 1},_precision:function _precision(){var e=this._precisionOf(this.options.step);if(null!==this.options.min){e=Math.max(e,this._precisionOf(this.options.min))}return e},_precisionOf:function _precisionOf(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function _adjustValue(e){var t,i,n=this.options;t=null!==n.min?n.min:0;i=e-t;i=Math.round(i/n.step)*n.step;e=t+i;e=parseFloat(e.toFixed(this._precision()));if(null!==n.max&&e>n.max){return n.max}if(null!==n.min&&e<n.min){return n.min}return e},_stop:function _stop(e){if(!this.spinning){return}clearTimeout(this.timer);clearTimeout(this.mousewheelTimer);this.counter=0;this.spinning=!1;this._trigger("stop",e)},_setOption:function _setOption(e,t){var i,n,o;if("culture"===e||"numberFormat"===e){i=this._parse(this.element.val());this.options[e]=t;this.element.val(this._format(i));return}if("max"===e||"min"===e||"step"===e){if("string"==typeof t){t=this._parse(t)}}if("icons"===e){n=this.buttons.first().find(".ui-icon");this._removeClass(n,null,this.options.icons.up);this._addClass(n,null,t.up);o=this.buttons.last().find(".ui-icon");this._removeClass(o,null,this.options.icons.down);this._addClass(o,null,t.down)}this._super(e,t)},_setOptionDisabled:function _setOptionDisabled(e){this._super(e);this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!e);this.element.prop("disabled",!!e);this.buttons.button(e?"disable":"enable")},_setOptions:r(function(e){this._super(e)}),_parse:function _parse(e){if("string"==typeof e&&""!==e){e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e}return""===e||isNaN(e)?null:e},_format:function _format(e){if(""===e){return""}return window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function _refresh(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function isValid(){var e=this.value();if(null===e){return!1}return e===this._adjustValue(e)},_value:function _value(e,t){var i;if(""!==e){i=this._parse(e);if(null!==i){if(!t){i=this._adjustValue(i)}e=this._format(i)}}this.element.val(e);this._refresh()},_destroy:function _destroy(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:r(function(e){this._stepUp(e)}),_stepUp:function _stepUp(e){if(this._start()){this._spin((e||1)*this.options.step);this._stop()}},stepDown:r(function(e){this._stepDown(e)}),_stepDown:function _stepDown(e){if(this._start()){this._spin((e||1)*-this.options.step);this._stop()}},pageUp:r(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:r(function(e){this._stepDown((e||1)*this.options.page)}),value:function value(e){if(!arguments.length){return this._parse(this.element.val())}r(this._value).call(this,e)},widget:function widget(){return this.uiSpinner}});if(!1!==e.uiBackCompat){e.widget("ui.spinner",e.ui.spinner,{_enhance:function _enhance(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function _uiSpinnerHtml(){return"<span>"},_buttonHtml:function _buttonHtml(){return"<a></a><a></a>"}})}e.ui.spinner;e.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var i,n;i=t.href.replace(e,"");n=location.href.replace(e,"");try{i=decodeURIComponent(i)}catch(e){}try{n=decodeURIComponent(n)}catch(e){}return 1<t.hash.length&&i===n}}(),_create:function _create(){var t=this,i=this.options;this.running=!1;this._addClass("ui-tabs","ui-widget ui-widget-content");this._toggleClass("ui-tabs-collapsible",null,i.collapsible);this._processTabs();i.active=this._initialActive();if(e.isArray(i.disabled)){i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()}if(!1!==this.options.active&&this.anchors.length){this.active=this._findActive(i.active)}else{this.active=e()}this._refresh();if(this.active.length){this.load(i.active)}},_initialActive:function _initialActive(){var t=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);if(null===t){if(n){this.tabs.each(function(o,i){if(e(i).attr("aria-controls")===n){t=o;return!1}})}if(null===t){t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))}if(null===t||-1===t){t=this.tabs.length?0:!1}}if(!1!==t){t=this.tabs.index(this.tabs.eq(t));if(-1===t){t=i?!1:0}}if(!i&&!1===t&&this.anchors.length){t=0}return t},_getCreateEventData:function _getCreateEventData(){return{tab:this.active,panel:!this.active.length?e():this._getPanelForTab(this.active)}},_tabKeydown:function _tabKeydown(t){var i=e(e.ui.safeActiveElement(this.document[0])).closest("li"),n=this.tabs.index(i),o=!0;if(this._handlePageNav(t)){return}switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:o=!1;n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:t.preventDefault();clearTimeout(this.activating);this._activate(n);return;case e.ui.keyCode.ENTER:t.preventDefault();clearTimeout(this.activating);this._activate(n===this.options.active?!1:n);return;default:return;}t.preventDefault();clearTimeout(this.activating);n=this._focusNextTab(n,o);if(!t.ctrlKey&&!t.metaKey){i.attr("aria-selected","false");this.tabs.eq(n).attr("aria-selected","true");this.activating=this._delay(function(){this.option("active",n)},this.delay)}},_panelKeydown:function _panelKeydown(t){if(this._handlePageNav(t)){return}if(t.ctrlKey&&t.keyCode===e.ui.keyCode.UP){t.preventDefault();this.active.trigger("focus")}},_handlePageNav:function _handlePageNav(t){if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP){this._activate(this._focusNextTab(this.options.active-1,!1));return!0}if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN){this._activate(this._focusNextTab(this.options.active+1,!0));return!0}},_findNextTab:function _findNextTab(t,i){var o=this.tabs.length-1;function n(){if(t>o){t=0}if(0>t){t=o}return t}while(-1!==e.inArray(n(),this.options.disabled)){t=i?t+1:t-1}return t},_focusNextTab:function _focusNextTab(e,t){e=this._findNextTab(e,t);this.tabs.eq(e).trigger("focus");return e},_setOption:function _setOption(e,t){if("active"===e){this._activate(t);return}this._super(e,t);if("collapsible"===e){this._toggleClass("ui-tabs-collapsible",null,t);if(!t&&!1===this.options.active){this._activate(0)}}if("event"===e){this._setupEvents(t)}if("heightStyle"===e){this._setupHeightStyle(t)}},_sanitizeSelector:function _sanitizeSelector(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function refresh(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)});this._processTabs();if(!1===t.active||!this.anchors.length){t.active=!1;this.active=e()}else if(this.active.length&&!e.contains(this.tablist[0],this.active[0])){if(this.tabs.length===t.disabled.length){t.active=!1;this.active=e()}else{this._activate(this._findNextTab(Math.max(0,t.active-1),!1))}}else{t.active=this.tabs.index(this.active)}this._refresh()},_refresh:function _refresh(){this._setOptionDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});if(!this.active.length){this.tabs.eq(0).attr("tabIndex",0)}else{this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});this._addClass(this.active,"ui-tabs-active","ui-state-active");this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})}},_processTabs:function _processTabs(){var t=this,i=this.tabs,n=this.anchors,o=this.panels;this.tablist=this._getList().attr("role","tablist");this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header");this.tablist.on("mousedown"+this.eventNamespace,"> li",function(t){if(e(this).is(".ui-state-disabled")){t.preventDefault()}}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){if(e(this).closest("li").is(".ui-state-disabled")){this.blur()}});this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1});this._addClass(this.tabs,"ui-tabs-tab","ui-state-default");this.anchors=this.tabs.map(function(){return e("a",this)[0]}).attr({role:"presentation",tabIndex:-1});this._addClass(this.anchors,"ui-tabs-anchor");this.panels=e();this.anchors.each(function(n,i){var o,a,s,r=e(i).uniqueId().attr("id"),l=e(i).closest("li"),d=l.attr("aria-controls");if(t._isLocal(i)){o=i.hash;s=o.substring(1);a=t.element.find(t._sanitizeSelector(o))}else{s=l.attr("aria-controls")||e({}).uniqueId()[0].id;o="#"+s;a=t.element.find(o);if(!a.length){a=t._createPanel(s);a.insertAfter(t.panels[n-1]||t.tablist)}a.attr("aria-live","polite")}if(a.length){t.panels=t.panels.add(a)}if(d){l.data("ui-tabs-aria-controls",d)}l.attr({"aria-controls":s,"aria-labelledby":r});a.attr("aria-labelledby",r)});this.panels.attr("role","tabpanel");this._addClass(this.panels,"ui-tabs-panel","ui-widget-content");if(i){this._off(i.not(this.tabs));this._off(n.not(this.anchors));this._off(o.not(this.panels))}},_getList:function _getList(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function _createPanel(t){return e("<div>").attr("id",t).data("ui-tabs-destroy",!0)},_setOptionDisabled:function _setOptionDisabled(t){var n,o,a;if(e.isArray(t)){if(!t.length){t=!1}else if(t.length===this.anchors.length){t=!0}}for(a=0;o=this.tabs[a];a++){n=e(o);if(!0===t||-1!==e.inArray(a,t)){n.attr("aria-disabled","true");this._addClass(n,null,"ui-state-disabled")}else{n.removeAttr("aria-disabled");this._removeClass(n,null,"ui-state-disabled")}}this.options.disabled=t;this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===t)},_setupEvents:function _setupEvents(t){var i={};if(t){e.each(t.split(" "),function(e,t){i[t]="_eventHandler"})}this._off(this.anchors.add(this.tabs).add(this.panels));this._on(!0,this.anchors,{click:function click(e){e.preventDefault()}});this._on(this.anchors,i);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function _setupHeightStyle(t){var i,n=this.element.parent();if("fill"===t){i=n.height();i-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");if("absolute"===n||"fixed"===n){return}i-=t.outerHeight(!0)});this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)});this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")}else if("auto"===t){i=0;this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i)}},_eventHandler:function _eventHandler(t){var i=this.options,n=this.active,o=e(t.currentTarget),a=o.closest("li"),s=a[0]===n[0],r=s&&i.collapsible,l=r?e():this._getPanelForTab(a),d=!n.length?e():this._getPanelForTab(n),c={oldTab:n,oldPanel:d,newTab:r?e():a,newPanel:l};t.preventDefault();if(a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||s&&!i.collapsible||!1===this._trigger("beforeActivate",t,c)){return}i.active=r?!1:this.tabs.index(a);this.active=s?e():a;if(this.xhr){this.xhr.abort()}if(!d.length&&!l.length){e.error("jQuery UI Tabs: Mismatching fragment identifier.")}if(l.length){this.load(this.tabs.index(a),t)}this._toggle(t,c)},_toggle:function _toggle(t,i){var a=this,s=i.newPanel,r=i.oldPanel;this.running=!0;function n(){a.running=!1;a._trigger("activate",t,i)}function o(){a._addClass(i.newTab.closest("li"),"ui-tabs-active","ui-state-active");if(s.length&&a.options.show){a._show(s,a.options.show,n)}else{s.show();n()}}if(r.length&&this.options.hide){this._hide(r,this.options.hide,function(){a._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active");o()})}else{this._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active");r.hide();o()}r.attr("aria-hidden","true");i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});if(s.length&&r.length){i.oldTab.attr("tabIndex",-1)}else if(s.length){this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1)}s.attr("aria-hidden","false");i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function _activate(t){var i,n=this._findActive(t);if(n[0]===this.active[0]){return}if(!n.length){n=this.active}i=n.find(".ui-tabs-anchor")[0];this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop})},_findActive:function _findActive(t){return!1===t?e():this.tabs.eq(t)},_getIndex:function _getIndex(t){if("string"==typeof t){t=this.anchors.index(this.anchors.filter("[href$='"+e.ui.escapeSelector(t)+"']"))}return t},_destroy:function _destroy(){if(this.xhr){this.xhr.abort()}this.tablist.removeAttr("role").off(this.eventNamespace);this.anchors.removeAttr("role tabIndex").removeUniqueId();this.tabs.add(this.panels).each(function(){if(e.data(this,"ui-tabs-destroy")){e(this).remove()}else{e(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}});this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");if(i){t.attr("aria-controls",i).removeData("ui-tabs-aria-controls")}else{t.removeAttr("aria-controls")}});this.panels.show();if("content"!==this.options.heightStyle){this.panels.css("height","")}},enable:function enable(t){var i=this.options.disabled;if(!1===i){return}if(t===void 0){i=!1}else{t=this._getIndex(t);if(e.isArray(i)){i=e.map(i,function(e){return e!==t?e:null})}else{i=e.map(this.tabs,function(e,i){return i!==t?i:null})}}this._setOptionDisabled(i)},disable:function disable(t){var i=this.options.disabled;if(!0===i){return}if(t===void 0){i=!0}else{t=this._getIndex(t);if(-1!==e.inArray(t,i)){return}if(e.isArray(i)){i=e.merge([t],i).sort()}else{i=[t]}}this._setOptionDisabled(i)},load:function load(t,i){t=this._getIndex(t);var n=this,o=this.tabs.eq(t),a=o.find(".ui-tabs-anchor"),s=this._getPanelForTab(o),r={tab:o,panel:s},l=function(e,t){if("abort"===t){n.panels.stop(!1,!0)}n._removeClass(o,"ui-tabs-loading");s.removeAttr("aria-busy");if(e===n.xhr){delete n.xhr}};if(this._isLocal(a[0])){return}this.xhr=e.ajax(this._ajaxSettings(a,i,r));if(this.xhr&&"canceled"!==this.xhr.statusText){this._addClass(o,"ui-tabs-loading");s.attr("aria-busy","true");this.xhr.done(function(e,t,o){setTimeout(function(){s.html(e);n._trigger("load",i,r);l(o,t)},1)}).fail(function(e,t){setTimeout(function(){l(e,t)},1)})}},_ajaxSettings:function _ajaxSettings(t,i,n){var o=this;return{url:t.attr("href").replace(/#.*$/,""),beforeSend:function beforeSend(t,a){return o._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:a},n))}}},_getPanelForTab:function _getPanelForTab(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}});if(!1!==e.uiBackCompat){e.widget("ui.tabs",e.ui.tabs,{_processTabs:function _processTabs(){this._superApply(arguments);this._addClass(this.tabs,"ui-tab")}})}e.ui.tabs;e.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function content(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function _addDescribedBy(t,i){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(i);t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(n.join(" ")))},_removeDescribedBy:function _removeDescribedBy(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),o=e.inArray(i,n);if(-1!==o){n.splice(o,1)}t.removeData("ui-tooltip-id");n=e.trim(n.join(" "));if(n){t.attr("aria-describedby",n)}else{t.removeAttr("aria-describedby")}},_create:function _create(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this.disabledTitles=e([])},_setOption:function _setOption(t,i){var n=this;this._super(t,i);if("content"===t){e.each(this.tooltips,function(e,t){n._updateContent(t.element)})}},_setOptionDisabled:function _setOptionDisabled(e){this[e?"_disable":"_enable"]()},_disable:function _disable(){var t=this;e.each(this.tooltips,function(i,n){var o=e.Event("blur");o.target=o.currentTarget=n.element[0];t.close(o,!0)});this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var t=e(this);if(t.is("[title]")){return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")}}))},_enable:function _enable(){this.disabledTitles.each(function(){var t=e(this);if(t.data("ui-tooltip-title")){t.attr("title",t.data("ui-tooltip-title"))}});this.disabledTitles=e([])},open:function open(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);if(!n.length||n.data("ui-tooltip-id")){return}if(n.attr("title")){n.data("ui-tooltip-title",n.attr("title"))}n.data("ui-tooltip-open",!0);if(t&&"mouseover"===t.type){n.parents().each(function(){var t=e(this),n;if(t.data("ui-tooltip-open")){n=e.Event("blur");n.target=n.currentTarget=this;i.close(n,!0)}if(t.attr("title")){t.uniqueId();i.parents[this.id]={element:this,title:t.attr("title")};t.attr("title","")}})}this._registerCloseHandlers(t,n);this._updateContent(n,t)},_updateContent:function _updateContent(e,t){var i,n=this.options.content,o=this,a=t?t.type:null;if("string"==typeof n||n.nodeType||n.jquery){return this._open(t,e,n)}i=n.call(e[0],function(i){o._delay(function(){if(!e.data("ui-tooltip-open")){return}if(t){t.type=a}this._open(t,e,i)})});if(i){this._open(t,e,i)}},_open:function _open(t,i,n){var a,s,r,l,d=e.extend({},this.options.position);if(!n){return}a=this._find(i);if(a){a.tooltip.find(".ui-tooltip-content").html(n);return}if(i.is("[title]")){if(t&&"mouseover"===t.type){i.attr("title","")}else{i.removeAttr("title")}}a=this._tooltip(i);s=a.tooltip;this._addDescribedBy(i,s.attr("id"));s.find(".ui-tooltip-content").html(n);this.liveRegion.children().hide();l=e("<div>").html(s.find(".ui-tooltip-content").html());l.removeAttr("name").find("[name]").removeAttr("name");l.removeAttr("id").find("[id]").removeAttr("id");l.appendTo(this.liveRegion);function o(e){d.of=e;if(s.is(":hidden")){return}s.position(d)}if(this.options.track&&t&&/^mouse/.test(t.type)){this._on(this.document,{mousemove:o});o(t)}else{s.position(e.extend({of:i},this.options.position))}s.hide();this._show(s,this.options.show);if(this.options.track&&this.options.show&&this.options.show.delay){r=this.delayedShow=setInterval(function(){if(s.is(":visible")){o(d.of);clearInterval(r)}},e.fx.interval)}this._trigger("open",t,{tooltip:s})},_registerCloseHandlers:function _registerCloseHandlers(t,i){var n={keyup:function keyup(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=i[0];this.close(n,!0)}}};if(i[0]!==this.element[0]){n.remove=function(){this._removeTooltip(this._find(i).tooltip)}}if(!t||"mouseover"===t.type){n.mouseleave="close"}if(!t||"focusin"===t.type){n.focusout="close"}this._on(!0,i,n)},close:function close(t){var i,n=this,o=e(t?t.currentTarget:this.element),a=this._find(o);if(!a){o.removeData("ui-tooltip-open");return}i=a.tooltip;if(a.closing){return}clearInterval(this.delayedShow);if(o.data("ui-tooltip-title")&&!o.attr("title")){o.attr("title",o.data("ui-tooltip-title"))}this._removeDescribedBy(o);a.hiding=!0;i.stop(!0);this._hide(i,this.options.hide,function(){n._removeTooltip(e(this))});o.removeData("ui-tooltip-open");this._off(o,"mouseleave focusout keyup");if(o[0]!==this.element[0]){this._off(o,"remove")}this._off(this.document,"mousemove");if(t&&"mouseleave"===t.type){e.each(this.parents,function(t,i){e(i.element).attr("title",i.title);delete n.parents[t]})}a.closing=!0;this._trigger("close",t,{tooltip:i});if(!a.hiding){a.closing=!1}},_tooltip:function _tooltip(t){var i=e("<div>").attr("role","tooltip"),n=e("<div>").appendTo(i),o=i.uniqueId().attr("id");this._addClass(n,"ui-tooltip-content");this._addClass(i,"ui-tooltip","ui-widget ui-widget-content");i.appendTo(this._appendTo(t));return this.tooltips[o]={element:t,tooltip:i}},_find:function _find(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function _removeTooltip(e){e.remove();delete this.tooltips[e.attr("id")]},_appendTo:function _appendTo(e){var t=e.closest(".ui-front, dialog");if(!t.length){t=this.document[0].body}return t},_destroy:function _destroy(){var t=this;e.each(this.tooltips,function(i,n){var o=e.Event("blur"),a=n.element;o.target=o.currentTarget=a[0];t.close(o,!0);e("#"+i).remove();if(a.data("ui-tooltip-title")){if(!a.attr("title")){a.attr("title",a.data("ui-tooltip-title"))}a.removeData("ui-tooltip-title")}});this.liveRegion.remove()}});if(!1!==e.uiBackCompat){e.widget("ui.tooltip",e.ui.tooltip,{options:{tooltipClass:null},_tooltip:function _tooltip(){var e=this._superApply(arguments);if(this.options.tooltipClass){e.tooltip.addClass(this.options.tooltipClass)}return e}})}var Y=e.ui.tooltip,j="ui-effects-",q="ui-effects-style",K="ui-effects-animated",U=e;e.effects={effect:{}};(function(e){var o=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function parse(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function parse(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function parse(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function parse(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function parse(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],s=e.Color=function(t,i,n,o){return new e.Color.fn.parse(t,i,n,o)},r={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},l={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=s.support={},c=e("<p>")[0],p,u=e.each;c.style.cssText="background-color:rgba(1,1,1,.5)";d.rgba=-1<c.style.backgroundColor.indexOf("rgba");u(r,function(e,t){t.cache="_"+e;t.props.alpha={idx:3,type:"percent",def:1}});function t(e,t,i){var n=l[t.type]||{};if(null==e){return i||!t.def?null:t.def}e=n.floor?~~e:parseFloat(e);if(isNaN(e)){return t.def}if(n.mod){return(e+n.mod)%n.mod}return 0>e?0:n.max<e?n.max:e}function i(t){var i=s(),n=i._rgba=[];t=t.toLowerCase();u(o,function(e,o){var a,s=o.re.exec(t),l=s&&o.parse(s),d=o.space||"rgba";if(l){a=i[d](l);i[r[d].cache]=a[r[d].cache];n=i._rgba=a._rgba;return!1}});if(n.length){if("0,0,0,0"===n.join()){e.extend(n,p.transparent)}return i}return p[t]}s.fn=e.extend(s.prototype,{parse:function parse(n,o,a,l){if(n===void 0){this._rgba=[null,null,null,null];return this}if(n.jquery||n.nodeType){n=e(n).css(o);o=void 0}var d=this,c=e.type(n),g=this._rgba=[];if(o!==void 0){n=[n,o,a,l];c="array"}if("string"===c){return this.parse(i(n)||p._default)}if("array"===c){u(r.rgba.props,function(e,i){g[i.idx]=t(n[i.idx],i)});return this}if("object"===c){if(n instanceof s){u(r,function(e,t){if(n[t.cache]){d[t.cache]=n[t.cache].slice()}})}else{u(r,function(i,o){var a=o.cache;u(o.props,function(e,i){if(!d[a]&&o.to){if("alpha"===e||null==n[e]){return}d[a]=o.to(d._rgba)}d[a][i.idx]=t(n[e],i,!0)});if(d[a]&&0>e.inArray(null,d[a].slice(0,3))){d[a][3]=1;if(o.from){d._rgba=o.from(d[a])}}})}return this}},is:function(e){var t=s(e),i=!0,n=this;u(r,function(e,o){var a,s=t[o.cache];if(s){a=n[o.cache]||o.to&&o.to(n._rgba)||[];u(o.props,function(e,t){if(null!=s[t.idx]){i=s[t.idx]===a[t.idx];return i}})}return i});return i},_space:function _space(){var e=[],t=this;u(r,function(i,n){if(t[n.cache]){e.push(i)}});return e.pop()},transition:function transition(e,i){var n=s(e),o=n._space(),a=r[o],d=0===this.alpha()?s("transparent"):this,c=d[a.cache]||a.to(d._rgba),p=c.slice();n=n[a.cache];u(a.props,function(e,o){var a=o.idx,s=c[a],r=n[a],d=l[o.type]||{};if(null===r){return}if(null===s){p[a]=r}else{if(d.mod){if(r-s>d.mod/2){s+=d.mod}else if(s-r>d.mod/2){s-=d.mod}}p[a]=t((r-s)*i+s,o)}});return this[o](p)},blend:function(t){if(1===this._rgba[3]){return this}var i=this._rgba.slice(),n=i.pop(),o=s(t)._rgba;return s(e.map(i,function(e,t){return(1-n)*o[t]+n*e}))},toRgbaString:function toRgbaString(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?2<t?1:0:e});if(1===i[3]){i.pop();t="rgb("}return t+i.join()+")"},toHslaString:function toHslaString(){var t="hsla(",i=e.map(this.hsla(),function(e,t){if(null==e){e=2<t?1:0}if(t&&3>t){e=Math.round(100*e)+"%"}return e});if(1===i[3]){i.pop();t="hsl("}return t+i.join()+")"},toHexString:function toHexString(t){var i=this._rgba.slice(),n=i.pop();if(t){i.push(~~(255*n))}return"#"+e.map(i,function(e){e=(e||0).toString(16);return 1===e.length?"0"+e:e}).join("")},toString:function toString(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});s.fn.parse.prototype=s.fn;function n(e,t,i){i=(i+1)%1;if(1>6*i){return e+6*((t-e)*i)}if(1>2*i){return t}if(2>3*i){return e+6*((t-e)*(2/3-i))}return e}r.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2]){return[null,null,null,e[3]]}var t=e[0]/255,i=e[1]/255,n=e[2]/255,o=e[3],a=Math.max(t,i,n),r=Math.min(t,i,n),d=a-r,c=a+r,p=.5*c,l,u;if(r===a){l=0}else if(t===a){l=60*(i-n)/d+360}else if(i===a){l=60*(n-t)/d+120}else{l=60*(t-i)/d+240}if(0==d){u=0}else if(.5>=p){u=d/c}else{u=d/(2-c)}return[Math.round(l)%360,u,p,null==o?1:o]};r.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2]){return[null,null,null,e[3]]}var t=e[0]/360,i=e[1],o=e[2],s=e[3],a=.5>=o?o*(1+i):o+i-o*i,r=2*o-a;return[Math.round(255*n(r,a,t+1/3)),Math.round(255*n(r,a,t)),Math.round(255*n(r,a,t-1/3)),s]};u(r,function(i,n){var o=n.props,a=n.cache,r=n.to,l=n.from;s.fn[i]=function(i){if(r&&!this[a]){this[a]=r(this._rgba)}if(i===void 0){return this[a].slice()}var n,d=e.type(i),c="array"===d||"object"===d?i:arguments,p=this[a].slice();u(o,function(e,i){var n=c["object"===d?e:i.idx];if(null==n){n=p[i.idx]}p[i.idx]=t(n,i)});if(l){n=s(l(p));n[a]=p;return n}else{return s(p)}};u(o,function(t,n){if(s.fn[t]){return}s.fn[t]=function(o){var a=e.type(o),s="alpha"===t?this._hsla?"hsla":"rgba":i,r=this[s](),l=r[n.idx],d;if("undefined"===a){return l}if("function"===a){o=o.call(this,l);a=e.type(o)}if(null==o&&n.empty){return this}if("string"===a){d=/^([\-+])=\s*(\d+\.?\d*)/.exec(o);if(d){o=l+parseFloat(d[2])*("+"===d[1]?1:-1)}}r[n.idx]=o;return this[s](r)}})});s.hook=function(t){var n=t.split(" ");u(n,function(t,n){e.cssHooks[n]={set:function set(t,o){var a,r,l="";if("transparent"!==o&&("string"!==e.type(o)||(a=i(o)))){o=s(a||o);if(!d.rgba&&1!==o._rgba[3]){r="backgroundColor"===n?t.parentNode:t;while((""===l||"transparent"===l)&&r&&r.style){try{l=e.css(r,"backgroundColor");r=r.parentNode}catch(t){}}o=o.blend(l&&"transparent"!==l?l:"_default")}o=o.toRgbaString()}try{t.style[n]=o}catch(t){}}};e.fx.step[n]=function(t){if(!t.colorInit){t.start=s(t.elem,n);t.end=s(t.end);t.colorInit=!0}e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})};s.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");e.cssHooks.borderColor={expand:function expand(e){var t={};u(["Top","Right","Bottom","Left"],function(n,i){t["border"+i+"Color"]=e});return t}};p=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(U);(function(){var n=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){if("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr){U.style(e.elem,i,e.end);e.setAttr=!0}}});function t(t){var i,n,o=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(o&&o.length&&o[0]&&o[o[0]]){n=o.length;while(n--){i=o[n];if("string"==typeof o[i]){a[e.camelCase(i)]=o[i]}}}else{for(i in o){if("string"==typeof o[i]){a[i]=o[i]}}}return a}function i(t,i){var n={},a,s;for(a in i){s=i[a];if(t[a]!==s){if(!o[a]){if(e.fx.step[a]||!isNaN(parseFloat(s))){n[a]=s}}}}return n}if(!e.fn.addBack){e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}e.effects.animateClass=function(a,s,r,l){var d=e.speed(s,r,l);return this.queue(function(){var o=e(this),s=o.attr("class")||"",r,l=d.children?o.find("*").addBack():o;l=l.map(function(){var i=e(this);return{el:i,start:t(this)}});r=function(){e.each(n,function(e,t){if(a[t]){o[t+"Class"](a[t])}})};r();l=l.map(function(){this.end=t(this.el[0]);this.diff=i(this.start,this.end);return this});o.attr("class",s);l=l.map(function(){var t=this,i=e.Deferred(),n=e.extend({},d,{queue:!1,complete:function complete(){i.resolve(t)}});this.el.animate(this.diff,n);return i.promise()});e.when.apply(e,l.get()).done(function(){r();e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})});d.complete.call(o[0])})})};e.fn.extend({addClass:function(t){return function(i,n,o,a){return n?e.effects.animateClass.call(this,{add:i},n,o,a):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,n,o,a){return 1<arguments.length?e.effects.animateClass.call(this,{remove:i},n,o,a):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,n,o,a,s){if("boolean"==typeof n||n===void 0){if(!o){return t.apply(this,arguments)}else{return e.effects.animateClass.call(this,n?{add:i}:{remove:i},o,a,s)}}else{return e.effects.animateClass.call(this,{toggle:i},n,o,a)}}}(e.fn.toggleClass),switchClass:function switchClass(t,i,n,o,a){return e.effects.animateClass.call(this,{add:i,remove:t},n,o,a)}})})();(function(){if(e.expr&&e.expr.filters&&e.expr.filters.animated){e.expr.filters.animated=function(t){return function(i){return!!e(i).data(K)||t(i)}}(e.expr.filters.animated)}if(!1!==e.uiBackCompat){e.extend(e.effects,{save:function save(e,t){var n=0,o=t.length;for(;n<o;n++){if(null!==t[n]){e.data(j+t[n],e[0].style[t[n]])}}},restore:function restore(e,t){var n,o=0,a=t.length;for(;o<a;o++){if(null!==t[o]){n=e.data(j+t[o]);e.css(t[o],n)}}},setMode:function setMode(e,t){if("toggle"===t){t=e.is(":hidden")?"show":"hide"}return t},createWrapper:function createWrapper(t){if(t.parent().is(".ui-effects-wrapper")){return t.parent()}var n={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},o=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),a={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(t){s=document.body}t.wrap(o);if(t[0]===s||e.contains(t[0],s)){e(s).trigger("focus")}o=t.parent();if("static"===t.css("position")){o.css({position:"relative"});t.css({position:"relative"})}else{e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")});e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i);if(isNaN(parseInt(n[i],10))){n[i]="auto"}});t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}t.css(a);return o.css(n).show()},removeWrapper:function removeWrapper(t){var i=document.activeElement;if(t.parent().is(".ui-effects-wrapper")){t.parent().replaceWith(t);if(t[0]===i||e.contains(t[0],i)){e(i).trigger("focus")}}return t}})}e.extend(e.effects,{version:"1.12.1",define:function define(t,i,n){if(!n){n=i;i="effect"}e.effects.effect[t]=n;e.effects.effect[t].mode=i;return n},scaledDimensions:function scaledDimensions(e,t,i){if(0===t){return{height:0,width:0,outerHeight:0,outerWidth:0}}var n="horizontal"!==i?(t||100)/100:1,o="vertical"!==i?(t||100)/100:1;return{height:e.height()*o,width:e.width()*n,outerHeight:e.outerHeight()*o,outerWidth:e.outerWidth()*n}},clipToBox:function clipToBox(e){return{width:e.clip.right-e.clip.left,height:e.clip.bottom-e.clip.top,left:e.clip.left,top:e.clip.top}},unshift:function unshift(e,t,i){var n=e.queue();if(1<t){n.splice.apply(n,[1,0].concat(n.splice(t,i)))}e.dequeue()},saveStyle:function saveStyle(e){e.data(q,e[0].style.cssText)},restoreStyle:function restoreStyle(e){e[0].style.cssText=e.data(q)||"";e.removeData(q)},mode:function mode(e,t){var i=e.is(":hidden");if("toggle"===t){t=i?"show":"hide"}if(i?"hide"===t:"show"===t){t="none"}return t},getBaseline:function getBaseline(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height;}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width;}return{x:n,y:i}},createPlaceholder:function createPlaceholder(t){var i,n=t.css("position"),o=t.position();t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight());if(/^(static|relative)/.test(n)){n="absolute";i=e("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder");t.data(j+"placeholder",i)}t.css({position:n,left:o.left,top:o.top});return i},removePlaceholder:function removePlaceholder(e){var t=j+"placeholder",i=e.data(t);if(i){i.remove();e.removeData(t)}},cleanUp:function cleanUp(t){e.effects.restoreStyle(t);e.effects.removePlaceholder(t)},setTransition:function setTransition(t,i,n,o){o=o||{};e.each(i,function(e,i){var a=t.cssUnit(i);if(0<a[0]){o[i]=a[0]*n+a[1]}});return o}});function t(t,i,n,o){if(e.isPlainObject(t)){i=t;t=t.effect}t={effect:t};if(null==i){i={}}if(e.isFunction(i)){o=i;n=null;i={}}if("number"==typeof i||e.fx.speeds[i]){o=n;n=i;i={}}if(e.isFunction(n)){o=n;n=null}if(i){e.extend(t,i)}n=n||i.duration;t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default;t.complete=o||i.complete;return t}function i(t){if(!t||"number"==typeof t||e.fx.speeds[t]){return!0}if("string"==typeof t&&!e.effects.effect[t]){return!0}if(e.isFunction(t)){return!0}if("object"===_typeof(t)&&!t.effect){return!0}return!1}e.fn.extend({effect:function(){var n=t.apply(this,arguments),o=e.effects.effect[n.effect],a=o.mode,s=n.queue,r=s||"fx",l=n.complete,d=n.mode,c=[],p=function(t){var i=e(this),n=e.effects.mode(i,d)||a;i.data(K,!0);c.push(n);if(a&&("show"===n||n===a&&"hide"===n)){i.show()}if(!a||"none"!==n){e.effects.saveStyle(i)}if(e.isFunction(t)){t()}};if(e.fx.off||!o){if(d){return this[d](n.duration,l)}else{return this.each(function(){if(l){l.call(this)}})}}function i(t){var r=e(this);function i(){r.removeData(K);e.effects.cleanUp(r);if("hide"===n.mode){r.hide()}s()}function s(){if(e.isFunction(l)){l.call(r[0])}if(e.isFunction(t)){t()}}n.mode=c.shift();if(!1!==e.uiBackCompat&&!a){if(r.is(":hidden")?"hide"===d:"show"===d){r[d]();s()}else{o.call(r[0],n,s)}}else{if("none"===n.mode){r[d]();s()}else{o.call(r[0],n,i)}}}return!1===s?this.each(p).each(i):this.queue(r,p).queue(r,i)},show:function(e){return function(n){if(i(n)){return e.apply(this,arguments)}else{var o=t.apply(this,arguments);o.mode="show";return this.effect.call(this,o)}}}(e.fn.show),hide:function(e){return function(n){if(i(n)){return e.apply(this,arguments)}else{var o=t.apply(this,arguments);o.mode="hide";return this.effect.call(this,o)}}}(e.fn.hide),toggle:function(e){return function(n){if(i(n)||"boolean"==typeof n){return e.apply(this,arguments)}else{var o=t.apply(this,arguments);o.mode="toggle";return this.effect.call(this,o)}}}(e.fn.toggle),cssUnit:function cssUnit(t){var n=this.css(t),o=[];e.each(["em","px","%","pt"],function(e,t){if(0<n.indexOf(t)){o=[parseFloat(n),t]}});return o},cssClip:function cssClip(e){if(e){return this.css("clip","rect("+e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px)")}return n(this.css("clip"),this)},transfer:function(t,i){var n=e(this),o=e(t.to),a="fixed"===o.css("position"),s=e("body"),r=a?s.scrollTop():0,l=a?s.scrollLeft():0,d=o.offset(),c={top:d.top-r,left:d.left-l,height:o.innerHeight(),width:o.innerWidth()},p=n.offset(),u=e("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(t.className).css({top:p.top-r,left:p.left-l,height:n.innerHeight(),width:n.innerWidth(),position:a?"fixed":"absolute"}).animate(c,t.duration,t.easing,function(){u.remove();if(e.isFunction(i)){i()}})}});function n(e,t){var i=t.outerWidth(),n=t.outerHeight(),o=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(e)||["",0,i,n,0];return{top:parseFloat(o[1])||0,right:"auto"===o[2]?i:parseFloat(o[2]),bottom:"auto"===o[3]?n:parseFloat(o[3]),left:parseFloat(o[4])||0}}e.fx.step.clip=function(t){if(!t.clipInit){t.start=e(t.elem).cssClip();if("string"==typeof t.end){t.end=n(t.end,t.elem)}t.clipInit=!0}e(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})}})();(function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}});e.extend(t,{Sine:function Sine(e){return 1-Math.cos(e*Math.PI/2)},Circ:function Circ(e){return 1-Math.sqrt(1-e*e)},Elastic:function Elastic(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function Back(e){return e*e*(3*e-2)},Bounce:function Bounce(e){var t,i=4;while(e<((t=Math.pow(2,--i))-1)/11){}return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}});e.each(t,function(t,i){e.easing["easeIn"+t]=i;e.easing["easeOut"+t]=function(e){return 1-i(1-e)};e.easing["easeInOut"+t]=function(e){return .5>e?i(2*e)/2:1-i(-2*e+2)/2}})})();var V=e.effects,X=e.effects.define("blind","hide",function(t,i){var n={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},o=e(this),a=t.direction||"up",s=o.cssClip(),r={clip:e.extend({},s)},l=e.effects.createPlaceholder(o);r.clip[n[a][0]]=r.clip[n[a][1]];if("show"===t.mode){o.cssClip(r.clip);if(l){l.css(e.effects.clipToBox(r))}r.clip=s}if(l){l.animate(e.effects.clipToBox(r),t.duration,t.easing)}o.animate(r,{queue:!1,duration:t.duration,easing:t.easing,complete:i})}),G=e.effects.define("bounce",function(t,n){var o,a,s,r=e(this),l=t.mode,d="hide"===l,c="show"===l,p=t.direction||"up",u=t.distance,g=t.times||5,h=2*g+(c||d?1:0),m=t.duration/h,f=t.easing,_="up"===p||"down"===p?"top":"left",b="up"===p||"left"===p,v=0,y=r.queue().length;e.effects.createPlaceholder(r);s=r.css(_);if(!u){u=r["top"===_?"outerHeight":"outerWidth"]()/3}if(c){a={opacity:1};a[_]=s;r.css("opacity",0).css(_,b?2*-u:2*u).animate(a,m,f)}if(d){u=u/Math.pow(2,g-1)}a={};a[_]=s;for(;v<g;v++){o={};o[_]=(b?"-=":"+=")+u;r.animate(o,m,f).animate(a,m,f);u=d?2*u:u/2}if(d){o={opacity:0};o[_]=(b?"-=":"+=")+u;r.animate(o,m,f)}r.queue(n);e.effects.unshift(r,y,h+1)}),$=e.effects.define("clip","hide",function(t,i){var n,o={},a=e(this),s=t.direction||"vertical",r="both"===s,l=r||"horizontal"===s,d=r||"vertical"===s;n=a.cssClip();o.clip={top:d?(n.bottom-n.top)/2:n.top,right:l?(n.right-n.left)/2:n.right,bottom:d?(n.bottom-n.top)/2:n.bottom,left:l?(n.right-n.left)/2:n.left};e.effects.createPlaceholder(a);if("show"===t.mode){a.cssClip(o.clip);o.clip=n}a.animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:i})}),Q=e.effects.define("drop","hide",function(t,i){var n,o=e(this),a=t.mode,s=t.direction||"left",r="up"===s||"down"===s?"top":"left",l="up"===s||"left"===s?"-=":"+=",d="+="==l?"-=":"+=",c={opacity:0};e.effects.createPlaceholder(o);n=t.distance||o["top"===r?"outerHeight":"outerWidth"](!0)/2;c[r]=l+n;if("show"===a){o.css(c);c[r]=d+n;c.opacity=1}o.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:i})}),J=e.effects.define("explode","hide",function(t,n){var s,r,l,d,c,p,u=t.pieces?Math.round(Math.sqrt(t.pieces)):3,g=u,h=e(this),m=t.mode,f="show"===m,_=h.show().css("visibility","hidden").offset(),b=Math.ceil(h.outerWidth()/g),v=Math.ceil(h.outerHeight()/u),y=[];function o(){y.push(this);if(y.length===u*g){a()}}for(s=0;s<u;s++){d=_.top+s*v;p=s-(u-1)/2;for(r=0;r<g;r++){l=_.left+r*b;c=r-(g-1)/2;h.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-r*b,top:-s*v}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:b,height:v,left:l+(f?c*b:0),top:d+(f?p*v:0),opacity:f?0:1}).animate({left:l+(f?0:c*b),top:d+(f?0:p*v),opacity:f?1:0},t.duration||500,t.easing,o)}}function a(){h.css({visibility:"visible"});e(y).remove();n()}}),Z=e.effects.define("fade","toggle",function(t,i){var n="show"===t.mode;e(this).css("opacity",n?0:1).animate({opacity:n?1:0},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}),ee=e.effects.define("fold","hide",function(t,i){var n=e(this),o=t.mode,a=t.size||15,s=/([0-9]+)%/.exec(a),r=!!t.horizFirst,l=r?["right","bottom"]:["bottom","right"],d=t.duration/2,c=e.effects.createPlaceholder(n),p=n.cssClip(),u={clip:e.extend({},p)},g={clip:e.extend({},p)},h=[p[l[0]],p[l[1]]],m=n.queue().length;if(s){a=parseInt(s[1],10)/100*h["hide"===o?0:1]}u.clip[l[0]]=a;g.clip[l[0]]=a;g.clip[l[1]]=0;if("show"===o){n.cssClip(g.clip);if(c){c.css(e.effects.clipToBox(g))}g.clip=p}n.queue(function(i){if(c){c.animate(e.effects.clipToBox(u),d,t.easing).animate(e.effects.clipToBox(g),d,t.easing)}i()}).animate(u,d,t.easing).animate(g,d,t.easing).queue(i);e.effects.unshift(n,m,4)}),te=e.effects.define("highlight","show",function(t,i){var n=e(this),o={backgroundColor:n.css("backgroundColor")};if("hide"===t.mode){o.opacity=0}e.effects.saveStyle(n);n.css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:i})}),ie=e.effects.define("size",function(t,i){var n,o,a,s=e(this),r=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],c=t.mode,p="effect"!==c,u=t.scale||"both",g=t.origin||["middle","center"],h=s.css("position"),m=s.position(),f=e.effects.scaledDimensions(s),_=t.from||f,b=t.to||e.effects.scaledDimensions(s,0);e.effects.createPlaceholder(s);if("show"===c){a=_;_=b;b=a}o={from:{y:_.height/f.height,x:_.width/f.width},to:{y:b.height/f.height,x:b.width/f.width}};if("box"===u||"both"===u){if(o.from.y!==o.to.y){_=e.effects.setTransition(s,l,o.from.y,_);b=e.effects.setTransition(s,l,o.to.y,b)}if(o.from.x!==o.to.x){_=e.effects.setTransition(s,d,o.from.x,_);b=e.effects.setTransition(s,d,o.to.x,b)}}if("content"===u||"both"===u){if(o.from.y!==o.to.y){_=e.effects.setTransition(s,r,o.from.y,_);b=e.effects.setTransition(s,r,o.to.y,b)}}if(g){n=e.effects.getBaseline(g,f);_.top=(f.outerHeight-_.outerHeight)*n.y+m.top;_.left=(f.outerWidth-_.outerWidth)*n.x+m.left;b.top=(f.outerHeight-b.outerHeight)*n.y+m.top;b.left=(f.outerWidth-b.outerWidth)*n.x+m.left}s.css(_);if("content"===u||"both"===u){l=l.concat(["marginTop","marginBottom"]).concat(r);d=d.concat(["marginLeft","marginRight"]);s.find("*[width]").each(function(){var i=e(this),n=e.effects.scaledDimensions(i),a={height:n.height*o.from.y,width:n.width*o.from.x,outerHeight:n.outerHeight*o.from.y,outerWidth:n.outerWidth*o.from.x},s={height:n.height*o.to.y,width:n.width*o.to.x,outerHeight:n.height*o.to.y,outerWidth:n.width*o.to.x};if(o.from.y!==o.to.y){a=e.effects.setTransition(i,l,o.from.y,a);s=e.effects.setTransition(i,l,o.to.y,s)}if(o.from.x!==o.to.x){a=e.effects.setTransition(i,d,o.from.x,a);s=e.effects.setTransition(i,d,o.to.x,s)}if(p){e.effects.saveStyle(i)}i.css(a);i.animate(s,t.duration,t.easing,function(){if(p){e.effects.restoreStyle(i)}})})}s.animate(b,{queue:!1,duration:t.duration,easing:t.easing,complete:function complete(){var t=s.offset();if(0===b.opacity){s.css("opacity",_.opacity)}if(!p){s.css("position","static"===h?"relative":h).offset(t);e.effects.saveStyle(s)}i()}})}),ne=e.effects.define("scale",function(t,i){var n=e(this),o=t.mode,a=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"effect"!==o?0:100),s=e.extend(!0,{from:e.effects.scaledDimensions(n),to:e.effects.scaledDimensions(n,a,t.direction||"both"),origin:t.origin||["middle","center"]},t);if(t.fade){s.from.opacity=1;s.to.opacity=0}e.effects.effect.size.call(this,s,i)}),oe=e.effects.define("puff","hide",function(t,i){var n=e.extend(!0,{},t,{fade:!0,percent:parseInt(t.percent,10)||150});e.effects.effect.scale.call(this,n,i)}),ae=e.effects.define("pulsate","show",function(t,n){var o=e(this),a=t.mode,s="show"===a,r=2*(t.times||5)+(s||"hide"===a?1:0),l=t.duration/r,d=0,c=1,p=o.queue().length;if(s||!o.is(":visible")){o.css("opacity",0).show();d=1}for(;c<r;c++){o.animate({opacity:d},l,t.easing);d=1-d}o.animate({opacity:d},l,t.easing);o.queue(n);e.effects.unshift(o,p,r+1)}),se=e.effects.define("shake",function(t,n){var o=1,a=e(this),s=t.direction||"left",r=t.distance||20,l=t.times||3,d=2*l+1,c=Math.round(t.duration/d),p="up"===s||"down"===s?"top":"left",u="up"===s||"left"===s,g={},h={},m={},f=a.queue().length;e.effects.createPlaceholder(a);g[p]=(u?"-=":"+=")+r;h[p]=(u?"+=":"-=")+2*r;m[p]=(u?"-=":"+=")+2*r;a.animate(g,c,t.easing);for(;o<l;o++){a.animate(h,c,t.easing).animate(m,c,t.easing)}a.animate(h,c,t.easing).animate(g,c/2,t.easing).queue(n);e.effects.unshift(a,f,d+1)}),re=e.effects.define("slide","show",function(t,i){var n,o,a=e(this),s={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},r=t.mode,l=t.direction||"left",d="up"===l||"down"===l?"top":"left",c=t.distance||a["top"===d?"outerHeight":"outerWidth"](!0),p={};e.effects.createPlaceholder(a);n=a.cssClip();o=a.position()[d];p[d]=("up"===l||"left"===l?-1:1)*c+o;p.clip=a.cssClip();p.clip[s[l][1]]=p.clip[s[l][0]];if("show"===r){a.cssClip(p.clip);a.css(d,p[d]);p.clip=n;p[d]=o}a.animate(p,{queue:!1,duration:t.duration,easing:t.easing,complete:i})}),V;if(!1!==e.uiBackCompat){V=e.effects.define("transfer",function(t,i){e(this).transfer(t,i)})}});
define ("block_products_catalog/bxslider",[],function(){return{init:function init(s,t,n){"use strict";s.easing.jswing=s.easing.swing;s.extend(s.easing,{def:"easeOutQuad",swing:function swing(e,n,t,o,a){return s.easing[s.easing.def](e,n,t,o,a)},easeInQuad:function easeInQuad(e,s,n,o,a){return o*(s/=a)*s+n},easeOutQuad:function easeOutQuad(e,s,n,o,a){return-o*(s/=a)*(s-2)+n},easeInOutQuad:function easeInOutQuad(e,s,n,o,a){if(1>(s/=a/2))return o/2*s*s+n;return-o/2*(--s*(s-2)-1)+n},easeInCubic:function easeInCubic(e,s,n,o,a){return o*(s/=a)*s*s+n},easeOutCubic:function easeOutCubic(e,s,n,o,a){return o*((s=s/a-1)*s*s+1)+n},easeInOutCubic:function easeInOutCubic(e,s,n,o,a){if(1>(s/=a/2))return o/2*s*s*s+n;return o/2*((s-=2)*s*s+2)+n},easeInQuart:function easeInQuart(e,s,n,o,a){return o*(s/=a)*s*s*s+n},easeOutQuart:function easeOutQuart(e,s,n,o,a){return-o*((s=s/a-1)*s*s*s-1)+n},easeInOutQuart:function easeInOutQuart(e,s,n,o,a){if(1>(s/=a/2))return o/2*s*s*s*s+n;return-o/2*((s-=2)*s*s*s-2)+n},easeInQuint:function easeInQuint(e,s,n,o,a){return o*(s/=a)*s*s*s*s+n},easeOutQuint:function easeOutQuint(e,s,n,o,a){return o*((s=s/a-1)*s*s*s*s+1)+n},easeInOutQuint:function easeInOutQuint(e,s,n,o,a){if(1>(s/=a/2))return o/2*s*s*s*s*s+n;return o/2*((s-=2)*s*s*s*s+2)+n},easeInSine:function easeInSine(e,s,t,n,o){return-n*Math.cos(s/o*(Math.PI/2))+n+t},easeOutSine:function easeOutSine(e,s,t,n,o){return n*Math.sin(s/o*(Math.PI/2))+t},easeInOutSine:function easeInOutSine(e,s,t,n,o){return-n/2*(Math.cos(Math.PI*s/o)-1)+t},easeInExpo:function easeInExpo(e,s,t,n,o){return 0==s?t:n*Math.pow(2,10*(s/o-1))+t},easeOutExpo:function easeOutExpo(e,s,t,n,o){return s==o?t+n:n*(-Math.pow(2,-10*s/o)+1)+t},easeInOutExpo:function easeInOutExpo(e,s,n,o,a){if(0==s)return n;if(s==a)return n+o;if(1>(s/=a/2))return o/2*Math.pow(2,10*(s-1))+n;return o/2*(-Math.pow(2,-10*--s)+2)+n},easeInCirc:function easeInCirc(e,s,n,o,a){return-o*(Math.sqrt(1-(s/=a)*s)-1)+n},easeOutCirc:function easeOutCirc(e,s,n,o,a){return o*Math.sqrt(1-(s=s/a-1)*s)+n},easeInOutCirc:function easeInOutCirc(e,s,n,o,a){if(1>(s/=a/2))return-o/2*(Math.sqrt(1-s*s)-1)+n;return o/2*(Math.sqrt(1-(s-=2)*s)+1)+n},easeInElastic:function easeInElastic(e,n,o,r,l){var d=1.70158,g=0,c=r;if(0==n)return o;if(1==(n/=l))return o+r;if(!g)g=.3*l;if(c<Math.abs(r)){c=r;var d=g/4}else var d=g/(2*Math.PI)*Math.asin(r/c);return-(c*Math.pow(2,10*(n-=1))*Math.sin((n*l-d)*(2*Math.PI)/g))+o},easeOutElastic:function easeOutElastic(e,n,o,r,l){var d=1.70158,g=0,c=r;if(0==n)return o;if(1==(n/=l))return o+r;if(!g)g=.3*l;if(c<Math.abs(r)){c=r;var d=g/4}else var d=g/(2*Math.PI)*Math.asin(r/c);return c*Math.pow(2,-10*n)*Math.sin((n*l-d)*(2*Math.PI)/g)+r+o},easeInOutElastic:function easeInOutElastic(e,n,o,r,l){var d=1.70158,g=0,c=r;if(0==n)return o;if(2==(n/=l/2))return o+r;if(!g)g=l*(1.5*.3);if(c<Math.abs(r)){c=r;var d=g/4}else var d=g/(2*Math.PI)*Math.asin(r/c);if(1>n)return-.5*(c*Math.pow(2,10*(n-=1))*Math.sin((n*l-d)*(2*Math.PI)/g))+o;return .5*(c*Math.pow(2,-10*(n-=1))*Math.sin((n*l-d)*(2*Math.PI)/g))+r+o},easeInBack:function easeInBack(e,n,o,a,r,d){if(d==void 0)d=1.70158;return a*(n/=r)*n*((d+1)*n-d)+o},easeOutBack:function easeOutBack(e,n,o,a,r,d){if(d==void 0)d=1.70158;return a*((n=n/r-1)*n*((d+1)*n+d)+1)+o},easeInOutBack:function easeInOutBack(e,n,o,a,r,d){if(d==void 0)d=1.70158;if(1>(n/=r/2))return a/2*(n*n*(((d*=1.525)+1)*n-d))+o;return a/2*((n-=2)*n*(((d*=1.525)+1)*n+d)+2)+o},easeInBounce:function easeInBounce(e,n,t,o,a){return o-s.easing.easeOutBounce(e,a-n,0,o,a)+t},easeOutBounce:function easeOutBounce(e,s,n,o,a){if((s/=a)<1/2.75){return o*(7.5625*s*s)+n}else if(s<2/2.75){return o*(7.5625*(s-=1.5/2.75)*s+.75)+n}else if(s<2.5/2.75){return o*(7.5625*(s-=2.25/2.75)*s+.9375)+n}else{return o*(7.5625*(s-=2.625/2.75)*s+.984375)+n}},easeInOutBounce:function easeInOutBounce(e,n,t,o,a){if(n<a/2)return .5*s.easing.easeInBounce(e,2*n,0,o,a)+t;return .5*s.easing.easeOutBounce(e,2*n-a,0,o,a)+.5*o+t}});s.fn.fitVids=function(e){var n={customSelector:null},o=t.createElement("div"),a=t.getElementsByTagName("base")[0]||t.getElementsByTagName("script")[0];o.className="fit-vids-style";o.innerHTML="&shy;<style>               .fluid-width-video-wrapper {                 width: 100%;                              position: relative;                       padding: 0;                            }                                                                                   .fluid-width-video-wrapper iframe,        .fluid-width-video-wrapper object,        .fluid-width-video-wrapper embed {           position: absolute;                       top: 0;                                   left: 0;                                  width: 100%;                              height: 100%;                          }                                       </style>";a.parentNode.insertBefore(o,a);if(e){s.extend(n,e)}return this.each(function(){var e=["iframe[src*='player.vimeo.com']","iframe[src*='www.youtube.com']","iframe[src*='www.kickstarter.com']","object","embed"];if(n.customSelector){e.push(n.customSelector)}var t=s(this).find(e.join(","));t.each(function(){var e=s(this);if("embed"===this.tagName.toLowerCase()&&e.parent("object").length||e.parent(".fluid-width-video-wrapper").length){return}var t="object"===this.tagName.toLowerCase()||e.attr("height")&&!isNaN(parseInt(e.attr("height"),10))?parseInt(e.attr("height"),10):e.height(),n=!isNaN(parseInt(e.attr("width"),10))?parseInt(e.attr("width"),10):e.width();if(!e.attr("id")){var o="fitvid"+Math.floor(999999*Math.random());e.attr("id",o)}e.wrap("<div class=\"fluid-width-video-wrapper\"></div>").parent(".fluid-width-video-wrapper").css("padding-top",100*(t/n)+"%");e.removeAttr("height").removeAttr("width")})})};var o={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,wrapperClass:"bx-wrapper",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,ariaLive:!0,ariaHidden:!0,keyboardEnabled:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",stopAutoOnClick:!1,autoHover:!1,autoDelay:0,autoSlideForOnePage:!1,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,shrinkItems:!1,onSliderLoad:function onSliderLoad(){return!0},onSlideBefore:function onSlideBefore(){return!0},onSlideAfter:function onSlideAfter(){return!0},onSlideNext:function onSlideNext(){return!0},onSlidePrev:function onSlidePrev(){return!0},onSliderResize:function onSliderResize(){return!0},onAutoChange:function onAutoChange(){return!0}};s.fn.bxSlider=function(e){if(0===this.length){return this}if(1<this.length){this.each(function(){s(this).bxSlider(e)});return this}var a={},r=this,d=s(n).width(),l=s(n).height();if(s(r).data("bxSlider")){return}var g=function(){if(s(r).data("bxSlider")){return}a.settings=s.extend({},o,e);a.settings.slideWidth=parseInt(a.settings.slideWidth);a.children=r.children(a.settings.slideSelector);if(a.children.length<a.settings.minSlides){a.settings.minSlides=a.children.length}if(a.children.length<a.settings.maxSlides){a.settings.maxSlides=a.children.length}if(a.settings.randomStart){a.settings.startSlide=Math.floor(Math.random()*a.children.length)}a.active={index:a.settings.startSlide};a.carousel=1<a.settings.minSlides||1<a.settings.maxSlides?!0:!1;if(a.carousel){a.settings.preloadImages="all"}a.minThreshold=a.settings.minSlides*a.settings.slideWidth+(a.settings.minSlides-1)*a.settings.slideMargin;a.maxThreshold=a.settings.maxSlides*a.settings.slideWidth+(a.settings.maxSlides-1)*a.settings.slideMargin;a.working=!1;a.controls={};a.interval=null;a.animProp="vertical"===a.settings.mode?"top":"left";a.usingCSS=a.settings.useCSS&&"fade"!==a.settings.mode&&function(){for(var e=t.createElement("div"),s=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"],n=0;n<s.length;n++){if(e.style[s[n]]!==void 0){a.cssPrefix=s[n].replace("Perspective","").toLowerCase();a.animProp="-"+a.cssPrefix+"-transform";return!0}}return!1}();if("vertical"===a.settings.mode){a.settings.maxSlides=a.settings.minSlides}r.data("origStyle",r.attr("style"));r.children(a.settings.slideSelector).each(function(){s(this).data("origStyle",s(this).attr("style"))});c()},c=function(){var e=a.children.eq(a.settings.startSlide);r.wrap("<div class=\""+a.settings.wrapperClass+"\"><div class=\"bx-viewport\"></div></div>");a.viewport=r.parent();if(a.settings.ariaLive&&!a.settings.ticker){a.viewport.attr("aria-live","polite")}a.loader=s("<div class=\"bx-loading\" />");a.viewport.prepend(a.loader);r.css({width:"horizontal"===a.settings.mode?1e3*a.children.length+215+"%":"auto",position:"relative"});if(a.usingCSS&&a.settings.easing){r.css("-"+a.cssPrefix+"-transition-timing-function",a.settings.easing)}else if(!a.settings.easing){a.settings.easing="swing"}a.viewport.css({width:"100%",overflow:"hidden",position:"relative"});a.viewport.parent().css({maxWidth:v()});a.children.css({float:"horizontal"===a.settings.mode?"left":"none",listStyle:"none",position:"relative"});a.children.css("width",m());if("horizontal"===a.settings.mode&&0<a.settings.slideMargin){a.children.css("marginRight",a.settings.slideMargin)}if("vertical"===a.settings.mode&&0<a.settings.slideMargin){a.children.css("marginBottom",a.settings.slideMargin)}if("fade"===a.settings.mode){a.children.css({position:"absolute",zIndex:0,display:"none"});a.children.eq(a.settings.startSlide).css({zIndex:a.settings.slideZIndex,display:"block"})}a.controls.el=s("<div class=\"bx-controls\" />");if(a.settings.captions){T()}a.active.last=a.settings.startSlide===S()-1;if(a.settings.video){r.fitVids()}if("all"===a.settings.preloadImages||a.settings.ticker){e=a.children}if(!a.settings.ticker){if(a.settings.controls){E()}if(a.settings.auto&&a.settings.autoControls){k()}if(a.settings.pager){P()}if(a.settings.controls||a.settings.autoControls||a.settings.pager){a.viewport.after(a.controls.el)}}else{a.settings.pager=!1}p(e,h)},p=function(e,t){var n=e.find("img:not([src=\"\"]), iframe").length,o=0;if(0===n){t();return}e.find("img:not([src=\"\"]), iframe").each(function(){s(this).one("load error",function(){if(++o===n){t()}}).each(function(){if(this.complete||""==this.src){s(this).trigger("load")}})})},h=function(){if(a.settings.infiniteLoop&&"fade"!==a.settings.mode&&!a.settings.ticker){var e="vertical"===a.settings.mode?a.settings.minSlides:a.settings.maxSlides,o=a.children.slice(0,e).clone(!0).addClass("bx-clone"),d=a.children.slice(-e).clone(!0).addClass("bx-clone");if(a.settings.ariaHidden){o.attr("aria-hidden",!0);d.attr("aria-hidden",!0)}r.append(o).prepend(d)}a.loader.remove();b();if("vertical"===a.settings.mode){a.settings.adaptiveHeight=!0}a.viewport.height(u());r.redrawSlider();a.settings.onSliderLoad.call(r,a.active.index);a.initialized=!0;if(a.settings.responsive){s(n).bind("resize",U)}if(a.settings.auto&&a.settings.autoStart&&(1<S()||a.settings.autoSlideForOnePage)){B()}if(a.settings.ticker){N()}if(a.settings.pager){A(a.settings.startSlide)}if(a.settings.controls){D()}if(a.settings.touchEnabled&&!a.settings.ticker){j()}if(a.settings.keyboardEnabled&&!a.settings.ticker){s(t).keydown(Y)}},u=function(){var e=0,t=s();if("vertical"!==a.settings.mode&&!a.settings.adaptiveHeight){t=a.children}else{if(!a.carousel){t=a.children.eq(a.active.index)}else{var n=1===a.settings.moveSlides?a.active.index:a.active.index*f();t=a.children.eq(n);for(i=1;i<=a.settings.maxSlides-1;i++){if(n+i>=a.children.length){t=t.add(a.children.eq(i-1))}else{t=t.add(a.children.eq(n+i))}}}}if("vertical"===a.settings.mode){t.each(function(){e+=s(this).outerHeight()});if(0<a.settings.slideMargin){e+=a.settings.slideMargin*(a.settings.minSlides-1)}}else{e=Math.max.apply(Math,t.map(function(){return s(this).outerHeight(!1)}).get())}if("border-box"===a.viewport.css("box-sizing")){e+=parseFloat(a.viewport.css("padding-top"))+parseFloat(a.viewport.css("padding-bottom"))+parseFloat(a.viewport.css("border-top-width"))+parseFloat(a.viewport.css("border-bottom-width"))}else if("padding-box"===a.viewport.css("box-sizing")){e+=parseFloat(a.viewport.css("padding-top"))+parseFloat(a.viewport.css("padding-bottom"))}return e},v=function(){var e="100%";if(0<a.settings.slideWidth){if("horizontal"===a.settings.mode){e=a.settings.maxSlides*a.settings.slideWidth+(a.settings.maxSlides-1)*a.settings.slideMargin}else{e=a.settings.slideWidth}}return e},m=function(){var e=a.settings.slideWidth,t=a.viewport.width();if(0===a.settings.slideWidth||a.settings.slideWidth>t&&!a.carousel||"vertical"===a.settings.mode){e=t}else if(1<a.settings.maxSlides&&"horizontal"===a.settings.mode){if(t>a.maxThreshold){return e}else if(t<a.minThreshold){e=(t-a.settings.slideMargin*(a.settings.minSlides-1))/a.settings.minSlides}else if(a.settings.shrinkItems){e=Math.floor((t+a.settings.slideMargin)/Math.ceil((t+a.settings.slideMargin)/(e+a.settings.slideMargin))-a.settings.slideMargin)}}return e},x=function(){var e=1,t=null;if("horizontal"===a.settings.mode&&0<a.settings.slideWidth){if(a.viewport.width()<a.minThreshold){e=a.settings.minSlides}else if(a.viewport.width()>a.maxThreshold){e=a.settings.maxSlides}else{t=a.children.first().width()+a.settings.slideMargin;e=Math.floor((a.viewport.width()+a.settings.slideMargin)/t)||1}}else if("vertical"===a.settings.mode){e=a.settings.minSlides}return e},S=function(){var e=0,t=0,s=0;if(0<a.settings.moveSlides){if(a.settings.infiniteLoop){e=Math.ceil(a.children.length/f())}else{while(t<a.children.length){++e;t=s+x();s+=a.settings.moveSlides<=x()?a.settings.moveSlides:x()}return s}}else{e=Math.ceil(a.children.length/x())}return e},f=function(){if(0<a.settings.moveSlides&&a.settings.moveSlides<=x()){return a.settings.moveSlides}return x()},b=function(){var e,t,s;if(a.children.length>a.settings.maxSlides&&a.active.last&&!a.settings.infiniteLoop){if("horizontal"===a.settings.mode){t=a.children.last();e=t.position();w(-(e.left-(a.viewport.width()-t.outerWidth())),"reset",0)}else if("vertical"===a.settings.mode){s=a.children.length-a.settings.minSlides;e=a.children.eq(s).position();w(-e.top,"reset",0)}}else{e=a.children.eq(a.active.index*f()).position();if(a.active.index===S()-1){a.active.last=!0}if(e!==void 0){if("horizontal"===a.settings.mode){w(-e.left,"reset",0)}else if("vertical"===a.settings.mode){w(-e.top,"reset",0)}}}},w=function(e,t,n,o){var d,l;if(a.usingCSS){l="vertical"===a.settings.mode?"translate3d(0, "+e+"px, 0)":"translate3d("+e+"px, 0, 0)";r.css("-"+a.cssPrefix+"-transition-duration",n/1e3+"s");if("slide"===t){r.css(a.animProp,l);if(0!==n){r.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){if(!s(t.target).is(r)){return}r.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd");q()})}else{q()}}else if("reset"===t){r.css(a.animProp,l)}else if("ticker"===t){r.css("-"+a.cssPrefix+"-transition-timing-function","linear");r.css(a.animProp,l);if(0!==n){r.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){if(!s(t.target).is(r)){return}r.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd");w(o.resetValue,"reset",0);Q()})}else{w(o.resetValue,"reset",0);Q()}}}else{d={};d[a.animProp]=e;if("slide"===t){r.animate(d,n,a.settings.easing,function(){q()})}else if("reset"===t){r.css(a.animProp,e)}else if("ticker"===t){r.animate(d,n,"linear",function(){w(o.resetValue,"reset",0);Q()})}}},C=function(){for(var e="",t="",n=S(),o=0;o<n;o++){t="";if(a.settings.buildPager&&s.isFunction(a.settings.buildPager)||a.settings.pagerCustom){t=a.settings.buildPager(o);a.pagerEl.addClass("bx-custom-pager")}else{t=o+1;a.pagerEl.addClass("bx-default-pager")}e+="<div class=\"bx-pager-item\"><a href=\"\" data-slide-index=\""+o+"\" class=\"bx-pager-link\">"+t+"</a></div>"}a.pagerEl.html(e)},P=function(){if(!a.settings.pagerCustom){a.pagerEl=s("<div class=\"bx-pager\" />");if(a.settings.pagerSelector){s(a.settings.pagerSelector).html(a.pagerEl)}else{a.controls.el.addClass("bx-has-pager").append(a.pagerEl)}C()}else{a.pagerEl=s(a.settings.pagerCustom)}a.pagerEl.on("click touchend","a",M)},E=function(){a.controls.next=s("<a class=\"bx-next\" href=\"\" title=\""+a.settings.nextText+"\"><i class=\"fa fa-angle-right\"></i></a>");a.controls.prev=s("<a class=\"bx-prev\" href=\"\" title=\""+a.settings.prevText+"\"><i class=\"fa fa-angle-left\"></i></a>");a.controls.next.bind("click touchend",I);a.controls.prev.bind("click touchend",y);if(a.settings.nextSelector){s(a.settings.nextSelector).append(a.controls.next)}if(a.settings.prevSelector){s(a.settings.prevSelector).append(a.controls.prev)}if(!a.settings.nextSelector&&!a.settings.prevSelector){a.controls.directionEl=s("<div class=\"bx-controls-direction\" />");a.controls.directionEl.append(a.controls.prev).append(a.controls.next);a.controls.el.addClass("bx-has-controls-direction").append(a.controls.directionEl)}},k=function(){a.controls.start=s("<div class=\"bx-controls-auto-item\"><a class=\"bx-start\" href=\"\">"+a.settings.startText+"</a></div>");a.controls.stop=s("<div class=\"bx-controls-auto-item\"><a class=\"bx-stop\" href=\"\">"+a.settings.stopText+"</a></div>");a.controls.autoEl=s("<div class=\"bx-controls-auto\" />");a.controls.autoEl.on("click",".bx-start",z);a.controls.autoEl.on("click",".bx-stop",O);if(a.settings.autoControlsCombine){a.controls.autoEl.append(a.controls.start)}else{a.controls.autoEl.append(a.controls.start).append(a.controls.stop)}if(a.settings.autoControlsSelector){s(a.settings.autoControlsSelector).html(a.controls.autoEl)}else{a.controls.el.addClass("bx-has-controls-auto").append(a.controls.autoEl)}H(a.settings.autoStart?"stop":"start")},T=function(){a.children.each(function(){var e=s(this).find("img:first").attr("title");if(e!==void 0&&(""+e).length){s(this).append("<div class=\"bx-caption\"><span>"+e+"</span></div>")}})},I=function(t){t.preventDefault();if(a.controls.el.hasClass("disabled")){return}if(a.settings.auto&&a.settings.stopAutoOnClick){r.stopAuto()}r.goToNextSlide()},y=function(t){t.preventDefault();if(a.controls.el.hasClass("disabled")){return}if(a.settings.auto&&a.settings.stopAutoOnClick){r.stopAuto()}r.goToPrevSlide()},z=function(t){r.startAuto();t.preventDefault()},O=function(t){r.stopAuto();t.preventDefault()},M=function(t){var e,n;t.preventDefault();if(a.controls.el.hasClass("disabled")){return}if(a.settings.auto&&a.settings.stopAutoOnClick){r.stopAuto()}e=s(t.currentTarget);if(e.attr("data-slide-index")!==void 0){n=parseInt(e.attr("data-slide-index"));if(n!==a.active.index){r.goToSlide(n)}}},A=function(e){var t=a.children.length;if("short"===a.settings.pagerType){if(1<a.settings.maxSlides){t=Math.ceil(a.children.length/a.settings.maxSlides)}a.pagerEl.html(e+1+a.settings.pagerShortSeparator+t);return}a.pagerEl.find("a").removeClass("active");a.pagerEl.each(function(t,n){s(n).find("a").eq(e).addClass("active")})},q=function(){if(a.settings.infiniteLoop){var e="";if(0===a.active.index){e=a.children.eq(0).position()}else if(a.active.index===S()-1&&a.carousel){e=a.children.eq((S()-1)*f()).position()}else if(a.active.index===a.children.length-1){e=a.children.eq(a.children.length-1).position()}if(e){if("horizontal"===a.settings.mode){w(-e.left,"reset",0)}else if("vertical"===a.settings.mode){w(-e.top,"reset",0)}}}a.working=!1;a.settings.onSlideAfter.call(r,a.children.eq(a.active.index),a.oldIndex,a.active.index)},H=function(e){if(a.settings.autoControlsCombine){a.controls.autoEl.html(a.controls[e])}else{a.controls.autoEl.find("a").removeClass("active");a.controls.autoEl.find("a:not(.bx-"+e+")").addClass("active")}},D=function(){if(1===S()){a.controls.prev.addClass("disabled");a.controls.next.addClass("disabled")}else if(!a.settings.infiniteLoop&&a.settings.hideControlOnEnd){if(0===a.active.index){a.controls.prev.addClass("disabled");a.controls.next.removeClass("disabled")}else if(a.active.index===S()-1){a.controls.next.addClass("disabled");a.controls.prev.removeClass("disabled")}else{a.controls.prev.removeClass("disabled");a.controls.next.removeClass("disabled")}}},L=function(){r.startAuto()},W=function(){r.stopAuto()},B=function(){if(0<a.settings.autoDelay){setTimeout(r.startAuto,a.settings.autoDelay)}else{r.startAuto();s(n).focus(L).blur(W)}if(a.settings.autoHover){r.hover(function(){if(a.interval){r.stopAuto(!0);a.autoPaused=!0}},function(){if(a.autoPaused){r.startAuto(!0);a.autoPaused=null}})}},N=function(){var e=0,t,n,o,d,l,g,c,p;if("next"===a.settings.autoDirection){r.append(a.children.clone().addClass("bx-clone"))}else{r.prepend(a.children.clone().addClass("bx-clone"));t=a.children.first().position();e="horizontal"===a.settings.mode?-t.left:-t.top}w(e,"reset",0);a.settings.pager=!1;a.settings.controls=!1;a.settings.autoControls=!1;if(a.settings.tickerHover){if(a.usingCSS){d="horizontal"===a.settings.mode?4:5;a.viewport.hover(function(){n=r.css("-"+a.cssPrefix+"-transform");o=parseFloat(n.split(",")[d]);w(o,"reset",0)},function(){p=0;a.children.each(function(){p+="horizontal"===a.settings.mode?s(this).outerWidth(!0):s(this).outerHeight(!0)});l=a.settings.speed/p;g="horizontal"===a.settings.mode?"left":"top";c=l*(p-Math.abs(parseInt(o)));Q(c)})}else{a.viewport.hover(function(){r.stop()},function(){p=0;a.children.each(function(){p+="horizontal"===a.settings.mode?s(this).outerWidth(!0):s(this).outerHeight(!0)});l=a.settings.speed/p;g="horizontal"===a.settings.mode?"left":"top";c=l*(p-Math.abs(parseInt(r.css(g))));Q(c)})}}Q()},Q=function(e){var t=e?e:a.settings.speed,s={left:0,top:0},n={left:0,top:0},o,d,l;if("next"===a.settings.autoDirection){s=r.find(".bx-clone").first().position()}else{n=a.children.first().position()}o="horizontal"===a.settings.mode?-s.left:-s.top;d="horizontal"===a.settings.mode?-n.left:-n.top;l={resetValue:d};w(o,"ticker",t,l)},V=function(e){var t=s(n),o={top:t.scrollTop(),left:t.scrollLeft()},a=e.offset();o.right=o.left+t.width();o.bottom=o.top+t.height();a.right=a.left+e.outerWidth();a.bottom=a.top+e.outerHeight();return!(o.right<a.left||o.left>a.right||o.bottom<a.top||o.top>a.bottom)},Y=function(s){var e=t.activeElement.tagName.toLowerCase(),n=new RegExp(e,["i"]),o=n.exec("input|textarea");if(null==o&&V(r)){if(39===s.keyCode){I(s);return!1}else if(37===s.keyCode){y(s);return!1}}},j=function(){a.touch={start:{x:0,y:0},end:{x:0,y:0}};a.viewport.bind("touchstart MSPointerDown pointerdown",X);a.viewport.on("click",".bxslider a",function(t){if(a.viewport.hasClass("click-disabled")){t.preventDefault();a.viewport.removeClass("click-disabled")}})},X=function(t){a.controls.el.addClass("disabled");if(a.working){t.preventDefault();a.controls.el.removeClass("disabled")}else{a.touch.originalPos=r.position();var e=t.originalEvent,s="undefined"!=typeof e.changedTouches?e.changedTouches:[e];a.touch.start.x=s[0].pageX;a.touch.start.y=s[0].pageY;if(a.viewport.get(0).setPointerCapture){a.pointerId=e.pointerId;a.viewport.get(0).setPointerCapture(a.pointerId)}a.viewport.bind("touchmove MSPointerMove pointermove",R);a.viewport.bind("touchend MSPointerUp pointerup",F);a.viewport.bind("MSPointerCancel pointercancel",Z)}},Z=function(){w(a.touch.originalPos.left,"reset",0);a.controls.el.removeClass("disabled");a.viewport.unbind("MSPointerCancel pointercancel",Z);a.viewport.unbind("touchmove MSPointerMove pointermove",R);a.viewport.unbind("touchend MSPointerUp pointerup",F);if(a.viewport.get(0).releasePointerCapture){a.viewport.get(0).releasePointerCapture(a.pointerId)}},R=function(t){var e=t.originalEvent,s="undefined"!=typeof e.changedTouches?e.changedTouches:[e],n=Math.abs(s[0].pageX-a.touch.start.x),o=Math.abs(s[0].pageY-a.touch.start.y),r=0,d=0;if(3*n>o&&a.settings.preventDefaultSwipeX){t.preventDefault()}else if(3*o>n&&a.settings.preventDefaultSwipeY){t.preventDefault()}if("fade"!==a.settings.mode&&a.settings.oneToOneTouch){if("horizontal"===a.settings.mode){d=s[0].pageX-a.touch.start.x;r=a.touch.originalPos.left+d}else{d=s[0].pageY-a.touch.start.y;r=a.touch.originalPos.top+d}w(r,"reset",0)}},F=function(t){a.viewport.unbind("touchmove MSPointerMove pointermove",R);a.controls.el.removeClass("disabled");var e=t.originalEvent,s="undefined"!=typeof e.changedTouches?e.changedTouches:[e],n=0,o=0;a.touch.end.x=s[0].pageX;a.touch.end.y=s[0].pageY;if("fade"===a.settings.mode){o=Math.abs(a.touch.start.x-a.touch.end.x);if(o>=a.settings.swipeThreshold){if(a.touch.start.x>a.touch.end.x){r.goToNextSlide()}else{r.goToPrevSlide()}r.stopAuto()}}else{if("horizontal"===a.settings.mode){o=a.touch.end.x-a.touch.start.x;n=a.touch.originalPos.left}else{o=a.touch.end.y-a.touch.start.y;n=a.touch.originalPos.top}if(!a.settings.infiniteLoop&&(0===a.active.index&&0<o||a.active.last&&0>o)){w(n,"reset",200)}else{if(Math.abs(o)>=a.settings.swipeThreshold){if(0>o){r.goToNextSlide()}else{r.goToPrevSlide()}r.stopAuto()}else{w(n,"reset",200)}}}a.viewport.unbind("touchend MSPointerUp pointerup",F);if(a.viewport.get(0).releasePointerCapture){a.viewport.get(0).releasePointerCapture(a.pointerId)}},U=function(){if(!a.initialized){return}if(a.working){n.setTimeout(U,10)}else{var e=s(n).width(),t=s(n).height();if(d!==e||l!==t){d=e;l=t;r.redrawSlider();a.settings.onSliderResize.call(r,a.active.index)}}},_=function(e){var t=x();if(a.settings.ariaHidden&&!a.settings.ticker){a.children.attr("aria-hidden","true");a.children.slice(e,e+t).attr("aria-hidden","false")}},J=function(e){if(0>e){if(a.settings.infiniteLoop){return S()-1}else{return a.active.index}}else if(e>=S()){if(a.settings.infiniteLoop){return 0}else{return a.active.index}}else{return e}};r.goToSlide=function(e,t){var n=!0,o=0,d={left:0,top:0},l=null,g,c,p,h;a.oldIndex=a.active.index;a.active.index=J(e);if(a.working||a.active.index===a.oldIndex){return}a.working=!0;n=a.settings.onSlideBefore.call(r,a.children.eq(a.active.index),a.oldIndex,a.active.index);if("undefined"!=typeof n&&!n){a.active.index=a.oldIndex;a.working=!1;return}if("next"===t){if(!a.settings.onSlideNext.call(r,a.children.eq(a.active.index),a.oldIndex,a.active.index)){n=!1}}else if("prev"===t){if(!a.settings.onSlidePrev.call(r,a.children.eq(a.active.index),a.oldIndex,a.active.index)){n=!1}}a.active.last=a.active.index>=S()-1;if(a.settings.pager||a.settings.pagerCustom){A(a.active.index)}if(a.settings.controls){D()}if("fade"===a.settings.mode){if(a.settings.adaptiveHeight&&a.viewport.height()!==u()){a.viewport.animate({height:u()},a.settings.adaptiveHeightSpeed)}a.children.filter(":visible").fadeOut(a.settings.speed).css({zIndex:0});a.children.eq(a.active.index).css("zIndex",a.settings.slideZIndex+1).fadeIn(a.settings.speed,function(){s(this).css("zIndex",a.settings.slideZIndex);q()})}else{if(a.settings.adaptiveHeight&&a.viewport.height()!==u()){a.viewport.animate({height:u()},a.settings.adaptiveHeightSpeed)}if(!a.settings.infiniteLoop&&a.carousel&&a.active.last){if("horizontal"===a.settings.mode){l=a.children.eq(a.children.length-1);d=l.position();o=a.viewport.width()-l.outerWidth()}else{g=a.children.length-a.settings.minSlides;d=a.children.eq(g).position()}}else if(a.carousel&&a.active.last&&"prev"===t){c=1===a.settings.moveSlides?a.settings.maxSlides-f():(S()-1)*f()-(a.children.length-a.settings.maxSlides);l=r.children(".bx-clone").eq(c);d=l.position()}else if("next"===t&&0===a.active.index){d=r.find("> .bx-clone").eq(a.settings.maxSlides).position();a.active.last=!1}else if(0<=e){h=e*parseInt(f());d=a.children.eq(h).position()}if("undefined"!=typeof d){p="horizontal"===a.settings.mode?-(d.left-o):-d.top;w(p,"slide",a.settings.speed)}a.working=!1}if(a.settings.ariaHidden){_(a.active.index*f())}};r.goToNextSlide=function(){if(!a.settings.infiniteLoop&&a.active.last){return}if(!0==a.working){return}var e=parseInt(a.active.index)+1;r.goToSlide(e,"next")};r.goToPrevSlide=function(){if(!a.settings.infiniteLoop&&0===a.active.index){return}if(!0==a.working){return}var e=parseInt(a.active.index)-1;r.goToSlide(e,"prev")};r.startAuto=function(e){if(a.interval){return}a.interval=setInterval(function(){if("next"===a.settings.autoDirection){r.goToNextSlide()}else{r.goToPrevSlide()}},a.settings.pause);a.settings.onAutoChange.call(r,!0);if(a.settings.autoControls&&!0!==e){H("stop")}};r.stopAuto=function(e){if(!a.interval){return}clearInterval(a.interval);a.interval=null;a.settings.onAutoChange.call(r,!1);if(a.settings.autoControls&&!0!==e){H("start")}};r.getCurrentSlide=function(){return a.active.index};r.getCurrentSlideElement=function(){return a.children.eq(a.active.index)};r.getSlideElement=function(e){return a.children.eq(e)};r.getSlideCount=function(){return a.children.length};r.isWorking=function(){return a.working};r.redrawSlider=function(){a.children.add(r.find(".bx-clone")).outerWidth(m());a.viewport.css("height",u());if(!a.settings.ticker){b()}if(a.active.last){a.active.index=S()-1}if(a.active.index>=S()){a.active.last=!0}if(a.settings.pager&&!a.settings.pagerCustom){C();A(a.active.index)}if(a.settings.ariaHidden){_(a.active.index*f())}};r.destroySlider=function(){if(!a.initialized){return}a.initialized=!1;s(".bx-clone",this).remove();a.children.each(function(){if(s(this).data("origStyle")!==void 0){s(this).attr("style",s(this).data("origStyle"))}else{s(this).removeAttr("style")}});if(s(this).data("origStyle")!==void 0){this.attr("style",s(this).data("origStyle"))}else{s(this).removeAttr("style")}s(this).unwrap().unwrap();if(a.controls.el){a.controls.el.remove()}if(a.controls.next){a.controls.next.remove()}if(a.controls.prev){a.controls.prev.remove()}if(a.pagerEl&&a.settings.controls&&!a.settings.pagerCustom){a.pagerEl.remove()}s(".bx-caption",this).remove();if(a.controls.autoEl){a.controls.autoEl.remove()}clearInterval(a.interval);if(a.settings.responsive){s(n).unbind("resize",U)}if(a.settings.keyboardEnabled){s(t).unbind("keydown",Y)}s(this).removeData("bxSlider");s(n).off("blur",W).off("focus",L)};r.reloadSlider=function(t){if(t!==void 0){e=t}r.destroySlider();g();s(r).data("bxSlider",this)};g();s(r).data("bxSlider",this);return this}}}});
define ("block_recentlyaccessedcourses/main",["jquery","core/custom_interaction_events","core/notification","core/pubsub","core/paged_content_paging_bar","core/templates","core_course/events","core_course/repository"],function(a,b,c,d,e,f,g,h){var i={BLOCK_CONTAINER:"[data-region=\"recentlyaccessedcourses\"]",CARD_CONTAINER:"[data-region=\"card-deck\"]",COURSE_IS_FAVOURITE:"[data-region=\"is-favourite\"]",CONTENT:"[data-region=\"view-content\"]",EMPTY_MESSAGE:"[data-region=\"empty-message\"]",LOADING_PLACEHOLDER:"[data-region=\"loading-placeholder\"]",PAGING_BAR:"[data-region=\"paging-bar\"]",PAGING_BAR_NEXT:"[data-control=\"next\"]",PAGING_BAR_PREVIOUS:"[data-control=\"previous\"]"},j=!1,k=[],l=null,m=null,n=0,o=1,p=function(a){a.find(i.EMPTY_MESSAGE).removeClass("hidden");a.find(i.LOADING_PLACEHOLDER).addClass("hidden");a.find(i.CONTENT).addClass("hidden")},q=function(a){a.find(i.CONTENT).removeClass("hidden");a.find(i.EMPTY_MESSAGE).addClass("hidden");a.find(i.LOADING_PLACEHOLDER).addClass("hidden")},r=function(a){var b=a.find(i.PAGING_BAR);b.css("opacity",1);b.css("visibility","visible");b.attr("aria-hidden","false")},s=function(a){var b=a.find(i.PAGING_BAR);b.css("opacity",0);b.css("visibility","hidden");b.attr("aria-hidden","true")},t=function(a,b){k.forEach(function(a){if(a.attr("data-course-id")==b){a.find(i.COURSE_IS_FAVOURITE).removeClass("hidden")}})},u=function(a,b){k.forEach(function(a){if(a.attr("data-course-id")==b){a.find(i.COURSE_IS_FAVOURITE).addClass("hidden")}})},v=function(b){var d=a(i.BLOCK_CONTAINER).data("displaycoursecategory"),e=b.map(function(a){a.showcoursecategory=d;return f.render("block_recentlyaccessedcourses/course-card",a)});return a.when.apply(null,e).then(function(){var b=[];e.forEach(function(d){d.then(function(c){b.push(a(c))}).catch(c.exception)});return b})},w=function(a){return h.getLastAccessedCourses(a,10).then(function(a){return v(a)})},x=function(a){var b=a.find(i.CONTENT).find(i.CARD_CONTAINER),c=parseFloat(a.css("width")),d=k.length,f=0;if(!m){b.html(k[0]);m=k[0].outerWidth(!0)}o=Math.floor(c/m);if(n+o<d){f=n}else{var g=n+o-d;f=n-g;f=0<=f?f:0}var h=k.slice(f,f+o),j=h.reduce(function(a,b){return a+b.attr("data-course-id")},"");if(k.length>h.length){b.addClass("justify-content-center");b.removeClass("justify-content-start")}else{b.removeClass("justify-content-center");b.addClass("justify-content-start")}if(l!=j){var p=a.find(e.rootSelector);b.html(h);l=j;if(o>=k.length){s(a)}else{r(a);if(0===n){e.disablePreviousControlButtons(p)}else{e.enablePreviousControlButtons(p)}if(n+o>=k.length){e.disableNextControlButtons(p)}else{e.enableNextControlButtons(p)}}}},y=function(c){var e=null,f=!1;d.subscribe(g.favourited,function(a){t(c,a)});d.subscribe(g.unfavorited,function(a){u(c,a)});d.subscribe("nav-drawer-toggle-start",function(){if(!j||!k.length||f){return}f=!0;var a=0,b=function(){setTimeout(function(){x(c);a++;if(5>a&&f){b()}},100)};b(c)});d.subscribe("nav-drawer-toggle-end",function(){f=!1});a(window).on("resize",function(){if(!j||!k.length){return}if(!e){e=setTimeout(function(){e=null;x(c)},66)}});b.define(c,[b.events.activate]);c.on(b.events.activate,i.PAGING_BAR_NEXT,function(b,d){var e=a(b.target).closest(i.PAGING_BAR_NEXT);if(!e.hasClass("disabled")){n=n+o;x(c)}d.originalEvent.preventDefault()});c.on(b.events.activate,i.PAGING_BAR_PREVIOUS,function(b,d){var e=a(b.target).closest(i.PAGING_BAR_PREVIOUS);if(!e.hasClass("disabled")){n=n-o;n=0>n?0:n;x(c)}d.originalEvent.preventDefault()})};return{init:function init(b,d){d=a(d);y(d);w(b).then(function(a){k=a;j=!0;if(k.length){q(d);x(d)}else{p(d)}}).catch(c.exception)}}});
define ("block_recentlyaccesseditems/repository",["core/ajax"],function(a){return{getRecentItems:function getRecentItems(b){var c={};if("undefined"!=typeof b){c.limit=b}return a.call([{methodname:"block_recentlyaccesseditems_get_recent_items",args:c}])[0]}}});
define ("block_recentlyaccesseditems/main",["jquery","block_recentlyaccesseditems/repository","core/templates","core/notification"],function(a,b,c,d){var e={CARDDECK_CONTAINER:"[data-region=\"recentlyaccesseditems-view\"]",CARDDECK:"[data-region=\"recentlyaccesseditems-view-content\"]"},f=function(a){return b.getRecentItems(a)},g=function(a,b){if(0<b.length){return c.render("block_recentlyaccesseditems/view-cards",{items:b})}else{var d=a.attr("data-noitemsimgurl");return c.render("block_recentlyaccesseditems/no-items",{noitemsimgurl:d})}};return{init:function init(b){b=a(b);var h=b.find(e.CARDDECK_CONTAINER),i=b.find(e.CARDDECK),j=f(9);j.then(function(a){var b=g(h,a);b.then(function(a,b){return c.replaceNodeContents(i,a,b)}).catch(d.exception);return j}).catch(d.exception)}}});
define('block_reports/detect_flash', ["jquery","core/ajax","core/str","core/templates"],function(a,b,c,d){return{init:function(){var b=navigator.plugins.namedItem("Shockwave Flash");if(!b){var e=c.get_string("enableflashdescription","block_reports");a.when(e).done(function(b){d.render("block_reports/notification_collapsible",{type:"info",msg:b,helpurl:"",extraclasses:"flash-description",expanded:!0,extraattributes:""}).then(function(b){a("#user-notifications").append(b),a(".flash-description button.close").click(function(){a(".flash-description").hide()})})})}}}});
define ("block_settings/settingsblock",["jquery","core/tree"],function(a,b){return{init:function init(a,c){var d=new b(".block_settings .block_tree");if(c){var e=d.treeRoot.find("#"+c),f=e.children("a").first();f.replaceWith("<span tabindex=\"0\">"+f.html()+"</span>")}d.finishExpandingGroup=function(c){b.prototype.finishExpandingGroup.call(this,c);Y.use("moodle-core-event",function(){Y.Global.fire(M.core.globalEvents.BLOCK_CONTENT_UPDATED,{instanceid:a})})};d.collapseGroup=function(c){b.prototype.collapseGroup.call(this,c);Y.use("moodle-core-event",function(){Y.Global.fire(M.core.globalEvents.BLOCK_CONTENT_UPDATED,{instanceid:a})})}}}});
define ("block_starredcourses/repository",["jquery","core/ajax","core/notification"],function(a,b,c){return{getStarredCourses:function getStarredCourses(a){var d=b.call([{methodname:"block_starredcourses_get_starred_courses",args:a}])[0];d.fail(c.exception);return d}}});
define ("block_starredcourses/main",["jquery","core/notification","block_starredcourses/repository","core/pubsub","core/templates","core_course/events"],function(a,b,c,d,e,f){var g={BLOCK_CONTAINER:"[data-region=\"starred-courses\"]",STARRED_COURSES_REGION_VIEW:"[data-region=\"starred-courses-view\"]",STARRED_COURSES_REGION:"[data-region=\"starred-courses-view-content\"]"},h=function(a,b){if(0<b.length){return e.render("core_course/view-cards",{courses:b})}else{var c=a.find(g.STARRED_COURSES_REGION_VIEW).attr("data-nocoursesimg");return e.render("block_starredcourses/no-courses",{nocoursesimg:c})}},i=function(d){var f=d.find(g.STARRED_COURSES_REGION);return c.getStarredCourses({limit:0,offset:0}).then(function(b){var c=a(g.BLOCK_CONTAINER).data("displaycoursecategory");b=b.map(function(a){a.showcoursecategory=c;return a});return h(d,b)}).then(function(a,b){return e.replaceNodeContents(f,a,b)}).catch(b.exception)},j=function(a){d.subscribe(f.favourited,function(){i(a)});d.subscribe(f.unfavorited,function(){i(a)})};return{init:function init(b){b=a(b);j(b);i(b)}}});
define ("block_timeline/view_dates",["jquery","core/str","block_timeline/event_list","core/pubsub","core/paged_content_events"],function(a,b,c,d,e){var f={EVENT_LIST_CONTAINER:"[data-region=\"event-list-container\"]"},g=[5,10,25],h=function(a){var b=parseInt(a.data("limit"),10),c=!1,d=g.map(function(a){if(b==a){c=!0}return{value:a,active:b==a}});if(!c){d[0].active=!0}return d},i=function(b,c){var f=c+e.SET_ITEMS_PER_PAGE_LIMIT;d.subscribe(f,function(c){a(b).data("limit",c)})},j=function(d){var e=d.find(f.EVENT_LIST_CONTAINER),g=a(e).attr("id")+"user_block_timeline"+Math.random();i(d,g);var j=h(d),k={persistentLimitKey:"block_timeline_user_limit_preference",eventNamespace:g};b.get_string("ariaeventlistpaginationnavdates","block_timeline").then(function(a){c.init(e,j,{},a,k);return a}).catch(function(){c.init(e,j,{},"",k)})};return{init:function init(b){b=a(b);if(b.hasClass("active")){j(b);b.data("seen",!0)}},reset:function reset(a){a.removeAttr("data-seen");if(a.hasClass("active")){j(a);a.data("seen",!0)}},shown:function shown(a){if(!a.data("seen")){j(a);a.data("seen",!0)}}}});
define ("block_timeline/view",["jquery","block_timeline/view_dates","block_timeline/view_courses"],function(a,b,c){var d={TIMELINE_DATES_VIEW:"[data-region=\"view-dates\"]",TIMELINE_COURSES_VIEW:"[data-region=\"view-courses\"]"};return{init:function init(e){e=a(e);var f=e.find(d.TIMELINE_DATES_VIEW),g=e.find(d.TIMELINE_COURSES_VIEW);b.init(f);c.init(g)},reset:function reset(a){var e=a.find(d.TIMELINE_DATES_VIEW),f=a.find(d.TIMELINE_COURSES_VIEW);b.reset(e);c.reset(f)},shown:function shown(a){var e=a.find(d.TIMELINE_DATES_VIEW),f=a.find(d.TIMELINE_COURSES_VIEW);if(e.hasClass("active")){b.shown(e)}else{c.shown(f)}}}});
define ("block_timeline/view_courses",["jquery","core/notification","core/custom_interaction_events","core/str","core/templates","block_timeline/event_list","core_course/repository","block_timeline/calendar_events_repository"],function(a,b,c,d,e,f,g,h){var i={MORE_COURSES_BUTTON:"[data-action=\"more-courses\"]",MORE_COURSES_BUTTON_CONTAINER:"[data-region=\"more-courses-button-container\"]",NO_COURSES_EMPTY_MESSAGE:"[data-region=\"no-courses-empty-message\"]",COURSES_LIST:"[data-region=\"courses-list\"]",COURSE_ITEMS_LOADING_PLACEHOLDER:"[data-region=\"course-items-loading-placeholder\"]",COURSE_EVENTS_CONTAINER:"[data-region=\"course-events-container\"]",COURSE_NAME:"[data-region=\"course-name\"]",LOADING_ICON:".loading-icon"},j={COURSE_ITEMS:"block_timeline/course-items",LOADING_ICON:"core/loading"},k=5,l=86400,m=function(a){a.find(i.COURSE_ITEMS_LOADING_PLACEHOLDER).addClass("hidden")},n=function(a){a.find(i.MORE_COURSES_BUTTON_CONTAINER).addClass("hidden")},o=function(a){a.find(i.MORE_COURSES_BUTTON_CONTAINER).removeClass("hidden")},p=function(a){var b=a.find(i.MORE_COURSES_BUTTON);b.prop("disabled",!0);e.render(j.LOADING_ICON,{}).then(function(a){b.append(a);return a}).catch(function(){return!1})},q=function(a){var b=a.find(i.MORE_COURSES_BUTTON);b.prop("disabled",!1);b.find(i.LOADING_ICON).remove()},r=function(a){a.find(i.NO_COURSES_EMPTY_MESSAGE).removeClass("hidden")},s=function(a,b){var c=a.find(i.COURSES_LIST);e.appendNodeContents(c,b,"")},t=function(a){return 0<a.find(i.COURSE_EVENTS_CONTAINER).length},u=function(a){return parseInt(a.attr("data-offset"),10)},v=function(a,b){a.attr("data-offset",b)},w=function(a){return parseInt(a.attr("data-limit"),10)},x=function(a){return parseInt(a.attr("data-days-offset"),10)},y=function(a){var b=a.attr("data-days-limit");return b!=void 0?parseInt(b,10):void 0},z=function(a){return parseInt(a.attr("data-midnight"),10)},A=function(a){var b=z(a),c=x(a);return b+c*l},B=function(a){var b=z(a),c=y(a);return c!=void 0?b+c*l:!1},C=function(a,b,c,d){var e={courseids:a,starttime:b,limit:c};if(d){e.endtime=d}return h.queryByCourses(e)},D=function(a){return a.data("last-event-load-time")},E=function(a,b){a.data("last-event-load-time",b)},F=function(a,b){return D(a)>b},G=function(a,b,c){var d=a.map(function(a){return a.id});return C(d,b,k+1,c)},H=function(a,b,c,d,f,g){return e.render(j.COURSE_ITEMS,{courses:a,midnight:c,hasdaysoffset:!0,hasdayslimit:f!=void 0,daysoffset:d,dayslimit:f,nodayslimit:f==void 0,urls:{noevents:g}}).then(function(a){m(b);if(a){s(b,a)}else{if(!t(b)){r(b)}}return a}).then(function(c){if(a.length<2){n(b)}else{o(b)}return c}).catch(function(){m(b)})},I=function(c){var e=u(c),h=w(c);return g.getEnrolledCoursesByTimelineClassification("inprogress",h,e,"fullname asc").then(function(b){var e=Date.now(),g=b.courses,h=b.nextoffset,i=x(c),j=y(c),l=z(c),m=A(c),n=B(c),o=c.attr("data-no-events-url");v(c,h);var p=G(g,m,n),q=H(g,c,l,i,j,o);return a.when(p,q).then(function(b){if(F(c,e)){return b}g.forEach(function(e){var g=e.id,h=[],i=c.find("[data-region=\"course-events-container\"][data-course-id=\""+g+"\"]"),j=i.find(f.rootSelector),l=b.groupedbycourse.filter(function(a){return a.courseid==g});if(l.length){h=l[0].events}var m=a.Deferred().resolve({events:h}).promise();d.get_string("ariaeventlistpaginationnavcourses","block_timeline",e.fullnamedisplay).then(function(a){f.init(j,k,{1:m},a);return a}).catch(function(){f.init(j,k,{1:m})})});return b})}).catch(b.exception)},J=function(c){var e=Date.now(),g=A(c),h=B(c),j=c.find(i.COURSE_EVENTS_CONTAINER),l=j.map(function(){return a(this).attr("data-course-id")}).get();E(c,e);return C(l,g,k+1,h).then(function(b){if(F(c,e)){return b}j.each(function(c,e){e=a(e);var g=e.attr("data-course-id"),h=e.find(i.COURSE_NAME).text(),j=e.find(f.rootSelector),l=a.Deferred(),m=[],n=b.groupedbycourse.filter(function(a){return a.courseid==g});if(n.length){m=n[0].events}l.resolve({events:m});d.get_string("ariaeventlistpaginationnavcourses","block_timeline",h).then(function(a){f.init(j,k,{1:l.promise()},a);return a}).catch(function(){f.init(j,k,{1:l.promise()})})});return b}).catch(b.exception)},K=function(a){c.define(a,[c.events.activate]);a.on(c.events.activate,i.MORE_COURSES_BUTTON,function(b,c){p(a);I(a).then(function(){q(a)}).catch(function(){q(a)});if(c){c.originalEvent.preventDefault();c.originalEvent.stopPropagation()}b.stopPropagation()})},L=function(a){if(!a.attr("data-seen")){if(t(a)){J(a)}else{I(a)}a.attr("data-seen",!0)}};return{init:function init(b){b=a(b);E(b,Date.now());if(b.hasClass("active")){I(b);b.attr("data-seen",!0)}K(b)},reset:function reset(a){a.removeAttr("data-seen");if(a.hasClass("active")){L(a)}},shown:L}});
define ("block_timeline/main",["jquery","block_timeline/view_nav","block_timeline/view"],function(a,b,c){var d={TIMELINE_VIEW:"[data-region=\"timeline-view\"]"};return{init:function init(e){e=a(e);var f=e.find(d.TIMELINE_VIEW);b.init(e,f);c.init(f)}}});
define ("block_timeline/calendar_events_repository",["jquery","core/ajax","core/notification"],function(a,b,c){return{queryByTime:function queryByTime(a){if(!a.hasOwnProperty("limit")){a.limit=20}a.limitnum=a.limit;delete a.limit;if(a.hasOwnProperty("starttime")){a.timesortfrom=a.starttime;delete a.starttime}if(a.hasOwnProperty("endtime")){a.timesortto=a.endtime;delete a.endtime}a.limittononsuspendedevents=!0;var d=b.call([{methodname:"core_calendar_get_action_events_by_timesort",args:a}])[0];d.fail(c.exception);return d},queryByCourse:function queryByCourse(a){if(!a.hasOwnProperty("limit")){a.limit=20}a.limitnum=a.limit;delete a.limit;if(a.hasOwnProperty("starttime")){a.timesortfrom=a.starttime;delete a.starttime}if(a.hasOwnProperty("endtime")){a.timesortto=a.endtime;delete a.endtime}var d=b.call([{methodname:"core_calendar_get_action_events_by_course",args:a}])[0];d.fail(c.exception);return d},queryByCourses:function queryByCourses(a){if(!a.hasOwnProperty("limit")){a.limit=10}a.limitnum=a.limit;delete a.limit;if(a.hasOwnProperty("starttime")){a.timesortfrom=a.starttime;delete a.starttime}if(a.hasOwnProperty("endtime")){a.timesortto=a.endtime;delete a.endtime}var d=b.call([{methodname:"core_calendar_get_action_events_by_courses",args:a}])[0];d.fail(c.exception);return d}}});
define ("block_timeline/view_nav",["jquery","core/custom_interaction_events","block_timeline/view","core/ajax","core/notification"],function(a,b,c,d,e){var f={TIMELINE_DAY_FILTER:"[data-region=\"day-filter\"]",TIMELINE_DAY_FILTER_OPTION:"[data-from]",TIMELINE_VIEW_SELECTOR:"[data-region=\"view-selector\"]",DATA_DAYS_OFFSET:"[data-days-offset]",DATA_DAYS_LIMIT:"[data-days-limit]"},g=function(a,b){d.call([{methodname:"core_user_update_user_preferences",args:{preferences:[{type:a,value:b}]}}])[0].fail(e.exception)},h=function(d,h){var i=d.find(f.TIMELINE_DAY_FILTER);b.define(i,[b.events.activate]);i.on(b.events.activate,f.TIMELINE_DAY_FILTER_OPTION,function(b,e){var i=a(b.currentTarget).data("filtername");g("block_timeline_user_filter_preference",i);var j=a(b.target).closest(f.TIMELINE_DAY_FILTER_OPTION);if(j.hasClass("active")){return}var k=j.attr("data-from"),l=j.attr("data-to"),m=d.find(f.DATA_DAYS_OFFSET);m.attr("data-days-offset",k);if(l!=void 0){m.attr("data-days-limit",l)}else{m.removeAttr("data-days-limit")}c.reset(h);e.originalEvent.preventDefault()})},i=function(d,e){var h=d.find(f.TIMELINE_VIEW_SELECTOR);h.on("shown shown.bs.tab",function(){c.shown(e)});b.define(h,[b.events.activate]);h.on(b.events.activate,"[data-toggle='tab']",function(b){var c=a(b.currentTarget).data("filtername");g("block_timeline_user_sort_preference",c)})};return{init:function init(b,c){b=a(b);h(b,c);i(b,c)}}});
define ("block_timeline/event_list",["jquery","core/notification","core/templates","core/paged_content_factory","core/str","core/user_date","block_timeline/calendar_events_repository"],function(a,b,c,d,e,f,g){var h={EMPTY_MESSAGE:"[data-region=\"empty-message\"]",ROOT:"[data-region=\"event-list-container\"]",EVENT_LIST_CONTENT:"[data-region=\"event-list-content\"]",EVENT_LIST_LOADING_PLACEHOLDER:"[data-region=\"event-list-loading-placeholder\"]"},i={EVENT_LIST_CONTENT:"block_timeline/event-list-content"},j={ignoreControlWhileLoading:!0,controlPlacementBottom:!0,ariaLabels:{itemsperpagecomponents:"ariaeventlistpagelimit, block_timeline"}},k=function(a){a.find(h.EVENT_LIST_CONTENT).addClass("hidden");a.find(h.EMPTY_MESSAGE).removeClass("hidden")},l=function(a){a.find(h.EVENT_LIST_CONTENT).removeClass("hidden");a.find(h.EMPTY_MESSAGE).addClass("hidden")},m=function(a){a.find(h.EVENT_LIST_CONTENT).empty()},n=function(a,b){var c={},d={eventsbyday:[]};a.forEach(function(a){var d=f.getUserMidnightForTimestamp(a.timesort,b);if(c[d]){c[d].push(a)}else{c[d]=[a]}});Object.keys(c).forEach(function(a){var e=c[a];d.eventsbyday.push({past:a<b,dayTimestamp:a,events:e})});return d},o=function(a,b){var d=n(a,b),e=i.EVENT_LIST_CONTENT;return c.render(e,d)},p=function(a,b,c,d,e,f){var h=d!=void 0?a+d*86400:!1,i={starttime:a+c*86400,limit:b};if(e){i.aftereventid=e}if(h){i.endtime=h}if(f){i.courseid=f;return g.queryByCourse(i)}else{return g.queryByTime(i)}},q=function(a,b,c,d,e,g,h,i){var j=a.pageNumber,k=a.limit,l=j;while(!d.hasOwnProperty(l)){l--}var m=d[l],n=null;if(e&&e.hasOwnProperty(j)){n=e[j]}else{n=p(c,k+1,h,i,m,g)}return n.then(function(a){if(!a.events.length){b.allItemsLoaded(j);return[]}var d=a.events.filter(function(a){if("open"==a.eventtype||"opensubmission"==a.eventtype){var b=f.getUserMidnightForTimestamp(a.timesort,c);return b>c}return!0}),e=d.length<=k;if(e){b.allItemsLoaded(j)}else{d.pop()}return d})},r=function(c,f,g,h,i,k,l,m,n){var p={1:0},r=!1,s=a.extend({},j,n);return e.get_string("ariaeventlistpagelimit","block_timeline",a.isArray(c)?c[0].value:c).then(function(a){s.ariaLabels.itemsperpage=a;s.ariaLabels.paginationnav=m;return a}).then(function(){return d.createWithLimit(c,function(c,d){var e=[];c.forEach(function(a){var c=a.pageNumber,h=q(a,d,g,p,f,i,k,l).then(function(a){if(a.length){r=!0;var b=a[a.length-1].id;p[c+1]=b;return o(a,g)}else{return a}}).catch(b.exception);e.push(h)});a.when.apply(a,e).then(function(){h.resolve(r)}).catch(function(){h.resolve(r)});return e},s)})};return{init:function init(d,e,f,g,i){d=a(d);var j=a.Deferred(),n=d.find(h.EVENT_LIST_CONTENT),o=d.find(h.EVENT_LIST_LOADING_PLACEHOLDER),p=d.attr("data-course-id"),q=parseInt(d.attr("data-days-offset"),10),s=d.attr("data-days-limit"),t=parseInt(d.attr("data-midnight"),10);m(d);l(d);o.removeClass("hidden");if(s!=void 0){s=parseInt(s,10)}return r(e,f,t,j,p,q,s,g,i).then(function(b,e){b=a(b);b.addClass("hidden");c.replaceNodeContents(n,b,e);j.then(function(a){b.removeClass("hidden");o.addClass("hidden");if(!a){k(d)}return a}).catch(function(){return!1});return b}).catch(b.exception)},rootSelector:h.ROOT}});
define ("media_videojs/document",[],function(){return document});
define ("media_videojs/loader",["jquery","core/event"],function(a,b){var c,d=function(b,d){d.find(".mediaplugin_videojs").addBack(".mediaplugin_videojs").find("audio, video").each(function(){var b=a(this).attr("id"),d=a(this).data("setup-lazy"),e=["media_videojs/video-lazy"];if(d.techOrder&&-1!==d.techOrder.indexOf("youtube")){e.push("media_videojs/Youtube-lazy")}if(d.techOrder&&-1!==d.techOrder.indexOf("flash")){e.push("media_videojs/videojs-flash-lazy")}require(e,function(a){if(c){c(a);c=null}a(b,d)})})};return{setUp:function setUp(e){c=e;d(null,a("body"));b.getLegacyEvents().done(function(b){a(document).on(b.FILTER_CONTENT_UPDATED,d)})}}});
define ("media_videojs/window",[],function(){return window});
define ("filter_ally/util",["jquery"],function(a){return new function(){this.whenTrue=function(b,c){c=!c?10:c;var d=a.Deferred(),e=0,f=null,g=function(){e++;if(e>c){d.reject();if(f){clearInterval(f);f=null}return}if(b()){d.resolve();if(f){clearInterval(f);f=null}}};f=setInterval(g,200);return d.promise()};this.onCoordsChange=function(b,c){var d={},e=null,f=function(){var f=b.offset(),g=b.width(),h=b.height(),i={top:f.top,right:f.left+g,bottom:f.top+h,left:f.left};if(i.top!==d.top||i.right!==d.right||i.bottom!==d.bottom||i.left!==d.left){d=i;if(!a.contains(document.documentElement,b[0])){if(e){clearInterval(e);e=null}return}return c(d)}};e=setInterval(f,200);f()};this.getQuery=function(a){var b={};a.replace(/[?&](.+?)=([^&#]*)/g,function(a,c,d){b[c]=decodeURI(d).replace(/\+/g," ")});return b};this.debounce=function(b,c,d){var e;return function(){var f=a.Deferred(),g=this,h=arguments,i=d&&!e;clearTimeout(e);e=setTimeout(function later(){e=null;if(!d){f.resolve(b.apply(g,h))}},c);if(i){f.resolve(b.apply(g,h))}return f}}}});
define ("filter_ally/main",["jquery","core/templates","core/str","filter_ally/ally","filter_ally/imagecover","filter_ally/util"],function(b,a,c,d,e,f){return new function(){var g=this;g.canViewFeedback=!1;g.canDownload=!1;g.initialised=!1;g.params={};var h=function(a){var b=window.document.createExpression(a),c=b.evaluate(window.document,XPathResult.ANY_TYPE),d=[];do{var e=c.iterateNext();d.push(e)}while(e);return d},i=function(a){var b=window.document.createExpression(a),c=b.evaluate(window.document,XPathResult.FIRST_ORDERED_NODE_TYPE);return c.singleNodeValue},j=function(c,d,e){var f=b.Deferred();if(b(e).parents(".filter-ally-wrapper").length){f.resolve();return f.promise()}c.canviewfeedback=g.canViewFeedback;c.candownload=g.canDownload;c.html="<span id=\"content-target-"+d+"\"></span>";a.render("filter_ally/wrapper",c).done(function(a){var c=b(e).next().find("span[data-file-id=\""+d+"\"]");if(0==c.length){b(e).after(a);b("#content-target-"+d).after(e);b("#content-target-"+d).remove()}f.resolve()});return f.promise()},k=function(a,d){var e=b.Deferred(),g=0,h=b(a).length;if(!h){e.resolve()}b(a).each(function(){var a=function(){if(g===h){e.resolve()}},c,i;if("a"===b(this).prop("tagName").toLowerCase()){c=b(this).attr("href");i="a"}else{c=b(this).attr("src");i="img"}var k;if(-1<c.indexOf("?")){k=/pluginfile.php\/(\d*)\/(.*)(\?)/}else{k=/pluginfile.php\/(\d*)\/(.*)/}var l=c.match(k),m;if(l){var n=l[1]+"/"+l[2];n=decodeURIComponent(n);m=d[n]}if(m===void 0){var o=f.getQuery(c);if(o.file){var p=decodeURIComponent(o.file);k=/\/(\d*)\/(.*)/;l=p.match(k);if(l){n=l[1]+"/"+l[2];n=decodeURIComponent(n);m=d[n]}}}if(m===void 0){g++;a();return}var q={isimage:"img"===i,fileid:m,url:c};j(q,m,b(this)).done(function(){g++;a()})});return e.promise()},l=function(a){var c=b.Deferred();k(".forumpost .attachedimages img[src*=\"pluginfile.php\"], .forumpost .body-content-container a[href*=\"pluginfile.php\"]",a).done(function(){c.resolve()});return c.promise()},m=function(a){var c=b.Deferred();f.whenTrue(function(){return 0<b("div[id*=\"assign_files_tree\"] .ygtvitem").length},10).done(function(){k("div[id*=\"assign_files_tree\"] a[href*=\"pluginfile.php\"]",a);c.resolve()});return c.promise()},n=function(a){var c=b.Deferred();f.whenTrue(function(){return 0<b(".foldertree > .filemanager .ygtvitem").length},10).done(function(){k(".foldertree > .filemanager span:not(.filter-ally-wrapper) > a[href*=\"pluginfile.php\"]",a).done(function(){c.resolve()})});return c.promise()},o=function(a){var c=b.Deferred();b(".entry .attachments > br").each(function(){var a=b(this).prev("a[href*=\"pluginfile.php\"]");a.addClass("ally-glossary-attachment");var c=b(a).prev("a[href*=\"pluginfile.php\"]");b(this).after("<div class=\"ally-glossary-attachment-row\"></div>");var d=b(this).next(".ally-glossary-attachment-row");d.append(c);d.append(a);b(this).remove()});k(".entry .attachments .ally-glossary-attachment",a).done(function(){c.resolve()});return c.promise()},p=function(a){var b=a.split("/");for(var c in b){b[c]=encodeURIComponent(b[c])}var d=b.join("/");return d},q=function(a,d){var e=b.Deferred();if(0===a.length){e.resolve()}else{for(var f in a){var c=p(f);k(d+"img[src*=\""+c+"\"], "+d+"a[href*=\""+c+"\"]",a).done(function(){e.resolve()})}}return e.promise()},r=function(a){return q(a,"")},s=function(a){return q(a,".studentanswer table tr:nth-child(1) ")},t=function(a){return q(a,".studentanswer table tr.lastrow ")},u=function(a){var c=b.Deferred(),d=a.page_contents,e=a.page_answers,f=a.page_responses;r(d).then(function(){return s(e)}).then(function(){return t(f)}).then(function(){c.resolve()});return c.promise()},v=function(a){var d=b.Deferred(),e=0,f=function(){e++;if(e>=Object.keys(a).length){d.resolve()}};for(var g in a){var h=a[g].content;if(b("body").hasClass("theme-snap")){var i=b("#module-"+g+":not(.snap-native) .activityinstance .snap-asset-link a:first-of-type")}else{var i=b("#module-"+g+" .activityinstance a:first-of-type")}var k=i.find(".filter-ally-wrapper");if(0<k.length){f();continue}var l={isimage:!1,fileid:h,url:b(i).attr("href")};j(l,h,i).done(f)}return d.promise()},w=function(a,b,c,d){return[a,b,c,d].join(":")},x=function(a){var c=b.Deferred();for(var d in a){var e=a[d],f=w("course","course_sections","summary",e);b(["#"+d+" > .content div[class*=\"summary\"] > .no-overflow","body.theme-snap #"+d+" > .content > .summary > div > .no-overflow"].join(",")).attr("data-ally-richcontent",f)}c.resolve();return c.promise()},y=function(c,d,e){for(var f in c){var g=c[f],h=["body.path-mod-"+d+".cmid-"+f+" #intro > .no-overflow","li.activity.modtype_"+d+"#module-"+f+" .contentafterlink > .no-overflow > .no-overflow","li.snap-activity.modtype_"+d+"#module-"+f+" .contentafterlink > .no-overflow"];if(e){for(var i in e){h.push(e[i].replace("{{i}}",f))}}b(h.join(",")).attr("data-ally-richcontent",g)}},z=function(a){var c=a.intros;y(c,"forum");var e=a.posts;for(var f in e){var d=e[f],g="#page-mod-forum-discuss a#"+("p"+f)+" + div.firstpost div.posting.fullpost";b(g).prepend("<div data-ally-richcontent='"+d+"'></div>");b(g+" > *:not(.attachedimages):not([data-ally-richcontent])").detach().appendTo(g+" > div[data-ally-richcontent]")}},A=function(a){var c=a.intros;y(c,"hsuforum",["#hsuforum-header .hsuforum_introduction > .no-overflow"]);var e=a.posts;for(var f in e){var d=e[f];b("article[id=\"p"+f+"\"] div.posting").attr("data-ally-richcontent",d)}},B=function(a){var c=a.intros;y(c,"glossary");var d=a.entries;for(var f in d){var e=d[f],g=b(".entrylowersection .commands a[href*=\"id="+f+"\"]"),h=b(g).parents(".glossarypost").find(".entry .no-overflow");b(h).attr("data-ally-richcontent",e)}},C=function(a){var d=a.intros;y(d,"page",["li.snap-native.modtype_page#module-{{i}} .contentafterlink > .summary-text"]);var e=a.content;for(var f in e){var c=e[f];b(["#page-mod-page-view #region-main .box.generalbox > .no-overflow","li.snap-native.modtype_page#module-"+f+" .pagemod-content"].join(",")).attr("data-ally-richcontent",c)}},D=function(a){var c=a.intros;y(c,"book",["li.snap-native.modtype_book#module-{{i}} .contentafterlink > .summary-text .no-overflow"]);var d=a.chapters,e;if(g.params.chapterid){e=g.params.chapterid}else{var f=new URLSearchParams(window.location.search);e=f.get("chapterid")}b.each(d,function(a,c){if(e!=a){return}b(["#page-mod-book-view #region-main .box.generalbox.book_content > .no-overflow","li.snap-native.modtype_page#module-"+a+" .pagemod-content"].join(",")).attr("data-ally-richcontent",c)})},E=function(d){var e=d.intros;y(e,"lesson",["li.snap-native.modtype_lesson#module-{{i}} .contentafterlink > .summary-text .no-overflow"]);var f=d.lesson_pages;for(var j in f){if("page-mod-lesson-edit"===document.body.id){var a=f[j],k=i("//a[@id=\"lesson-"+j+"\"]//ancestor::table//tbody/tr/td/div[contains(@class, \"no-overflow\")]");b(k).attr("data-ally-richcontent",a)}else{var k=i("//form[contains(@action, \"continue.php\")]//input[@name=\"pageid\"]");if(k){var l=b(k).val()}else{var m=new URLSearchParams(window.location.search),l=m.get("pageid")}if(l!=j){continue}var a=f[j];b(["#page-mod-lesson-view #region-main .box.contents > .no-overflow","#page-mod-lesson-view #region-main form > fieldset > .fcontainer > .contents .no-overflow","li.snap-native.modtype_page#module-"+j+" .pagemod-content"].join(",")).attr("data-ally-richcontent",a)}}c.get_strings([{key:"answer",component:"mod_lesson"},{key:"response",component:"mod_lesson"}]).then(function(c){var e=c[0],f=c[1],i=d.lesson_answers,j=function(a,c,d,e){var f=h("//a[@id=\"lesson-"+a+"\"]//ancestor::table//td/label[contains(text(),\""+d+" "+c+"\")]/ancestor::tr/td[2]");for(var g in f){var i=f[g];b(i).attr("data-ally-richcontent",e)}};for(var k in i){var a=i[k],l=k.split("_"),m=l[0],n=l[1],o=l[2];if("page-mod-lesson-edit"===document.body.id){j(m,o,e,a)}else{b("#page-mod-lesson-view label[for=\"id_answerid_"+n+"\"]").attr("data-ally-richcontent",a);if(g.params.answerid&&g.params.answerid==n){b(".studentanswer tr:nth-of-type(1) > td div").attr("data-ally-richcontent",a)}else{var p=b("#id_answerid_"+n);if(1!=p.data("annotated")){var q=p.nextAll();p.parent("label").append("<span id=\"answer_wrapper_"+n+"\"></span>");b("#"+("answer_wrapper_"+n)).append(q)}p.data("annotated",1)}b("#answer_wrapper_"+k).attr("data-ally-richcontent",a)}}var s=d.lesson_answers_response;for(var t in s){var a=s[t],l=t.split("_"),m=l[0],r=l[1],u=l[2];if("page-mod-lesson-edit"===document.body.id){j(m,u,f,a)}else if(g.params.answerid&&g.params.answerid==r){var v="response_wrapper_"+r;if(!b(".studentanswer tr.lastrow > td #"+v).length){var q=b(".studentanswer tr.lastrow > td > br").nextAll();b(".studentanswer tr.lastrow > td > br").after("<span id=\""+v+"\"></span>");b("#"+v).append(q)}b("#"+v).attr("data-ally-richcontent",a)}}})},F=function(a){var c=b.Deferred();if(a.mod_forum!==void 0){z(a.mod_forum)}if(a.mod_hsuforum!==void 0){A(a.mod_hsuforum)}if(a.mod_glossary!==void 0){B(a.mod_glossary)}if(a.mod_page!==void 0){C(a.mod_page)}if(a.mod_book!==void 0){D(a.mod_book)}if(a.mod_lesson!==void 0){E(a.mod_lesson)}c.resolve();return c.promise()},G=function(a){var c=b.Deferred(),d=b("#snap-course-footer-summary > div.no-overflow");if(d.length){var e=w("course","course","summary",a.courseId);d.attr("data-ally-richcontent",e)}c.resolve();return c.promise()},H=function(a){var c=b.Deferred(),d=a.block_html;for(var e in d){var f=d[e],g=["#inst"+e+".block_html > .card-body > .card-text > .no-overflow","#inst"+e+".block_html > .content > .no-overflow"].join(",");b(g).attr("data-ally-richcontent",f)}c.resolve();return c.promise()},I=function(){M.util.js_pending("filter_ally_applyPlaceHolders");var a=b.Deferred();if(ally_module_maps===void 0||ally_section_maps===void 0){a.resolve();return a.promise()}var c=[{mapVar:ally_module_maps.file_resources,method:v},{mapVar:ally_module_maps.assignment_files,method:m},{mapVar:ally_module_maps.folder_files,method:n},{mapVar:ally_module_maps.forum_files,method:l},{mapVar:ally_module_maps.glossary_files,method:o},{mapVar:ally_module_maps.lesson_files,method:u},{mapVar:ally_section_maps,method:x},{mapVar:ally_annotation_maps,method:F},{mapVar:{courseId:g.courseId},method:G},{mapVar:ally_annotation_maps,method:H}];b(document).ready(function(){var b=0,d=function(){b++;if(b===c.length){M.util.js_complete("filter_ally_applyPlaceHolders");a.resolve()}};for(var e in c){var f=c[e];if(0<Object.keys(f.mapVar).length){f.method(f.mapVar).done(d)}else{d()}}});return a.promise()},J=f.debounce(function(){return I()},1e3);this.initStageTwo=function(a,c){if(g.canViewFeedback||g.canDownload){J().done(function(){e.init();d.init(a,c);try{var f=b(".foldertree > .filemanager"),h=f[0];if(h){var i=function(a){a.filter(function(a){return"childList"===a.type}).forEach(function(){n(ally_module_maps.folder_files)})},j=new MutationObserver(i);j.observe(h,{attributes:!0,childList:!0,subtree:!0})}}catch(a){setInterval(function(){n(ally_module_maps.folder_files)},5e3)}g.initialised=!0});b(document).ajaxComplete(function(){if(!g.initialised){return}J()})}};this.init=function(a,b,c,d,e,f){g.canViewFeedback=c;g.canDownload=d;g.courseId=e;g.params=f;var h=function(a){return M.cfg.wwwroot+"/pluginfile.php/"+M.cfg.contextid+"/filter_ally/"+a},i={};if(!document.evaluate){i["filter_ally/wgxpath"]=h("vendorjs/wgxpath.install")}if("undefined"==typeof URLSearchParams){i["filter_ally/urlsearchparams"]=["https://cdnjs.cloudflare.com/ajax/libs/url-search-params/1.1.0/url-search-params.amd.js",h("vendorjs/url-search-params.amd")]}if({}!==i){require.config({enforceDefine:!1,paths:i});var j=Object.keys(i);require(j,function(){if("undefined"==typeof URLSearchParams){window.URLSearchParams=arguments[1]}g.initStageTwo(a,b)});return}g.initStageTwo(a,b)}}});
define ("filter_ally/ally",["jquery","core/log"],function(a,b){return new function(){var c=null,d=null,e=null,f=function(a){var b=document.createElement("a");b.href=a;var c=b.protocol+"//"+b.hostname;if(b.port){c+=":"+b.port}return c};this.init=function(g,h){d=g;c=h;if(!h.adminurl){b.info("The Ally admin tool is not configured with a Launch URL. Aborting JS load.");return}e=f(h.adminurl);a.getScript(e+"/integration/moodlerooms/ally.js").fail(function(){b.error("Failed to load Ally JS")})};this.token=function(){return d};this.config=function(){return c};this.getAllyBaseUrl=function(){return e}}});
define ("filter_ally/imagecover",["jquery","filter_ally/util"],function(a,b){return new function(){var c=function(){a(".ally-image-wrapper").each(function(){var c=this,d=a(c).find("img"),e=a(c).find(".ally-image-cover"),f=a(c).find(".ally-feedback"),g=parseInt(a(d).css("marginTop")),h=parseInt(a(d).css("marginLeft")),i=b.debounce(function(b){var c=b.right-b.left,i=b.bottom-b.top;a(e).css("width",c+"px").css("height",i+"px");var j=a(d).position().top+g,k=a(d).position().left+h;a(e).css("top",j+"px").css("left",k+"px");if(f.length){f.css("top",j+i-f.height()+"px").css("left",k+"px")}},1e3);b.onCoordsChange(d,function(a){i(a)})})};this.init=function(){a(document).ready(c);var b=document,d={childList:!0,attributes:!0,subtree:!0};a(document).on("snap-course-content-loaded",function(){var a=new MutationObserver(function(){var b=0,d=setInterval(function(){if(5>b){c();b++}else{clearTimeout(d)}},500);a.disconnect()});a.observe(b,d)})}}});
define('filter_oembed/preloader', ["jquery"],function(a){return{apply:function(){a(".oembed-card-play").on("click",function(){var b=a(this).parent(".oembed-card"),c=a(b.data("embed")),d=a(b).width(),e=a(b).height();if(a(c).find("iframe").length){var f=a(a(c).find("iframe")[0]),g=f.attr("src"),h=g.indexOf("?")>-1?"&":"?";g+=h+"autoplay=1",g+="&auto_play=1",f.attr("src",g)}c.attr("data-card-width",d),c.attr("data-card-height",e),b.parent(".oembed-card-container").replaceWith(c)})}}});
define('filter_oembed/oembed', ["jquery","filter_oembed/preloader","filter_oembed/responsivecontent"],function(a,b,c){return{init:function(){var d=function(){var b=function(b){return!!b.className&&a(b).is(".oembed-content, .oembed-card-container")},d=new MutationObserver(function(d){d.forEach(function(d){for(var e in d.addedNodes){var f=d.addedNodes[e];b(f)&&c.apply(a(f).find("> *:not(video):first-child, .oembed-card"))}})}),e={attributes:!0,childList:!0,characterData:!0,subtree:!0},f=document.body;d.observe(f,e)};d(),a(document).ready(function(){b.apply(),c.apply()})}}});
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(c,d){"use strict";var e=c.document,f=a("./src/utils/get-by-class"),g=a("./src/utils/extend"),h=a("./src/utils/index-of"),i=a("./src/utils/events"),j=a("./src/utils/to-string"),k=a("./src/utils/natural-sort"),l=a("./src/utils/classes"),m=a("./src/utils/get-attribute"),n=a("./src/utils/to-array"),o=function(b,c,p){var q,r=this,s=a("./src/item")(r),t=a("./src/add-async")(r);q={start:function(){r.listClass="list",r.searchClass="search",r.sortClass="sort",r.page=1e4,r.i=1,r.items=[],r.visibleItems=[],r.matchingItems=[],r.searched=!1,r.filtered=!1,r.searchColumns=d,r.handlers={updated:[]},r.plugins={},r.valueNames=[],r.utils={getByClass:f,extend:g,indexOf:h,events:i,toString:j,naturalSort:k,classes:l,getAttribute:m,toArray:n},r.utils.extend(r,c),r.listContainer="string"==typeof b?e.getElementById(b):b,r.listContainer&&(r.list=f(r.listContainer,r.listClass,!0),r.parse=a("./src/parse")(r),r.templater=a("./src/templater")(r),r.search=a("./src/search")(r),r.filter=a("./src/filter")(r),r.sort=a("./src/sort")(r),this.handlers(),this.items(),r.update(),this.plugins())},handlers:function(){for(var a in r.handlers)r[a]&&r.on(a,r[a])},items:function(){r.parse(r.list),p!==d&&r.add(p)},plugins:function(){for(var a=0;a<r.plugins.length;a++){var b=r.plugins[a];r[b.name]=b,b.init(r,o)}}},this.reIndex=function(){r.items=[],r.visibleItems=[],r.matchingItems=[],r.searched=!1,r.filtered=!1,r.parse(r.list)},this.toJSON=function(){for(var a=[],b=0,c=r.items.length;b<c;b++)a.push(r.items[b].values());return a},this.add=function(a,b){if(0!==a.length){if(b)return void t(a,b);var c=[],e=!1;a[0]===d&&(a=[a]);for(var f=0,g=a.length;f<g;f++){var h=null;e=r.items.length>r.page,h=new s(a[f],d,e),r.items.push(h),c.push(h)}return r.update(),c}},this.show=function(a,b){return this.i=a,this.page=b,r.update(),r},this.remove=function(a,b,c){for(var d=0,e=0,f=r.items.length;e<f;e++)r.items[e].values()[a]==b&&(r.templater.remove(r.items[e],c),r.items.splice(e,1),f--,e--,d++);return r.update(),d},this.get=function(a,b){for(var c=[],d=0,e=r.items.length;d<e;d++){var f=r.items[d];f.values()[a]==b&&c.push(f)}return c},this.size=function(){return r.items.length},this.clear=function(){return r.templater.clear(),r.items=[],r},this.on=function(a,b){return r.handlers[a].push(b),r},this.off=function(a,b){var c=r.handlers[a],d=h(c,b);return d>-1&&c.splice(d,1),r},this.trigger=function(a){for(var b=r.handlers[a].length;b--;)r.handlers[a][b](r);return r},this.reset={filter:function(){for(var a=r.items,b=a.length;b--;)a[b].filtered=!1;return r},search:function(){for(var a=r.items,b=a.length;b--;)a[b].found=!1;return r}},this.update=function(){var a=r.items,b=a.length;r.visibleItems=[],r.matchingItems=[],r.templater.clear();for(var c=0;c<b;c++)a[c].matching()&&r.matchingItems.length+1>=r.i&&r.visibleItems.length<r.page?(a[c].show(),r.visibleItems.push(a[c]),r.matchingItems.push(a[c])):a[c].matching()?(r.matchingItems.push(a[c]),a[c].hide()):a[c].hide();return r.trigger("updated"),r},q.start()};"function"==typeof define&&define.amd&&define('filter_oembed/list', function(){return o}),b.exports=o,c.List=o}(window)},{"./src/add-async":2,"./src/filter":3,"./src/item":4,"./src/parse":5,"./src/search":6,"./src/sort":7,"./src/templater":8,"./src/utils/classes":9,"./src/utils/events":10,"./src/utils/extend":11,"./src/utils/get-attribute":12,"./src/utils/get-by-class":13,"./src/utils/index-of":14,"./src/utils/natural-sort":15,"./src/utils/to-array":16,"./src/utils/to-string":17}],2:[function(a,b,c){b.exports=function(a){var b=function(c,d,e){var f=c.splice(0,50);e=e||[],e=e.concat(a.add(f)),c.length>0?setTimeout(function(){b(c,d,e)},1):(a.update(),d(e))};return b}},{}],3:[function(a,b,c){b.exports=function(a){return a.handlers.filterStart=a.handlers.filterStart||[],a.handlers.filterComplete=a.handlers.filterComplete||[],function(b){if(a.trigger("filterStart"),a.i=1,a.reset.filter(),void 0===b)a.filtered=!1;else{a.filtered=!0;for(var c=a.items,d=0,e=c.length;d<e;d++){var f=c[d];b(f)?f.filtered=!0:f.filtered=!1}}return a.update(),a.trigger("filterComplete"),a.visibleItems}}},{}],4:[function(a,b,c){b.exports=function(a){return function(b,c,d){var e=this;this._values={},this.found=!1,this.filtered=!1;var f=function(b,c,d){if(void 0===c)d?e.values(b,d):e.values(b);else{e.elm=c;var f=a.templater.get(e,b);e.values(f)}};this.values=function(b,c){if(void 0===b)return e._values;for(var d in b)e._values[d]=b[d];c!==!0&&a.templater.set(e,e.values())},this.show=function(){a.templater.show(e)},this.hide=function(){a.templater.hide(e)},this.matching=function(){return a.filtered&&a.searched&&e.found&&e.filtered||a.filtered&&!a.searched&&e.filtered||!a.filtered&&a.searched&&e.found||!a.filtered&&!a.searched},this.visible=function(){return!(!e.elm||e.elm.parentNode!=a.list)},f(b,c,d)}}},{}],5:[function(a,b,c){b.exports=function(b){var c=a("./item")(b),d=function(a){for(var b=a.childNodes,c=[],d=0,e=b.length;d<e;d++)void 0===b[d].data&&c.push(b[d]);return c},e=function(a,d){for(var e=0,f=a.length;e<f;e++)b.items.push(new c(d,a[e]))},f=function(a,c){var d=a.splice(0,50);e(d,c),a.length>0?setTimeout(function(){f(a,c)},1):(b.update(),b.trigger("parseComplete"))};return b.handlers.parseComplete=b.handlers.parseComplete||[],function(){var a=d(b.list),c=b.valueNames;b.indexAsync?f(a,c):e(a,c)}}},{"./item":4}],6:[function(a,b,c){b.exports=function(a){var b,c,d,e,f={resetList:function(){a.i=1,a.templater.clear(),e=void 0},setOptions:function(a){2==a.length&&a[1]instanceof Array?c=a[1]:2==a.length&&"function"==typeof a[1]?e=a[1]:3==a.length&&(c=a[1],e=a[2])},setColumns:function(){0!==a.items.length&&void 0===c&&(c=void 0===a.searchColumns?f.toArray(a.items[0].values()):a.searchColumns)},setSearchString:function(b){b=a.utils.toString(b).toLowerCase(),b=b.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),d=b},toArray:function(a){var b=[];for(var c in a)b.push(c);return b}},g={list:function(){for(var b=0,c=a.items.length;b<c;b++)g.item(a.items[b])},item:function(a){a.found=!1;for(var b=0,d=c.length;b<d;b++)if(g.values(a.values(),c[b]))return void(a.found=!0)},values:function(c,e){return!!(c.hasOwnProperty(e)&&(b=a.utils.toString(c[e]).toLowerCase(),""!==d&&b.search(d)>-1))},reset:function(){a.reset.search(),a.searched=!1}},h=function(b){return a.trigger("searchStart"),f.resetList(),f.setSearchString(b),f.setOptions(arguments),f.setColumns(),""===d?g.reset():(a.searched=!0,e?e(d,c):g.list()),a.update(),a.trigger("searchComplete"),a.visibleItems};return a.handlers.searchStart=a.handlers.searchStart||[],a.handlers.searchComplete=a.handlers.searchComplete||[],a.utils.events.bind(a.utils.getByClass(a.listContainer,a.searchClass),"keyup",function(b){var c=b.target||b.srcElement,d=""===c.value&&!a.searched;d||h(c.value)}),a.utils.events.bind(a.utils.getByClass(a.listContainer,a.searchClass),"input",function(a){var b=a.target||a.srcElement;""===b.value&&h("")}),h}},{}],7:[function(a,b,c){b.exports=function(a){a.sortFunction=a.sortFunction||function(b,c,d){return d.desc="desc"==d.order,a.utils.naturalSort(b.values()[d.valueName],c.values()[d.valueName],d)};var b={els:void 0,clear:function(){for(var c=0,d=b.els.length;c<d;c++)a.utils.classes(b.els[c]).remove("asc"),a.utils.classes(b.els[c]).remove("desc")},getOrder:function(b){var c=a.utils.getAttribute(b,"data-order");return"asc"==c||"desc"==c?c:a.utils.classes(b).has("desc")?"asc":a.utils.classes(b).has("asc")?"desc":"asc"},getInSensitive:function(b,c){var d=a.utils.getAttribute(b,"data-insensitive");"false"===d?c.insensitive=!1:c.insensitive=!0},setOrder:function(c){for(var d=0,e=b.els.length;d<e;d++){var f=b.els[d];if(a.utils.getAttribute(f,"data-sort")===c.valueName){var g=a.utils.getAttribute(f,"data-order");"asc"==g||"desc"==g?g==c.order&&a.utils.classes(f).add(c.order):a.utils.classes(f).add(c.order)}}}},c=function(){a.trigger("sortStart");var c={},d=arguments[0].currentTarget||arguments[0].srcElement||void 0;d?(c.valueName=a.utils.getAttribute(d,"data-sort"),b.getInSensitive(d,c),c.order=b.getOrder(d)):(c=arguments[1]||c,c.valueName=arguments[0],c.order=c.order||"asc",c.insensitive="undefined"==typeof c.insensitive||c.insensitive),b.clear(),b.setOrder(c),c.sortFunction=c.sortFunction||a.sortFunction,a.items.sort(function(a,b){var d="desc"===c.order?-1:1;return c.sortFunction(a,b,c)*d}),a.update(),a.trigger("sortComplete")};return a.handlers.sortStart=a.handlers.sortStart||[],a.handlers.sortComplete=a.handlers.sortComplete||[],b.els=a.utils.getByClass(a.listContainer,a.sortClass),a.utils.events.bind(b.els,"click",c),a.on("searchStart",b.clear),a.on("filterStart",b.clear),c}},{}],8:[function(a,b,c){var d=function(a){var b,c=this,d=function(){b=c.getItemSource(a.item),b=c.clearSourceItem(b,a.valueNames)};this.clearSourceItem=function(b,c){for(var d=0,e=c.length;d<e;d++){var f;if(c[d].data)for(var g=0,h=c[d].data.length;g<h;g++)b.setAttribute("data-"+c[d].data[g],"");else c[d].attr&&c[d].name?(f=a.utils.getByClass(b,c[d].name,!0),f&&f.setAttribute(c[d].attr,"")):(f=a.utils.getByClass(b,c[d],!0),f&&(f.innerHTML=""));f=void 0}return b},this.getItemSource=function(b){if(void 0===b){for(var c=a.list.childNodes,d=0,e=c.length;d<e;d++)if(void 0===c[d].data)return c[d].cloneNode(!0)}else{if(/^tr[\s>]/.exec(b)){var f=document.createElement("table");return f.innerHTML=b,f.firstChild}if(b.indexOf("<")!==-1){var g=document.createElement("div");return g.innerHTML=b,g.firstChild}var h=document.getElementById(a.item);if(h)return h}throw new Error("The list need to have at list one item on init otherwise you'll have to add a template.")},this.get=function(b,d){c.create(b);for(var e={},f=0,g=d.length;f<g;f++){var h;if(d[f].data)for(var i=0,j=d[f].data.length;i<j;i++)e[d[f].data[i]]=a.utils.getAttribute(b.elm,"data-"+d[f].data[i]);else d[f].attr&&d[f].name?(h=a.utils.getByClass(b.elm,d[f].name,!0),e[d[f].name]=h?a.utils.getAttribute(h,d[f].attr):""):(h=a.utils.getByClass(b.elm,d[f],!0),e[d[f]]=h?h.innerHTML:"");h=void 0}return e},this.set=function(b,d){var e=function(b){for(var c=0,d=a.valueNames.length;c<d;c++)if(a.valueNames[c].data){for(var e=a.valueNames[c].data,f=0,g=e.length;f<g;f++)if(e[f]===b)return{data:b}}else{if(a.valueNames[c].attr&&a.valueNames[c].name&&a.valueNames[c].name==b)return a.valueNames[c];if(a.valueNames[c]===b)return b}},f=function(c,d){var f,g=e(c);g&&(g.data?b.elm.setAttribute("data-"+g.data,d):g.attr&&g.name?(f=a.utils.getByClass(b.elm,g.name,!0),f&&f.setAttribute(g.attr,d)):(f=a.utils.getByClass(b.elm,g,!0),f&&(f.innerHTML=d)),f=void 0)};if(!c.create(b))for(var g in d)d.hasOwnProperty(g)&&f(g,d[g])},this.create=function(a){if(void 0!==a.elm)return!1;var d=b.cloneNode(!0);return d.removeAttribute("id"),a.elm=d,c.set(a,a.values()),!0},this.remove=function(b){b.elm.parentNode===a.list&&a.list.removeChild(b.elm)},this.show=function(b){c.create(b),a.list.appendChild(b.elm)},this.hide=function(b){void 0!==b.elm&&b.elm.parentNode===a.list&&a.list.removeChild(b.elm)},this.clear=function(){if(a.list.hasChildNodes())for(;a.list.childNodes.length>=1;)a.list.removeChild(a.list.firstChild)},d()};b.exports=function(a){return new d(a)}},{}],9:[function(a,b,c){function d(a){if(!a||!a.nodeType)throw new Error("A DOM element reference is required");this.el=a,this.list=a.classList}var e=a("./index-of"),f=/\s+/,g=Object.prototype.toString;b.exports=function(a){return new d(a)},d.prototype.add=function(a){if(this.list)return this.list.add(a),this;var b=this.array(),c=e(b,a);return~c||b.push(a),this.el.className=b.join(" "),this},d.prototype.remove=function(a){if("[object RegExp]"==g.call(a))return this.removeMatching(a);if(this.list)return this.list.remove(a),this;var b=this.array(),c=e(b,a);return~c&&b.splice(c,1),this.el.className=b.join(" "),this},d.prototype.removeMatching=function(a){for(var b=this.array(),c=0;c<b.length;c++)a.test(b[c])&&this.remove(b[c]);return this},d.prototype.toggle=function(a,b){return this.list?("undefined"!=typeof b?b!==this.list.toggle(a,b)&&this.list.toggle(a):this.list.toggle(a),this):("undefined"!=typeof b?b?this.add(a):this.remove(a):this.has(a)?this.remove(a):this.add(a),this)},d.prototype.array=function(){var a=this.el.getAttribute("class")||"",b=a.replace(/^\s+|\s+$/g,""),c=b.split(f);return""===c[0]&&c.shift(),c},d.prototype.has=d.prototype.contains=function(a){return this.list?this.list.contains(a):!!~e(this.array(),a)}},{"./index-of":14}],10:[function(a,b,c){var d=window.addEventListener?"addEventListener":"attachEvent",e=window.removeEventListener?"removeEventListener":"detachEvent",f="addEventListener"!==d?"on":"",g=a("./to-array");c.bind=function(a,b,c,e){a=g(a);for(var h=0;h<a.length;h++)a[h][d](f+b,c,e||!1)},c.unbind=function(a,b,c,d){a=g(a);for(var h=0;h<a.length;h++)a[h][e](f+b,c,d||!1)}},{"./to-array":16}],11:[function(a,b,c){b.exports=function(a){for(var b,c=Array.prototype.slice.call(arguments,1),d=0;b=c[d];d++)if(b)for(var e in b)a[e]=b[e];return a}},{}],12:[function(a,b,c){b.exports=function(a,b){var c=a.getAttribute&&a.getAttribute(b)||null;if(!c)for(var d=a.attributes,e=d.length,f=0;f<e;f++)void 0!==b[f]&&b[f].nodeName===b&&(c=b[f].nodeValue);return c}},{}],13:[function(a,b,c){b.exports=function(){return document.getElementsByClassName?function(a,b,c){return c?a.getElementsByClassName(b)[0]:a.getElementsByClassName(b)}:document.querySelector?function(a,b,c){return b="."+b,c?a.querySelector(b):a.querySelectorAll(b)}:function(a,b,c){var d=[],e="*";null===a&&(a=document);for(var f=a.getElementsByTagName(e),g=f.length,h=new RegExp("(^|\\s)"+b+"(\\s|$)"),i=0,j=0;i<g;i++)if(h.test(f[i].className)){if(c)return f[i];d[j]=f[i],j++}return d}}()},{}],14:[function(a,b,c){var d=[].indexOf;b.exports=function(a,b){if(d)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}},{}],15:[function(a,b,c){b.exports=function(a,b,c){var d,e,f=/(^([+\-]?(?:\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[\da-fA-F]+$|\d+)/g,g=/^\s+|\s+$/g,h=/\s+/g,i=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,j=/^0x[0-9a-f]+$/i,k=/^0/,l=c||{},m=function(a){return l.insensitive&&(""+a).toLowerCase()||""+a},n=m(a)||"",o=m(b)||"",p=n.replace(f,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),q=o.replace(f,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),r=parseInt(n.match(j),16)||1!==p.length&&Date.parse(n),s=parseInt(o.match(j),16)||r&&o.match(i)&&Date.parse(o)||null,t=function(a,b){return(!a.match(k)||1==b)&&parseFloat(a)||a.replace(h," ").replace(g,"")||0};if(s){if(r<s)return-1;if(r>s)return 1}for(var u=0,v=p.length,w=q.length,x=Math.max(v,w);u<x;u++){if(d=t(p[u],v),e=t(q[u],w),isNaN(d)!==isNaN(e))return isNaN(d)?1:-1;if(typeof d!=typeof e&&(d+="",e+=""),d<e)return-1;if(d>e)return 1}return 0}},{}],16:[function(a,b,c){function d(a){return"[object Array]"===Object.prototype.toString.call(a)}b.exports=function(a){if("undefined"==typeof a)return[];if(null===a)return[null];if(a===window)return[window];if("string"==typeof a)return[a];if(d(a))return a;if("number"!=typeof a.length)return[a];if("function"==typeof a&&a instanceof Function)return[a];for(var b=[],c=0;c<a.length;c++)(Object.prototype.hasOwnProperty.call(a,c)||c in a)&&b.push(a[c]);return b.length?b:[]}},{}],17:[function(a,b,c){b.exports=function(a){return a=void 0===a?"":a,a=null===a?"":a,a=a.toString()}},{}]},{},[1]);
define('filter_oembed/responsivecontent', ["jquery"],function(a){var b=function(){this.apply=function(b){if(!b){var c=".oembed-content:not(.oembed-responsive) > *:not(video):first-child,";c+=" .oembed-card:not(.oembed-processed)",b=a(c)}a(b).each(function(){var b=a(this).parent();if(!b.hasClass("oembed-responsive")){var c,d,e;e=this.getAttribute("data-aspect-ratio"),null!==e&&"0"!==e||(c=this.width||this.offsetWidth,d=this.height||this.offsetHeight,(c.indexOf("%")>-1&&d.indexOf("%")==-1||c.indexOf("%")==-1&&d.indexOf("%")>-1)&&(a(this).parent().attr("data-card-width")&&a(this).parent().attr("data-card-height")?(c=a(this).parent().attr("data-card-width"),d=a(this).parent().attr("data-card-height")):(c=this.offsetWidth,d=this.offsetHeight)),c=parseInt(c),d=parseInt(d),e=d/c,this.setAttribute("data-aspect-ratio",e));var f=this.tagName.toLowerCase();"iframe"===f&&(a(this).removeAttr("width"),a(this).removeAttr("height")),c=parseInt(this.offsetWidth);var g={width:"100%"};if(a(this).css(g),!b.find(".oembed-responsive-pad").length){var h=100*e,i='<div class="oembed-responsive-pad" style="padding-top:'+h+'%"></div>';b.append(i)}b.addClass("oembed-responsive")}})}};return new b});
define('filter_oembed/manageproviders', ["jquery","core/notification","core/ajax","core/templates","core/fragment","core/str","filter_oembed/list"],function(a,b,c,d,e,f,g){return{prevEditId:null,reloadRow:function(e,f,g,h){g=g?g:"reload",c.call([{methodname:"filter_oembed_provider_manage",args:{pid:e,action:g},done:function(b){d.render("filter_oembed/managementpagerow",b.providermodel).done(function(b){a(f).replaceWith(b),f=a("#oembed-display-providers_"+e),"function"==typeof h&&h(f)})},fail:function(a){b.exception(a)}}],!0,!0)},reloadProviders:function(e){c.call([{methodname:"filter_oembed_providers",args:{scope:"all"},done:function(b){d.render("filter_oembed/managementpage",b).done(function(b){var c=a(a.parseHTML(b)).html();a("#providermanagement").html(c),"function"==typeof e&&e()})},fail:function(a){b.exception(a)}}],!0,!0)},listenEnableDisable:function(){var b=this;a("#providermanagement").on("click",".oembed-provider-actions .filter-oembed-visibility",function(c){c.preventDefault();var d=a(this).parents("tr")[0],e=a(d).data("pid"),f=!a(d).hasClass("dimmed_text"),g=f?"disable":"enable";b.reloadRow(e,d,g)})},listenDelete:function(){var d=function(d){var e=a(d).data("pid");c.call([{methodname:"filter_oembed_provider_manage",args:{pid:e,action:"delete"},done:function(){a(d).remove()},fail:function(a){b.exception(a)}}],!0,!0)};a("#providermanagement").on("click",".oembed-provider-actions .filter-oembed-delete",function(c){c.preventDefault();var e=a(this).parents("tr")[0],g=a(a(this).parents("td").find(".list-providername")[0]).text();f.get_strings([{key:"deleteprovidertitle",component:"filter_oembed"},{key:"deleteproviderconfirm",component:"filter_oembed",param:g},{key:"ok",component:"core"},{key:"cancel",component:"core"}]).done(function(a){var c=a[0],f=a[1],g=a[2],h=a[3];b.confirm(c,f,g,h,function(){d(e)})})})},listenEdit:function(){var b=this,c=function(b){var c="#oembed-display-providers_"+b;a(c).removeClass("oembed-provider-editing"),a(c+" form").remove(),a(c+" td div.alert").remove()},f=function(b,c,f){var g,h=new RegExp("(?:course-)(\\S)"),i=h.exec(a("body").attr("class")),j=parseInt(i[1]);g=c?{formdata:c,pid:b}:{pid:b},e.loadFragment("filter_oembed","provider",j,g).done(function(c,e){a("#oembed-display-providers_"+b).addClass("oembed-provider-editing"),d.replaceNodeContents(a("#oembed-display-providers_"+b+" .oembed-provider-details"),c,e),"function"==typeof f&&f()})};a("#providermanagement").on("click",".oembed-provider-actions .filter-oembed-edit",function(d){d.preventDefault();var e=a(this).parents("tr")[0],g=a(e).data("pid");null!==b.prevEditId&&(c(b.prevEditId),c(g)),b.prevEditId=g,f(g)}),a("#providermanagement").on("click",".oembed-provider-details form #id_submitbutton",function(d){d.preventDefault();var e=a(this).parents("tr")[0],g=a(e).data("pid"),h=a(this).parents("form")[0],i=a(h).find('input[name="source"]').val();a(h).trigger("save-form-state");var j=a(h).serialize();f(g,j,function(){var d="#oembed-display-providers_"+g+" .oembed-provider-details",f=d+" div.alert-success",h=a(f);if(h.length){var j=h[0].outerHTML;if(c(g),i.indexOf("download::")>-1){var k=d+" .js-oembed-newprovider",l=a(k);l.length&&(g=l.data("newproviderid"))}var m=function(){var b=a("#oembed-display-providers_"+g+" td");a(b).append(j),a(b).find(" div.alert-success").attr("tabindex",-1),a(b).find(" div.alert-success").focus()};i.indexOf("download::")>-1?b.reloadProviders(m):b.reloadRow(g,e,"reload",m)}})}),a("#providermanagement").on("click",".oembed-provider-details form #id_cancel",function(b){b.preventDefault();var d=a(this).parents("tr")[0];c(a(d).data("pid"))})},init:function(){var a={valueNames:["list-providername"]};new g("providermanagement",a),this.listenEnableDisable(),this.listenDelete(),this.listenEdit()}}});
define ("profilefield_vendor/vendor",["jquery","core/ajax","core/notification"],function(a,b){return{list:function list(a){var c,c=b.call([{methodname:"profilefield_vendor_get_vendors",args:a}])[0];return c},processResults:function processResults(b,c){var d=[];data=JSON.parse(c.resp)[0];a.each(data,function(a,b){d.push({value:b.id,label:b.name})});return d},transport:function transport(b,c,d){var e=a(b).attr("data-identifier");this.list({query:c,identifier:e}).then(d)}}});
define('report_allylti/main', ["jquery"],function(a){return{init:function(){a('body:not(.moodlebehat-test) a[href*="report/allylti/launch.php?reporttype=course"]').attr("target","_blank")}}});
define ("report_competency/grading_popup",["jquery","core/notification","core/str","core/ajax","core/log","core/templates","tool_lp/dialogue"],function(a,b,c,d,f,g,h){var i=function(b,c){this._regionSelector=b;this._userCompetencySelector=c;a(this._regionSelector).on("click",this._userCompetencySelector,this._handleClick.bind(this))};i.prototype._handleClick=function(c){var e=a(c.target).closest(this._userCompetencySelector),g=a(e).data("competencyid"),h=a(e).data("courseid"),i=a(e).data("userid");f.debug("Clicked on cell: competencyId="+g+", courseId="+h+", userId="+i);var j=d.call([{methodname:"tool_lp_data_for_user_competency_summary_in_course",args:{userid:i,competencyid:g,courseid:h}},{methodname:"core_competency_user_competency_viewed_in_course",args:{userid:i,competencyid:g,courseid:h}}]);a.when.apply(a,j).then(function(a){this._contextLoaded.bind(this)(a)}.bind(this)).catch(b.exception)};i.prototype._contextLoaded=function(a){var d=this;a.displayuser=!0;g.render("tool_lp/user_competency_summary_in_course",a).done(function(a,e){c.get_string("usercompetencysummary","report_competency").done(function(b){new h(b,a,g.runTemplateJS.bind(g,e),d._refresh.bind(d),!0)}).fail(b.exception)}).fail(b.exception)};i.prototype._refresh=function(){var c=a(this._regionSelector),e=c.data("courseid"),f=c.data("moduleid"),g=c.data("userid");if(""===f){f=0}d.call([{methodname:"report_competency_data_for_report",args:{courseid:e,userid:g,moduleid:f},done:this._pageContextLoaded.bind(this),fail:b.exception}])};i.prototype._pageContextLoaded=function(a){var c=this;g.render("report_competency/report",a).done(function(a,b){g.replaceNode(c._regionSelector,a,b)}).fail(b.exception)};i.prototype._regionSelector=null;i.prototype._userCompetencySelector=null;return i});
define ("report_competency/user_course_navigation",["jquery"],function(a){var b=function(b,c,d,e,f,g){this._baseUrl=d;this._userId=e+"";this._courseId=f;this._moduleId=g;a(b).on("change",this._userChanged.bind(this));a(c).on("change",this._moduleChanged.bind(this))};b.prototype._userChanged=function(b){var c=a(b.target).val(),d="?user="+c+"&id="+this._courseId+"&mod="+this._moduleId;document.location=this._baseUrl+d};b.prototype._moduleChanged=function(b){var c=a(b.target).val(),d="?mod="+c+"&id="+this._courseId+"&user="+this._userId;document.location=this._baseUrl+d};b.prototype._userId=null;b.prototype._moduleId=null;b.prototype._courseId=null;b.prototype._baseUrl=null;return b});
define ("report_insights/message_users",["jquery","core/str","core/log","core/modal_factory","core/modal_events","core/templates","core/notification","core/ajax"],function(a,b,c,d,e,f,g,h){var i={BULKACTIONSELECT:"#formactionid"},j=function(a,b){this.actionName=b;this.attachEventListeners(a)};j.prototype.actionName=null;j.prototype.modal=null;j.prototype.attachEventListeners=function(b){a(b+" button[data-bulk-sendmessage]").on("click",function(b){b.preventDefault();var d=a(b.currentTarget),e={},f=d.data("prediction-to-user-id");a(".insights-list input[data-togglegroup^=\"insight-bulk-action\"][data-toggle=\"slave\"]:checked").each(function(b,d){var g=a(d).closest("tr[data-prediction-id]").data("prediction-id");if("undefined"==typeof f[g]){c.error("Unknown user for prediction "+g);return}var h=f[g];e[g]=h});if(0===Object.keys(e).length){return this}this.showSendMessage(e);return this}.bind(this))};j.prototype.showSendMessage=function(c){var g=new Set(Object.values(c));if(0==g.length){return a.Deferred().resolve().promise()}var h=null;if(1==g.size){h=b.get_string("sendbulkmessagesingle","core_message")}else{h=b.get_string("sendbulkmessage","core_message",g.size)}return a.when(d.create({type:d.types.SAVE_CANCEL,body:f.render("core_user/send_bulk_message",{})}),h).then(function(b,d){this.modal=b;this.modal.setTitle(d);this.modal.setSaveButtonText(d);this.modal.getRoot().on(e.hidden,function(){a(i.BULKACTIONSELECT).focus();this.modal.getRoot().remove()}.bind(this));this.modal.getRoot().on(e.save,this.submitSendMessage.bind(this,c));this.modal.show();return this.modal}.bind(this))};j.prototype.submitSendMessage=function(a){var c=this.modal.getRoot().find("form textarea").val(),d=[],e=new Set(Object.values(a));e.forEach(function(a){d.push({touserid:a,text:c})});var f=this.actionName,i=null;return h.call([{methodname:"core_message_send_instant_messages",args:{messages:d}}])[0].then(function(a){if(1==a.length){return b.get_string("sendbulkmessagesentsingle","core_message")}else{return b.get_string("sendbulkmessagesent","core_message",a.length)}}).then(function(b){i=b;return h.call([{methodname:"report_insights_action_executed",args:{actionname:f,predictionids:Object.keys(a)}}])[0]}).then(function(){g.addNotification({message:i,type:"success"});return!0}).catch(g.exception)};return{init:function init(a,b){return new j(a,b)}}});
define ("report_insights/actions",["jquery","core/str","core/ajax","core/notification","core/url","core/modal_factory","core/modal_events"],function(a,b,c,d,e,f,g){return{initBulk:function initBulk(h){var i=function(a,b,f){return c.call([{methodname:"report_insights_action_executed",args:{predictionids:a,actionname:f}}])[0].then(function(){var a=!1;b.forEach(function(b){if(!1===a){a=b.closest("table")}b.remove()});if(0===a.find("tbody > tr").length){var c={contextid:a.closest("div.insight-container").data("context-id"),modelid:a.closest("div.insight-container").data("model-id")};window.location.assign(e.relativeUrl("report/insights/insights.php",c,!1))}}).catch(d.exception)};a(h+" [data-bulk-actionname]").on("click",function(c){c.preventDefault();var e=a(c.currentTarget),h=e.data("bulk-actionname"),j=e.text().trim(),k=[],l=[];a(".insights-list input[data-togglegroup^=\"insight-bulk-action-\"][data-toggle=\"slave\"]:checked").each(function(){var b=a(this).closest("tr[data-prediction-id]");l.push(b);k.push(b.data("prediction-id"))});if(0===k.length){return this}var m=[];b.get_strings([{key:"confirmbulkaction",component:"report_insights",param:{action:j,nitems:k.length}},{key:"confirm",component:"moodle"}]).then(function(a){m=a;return f.create({type:f.types.SAVE_CANCEL,title:j,body:m[0]})}).then(function(a){a.setSaveButtonText(m[1]);a.show();a.getRoot().on(g.save,function(){return i(k,l,h)});return a}).catch(d.exception);return this})}}});
define ("report_progress/completion_override",["jquery","core/ajax","core/str","core/modal_factory","core/modal_events","core/notification","core/custom_interaction_events","core/templates"],function(a,b,c,d,e,f,g,h){var i,j,k=function(a,b){return 0<a?"i/completion-"+b+"-y-override":"i/completion-"+b+"-n-override"},l=function(a){h.render("core/loading",{}).then(function(c){j.append(c);return b.call([{methodname:"core_completion_override_activity_completion_status",args:a}])[0]}).then(function(b){var d=0<b.state?1:0,e=d?"completion-y-override":"completion-n-override";c.get_string(e,"completion",i).then(function(a){var b={state:a,date:"",user:j.attr("data-userfullname"),activity:j.attr("data-activityname")};return c.get_string("progress-title","completion",b)}).then(function(a){var b=j.attr("data-completiontracking");return h.renderPix(k(d,b),"core",a)}).then(function(b){var c=0<d?0:1;j.find(".loading-icon").remove();j.data("changecompl",a.userid+"-"+a.cmid+"-"+c);j.attr("data-changecompl",a.userid+"-"+a.cmid+"-"+c);j.children("img").replaceWith(b)}).catch(f.exception)}).catch(f.exception)},m=function(b,g){g.originalEvent.preventDefault();g.originalEvent.stopPropagation();b.preventDefault();b.stopPropagation();j=a(b.currentTarget);var h=j.data("changecompl").split("-"),i={userid:h[0],cmid:h[1],newstate:h[2]},k=1==i.newstate?"completion-y":"completion-n";c.get_strings([{key:k,component:"completion"}]).then(function(a){return c.get_strings([{key:"confirm",component:"moodle"},{key:"areyousureoverridecompletion",component:"completion",param:a[0]}])}).then(function(a){return d.create({type:d.types.SAVE_CANCEL,title:a[0],body:a[1]})}).then(function(a){a.getRoot().on(e.save,function(){l(i)});a.getRoot().on(e.hidden,function(){j.focus();a.destroy()});a.show()}).catch(f.exception)};return{init:function init(b){i=b;a("#completion-progress a.changecompl").each(function(a,b){g.define(b,[g.events.activate])});a("#completion-progress").on(g.events.activate,"a.changecompl",function(a,b){m(a,b)})}}});
define ("gradingform_guide/comment_chooser",["jquery","core/templates","core/notification","core/yui"],function(a,b,c){return{initialise:function initialise(d,e,f,g){function h(b,c){var e="<label>"+M.util.get_string("insertcomment","gradingform_guide")+"</label>",g="comment-chooser-"+d+"-cancel",h="<button id=\""+g+"\">"+M.util.get_string("cancel","moodle")+"</button>",i=new M.core.dialogue({modal:!0,headerContent:e,bodyContent:b,footerContent:h,focusAfterHide:"#"+f,id:"comments-chooser-dialog-"+d});a("#"+g).click(function(){i.hide()});a.each(c,function(b,c){var e="#comment-option-"+d+"-"+c.id;a(e).click(function(){var b=a("#"+f),d=b.val();if(""!==a.trim(d)){d+="\n"}d+=c.description;b.val(d);i.hide()});a(document).off("keypress",e).on("keypress",e,function(){var b=event.which||event.keyCode;if(13==b||32==b){a(e).click()}})});i.after("visibleChange",function(a){if(a.prevVal&&!a.newVal){this.destroy()}},i);i.show()}function i(){b.render("gradingform_guide/comment_chooser",{criterionId:d,comments:g}).done(function(a){h(a,g)}).fail(c.exception)}a("#"+e).click(function(a){a.preventDefault();i()})}}});
define ("gradingform_guide/grades/grader/gradingpanel/comments",["exports","./comments/selectors"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;b=function(a){return a&&a.__esModule?a:{default:a}}(b);a.init=function init(a){var c=document.querySelector("#".concat(a));c.addEventListener("click",function(a){if(!a.target.matches(b.default.frequentComment)){return}a.preventDefault();var c=a.target.closest(b.default.frequentComment),d=c.closest(b.default.criterion),e=d.querySelector(b.default.remark);if(!e){return}if(e.value.trim()){e.value+="\n".concat(c.innerHTML)}else{e.value+=c.innerHTML}})}});
define ("gradingform_guide/grades/grader/gradingpanel/comments/selectors",["exports"],function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;a.default={frequentComment:"[data-gradingform_guide-role=\"frequent-comment\"]",criterion:"[data-gradingform-guide-role=\"criterion\"]",remark:"[data-gradingform-guide-role=\"remark\"]"};return a.default});
define ("gradingform_guide/grades/grader/gradingpanel",["exports","core/ajax","core_grades/grades/grader/gradingpanel/normalise","core_grades/grades/grader/gradingpanel/comparison","jquery"],function(a,b,c,d,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.storeCurrentGrade=a.fetchCurrentGrade=void 0;e=function(a){return a&&a.__esModule?a:{default:a}}(e);function f(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}if(h.done){b(i)}else{Promise.resolve(i).then(d,e)}}function g(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var i=a.apply(b,c);function g(a){f(i,d,e,g,h,"next",a)}function h(a){f(i,d,e,g,h,"throw",a)}g(void 0)})}}a.fetchCurrentGrade=function fetchCurrentGrade(a,c,d,e){return(0,b.call)([{methodname:"gradingform_guide_grader_gradingpanel_fetch",args:{component:a,contextid:c,itemname:d,gradeduserid:e}}])[0]};var h=function(){var a=g(regeneratorRuntime.mark(function a(f,g,h,i,j,k){var l;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:l=k.querySelector("form");if(!(!0===(0,d.compareData)(l))){a.next=9;break}a.t0=c.normaliseResult;a.next=5;return(0,b.call)([{methodname:"gradingform_guide_grader_gradingpanel_store",args:{component:f,contextid:g,itemname:h,gradeduserid:i,notifyuser:j,formdata:(0,e.default)(l).serialize()}}])[0];case 5:a.t1=a.sent;return a.abrupt("return",(0,a.t0)(a.t1));case 9:return a.abrupt("return","");case 10:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}();a.storeCurrentGrade=h});
define ("gradingform_rubric/grades/grader/gradingpanel",["exports","core/ajax","core_grades/grades/grader/gradingpanel/normalise","core_grades/grades/grader/gradingpanel/comparison","jquery"],function(a,b,c,d,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.storeCurrentGrade=a.fetchCurrentGrade=void 0;e=function(a){return a&&a.__esModule?a:{default:a}}(e);function f(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}if(h.done){b(i)}else{Promise.resolve(i).then(d,e)}}function g(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var i=a.apply(b,c);function g(a){f(i,d,e,g,h,"next",a)}function h(a){f(i,d,e,g,h,"throw",a)}g(void 0)})}}a.fetchCurrentGrade=function fetchCurrentGrade(a,c,d,e){return(0,b.call)([{methodname:"gradingform_rubric_grader_gradingpanel_fetch",args:{component:a,contextid:c,itemname:d,gradeduserid:e}}])[0]};var h=function(){var a=g(regeneratorRuntime.mark(function a(f,g,h,i,j,k){var l;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:l=k.querySelector("form");if(!(!0===(0,d.compareData)(l))){a.next=9;break}a.t0=c.normaliseResult;a.next=5;return(0,b.call)([{methodname:"gradingform_rubric_grader_gradingpanel_store",args:{component:f,contextid:g,itemname:h,gradeduserid:i,notifyuser:j,formdata:(0,e.default)(l).serialize()}}])[0];case 5:a.t1=a.sent;return a.abrupt("return",(0,a.t0)(a.t1));case 9:return a.abrupt("return","");case 10:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}();a.storeCurrentGrade=h});
define('tool_ally/logviewer', ["jquery","tool_ally/main","core/ajax","tool_ally/vuecomp/th-Filter","tool_ally/vuecomp/td-HTML","tool_ally/vuecomp/td-LogDetails"],function(a,b,c,d,e,f){return{Vue:null,globalComponents:{},init:function(){var a=this,g=null,h=function(a){return'<div id="'+a+'"><datatable v-bind="data"></datatable></div>'},i={props:["data"],template:h("dt-allylog")};this.globalComponents.thFilter=d,this.globalComponents.tdHTML=e,this.globalComponents.tdLogDetails=f,c.call([{methodname:"tool_ally_get_logs",args:{query:null}}])[0].then(function(d){g=d;var e=[{path:"/",redirect:"/logView"},{path:"/logView",component:i,props:{data:g}}];b.init({data:{logData:g},routes:e,globalComponents:a.globalComponents,watch:{"logData.query":{handler:function(b){c.call([{methodname:"tool_ally_get_logs",args:{query:JSON.stringify(b)}}])[0].then(function(b){g=b,a.Vue.logData.data=g.data,a.Vue.logData.total=g.total})},deep:!0}}}).then(function(b){a.Vue=b})})}}});
!function(){var a=function(a){return M.cfg.wwwroot+"/pluginfile.php/"+M.cfg.contextid+"/tool_ally/"+a};require.config({enforceDefine:!1,paths:{"tool_ally/vue_2_5_16":["https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.min",a("vendorjs/vue")],"tool_ally/vuerouter_2_5_3":["https://cdn.jsdelivr.net/npm/vue-router@2.5.3/dist/vue-router.min",a("vendorjs/vuerouter")],"tool_ally/vuedatatable":a("vendorjs/vuedatatable"),"tool_ally/vuecomp":[a("vue/comps")]}})}(),define('tool_ally/main', ["jquery","tool_ally/vue_2_5_16","tool_ally/vuerouter_2_5_3","tool_ally/vuedatatable"],function(a,b,c,d){return b.use(c),b.use(d["default"]),{vue:null,getBootstrapVersion:function(){var a=2;return window.$&&window.$.fn&&window.$.fn.tooltip&&window.$.fn.tooltip.Constructor&&(a=window.$.fn.tooltip.Constructor.VERSION,void 0===a&&(a=2)),a=parseInt(a)},applyBootstrapClass:function(){a("body").addClass("bs-major-version-"+this.getBootstrapVersion())},init:function(d){this.applyBootstrapClass();var e=a.Deferred();return a(document).ready(function(){var a={el:"#app",router:null};for(var f in d)d.hasOwnProperty(f)&&(a[f]=d[f]);if(a.routes&&(a.router=new c({routes:a.routes})),a.globalComponents)for(var g in a.globalComponents)if(a.globalComponents.hasOwnProperty(g)){var h=a.globalComponents[g];b.component(g,h)}this.vue=new b(a).$mount("#app"),e.resolve(this.vue)}),e}}});
define ("tool_dataprivacy/form-user-selector",["jquery","core/ajax","core/templates"],function(a,b,c){return{processResults:function processResults(b,c){var d=[];a.each(c,function(a,b){d.push({value:b.id,label:b._label})});return d},transport:function transport(d,e,f,g){var h=b.call([{methodname:"tool_dataprivacy_get_users",args:{query:e}}]);h[0].then(function(b){var d=[],e=0;a.each(b,function(a,b){d.push(c.render("tool_dataprivacy/form-user-selector-suggestion",b))});return a.when.apply(a.when,d).then(function(){var c=arguments;a.each(b,function(a,b){b._label=c[e];e++});f(b)})}).fail(g)}}});
define ("tool_dataprivacy/add_purpose",["jquery","core/str","core/ajax","core/notification","core/modal_factory","core/modal_events","core/fragment"],function(a,b,c,d,e,f,g){var h={PURPOSE_LINK:"[data-add-element=\"purpose\"]"},i=function(a){this.contextId=a;this.strings=b.get_strings([{key:"addpurpose",component:"tool_dataprivacy"},{key:"save",component:"admin"}]);this.registerEventListeners()};i.prototype.contextId=0;i.prototype.strings=0;i.prototype.registerEventListeners=function(){var b=a(h.PURPOSE_LINK);b.on("click",function(){return this.strings.then(function(a){e.create({type:e.types.SAVE_CANCEL,title:a[0],body:""},b).done(function(b){this.setupFormModal(b,a[1])}.bind(this))}.bind(this)).fail(d.exception)}.bind(this))};i.prototype.getBody=function(a){var b=null;if("undefined"!=typeof a){b={jsonformdata:JSON.stringify(a)}}return g.loadFragment("tool_dataprivacy","addpurpose_form",this.contextId,b)};i.prototype.setupFormModal=function(a,b){a.setLarge();a.setSaveButtonText(b);a.getRoot().on(f.hidden,this.destroy.bind(this));a.setBody(this.getBody());a.getRoot().on(f.save,this.submitForm.bind(this));a.getRoot().on("submit","form",this.submitFormAjax.bind(this));this.modal=a;a.show()};i.prototype.submitForm=function(a){a.preventDefault();this.modal.getRoot().find("form").submit()};i.prototype.submitFormAjax=function(a){a.preventDefault();var b=this.modal.getRoot().find("form").serialize();c.call([{methodname:"tool_dataprivacy_create_purpose_form",args:{jsonformdata:JSON.stringify(b)},done:function(a){if(a.validationerrors){this.modal.setBody(this.getBody(b))}else{this.close()}}.bind(this),fail:d.exception}])};i.prototype.close=function(){this.destroy();document.location.reload()};i.prototype.destroy=function(){Y.use("moodle-core-formchangechecker",function(){M.core_formchangechecker.reset_form_dirty_state()});this.modal.destroy()};i.prototype.removeListeners=function(){a(h.PURPOSE_LINK).off("click")};return{getInstance:function getInstance(a){return new i(a)}}});
define ("tool_dataprivacy/request_filter",["jquery","core/form-autocomplete","core/str","core/notification"],function(a,b,c,d){var e={REQUEST_FILTERS:"#request-filters"},f=function init(){c.get_strings([{key:"filter",component:"moodle"},{key:"nofiltersapplied",component:"moodle"}]).then(function(a){var c=a[0],d=a[1];return b.enhance(e.REQUEST_FILTERS,!1,"",c,!1,!0,d,!0)}).fail(d.exception);var f=a(e.REQUEST_FILTERS).val();a(e.REQUEST_FILTERS).on("change",function(){var b=a(this).val();if(f.join(",")!==b.join(",")){if(0===b.length){a("#filters-cleared").val(1)}a(this.form).submit()}})};return{init:function init(){f()}}});
define ("tool_dataprivacy/expand_contract",["jquery","core/url","core/str"],function(a,b,c){var d=a("<img alt=\"\" src=\""+b.imageUrl("t/expanded")+"\"/>"),e=a("<img alt=\"\" src=\""+b.imageUrl("t/collapsed")+"\"/>"),f={EXPAND:"fa-caret-right",COLLAPSE:"fa-caret-down"};return{expandCollapse:function expandCollapse(a,b){if(a.hasClass("hide")){a.removeClass("hide");a.addClass("visible");a.attr("aria-expanded",!0);b.find(":header i.fa").removeClass(f.EXPAND);b.find(":header i.fa").addClass(f.COLLAPSE);b.find(":header img.icon").attr("src",d.attr("src"))}else{a.removeClass("visible");a.addClass("hide");a.attr("aria-expanded",!1);b.find(":header i.fa").removeClass(f.COLLAPSE);b.find(":header i.fa").addClass(f.EXPAND);b.find(":header img.icon").attr("src",e.attr("src"))}},expandCollapseAll:function expandCollapseAll(b){var g="visible"==b?"hide":"visible",h="visible"==b?!0:!1,i="visible"==b?f.EXPAND:f.COLLAPSE,j="visible"==b?f.COLLAPSE:f.EXPAND,k="visible"==b?d.attr("src"):e.attr("src");a("."+g).each(function(){a(this).removeClass(g);a(this).addClass(b);a(this).attr("aria-expanded",h)});a(".tool_dataprivacy-expand-all").data("visibilityState",g);c.get_string(g,"tool_dataprivacy").then(function(b){a(".tool_dataprivacy-expand-all").html(b)}).catch(Notification.exception);a(":header i.fa").each(function(){a(this).removeClass(i);a(this).addClass(j)});a(":header img.icon").each(function(){a(this).attr("src",k)})}}});
define ("tool_dataprivacy/effective_retention_period",["jquery"],function(a){var b={PURPOSE_SELECT:"#id_purposeid",RETENTION_FIELD:"#fitem_id_retention_current [data-fieldtype=static]"},c=function(a){this.purposeRetentionPeriods=a;this.registerEventListeners()},d=function(){a(b.PURPOSE_SELECT).off("change")};c.prototype.purposeRetentionPeriods=[];c.prototype.registerEventListeners=function(){a(b.PURPOSE_SELECT).on("change",function(c){var d=a(c.currentTarget).val(),e=this.purposeRetentionPeriods[d];a(b.RETENTION_FIELD).text(e)}.bind(this))};return{init:function init(a){d();return new c(a)}}});
define ("tool_dataprivacy/categoriesactions",["jquery","core/ajax","core/notification","core/str","core/modal_factory","core/modal_events"],function(a,b,c,d,e,f){var g={DELETE:"[data-action=\"deletecategory\"]"},h=function(){this.registerEvents()};h.prototype.registerEvents=function(){a(g.DELETE).click(function(g){g.preventDefault();var h=a(this).data("id"),i=a(this).data("name");d.get_strings([{key:"deletecategory",component:"tool_dataprivacy"},{key:"deletecategorytext",component:"tool_dataprivacy",param:i},{key:"delete"}]).then(function(d){var g=d[0],i=d[1],j=d[2];return e.create({title:g,body:i,type:e.types.SAVE_CANCEL}).then(function(d){d.setSaveButtonText(j);d.getRoot().on(f.save,function(){b.call([{methodname:"tool_dataprivacy_delete_category",args:{id:h}}])[0].done(function(b){if(b.result){a("tr[data-categoryid=\""+h+"\"]").remove()}else{c.addNotification({message:b.warnings[0].message,type:"error"})}}).fail(c.exception)});d.getRoot().on(f.hidden,function(){d.destroy()});return d})}).done(function(a){a.show()}).fail(c.exception)})};return{init:function init(){return new h}}});
define ("tool_dataprivacy/add_category",["jquery","core/str","core/ajax","core/notification","core/modal_factory","core/modal_events","core/fragment"],function(a,b,c,d,e,f,g){var h={CATEGORY_LINK:"[data-add-element=\"category\"]"},i=function(a){this.contextId=a;this.strings=b.get_strings([{key:"addcategory",component:"tool_dataprivacy"},{key:"save",component:"admin"}]);this.registerEventListeners()};i.prototype.contextId=0;i.prototype.strings=0;i.prototype.registerEventListeners=function(){var b=a(h.CATEGORY_LINK);b.on("click",function(){return this.strings.then(function(a){e.create({type:e.types.SAVE_CANCEL,title:a[0],body:""},b).done(function(b){this.setupFormModal(b,a[1])}.bind(this))}.bind(this)).fail(d.exception)}.bind(this))};i.prototype.getBody=function(a){var b=null;if("undefined"!=typeof a){b={jsonformdata:JSON.stringify(a)}}return g.loadFragment("tool_dataprivacy","addcategory_form",this.contextId,b)};i.prototype.setupFormModal=function(a,b){a.setLarge();a.setSaveButtonText(b);a.getRoot().on(f.hidden,this.destroy.bind(this));a.setBody(this.getBody());a.getRoot().on(f.save,this.submitForm.bind(this));a.getRoot().on("submit","form",this.submitFormAjax.bind(this));this.modal=a;a.show()};i.prototype.submitForm=function(a){a.preventDefault();this.modal.getRoot().find("form").submit()};i.prototype.submitFormAjax=function(a){a.preventDefault();var b=this.modal.getRoot().find("form").serialize();c.call([{methodname:"tool_dataprivacy_create_category_form",args:{jsonformdata:JSON.stringify(b)},done:function(a){if(a.validationerrors){this.modal.setBody(this.getBody(b))}else{this.close()}}.bind(this),fail:d.exception}])};i.prototype.close=function(){this.destroy();document.location.reload()};i.prototype.destroy=function(){Y.use("moodle-core-formchangechecker",function(){M.core_formchangechecker.reset_form_dirty_state()});this.modal.destroy()};i.prototype.removeListeners=function(){a(h.CATEGORY_LINK).off("click")};return{getInstance:function getInstance(a){return new i(a)}}});
define ("tool_dataprivacy/purposesactions",["jquery","core/ajax","core/notification","core/str","core/modal_factory","core/modal_events"],function(a,b,c,d,e,f){var g={DELETE:"[data-action=\"deletepurpose\"]"},h=function(){this.registerEvents()};h.prototype.registerEvents=function(){a(g.DELETE).click(function(g){g.preventDefault();var h=a(this).data("id"),i=a(this).data("name");d.get_strings([{key:"deletepurpose",component:"tool_dataprivacy"},{key:"deletepurposetext",component:"tool_dataprivacy",param:i},{key:"delete"}]).then(function(d){var g=d[0],i=d[1],j=d[2];return e.create({title:g,body:i,type:e.types.SAVE_CANCEL}).then(function(d){d.setSaveButtonText(j);d.getRoot().on(f.save,function(){b.call([{methodname:"tool_dataprivacy_delete_purpose",args:{id:h}}])[0].done(function(b){if(b.result){a("tr[data-purposeid=\""+h+"\"]").remove()}else{c.addNotification({message:b.warnings[0].message,type:"error"})}}).fail(c.exception)});d.getRoot().on(f.hidden,function(){d.destroy()});return d})}).done(function(a){a.show()}).fail(c.exception)})};return{init:function init(){return new h}}});
define ("tool_dataprivacy/requestactions",["jquery","core/ajax","core/notification","core/str","core/modal_factory","core/modal_events","core/templates","tool_dataprivacy/data_request_modal","tool_dataprivacy/events"],function(a,b,c,d,e,f,g,h,i){var q={APPROVE_REQUEST:"[data-action=\"approve\"]",DENY_REQUEST:"[data-action=\"deny\"]",VIEW_REQUEST:"[data-action=\"view\"]",MARK_COMPLETE:"[data-action=\"complete\"]",CHANGE_BULK_ACTION:"[id=\"bulk-action\"]",CONFIRM_BULK_ACTION:"[id=\"confirm-bulk-action\"]",SELECT_ALL:"[data-action=\"selectall\"]"},r={APPROVE:1,DENY:2},s={SELECT_REQUEST:".selectrequests"},t=function(){this.registerEvents()};t.prototype.registerEvents=function(){a(q.VIEW_REQUEST).click(function(d){d.preventDefault();var k=a(this).data("requestid"),m=b.call([{methodname:"tool_dataprivacy_get_data_request",args:{requestid:k}}]);a.when(m[0]).then(function(a){if(a.result){return a.result}c.addNotification({message:a.warnings[0].message,type:"error"});return!1}).then(function(a){var b=g.render("tool_dataprivacy/request_details",a),c={approvedeny:a.approvedeny,canmarkcomplete:a.canmarkcomplete};return e.create({title:a.typename,body:b,type:h.TYPE,large:!0,templateContext:c})}).then(function(a){a.getRoot().on(i.approve,function(){o(i.approve,j(k))});a.getRoot().on(i.deny,function(){o(i.deny,l(k))});a.getRoot().on(i.complete,function(){p("tool_dataprivacy_mark_complete",{requestid:k})});a.getRoot().on(f.hidden,function(){a.destroy()});a.show()}).catch(c.exception)});a(q.APPROVE_REQUEST).click(function(b){b.preventDefault();var c=a(this).data("requestid");o(i.approve,j(c))});a(q.DENY_REQUEST).click(function(b){b.preventDefault();var c=a(this).data("requestid");o(i.deny,l(c))});a(q.MARK_COMPLETE).click(function(b){b.preventDefault();var c=a(this).data("requestid");o(i.complete,n(c))});a(q.CONFIRM_BULK_ACTION).click(function(){var b=[],e="",f={},g=[{key:"selectbulkaction",component:"tool_dataprivacy"},{key:"selectdatarequests",component:"tool_dataprivacy"},{key:"ok"}],h=parseInt(a("#bulk-action").val());if(h!=r.APPROVE&&h!=r.DENY){d.get_strings(g).done(function(a){c.alert("",a[0],a[2])}).fail(c.exception);return}a(".selectrequests:checked").each(function(){b.push(a(this).val())});if(1>b.length){d.get_strings(g).done(function(a){c.alert("",a[1],a[2])}).fail(c.exception);return}switch(h){case r.APPROVE:e=i.bulkApprove;f=k(b);break;case r.DENY:e=i.bulkDeny;f=m(b);}o(e,f)});a(q.SELECT_ALL).change(function(b){b.preventDefault();var c=a(this).is(":checked");a(s.SELECT_REQUEST).prop("checked",c)})};function j(a){return{wsfunction:"tool_dataprivacy_approve_data_request",wsparams:{requestid:a}}}function k(a){return{wsfunction:"tool_dataprivacy_bulk_approve_data_requests",wsparams:{requestids:a}}}function l(a){return{wsfunction:"tool_dataprivacy_deny_data_request",wsparams:{requestid:a}}}function m(a){return{wsfunction:"tool_dataprivacy_bulk_deny_data_requests",wsparams:{requestids:a}}}function n(a){return{wsfunction:"tool_dataprivacy_mark_complete",wsparams:{requestid:a}}}function o(a,b){var g=[];switch(a){case i.approve:g=[{key:"approverequest",component:"tool_dataprivacy"},{key:"confirmapproval",component:"tool_dataprivacy"}];break;case i.bulkApprove:g=[{key:"bulkapproverequests",component:"tool_dataprivacy"},{key:"confirmbulkapproval",component:"tool_dataprivacy"}];break;case i.deny:g=[{key:"denyrequest",component:"tool_dataprivacy"},{key:"confirmdenial",component:"tool_dataprivacy"}];break;case i.bulkDeny:g=[{key:"bulkdenyrequests",component:"tool_dataprivacy"},{key:"confirmbulkdenial",component:"tool_dataprivacy"}];break;case i.complete:g=[{key:"markcomplete",component:"tool_dataprivacy"},{key:"confirmcompletion",component:"tool_dataprivacy"}];break;}var h="";d.get_strings(g).then(function(a){h=a[0];var b=a[1];return e.create({title:h,body:b,type:e.types.SAVE_CANCEL})}).then(function(a){a.setSaveButtonText(h);a.getRoot().on(f.save,function(){p(b.wsfunction,b.wsparams)});a.getRoot().on(f.hidden,function(){a.destroy()});a.show()}).catch(c.exception)}function p(a,d){b.call([{methodname:a,args:d}])[0].done(function(a){if(a.result){window.location.reload()}else{c.addNotification({message:a.warnings[0].message,type:"error"})}}).fail(c.exception)}return t});
define ("tool_dataprivacy/myrequestactions",["jquery","core/ajax","core/notification","core/str","core/modal_factory","core/modal_events","core/templates","core/pending"],function(a,b,c,d,e,f,g,h){var j={CANCEL_REQUEST:"[data-action=\"cancel\"]",CONTACT_DPO:"[data-action=\"contactdpo\"]"},k=function(){this.registerEvents()};k.prototype.registerEvents=function(){a(j.CANCEL_REQUEST).click(function(g){g.preventDefault();var h=a(this).data("requestid");d.get_strings([{key:"cancelrequest",component:"tool_dataprivacy"},{key:"cancelrequestconfirmation",component:"tool_dataprivacy"}]).then(function(a){var d=a[0],g=a[1];return e.create({title:d,body:g,type:e.types.SAVE_CANCEL}).then(function(a){a.setSaveButtonText(d);a.getRoot().on(f.save,function(){b.call([{methodname:"tool_dataprivacy_cancel_data_request",args:{requestid:h}}])[0].done(function(a){if(a.result){window.location.reload()}else{c.addNotification({message:a.warnings[0].message,type:"error"})}}).fail(c.exception)});a.getRoot().on(f.hidden,function(){a.destroy()});return a})}).done(function(a){a.show()}).fail(c.exception)});a(j.CONTACT_DPO).click(function(b){var j=new h("dataprivacy/crud:initModal:contactdpo");b.preventDefault();var k=a(this).data("replytoemail"),l="";d.get_strings([{key:"contactdataprotectionofficer",component:"tool_dataprivacy"},{key:"send",component:"tool_dataprivacy"}]).then(function(a){var b=a[0];l=a[1];return e.create({title:b,body:g.render("tool_dataprivacy/contact_dpo",{replytoemail:k}),type:e.types.SAVE_CANCEL,large:!0})}).then(function(b){b.setSaveButtonText(l);b.show();b.getRoot().on(f.save,function(b){var c=a("#message").val().trim();if(0===c.length){b.preventDefault();a("[data-region=\"messageinput\"]").addClass("has-danger notifyproblem");a("#id_error_message").removeAttr("hidden")}else{i(c)}});b.getRoot().on(f.hidden,function(){b.destroy()})}).then(j.resolve).catch(c.exception)})};function i(a){var e="success";b.call([{methodname:"tool_dataprivacy_contact_dpo",args:{message:a}}])[0].then(function(a){if(a.result){return d.get_string("requestsubmitted","tool_dataprivacy")}e="error";return a.warnings.join("<br>")}).done(function(a){c.addNotification({message:a,type:e})}).fail(c.exception)}return{init:function init(){return new k}}});
define ("tool_dataprivacy/data_deletion",["jquery","core/ajax","core/notification","core/str","core/modal_factory","core/modal_events"],function(a,b,c,d,e,f){var h={MARK_FOR_DELETION:"[data-action=\"markfordeletion\"]",SELECT_ALL:"[data-action=\"selectall\"]"},i={SELECTCONTEXT:".selectcontext"},j=function(){this.registerEvents()};j.prototype.registerEvents=function(){a(h.MARK_FOR_DELETION).click(function(b){b.preventDefault();var c=[];a(i.SELECTCONTEXT).each(function(){var b=a(this);if(b.is(":checked")){c.push(b.val())}});g(c)});a(h.SELECT_ALL).change(function(b){b.preventDefault();var c=a(this);if(c.is(":checked")){a(i.SELECTCONTEXT).attr("checked","checked")}else{a(i.SELECTCONTEXT).removeAttr("checked")}})};function g(a){var g="";d.get_strings([{key:"confirm",component:"moodle"},{key:"confirmcontextdeletion",component:"tool_dataprivacy"}]).then(function(a){g=a[0];var b=a[1];return e.create({title:g,body:b,type:e.types.SAVE_CANCEL})}).then(function(d){d.setSaveButtonText(g);d.getRoot().on(f.save,function(){b.call([{methodname:"tool_dataprivacy_confirm_contexts_for_deletion",args:{ids:a}}])[0].done(function(a){if(a.result){window.location.reload()}else{c.addNotification({message:a.warnings[0].message,type:"error"})}}).fail(c.exception)});d.getRoot().on(f.hidden,function(){d.destroy()});return d}).done(function(a){a.show()}).fail(c.exception)}return j});
define ("tool_dataprivacy/data_request_modal",["jquery","core/notification","core/custom_interaction_events","core/modal","core/modal_registry","tool_dataprivacy/events"],function(a,b,c,d,e,f){var g=!1,h={APPROVE_BUTTON:"[data-action=\"approve\"]",DENY_BUTTON:"[data-action=\"deny\"]",COMPLETE_BUTTON:"[data-action=\"complete\"]"},i=function(a){d.call(this,a)};i.TYPE="tool_dataprivacy-data_request";i.prototype=Object.create(d.prototype);i.prototype.constructor=i;i.prototype.registerEventListeners=function(){d.prototype.registerEventListeners.call(this);this.getModal().on(c.events.activate,h.APPROVE_BUTTON,function(b,c){var d=a.Event(f.approve);this.getRoot().trigger(d,this);if(!d.isDefaultPrevented()){this.hide();c.originalEvent.preventDefault()}}.bind(this));this.getModal().on(c.events.activate,h.DENY_BUTTON,function(b,c){var d=a.Event(f.deny);this.getRoot().trigger(d,this);if(!d.isDefaultPrevented()){this.hide();c.originalEvent.preventDefault()}}.bind(this));this.getModal().on(c.events.activate,h.COMPLETE_BUTTON,function(b,c){var d=a.Event(f.complete);this.getRoot().trigger(d,this);if(!d.isDefaultPrevented()){this.hide();c.originalEvent.preventDefault()}}.bind(this))};if(!g){e.register(i.TYPE,i,"tool_dataprivacy/data_request_modal");g=!0}return i});
define ("tool_dataprivacy/events",[],function(){return{approve:"tool_dataprivacy-data_request:approve",bulkApprove:"tool_dataprivacy-data_request:bulk_approve",deny:"tool_dataprivacy-data_request:deny",bulkDeny:"tool_dataprivacy-data_request:bulk_deny",complete:"tool_dataprivacy-data_request:complete"}});
define ("tool_dataprivacy/defaultsactions",["jquery","core/ajax","core/notification","core/str","core/modal_factory","core/modal_events","core/templates"],function(a,b,c,d,f,g,h){var k={EDIT_LEVEL_DEFAULTS:"[data-action=\"edit-level-defaults\"]",NEW_ACTIVITY_DEFAULTS:"[data-action=\"new-activity-defaults\"]",EDIT_ACTIVITY_DEFAULTS:"[data-action=\"edit-activity-defaults\"]",DELETE_ACTIVITY_DEFAULTS:"[data-action=\"delete-activity-defaults\"]"},l=-1,m=function(){this.registerEvents()};m.prototype.registerEvents=function(){a(k.EDIT_LEVEL_DEFAULTS).click(function(f){f.preventDefault();var e=a(this),g=e.data("contextlevel"),h=e.data("category"),j=e.data("purpose"),k=b.call([{methodname:"tool_dataprivacy_get_category_options",args:{}},{methodname:"tool_dataprivacy_get_purpose_options",args:{}}]),l=d.get_string("editdefaults","tool_dataprivacy",a("#defaults-header").text());a.when(k[0],k[1],l).then(function(a,b,c){var d=a.options,e=b.options;i(c,g,h,j,null,d,e,null);return!0}).catch(c.exception)});a(k.NEW_ACTIVITY_DEFAULTS).click(function(f){f.preventDefault();var e=a(this),g=e.data("contextlevel"),h=b.call([{methodname:"tool_dataprivacy_get_category_options",args:{}},{methodname:"tool_dataprivacy_get_purpose_options",args:{}},{methodname:"tool_dataprivacy_get_activity_options",args:{nodefaults:!0}}]),j=d.get_string("addnewdefaults","tool_dataprivacy");a.when(h[0],h[1],h[2],j).then(function(a,b,c,d){var e=a.options,f=b.options,h=c.options;i(d,g,null,null,null,e,f,h);return!0}).catch(c.exception)});a(k.EDIT_ACTIVITY_DEFAULTS).click(function(f){f.preventDefault();var e=a(this),g=e.data("contextlevel"),h=e.data("category"),j=e.data("purpose"),k=e.data("activityname"),l=b.call([{methodname:"tool_dataprivacy_get_category_options",args:{}},{methodname:"tool_dataprivacy_get_purpose_options",args:{}},{methodname:"tool_dataprivacy_get_activity_options",args:{}}]),m=d.get_string("editmoduledefaults","tool_dataprivacy");a.when(l[0],l[1],l[2],m).then(function(a,b,c,d){var e=a.options,f=b.options,l=c.options;i(d,g,h,j,k,e,f,l);return!0}).catch(c.exception)});a(k.DELETE_ACTIVITY_DEFAULTS).click(function(b){b.preventDefault();var e=a(this),i=e.data("contextlevel"),k=e.data("activityname"),m=e.data("activitydisplayname");f.create({title:d.get_string("deletedefaults","tool_dataprivacy",m),body:h.render("tool_dataprivacy/delete_activity_defaults",{activityname:m}),type:f.types.SAVE_CANCEL,large:!0}).then(function(a){a.setSaveButtonText(d.get_string("delete"));a.getRoot().on(g.save,function(){j(i,l,l,k,!1)});a.getRoot().on(g.hidden,function(){a.destroy()});a.show();return!0}).catch(c.exception)})};function i(b,d,e,i,k,l,m,n){if(null!==e){l.forEach(function(a){if(a.id===e){a.selected=!0}})}if(null!==i){m.forEach(function(a){if(a.id===i){a.selected=!0}})}var o={contextlevel:d,categoryoptions:l,purposeoptions:m};if(null!==n&&n.length){if(null===k){o.newactivitydefaults=!0}else{n.forEach(function(a){if(k===a.name){a.selected=!0}})}o.modemodule=!0;o.activityoptions=n}f.create({title:b,body:h.render("tool_dataprivacy/category_purpose_form",o),type:f.types.SAVE_CANCEL,large:!0}).then(function(b){b.getRoot().on(g.save,function(){var b=a("#activity"),c="undefined"!=typeof b?b.val():null,d=a("#override"),e="undefined"!=typeof d?d.is(":checked"):!1;j(a("#contextlevel").val(),a("#category").val(),a("#purpose").val(),c,e)});b.getRoot().on(g.hidden,function(){b.destroy()});b.show();return b}).catch(c.exception)}function j(a,c,d,e,f){b.call([{methodname:"tool_dataprivacy_set_context_defaults",args:{contextlevel:a,category:c,purpose:d,override:f,activity:e}}])[0].done(function(a){if(a.result){window.location.reload()}})}return{init:function init(){return new m}}});
define ("tool_dataprivacy/data_registry",["jquery","core/str","core/ajax","core/notification","core/templates","core/modal_factory","core/modal_events","core/fragment","tool_dataprivacy/add_purpose","tool_dataprivacy/add_category"],function(a,b,c,d,e,f,g,h,i,j){var k={TREE_NODES:"[data-context-tree-node=1]",FORM_CONTAINER:"#context-form-container"},l=function(a,b,c){this.systemContextId=a;this.currentContextLevel=b;this.currentContextId=c;this.init()};l.prototype.systemContextId=0;l.prototype.currentContextLevel=0;l.prototype.currentContextId=0;l.prototype.addpurpose=null;l.prototype.addcategory=null;l.prototype.init=function(){this.addpurpose=i.getInstance(this.systemContextId);this.addcategory=j.getInstance(this.systemContextId);this.strings=b.get_strings([{key:"changessaved",component:"moodle"},{key:"contextpurposecategorysaved",component:"tool_dataprivacy"},{key:"noblockstoload",component:"tool_dataprivacy"},{key:"noactivitiestoload",component:"tool_dataprivacy"},{key:"nocoursestoload",component:"tool_dataprivacy"}]);this.registerEventListeners();if(this.currentContextId){this.loadForm("context_form",[this.currentContextId],this.submitContextFormAjax.bind(this))}else{this.loadForm("contextlevel_form",[this.currentContextLevel],this.submitContextLevelFormAjax.bind(this))}};l.prototype.registerEventListeners=function(){a(k.TREE_NODES).on("click",function(b){b.preventDefault();var c=a(b.currentTarget);a(k.TREE_NODES).removeClass("active");c.addClass("active");var d=c.data("contextlevel"),e=c.data("contextid");if(d){window.history.pushState({},null,"?contextlevel="+d);this.addpurpose.removeListeners();this.addcategory.removeListeners();this.currentContextLevel=d;this.loadForm("contextlevel_form",[this.currentContextLevel],this.submitContextLevelFormAjax.bind(this))}else if(e){window.history.pushState({},null,"?contextid="+e);this.addpurpose.removeListeners();this.addcategory.removeListeners();this.currentContextId=e;this.loadForm("context_form",[this.currentContextId],this.submitContextFormAjax.bind(this))}else{var f=c.data("expandcontextid"),g=c.data("expandelement"),h=c.data("expanded");if(g){if(!h){if(c.data("loaded")||!f||!g){this.expand(c)}else{c.find("> i").removeClass("fa-plus");c.find("> i").addClass("fa-circle-o-notch fa-spin");this.loadExtra(c,f,g)}}else{this.collapse(c)}}}}.bind(this))};l.prototype.removeListeners=function(){a(k.TREE_NODES).off("click")};l.prototype.loadForm=function(b,c,f){this.clearForm();var g=h.loadFragment("tool_dataprivacy",b,this.systemContextId,c);g.done(function(b,c){a(k.FORM_CONTAINER).html(b);e.runTemplateJS(c);this.addpurpose.registerEventListeners();this.addcategory.registerEventListeners();a(k.FORM_CONTAINER).on("submit","form",f)}.bind(this)).fail(d.exception)};l.prototype.clearForm=function(){Y.use("moodle-core-formchangechecker",function(){M.core_formchangechecker.reset_form_dirty_state()});a(k.FORM_CONTAINER).off("submit","form")};l.prototype.submitForm=function(b){b.preventDefault();a(k.FORM_CONTAINER).find("form").submit()};l.prototype.submitContextLevelFormAjax=function(a){this.submitFormAjax(a,"tool_dataprivacy_set_contextlevel_form")};l.prototype.submitContextFormAjax=function(a){this.submitFormAjax(a,"tool_dataprivacy_set_context_form")};l.prototype.submitFormAjax=function(b,e){b.preventDefault();var f=a(k.FORM_CONTAINER).find("form").serialize();return this.strings.then(function(a){c.call([{methodname:e,args:{jsonformdata:JSON.stringify(f)},done:function done(){d.alert(a[0],a[1])},fail:d.exception}])}).catch(d.exception)};l.prototype.loadExtra=function(a,b,f){c.call([{methodname:"tool_dataprivacy_tree_extra_branches",args:{contextid:b,element:f},done:function(b){if(0==b.branches.length){this.noElements(a,f);return}e.render("tool_dataprivacy/context_tree_branches",b).then(function(b){a.after(b);this.removeListeners();this.registerEventListeners();this.expand(a);a.data("loaded",1)}.bind(this)).fail(d.exception)}.bind(this),fail:d.exception}])};l.prototype.noElements=function(a,b){a.data("expandcontextid","");a.data("expandelement","");this.strings.then(function(c){var d=2;if("module"==b){d=3}else if("course"==b){d=4}a.text(c[d])}).fail(d.exception)};l.prototype.collapse=function(a){a.data("expanded",0);a.siblings("nav").addClass("hidden");a.find("> i").removeClass("fa-minus");a.find("> i").addClass("fa-plus")};l.prototype.expand=function(a){a.data("expanded",1);a.siblings("nav").removeClass("hidden");a.find("> i").removeClass("fa-plus");a.find("> i").removeClass("fa-circle-o-notch fa-spin");a.find("> i").addClass("fa-minus")};return{init:function init(a,b,c){return new l(a,b,c)}}});
define ("tool_lp/grade_user_competency_inline",["jquery","core/notification","core/ajax","core/log","tool_lp/grade_dialogue","tool_lp/event_base","tool_lp/scalevalues"],function(a,b,c,d,e,f,g){var h=function(b,c,d,e,g,h,i){f.prototype.constructor.apply(this,[]);var j=a(b);if(!j.length){throw new Error("Could not find the trigger")}this._scaleId=c;this._competencyId=d;this._userId=e;this._planId=g;this._courseId=h;this._chooseStr=i;this._setUp();j.click(function(a){a.preventDefault();this._dialogue.display()}.bind(this));if(this._planId){this._methodName="core_competency_grade_competency_in_plan";this._args={competencyid:this._competencyId,planid:this._planId}}else if(this._courseId){this._methodName="core_competency_grade_competency_in_course";this._args={competencyid:this._competencyId,courseid:this._courseId,userid:this._userId}}else{this._methodName="core_competency_grade_competency";this._args={userid:this._userId,competencyid:this._competencyId}}};h.prototype=Object.create(f.prototype);h.prototype._setUp=function(){var a=[],d=this,f=g.get_values(d._scaleId);f.then(function(b){a.push({value:"",name:d._chooseStr});for(var c=0,e;c<b.length;c++){e=b[c];a.push({value:e.id,name:e.name})}return a}).then(function(a){return new e(a)}).then(function(a){a.on("rated",function(a,e){var f=d._args;f.grade=e.rating;f.note=e.note;c.call([{methodname:d._methodName,args:f,done:function done(a){d._trigger("competencyupdated",{args:f,evidence:a})},fail:b.exception}])});return a}).then(function(a){d._dialogue=a}).fail(b.exception)};h.prototype._scaleId=null;h.prototype._competencyId=null;h.prototype._userId=null;h.prototype._planId=null;h.prototype._courseId=null;h.prototype._chooseStr=null;h.prototype._dialogue=null;return h});
define ("tool_lp/scaleconfig",["jquery","core/notification","core/templates","core/ajax","tool_lp/dialogue","tool_lp/scalevalues"],function(a,b,c,d,e,f){var g=function(b,c,d){this.selectSelector=b;this.inputSelector=c;this.triggerSelector=d;this.originalscaleid=a(b).val();a(b).on("change",this.scaleChangeHandler.bind(this)).change();a(d).click(this.showConfig.bind(this))};g.prototype.selectSelector=null;g.prototype.inputSelector=null;g.prototype.triggerSelector=null;g.prototype.scalevalues=null;g.prototype.originalscaleid=0;g.prototype.scaleid=0;g.prototype.popup=null;g.prototype.showConfig=function(){var d=this;this.scaleid=a(this.selectSelector).val();if(0>=this.scaleid){return}var f=a(this.selectSelector).find("option:selected").text();this.getScaleValues(this.scaleid).done(function(){var a={scalename:f,scales:d.scalevalues};c.render("tool_lp/scale_configuration_page",a).done(function(a){new e(f,a,d.initScaleConfig.bind(d))}).fail(b.exception)}).fail(b.exception)};g.prototype.retrieveOriginalScaleConfig=function(){var b=a(this.inputSelector).val();if(""!==b){var c=a.parseJSON(b),d=c.shift();if(d.scaleid===this.originalscaleid){return c}}return""};g.prototype.initScaleConfig=function(b){this.popup=b;var c=a(b.getContent());if(this.originalscaleid===this.scaleid){var d=this.retrieveOriginalScaleConfig();if(""!==d){d.forEach(function(a){if(1===a.scaledefault){c.find("[data-field=\"tool_lp_scale_default_"+a.id+"\"]").attr("checked",!0)}if(1===a.proficient){c.find("[data-field=\"tool_lp_scale_proficient_"+a.id+"\"]").attr("checked",!0)}})}}c.on("click","[data-action=\"close\"]",function(){this.setScaleConfig();b.close()}.bind(this));c.on("click","[data-action=\"cancel\"]",function(){b.close()})};g.prototype.setScaleConfig=function(){var b=a(this.popup.getContent()),c=[{scaleid:this.scaleid}];this.scalevalues.forEach(function(a){var d=0,e=0;if(b.find("[data-field=\"tool_lp_scale_default_"+a.id+"\"]").is(":checked")){d=1}if(b.find("[data-field=\"tool_lp_scale_proficient_"+a.id+"\"]").is(":checked")){e=1}if(!d&&!e){return}c.push({id:a.id,scaledefault:d,proficient:e})});var d=JSON.stringify(c);a(this.inputSelector).val(d);this.originalscaleid=this.scaleid};g.prototype.getScaleValues=function(a){return f.get_values(a).then(function(a){this.scalevalues=a;return a}.bind(this))};g.prototype.scaleChangeHandler=function(b){if(0>=a(b.target).val()){a(this.triggerSelector).prop("disabled",!0)}else{a(this.triggerSelector).prop("disabled",!1)}};return{init:function init(a,b,c){return new g(a,b,c)}}});
define ("tool_lp/user_evidence_actions",["jquery","core/templates","core/ajax","core/notification","core/str","tool_lp/menubar","tool_lp/competencypicker_user_plans"],function(a,b,c,d,e,f,g){var h=function(a){this._type=a;if("evidence"===a){this._region="[data-region=\"user-evidence-page\"]";this._evidenceNode="[data-region=\"user-evidence-page\"]";this._template="tool_lp/user_evidence_page";this._contextMethod="tool_lp_data_for_user_evidence_page"}else if("list"===a){this._region="[data-region=\"user-evidence-list\"]";this._evidenceNode="[data-region=\"user-evidence-node\"]";this._template="tool_lp/user_evidence_list_page";this._contextMethod="tool_lp_data_for_user_evidence_list_page"}else{throw new TypeError("Unexpected type.")}};h.prototype._contextMethod=null;h.prototype._evidenceNode=null;h.prototype._region=null;h.prototype._template=null;h.prototype._type=null;h.prototype._getContextArgs=function(a){var b=this,c={};if("evidence"===b._type){c={id:a.id}}else if("list"===b._type){c={userid:a.userid}}return c};h.prototype._renderView=function(c){var d=this;return b.render(d._template,c).then(function(c,e){b.replaceNode(a(d._region),c,e)})};h.prototype._callAndRefresh=function(b,e){var f=this;b.push({methodname:f._contextMethod,args:f._getContextArgs(e)});return a.when.apply(a.when,c.call(b)).then(function(){return f._renderView(arguments[arguments.length-1])}).fail(d.exception)};h.prototype._doDelete=function(a){var b=this,c=[{methodname:"core_competency_delete_user_evidence",args:{id:a.id}}];b._callAndRefresh(c,a)};h.prototype.deleteEvidence=function(a){var b=this,f;f=c.call([{methodname:"core_competency_read_user_evidence",args:{id:a.id}}]);f[0].done(function(c){e.get_strings([{key:"confirm",component:"moodle"},{key:"deleteuserevidence",component:"tool_lp",param:c.name},{key:"delete",component:"moodle"},{key:"cancel",component:"moodle"}]).done(function(c){d.confirm(c[0],c[1],c[2],c[3],function(){b._doDelete(a)})}).fail(d.exception)}).fail(d.exception)};h.prototype._deleteEvidenceHandler=function(b){b.preventDefault();var c=this._findEvidenceData(a(b.target));this.deleteEvidence(c)};h.prototype._doCreateUserEvidenceCompetency=function(b,c){var d=this,e=[];a.each(c,function(a,c){e.push({methodname:"core_competency_create_user_evidence_competency",args:{userevidenceid:b.id,competencyid:c}})});d._callAndRefresh(e,b)};h.prototype.createUserEvidenceCompetency=function(a){var b=this,c=new g(a.userid);c.on("save",function(c,d){var e=d.competencyIds;b._doCreateUserEvidenceCompetency(a,e,d.requestReview)});c.display()};h.prototype._createUserEvidenceCompetencyHandler=function(b){b.preventDefault();var c=this._findEvidenceData(a(b.target));this.createUserEvidenceCompetency(c)};h.prototype._doDeleteUserEvidenceCompetency=function(a,b){var c=this,d=[];d.push({methodname:"core_competency_delete_user_evidence_competency",args:{userevidenceid:a.id,competencyid:b}});c._callAndRefresh(d,a)};h.prototype.deleteUserEvidenceCompetency=function(a,b){this._doDeleteUserEvidenceCompetency(a,b)};h.prototype._deleteUserEvidenceCompetencyHandler=function(b){var c=this._findEvidenceData(a(b.currentTarget)),d=a(b.currentTarget).data("id");b.preventDefault();this.deleteUserEvidenceCompetency(c,d)};h.prototype._doReviewUserEvidenceCompetencies=function(a){var b=this,c=[{methodname:"core_competency_request_review_of_user_evidence_linked_competencies",args:{id:a.id}}];b._callAndRefresh(c,a)};h.prototype.reviewUserEvidenceCompetencies=function(a){var b=this,f;f=c.call([{methodname:"core_competency_read_user_evidence",args:{id:a.id}}]);f[0].done(function(c){e.get_strings([{key:"confirm",component:"moodle"},{key:"sendallcompetenciestoreview",component:"tool_lp",param:c.name},{key:"confirm",component:"moodle"},{key:"cancel",component:"moodle"}]).done(function(c){d.confirm(c[0],c[1],c[2],c[3],function(){b._doReviewUserEvidenceCompetencies(a)})}).fail(d.exception)}).fail(d.exception)};h.prototype._reviewUserEvidenceCompetenciesHandler=function(b){b.preventDefault();var c=this._findEvidenceData(a(b.target));this.reviewUserEvidenceCompetencies(c)};h.prototype._findEvidenceData=function(b){var c=b.parentsUntil(a(this._region).parent(),this._evidenceNode),d;if(1!=c.length){throw new Error("The evidence node was not located.")}d=c.data();if("undefined"==typeof d||"undefined"==typeof d.id){throw new Error("Evidence data could not be found.")}return d};h.prototype.enhanceMenubar=function(a){var b=this;f.enhance(a,{'[data-action="user-evidence-delete"]':b._deleteEvidenceHandler.bind(b),'[data-action="link-competency"]':b._createUserEvidenceCompetencyHandler.bind(b),'[data-action="send-competencies-review"]':b._reviewUserEvidenceCompetenciesHandler.bind(b)})};h.prototype.registerEvents=function(){var b=a(this._region),c=this;b.find("[data-action=\"user-evidence-delete\"]").click(c._deleteEvidenceHandler.bind(c));b.find("[data-action=\"link-competency\"]").click(c._createUserEvidenceCompetencyHandler.bind(c));b.find("[data-action=\"delete-competency-link\"]").click(c._deleteUserEvidenceCompetencyHandler.bind(c));b.find("[data-action=\"send-competencies-review\"]").click(c._reviewUserEvidenceCompetenciesHandler.bind(c))};return h});
define ("tool_lp/competencypicker",["jquery","core/notification","core/ajax","core/templates","tool_lp/dialogue","core/str","tool_lp/tree","core/pending"],function(a,b,c,d,e,f,g,h){var i=function(b,c,d,e){var f=this;f._eventNode=a("<div></div>");f._frameworks=[];f._reset();f._pageContextId=b;f._pageContextIncludes=d||"children";f._multiSelect="undefined"==typeof e||!0===e;if(c){f._frameworkId=c;f._singleFramework=!0}};i.prototype._competencies=null;i.prototype._disallowedCompetencyIDs=null;i.prototype._eventNode=null;i.prototype._frameworks=null;i.prototype._frameworkId=null;i.prototype._pageContextId=null;i.prototype._pageContextIncludes=null;i.prototype._popup=null;i.prototype._searchText="";i.prototype._selectedCompetencies=null;i.prototype._singleFramework=!1;i.prototype._multiSelect=!0;i.prototype._onlyVisible=!0;i.prototype._afterRender=function(){var c=this,d=new g(c._find("[data-enhance=linktree]"),c._multiSelect);c._find("[data-enhance=linktree]").show();d.on("selectionchanged",function(b,d){var e=d.selected;b.preventDefault();var f=[];a.each(e,function(b,d){var e=a(d).data("id"),g=!0;if("undefined"==typeof e){g=!1}else{a.each(c._disallowedCompetencyIDs,function(a,b){if(b==e){g=!1}})}if(g){f.push(e)}});c._selectedCompetencies=f;if(!c._selectedCompetencies.length){c._find("[data-region=\"competencylinktree\"] [data-action=\"add\"]").attr("disabled","disabled")}else{c._find("[data-region=\"competencylinktree\"] [data-action=\"add\"]").removeAttr("disabled")}});if(!c._singleFramework){c._find("[data-action=\"chooseframework\"]").change(function(d){c._frameworkId=a(d.target).val();c._loadCompetencies().then(c._refresh.bind(c)).catch(b.exception)})}c._find("[data-region=\"filtercompetencies\"] button").click(function(b){b.preventDefault();a(b.target).attr("disabled","disabled");c._searchText=c._find("[data-region=\"filtercompetencies\"] input").val()||"";return c._refresh().always(function(){a(b.target).removeAttr("disabled")})});c._find("[data-region=\"competencylinktree\"] [data-action=\"cancel\"]").click(function(a){a.preventDefault();c.close()});c._find("[data-region=\"competencylinktree\"] [data-action=\"add\"]").click(function(a){a.preventDefault();var b=new h;if(!c._selectedCompetencies.length){return}if(c._multiSelect){c._trigger("save",{competencyIds:c._selectedCompetencies})}else{c._trigger("save",{competencyId:c._selectedCompetencies[0]})}c.close();b.resolve()});var e=c._selectedCompetencies.slice(0);a.each(e,function(a,b){var e=c._find("[data-id="+b+"]");if(e.length){d.toggleItem(e);d.updateFocus(e)}})};i.prototype.close=function(){var a=this;a._popup.close();a._reset()};i.prototype.display=function(){var c=this;return a.when(f.get_string("competencypicker","tool_lp"),c._render()).then(function(a,b){c._popup=new e(a,b[0],c._afterRender.bind(c))}).catch(b.exception)};i.prototype._fetchCompetencies=function(a,d){var e=this;return c.call([{methodname:"core_competency_search_competencies",args:{searchtext:d,competencyframeworkid:a}}])[0].done(function(a){function b(a,c){for(var d=0;d<c.length;d++){if(c[d].parentid==a.id){a.haschildren=!0;c[d].children=[];c[d].haschildren=!1;a.children[a.children.length]=c[d];b(c[d],c)}}}var c,d,f=[];for(c=0;c<a.length;c++){d=a[c];if("0"==d.parentid){d.children=[];d.haschildren=0;f[f.length]=d;b(d,a)}}e._competencies=f}).fail(b.exception)};i.prototype._find=function(b){return a(this._popup.getContent()).find(b)};i.prototype._getFramework=function(b){var c;a.each(this._frameworks,function(a,d){if(d.id==b){c=d}});return c};i.prototype._loadCompetencies=function(){return this._fetchCompetencies(this._frameworkId,this._searchText)};i.prototype._loadFrameworks=function(){var d,e=this;if(0<e._frameworks.length){return a.when()}if(e._singleFramework){d=c.call([{methodname:"core_competency_read_competency_framework",args:{id:this._frameworkId}}])[0].then(function(a){return[a]})}else{d=c.call([{methodname:"core_competency_list_competency_frameworks",args:{sort:"shortname",context:{contextid:e._pageContextId},includes:e._pageContextIncludes,onlyvisible:e._onlyVisible}}])[0]}return d.done(function(a){e._frameworks=a}).fail(b.exception)};i.prototype.on=function(a,b){this._eventNode.on(a,b)};i.prototype._preRender=function(){var b=this;return b._loadFrameworks().then(function(){if(!b._frameworkId&&0<b._frameworks.length){b._frameworkId=b._frameworks[0].id}if(!b._frameworkId){b._frameworks=[];return a.when()}return b._loadCompetencies()})};i.prototype._refresh=function(){var a=this;return a._render().then(function(b){a._find("[data-region=\"competencylinktree\"]").replaceWith(b);a._afterRender()})};i.prototype._render=function(){var b=this;return b._preRender().then(function(){if(!b._singleFramework){a.each(b._frameworks,function(a,c){if(c.id==b._frameworkId){c.selected=!0}else{c.selected=!1}})}var c={competencies:b._competencies,framework:b._getFramework(b._frameworkId),frameworks:b._frameworks,search:b._searchText,singleFramework:b._singleFramework};return d.render("tool_lp/competency_picker",c)})};i.prototype._reset=function(){this._competencies=[];this._disallowedCompetencyIDs=[];this._popup=null;this._searchText="";this._selectedCompetencies=[]};i.prototype.setDisallowedCompetencyIDs=function(a){this._disallowedCompetencyIDs=a};i.prototype._trigger=function(a,b){this._eventNode.trigger(a,[b])};return i});
define ("tool_lp/competencies",["jquery","core/notification","core/ajax","core/templates","core/str","tool_lp/competencypicker","tool_lp/dragdrop-reorder","core/pending"],function(a,b,c,d,e,f,g,h){var i=function(b,c,d){this.itemid=b;this.itemtype=c;this.pageContextId=d;this.pickerInstance=null;a("[data-region=\"actions\"] button").prop("disabled",!1);this.registerEvents();this.registerDragDrop()};i.prototype.registerDragDrop=function(){var a=this;e.get_string("movecompetency","tool_lp").done(function(b){g.dragdrop("movecompetency",b,{identifier:"movecompetency",component:"tool_lp"},{identifier:"movecompetencyafter",component:"tool_lp"},"drag-samenode","drag-parentnode","drag-handlecontainer",function(b,c){a.handleDrop(b,c)})}).fail(b.exception)};i.prototype.handleDrop=function(d,e){var f=a(d).data("id"),g=a(e).data("id"),h=this,i=[];if("course"==h.itemtype){i=c.call([{methodname:"core_competency_reorder_course_competency",args:{courseid:h.itemid,competencyidfrom:f,competencyidto:g}}])}else if("template"==h.itemtype){i=c.call([{methodname:"core_competency_reorder_template_competency",args:{templateid:h.itemid,competencyidfrom:f,competencyidto:g}}])}else if("plan"==h.itemtype){i=c.call([{methodname:"core_competency_reorder_plan_competency",args:{planid:h.itemid,competencyidfrom:f,competencyidto:g}}])}else{return}i[0].fail(b.exception)};i.prototype.pickCompetency=function(){var g=this,i,j,k,l;if(!g.pickerInstance){if("template"===g.itemtype||"course"===g.itemtype){l="parents"}g.pickerInstance=new f(g.pageContextId,!1,l);g.pickerInstance.on("save",function(f,e){var l=e.competencyIds,m=new h;if("course"===g.itemtype){i=[];a.each(l,function(a,b){i.push({methodname:"core_competency_add_competency_to_course",args:{courseid:g.itemid,competencyid:b}})});i.push({methodname:"tool_lp_data_for_course_competencies_page",args:{courseid:g.itemid,moduleid:0}});j="tool_lp/course_competencies_page";k="coursecompetenciespage"}else if("template"===g.itemtype){i=[];a.each(l,function(a,b){i.push({methodname:"core_competency_add_competency_to_template",args:{templateid:g.itemid,competencyid:b}})});i.push({methodname:"tool_lp_data_for_template_competencies_page",args:{templateid:g.itemid,pagecontext:{contextid:g.pageContextId}}});j="tool_lp/template_competencies_page";k="templatecompetenciespage"}else if("plan"===g.itemtype){i=[];a.each(l,function(a,b){i.push({methodname:"core_competency_add_competency_to_plan",args:{planid:g.itemid,competencyid:b}})});i.push({methodname:"tool_lp_data_for_plan_page",args:{planid:g.itemid}});j="tool_lp/plan_page";k="plan-page"}c.call(i)[i.length-1].then(function(a){return d.render(j,a)}).then(function(b,c){d.replaceNode(a("[data-region=\""+k+"\"]"),b,c)}).then(m.resolve).catch(b.exception)})}return g.pickerInstance.display()};i.prototype.doDelete=function(e){var f=this,g=[],h="",i="";if("course"==f.itemtype){g=c.call([{methodname:"core_competency_remove_competency_from_course",args:{courseid:f.itemid,competencyid:e}},{methodname:"tool_lp_data_for_course_competencies_page",args:{courseid:f.itemid,moduleid:0}}]);h="tool_lp/course_competencies_page";i="coursecompetenciespage"}else if("template"==f.itemtype){g=c.call([{methodname:"core_competency_remove_competency_from_template",args:{templateid:f.itemid,competencyid:e}},{methodname:"tool_lp_data_for_template_competencies_page",args:{templateid:f.itemid,pagecontext:{contextid:f.pageContextId}}}]);h="tool_lp/template_competencies_page";i="templatecompetenciespage"}else if("plan"==f.itemtype){g=c.call([{methodname:"core_competency_remove_competency_from_plan",args:{planid:f.itemid,competencyid:e}},{methodname:"tool_lp_data_for_plan_page",args:{planid:f.itemid}}]);h="tool_lp/plan_page";i="plan-page"}g[1].done(function(c){d.render(h,c).done(function(b,c){a("[data-region=\""+i+"\"]").replaceWith(b);d.runTemplateJS(c)}).fail(b.exception)}).fail(b.exception)};i.prototype.deleteHandler=function(a){var d=this,f=[],g;if("course"==d.itemtype){g="unlinkcompetencycourse"}else if("template"==d.itemtype){g="unlinkcompetencytemplate"}else if("plan"==d.itemtype){g="unlinkcompetencyplan"}else{return}f=c.call([{methodname:"core_competency_read_competency",args:{id:a}}]);f[0].done(function(c){e.get_strings([{key:"confirm",component:"moodle"},{key:g,component:"tool_lp",param:c.shortname},{key:"confirm",component:"moodle"},{key:"cancel",component:"moodle"}]).done(function(c){b.confirm(c[0],c[1],c[2],c[3],function(){d.doDelete(a)})}).fail(b.exception)}).fail(b.exception)};i.prototype.registerEvents=function(){var f=this;if("course"==f.itemtype){a("[data-region=\"coursecompetenciespage\"]").on("change","select[data-field=\"ruleoutcome\"]",function(g){var e=new h,i=[],j=a(g.target).data("id"),k=a(g.target).val();i=c.call([{methodname:"core_competency_set_course_competency_ruleoutcome",args:{coursecompetencyid:j,ruleoutcome:k}},{methodname:"tool_lp_data_for_course_competencies_page",args:{courseid:f.itemid,moduleid:0}}]);i[1].then(function(a){return d.render("tool_lp/course_competencies_page",a)}).then(function(b,c){return d.replaceNode(a("[data-region=\""+"coursecompetenciespage"+"\"]"),b,c)}).then(e.resolve).catch(b.exception)})}a("[data-region=\"actions\"] button").click(function(a){var b=new h;a.preventDefault();f.pickCompetency().then(b.resolve).catch()});a("[data-action=\"delete-competency-link\"]").click(function(b){b.preventDefault();var c=a(b.target).closest("[data-id]").data("id");f.deleteHandler(c)})};return i});
define ("tool_lp/user_competency_course_navigation",["jquery"],function(a){var b=function(b,c,d,e,f,g){this._baseUrl=d;this._userId=e+"";this._competencyId=f+"";this._courseId=g;a(b).on("change",this._userChanged.bind(this));a(c).on("change",this._competencyChanged.bind(this))};b.prototype._userChanged=function(b){var c=a(b.target).val(),d="?userid="+c+"&courseid="+this._courseId+"&competencyid="+this._competencyId;document.location=this._baseUrl+d};b.prototype._competencyChanged=function(b){var c=a(b.target).val(),d="?userid="+this._userId+"&courseid="+this._courseId+"&competencyid="+c;document.location=this._baseUrl+d};b.prototype._competencyId=null;b.prototype._userId=null;b.prototype._courseId=null;b.prototype._baseUrl=null;b.prototype._ignoreFirstCompetency=null;return b});
define ("tool_lp/form-cohort-selector",["jquery","core/ajax","core/templates"],function(a,b,c){return{processResults:function processResults(b,c){var d=[];a.each(c,function(a,b){d.push({value:b.id,label:b._label})});return d},transport:function transport(d,e,f,g){var h,i=parseInt(a(d).data("contextid"),10),j=a(d).data("includes");h=b.call([{methodname:"tool_lp_search_cohorts",args:{query:e,context:{contextid:i},includes:j}}]);h[0].then(function(b){var d=[],e=0;a.each(b.cohorts,function(a,b){d.push(c.render("tool_lp/form-cohort-selector-suggestion",b))});return a.when.apply(a.when,d).then(function(){var c=arguments;a.each(b.cohorts,function(a,b){b._label=c[e];e++});f(b.cohorts)})}).catch(g)}}});
define ("tool_lp/competencyactions",["jquery","core/url","core/templates","core/notification","core/str","core/ajax","tool_lp/dragdrop-reorder","tool_lp/tree","tool_lp/dialogue","tool_lp/menubar","tool_lp/competencypicker","tool_lp/competency_outcomes","tool_lp/competencyruleconfig","core/pending"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=null,p=null,q=null,r,s,t,u,v,w,x=null,y=function(){var c=a("[data-region=\"competencyactions\"]").data("competency"),f={competencyframeworkid:o.getCompetencyFrameworkId(),pagecontextid:r};if(null!==c){f.parentid=c.id}var g=function(){var c=a.param(f);window.location=b.relativeUrl("/admin/tool/lp/editcompetency.php?"+c)};if(null!==c&&o.hasRule(c.id)){e.get_strings([{key:"confirm",component:"moodle"},{key:"addingcompetencywillresetparentrule",component:"tool_lp",param:c.shortname},{key:"yes",component:"core"},{key:"no",component:"core"}]).done(function(a){d.confirm(a[0],a[1],a[2],a[3],g)}).fail(d.exception)}else{g()}},z=function(){var b=a("[data-region=\"filtercompetencies\"]").data("frameworkid"),c=f.call([{methodname:"core_competency_set_parent_competency",args:{competencyid:p,parentid:q}},{methodname:"tool_lp_data_for_competencies_manage_page",args:{competencyframeworkid:b,search:a("[data-region=\"filtercompetencies\"] input").val()}}]);c[1].done(F).fail(d.exception)},A=function(){q="undefined"==typeof q?0:q;if(q==p){return}var a=o.getCompetency(q)||{},b=o.getCompetency(p)||{},c="movecompetencywillresetrules",f=!1;if(b.parentid==q){return}if(a.path&&0<=a.path.indexOf("/"+b.id+"/")){c="movecompetencytochildofselfwillresetrules";f=f||o.hasRule(b.id)}f=f||o.hasRule(a.id)||o.hasRule(b.parentid);if(f){e.get_strings([{key:"confirm",component:"moodle"},{key:c,component:"tool_lp"},{key:"yes",component:"moodle"},{key:"no",component:"moodle"}]).done(function(a){d.confirm(a[0],a[1],a[2],a[3],z)}).fail(d.exception)}else{z()}},B=function(b){var c=a(b.getContent()),d=c.find("[data-enhance=movetree]"),e=new h(d,!1);e.on("selectionchanged",function(b,c){var d=c.selected;q=a(d).data("id")});d.show();c.on("click","[data-action=\"move\"]",function(){b.close();A()});c.on("click","[data-action=\"cancel\"]",function(){b.close()})},C=function(a,b){var c;for(c=0;c<b.length;c++){if(b[c].parentid==a.id){a.haschildren=!0;b[c].children=[];b[c].haschildren=!1;a.children[a.children.length]=b[c];C(b[c],b)}}},D=function(b){b.preventDefault();var g=a("[data-region=\"competencyactions\"]").data("competency");p=g.id;var h=f.call([{methodname:"core_competency_search_competencies",args:{competencyframeworkid:g.competencyframeworkid,searchtext:""}},{methodname:"core_competency_read_competency_framework",args:{id:g.competencyframeworkid}}]);a.when.apply(null,h).done(function(a,b){var f,h=[];for(f=0;f<a.length;f++){var j=a[f];if("0"==j.parentid){j.children=[];j.haschildren=0;h[h.length]=j;C(j,a)}}e.get_strings([{key:"movecompetency",component:"tool_lp",param:g.shortname},{key:"move",component:"tool_lp"},{key:"cancel",component:"moodle"}]).done(function(a){c.render("tool_lp/competencies_move_tree",{framework:b,competencies:h}).done(function(b){new i(a[0],b,B)}).fail(d.exception)}).fail(d.exception)}).fail(d.exception)},E=function(){var c=a("[data-region=\"competencyactions\"]").data("competency"),d={competencyframeworkid:o.getCompetencyFrameworkId(),id:c.id,parentid:c.parentid,pagecontextid:r},e=a.param(d);window.location=b.relativeUrl("/admin/tool/lp/editcompetency.php?"+e)},F=function(b){c.render("tool_lp/manage_competencies_page",b).done(function(b,d){a("[data-region=\"managecompetencies\"]").replaceWith(b);c.runTemplateJS(d)}).fail(d.exception)},G=function(b){b.preventDefault();var c=a("[data-region=\"filtercompetencies\"]").data("frameworkid"),e=f.call([{methodname:"tool_lp_data_for_competencies_manage_page",args:{competencyframeworkid:c,search:a("[data-region=\"filtercompetencies\"] input").val()}}]);e[0].done(F).fail(d.exception)},H=function(){var b=a("[data-region=\"competencyactions\"]").data("competency"),c=f.call([{methodname:"core_competency_move_up_competency",args:{id:b.id}},{methodname:"tool_lp_data_for_competencies_manage_page",args:{competencyframeworkid:b.competencyframeworkid,search:a("[data-region=\"filtercompetencies\"] input").val()}}]);c[1].done(F).fail(d.exception)},I=function(){var b=a("[data-region=\"competencyactions\"]").data("competency"),c=f.call([{methodname:"core_competency_move_down_competency",args:{id:b.id}},{methodname:"tool_lp_data_for_competencies_manage_page",args:{competencyframeworkid:b.competencyframeworkid,search:a("[data-region=\"filtercompetencies\"] input").val()}}]);c[1].done(F).fail(d.exception)},J=function(){var b=a("[data-region=\"competencyactions\"]").data("competency"),g=f.call([{methodname:"tool_lp_list_courses_using_competency",args:{id:b.id}}]);g[0].done(function(a){c.render("tool_lp/linked_courses_summary",{courses:a}).done(function(a){e.get_string("linkedcourses","tool_lp").done(function(b){new i(b,a,B)}).fail(d.exception)}).fail(d.exception)}).fail(d.exception)},K=function(){u=a("[data-region=\"competencyactions\"]").data("competency");if(!s){s=new k(r,u.competencyframeworkid);s.on("save",function(b,e){var g=new n,h=e.competencyIds,i=[];a.each(h,function(a,b){i.push({methodname:"core_competency_add_related_competency",args:{competencyid:b,relatedcompetencyid:u.id}})});i.push({methodname:"tool_lp_data_for_related_competencies_section",args:{competencyid:u.id}});var j=f.call(i);j[i.length-1].then(function(a){return c.render("tool_lp/related_competencies",a)}).then(function(b,d){a("[data-region=\"relatedcompetencies\"]").replaceWith(b);c.runTemplateJS(d);V()}).then(g.resolve).catch(d.exception)})}s.setDisallowedCompetencyIDs([u.id]);s.display()},L=function(b){b.preventDefault();u=a("[data-region=\"competencyactions\"]").data("competency");t.setTargetCompetencyId(u.id);t.display()},M=function(a,b){var c={id:u.id,shortname:u.shortname,idnumber:u.idnumber,description:u.description,descriptionformat:u.descriptionformat,ruletype:b.ruletype,ruleoutcome:b.ruleoutcome,ruleconfig:b.ruleconfig},e=f.call([{methodname:"core_competency_update_competency",args:{competency:c}}]);e[0].then(function(a){if(a){u.ruletype=b.ruletype;u.ruleoutcome=b.ruleoutcome;u.ruleconfig=b.ruleconfig;Y(u)}}).catch(d.exception)},N=function(){var b=a("[data-region=\"competencyactions\"]").data("competency"),c=f.call([{methodname:"core_competency_delete_competency",args:{id:b.id}},{methodname:"tool_lp_data_for_competencies_manage_page",args:{competencyframeworkid:b.competencyframeworkid,search:a("[data-region=\"filtercompetencies\"] input").val()}}]);c[0].done(function(a){if(!1===a){e.get_strings([{key:"competencycannotbedeleted",component:"tool_lp",param:b.shortname},{key:"cancel",component:"moodle"}]).done(function(a){d.alert(null,a[0])}).fail(d.exception)}}).fail(d.exception);c[1].done(F).fail(d.exception)},O=function(){var b=a("[data-region=\"competencyactions\"]").data("competency"),c="deletecompetency";if(o.hasRule(b.parentid)){c="deletecompetencyparenthasrule"}e.get_strings([{key:"confirm",component:"moodle"},{key:c,component:"tool_lp",param:b.shortname},{key:"delete",component:"moodle"},{key:"cancel",component:"moodle"}]).done(function(a){d.confirm(a[0],a[1],a[2],a[3],N)}).fail(d.exception)},P=function(b){b.originalEvent.dataTransfer.setData("text",a(b.target).parent().data("id"))},Q=function(a){a.originalEvent.dataTransfer.dropEffect="move";a.preventDefault()},R=function(b){b.preventDefault();a(this).addClass("currentdragtarget")},S=function(b){b.preventDefault();a(this).removeClass("currentdragtarget")},T=function(b){b.preventDefault();p=b.originalEvent.dataTransfer.getData("text");q=a(b.target).parent().data("id");a(this).removeClass("currentdragtarget");A()},U=function(b){b.preventDefault();var e=this.id.substr(11),g=a("[data-region=\"competencyactions\"]").data("competency"),h=f.call([{methodname:"core_competency_remove_related_competency",args:{relatedcompetencyid:e,competencyid:g.id}},{methodname:"tool_lp_data_for_related_competencies_section",args:{competencyid:g.id}}]);h[1].done(function(b){c.render("tool_lp/related_competencies",b).done(function(b){a("[data-region=\"relatedcompetencies\"]").replaceWith(b);V()}).fail(d.exception)}).fail(d.exception)},V=function(){a("[data-action=\"deleterelation\"]").on("click",U)},W=function(a){if(a.id!==x){x=a.id;f.call([{methodname:"core_competency_competency_viewed",args:{id:a.id}}])}},X=function(a){var b=v[a];if(!b){b="competency"}return b},Y=function(e){var g=a.Deferred().resolve().promise(),h={};h.competency=e;h.showdeleterelatedaction=!0;h.showrelatedcompetencies=!0;h.showrule=!1;h.pluginbaseurl=b.relativeUrl("/admin/tool/lp");if(e.ruleoutcome!=l.NONE){g=l.getString(e.ruleoutcome).then(function(b){var c;a.each(w,function(a,b){if(b.type==e.ruletype){c=b.name}});return[b,c]})}g.then(function(a){if("undefined"!=typeof a){h.showrule=!0;h.rule={outcome:a[0],type:a[1]}}return h}).then(function(a){return c.render("tool_lp/competency_summary",a)}).then(function(b){a("[data-region=\"competencyinfo\"]").html(b);a("[data-action=\"deleterelation\"]").on("click",U);return c.render("tool_lp/loading",{})}).then(function(a,b){c.replaceNodeContents("[data-region=\"relatedcompetencies\"]",a,b);return f.call([{methodname:"tool_lp_data_for_related_competencies_section",args:{competencyid:e.id}}])[0]}).then(function(a){return c.render("tool_lp/related_competencies",a)}).then(function(b,d){a("[data-region=\"relatedcompetencies\"]").replaceWith(b);c.runTemplateJS(d);V()}).catch(d.exception)},Z=function(a){return e.get_string("taxonomy_add_"+X(a),"tool_lp")},$=function(a){return e.get_string("taxonomy_selected_"+X(a),"tool_lp")},_=function(b,c){var e=c.selected,f=a(e).data("id"),g=a("[data-region=\"competencyactions\"] [data-action=\"add\"]"),h=a("[data-region=\"competencyactionsmenu\"]"),i=a("[data-region=\"selected-competency\"]"),k=0,l=1;j.closeAll();if("undefined"==typeof f){a("[data-region=\"competencyinfo\"]").html(e.clone().children().remove().end().text());a("[data-region=\"competencyactions\"]").data("competency",null);h.hide()}else{var m=o.getCompetency(f);k=o.getCompetencyLevel(f);l=k+1;h.show();a("[data-region=\"competencyactions\"]").data("competency",m);Y(m);W(m)}$(k).then(function(a){i.text(a)}).catch(d.exception);Z(l).then(function(a){g.show().find("[data-region=\"term\"]").text(a)}).catch(d.exception);b.preventDefault();return!1},aa=function(a){var b=a.split(",");b.unshift("");delete b[0];return b};return{init:function init(b,c,d,e){o=b;r=c;v=aa(d);w=e;a("[data-region=\"competencyactions\"] [data-action=\"add\"]").on("click",y);j.enhance(".competencyactionsmenu",{'[data-action="edit"]':E,'[data-action="delete"]':O,'[data-action="move"]':D,'[data-action="moveup"]':H,'[data-action="movedown"]':I,'[data-action="linkedcourses"]':J,'[data-action="relatedcompetencies"]':K.bind(this),'[data-action="competencyrules"]':L.bind(this)});a("[data-region=\"competencyactionsmenu\"]").hide();a("[data-region=\"competencyactions\"] [data-action=\"add\"]").hide();a("[data-region=\"filtercompetencies\"]").on("submit",G);var f=a("[data-region=\"managecompetencies\"] [data-enhance=\"tree\"]");f.on("dragstart","li>span",P).on("dragover","li>span",Q).on("dragenter","li>span",R).on("dragleave","li>span",S).on("drop","li>span",T);b.on("selectionchanged",_);t=new m(o,w);t.on("save",M.bind(this))}}});
define ("tool_lp/competency_rule",["jquery"],function(a){var b=function(b){this._eventNode=a("<div>");this._ready=a.Deferred();this._tree=b};b.prototype._competency=null;b.prototype._eventNode=null;b.prototype._ready=null;b.prototype._tree=null;b.prototype.canConfig=function(){return this._tree.hasChildren(this._competency.id)};b.prototype.getConfig=function(){return null};b.prototype.getType=function(){throw new Error("Not implemented")};b.prototype.init=function(){return this._load()};b.prototype.injectTemplate=function(){return a.Deferred().reject().promise()};b.prototype.isValid=function(){return!1};b.prototype._load=function(){return a.when()};b.prototype.on=function(a,b){this._eventNode.on(a,b)};b.prototype.setTargetCompetency=function(a){this._competency=a};b.prototype._trigger=function(a,b){this._eventNode.trigger(a,[b])};b.prototype._triggerChange=function(){this._trigger("change",this)};return b});
define ("tool_lp/competencypicker_user_plans",["jquery","core/notification","core/ajax","core/templates","core/str","tool_lp/tree","tool_lp/competencypicker"],function(a,b,c,d,e,f,g){var h=function(a,b,c){g.prototype.constructor.apply(this,[1,!1,"self",c]);this._userId=a;this._plans=[];if(b){this._planId=b;this._singlePlan=!0}};h.prototype=Object.create(g.prototype);h.prototype._plans=null;h.prototype._planId=null;h.prototype._singlePlan=!1;h.prototype._userId=null;h.prototype._afterRender=function(){var c=this;g.prototype._afterRender.apply(c,arguments);if(!c._singlePlan){c._find("[data-action=\"chooseplan\"]").change(function(d){c._planId=a(d.target).val();c._loadCompetencies().then(c._refresh.bind(c)).catch(b.exception)})}};h.prototype._fetchCompetencies=function(a,d){var e=this;return c.call([{methodname:"core_competency_list_plan_competencies",args:{id:a}}])[0].done(function(a){var b,c,f=[];for(b=0;b<a.length;b++){c=a[b].competency;if(0>c.shortname.toLowerCase().indexOf(d.toLowerCase())){continue}c.children=[];c.haschildren=0;f.push(c)}e._competencies=f}).fail(b.exception)};h.prototype._getPlan=function(b){var c;a.each(this._plans,function(a,d){if(d.id==b){c=d}});return c};h.prototype._loadCompetencies=function(){return this._fetchCompetencies(this._planId,this._searchText)};h.prototype._loadPlans=function(){var d,e=this;if(0<e._plans.length){return a.when()}if(e._singlePlan){d=c.call([{methodname:"core_competency_read_plan",args:{id:this._planId}}])[0].then(function(a){return[a]})}else{d=c.call([{methodname:"core_competency_list_user_plans",args:{userid:e._userId}}])[0]}return d.done(function(a){e._plans=a}).fail(b.exception)};h.prototype._preRender=function(){var b=this;return b._loadPlans().then(function(){if(!b._planId&&0<b._plans.length){b._planId=b._plans[0].id}if(!b._planId){b._plans=[];return a.when()}return b._loadCompetencies()})};h.prototype._render=function(){var b=this;return b._preRender().then(function(){if(!b._singlePlan){a.each(b._plans,function(a,c){if(c.id==b._planId){c.selected=!0}else{c.selected=!1}})}var c={competencies:b._competencies,plan:b._getPlan(b._planId),plans:b._plans,search:b._searchText,singlePlan:b._singlePlan};return d.render("tool_lp/competency_picker_user_plans",c)})};return h});
define ("tool_lp/user_competency_plan_popup",["jquery","core/notification","core/str","core/ajax","core/templates","tool_lp/dialogue"],function(a,b,c,d,e,f){var g=function(b,c,d){this._regionSelector=b;this._userCompetencySelector=c;this._planId=d;a(this._regionSelector).on("click",this._userCompetencySelector,this._handleClick.bind(this))};g.prototype._handleClick=function(c){c.preventDefault();var e=a(c.target).closest("tr"),f=a(e).data("competencyid"),g=a(e).data("userid"),h=this._planId,i=d.call([{methodname:"tool_lp_data_for_user_competency_summary_in_plan",args:{competencyid:f,planid:h},done:this._contextLoaded.bind(this),fail:b.exception}]);i[0].then(function(a){var b="core_competency_user_competency_viewed_in_plan";if(a.plan.iscompleted){b="core_competency_user_competency_plan_viewed"}return d.call([{methodname:b,args:{competencyid:f,userid:g,planid:h}}])[0]}).catch(b.exception)};g.prototype._contextLoaded=function(a){var d=this;e.render("tool_lp/user_competency_summary_in_plan",a).done(function(a,g){c.get_string("usercompetencysummary","report_competency").done(function(b){new f(b,a,e.runTemplateJS.bind(e,g),d._refresh.bind(d),!0)}).fail(b.exception)}).fail(b.exception)};g.prototype._refresh=function(){var a=this._planId;d.call([{methodname:"tool_lp_data_for_plan_page",args:{planid:a},done:this._pageContextLoaded.bind(this),fail:b.exception}])};g.prototype._pageContextLoaded=function(a){var c=this;e.render("tool_lp/plan_page",a).done(function(a,b){e.replaceNode(c._regionSelector,a,b)}).fail(b.exception)};g.prototype._regionSelector=null;g.prototype._userCompetencySelector=null;g.prototype._planId=null;return g});
define ("tool_lp/frameworkactions",["jquery","core/templates","core/ajax","core/notification","core/str"],function(a,b,c,d,e){var f=0,g=0,h=function(c,d){a("[data-region=\"managecompetencies\"]").replaceWith(c);b.runTemplateJS(d)},i=function(a){b.render("tool_lp/manage_competency_frameworks_page",a).done(h).fail(d.exception)},j=function(b){b.preventDefault();g=a(this).attr("data-frameworkid");var e=c.call([{methodname:"core_competency_duplicate_competency_framework",args:{id:g}},{methodname:"tool_lp_data_for_competency_frameworks_manage_page",args:{pagecontext:{contextid:f}}}]);e[1].done(i).fail(d.exception)},k=function(){var a=c.call([{methodname:"core_competency_delete_competency_framework",args:{id:g}},{methodname:"tool_lp_data_for_competency_frameworks_manage_page",args:{pagecontext:{contextid:f}}}]);a[0].done(function(a){if(!1===a){var b=c.call([{methodname:"core_competency_read_competency_framework",args:{id:g}}]);b[0].done(function(a){e.get_strings([{key:"frameworkcannotbedeleted",component:"tool_lp",param:a.shortname},{key:"cancel",component:"moodle"}]).done(function(a){d.alert(null,a[0])}).fail(d.exception)})}}).fail(d.exception);a[1].done(i).fail(d.exception)},l=function(b){b.preventDefault();var f=a(this).attr("data-frameworkid");g=f;var h=c.call([{methodname:"core_competency_read_competency_framework",args:{id:g}}]);h[0].done(function(a){e.get_strings([{key:"confirm",component:"moodle"},{key:"deletecompetencyframework",component:"tool_lp",param:a.shortname},{key:"delete",component:"moodle"},{key:"cancel",component:"moodle"}]).done(function(a){d.confirm(a[0],a[1],a[2],a[3],k)}).fail(d.exception)}).fail(d.exception)};return{deleteHandler:l,duplicateHandler:j,init:function init(a){f=a}}});
define ("tool_lp/form-user-selector",["jquery","core/ajax","core/templates"],function(a,b,c){return{processResults:function processResults(b,c){var d=[];a.each(c,function(a,b){d.push({value:b.id,label:b._label})});return d},transport:function transport(d,e,f,g){var h,i=a(d).data("capability");if("undefined"==typeof i){i=""}h=b.call([{methodname:"tool_lp_search_users",args:{query:e,capability:i}}]);h[0].then(function(b){var d=[],e=0;a.each(b.users,function(b,e){var f=e,g=[];a.each(["idnumber","email","phone1","phone2","department","institution"],function(a,b){if("undefined"!=typeof e[b]&&""!==e[b]){f.hasidentity=!0;g.push(e[b])}});f.identity=g.join(", ");d.push(c.render("tool_lp/form-user-selector-suggestion",f))});return a.when.apply(a.when,d).then(function(){var c=arguments;a.each(b.users,function(a,b){b._label=c[e];e++});f(b.users)})}).catch(g)}}});
define ("tool_lp/user_competency_info",["jquery","core/notification","core/ajax","core/templates"],function(a,b,c,d){var e=function(a,b,c,d,e,f){this._rootElement=a;this._competencyId=b;this._userId=c;this._planId=d;this._courseId=e;this._valid=!0;this._displayuser="undefined"!=typeof f?f:!1;if(this._planId){this._methodName="tool_lp_data_for_user_competency_summary_in_plan";this._args={competencyid:this._competencyId,planid:this._planId};this._templateName="tool_lp/user_competency_summary_in_plan"}else if(this._courseId){this._methodName="tool_lp_data_for_user_competency_summary_in_course";this._args={userid:this._userId,competencyid:this._competencyId,courseid:this._courseId};this._templateName="tool_lp/user_competency_summary_in_course"}else{this._methodName="tool_lp_data_for_user_competency_summary";this._args={userid:this._userId,competencyid:this._competencyId};this._templateName="tool_lp/user_competency_summary"}};e.prototype.reload=function(){var a=this,e=[];if(!this._valid){return}e=c.call([{methodname:this._methodName,args:this._args}]);e[0].done(function(c){if(a._displayuser){c.displayuser=!0}d.render(a._templateName,c).done(function(b,c){d.replaceNode(a._rootElement,b,c)}).fail(b.exception)}).fail(b.exception)};e.prototype._rootElement=null;e.prototype._courseId=null;e.prototype._valid=null;e.prototype._planId=null;e.prototype._competencyId=null;e.prototype._userId=null;e.prototype._methodName=null;e.prototype._args=null;e.prototype._templateName=null;e.prototype._displayuser=!1;return e});
define ("tool_lp/tree",["jquery","core/url","core/log"],function(a,b,c){var d=a("<img alt=\"\" src=\""+b.imageUrl("t/expanded")+"\"/>"),e=a("<img alt=\"\" src=\""+b.imageUrl("t/collapsed")+"\"/>"),f=function(b,c){this.treeRoot=a(b);this.multiSelect="undefined"==typeof c||!0===c;this.items=this.treeRoot.find("li");this.expandAll=20>this.items.length;this.parents=this.treeRoot.find("li:has(ul)");if(c){this.treeRoot.attr("aria-multiselectable","true")}this.items.attr("aria-selected","false");this.visibleItems=null;this.activeItem=null;this.lastActiveItem=null;this.keys={tab:9,enter:13,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,eight:56,asterisk:106};this.init();this.bindEventHandlers()};f.prototype.init=function(){this.parents.attr("aria-expanded","true");this.parents.prepend(d.clone());this.items.attr("role","tree-item");this.items.attr("tabindex","-1");this.parents.attr("role","group");this.treeRoot.attr("role","tree");this.visibleItems=this.treeRoot.find("li");var b=this;if(!this.expandAll){this.parents.each(function(){b.collapseGroup(a(this))});this.expandGroup(this.parents.first())}};f.prototype.expandGroup=function(a){var b=a.children("ul");b.show().attr("aria-hidden","false");a.attr("aria-expanded","true");a.children("img").attr("src",d.attr("src"));this.visibleItems=this.treeRoot.find("li:visible")};f.prototype.collapseGroup=function(a){var b=a.children("ul");b.hide().attr("aria-hidden","true");a.attr("aria-expanded","false");a.children("img").attr("src",e.attr("src"));this.visibleItems=this.treeRoot.find("li:visible")};f.prototype.toggleGroup=function(a){if("true"==a.attr("aria-expanded")){this.collapseGroup(a)}else{this.expandGroup(a)}};f.prototype.triggerChange=function(){var a=this.items.filter("[aria-selected=true]");if(!this.multiSelect){a=a.first()}this.treeRoot.trigger("selectionchanged",{selected:a})};f.prototype.multiSelectItem=function(b){if(!this.multiSelect){this.items.attr("aria-selected","false")}else if(null!==this.lastActiveItem){var c=this.visibleItems.index(this.lastActiveItem),d=this.visibleItems.index(this.activeItem),e=null;while(c<d){e=a(this.visibleItems.get(c));e.attr("aria-selected","true");c++}while(c>d){e=a(this.visibleItems.get(c));e.attr("aria-selected","true");c--}}b.attr("aria-selected","true");this.triggerChange()};f.prototype.selectItem=function(a){var b=a.parent();while("tree"!=b.attr("role")){b=b.parent();if("false"==b.attr("aria-expanded")){this.expandGroup(b)}b=b.parent()}this.items.attr("aria-selected","false");a.attr("aria-selected","true");this.triggerChange()};f.prototype.toggleItem=function(a){if(!this.multiSelect){this.selectItem(a);return}var b=a.attr("aria-selected");if("true"===b){b="false"}else{b="true"}a.attr("aria-selected",b);this.triggerChange()};f.prototype.updateFocus=function(a){this.lastActiveItem=this.activeItem;this.activeItem=a;var b=a.parent();while("tree"!=b.attr("role")){b=b.parent();if("false"==b.attr("aria-expanded")){this.expandGroup(b)}b=b.parent()}this.items.attr("tabindex","-1");a.attr("tabindex",0)};f.prototype.handleKeyDown=function(b,c){var d=this.visibleItems.index(b),e=null,f=c.shiftKey||c.ctrlKey||c.metaKey||c.altKey,g=this;switch(c.keyCode){case this.keys.home:{e=this.parents.first();e.focus();if(c.shiftKey){this.multiSelectItem(e)}else if(!f){this.selectItem(e)}c.stopPropagation();return!1}case this.keys.end:{e=this.visibleItems.last();e.focus();if(c.shiftKey){this.multiSelectItem(e)}else if(!f){this.selectItem(e)}c.stopPropagation();return!1}case this.keys.enter:case this.keys.space:{if(c.shiftKey){this.multiSelectItem(b)}else if(c.metaKey||c.ctrlKey){this.toggleItem(b)}else{this.selectItem(b)}c.stopPropagation();return!1}case this.keys.left:{if(b.has("ul")&&"true"==b.attr("aria-expanded")){this.collapseGroup(b)}else{var h=b.parent(),i=h.parent();if(i.is("li")){i.focus();if(c.shiftKey){this.multiSelectItem(i)}else if(!f){this.selectItem(i)}}}c.stopPropagation();return!1}case this.keys.right:{if(b.has("ul")&&"false"==b.attr("aria-expanded")){this.expandGroup(b)}else{e=b.children("ul").children("li").first();if(0<e.length){e.focus();if(c.shiftKey){this.multiSelectItem(e)}else if(!f){this.selectItem(e)}}}c.stopPropagation();return!1}case this.keys.up:{if(0<d){var j=this.visibleItems.eq(d-1);j.focus();if(c.shiftKey){this.multiSelectItem(j)}else if(!f){this.selectItem(j)}}c.stopPropagation();return!1}case this.keys.down:{if(d<this.visibleItems.length-1){var k=this.visibleItems.eq(d+1);k.focus();if(c.shiftKey){this.multiSelectItem(k)}else if(!f){this.selectItem(k)}}c.stopPropagation();return!1}case this.keys.asterisk:{this.parents.each(function(){g.expandGroup(a(this))});c.stopPropagation();return!1}case this.keys.eight:{if(c.shiftKey){this.parents.each(function(){g.expandGroup(a(this))});c.stopPropagation()}return!1}}return!0};f.prototype.handleKeyPress=function(a,b){if(b.altKey||b.ctrlKey||b.shiftKey||b.metaKey){return!0}switch(b.keyCode){case this.keys.tab:{return!0}case this.keys.enter:case this.keys.home:case this.keys.end:case this.keys.left:case this.keys.right:case this.keys.up:case this.keys.down:{b.stopPropagation();return!1}default:{var c=String.fromCharCode(b.which),d=!1,e=this.visibleItems.index(a),f=this.visibleItems.length,g=e+1;if(g==f){g=0}while(g!=e){var h=this.visibleItems.eq(g),i=h.text().charAt(0);if(h.has("ul")){i=h.find("span").text().charAt(0)}if(i.toLowerCase()==c){d=!0;break}g=g+1;if(g==f){g=0}}if(!0===d){this.updateFocus(this.visibleItems.eq(g))}b.stopPropagation();return!1}}return!0};f.prototype.on=function(a,b){if("selectionchanged"!==a){c.warning("Invalid custom event name for tree. Only \"selectionchanged\" is supported.")}else{this.treeRoot.on(a,b)}};f.prototype.handleDblClick=function(a,b){if(b.altKey||b.ctrlKey||b.shiftKey||b.metaKey){return!0}this.updateFocus(a);this.toggleGroup(a);b.stopPropagation();return!1};f.prototype.handleExpandCollapseClick=function(a,b){this.toggleGroup(a);b.stopPropagation();return!1};f.prototype.handleClick=function(a,b){if(b.shiftKey){this.multiSelectItem(a)}else if(b.metaKey||b.ctrlKey){this.toggleItem(a)}else{this.selectItem(a)}this.updateFocus(a);b.stopPropagation();return!1};f.prototype.handleBlur=function(){return!0};f.prototype.handleFocus=function(a){this.updateFocus(a);return!0};f.prototype.bindEventHandlers=function(){var b=this;this.parents.dblclick(function(c){return b.handleDblClick(a(this),c)});this.items.click(function(c){return b.handleClick(a(this),c)});this.items.children("img").click(function(c){return b.handleExpandCollapseClick(a(this).parent(),c)});this.items.keydown(function(c){return b.handleKeyDown(a(this),c)});this.items.keypress(function(c){return b.handleKeyPress(a(this),c)});this.items.focus(function(c){return b.handleFocus(a(this),c)});this.items.blur(function(c){return b.handleBlur(a(this),c)})};return f});
define ("tool_lp/form_competency_element",["jquery","tool_lp/competencypicker","core/ajax","core/notification","core/templates"],function(a,b,c,d,e){var f=null,g=1,h=function(){var b=a("[data-action=\"competencies\"]").val(),f=[],g=0;if(""!=b){b=b.split(",");for(g=0;g<b.length;g++){f[f.length]={methodname:"core_competency_read_competency",args:{id:b[g]}}}}a.when.apply(a,c.call(f,!1)).then(function(){var a=0,b=[];for(a=0;a<arguments.length;a++){b[a]=arguments[a]}return e.render("tool_lp/form_competency_list",{competencies:b})}).then(function(b,c){e.replaceNode(a("[data-region=\"competencies\"]"),b,c);return!0}).fail(d.exception);return!0},i=function(b){var c=a("[data-action=\"competencies\"]").val().split(","),d=[],e,f=a(b.currentTarget).data("id");for(e=0;e<c.length;e++){if(c[e]!=f){d[d.length]=c[e]}}a("[data-action=\"competencies\"]").val(d.join(","));return h()},j=function(){var c=a("[data-action=\"competencies\"]").val().split(",");if(!f){f=new b(g,!1,"parents",!0);f.on("save",function(b,c){var d=a("[data-action=\"competencies\"]").val(),e=c.competencyIds;if(""!=d){e=e.concat(d.split(","))}var f=e.join(",");a("[data-action=\"competencies\"]").val(f);return h()})}f.setDisallowedCompetencyIDs(c);f.display()};return{init:function init(b){g=b;h();a("[data-action=\"select-competencies\"]").on("click",j);a("body").on("click","[data-action=\"deselect-competency\"]",i)}}});
define ("tool_lp/competency_outcomes",["jquery","core/str"],function(a,b){return{NONE:0,EVIDENCE:1,COMPLETE:2,RECOMMEND:3,getAll:function getAll(){var a=this;return b.get_strings([{key:"competencyoutcome_none",component:"tool_lp"},{key:"competencyoutcome_evidence",component:"tool_lp"},{key:"competencyoutcome_recommend",component:"tool_lp"},{key:"competencyoutcome_complete",component:"tool_lp"}]).then(function(b){var c={};c[a.NONE]={code:a.NONE,name:b[0]};c[a.EVIDENCE]={code:a.EVIDENCE,name:b[1]};c[a.RECOMMEND]={code:a.RECOMMEND,name:b[2]};c[a.COMPLETE]={code:a.COMPLETE,name:b[3]};return c})},getString:function getString(b){var c=this,d=c.getAll();return d.then(function(c){if("undefined"==typeof c[b]){return a.Deferred().reject().promise()}return c[b].name})}}});
define ("tool_lp/course_competency_settings",["jquery","core/notification","tool_lp/dialogue","core/str","core/ajax","core/templates","core/pending"],function(a,b,c,d,f,g,h){var i=function(b){a(b).on("click",this.configureSettings.bind(this))};i.prototype._dialogue=null;i.prototype.configureSettings=function(f){var e=new h,i=a(f.target).closest("a").data("courseid"),j=a(f.target).closest("a").data("pushratingstouserplans");f.preventDefault();a.when(d.get_string("configurecoursecompetencysettings","tool_lp"),g.render("tool_lp/course_competency_settings",{courseid:i,settings:{pushratingstouserplans:j}})).then(function(a,b){this._dialogue=new c(a,b[0],this.addListeners.bind(this));return this._dialogue}.bind(this)).then(e.resolve).catch(b.exception)};i.prototype.addListeners=function(){var a=this._find("[data-action=\"save\"]");a.on("click",this.saveSettings.bind(this));var b=this._find("[data-action=\"cancel\"]");b.on("click",this.cancelChanges.bind(this))};i.prototype.cancelChanges=function(a){a.preventDefault();this._dialogue.close()};i.prototype._find=function(b){return a("[data-region=\"coursecompetencysettings\"]").find(b)};i.prototype.saveSettings=function(a){var c=new h;a.preventDefault();var d=this._find("input[name=\"pushratingstouserplans\"]:checked").val(),e=this._find("input[name=\"courseid\"]").val();f.call([{methodname:"core_competency_update_course_competency_settings",args:{courseid:e,settings:{pushratingstouserplans:d}}}])[0].then(function(){return this.refreshCourseCompetenciesPage()}.bind(this)).then(c.resolve).catch(b.exception)};i.prototype.refreshCourseCompetenciesPage=function(){var c=this._find("input[name=\"courseid\"]").val(),d=new h;f.call([{methodname:"tool_lp_data_for_course_competencies_page",args:{courseid:c,moduleid:0}}])[0].then(function(a){return g.render("tool_lp/course_competencies_page",a)}).then(function(b,c){g.replaceNode(a("[data-region=\"coursecompetenciespage\"]"),b,c);this._dialogue.close()}.bind(this)).then(d.resolve).catch(b.exception)};return i});
define ("tool_lp/templateactions",["jquery","core/templates","core/ajax","core/notification","core/str","tool_lp/actionselector"],function(a,b,c,d,e,f){var g=0,h=0,i=!0,j=function(c,d){a("[data-region=\"managetemplates\"]").replaceWith(c);b.runTemplateJS(d)},k=function(a){b.render("tool_lp/manage_templates_page",a).done(j).fail(d.exception)},l=function(){var a=c.call([{methodname:"core_competency_delete_template",args:{id:h,deleteplans:i}},{methodname:"tool_lp_data_for_templates_manage_page",args:{pagecontext:{contextid:g}}}]);a[1].done(k).fail(d.exception)},m=function(b){b.preventDefault();h=a(this).attr("data-templateid");var e=c.call([{methodname:"core_competency_duplicate_template",args:{id:h}},{methodname:"tool_lp_data_for_templates_manage_page",args:{pagecontext:{contextid:g}}}]);e[1].done(k).fail(d.exception)},n=function(b){b.preventDefault();var g=a(this).attr("data-templateid");h=g;i=!0;var j=c.call([{methodname:"core_competency_read_template",args:{id:h}},{methodname:"core_competency_template_has_related_data",args:{id:h}}]);j[0].done(function(a){j[1].done(function(b){if(b){e.get_strings([{key:"deletetemplate",component:"tool_lp",param:a.shortname},{key:"deletetemplatewithplans",component:"tool_lp"},{key:"deleteplans",component:"tool_lp"},{key:"unlinkplanstemplate",component:"tool_lp"},{key:"confirm",component:"moodle"},{key:"cancel",component:"moodle"}]).done(function(a){var b=[{text:a[2],value:"delete"},{text:a[3],value:"unlink"}],c=new f(a[0],a[1],b,a[4],a[5]);c.display();c.on("save",function(a,b){if("delete"!=b.action){i=!1}l()})}).fail(d.exception)}else{e.get_strings([{key:"confirm",component:"moodle"},{key:"deletetemplate",component:"tool_lp",param:a.shortname},{key:"delete",component:"moodle"},{key:"cancel",component:"moodle"}]).done(function(a){d.confirm(a[0],a[1],a[2],a[3],l)}).fail(d.exception)}}).fail(d.exception)}).fail(d.exception)};return{deleteHandler:n,duplicateHandler:m,init:function init(a){g=a}}});
define ("tool_lp/user_competency_workflow",["jquery","core/templates","core/ajax","core/notification","core/str","tool_lp/menubar","tool_lp/event_base"],function(a,b,c,d,e,f,g){var h=function(){g.prototype.constructor.apply(this,[])};h.prototype=Object.create(g.prototype);h.prototype._nodeSelector="[data-node=\"user-competency\"]";h.prototype._cancelReviewRequest=function(a){var b={methodname:"core_competency_user_competency_cancel_review_request",args:{userid:a.userid,competencyid:a.competencyid}};c.call([b])[0].then(function(){this._trigger("review-request-cancelled",a);this._trigger("status-changed",a)}.bind(this)).catch(function(){this._trigger("error-occured",a)}.bind(this))};h.prototype.cancelReviewRequest=function(a){this._cancelReviewRequest(a)};h.prototype._cancelReviewRequestHandler=function(b){b.preventDefault();var c=this._findUserCompetencyData(a(b.target));this.cancelReviewRequest(c)};h.prototype._requestReview=function(a){var b={methodname:"core_competency_user_competency_request_review",args:{userid:a.userid,competencyid:a.competencyid}};c.call([b])[0].then(function(){this._trigger("review-requested",a);this._trigger("status-changed",a)}.bind(this)).catch(function(){this._trigger("error-occured",a)}.bind(this))};h.prototype.requestReview=function(a){this._requestReview(a)};h.prototype._requestReviewHandler=function(b){b.preventDefault();var c=this._findUserCompetencyData(a(b.target));this.requestReview(c)};h.prototype._startReview=function(a){var b={methodname:"core_competency_user_competency_start_review",args:{userid:a.userid,competencyid:a.competencyid}};c.call([b])[0].then(function(){this._trigger("review-started",a);this._trigger("status-changed",a)}.bind(this)).catch(function(){this._trigger("error-occured",a)}.bind(this))};h.prototype.startReview=function(a){this._startReview(a)};h.prototype._startReviewHandler=function(b){b.preventDefault();var c=this._findUserCompetencyData(a(b.target));this.startReview(c)};h.prototype._stopReview=function(a){var b={methodname:"core_competency_user_competency_stop_review",args:{userid:a.userid,competencyid:a.competencyid}};c.call([b])[0].then(function(){this._trigger("review-stopped",a);this._trigger("status-changed",a)}.bind(this)).catch(function(){this._trigger("error-occured",a)}.bind(this))};h.prototype.stopReview=function(a){this._stopReview(a)};h.prototype._stopReviewHandler=function(b){b.preventDefault();var c=this._findUserCompetencyData(a(b.target));this.stopReview(c)};h.prototype.enhanceMenubar=function(a){f.enhance(a,{'[data-action="request-review"]':this._requestReviewHandler.bind(this),'[data-action="cancel-review-request"]':this._cancelReviewRequestHandler.bind(this)})};h.prototype._findUserCompetencyData=function(a){var b=a.parents(this._nodeSelector),c;if(1!=b.length){throw new Error("The evidence node was not located.")}c=b.data();if("undefined"==typeof c||"undefined"==typeof c.userid||"undefined"==typeof c.competencyid){throw new Error("User competency data could not be found.")}return c};h.prototype.enhanceMenubar=function(a){f.enhance(a,{'[data-action="request-review"]':this._requestReviewHandler.bind(this),'[data-action="cancel-review-request"]':this._cancelReviewRequestHandler.bind(this),'[data-action="start-review"]':this._startReviewHandler.bind(this),'[data-action="stop-review"]':this._stopReviewHandler.bind(this)})};h.prototype.registerEvents=function(b){var c=a(b);c.find("[data-action=\"request-review\"]").click(this._requestReviewHandler.bind(this));c.find("[data-action=\"cancel-review-request\"]").click(this._cancelReviewRequestHandler.bind(this));c.find("[data-action=\"start-review\"]").click(this._startReviewHandler.bind(this));c.find("[data-action=\"stop-review\"]").click(this._stopReviewHandler.bind(this))};return h});
define ("tool_lp/dragdrop-reorder",["core/str","core/yui"],function(a,b){var c=null,d=function(a){var b=a.drag.get("node"),c=a.drop.get("node");this.callback(b.getDOMNode(),c.getDOMNode())};return{dragdrop:function dragdrop(e,f,g,h,i,j,k,l){a.get_strings([{key:"emptydragdropregion",component:"moodle"},{key:"movecontent",component:"moodle"},{key:"tocontent",component:"moodle"}]).done(function(){b.use("moodle-tool_lp-dragdrop-reorder",function(){if(c){c.destroy()}c=M.tool_lp.dragdrop_reorder({group:e,dragHandleText:f,sameNodeText:g,parentNodeText:h,sameNodeClass:i,parentNodeClass:j,dragHandleInsertClass:k,callback:b.bind(d,{callback:l})})})})}}});
define ("tool_lp/module_navigation",["jquery"],function(a){var b=function(b,c,d,e){this._baseUrl=c;this._moduleId=e;this._courseId=d;a(b).on("change",this._moduleChanged.bind(this))};b.prototype._moduleChanged=function(b){var c=a(b.target).val(),d="?mod="+c+"&courseid="+this._courseId;document.location=this._baseUrl+d};b.prototype._courseId=null;b.prototype._moduleId=null;b.prototype._baseUrl=null;return b});
define ("tool_lp/competencyruleconfig",["jquery","core/notification","core/templates","tool_lp/dialogue","tool_lp/competency_outcomes","core/str"],function(a,b,c,d,e,f){var g=function(b,c){this._eventNode=a("<div></div>");this._tree=b;this._rulesModules=c;this._setUp()};g.prototype._competency=null;g.prototype._eventNode=null;g.prototype._outcomesOption=null;g.prototype._popup=null;g.prototype._ready=null;g.prototype._rules=null;g.prototype._rulesModules=null;g.prototype._tree=null;g.prototype._afterChange=function(){if(!this._isValid()){this._find("[data-action=\"save\"]").prop("disabled",!0)}else{this._find("[data-action=\"save\"]").prop("disabled",!1)}};g.prototype._afterRuleConfigChange=function(a,b){if(b!=this._getRule()){return}this._afterChange()};g.prototype._afterRender=function(){var a=this;a._find("[name=\"outcome\"]").on("change",function(){a._switchedOutcome()}).trigger("change");a._find("[name=\"rule\"]").on("change",function(){a._switchedRule()}).trigger("change");a._find("[data-action=\"save\"]").on("click",function(){a._trigger("save",a._getConfig());a.close()});a._find("[data-action=\"cancel\"]").on("click",function(){a.close()})};g.prototype.canBeConfigured=function(){var b=!1;a.each(this._rules,function(a,c){if(c.canConfig()){b=!0}});return b};g.prototype.close=function(){this._popup.close();this._popup=null};g.prototype.display=function(){var c=this;if(!c._competency){return!1}return a.when(f.get_string("competencyrule","tool_lp"),c._render()).then(function(a,b){c._popup=new d(a,b[0],c._afterRender.bind(c))}).fail(b.exception)};g.prototype._find=function(b){return a(this._popup.getContent()).find(b)};g.prototype._getApplicableOutcomesOptions=function(){var b=this,c=[];a.each(b._outcomesOption,function(a,d){c.push({code:d.code,name:d.name,selected:d.code==b._competency.ruleoutcome?!0:!1})});return c};g.prototype._getApplicableRulesOptions=function(){var b=this,c=[];a.each(b._rules,function(a,d){if(!d.canConfig()){return}c.push({name:b._getRuleName(d.getType()),type:d.getType(),selected:d.getType()==b._competency.ruletype?!0:!1})});return c};g.prototype._getConfig=function(){var a=this._getRule();return{ruletype:a?a.getType():null,ruleconfig:a?a.getConfig():null,ruleoutcome:this._getOutcome()}};g.prototype._getOutcome=function(){return this._find("[name=\"outcome\"]").val()};g.prototype._getRule=function(){var b,c=this._find("[name=\"rule\"]").val();a.each(this._rules,function(a,d){if(d.getType()==c){b=d}});return b};g.prototype._getRuleName=function(b){var c=this,d;a.each(c._rulesModules,function(a,c){if(c.type==b){d=c.name}});return d};g.prototype._initOutcomes=function(){var a=this;return e.getAll().then(function(b){a._outcomesOption=b})};g.prototype._initRules=function(){var b=this,c=[];a.each(b._rules,function(d,e){var f=e.init().then(function(){e.setTargetCompetency(b._competency);e.on("change",b._afterRuleConfigChange.bind(b))},function(){b._rules.splice(d,1);return a.when()});c.push(f)});return a.when.apply(a.when,c)};g.prototype._isValid=function(){var a=this._getOutcome(),b=this._getRule();if(a==e.NONE){return!0}else if(!b){return!1}return b.isValid()};g.prototype.on=function(a,b){this._eventNode.on(a,b)};g.prototype._preRender=function(){return this.ready()};g.prototype.ready=function(){return this._ready.promise()};g.prototype._render=function(){var a=this;return this._preRender().then(function(){var b;if(!a.canBeConfigured()){b=!1}else{b={};b.outcomes=a._getApplicableOutcomesOptions();b.rules=a._getApplicableRulesOptions()}var d={competencyshortname:a._competency.shortname,config:b};return c.render("tool_lp/competency_rule_config",d)})};g.prototype.setTargetCompetencyId=function(b){var c=this;c._competency=c._tree.getCompetency(b);a.each(c._rules,function(a,b){b.setTargetCompetency(c._competency)})};g.prototype._setUp=function(){var b=this,c=[],d=[];b._ready=a.Deferred();b._rules=[];a.each(b._rulesModules,function(a,b){d.push(b.amd)});require(d,function(){a.each(arguments,function(a,c){var d=new c(b._tree);b._rules.push(d)});c.push(b._initRules());c.push(b._initOutcomes());a.when.apply(a.when,c).always(function(){b._ready.resolve()})})};g.prototype._switchedOutcome=function(){var a=this,b=a._getOutcome();if(b==e.NONE){a._find("[data-region=\"rule-type\"]").hide().find("[name=\"rule\"]").val(-1);a._find("[data-region=\"rule-config\"]").empty().hide();a._afterChange();return}a._find("[data-region=\"rule-type\"]").show();a._find("[data-region=\"rule-config\"]").show();a._afterChange()};g.prototype._switchedRule=function(){var a=this,b=a._find("[data-region=\"rule-config\"]"),c=a._getRule();if(!c){b.empty().hide();a._afterChange();return}c.injectTemplate(b).then(function(){b.show()}).always(function(){a._afterChange()}).catch(function(){b.empty().hide()})};g.prototype._trigger=function(a,b){this._eventNode.trigger(a,[b])};return g});
define ("tool_lp/competency_rule_all",["jquery","core/str","tool_lp/competency_rule"],function(a,b,c){var d=function(){c.apply(this,arguments)};d.prototype=Object.create(c.prototype);d.prototype.getType=function(){return"core_competency\\competency_rule_all"};d.prototype.isValid=function(){return!0};return d});
define ("tool_lp/planactions",["jquery","core/templates","core/ajax","core/notification","core/str","tool_lp/menubar","tool_lp/dialogue"],function(a,b,c,d,e,f,g){var h=function(a){this._type=a;if("plan"===a){this._region="[data-region=\"plan-page\"]";this._planNode="[data-region=\"plan-page\"]";this._template="tool_lp/plan_page";this._contextMethod="tool_lp_data_for_plan_page"}else if("plans"===a){this._region="[data-region=\"plans\"]";this._planNode="[data-region=\"plan-node\"]";this._template="tool_lp/plans_page";this._contextMethod="tool_lp_data_for_plans_page"}else{throw new TypeError("Unexpected type.")}};h.prototype._contextMethod=null;h.prototype._planNode=null;h.prototype._region=null;h.prototype._template=null;h.prototype._type=null;h.prototype._getContextArgs=function(a){var b=this,c={};if("plan"===b._type){c={planid:a.id}}else if("plans"===b._type){c={userid:a.userid}}return c};h.prototype.refresh=function(b){var c=this._findPlanData(a(b));this._callAndRefresh([],c)};h.prototype._renderView=function(c){var d=this;return b.render(d._template,c).then(function(c,e){a(d._region).replaceWith(c);b.runTemplateJS(e)})};h.prototype._callAndRefresh=function(b,e){var f="tool_lp/planactions:_callAndRefresh-"+Math.floor(Math.random()*Math.floor(1e3));M.util.js_pending(f);var g=this;b.push({methodname:g._contextMethod,args:g._getContextArgs(e)});return a.when.apply(a,c.call(b)).then(function(){return g._renderView(arguments[arguments.length-1])}).fail(d.exception).always(function(){return M.util.js_complete(f)})};h.prototype._doDelete=function(a){var b=this,c=[{methodname:"core_competency_delete_plan",args:{id:a.id}}];b._callAndRefresh(c,a)};h.prototype.deletePlan=function(a){var b=this,f;f=c.call([{methodname:"core_competency_read_plan",args:{id:a.id}}]);f[0].done(function(c){e.get_strings([{key:"confirm",component:"moodle"},{key:"deleteplan",component:"tool_lp",param:c.name},{key:"delete",component:"moodle"},{key:"cancel",component:"moodle"}]).done(function(c){d.confirm(c[0],c[1],c[2],c[3],function(){b._doDelete(a)})}).fail(d.exception)}).fail(d.exception)};h.prototype._doReopenPlan=function(a){var b=this,c=[{methodname:"core_competency_reopen_plan",args:{planid:a.id}}];b._callAndRefresh(c,a)};h.prototype.reopenPlan=function(a){var b=this,f=c.call([{methodname:"core_competency_read_plan",args:{id:a.id}}]);f[0].done(function(c){e.get_strings([{key:"confirm",component:"moodle"},{key:"reopenplanconfirm",component:"tool_lp",param:c.name},{key:"reopenplan",component:"tool_lp"},{key:"cancel",component:"moodle"}]).done(function(c){d.confirm(c[0],c[1],c[2],c[3],function(){b._doReopenPlan(a)})}).fail(d.exception)}).fail(d.exception)};h.prototype._doCompletePlan=function(a){var b=this,c=[{methodname:"core_competency_complete_plan",args:{planid:a.id}}];b._callAndRefresh(c,a)};h.prototype.completePlan=function(a){var b=this,f=c.call([{methodname:"core_competency_read_plan",args:{id:a.id}}]);f[0].done(function(c){e.get_strings([{key:"confirm",component:"moodle"},{key:"completeplanconfirm",component:"tool_lp",param:c.name},{key:"completeplan",component:"tool_lp"},{key:"cancel",component:"moodle"}]).done(function(c){d.confirm(c[0],c[1],c[2],c[3],function(){b._doCompletePlan(a)})}).fail(d.exception)}).fail(d.exception)};h.prototype._doUnlinkPlan=function(a){var b=this,c=[{methodname:"core_competency_unlink_plan_from_template",args:{planid:a.id}}];b._callAndRefresh(c,a)};h.prototype.unlinkPlan=function(a){var b=this,f=c.call([{methodname:"core_competency_read_plan",args:{id:a.id}}]);f[0].done(function(c){e.get_strings([{key:"confirm",component:"moodle"},{key:"unlinkplantemplateconfirm",component:"tool_lp",param:c.name},{key:"unlinkplantemplate",component:"tool_lp"},{key:"cancel",component:"moodle"}]).done(function(c){d.confirm(c[0],c[1],c[2],c[3],function(){b._doUnlinkPlan(a)})}).fail(d.exception)}).fail(d.exception)};h.prototype._doRequestReview=function(a){var b=[{methodname:"core_competency_plan_request_review",args:{id:a.id}}];this._callAndRefresh(b,a)};h.prototype.requestReview=function(a){this._doRequestReview(a)};h.prototype._doCancelReviewRequest=function(a){var b=[{methodname:"core_competency_plan_cancel_review_request",args:{id:a.id}}];this._callAndRefresh(b,a)};h.prototype.cancelReviewRequest=function(a){this._doCancelReviewRequest(a)};h.prototype._doStartReview=function(a){var b=[{methodname:"core_competency_plan_start_review",args:{id:a.id}}];this._callAndRefresh(b,a)};h.prototype.startReview=function(a){this._doStartReview(a)};h.prototype._doStopReview=function(a){var b=[{methodname:"core_competency_plan_stop_review",args:{id:a.id}}];this._callAndRefresh(b,a)};h.prototype.stopReview=function(a){this._doStopReview(a)};h.prototype._doApprove=function(a){var b=[{methodname:"core_competency_approve_plan",args:{id:a.id}}];this._callAndRefresh(b,a)};h.prototype.approve=function(a){this._doApprove(a)};h.prototype._doUnapprove=function(a){var b=[{methodname:"core_competency_unapprove_plan",args:{id:a.id}}];this._callAndRefresh(b,a)};h.prototype.unapprove=function(a){this._doUnapprove(a)};h.prototype._showLinkedCoursesHandler=function(f){f.preventDefault();var h=a(f.target).data("id"),i=c.call([{methodname:"tool_lp_list_courses_using_competency",args:{id:h}}]);i[0].done(function(a){b.render("tool_lp/linked_courses_summary",{courses:a}).done(function(a){e.get_string("linkedcourses","tool_lp").done(function(b){new g(b,a)}).fail(d.exception)}).fail(d.exception)}).fail(d.exception)};h.prototype._eventHandler=function(b,c){c.preventDefault();var d=this._findPlanData(a(c.target));this[b](d)};h.prototype._findPlanData=function(b){var c=b.parentsUntil(a(this._region).parent(),this._planNode),d;if(1!=c.length){throw new Error("The plan node was not located.")}d=c.data();if("undefined"==typeof d||"undefined"==typeof d.id){throw new Error("Plan data could not be found.")}return d};h.prototype.enhanceMenubar=function(a){f.enhance(a,{'[data-action="plan-delete"]':this._eventHandler.bind(this,"deletePlan"),'[data-action="plan-complete"]':this._eventHandler.bind(this,"completePlan"),'[data-action="plan-reopen"]':this._eventHandler.bind(this,"reopenPlan"),'[data-action="plan-unlink"]':this._eventHandler.bind(this,"unlinkPlan"),'[data-action="plan-request-review"]':this._eventHandler.bind(this,"requestReview"),'[data-action="plan-cancel-review-request"]':this._eventHandler.bind(this,"cancelReviewRequest"),'[data-action="plan-start-review"]':this._eventHandler.bind(this,"startReview"),'[data-action="plan-stop-review"]':this._eventHandler.bind(this,"stopReview"),'[data-action="plan-approve"]':this._eventHandler.bind(this,"approve"),'[data-action="plan-unapprove"]':this._eventHandler.bind(this,"unapprove")})};h.prototype.registerEvents=function(){var b=a(this._region);b.find("[data-action=\"plan-delete\"]").click(this._eventHandler.bind(this,"deletePlan"));b.find("[data-action=\"plan-complete\"]").click(this._eventHandler.bind(this,"completePlan"));b.find("[data-action=\"plan-reopen\"]").click(this._eventHandler.bind(this,"reopenPlan"));b.find("[data-action=\"plan-unlink\"]").click(this._eventHandler.bind(this,"unlinkPlan"));b.find("[data-action=\"plan-request-review\"]").click(this._eventHandler.bind(this,"requestReview"));b.find("[data-action=\"plan-cancel-review-request\"]").click(this._eventHandler.bind(this,"cancelReviewRequest"));b.find("[data-action=\"plan-start-review\"]").click(this._eventHandler.bind(this,"startReview"));b.find("[data-action=\"plan-stop-review\"]").click(this._eventHandler.bind(this,"stopReview"));b.find("[data-action=\"plan-approve\"]").click(this._eventHandler.bind(this,"approve"));b.find("[data-action=\"plan-unapprove\"]").click(this._eventHandler.bind(this,"unapprove"));b.find("[data-action=\"find-courses-link\"]").click(this._showLinkedCoursesHandler.bind(this))};return h});
define ("tool_lp/competencydialogue",["jquery","core/notification","core/ajax","core/templates","core/str","tool_lp/dialogue"],function(a,b,c,d,e,f){var g,h=function(){};h.prototype.triggerCompetencyViewedEvent=function(a){c.call([{methodname:"core_competency_competency_viewed",args:{id:a}}])};h.prototype.showDialogue=function(a,c){var e=this.getCompetencyDataPromise(a,c),g=this;e.done(function(c){d.render("tool_lp/competency_summary",c).done(function(b){g.triggerCompetencyViewedEvent(a);new f(c.competency.shortname,b)}).fail(b.exception)}).fail(b.exception)};h.prototype.showDialogueFromData=function(a){var c=this;d.render("tool_lp/competency_summary",a).done(function(b){c.triggerCompetencyViewedEvent(a.id);new f(a.shortname,b,c.enhanceDialogue)}).fail(b.exception)};h.prototype.clickEventHandler=function(b){var c=b.data.compdialogue,d=a(b.currentTarget),e=d.data("id"),f=!d.data("excluderelated"),g=d.data("includecourses");c.showDialogue(e,{includerelated:f,includecourses:g});b.preventDefault()};h.prototype.getCompetencyDataPromise=function(a,d){var e=c.call([{methodname:"tool_lp_data_for_competency_summary",args:{competencyid:a,includerelated:d.includerelated||!1,includecourses:d.includecourses||!1}}]);return e[0].then(function(a){return a}).fail(b.exception)};return{init:function init(){if("undefined"!=typeof g){return}g=new h;a("body").delegate("[data-action=\"competency-dialogue\"]","click",{compdialogue:g},g.clickEventHandler.bind(g))}}});
define ("tool_lp/competencytree",["core/ajax","core/notification","core/templates","tool_lp/tree","tool_lp/competency_outcomes","jquery"],function(a,b,c,d,e,f){var g={},h=0,j="",k="",l="",m=!1,n=function(a,b){var c=0,d=!1;a.haschildren=!1;a.children=[];for(c=0;c<b.length;c++){d=b[c];if(d.parentid==a.id){a.haschildren=!0;a.children.push(d);n(d,b)}}},o=function(b){var e=f.Deferred();c.render("tool_lp/loading",{}).done(function(i,o){c.replaceNodeContents(f(k),i,o);var p=a.call([{methodname:"core_competency_search_competencies",args:{searchtext:b,competencyframeworkid:h}}]);p[0].done(function(a){g={};var b=0;for(b=0;b<a.length;b++){g[a[b].id]=a[b]}var h=[],o=!1;for(b=0;b<a.length;b++){o=a[b];if(0===parseInt(o.parentid,10)){h.push(o);n(o,a)}}var p={shortname:j,canmanage:m,competencies:h};c.render("tool_lp/competencies_tree_root",p).done(function(a,b){c.replaceNodeContents(f(k),f(a).html(),b);var h=new d(k,!1);if(l){var i=f(k).find("[data-id="+l+"]");if(i.length){h.selectItem(i);h.updateFocus(i)}}e.resolve(g)}).fail(e.reject)}).fail(e.reject)});return e.promise()},p=function(a,b){var c=b.selected;l=c.attr("data-id")};return{init:function init(a,c,d,e,f,g){h=a;j=c;m=f;k=e;o(d).fail(b.exception);if(0<g){l=g}this.on("selectionchanged",p)},on:function on(a,b){f(k).on(a,b)},getChildren:function getChildren(a){var b=[];f.each(g,function(c,d){if(d.parentid==a){b.push(d)}});return b},getCompetencyFrameworkId:function getCompetencyFrameworkId(){return h},getCompetency:function getCompetency(a){return g[a]},getCompetencyLevel:function getCompetencyLevel(a){var b=this.getCompetency(a),c=b.path.replace(/^\/|\/$/g,"").split("/").length;return c},hasChildren:function hasChildren(a){return 0<this.getChildren(a).length},hasRule:function hasRule(a){var b=this.getCompetency(a);if(b){return b.ruleoutcome!=e.OUTCOME_NONE&&b.ruletype}return!1},reloadCompetencies:function reloadCompetencies(){return o("").fail(b.exception)},listCompetencies:function listCompetencies(){return g}}});
define ("tool_lp/scalevalues",["jquery","core/ajax"],function(a,b){var c=[];return{get_values:function get_values(d){var e=a.Deferred();if("undefined"==typeof c[d]){b.call([{methodname:"core_competency_get_scale_values",args:{scaleid:d},done:function done(a){c[d]=a;e.resolve(a)},fail:e.reject}])}else{e.resolve(c[d])}return e.promise()}}});
define ("tool_lp/event_base",["jquery"],function(a){var b=function(){this._eventNode=a("<div></div>")};b.prototype._eventNode=null;b.prototype.on=function(a,b){this._eventNode.on(a,b)};b.prototype._trigger=function(a,b){this._eventNode.trigger(a,[b])};return b});
define ("tool_lp/competency_rule_points",["jquery","core/str","core/templates","tool_lp/competency_rule"],function(a,b,c,d){var e=function(){d.apply(this,arguments)};e.prototype=Object.create(d.prototype);e.prototype._container=null;e.prototype._templateLoaded=!1;e.prototype.getConfig=function(){return JSON.stringify({base:{points:this._getRequiredPoints()},competencies:this._getCompetenciesConfig()})};e.prototype._getCompetenciesConfig=function(){var b=[];this._container.find("[data-competency]").each(function(){var c=a(this),d=c.data("competency"),e=parseInt(c.find("[name=\"points\"]").val(),10),f=c.find("[name=\"required\"]").prop("checked");b.push({id:d,points:e,required:f?1:0})});return b};e.prototype._getRequiredPoints=function(){return parseInt(this._container.find("[name=\"requiredpoints\"]").val()||1,10)};e.prototype.getType=function(){return"core_competency\\competency_rule_points"};e.prototype.injectTemplate=function(b){var d=this,e=this._tree.getChildren(this._competency.id),f,g={base:{points:2},competencies:[]};this._templateLoaded=!1;if(d._competency.ruletype==d.getType()){try{g=JSON.parse(d._competency.ruleconfig)}catch(a){}}f={requiredpoints:g&&g.base?g.base.points:2,competency:d._competency,children:[]};a.each(e,function(b,c){var d={id:c.id,shortname:c.shortname,required:!1,points:0};if(g){a.each(g.competencies,function(a,b){if(b.id==d.id){d.required=b.required?!0:!1;d.points=b.points}})}f.children.push(d)});return c.render("tool_lp/competency_rule_points",f).then(function(a){d._container=b;b.html(a);b.find("input").change(function(){d._triggerChange()});d._templateLoaded=!0;d._triggerChange()})};e.prototype.isValid=function(){if(!this._templateLoaded){return!1}var b=this._getRequiredPoints(),c=0,d=!0;a.each(this._getCompetenciesConfig(),function(a,b){if(0>b.points){d=!1}c+=b.points});d=d&&c>=b;return d};return e});
define ("tool_lp/menubar",["jquery"],function(a){var b=!1,c=!1,d=function(){a(".tool-lp-menu .tool-lp-sub-menu").attr("aria-hidden","true");c=!1},e=function(a,b){this.menuRoot=a;this.handlers=b;this.rootMenus=this.menuRoot.children("li");this.subMenus=this.rootMenus.children("ul");this.subMenuItems=this.subMenus.children("li");this.allItems=this.rootMenus.add(this.subMenuItems);this.activeItem=null;this.isChildOpen=!1;this.keys={tab:9,enter:13,esc:27,space:32,left:37,up:38,right:39,down:40};this.addAriaAttributes();this.addEventListeners()};e.prototype.openSubMenu=function(a){this.setOpenDirection();d();a.attr("aria-hidden","false");c=!0};e.prototype.addEventListeners=function(){var f=this;if(!1==b){a(document).click(function(){if(c){d()}});b=!0}this.subMenuItems.mouseenter(function(){a(this).addClass("menu-hover");return!0});this.subMenuItems.mouseout(function(){a(this).removeClass("menu-hover");return!0});this.allItems.click(function(b){return f.handleClick(a(this),b)});this.allItems.keydown(function(b){return f.handleKeyDown(a(this),b)});this.allItems.focus(function(){return f.handleFocus(a(this))});this.allItems.blur(function(){return f.handleBlur(a(this))})};e.prototype.handleClick=function(b,c){c.stopPropagation();var d=b.parent();if(d.is(".tool-lp-menu")){if("true"==b.children("ul").first().attr("aria-hidden")){this.openSubMenu(b.children("ul").first())}else{b.children("ul").first().attr("aria-hidden","true")}}else{this.allItems.removeClass("menu-hover menu-focus");this.activeItem=null;this.menuRoot.find("ul").not(".root-level").attr("aria-hidden","true");var e=b.find("a").first(),f=new a.Event("click");f.target=e;var g=!1;if(this.handlers){a.each(this.handlers,function(c,d){if(g){return}if(0<b.find(c).length){var h=a.proxy(d,e);g=!1===h(f)||f.isDefaultPrevented()}})}if(!g&&"#"!==e.attr("href")){window.location.href=e.attr("href")}}return!1};e.prototype.handleFocus=function(a){if(null===this.activeItem){this.activeItem=a}else if(a[0]!=this.activeItem[0]){return!0}var b=this.activeItem.parentsUntil("ul.tool-lp-menu").filter("li");this.allItems.removeClass("menu-focus");this.activeItem.addClass("menu-focus");b.addClass("menu-focus");if(!0===this.isChildOpen){var c=a.parent();if(c.is(".tool-lp-menu")&&"true"==a.attr("aria-haspopup")){this.openSubMenu(a.children("ul").first())}}return!0};e.prototype.handleBlur=function(a){a.removeClass("menu-focus");return!0};e.prototype.setOpenDirection=function(){var b=this.menuRoot.offset(),c=a(document.body).hasClass("dir-rtl"),d=this.rootMenus.outerHeight(),e=this.rootMenus.outerWidth(),f=this.rootMenus.find("ul.tool-lp-sub-menu");f.css("margin-right","");f.css("margin-left","");f.css("margin-top","");f.attr("aria-hidden",!1);var g=f.outerWidth(),h=f.outerHeight(),i=null,j=null,k=null,l=b.top-a(window).scrollTop();if(l+h>a(window).height()){i=h+d;f.css("margin-top","-"+i+"px")}if(c){if(0>b.left-g){j=g-e;f.css("margin-right","-"+j+"px")}}else{if(b.left+g>a(window).width()){k=g-e;f.css("margin-left","-"+k+"px")}}if(!0){this.menuRoot.addClass("tool-lp-menu-open-left")}else{this.menuRoot.removeClass("tool-lp-menu-open-left")}};e.prototype.handleKeyDown=function(a,b){if(b.altKey||b.ctrlKey){return!0}switch(b.keyCode){case this.keys.tab:{this.menuRoot.find("ul").attr("aria-hidden","true");this.allItems.removeClass("menu-focus");this.activeItem=null;this.isChildOpen=!1;break}case this.keys.esc:{var c=a.parent();if(c.is(".tool-lp-menu")){a.children("ul").first().attr("aria-hidden","true")}else{this.activeItem=c.parent();this.isChildOpen=!1;this.activeItem.focus();c.attr("aria-hidden","true")}b.stopPropagation();return!1}case this.keys.enter:case this.keys.space:{return this.handleClick(a,b)}case this.keys.left:{this.activeItem=this.moveToPrevious(a);this.activeItem.focus();b.stopPropagation();return!1}case this.keys.right:{this.activeItem=this.moveToNext(a);this.activeItem.focus();b.stopPropagation();return!1}case this.keys.up:{this.activeItem=this.moveUp(a);this.activeItem.focus();b.stopPropagation();return!1}case this.keys.down:{this.activeItem=this.moveDown(a);this.activeItem.focus();b.stopPropagation();return!1}}return!0};e.prototype.moveToNext=function(a){var b=a.parent(),c=b.children("li"),d=c.length,e=c.index(a),f=null,g=null;if(b.is(".tool-lp-menu")){if(e<d-1){f=a.next()}else{f=c.first()}if("true"==a.attr("aria-haspopup")){g=a.children("ul").first();if("false"==g.attr("aria-hidden")){g.attr("aria-hidden","true");this.isChildOpen=!0}}a.removeClass("menu-focus");if("true"===f.attr("aria-haspopup")&&!0===this.isChildOpen){g=f.children("ul").first();this.openSubMenu(g)}}else{if("true"==a.attr("aria-haspopup")){g=a.children("ul").first();f=g.children("li").first();this.openSubMenu(g)}else{var h=null,i=null;h=a.parentsUntil("ul.tool-lp-menu").filter("ul").not(".tool-lp-menu");h.attr("aria-hidden","true");h.find("li").removeClass("menu-focus");h.last().parent().removeClass("menu-focus");i=h.last().parent();e=this.rootMenus.index(i);if(e<this.rootMenus.length-1){f=i.next()}else{f=this.rootMenus.first()}f.addClass("menu-focus");if("true"==f.attr("aria-haspopup")){g=f.children("ul").first();f=g.children("li").first();this.openSubMenu(g);this.isChildOpen=!0}}}return f};e.prototype.moveToPrevious=function(a){var b=a.parent(),c=b.children("li"),d=c.index(a),e=null,f=null;if(b.is(".tool-lp-menu")){if(0<d){e=a.prev()}else{e=c.last()}if("true"==a.attr("aria-haspopup")){f=a.children("ul").first();if("false"==f.attr("aria-hidden")){f.attr("aria-hidden","true");this.isChildOpen=!0}}a.removeClass("menu-focus");if("true"===e.attr("aria-haspopup")&&!0===this.isChildOpen){f=e.children("ul").first();this.openSubMenu(f)}}else{var g=b.parent(),h=g.parent();if(!h.is(".tool-lp-menu")){e=b.parent();b.attr("aria-hidden","true");a.removeClass("menu-focus")}else{b.attr("aria-hidden","true");a.removeClass("menu-focus");g.removeClass("menu-focus");d=this.rootMenus.index(g);if(0<d){e=g.prev()}else{e=this.rootMenus.last()}e.addClass("menu-focus");if("true"==e.attr("aria-haspopup")){f=e.children("ul").first();this.openSubMenu(f);this.isChildOpen=!0;e=f.children("li").first()}}}return e};e.prototype.moveDown=function(a,b){var c=a.parent(),d=c.children("li").not(".separator"),e=d.length,f=d.index(a),g=null,h=null;if(c.is(".tool-lp-menu")){if("true"!=a.attr("aria-haspopup")){return a}h=a.children("ul").first();g=h.children("li").first();this.openSubMenu(h);return g}if(b){var i=!1,j=f+1;if(j==e){j=0}while(j!=f){var k=d.eq(j).html().charAt(0);if(k.toLowerCase()==b){i=!0;break}j=j+1;if(j==e){j=0}}if(!0==i){g=d.eq(j);a.removeClass("menu-focus");return g}else{return a}}else{if(f<e-1){g=d.eq(f+1)}else{g=d.first()}}a.removeClass("menu-focus");return g};e.prototype.moveUp=function(a){var b=a.parent(),c=b.children("li").not(".separator"),d=c.index(a),e=null;if(b.is(".tool-lp-menu")){return a}if(0<d){e=c.eq(d-1)}else{e=c.last()}a.removeClass("menu-focus");return e};e.prototype.addAriaAttributes=function(){this.menuRoot.attr("role","menubar");this.rootMenus.attr("role","menuitem");this.rootMenus.attr("tabindex","0");this.rootMenus.attr("aria-haspopup","true");this.subMenus.attr("role","menu");this.subMenus.attr("aria-hidden","true");this.subMenuItems.attr("role","menuitem");this.subMenuItems.attr("tabindex","-1");this.menuRoot.addClass("tool-lp-menu");this.allItems.addClass("tool-lp-menu-item");this.rootMenus.addClass("tool-lp-root-menu");this.subMenus.addClass("tool-lp-sub-menu");this.subMenuItems.addClass("dropdown-item")};return{enhance:function enhance(b,c){a(b).each(function(b,d){var f=a(d);if(!0!==f.data("menubarEnhanced")){new e(f,c);f.data("menubarEnhanced",!0)}})},closeAll:d}});
define ("tool_lp/grade_dialogue",["jquery","core/notification","core/templates","tool_lp/dialogue","tool_lp/event_base","core/str"],function(a,b,c,d,e,f){var g=function(a){e.prototype.constructor.apply(this,[]);this._ratingOptions=a};g.prototype=Object.create(e.prototype);g.prototype._popup=null;g.prototype._ratingOptions=null;g.prototype._afterRender=function(){var b=this._find("[data-action=\"rate\"]"),c=this._find("[name=\"rating\"]"),d=this._find("[name=\"comment\"]");this._find("[data-action=\"cancel\"]").click(function(a){a.preventDefault();this._trigger("cancelled");this.close()}.bind(this));c.change(function(){var c=a(this);if(!c.val()){b.prop("disabled",!0)}else{b.prop("disabled",!1)}}).change();b.click(function(a){a.preventDefault();var b=c.val();if(!b){return}this._trigger("rated",{rating:b,note:d.val()});this.close()}.bind(this))};g.prototype.close=function(){this._popup.close();this._popup=null};g.prototype.display=function(){return a.when(f.get_string("rate","tool_lp"),this._render()).then(function(a,b){this._popup=new d(a,b[0],this._afterRender.bind(this));return this._popup}.bind(this)).catch(b.exception)};g.prototype._find=function(b){return a(this._popup.getContent()).find(b)};g.prototype._render=function(){var a={cangrade:this._canGrade,ratings:this._ratingOptions};return c.render("tool_lp/competency_grader",a)};return g});
define ("tool_lp/parentcompetency_form",["jquery","core/ajax","core/str","tool_lp/competencypicker","core/templates","core/notification"],function(a,b,c,d,e,f){var g=function(a,b,c,d,e){this.buttonSelector=a;this.inputHiddenSelector=b;this.staticElementSelector=c;this.frameworkId=d;this.pageContextId=e;this.registerEvents()};g.prototype.buttonSelector=null;g.prototype.inputHiddenSelector=null;g.prototype.staticElementSelector=null;g.prototype.frameworkId=null;g.prototype.pageContextId=null;g.prototype.setParent=function(d){var e=this;if(0!==d.competencyId){b.call([{methodname:"core_competency_read_competency",args:{id:d.competencyId}}])[0].done(function(b){a(e.staticElementSelector).html(b.shortname);a(e.inputHiddenSelector).val(b.id)}).fail(f.exception)}else{c.get_string("competencyframeworkroot","tool_lp").then(function(b){a(e.staticElementSelector).html(b);a(e.inputHiddenSelector).val(d.competencyId)}).fail(f.exception)}};g.prototype.registerEvents=function(){var b=this;a(b.buttonSelector).on("click",function(a){a.preventDefault();var c=new d(b.pageContextId,b.frameworkId,"self",!1);c._render=function(){var a=this;return a._preRender().then(function(){var b={competencies:a._competencies,framework:a._getFramework(a._frameworkId),frameworks:a._frameworks,search:a._searchText,singleFramework:a._singleFramework};return e.render("tool_lp/competency_picker_competencyform",b)})};c.on("save",function(a,c){b.setParent(c)});c.display()})};return{init:function init(a,b,c,d,e){new g(a,b,c,d,e)}}});
define ("tool_lp/dialogue",["core/yui"],function(a){var b=function(b,c,d,e,f){this.yuiDialogue=null;var g=this;if("undefined"==typeof f){f=!1}a.use("moodle-core-notification","timers",function(){var h="480px";if(f){h="800px"}g.yuiDialogue=new M.core.dialogue({headerContent:b,bodyContent:c,draggable:!0,visible:!1,center:!0,modal:!0,width:h});g.yuiDialogue.after("visibleChange",function(b){if(b.newVal){if("undefined"!=typeof d){a.soon(function(){d(g);g.yuiDialogue.centerDialogue()})}}else{if("undefined"!=typeof e){a.soon(function(){e(g)})}}});g.yuiDialogue.show()})};b.prototype.close=function(){this.yuiDialogue.hide();this.yuiDialogue.destroy()};b.prototype.getContent=function(){return this.yuiDialogue.bodyNode.getDOMNode()};return b});
define ("tool_lp/actionselector",["jquery","core/notification","core/ajax","core/templates","tool_lp/dialogue","tool_lp/event_base"],function(a,b,c,d,e,f){var g=function(a,b,c,d,e){var g=this;f.prototype.constructor.apply(this,[]);g._title=a;g._message=b;g._actions=c;g._confirm=d;g._cancel=e;g._selectedValue=null;g._reset()};g.prototype=Object.create(f.prototype);g.prototype._selectedValue=null;g.prototype._popup=null;g.prototype._title=null;g.prototype._message=null;g.prototype._actions=null;g.prototype._confirm=null;g.prototype._cancel=null;g.prototype._afterRender=function(){var b=this;b._find("[data-action=\"action-selector-confirm\"]").attr("disabled","disabled");b._find("[data-region=\"action-selector-radio-buttons\"]").change(function(){b._selectedValue=a("input[type='radio']:checked").val();b._find("[data-action=\"action-selector-confirm\"]").removeAttr("disabled");b._refresh.bind(b)});b._find("[data-action=\"action-selector-cancel\"]").click(function(a){a.preventDefault();b.close()});b._find("[data-action=\"action-selector-confirm\"]").click(function(a){a.preventDefault();if(!b._selectedValue.length){return}b._trigger("save",{action:b._selectedValue});b.close()})};g.prototype.close=function(){var a=this;a._popup.close();a._reset()};g.prototype.display=function(){var a=this;return a._render().then(function(b){a._popup=new e(a._title,b,a._afterRender.bind(a))}).fail(b.exception)};g.prototype._find=function(b){return a(this._popup.getContent()).find(b)};g.prototype._refresh=function(){var a=this;return a._render().then(function(b){a._find("[data-region=\"action-selector\"]").replaceWith(b);a._afterRender()})};g.prototype._render=function(){var a=this,b=[];for(var c in a._actions){b.push(a._actions[c])}var e={message:a._message,choices:b,confirm:a._confirm,cancel:a._cancel};return d.render("tool_lp/action_selector",e)};g.prototype._reset=function(){this._popup=null;this._selectedValue=""};return g});
define ("tool_lp/competency_plan_navigation",["jquery"],function(a){var b=function(b,c,d,e,f){this._baseUrl=c;this._userId=d+"";this._competencyId=e+"";this._planId=f;this._ignoreFirstCompetency=!0;a(b).on("change",this._competencyChanged.bind(this))};b.prototype._competencyChanged=function(b){if(this._ignoreFirstCompetency){this._ignoreFirstCompetency=!1;return}var c=a(b.target).val(),d="?userid="+this._userId+"&planid="+this._planId+"&competencyid="+c;document.location=this._baseUrl+d};b.prototype._competencyId=null;b.prototype._userId=null;b.prototype._planId=null;b.prototype._baseUrl=null;b.prototype._ignoreFirstCompetency=null;return b});
define ("tool_lp/evidence_delete",["jquery","core/notification","core/ajax","core/str","core/log"],function(a,b,c,d,e){var f={};return{register:function register(g,h){if("undefined"!=typeof f[g]){return}f[g]=a("body").delegate(g,"click",function(f){var g=a(f.currentTarget).parents(h);if(!g.length||1<g.length){e.error("None or too many evidence container were found.");return}var i=g.data("id");if(!i){e.error("Evidence ID was not found.");return}f.preventDefault();f.stopPropagation();d.get_strings([{key:"confirm",component:"moodle"},{key:"areyousure",component:"moodle"},{key:"delete",component:"moodle"},{key:"cancel",component:"moodle"}]).done(function(a){b.confirm(a[0],a[1],a[2],a[3],function(){var a=c.call([{methodname:"core_competency_delete_evidence",args:{id:i}}]);a[0].then(function(){g.remove()}).fail(b.exception)})}).fail(b.exception)})}}});
define ("tool_lp/frameworks_datasource",["jquery","core/ajax","core/notification"],function(a,b,c){return{list:function list(c,d){var e={context:{contextid:c}};a.extend(e,"undefined"==typeof d?{}:d);return b.call([{methodname:"core_competency_list_competency_frameworks",args:e}])[0]},processResults:function processResults(b,c){var d=[];a.each(c,function(a,b){d.push({value:b.id,label:b.shortname+" "+b.idnumber})});return d},transport:function transport(b,d,e){var f=a(b),g=f.data("contextid"),h=f.data("onlyvisible");if(!g){throw new Error("The attribute data-contextid is required on "+b)}this.list(g,{query:d,onlyvisible:h}).then(e).catch(c.exception)}}});
define('tool_mrooms/newsiteuserschar', ["jquery","core/modal_factory","core/templates","core/str","core/notification","core/ajax","core/chartjs-lazy"],function(a,b,c,d,e,f,g){var h=function(a,b){d.get_strings([{key:b+"js",component:"tool_mrooms"},{key:"yaxisnamejs",component:"tool_mrooms"},{key:"licensedusersjs",component:"tool_mrooms"},{key:"averageusersjs",component:"tool_mrooms"},{key:"monthstring",component:"tool_mrooms"}]).done(function(b){var c=document.getElementById("tool_mrooms-siteusers-graph").getContext("2d");new Chart(c,{type:"line",data:{labels:a.dates,datasets:[{label:b[2],data:a.licensedusers,backgroundColor:["rgba(0, 0, 0, 0)"],borderColor:["rgba(15, 140, 15, 1)"],pointRadius:0,pointHoverRadius:0},{label:b[0],data:a.statususers,backgroundColor:["rgba(0, 0, 0, 0)"],borderColor:["rgba(64, 122, 216, 1)"],pointRadius:0,pointHoverRadius:0},{type:"scatter",label:b[3],data:a.averageusers,backgroundColor:["rgba(0, 0, 0, 0)"],borderColor:["rgba(255, 152, 0, 1)"],pointBackgroundColor:["rgba(255, 152, 0, 1)"],pointRadius:5,xAxisID:"x-avg-axis"}]},options:{elements:{point:{backgroundColor:["rgba(255, 152, 0, 1)"]}},tooltips:{filter:function(a){return 2===a.datasetIndex}},scales:{xAxes:[{type:"time",distribution:"linear",scaleLabel:{display:!1,labelString:b[4]},time:{unit:"month",displayFormats:{month:"MMM-YYYY"}}},{type:"time",id:"x-avg-axis",position:"bottom",display:!1,time:{unit:"month",displayFormats:{month:"MMM"}}}],yAxes:[{ticks:{beginAtZero:!0},scaleLabel:{display:!0,labelString:b[1]}}]}}})}).fail(e.exception)};return{init:function(a){f.call([{methodname:"tool_mrooms_get_data",args:{startdate:a.startdate,endate:a.endate,userstatus:a.userstatus}}])[0].done(function(b){h(b,a.userstatus)}).fail(function(b){var c={dates:null,licensedusers:null,activeusers:null,averageusers:null};d.get_string("chartnodata","tool_mrooms").done(function(a){e.alert(a,"")}).fail(e.exception),h(c,a.userstatus)})}}});
define ("tool_policy/acceptmodal",["jquery","core/str","core/modal_factory","core/modal_events","core/notification","core/fragment","core/ajax","core/yui"],function(a,b,c,d,f,g,h,i){"use strict";var e=function(a){this.contextid=a;this.init()};e.prototype.modal=null;e.prototype.contextid=-1;e.prototype.currentTrigger=null;e.prototype.triggers={SINGLE:"a[data-action=acceptmodal]",BULK:"input[data-action=acceptmodal]"};e.prototype.init=function(){a(this.triggers.SINGLE).on("click",function(b){b.preventDefault();this.currentTrigger=a(b.currentTarget);var c=a(b.currentTarget).attr("href"),d=c.slice(c.indexOf("?")+1);this.showFormModal(d)}.bind(this));a(this.triggers.BULK).on("click",function(c){c.preventDefault();this.currentTrigger=a(c.currentTarget);var d=a(c.currentTarget).closest("form");if(d.find("input[type=checkbox][name=\"userids[]\"]:checked").length){var e=d.serialize();this.showFormModal(e)}else{b.get_strings([{key:"notice"},{key:"selectusersforconsent",component:"tool_policy"},{key:"ok"}]).then(function(a){f.alert(a[0],a[1],a[2])}).fail(f.exception)}}.bind(this))};e.prototype.showFormModal=function(a){for(var d,e=a.split("&"),g=0,h;g<e.length;g++){h=e[g].split("=");if("action"==h[0]){d=h[1]}}b.get_strings([{key:"statusformtitleaccept",component:"tool_policy"},{key:"iagreetothepolicy",component:"tool_policy"},{key:"statusformtitlerevoke",component:"tool_policy"},{key:"irevokethepolicy",component:"tool_policy"},{key:"statusformtitledecline",component:"tool_policy"},{key:"declinethepolicy",component:"tool_policy"}]).then(function(b){var e,f;if("accept"==d){e=b[0];f=b[1]}else if("revoke"==d){e=b[2];f=b[3]}else if("decline"==d){e=b[4];f=b[5]}return c.create({type:c.types.SAVE_CANCEL,title:e,body:""}).done(function(b){this.modal=b;this.setupFormModal(a,f)}.bind(this))}.bind(this)).catch(f.exception)};e.prototype.setupFormModal=function(a,b){var c=this.modal;c.setLarge();c.setSaveButtonText(b);c.getRoot().on(d.hidden,this.destroy.bind(this));c.setBody(this.getBody(a));c.getRoot().on(d.save,this.submitForm.bind(this));c.getRoot().on("submit","form",this.submitFormAjax.bind(this));c.show()};e.prototype.getBody=function(a){if("undefined"==typeof a){a={}}var b={jsonformdata:JSON.stringify(a)};return g.loadFragment("tool_policy","accept_on_behalf",this.contextid,b)};e.prototype.submitFormAjax=function(a){a.preventDefault();var b=this.modal.getRoot().find("form").serialize(),c=h.call([{methodname:"tool_policy_submit_accept_on_behalf",args:{jsonformdata:JSON.stringify(b)}}]);c[0].done(function(a){if(a.validationerrors){this.modal.setBody(this.getBody(b))}else{this.close()}}.bind(this)).fail(f.exception)};e.prototype.submitForm=function(a){a.preventDefault();this.modal.getRoot().find("form").submit()};e.prototype.close=function(){this.destroy();document.location.reload()};e.prototype.destroy=function(){i.use("moodle-core-formchangechecker",function(){M.core_formchangechecker.reset_form_dirty_state()});this.modal.destroy();this.currentTrigger.focus()};return{getInstance:function getInstance(a){return new e(a)}}});
define ("tool_policy/acceptances_filter",["jquery","core/form-autocomplete","core/str","core/notification"],function(a,b,c,d){var e={UNIFIED_FILTERS:"#unified-filters"},f=function init(){M.util.js_pending("acceptances_filter_datasource");c.get_strings([{key:"filterplaceholder",component:"tool_policy"},{key:"nofiltersapplied",component:"tool_policy"}]).done(function(a){var c=a[0],f=a[1];b.enhance(e.UNIFIED_FILTERS,!0,"tool_policy/acceptances_filter_datasource",c,!1,!0,f,!0).then(function(){M.util.js_complete("acceptances_filter_datasource")}).fail(d.exception)}).fail(d.exception);var f=a(e.UNIFIED_FILTERS).val();a(e.UNIFIED_FILTERS).on("change",function(){var b=a(this).val(),c=[],d=[],e=!1;a.each(b,function(a,b){var f=b.split(":",2);if(2!==f.length){d.push(b);return!0}var g=f[0],h=f[1];if("undefined"!=typeof c[g]){e=!0}c[g]=h;return!0});if(e){var g=[];for(var h in c){g.push(h+":"+c[h])}g=g.concat(d);a(this).val(g)}if(f.join(",")!=b.join(",")){this.form.submit()}})},g=function getForm(){return a(e.UNIFIED_FILTERS).closest("form")};return{init:function init(){f()},getForm:function getForm(){return g()}}});
define ("tool_policy/policyactions",["jquery","core/ajax","core/notification","core/modal_factory","core/modal_events"],function(a,b,c,d,e){var f=function(a){this.registerEvents(a)};f.prototype.registerEvents=function(f){f.on("click",function(f){f.preventDefault();var g=a(this).data("versionid"),h=a(this).data("behalfid"),i=a.Deferred(),j=a.Deferred(),k=d.create({title:i,body:j,large:!0}).then(function(a){a.getRoot().on(e.hidden,function(){a.destroy()});return a}).then(function(a){a.show();return a}).catch(c.exception),l=b.call([{methodname:"tool_policy_get_policy_version",args:{versionid:g,behalfid:h}}]);a.when(l[0]).then(function(a){if(a.result.policy){i.resolve(a.result.policy.name);j.resolve(a.result.policy.content);return a}else{throw new Error(a.warnings[0].message)}}).catch(function(a){k.then(function(a){a.hide();a.destroy();return a}).catch(c.exception);return c.addNotification({message:a,type:"error"})})})};return{init:function init(b){b=a(b);return new f(b)}}});
define ("tool_policy/acceptances_filter_datasource",["jquery","core/ajax","core/notification"],function(a,b,c){return{list:function list(b,c){var d=[],e=a(b),f=a(b).data("originaloptionsjson"),g=e.val();a.each(f,function(b,e){if(""!==a.trim(c)&&-1===e.label.toLocaleLowerCase().indexOf(c.toLocaleLowerCase())){return!0}if(-1<a.inArray(e.value,g)){return!0}d.push(e);return!0});var h=new a.Deferred;h.resolve(d);return h.promise()},processResults:function processResults(b,c){var d=[];a.each(c,function(a,b){d.push({value:b.value,label:b.label})});return d},transport:function transport(a,b,d){this.list(a,b).then(d).catch(c.exception)}}});
define ("tool_policy/jquery-eu-cookie-law-popup",["jquery"],function(a){if(!window.console)window.console={};if(!window.console.log)window.console.log=function(){};a.fn.euCookieLawPopup=function(){var b=this;b.params={cookiePolicyUrl:"/?cookie-policy",popupPosition:"top",colorStyle:"default",compactStyle:!1,popupTitle:"This website is using cookies",popupText:"We use cookies to ensure that we give you the best experience on our website. If you continue without changing your settings, we'll assume that you are happy to receive all cookies on this website.",buttonContinueTitle:"Continue",buttonLearnmoreTitle:"Learn&nbsp;more",buttonLearnmoreOpenInNewWindow:!0,agreementExpiresInDays:30,autoAcceptCookiePolicy:!1,htmlMarkup:null};b.vars={INITIALISED:!1,HTML_MARKUP:null,COOKIE_NAME:"EU_COOKIE_LAW_CONSENT"};var c=function(c,d,e){if(c){var f=a(c).attr("class")?a(c).attr("class"):"";if(-1<f.indexOf("eupopup-top")){b.params.popupPosition="top"}else if(-1<f.indexOf("eupopup-fixedtop")){b.params.popupPosition="fixedtop"}else if(-1<f.indexOf("eupopup-bottomright")){b.params.popupPosition="bottomright"}else if(-1<f.indexOf("eupopup-bottomleft")){b.params.popupPosition="bottomleft"}else if(-1<f.indexOf("eupopup-bottom")){b.params.popupPosition="bottom"}else if(-1<f.indexOf("eupopup-block")){b.params.popupPosition="block"}if(-1<f.indexOf("eupopup-color-default")){b.params.colorStyle="default"}else if(-1<f.indexOf("eupopup-color-inverse")){b.params.colorStyle="inverse"}if(-1<f.indexOf("eupopup-style-compact")){b.params.compactStyle=!0}}if(d){b.params.htmlMarkup=d}if(e){if("undefined"!=typeof e.cookiePolicyUrl){b.params.cookiePolicyUrl=e.cookiePolicyUrl}if("undefined"!=typeof e.popupPosition){b.params.popupPosition=e.popupPosition}if("undefined"!=typeof e.colorStyle){b.params.colorStyle=e.colorStyle}if("undefined"!=typeof e.popupTitle){b.params.popupTitle=e.popupTitle}if("undefined"!=typeof e.popupText){b.params.popupText=e.popupText}if("undefined"!=typeof e.buttonContinueTitle){b.params.buttonContinueTitle=e.buttonContinueTitle}if("undefined"!=typeof e.buttonLearnmoreTitle){b.params.buttonLearnmoreTitle=e.buttonLearnmoreTitle}if("undefined"!=typeof e.buttonLearnmoreOpenInNewWindow){b.params.buttonLearnmoreOpenInNewWindow=e.buttonLearnmoreOpenInNewWindow}if("undefined"!=typeof e.agreementExpiresInDays){b.params.agreementExpiresInDays=e.agreementExpiresInDays}if("undefined"!=typeof e.autoAcceptCookiePolicy){b.params.autoAcceptCookiePolicy=e.autoAcceptCookiePolicy}if("undefined"!=typeof e.htmlMarkup){b.params.htmlMarkup=e.htmlMarkup}}},d=function(){if(b.params.htmlMarkup){return b.params.htmlMarkup}var a="<div class=\"eupopup-container eupopup-container-"+b.params.popupPosition+(b.params.compactStyle?" eupopup-style-compact":"")+" eupopup-color-"+b.params.colorStyle+"\"><div class=\"eupopup-head\">"+b.params.popupTitle+"</div><div class=\"eupopup-body\">"+b.params.popupText+"</div><div class=\"eupopup-buttons\"><a href=\"#\" class=\"eupopup-button eupopup-button_1\">"+b.params.buttonContinueTitle+"</a><a href=\""+b.params.cookiePolicyUrl+"\""+(b.params.buttonLearnmoreOpenInNewWindow?" target=_blank ":"")+" class=\"eupopup-button eupopup-button_2\">"+b.params.buttonLearnmoreTitle+"</a><div class=\"clearfix\"></div></div><a href=\"#\" class=\"eupopup-closebutton\">x</a></div>";return a},e=function(c){var e=new Date,d=1e3*(60*(60*(24*b.params.agreementExpiresInDays)));e.setTime(e.getTime()+d);var f="expires="+e.toGMTString();document.cookie=b.vars.COOKIE_NAME+"="+c+"; "+f+";path=/";a(document).trigger("user_cookie_consent_changed",{consent:c})},f=function(){for(var a=!1,d=document.cookie.split(";"),e=0,f;e<d.length;e++){f=d[e].trim();if(0==f.indexOf(b.vars.COOKIE_NAME)){a=f.substring(b.vars.COOKIE_NAME.length+1,f.length)}}return a},g=function(){a(".eupopup-container").animate({opacity:0,height:0},200,function(){a(".eupopup-container").hide(0)})};return{init:function init(h){c(a(".eupopup").first(),a(".eupopup-markup").html(),h);if(f()){a(document).trigger("user_cookie_already_accepted",{consent:!0});return}if(b.vars.INITIALISED){return}b.vars.INITIALISED=!0;b.vars.HTML_MARKUP=d();if(0<a(".eupopup-block").length){a(".eupopup-block").append(b.vars.HTML_MARKUP)}else{a("BODY").append(b.vars.HTML_MARKUP)}a(".eupopup-button_1").click(function(){e(!0);g();return!1});a(".eupopup-closebutton").click(function(){e(!0);g();return!1});a(".eupopup-container").show();if(b.params.autoAcceptCookiePolicy){e(!0)}}}}});
define ("tool_policy/managedocsactions",["jquery","core/log","core/config","core/str","core/modal_factory","core/modal_events"],function(a,b,c,d,e,f){"use strict";var h={LINKS:"[data-action]",MAKE_CURRENT:"[data-action=\"makecurrent\"]",INACTIVATE:"[data-action=\"inactivate\"]",DELETE:"[data-action=\"delete\"]"};function g(a){this.base=a;this.initEvents()}g.prototype.initEvents=function(){var g=this;g.base.on("click",h.LINKS,function(g){g.stopPropagation();var i=a(g.currentTarget),j,k;if(i.is(h.MAKE_CURRENT)){j=d.get_strings([{key:"activating",component:"tool_policy"},{key:"activateconfirm",component:"tool_policy",param:{name:i.closest("[data-policy-name]").attr("data-policy-name"),revision:i.closest("[data-policy-revision]").attr("data-policy-revision")}},{key:"activateconfirmyes",component:"tool_policy"}])}else if(i.is(h.INACTIVATE)){j=d.get_strings([{key:"inactivating",component:"tool_policy"},{key:"inactivatingconfirm",component:"tool_policy",param:{name:i.closest("[data-policy-name]").attr("data-policy-name"),revision:i.closest("[data-policy-revision]").attr("data-policy-revision")}},{key:"inactivatingconfirmyes",component:"tool_policy"}])}else if(i.is(h.DELETE)){j=d.get_strings([{key:"deleting",component:"tool_policy"},{key:"deleteconfirm",component:"tool_policy",param:{name:i.closest("[data-policy-name]").attr("data-policy-name"),revision:i.closest("[data-policy-revision]").attr("data-policy-revision")}},{key:"delete",component:"core"}])}else{b.error("unknown action type detected","tool_policy/managedocsactions");return}g.preventDefault();j.then(function(a){k=a;return e.create({title:k[0],body:k[1],type:e.types.SAVE_CANCEL})}).then(function(a){a.setSaveButtonText(k[2]);a.getRoot().on(f.save,function(){window.location.href=i.attr("href")+"&sesskey="+c.sesskey+"&confirm=1"});a.getRoot().on(f.hidden,function(){a.destroy()});a.show();return!0}).catch(function(a){b.error(a);return!1})})};return{init:function init(b){var c=a(document.getElementById(b));if(c.length){return new g(c)}else{throw new Error("managedocsactions: Invalid base element identifier")}}}});
define ("tool_templatelibrary/display",["jquery","core/ajax","core/log","core/notification","core/templates","core/config","core/str"],function(a,b,c,d,e,f,g){var h=function(a,b){if(!a){return!1}var c="@template "+b,d=0,e=[];e=a.match(/{{!([\s\S]*?)}}/g);if(null!==e){for(d=0;d<e.length;d++){var f=e[d],g=f.indexOf(c);if(-1!==g){var h=g+c.length+1;f=f.substr(h,f.length-2-h);return f}}}return!1},i=function(b,f,i){g.get_string("templateselected","tool_templatelibrary",b).done(function(b){a("[data-region=\"displaytemplateheader\"]").text(b)}).fail(d.exception);var j=h(f,b);if(!1===j){j=h(i,b)}if(j){f=j}a("[data-region=\"displaytemplatesource\"]").text(f);var k=f.match(/Example context \(json\):([\s\S]*)/),l=!1;if(k){var m=k[1].trim();try{l=a.parseJSON(m)}catch(a){c.debug("Could not parse json example context for template.");c.debug(a)}}if(l){e.render(b,l).done(function(b,c){e.replaceNodeContents(a("[data-region=\"displaytemplateexample\"]"),b,c)}).fail(d.exception)}else{g.get_string("templatehasnoexample","tool_templatelibrary").done(function(b){a("[data-region=\"displaytemplateexample\"]").text(b)}).fail(d.exception)}},j=function(c){var e=c.split("/"),g=e.shift(),h=e.join("/"),j=b.call([{methodname:"core_output_load_template",args:{component:g,template:h,themename:f.theme,includecomments:!0}},{methodname:"tool_templatelibrary_load_canonical_template",args:{component:g,template:h}}],!0,!1);a.when.apply(a,j).done(function(a,b){i(c,a,b)}).fail(d.exception)};a("[data-region=\"list-templates\"]").on("click","[data-templatename]",function(b){var c=a(this).data("templatename");b.preventDefault();j(c)});return{}});
define ("tool_templatelibrary/search",["jquery","core/ajax","core/log","core/notification","core/templates","core/config"],function(a,b,c,d,e,f){var g=function(b){e.render("tool_templatelibrary/search_results",{templates:b}).done(function(b,c){e.replaceNode(a("[data-region=\"searchresults\"]"),b,c)}).fail(d.exception)},h=function(c){var e=a("[data-field=\"component\"]").val(),f=a("[data-field=\"search\"]").val();document.location.hash=f;b.call([{methodname:"tool_templatelibrary_list_templates",args:{component:e,search:f,themename:c},done:g,fail:d.exception}],!0,!1)},i=null,j=function(a,b){if(null!==i){window.clearTimeout(i)}i=window.setTimeout(function(){a();i=null},b)},k=function(){j(h.bind(this,f.theme),400)};a("[data-region=\"list-templates\"]").on("change","[data-field=\"component\"]",k);a("[data-region=\"list-templates\"]").on("input","[data-field=\"search\"]",k);a("[data-field=\"search\"]").val(document.location.hash.replace("#",""));h(f.theme);return{}});
define('tool_themetester/application', ["jquery","theme_boost/popover"],function(a,b){"use strict";return{init:function(){a(document).ready(function(){a(".tooltip-demo").tooltip({selector:'[data-toggle="tooltip"]',container:"body"}),a('[data-toggle="popover"]').popover(),a(".tooltip-test").tooltip(),a(".popover-test").popover(),a('.bd-example-indeterminate [type="checkbox"]').prop("indeterminate",!0),a('.bd-content [href="#"]').click(function(a){a.preventDefault()}),a("#exampleModal").on("show.bs.modal",function(b){var c=a(b.relatedTarget),d=c.data("whatever"),e=a(this);e.find(".modal-title").text("New message to "+d),e.find(".modal-body input").val(d)}),a(".bd-toggle-animated-progress").on("click",function(){a(this).siblings(".progress").find(".progress-bar-striped").toggleClass("progress-bar-animated")}),a("figure.highlight, div.highlight").each(function(){var b='<div class="bd-clipboard"><button class="btn-clipboard" title="Copy to clipboard">Copy</button></div>';a(this).before(b),a(".btn-clipboard").tooltip().on("mouseleave",function(){a(this).tooltip("hide")})});var b=new Clipboard(".btn-clipboard",{target:function(a){return a.parentNode.nextElementSibling}});b.on("success",function(b){a(b.trigger).attr("title","Copied!").tooltip("_fixTitle").tooltip("show").attr("title","Copy to clipboard").tooltip("_fixTitle"),b.clearSelection()}),b.on("error",function(b){var c=/Mac/i.test(navigator.userAgent)?"⌘":"Ctrl-",d="Press "+c+"C to copy";a(b.trigger).attr("title",d).tooltip("_fixTitle").tooltip("show").attr("title","Copy to clipboard").tooltip("_fixTitle")}),anchors.options={icon:"#"},anchors.add(".bd-content > h2, .bd-content > h3, .bd-content > h4, .bd-content > h5"),a(".bd-content > h2, .bd-content > h3, .bd-content > h4, .bd-content > h5").wrapInner("<div></div>"),window.docsearch&&window.docsearch({apiKey:"48cb48b22351bc71ea5f12f4d1ede198",indexName:"bootstrap-v4",inputSelector:"#search-input",handleSelected:function(a,b,c){var d=c.url;d=c.isLvl1?d.split("#")[0]:d,window.location.href=d},transformData:function(a){return a.map(function(a){return a.url=a.url.replace("https://v4-alpha.getbootstrap.com","/docs/4.0"),a})},debug:!1}),Holder.addTheme("gray",{bg:"#777",fg:"rgba(255,255,255,.75)",font:"Helvetica",fontweight:"normal"})})}}});
define('tool_themetester/bootswatch', ["jquery","theme_boost/popover"],function(a,b){return{init:function(){a(document).ready(function(){function b(a){a=a.replace(/×/g,"&times;").replace(/«/g,"&laquo;").replace(/»/g,"&raquo;").replace(/←/g,"&larr;").replace(/→/g,"&rarr;");var b=a.split(/\n/);b.shift(),b.splice(-1,1);var c=b[0].length-b[0].trim().length,d=new RegExp(" {"+c+"}");return b=b.map(function(a){return a.match(d)&&(a=a.substring(c)),a}),b=b.join("\n")}a("a[href='#']").click(function(a){a.preventDefault()});var c=a("<div id='source-button' class='btn btn-primary btn-xs'>&lt; &gt;</div>").click(function(){var c=a(this).parent().html();c=b(c),a("#source-modal pre").text(c),a("#source-modal").modal()});a('.bs-component [data-toggle="popover"]').popover(),a('.bs-component [data-toggle="tooltip"]').tooltip(),a(".bs-component").hover(function(){a(this).append(c),c.show()},function(){c.hide()})})}}});
define ("tool_usertours/managesteps",["jquery","core/str","core/notification"],function(a,b,c){var d={removeStep:function removeStep(d){d.preventDefault();var e=a(d.currentTarget).attr("href");b.get_strings([{key:"confirmstepremovaltitle",component:"tool_usertours"},{key:"confirmstepremovalquestion",component:"tool_usertours"},{key:"yes",component:"moodle"},{key:"no",component:"moodle"}]).then(function(a){c.confirm(a[0],a[1],a[2],a[3],function(){window.location=e})}).catch()},setup:function setup(){a("body").delegate("[data-action=\"delete\"]","click",d.removeStep)}};return{setup:d.setup}});
define ("tool_usertours/managetours",["jquery","core/ajax","core/str","core/notification"],function(a,b,c,d){var e={removeTour:function removeTour(b){b.preventDefault();var e=a(b.currentTarget).attr("href");c.get_strings([{key:"confirmtourremovaltitle",component:"tool_usertours"},{key:"confirmtourremovalquestion",component:"tool_usertours"},{key:"yes",component:"moodle"},{key:"no",component:"moodle"}]).then(function(a){d.confirm(a[0],a[1],a[2],a[3],function(){window.location=e})}).catch()},setup:function setup(){a("body").delegate("[data-action=\"delete\"]","click",e.removeTour)}};return{setup:e.setup}});
define ("tool_usertours/tour",["exports","jquery","core/popper"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;b=d(b);c=d(c);function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){e=function(a){return typeof a}}else{e=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return e(a)}function f(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function g(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function h(a,b,c){if(b)g(a.prototype,b);if(c)g(a,c);return a}var i=function(){function a(b){f(this,a);this.init(b)}h(a,[{key:"init",value:function init(a){this.eventHandlers={};this.reset();this.originalConfiguration=a||{};this.configure.apply(this,arguments);try{this.storage=window.sessionStorage;this.storageKey="tourstate_"+this.tourName}catch(a){this.storage=!1;this.storageKey=""}return this}},{key:"reset",value:function reset(){this.hide();this.eventHandlers=[];this.resetStepListeners();this.originalConfiguration={};this.steps=[];this.currentStepNumber=0;return this}},{key:"configure",value:function configure(a){var b=this;if("object"===e(a)){if("undefined"!=typeof a.tourName){this.tourName=a.tourName}if(a.eventHandlers){var c=function(c){a.eventHandlers[c].forEach(function(a){this.addEventHandler(c,a)},b)};for(var d in a.eventHandlers){c(d)}}this.resetStepDefaults(!0);if("object"===e(a.steps)){this.steps=a.steps}if("undefined"!=typeof a.template){this.templateContent=a.template}}this.checkMinimumRequirements();return this}},{key:"checkMinimumRequirements",value:function checkMinimumRequirements(){if(!this.tourName){throw new Error("Tour Name required")}if(!this.steps||!this.steps.length){throw new Error("Steps must be specified")}}},{key:"resetStepDefaults",value:function resetStepDefaults(a){if("undefined"==typeof a){a=!0}this.stepDefaults={};if(!a||"undefined"==typeof this.originalConfiguration.stepDefaults){this.setStepDefaults({})}else{this.setStepDefaults(this.originalConfiguration.stepDefaults)}return this}},{key:"setStepDefaults",value:function setStepDefaults(a){if(!this.stepDefaults){this.stepDefaults={}}b.default.extend(this.stepDefaults,{element:"",placement:"top",delay:0,moveOnClick:!1,moveAfterTime:0,orphan:!1,direction:1},a);return this}},{key:"getCurrentStepNumber",value:function getCurrentStepNumber(){return parseInt(this.currentStepNumber,10)}},{key:"setCurrentStepNumber",value:function setCurrentStepNumber(a){this.currentStepNumber=a;if(this.storage){try{this.storage.setItem(this.storageKey,a)}catch(a){if(a.code===DOMException.QUOTA_EXCEEDED_ERR){this.storage.removeItem(this.storageKey)}}}}},{key:"getNextStepNumber",value:function getNextStepNumber(a){if("undefined"==typeof a){a=this.getCurrentStepNumber()}var b=a+1;while(b<=this.steps.length){if(this.isStepPotentiallyVisible(this.getStepConfig(b))){return b}b++}return null}},{key:"getPreviousStepNumber",value:function getPreviousStepNumber(a){if("undefined"==typeof a){a=this.getCurrentStepNumber()}var b=a-1;while(0<=b){if(this.isStepPotentiallyVisible(this.getStepConfig(b))){return b}b--}return null}},{key:"isLastStep",value:function isLastStep(a){var b=this.getNextStepNumber(a);return null===b}},{key:"isFirstStep",value:function isFirstStep(a){var b=this.getPreviousStepNumber(a);return null===b}},{key:"isStepPotentiallyVisible",value:function isStepPotentiallyVisible(a){if(!a){return!1}if(this.isStepActuallyVisible(a)){return!0}if("undefined"!=typeof a.orphan&&a.orphan){return!0}if("undefined"!=typeof a.delay&&a.delay){return!0}return!1}},{key:"isStepActuallyVisible",value:function isStepActuallyVisible(a){if(!a){return!1}var b=this.getStepTarget(a);if(b&&b.length&&b.is(":visible")){return!!b.length}return!1}},{key:"next",value:function next(){return this.gotoStep(this.getNextStepNumber())}},{key:"previous",value:function previous(){return this.gotoStep(this.getPreviousStepNumber(),-1)}},{key:"gotoStep",value:function gotoStep(a,b){if(0>a){return this.endTour()}var c=this.getStepConfig(a);if(null===c){return this.endTour()}return this._gotoStep(c,b)}},{key:"_gotoStep",value:function _gotoStep(a,b){if(!a){return this.endTour()}if("undefined"!=typeof a.delay&&a.delay&&!a.delayed){a.delayed=!0;window.setTimeout(this._gotoStep.bind(this),a.delay,a,b);return this}else if(!a.orphan&&!this.isStepActuallyVisible(a)){var c=-1==b?"getPreviousStepNumber":"getNextStepNumber";return this.gotoStep(this[c](a.stepNumber),b)}this.hide();this.fireEventHandlers("beforeRender",a);this.renderStep(a);this.fireEventHandlers("afterRender",a);return this}},{key:"getStepConfig",value:function getStepConfig(a){if(null===a||0>a||a>=this.steps.length){return null}var c=this.normalizeStepConfig(this.steps[a]);c=b.default.extend(c,{stepNumber:a});return c}},{key:"normalizeStepConfig",value:function normalizeStepConfig(a){if("undefined"!=typeof a.reflex&&"undefined"==typeof a.moveAfterClick){a.moveAfterClick=a.reflex}if("undefined"!=typeof a.element&&"undefined"==typeof a.target){a.target=a.element}if("undefined"!=typeof a.content&&"undefined"==typeof a.body){a.body=a.content}a=b.default.extend({},this.stepDefaults,a);a=b.default.extend({},{attachTo:a.target,attachPoint:"after"},a);if(a.attachTo){a.attachTo=(0,b.default)(a.attachTo).first()}return a}},{key:"getStepTarget",value:function getStepTarget(a){if(a.target){return(0,b.default)(a.target)}return null}},{key:"fireEventHandlers",value:function fireEventHandlers(a,b){if("undefined"==typeof this.eventHandlers[a]){return this}this.eventHandlers[a].forEach(function(a){a.call(this,b)},this);return this}},{key:"addEventHandler",value:function addEventHandler(a,b){if("undefined"==typeof this.eventHandlers[a]){this.eventHandlers[a]=[]}this.eventHandlers[a].push(b);return this}},{key:"processStepListeners",value:function processStepListeners(a){this.listeners.push({node:this.currentStepNode,args:["click","[data-role=\"next\"]",b.default.proxy(this.next,this)]},{node:this.currentStepNode,args:["click","[data-role=\"previous\"]",b.default.proxy(this.previous,this)]},{node:this.currentStepNode,args:["click","[data-role=\"end\"]",b.default.proxy(this.endTour,this)]},{node:(0,b.default)("[data-flexitour=\"backdrop\"]"),args:["click",b.default.proxy(this.hide,this)]},{node:(0,b.default)("body"),args:["keydown",b.default.proxy(this.handleKeyDown,this)]});if(a.moveOnClick){var c=this.getStepTarget(a);this.listeners.push({node:c,args:["click",b.default.proxy(function(a){if(0===(0,b.default)(a.target).parents("[data-flexitour=\"container\"]").length){window.setTimeout(b.default.proxy(this.next,this),500)}},this)]})}this.listeners.forEach(function(a){a.node.on.apply(a.node,a.args)});return this}},{key:"resetStepListeners",value:function resetStepListeners(){if(this.listeners){this.listeners.forEach(function(a){a.node.off.apply(a.node,a.args)})}this.listeners=[];return this}},{key:"renderStep",value:function renderStep(a){this.currentStepConfig=a;this.setCurrentStepNumber(a.stepNumber);var c=(0,b.default)(this.getTemplateContent());c.find("[data-placeholder=\"title\"]").html(a.title);c.find("[data-placeholder=\"body\"]").html(a.body);if(this.isFirstStep(a.stepNumber)){c.find("[data-role=\"previous\"]").prop("disabled",!0)}else{c.find("[data-role=\"previous\"]").prop("disabled",!1)}if(this.isLastStep(a.stepNumber)){c.find("[data-role=\"next\"]").prop("disabled",!0)}else{c.find("[data-role=\"next\"]").prop("disabled",!1)}c.find("[data-role=\"previous\"]").attr("role","button");c.find("[data-role=\"next\"]").attr("role","button");c.find("[data-role=\"end\"]").attr("role","button");a.template=c;this.addStepToPage(a);this.processStepListeners(a);return this}},{key:"getTemplateContent",value:function getTemplateContent(){return(0,b.default)(this.templateContent).clone()}},{key:"addStepToPage",value:function addStepToPage(a){var d=(0,b.default)("<span data-flexitour=\"container\"></span>").html(a.template).hide(),e=(0,b.default)("body, html").stop(!0,!0);if(this.isStepActuallyVisible(a)){var f=this.getStepTarget(a);f.data("flexitour","target");var g=this.calculateZIndex(f);if(g){a.zIndex=g+1}if(a.zIndex){d.css("zIndex",a.zIndex+1)}this.positionBackdrop(a);(0,b.default)(document.body).append(d);this.currentStepNode=d;this.currentStepNode.css({top:0,left:0});e.animate({scrollTop:this.calculateScrollTop(a)}).promise().then(function(){this.positionStep(a);this.revealStep(a)}.bind(this)).catch(function(){})}else if(a.orphan){a.isOrphan=!0;a.attachTo=(0,b.default)("body").first();a.attachPoint="append";this.positionBackdrop(a);d.addClass("orphan");(0,b.default)(document.body).append(d);this.currentStepNode=d;this.currentStepNode.offset(this.calculateStepPositionInPage());this.currentStepNode.css("position","fixed");this.currentStepPopper=new c.default((0,b.default)("body"),this.currentStepNode[0],{removeOnDestroy:!0,placement:a.placement+"-start",arrowElement:"[data-role=\"arrow\"]",modifiers:{hide:{enabled:!1},applyStyle:{onLoad:null,enabled:!1}}});this.revealStep(a)}return this}},{key:"revealStep",value:function revealStep(a){this.currentStepNode.fadeIn("",b.default.proxy(function(){this.announceStep(a);this.currentStepNode.focus();window.setTimeout(b.default.proxy(function(){if(this.currentStepNode){this.currentStepNode.focus()}},this),100)},this));return this}},{key:"announceStep",value:function announceStep(a){var b="tour-step-"+this.tourName+"-"+a.stepNumber;this.currentStepNode.attr("id",b);var c=this.currentStepNode.find("[data-placeholder=\"body\"]").first();c.attr("id",b+"-body");c.attr("role","document");var d=this.currentStepNode.find("[data-placeholder=\"title\"]").first();d.attr("id",b+"-title");d.attr("aria-labelledby",b+"-body");this.currentStepNode.attr("role","dialog");this.currentStepNode.attr("tabindex",0);this.currentStepNode.attr("aria-labelledby",b+"-title");this.currentStepNode.attr("aria-describedby",b+"-body");var e=this.getStepTarget(a);if(e){if(!e.attr("tabindex")){e.attr("tabindex",0)}e.data("original-describedby",e.attr("aria-describedby")).attr("aria-describedby",b+"-body")}this.accessibilityShow(a);return this}},{key:"handleKeyDown",value:function handleKeyDown(a){var c="a[href], link[href], [draggable=true], [contenteditable=true], ";c+=":input:enabled, [tabindex], button:enabled";switch(a.keyCode){case 27:this.endTour();break;case 9:(function(){if(!this.currentStepConfig.hasBackdrop){return}var d=(0,b.default)(document.activeElement),e=this.getStepTarget(this.currentStepConfig),f=(0,b.default)(c),g=(0,b.default)("span[data-flexitour=\"container\"]"),h;if(e){f=f.filter(function(a,b){return null!==e&&(e.has(b).length||g.has(b).length||e.is(b)||g.is(b))})}f.each(function(a,b){if(d.is(b)){h=a;return!1}return!0});var i,j,k;if(void 0!=h){var l=1;if(a.shiftKey){l=-1}i=h;do{i+=l;j=(0,b.default)(f[i])}while(j.length&&j.is(":disabled")||j.is(":hidden"));if(j.length){k=j.closest(e).length;k=k||j.closest(this.currentStepNode).length}else{k=!1}}if(k){j.focus()}else{if(a.shiftKey){this.currentStepNode.find(c).last().focus()}else{if(this.currentStepConfig.isOrphan){this.currentStepNode.focus()}else{e.focus()}}}a.preventDefault()}).call(this);break;}}},{key:"startTour",value:function startTour(a){if(this.storage&&"undefined"==typeof a){var b=this.storage.getItem(this.storageKey);if(b){var c=parseInt(b,10);if(c<=this.steps.length){a=c}}}if("undefined"==typeof a){a=this.getCurrentStepNumber()}this.fireEventHandlers("beforeStart",a);this.gotoStep(a);this.fireEventHandlers("afterStart",a);return this}},{key:"restartTour",value:function restartTour(){return this.startTour(0)}},{key:"endTour",value:function endTour(){this.fireEventHandlers("beforeEnd");if(this.currentStepConfig){var a=this.getStepTarget(this.currentStepConfig);if(a){if(!a.attr("tabindex")){a.attr("tabindex","-1")}a.focus()}}this.hide(!0);this.fireEventHandlers("afterEnd");return this}},{key:"hide",value:function hide(a){this.fireEventHandlers("beforeHide");if(this.currentStepNode&&this.currentStepNode.length){this.currentStepNode.hide();if(this.currentStepPopper){this.currentStepPopper.destroy()}}if(this.currentStepConfig){var d=this.getStepTarget(this.currentStepConfig);if(d){if(d.data("original-labelledby")){d.attr("aria-labelledby",d.data("original-labelledby"))}if(d.data("original-describedby")){d.attr("aria-describedby",d.data("original-describedby"))}if(d.data("original-tabindex")){d.attr("tabindex",d.data("tabindex"))}}this.currentStepConfig=null}var c=0;if(a){c=400}(0,b.default)("[data-flexitour=\"step-background\"]").remove();(0,b.default)("[data-flexitour=\"step-backdrop\"]").removeAttr("data-flexitour");(0,b.default)("[data-flexitour=\"backdrop\"]").fadeOut(c,function(){(0,b.default)(this).remove()});if(this.currentStepNode&&this.currentStepNode.length){var e=this.currentStepNode.attr("id");if(e){var f="[aria-describedby=\""+e+"-body\"]";(0,b.default)(f).removeAttr("tabindex");(0,b.default)(f).removeAttr("aria-describedby")}}this.resetStepListeners();this.accessibilityHide();this.fireEventHandlers("afterHide");this.currentStepNode=null;this.currentStepPopper=null;return this}},{key:"show",value:function show(){var a=this.getCurrentStepNumber();return this.gotoStep(a)}},{key:"getStepContainer",value:function getStepContainer(){return(0,b.default)(this.currentStepNode)}},{key:"calculateScrollTop",value:function calculateScrollTop(a){var c=(0,b.default)(window).scrollTop(),d=(0,b.default)(window).height(),e=this.getStepTarget(a);if("top"===a.placement){c=e.offset().top-d/2}else if("bottom"===a.placement){c=e.offset().top+e.height()-d/2}else if(e.height()<=.8*d){c=e.offset().top-(d-e.height())/2}else{c=e.offset().top-.2*d}c=Math.max(0,c);c=Math.min((0,b.default)(document).height()-d,c);return Math.ceil(c)}},{key:"calculateStepPositionInPage",value:function calculateStepPositionInPage(){var a=(0,b.default)(window).height(),c=this.currentStepNode.height(),d=(0,b.default)(window).width(),e=this.currentStepNode.width();return{top:Math.ceil((a-c)/2),left:Math.ceil((d-e)/2)}}},{key:"positionStep",value:function positionStep(a){var d=this.currentStepNode;if(!d||!d.length){return this}var e;switch(a.placement){case"left":e=["left","right","top","bottom"];break;case"right":e=["right","left","top","bottom"];break;case"top":e=["top","bottom","right","left"];break;case"bottom":e=["bottom","top","right","left"];break;default:e="flip";break;}var f=this.getStepTarget(a),g={placement:a.placement+"-start",removeOnDestroy:!0,modifiers:{flip:{behaviour:e},arrow:{element:"[data-role=\"arrow\"]"}},onCreate:function onCreate(a){h(a)},onUpdate:function onUpdate(a){h(a)}},h=function(a){var c=a.placement.split("-")[0],d=-1!==["left","right"].indexOf(c),e=a.instance.popper.querySelector("[data-role=\"arrow\"]"),f=(0,b.default)(a.instance.popper.querySelector("[data-role=\"flexitour-step\"]"));if(d){var g=parseFloat(window.getComputedStyle(e).height),h=parseFloat(window.getComputedStyle(e).top),i=parseFloat(window.getComputedStyle(a.instance.popper).height),j=parseFloat(window.getComputedStyle(a.instance.popper).top),k=parseFloat(f.css("borderTopWidth")),l=2*parseFloat(f.css("borderTopLeftRadius")),m=h+g/2,n=i+j-k-l,o=j+k+l;if(m>=n||m<=o){var y=0;if(m>i/2){y=n-g}else{y=o+g}(0,b.default)(e).css("top",y)}}else{var p=parseFloat(window.getComputedStyle(e).width),q=parseFloat(window.getComputedStyle(e).left),r=parseFloat(window.getComputedStyle(a.instance.popper).width),s=parseFloat(window.getComputedStyle(a.instance.popper).left),t=parseFloat(f.css("borderTopWidth")),u=2*parseFloat(f.css("borderTopLeftRadius")),v=q+p/2,w=r+s-t-u,x=s+t+u;if(v>=w||v<=x){var z=0;if(v>r/2){z=w-p}else{z=x+p}(0,b.default)(e).css("left",z)}}},i=(0,b.default)("[data-flexitour=\"step-background\"]");if(i.length){f=i}this.currentStepPopper=new c.default(f,d[0],g);return this}},{key:"positionBackdrop",value:function positionBackdrop(a){if(a.backdrop){this.currentStepConfig.hasBackdrop=!0;var g=(0,b.default)("<div data-flexitour=\"backdrop\"></div>");if(a.zIndex){if("append"===a.attachPoint){a.attachTo.append(g)}else{g.insertAfter(a.attachTo)}}else{(0,b.default)("body").append(g)}if(this.isStepActuallyVisible(a)){var c=(0,b.default)("<div data-flexitour=\"step-background\"></div>"),d=this.getStepTarget(a),e=10,f=d;if(e){f=(0,b.default)("body")}c.css({width:d.outerWidth()+e+e,height:d.outerHeight()+e+e,left:d.offset().left-e,top:d.offset().top-e,backgroundColor:this.calculateInherittedBackgroundColor(f)});if(d.offset().left<e){c.css({width:d.outerWidth()+d.offset().left+e,left:d.offset().left})}if(d.offset().top<e){c.css({height:d.outerHeight()+d.offset().top+e,top:d.offset().top})}var h=d.css("borderRadius");if(h&&h!==(0,b.default)("body").css("borderRadius")){c.css("borderRadius",h)}var i=this.calculatePosition(d);if("fixed"===i){c.css("top",0)}else if("absolute"===i){c.css("position","fixed")}var j=c.clone();j.css({backgroundColor:g.css("backgroundColor"),opacity:g.css("opacity")});j.attr("data-flexitour","step-background-fader");if(a.zIndex){if("append"===a.attachPoint){a.attachTo.append(c)}else{j.insertAfter(a.attachTo);c.insertAfter(a.attachTo)}}else{(0,b.default)("body").append(j);(0,b.default)("body").append(c)}d.attr("data-flexitour","step-backdrop");if(a.zIndex){g.css("zIndex",a.zIndex);c.css("zIndex",a.zIndex+1);d.css("zIndex",a.zIndex+2)}j.fadeOut("2000",function(){(0,b.default)(this).remove()})}}return this}},{key:"calculateZIndex",value:function calculateZIndex(a){a=(0,b.default)(a);while(a.length&&a[0]!==document){var c=a.css("position");if("absolute"===c||"relative"===c||"fixed"===c){var d=parseInt(a.css("zIndex"),10);if(!isNaN(d)&&0!==d){return d}}a=a.parent()}return 0}},{key:"calculateInherittedBackgroundColor",value:function calculateInherittedBackgroundColor(a){var c=(0,b.default)("<div>").hide();(0,b.default)("body").append(c);var d=c.css("backgroundColor");c.remove();a=(0,b.default)(a);while(a.length&&a[0]!==document){var e=a.css("backgroundColor");if(e!==d){return e}a=a.parent()}return null}},{key:"calculatePosition",value:function calculatePosition(a){a=(0,b.default)(a);while(a.length&&a[0]!==document){var c=a.css("position");if("static"!==c){return c}a=a.parent()}return null}},{key:"accessibilityShow",value:function accessibilityShow(){var a="aria-hidden",c=function(b){var c=b.data("flexitour");if(c){switch(c){case"container":case"target":return;}}var d=b.attr(a);if(!d){b.attr("data-has-hidden",!0);b.attr(a,!0)}};this.currentStepNode.siblings().each(function(a,d){c((0,b.default)(d))});this.currentStepNode.parentsUntil("body").siblings().each(function(a,d){c((0,b.default)(d))})}},{key:"accessibilityHide",value:function accessibilityHide(){var a=function(a){var b=a.attr("data-has-hidden");if("undefined"!=typeof b){a.removeAttr("data-has-hidden");a.removeAttr("aria-hidden")}};(0,b.default)("[data-has-hidden]").each(function(c,d){a((0,b.default)(d))})}}]);return a}();a.default=i;return a.default});
define ("tool_usertours/usertours",["core/ajax","tool_usertours/tour","jquery","core/templates","core/str","core/log","core/notification"],function(a,b,c,d,e,f,g){var h={tourId:null,currentTour:null,context:null,init:function init(a,b,d){h.tourId=a;h.context=d;if("undefined"==typeof b){b=!0}if(b){h.fetchTour(a)}h.addResetLink();c("body").on("click","[data-action=\"tool_usertours/resetpagetour\"]",function(a){a.preventDefault();h.resetTourState(h.tourId)})},fetchTour:function fetchTour(b){M.util.js_pending("admin_usertour_fetchTour"+b);c.when(a.call([{methodname:"tool_usertours_fetch_and_start_tour",args:{tourid:b,context:h.context,pageurl:window.location.href}}])[0],d.render("tool_usertours/tourstep",{})).then(function(a,c){return h.startBootstrapTour(b,c[0],a.tourconfig)}).always(function(){M.util.js_complete("admin_usertour_fetchTour"+b)}).fail(g.exception)},addResetLink:function addResetLink(){var a;M.util.js_pending("admin_usertour_addResetLink");if(c(".tool_usertours-resettourcontainer").length){a=c(".tool_usertours-resettourcontainer")}else if(c(".logininfo").length){a=c(".logininfo")}else if(c("footer").length){a=c("footer")}else{a=c("body")}d.render("tool_usertours/resettour",{}).then(function(b,c){d.appendNodeContents(a,b,c)}).always(function(){M.util.js_complete("admin_usertour_addResetLink")}).fail()},startBootstrapTour:function startBootstrapTour(a,c,d){if(h.currentTour){d.onEnd=null;h.currentTour.endTour();delete h.currentTour}d.eventHandlers={afterEnd:[h.markTourComplete],afterRender:[h.markStepShown]};d.tourName=d.name;delete d.name;d.template=c;d.steps=d.steps.map(function(a){if("undefined"!=typeof a.element){a.target=a.element;delete a.element}if("undefined"!=typeof a.reflex){a.moveOnClick=!!a.reflex;delete a.reflex}if("undefined"!=typeof a.content){a.body=a.content;delete a.content}return a});h.currentTour=new b(d);return h.currentTour.startTour()},markStepShown:function markStepShown(){var b=this.getStepConfig(this.getCurrentStepNumber());c.when(a.call([{methodname:"tool_usertours_step_shown",args:{tourid:h.tourId,context:h.context,pageurl:window.location.href,stepid:b.stepid,stepindex:this.getCurrentStepNumber()}}])[0]).fail(f.error)},markTourComplete:function markTourComplete(){var b=this.getStepConfig(this.getCurrentStepNumber());c.when(a.call([{methodname:"tool_usertours_complete_tour",args:{tourid:h.tourId,context:h.context,pageurl:window.location.href,stepid:b.stepid,stepindex:this.getCurrentStepNumber()}}])[0]).fail(f.error)},resetTourState:function resetTourState(b){c.when(a.call([{methodname:"tool_usertours_reset_tour",args:{tourid:b,context:h.context,pageurl:window.location.href}}])[0]).then(function(a){if(a.startTour){h.fetchTour(a.startTour)}}).fail(g.exception)}};return{init:h.init,resetTourState:h.resetTourState}});
"use strict";define ("theme_boost/util",["exports","jquery"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var f=function(a){return a&&a.__esModule?a:{default:a}}(b);function c(a){return{}.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase()}function d(){return{bindType:"transitionend",delegateType:"transitionend",handle:function(a){if((0,f.default)(a.target).is(this)){return a.handleObj.handler.apply(this,arguments)}}}}function e(a){var b=this,c=!1;(0,f.default)(this).one(g.TRANSITION_END,function(){c=!0});setTimeout(function(){if(!c){g.triggerTransitionEnd(b)}},a);return this}var g={TRANSITION_END:"bsTransitionEnd",getUID:function(a){do{a+=~~(Math.random()*1e6)}while(document.getElementById(a));return a},getSelectorFromElement:function(a){var b=a.getAttribute("data-target");if(!b||"#"===b){var c=a.getAttribute("href");b=c&&"#"!==c?c.trim():""}try{return document.querySelector(b)?b:null}catch(a){return null}},getTransitionDurationFromElement:function(a){if(!a){return 0}var b=(0,f.default)(a).css("transition-duration"),c=(0,f.default)(a).css("transition-delay"),d=parseFloat(b),e=parseFloat(c);if(!d&&!e){return 0}b=b.split(",")[0];c=c.split(",")[0];return(parseFloat(b)+parseFloat(c))*1e3},reflow:function(a){return a.offsetHeight},triggerTransitionEnd:function(a){(0,f.default)(a).trigger("transitionend")},supportsTransitionEnd:function(){return!0},isElement:function(a){return(a[0]||a).nodeType},typeCheckConfig:function(a,b,d){for(var e in d){if(Object.prototype.hasOwnProperty.call(d,e)){var f=d[e],h=b[e],i=h&&g.isElement(h)?"element":c(h);if(!new RegExp(f).test(i)){throw new Error("".concat(a.toUpperCase(),": ")+"Option \"".concat(e,"\" provided type \"").concat(i,"\" ")+"but expected type \"".concat(f,"\"."))}}}},findShadowRoot:function(a){if(!document.documentElement.attachShadow){return null}if("function"==typeof a.getRootNode){var b=a.getRootNode();return b instanceof ShadowRoot?b:null}if(a instanceof ShadowRoot){return a}if(!a.parentNode){return null}return g.findShadowRoot(a.parentNode)}};(function(){f.default.fn.emulateTransitionEnd=e;f.default.event.special[g.TRANSITION_END]=d()})();a.default=g;return a.default});
"use strict";define ("theme_boost/button",["exports","jquery"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var f=function(a){return a&&a.__esModule?a:{default:a}}(b);function c(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function d(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function e(a,b,c){if(b)d(a.prototype,b);if(c)d(a,c);return a}var g="bs.button",h=".".concat(g),i=".data-api",j=f.default.fn.button,k={ACTIVE:"active",BUTTON:"btn",FOCUS:"focus"},l={DATA_TOGGLE_CARROT:"[data-toggle^=\"button\"]",DATA_TOGGLE:"[data-toggle=\"buttons\"]",INPUT:"input:not([type=\"hidden\"])",ACTIVE:".active",BUTTON:".btn"},m={CLICK_DATA_API:"click".concat(h).concat(i),FOCUS_BLUR_DATA_API:"focus".concat(h).concat(i," ")+"blur".concat(h).concat(i)},n=function(){function a(b){c(this,a);this._element=b}e(a,[{key:"toggle",value:function(){var a=!0,b=!0,c=(0,f.default)(this._element).closest(l.DATA_TOGGLE)[0];if(c){var d=this._element.querySelector(l.INPUT);if(d){if("radio"===d.type){if(d.checked&&this._element.classList.contains(k.ACTIVE)){a=!1}else{var e=c.querySelector(l.ACTIVE);if(e){(0,f.default)(e).removeClass(k.ACTIVE)}}}if(a){if(d.hasAttribute("disabled")||c.hasAttribute("disabled")||d.classList.contains("disabled")||c.classList.contains("disabled")){return}d.checked=!this._element.classList.contains(k.ACTIVE);(0,f.default)(d).trigger("change")}d.focus();b=!1}}if(b){this._element.setAttribute("aria-pressed",!this._element.classList.contains(k.ACTIVE))}if(a){(0,f.default)(this._element).toggleClass(k.ACTIVE)}}},{key:"dispose",value:function(){f.default.removeData(this._element,g);this._element=null}}],[{key:"_jQueryInterface",value:function(b){return this.each(function(){var c=(0,f.default)(this).data(g);if(!c){c=new a(this);(0,f.default)(this).data(g,c)}if("toggle"===b){c[b]()}})}},{key:"VERSION",get:function(){return"4.3.1"}}]);return a}();(0,f.default)(document).on(m.CLICK_DATA_API,l.DATA_TOGGLE_CARROT,function(a){a.preventDefault();var b=a.target;if(!(0,f.default)(b).hasClass(k.BUTTON)){b=(0,f.default)(b).closest(l.BUTTON)}n._jQueryInterface.call((0,f.default)(b),"toggle")}).on(m.FOCUS_BLUR_DATA_API,l.DATA_TOGGLE_CARROT,function(a){var b=(0,f.default)(a.target).closest(l.BUTTON)[0];(0,f.default)(b).toggleClass(k.FOCUS,/^focus(in)?$/.test(a.type))});f.default.fn.button=n._jQueryInterface;f.default.fn.button.Constructor=n;f.default.fn.button.noConflict=function(){f.default.fn.button=j;return n._jQueryInterface};a.default=n;return a.default});
"use strict";function _typeof2(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof2=function(a){return typeof a}}else{_typeof2=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof2(a)}define ("theme_boost/carousel",["exports","jquery","./util"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var k=d(b),l=d(c);function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if("function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)){e=function(a){return _typeof2(a)}}else{e=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":_typeof2(a)}}return e(a)}function f(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);if("function"==typeof Object.getOwnPropertySymbols){d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))}d.forEach(function(b){g(a,b,c[b])})}return a}function g(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}function h(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function i(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function j(a,b,c){if(b)i(a.prototype,b);if(c)i(a,c);return a}var m="bs.carousel",n=".".concat(m),o=".data-api",p=k.default.fn.carousel,q={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},r={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},s={NEXT:"next",PREV:"prev",LEFT:"left",RIGHT:"right"},t={SLIDE:"slide".concat(n),SLID:"slid".concat(n),KEYDOWN:"keydown".concat(n),MOUSEENTER:"mouseenter".concat(n),MOUSELEAVE:"mouseleave".concat(n),TOUCHSTART:"touchstart".concat(n),TOUCHMOVE:"touchmove".concat(n),TOUCHEND:"touchend".concat(n),POINTERDOWN:"pointerdown".concat(n),POINTERUP:"pointerup".concat(n),DRAG_START:"dragstart".concat(n),LOAD_DATA_API:"load".concat(n).concat(o),CLICK_DATA_API:"click".concat(n).concat(o)},u={CAROUSEL:"carousel",ACTIVE:"active",SLIDE:"slide",RIGHT:"carousel-item-right",LEFT:"carousel-item-left",NEXT:"carousel-item-next",PREV:"carousel-item-prev",ITEM:"carousel-item",POINTER_EVENT:"pointer-event"},v={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",ITEM_IMG:".carousel-item img",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:"[data-ride=\"carousel\"]"},w={TOUCH:"touch",PEN:"pen"},x=function(){function a(b,c){h(this,a);this._items=null;this._interval=null;this._activeElement=null;this._isPaused=!1;this._isSliding=!1;this.touchTimeout=null;this.touchStartX=0;this.touchDeltaX=0;this._config=this._getConfig(c);this._element=b;this._indicatorsElement=this._element.querySelector(v.INDICATORS);this._touchSupported="ontouchstart"in document.documentElement||0<navigator.maxTouchPoints;this._pointerEvent=!!(window.PointerEvent||window.MSPointerEvent);this._addEventListeners()}j(a,[{key:"next",value:function(){if(!this._isSliding){this._slide(s.NEXT)}}},{key:"nextWhenVisible",value:function(){if(!document.hidden&&(0,k.default)(this._element).is(":visible")&&"hidden"!==(0,k.default)(this._element).css("visibility")){this.next()}}},{key:"prev",value:function(){if(!this._isSliding){this._slide(s.PREV)}}},{key:"pause",value:function(a){if(!a){this._isPaused=!0}if(this._element.querySelector(v.NEXT_PREV)){l.default.triggerTransitionEnd(this._element);this.cycle(!0)}clearInterval(this._interval);this._interval=null}},{key:"cycle",value:function(a){if(!a){this._isPaused=!1}if(this._interval){clearInterval(this._interval);this._interval=null}if(this._config.interval&&!this._isPaused){this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval)}}},{key:"to",value:function(a){var b=this;this._activeElement=this._element.querySelector(v.ACTIVE_ITEM);var c=this._getItemIndex(this._activeElement);if(a>this._items.length-1||0>a){return}if(this._isSliding){(0,k.default)(this._element).one(t.SLID,function(){return b.to(a)});return}if(c===a){this.pause();this.cycle();return}var d=a>c?s.NEXT:s.PREV;this._slide(d,this._items[a])}},{key:"dispose",value:function(){(0,k.default)(this._element).off(n);k.default.removeData(this._element,m);this._items=null;this._config=null;this._element=null;this._interval=null;this._isPaused=null;this._isSliding=null;this._activeElement=null;this._indicatorsElement=null}},{key:"_getConfig",value:function(a){a=f({},q,a);l.default.typeCheckConfig("carousel",a,r);return a}},{key:"_handleSwipe",value:function(){var a=Math.abs(this.touchDeltaX);if(a<=40){return}var b=a/this.touchDeltaX;if(0<b){this.prev()}if(0>b){this.next()}}},{key:"_addEventListeners",value:function(){var a=this;if(this._config.keyboard){(0,k.default)(this._element).on(t.KEYDOWN,function(b){return a._keydown(b)})}if("hover"===this._config.pause){(0,k.default)(this._element).on(t.MOUSEENTER,function(b){return a.pause(b)}).on(t.MOUSELEAVE,function(b){return a.cycle(b)})}if(this._config.touch){this._addTouchEventListeners()}}},{key:"_addTouchEventListeners",value:function(){var a=this;if(!this._touchSupported){return}var b=function(b){if(a._pointerEvent&&w[b.originalEvent.pointerType.toUpperCase()]){a.touchStartX=b.originalEvent.clientX}else if(!a._pointerEvent){a.touchStartX=b.originalEvent.touches[0].clientX}},c=function(b){if(b.originalEvent.touches&&1<b.originalEvent.touches.length){a.touchDeltaX=0}else{a.touchDeltaX=b.originalEvent.touches[0].clientX-a.touchStartX}},d=function(b){if(a._pointerEvent&&w[b.originalEvent.pointerType.toUpperCase()]){a.touchDeltaX=b.originalEvent.clientX-a.touchStartX}a._handleSwipe();if("hover"===a._config.pause){a.pause();if(a.touchTimeout){clearTimeout(a.touchTimeout)}a.touchTimeout=setTimeout(function(b){return a.cycle(b)},500+a._config.interval)}};(0,k.default)(this._element.querySelectorAll(v.ITEM_IMG)).on(t.DRAG_START,function(a){return a.preventDefault()});if(this._pointerEvent){(0,k.default)(this._element).on(t.POINTERDOWN,function(a){return b(a)});(0,k.default)(this._element).on(t.POINTERUP,function(a){return d(a)});this._element.classList.add(u.POINTER_EVENT)}else{(0,k.default)(this._element).on(t.TOUCHSTART,function(a){return b(a)});(0,k.default)(this._element).on(t.TOUCHMOVE,function(a){return c(a)});(0,k.default)(this._element).on(t.TOUCHEND,function(a){return d(a)})}}},{key:"_keydown",value:function(a){if(/input|textarea/i.test(a.target.tagName)){return}switch(a.which){case 37:a.preventDefault();this.prev();break;case 39:a.preventDefault();this.next();break;default:}}},{key:"_getItemIndex",value:function(a){this._items=a&&a.parentNode?[].slice.call(a.parentNode.querySelectorAll(v.ITEM)):[];return this._items.indexOf(a)}},{key:"_getItemByDirection",value:function(a,b){var c=a===s.NEXT,d=a===s.PREV,e=this._getItemIndex(b),f=this._items.length-1;if((d&&0===e||c&&e===f)&&!this._config.wrap){return b}var g=a===s.PREV?-1:1,h=(e+g)%this._items.length;return-1===h?this._items[this._items.length-1]:this._items[h]}},{key:"_triggerSlideEvent",value:function(a,b){var c=this._getItemIndex(a),d=this._getItemIndex(this._element.querySelector(v.ACTIVE_ITEM)),e=k.default.Event(t.SLIDE,{relatedTarget:a,direction:b,from:d,to:c});(0,k.default)(this._element).trigger(e);return e}},{key:"_setActiveIndicatorElement",value:function(a){if(this._indicatorsElement){var b=[].slice.call(this._indicatorsElement.querySelectorAll(v.ACTIVE));(0,k.default)(b).removeClass(u.ACTIVE);var c=this._indicatorsElement.children[this._getItemIndex(a)];if(c){(0,k.default)(c).addClass(u.ACTIVE)}}}},{key:"_slide",value:function(a,b){var c=this,d=this._element.querySelector(v.ACTIVE_ITEM),e=this._getItemIndex(d),f=b||d&&this._getItemByDirection(a,d),g=this._getItemIndex(f),h=!!this._interval,i,j,m;if(a===s.NEXT){i=u.LEFT;j=u.NEXT;m=s.LEFT}else{i=u.RIGHT;j=u.PREV;m=s.RIGHT}if(f&&(0,k.default)(f).hasClass(u.ACTIVE)){this._isSliding=!1;return}var n=this._triggerSlideEvent(f,m);if(n.isDefaultPrevented()){return}if(!d||!f){return}this._isSliding=!0;if(h){this.pause()}this._setActiveIndicatorElement(f);var o=k.default.Event(t.SLID,{relatedTarget:f,direction:m,from:e,to:g});if((0,k.default)(this._element).hasClass(u.SLIDE)){(0,k.default)(f).addClass(j);l.default.reflow(f);(0,k.default)(d).addClass(i);(0,k.default)(f).addClass(i);var p=parseInt(f.getAttribute("data-interval"),10);if(p){this._config.defaultInterval=this._config.defaultInterval||this._config.interval;this._config.interval=p}else{this._config.interval=this._config.defaultInterval||this._config.interval}var q=l.default.getTransitionDurationFromElement(d);(0,k.default)(d).one(l.default.TRANSITION_END,function(){(0,k.default)(f).removeClass("".concat(i," ").concat(j)).addClass(u.ACTIVE);(0,k.default)(d).removeClass("".concat(u.ACTIVE," ").concat(j," ").concat(i));c._isSliding=!1;setTimeout(function(){return(0,k.default)(c._element).trigger(o)},0)}).emulateTransitionEnd(q)}else{(0,k.default)(d).removeClass(u.ACTIVE);(0,k.default)(f).addClass(u.ACTIVE);this._isSliding=!1;(0,k.default)(this._element).trigger(o)}if(h){this.cycle()}}}],[{key:"_jQueryInterface",value:function(b){return this.each(function(){var c=(0,k.default)(this).data(m),d=f({},q,(0,k.default)(this).data());if("object"===e(b)){d=f({},d,b)}var g="string"==typeof b?b:d.slide;if(!c){c=new a(this,d);(0,k.default)(this).data(m,c)}if("number"==typeof b){c.to(b)}else if("string"==typeof g){if("undefined"==typeof c[g]){throw new TypeError("No method named \"".concat(g,"\""))}c[g]()}else if(d.interval&&d.ride){c.pause();c.cycle()}})}},{key:"_dataApiClickHandler",value:function(b){var c=l.default.getSelectorFromElement(this);if(!c){return}var d=(0,k.default)(c)[0];if(!d||!(0,k.default)(d).hasClass(u.CAROUSEL)){return}var e=f({},(0,k.default)(d).data(),(0,k.default)(this).data()),g=this.getAttribute("data-slide-to");if(g){e.interval=!1}a._jQueryInterface.call((0,k.default)(d),e);if(g){(0,k.default)(d).data(m).to(g)}b.preventDefault()}},{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return q}}]);return a}();(0,k.default)(document).on(t.CLICK_DATA_API,v.DATA_SLIDE,x._dataApiClickHandler);(0,k.default)(window).on(t.LOAD_DATA_API,function(){for(var a=[].slice.call(document.querySelectorAll(v.DATA_RIDE)),b=0,c=a.length,d;b<c;b++){d=(0,k.default)(a[b]);x._jQueryInterface.call(d,d.data())}});k.default.fn.carousel=x._jQueryInterface;k.default.fn.carousel.Constructor=x;k.default.fn.carousel.noConflict=function(){k.default.fn.carousel=p;return x._jQueryInterface};a.default=x;return a.default});
"use strict";function _typeof2(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof2=function(a){return typeof a}}else{_typeof2=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof2(a)}define ("theme_boost/scrollspy",["exports","jquery","./util"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var k=d(b),l=d(c);function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if("function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)){e=function(a){return _typeof2(a)}}else{e=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":_typeof2(a)}}return e(a)}function f(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);if("function"==typeof Object.getOwnPropertySymbols){d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))}d.forEach(function(b){g(a,b,c[b])})}return a}function g(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}function h(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function i(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function j(a,b,c){if(b)i(a.prototype,b);if(c)i(a,c);return a}var m="bs.scrollspy",n=".".concat(m),o=k.default.fn.scrollspy,p={offset:10,method:"auto",target:""},q={offset:"number",method:"string",target:"(string|element)"},r={ACTIVATE:"activate".concat(n),SCROLL:"scroll".concat(n),LOAD_DATA_API:"load".concat(n).concat(".data-api")},s={DROPDOWN_ITEM:"dropdown-item",DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active"},t={DATA_SPY:"[data-spy=\"scroll\"]",ACTIVE:".active",NAV_LIST_GROUP:".nav, .list-group",NAV_LINKS:".nav-link",NAV_ITEMS:".nav-item",LIST_ITEMS:".list-group-item",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},u={OFFSET:"offset",POSITION:"position"},v=function(){function a(b,c){var d=this;h(this,a);this._element=b;this._scrollElement="BODY"===b.tagName?window:b;this._config=this._getConfig(c);this._selector="".concat(this._config.target," ").concat(t.NAV_LINKS,",")+"".concat(this._config.target," ").concat(t.LIST_ITEMS,",")+"".concat(this._config.target," ").concat(t.DROPDOWN_ITEMS);this._offsets=[];this._targets=[];this._activeTarget=null;this._scrollHeight=0;(0,k.default)(this._scrollElement).on(r.SCROLL,function(a){return d._process(a)});this.refresh();this._process()}j(a,[{key:"refresh",value:function(){var a=this,b=this._scrollElement===this._scrollElement.window?u.OFFSET:u.POSITION,c="auto"===this._config.method?b:this._config.method,d=c===u.POSITION?this._getScrollTop():0;this._offsets=[];this._targets=[];this._scrollHeight=this._getScrollHeight();var e=[].slice.call(document.querySelectorAll(this._selector));e.map(function(a){var b,e=l.default.getSelectorFromElement(a);if(e){b=document.querySelector(e)}if(b){var f=b.getBoundingClientRect();if(f.width||f.height){return[(0,k.default)(b)[c]().top+d,e]}}return null}).filter(function(a){return a}).sort(function(c,a){return c[0]-a[0]}).forEach(function(b){a._offsets.push(b[0]);a._targets.push(b[1])})}},{key:"dispose",value:function(){k.default.removeData(this._element,m);(0,k.default)(this._scrollElement).off(n);this._element=null;this._scrollElement=null;this._config=null;this._selector=null;this._offsets=null;this._targets=null;this._activeTarget=null;this._scrollHeight=null}},{key:"_getConfig",value:function(a){a=f({},p,"object"===e(a)&&a?a:{});if("string"!=typeof a.target){var b=(0,k.default)(a.target).attr("id");if(!b){b=l.default.getUID("scrollspy");(0,k.default)(a.target).attr("id",b)}a.target="#".concat(b)}l.default.typeCheckConfig("scrollspy",a,q);return a}},{key:"_getScrollTop",value:function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}},{key:"_getScrollHeight",value:function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}},{key:"_getOffsetHeight",value:function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}},{key:"_process",value:function(){var a=this._getScrollTop()+this._config.offset,b=this._getScrollHeight(),c=this._config.offset+b-this._getOffsetHeight();if(this._scrollHeight!==b){this.refresh()}if(a>=c){var d=this._targets[this._targets.length-1];if(this._activeTarget!==d){this._activate(d)}return}if(this._activeTarget&&a<this._offsets[0]&&0<this._offsets[0]){this._activeTarget=null;this._clear();return}for(var e=this._offsets.length,f=e,g;f--;){g=this._activeTarget!==this._targets[f]&&a>=this._offsets[f]&&("undefined"==typeof this._offsets[f+1]||a<this._offsets[f+1]);if(g){this._activate(this._targets[f])}}}},{key:"_activate",value:function(a){this._activeTarget=a;this._clear();var b=this._selector.split(",").map(function(b){return"".concat(b,"[data-target=\"").concat(a,"\"],").concat(b,"[href=\"").concat(a,"\"]")}),c=(0,k.default)([].slice.call(document.querySelectorAll(b.join(","))));if(c.hasClass(s.DROPDOWN_ITEM)){c.closest(t.DROPDOWN).find(t.DROPDOWN_TOGGLE).addClass(s.ACTIVE);c.addClass(s.ACTIVE)}else{c.addClass(s.ACTIVE);c.parents(t.NAV_LIST_GROUP).prev("".concat(t.NAV_LINKS,", ").concat(t.LIST_ITEMS)).addClass(s.ACTIVE);c.parents(t.NAV_LIST_GROUP).prev(t.NAV_ITEMS).children(t.NAV_LINKS).addClass(s.ACTIVE)}(0,k.default)(this._scrollElement).trigger(r.ACTIVATE,{relatedTarget:a})}},{key:"_clear",value:function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(a){return a.classList.contains(s.ACTIVE)}).forEach(function(a){return a.classList.remove(s.ACTIVE)})}}],[{key:"_jQueryInterface",value:function(b){return this.each(function(){var c=(0,k.default)(this).data(m),d="object"===e(b)&&b;if(!c){c=new a(this,d);(0,k.default)(this).data(m,c)}if("string"==typeof b){if("undefined"==typeof c[b]){throw new TypeError("No method named \"".concat(b,"\""))}c[b]()}})}},{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return p}}]);return a}();(0,k.default)(window).on(r.LOAD_DATA_API,function(){for(var a=[].slice.call(document.querySelectorAll(t.DATA_SPY)),b=a.length,c=b,d;c--;){d=(0,k.default)(a[c]);v._jQueryInterface.call(d,d.data())}});k.default.fn.scrollspy=v._jQueryInterface;k.default.fn.scrollspy.Constructor=v;k.default.fn.scrollspy.noConflict=function(){k.default.fn.scrollspy=o;return v._jQueryInterface};a.default=v;return a.default});
"use strict";define ("theme_boost/alert",["exports","jquery","./util"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c);function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function f(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function g(a,b,c){if(b)f(a.prototype,b);if(c)f(a,c);return a}var j="bs.alert",k=".".concat(j),l=h.default.fn.alert,m={CLOSE:"close".concat(k),CLOSED:"closed".concat(k),CLICK_DATA_API:"click".concat(k).concat(".data-api")},n={ALERT:"alert",FADE:"fade",SHOW:"show"},o=function(){function a(b){e(this,a);this._element=b}g(a,[{key:"close",value:function(a){var b=this._element;if(a){b=this._getRootElement(a)}var c=this._triggerCloseEvent(b);if(c.isDefaultPrevented()){return}this._removeElement(b)}},{key:"dispose",value:function(){h.default.removeData(this._element,j);this._element=null}},{key:"_getRootElement",value:function(a){var b=i.default.getSelectorFromElement(a),c=!1;if(b){c=document.querySelector(b)}if(!c){c=(0,h.default)(a).closest(".".concat(n.ALERT))[0]}return c}},{key:"_triggerCloseEvent",value:function(a){var b=h.default.Event(m.CLOSE);(0,h.default)(a).trigger(b);return b}},{key:"_removeElement",value:function(a){var b=this;(0,h.default)(a).removeClass(n.SHOW);if(!(0,h.default)(a).hasClass(n.FADE)){this._destroyElement(a);return}var c=i.default.getTransitionDurationFromElement(a);(0,h.default)(a).one(i.default.TRANSITION_END,function(c){return b._destroyElement(a,c)}).emulateTransitionEnd(c)}},{key:"_destroyElement",value:function(a){(0,h.default)(a).detach().trigger(m.CLOSED).remove()}}],[{key:"_jQueryInterface",value:function(b){return this.each(function(){var c=(0,h.default)(this),d=c.data(j);if(!d){d=new a(this);c.data(j,d)}if("close"===b){d[b](this)}})}},{key:"_handleDismiss",value:function(a){return function(b){if(b){b.preventDefault()}a.close(this)}}},{key:"VERSION",get:function(){return"4.3.1"}}]);return a}();(0,h.default)(document).on(m.CLICK_DATA_API,{DISMISS:"[data-dismiss=\"alert\"]"}.DISMISS,o._handleDismiss(new o));h.default.fn.alert=o._jQueryInterface;h.default.fn.alert.Constructor=o;h.default.fn.alert.noConflict=function(){h.default.fn.alert=l;return o._jQueryInterface};a.default=o;return a.default});
"use strict";function _typeof2(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof2=function(a){return typeof a}}else{_typeof2=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof2(a)}define ("theme_boost/tooltip",["exports","./sanitizer","jquery","core/popper","./util"],function(a,b,c,d,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var m=f(c),n=f(d),o=f(e);function f(a){return a&&a.__esModule?a:{default:a}}function g(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);if("function"==typeof Object.getOwnPropertySymbols){d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))}d.forEach(function(b){h(a,b,c[b])})}return a}function h(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}function i(a){if("function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)){i=function(a){return _typeof2(a)}}else{i=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":_typeof2(a)}}return i(a)}function j(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function k(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function l(a,b,c){if(b)k(a.prototype,b);if(c)k(a,c);return a}var p="bs.tooltip",q=".".concat(p),r=m.default.fn.tooltip,s="bs-tooltip",t=new RegExp("(^|\\s)".concat(s,"\\S+"),"g"),u=["sanitize","whiteList","sanitizeFn"],v={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object"},w={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},x={animation:!0,template:"<div class=\"tooltip\" role=\"tooltip\"><div class=\"arrow\"></div><div class=\"tooltip-inner\"></div></div>",trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:b.DefaultWhitelist},y={SHOW:"show",OUT:"out"},z={HIDE:"hide".concat(q),HIDDEN:"hidden".concat(q),SHOW:"show".concat(q),SHOWN:"shown".concat(q),INSERTED:"inserted".concat(q),CLICK:"click".concat(q),FOCUSIN:"focusin".concat(q),FOCUSOUT:"focusout".concat(q),MOUSEENTER:"mouseenter".concat(q),MOUSELEAVE:"mouseleave".concat(q)},A={FADE:"fade",SHOW:"show"},B={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner",ARROW:".arrow"},C={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"},D=function(){function a(b,c){j(this,a);if("undefined"==typeof n.default){throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)")}this._isEnabled=!0;this._timeout=0;this._hoverState="";this._activeTrigger={};this._popper=null;this.element=b;this.config=this._getConfig(c);this.tip=null;this._setListeners()}l(a,[{key:"enable",value:function(){this._isEnabled=!0}},{key:"disable",value:function(){this._isEnabled=!1}},{key:"toggleEnabled",value:function(){this._isEnabled=!this._isEnabled}},{key:"toggle",value:function(a){if(!this._isEnabled){return}if(a){var b=this.constructor.DATA_KEY,c=(0,m.default)(a.currentTarget).data(b);if(!c){c=new this.constructor(a.currentTarget,this._getDelegateConfig());(0,m.default)(a.currentTarget).data(b,c)}c._activeTrigger.click=!c._activeTrigger.click;if(c._isWithActiveTrigger()){c._enter(null,c)}else{c._leave(null,c)}}else{if((0,m.default)(this.getTipElement()).hasClass(A.SHOW)){this._leave(null,this);return}this._enter(null,this)}}},{key:"dispose",value:function(){clearTimeout(this._timeout);m.default.removeData(this.element,this.constructor.DATA_KEY);(0,m.default)(this.element).off(this.constructor.EVENT_KEY);(0,m.default)(this.element).closest(".modal").off("hide.bs.modal");if(this.tip){(0,m.default)(this.tip).remove()}this._isEnabled=null;this._timeout=null;this._hoverState=null;this._activeTrigger=null;if(null!==this._popper){this._popper.destroy()}this._popper=null;this.element=null;this.config=null;this.tip=null}},{key:"show",value:function(){var a=this;if("none"===(0,m.default)(this.element).css("display")){throw new Error("Please use show on visible elements")}var b=m.default.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){(0,m.default)(this.element).trigger(b);var c=o.default.findShadowRoot(this.element),d=m.default.contains(null!==c?c:this.element.ownerDocument.documentElement,this.element);if(b.isDefaultPrevented()||!d){return}var e=this.getTipElement(),f=o.default.getUID(this.constructor.NAME);e.setAttribute("id",f);this.element.setAttribute("aria-describedby",f);this.setContent();if(this.config.animation){(0,m.default)(e).addClass(A.FADE)}var g="function"==typeof this.config.placement?this.config.placement.call(this,e,this.element):this.config.placement,h=this._getAttachment(g);this.addAttachmentClass(h);var i=this._getContainer();(0,m.default)(e).data(this.constructor.DATA_KEY,this);if(!m.default.contains(this.element.ownerDocument.documentElement,this.tip)){(0,m.default)(e).appendTo(i)}(0,m.default)(this.element).trigger(this.constructor.Event.INSERTED);this._popper=new n.default(this.element,e,{placement:h,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:B.ARROW},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(b){if(b.originalPlacement!==b.placement){a._handlePopperPlacementChange(b)}},onUpdate:function(b){return a._handlePopperPlacementChange(b)}});(0,m.default)(e).addClass(A.SHOW);if("ontouchstart"in document.documentElement){(0,m.default)(document.body).children().on("mouseover",null,m.default.noop)}var j=function(){if(a.config.animation){a._fixTransition()}var b=a._hoverState;a._hoverState=null;(0,m.default)(a.element).trigger(a.constructor.Event.SHOWN);if(b===y.OUT){a._leave(null,a)}};if((0,m.default)(this.tip).hasClass(A.FADE)){var k=o.default.getTransitionDurationFromElement(this.tip);(0,m.default)(this.tip).one(o.default.TRANSITION_END,j).emulateTransitionEnd(k)}else{j()}}}},{key:"hide",value:function(a){var b=this,c=this.getTipElement(),d=m.default.Event(this.constructor.Event.HIDE),e=function(){if(b._hoverState!==y.SHOW&&c.parentNode){c.parentNode.removeChild(c)}b._cleanTipClass();b.element.removeAttribute("aria-describedby");(0,m.default)(b.element).trigger(b.constructor.Event.HIDDEN);if(null!==b._popper){b._popper.destroy()}if(a){a()}};(0,m.default)(this.element).trigger(d);if(d.isDefaultPrevented()){return}(0,m.default)(c).removeClass(A.SHOW);if("ontouchstart"in document.documentElement){(0,m.default)(document.body).children().off("mouseover",null,m.default.noop)}this._activeTrigger[C.CLICK]=!1;this._activeTrigger[C.FOCUS]=!1;this._activeTrigger[C.HOVER]=!1;if((0,m.default)(this.tip).hasClass(A.FADE)){var f=o.default.getTransitionDurationFromElement(c);(0,m.default)(c).one(o.default.TRANSITION_END,e).emulateTransitionEnd(f)}else{e()}this._hoverState=""}},{key:"update",value:function(){if(null!==this._popper){this._popper.scheduleUpdate()}}},{key:"isWithContent",value:function(){return!!this.getTitle()}},{key:"addAttachmentClass",value:function(a){(0,m.default)(this.getTipElement()).addClass("".concat(s,"-").concat(a))}},{key:"getTipElement",value:function(){this.tip=this.tip||(0,m.default)(this.config.template)[0];return this.tip}},{key:"setContent",value:function(){var a=this.getTipElement();this.setElementContent((0,m.default)(a.querySelectorAll(B.TOOLTIP_INNER)),this.getTitle());(0,m.default)(a).removeClass("".concat(A.FADE," ").concat(A.SHOW))}},{key:"setElementContent",value:function(a,c){if("object"===i(c)&&(c.nodeType||c.jquery)){if(this.config.html){if(!(0,m.default)(c).parent().is(a)){a.empty().append(c)}}else{a.text((0,m.default)(c).text())}return}if(this.config.html){if(this.config.sanitize){c=(0,b.sanitizeHtml)(c,this.config.whiteList,this.config.sanitizeFn)}a.html(c)}else{a.text(c)}}},{key:"getTitle",value:function(){var a=this.element.getAttribute("data-original-title");if(!a){a="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title}return a}},{key:"_getOffset",value:function(){var a=this,b={};if("function"==typeof this.config.offset){b.fn=function(b){b.offsets=g({},b.offsets,a.config.offset(b.offsets,a.element)||{});return b}}else{b.offset=this.config.offset}return b}},{key:"_getContainer",value:function(){if(!1===this.config.container){return document.body}if(o.default.isElement(this.config.container)){return(0,m.default)(this.config.container)}return(0,m.default)(document).find(this.config.container)}},{key:"_getAttachment",value:function(a){return w[a.toUpperCase()]}},{key:"_setListeners",value:function(){var a=this,b=this.config.trigger.split(" ");b.forEach(function(b){if("click"===b){(0,m.default)(a.element).on(a.constructor.Event.CLICK,a.config.selector,function(b){return a.toggle(b)})}else if(b!==C.MANUAL){var c=b===C.HOVER?a.constructor.Event.MOUSEENTER:a.constructor.Event.FOCUSIN,d=b===C.HOVER?a.constructor.Event.MOUSELEAVE:a.constructor.Event.FOCUSOUT;(0,m.default)(a.element).on(c,a.config.selector,function(b){return a._enter(b)}).on(d,a.config.selector,function(b){return a._leave(b)})}});(0,m.default)(this.element).closest(".modal").on("hide.bs.modal",function(){if(a.element){a.hide()}});if(this.config.selector){this.config=g({},this.config,{trigger:"manual",selector:""})}else{this._fixTitle()}}},{key:"_fixTitle",value:function(){var a=i(this.element.getAttribute("data-original-title"));if(this.element.getAttribute("title")||"string"!==a){this.element.setAttribute("data-original-title",this.element.getAttribute("title")||"");this.element.setAttribute("title","")}}},{key:"_enter",value:function(a,b){var c=this.constructor.DATA_KEY;b=b||(0,m.default)(a.currentTarget).data(c);if(!b){b=new this.constructor(a.currentTarget,this._getDelegateConfig());(0,m.default)(a.currentTarget).data(c,b)}if(a){b._activeTrigger["focusin"===a.type?C.FOCUS:C.HOVER]=!0}if((0,m.default)(b.getTipElement()).hasClass(A.SHOW)||b._hoverState===y.SHOW){b._hoverState=y.SHOW;return}clearTimeout(b._timeout);b._hoverState=y.SHOW;if(!b.config.delay||!b.config.delay.show){b.show();return}b._timeout=setTimeout(function(){if(b._hoverState===y.SHOW){b.show()}},b.config.delay.show)}},{key:"_leave",value:function(a,b){var c=this.constructor.DATA_KEY;b=b||(0,m.default)(a.currentTarget).data(c);if(!b){b=new this.constructor(a.currentTarget,this._getDelegateConfig());(0,m.default)(a.currentTarget).data(c,b)}if(a){b._activeTrigger["focusout"===a.type?C.FOCUS:C.HOVER]=!1}if(b._isWithActiveTrigger()){return}clearTimeout(b._timeout);b._hoverState=y.OUT;if(!b.config.delay||!b.config.delay.hide){b.hide();return}b._timeout=setTimeout(function(){if(b._hoverState===y.OUT){b.hide()}},b.config.delay.hide)}},{key:"_isWithActiveTrigger",value:function(){for(var a in this._activeTrigger){if(this._activeTrigger[a]){return!0}}return!1}},{key:"_getConfig",value:function(a){var c=(0,m.default)(this.element).data();Object.keys(c).forEach(function(a){if(-1!==u.indexOf(a)){delete c[a]}});a=g({},this.constructor.Default,c,"object"===i(a)&&a?a:{});if("number"==typeof a.delay){a.delay={show:a.delay,hide:a.delay}}if("number"==typeof a.title){a.title=a.title.toString()}if("number"==typeof a.content){a.content=a.content.toString()}o.default.typeCheckConfig("tooltip",a,this.constructor.DefaultType);if(a.sanitize){a.template=(0,b.sanitizeHtml)(a.template,a.whiteList,a.sanitizeFn)}return a}},{key:"_getDelegateConfig",value:function(){var a={};if(this.config){for(var b in this.config){if(this.constructor.Default[b]!==this.config[b]){a[b]=this.config[b]}}}return a}},{key:"_cleanTipClass",value:function(){var a=(0,m.default)(this.getTipElement()),b=a.attr("class").match(t);if(null!==b&&b.length){a.removeClass(b.join(""))}}},{key:"_handlePopperPlacementChange",value:function(a){var b=a.instance;this.tip=b.popper;this._cleanTipClass();this.addAttachmentClass(this._getAttachment(a.placement))}},{key:"_fixTransition",value:function(){var a=this.getTipElement(),b=this.config.animation;if(null!==a.getAttribute("x-placement")){return}(0,m.default)(a).removeClass(A.FADE);this.config.animation=!1;this.hide();this.show();this.config.animation=b}}],[{key:"_jQueryInterface",value:function(b){return this.each(function(){var c=(0,m.default)(this).data(p),d="object"===i(b)&&b;if(!c&&/dispose|hide/.test(b)){return}if(!c){c=new a(this,d);(0,m.default)(this).data(p,c)}if("string"==typeof b){if("undefined"==typeof c[b]){throw new TypeError("No method named \"".concat(b,"\""))}c[b]()}})}},{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return x}},{key:"NAME",get:function(){return"tooltip"}},{key:"DATA_KEY",get:function(){return p}},{key:"Event",get:function(){return z}},{key:"EVENT_KEY",get:function(){return q}},{key:"DefaultType",get:function(){return v}}]);return a}();m.default.fn.tooltip=D._jQueryInterface;m.default.fn.tooltip.Constructor=D;m.default.fn.tooltip.noConflict=function(){m.default.fn.tooltip=r;return D._jQueryInterface};a.default=D;return a.default});
"use strict";function _typeof2(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof2=function(a){return typeof a}}else{_typeof2=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof2(a)}define ("theme_boost/popover",["exports","jquery","./tooltip"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=d(b),p=d(c);function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if("function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)){e=function(a){return _typeof2(a)}}else{e=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":_typeof2(a)}}return e(a)}function f(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function g(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function h(a,b,c){if(b)g(a.prototype,b);if(c)g(a,c);return a}function i(a,b){if(b&&("object"===e(b)||"function"==typeof b)){return b}return j(a)}function j(a){if(void 0===a){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return a}function k(a,b){if("function"!=typeof b&&null!==b){throw new TypeError("Super expression must either be null or a function")}a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});if(b)l(a,b)}function l(a,b){l=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return l(a,b)}function m(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);if("function"==typeof Object.getOwnPropertySymbols){d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))}d.forEach(function(b){n(a,b,c[b])})}return a}function n(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}var q="bs.popover",r=".".concat(q),s=o.default.fn.popover,t="bs-popover",u=new RegExp("(^|\\s)".concat(t,"\\S+"),"g"),v=m({},p.default.Default,{placement:"right",trigger:"click",content:"",template:"<div class=\"popover\" role=\"tooltip\"><div class=\"arrow\"></div><h3 class=\"popover-header\"></h3><div class=\"popover-body\"></div></div>"}),w=m({},p.default.DefaultType,{content:"(string|element|function)"}),x={FADE:"fade",SHOW:"show"},y={TITLE:".popover-header",CONTENT:".popover-body"},z={HIDE:"hide".concat(r),HIDDEN:"hidden".concat(r),SHOW:"show".concat(r),SHOWN:"shown".concat(r),INSERTED:"inserted".concat(r),CLICK:"click".concat(r),FOCUSIN:"focusin".concat(r),FOCUSOUT:"focusout".concat(r),MOUSEENTER:"mouseenter".concat(r),MOUSELEAVE:"mouseleave".concat(r)},A=function(a){k(b,a);function b(){f(this,b);return i(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}h(b,[{key:"isWithContent",value:function(){return this.getTitle()||this._getContent()}},{key:"addAttachmentClass",value:function(a){(0,o.default)(this.getTipElement()).addClass("".concat(t,"-").concat(a))}},{key:"getTipElement",value:function(){this.tip=this.tip||(0,o.default)(this.config.template)[0];return this.tip}},{key:"setContent",value:function(){var a=(0,o.default)(this.getTipElement());this.setElementContent(a.find(y.TITLE),this.getTitle());var b=this._getContent();if("function"==typeof b){b=b.call(this.element)}this.setElementContent(a.find(y.CONTENT),b);a.removeClass("".concat(x.FADE," ").concat(x.SHOW))}},{key:"_getContent",value:function(){return this.element.getAttribute("data-content")||this.config.content}},{key:"_cleanTipClass",value:function(){var a=(0,o.default)(this.getTipElement()),b=a.attr("class").match(u);if(null!==b&&0<b.length){a.removeClass(b.join(""))}}}],[{key:"_jQueryInterface",value:function(a){return this.each(function(){var c=(0,o.default)(this).data(q),d="object"===e(a)?a:null;if(!c&&/dispose|hide/.test(a)){return}if(!c){c=new b(this,d);(0,o.default)(this).data(q,c)}if("string"==typeof a){if("undefined"==typeof c[a]){throw new TypeError("No method named \"".concat(a,"\""))}c[a]()}})}},{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return v}},{key:"NAME",get:function(){return"popover"}},{key:"DATA_KEY",get:function(){return q}},{key:"Event",get:function(){return z}},{key:"EVENT_KEY",get:function(){return r}},{key:"DefaultType",get:function(){return w}}]);return b}(p.default);o.default.fn.popover=A._jQueryInterface;o.default.fn.popover.Constructor=A;o.default.fn.popover.noConflict=function(){o.default.fn.popover=s;return A._jQueryInterface};a.default=A;return a.default});
define ("theme_boost/drawer",["jquery","core/custom_interaction_events","core/log","core/pubsub"],function(a,b,c,d){var f={TOGGLE_REGION:"[data-region=\"drawer-toggle\"]",TOGGLE_ACTION:"[data-action=\"toggle-drawer\"]",TOGGLE_TARGET:"aria-controls",TOGGLE_SIDE:"left",BODY:"body",SECTION:".list-group-item[href*=\"#section-\"]",DRAWER:"#nav-drawer"},g=768>a(document).width(),h=function(){if(!a(f.TOGGLE_REGION).length){c.debug("Page is missing a drawer region")}if(!a(f.TOGGLE_ACTION).length){c.debug("Page is missing a drawer toggle link")}a(f.TOGGLE_REGION).each(function(b,c){var d=a(c).find(f.TOGGLE_ACTION),e=d.attr("aria-controls"),h=a(document.getElementById(e)),i="false"==d.attr("aria-expanded"),j=d.attr("data-side"),k=a(f.BODY),l=d.attr("data-preference");if(g){M.util.set_user_preference(l,"false")}h.on("mousewheel DOMMouseScroll",this.preventPageScroll);if(!i){k.addClass("drawer-open-"+j);d.attr("aria-expanded","true")}else{d.attr("aria-expanded","false")}}.bind(this));this.registerEventListeners();if(g){this.closeAll()}};h.prototype.closeAll=function(){a(f.TOGGLE_REGION).each(function(b,c){var d=a(c).find(f.TOGGLE_ACTION),e=d.attr("data-side"),h=a(f.BODY),i=d.attr("aria-controls"),j=a(document.getElementById(i)),k=d.attr("data-preference");d.attr("aria-expanded","false");h.removeClass("drawer-open-"+e);j.attr("aria-hidden","true");j.addClass("closed");if(!g){M.util.set_user_preference(k,"false")}})};h.prototype.toggleDrawer=function(b){var c=a(b.target).closest("[data-action=toggle-drawer]"),e=c.attr("aria-controls"),h=a(document.getElementById(e)),i=a(f.BODY),j=c.attr("data-side"),k=c.attr("data-preference");if(g){M.util.set_user_preference(k,"false")}i.addClass("drawer-ease");var l="true"==c.attr("aria-expanded");if(!l){c.attr("aria-expanded","true");h.attr("aria-hidden","false");h.focus();i.addClass("drawer-open-"+j);h.removeClass("closed");if(!g){M.util.set_user_preference(k,"true")}}else{i.removeClass("drawer-open-"+j);c.attr("aria-expanded","false");h.addClass("closed").delay(500).queue(function(){a(this).attr("aria-hidden","true").dequeue()});if(!g){M.util.set_user_preference(k,"false")}}d.publish("nav-drawer-toggle-start",l)};h.prototype.preventPageScroll=function(b){var c=b.wheelDelta||b.originalEvent&&b.originalEvent.wheelDelta||-b.originalEvent.detail,d=0<=this.scrollTop+a(this).outerHeight()-this.scrollHeight,e=0>=this.scrollTop;if(0>c&&d||0<c&&e){b.preventDefault()}};h.prototype.registerEventListeners=function(){a(f.TOGGLE_ACTION).each(function(c,d){b.define(a(d),[b.events.activate]);a(d).on(b.events.activate,function(a,b){this.toggleDrawer(b.originalEvent);b.originalEvent.preventDefault()}.bind(this))}.bind(this));a(f.SECTION).click(function(){if(g){this.closeAll()}}.bind(this));a(f.DRAWER).on("webkitTransitionEnd msTransitionEnd transitionend",function(b){var c=a(b.target).closest(f.DRAWER),e="false"==c.attr("aria-hidden");d.publish("nav-drawer-toggle-end",e)})};return{init:function init(){return new h}}});
"use strict";function _typeof2(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof2=function(a){return typeof a}}else{_typeof2=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof2(a)}define ("theme_boost/toast",["exports","jquery","./util"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var k=d(b),l=d(c);function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if("function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)){e=function(a){return _typeof2(a)}}else{e=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":_typeof2(a)}}return e(a)}function f(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);if("function"==typeof Object.getOwnPropertySymbols){d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))}d.forEach(function(b){g(a,b,c[b])})}return a}function g(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}function h(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function i(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function j(a,b,c){if(b)i(a.prototype,b);if(c)i(a,c);return a}var m="bs.toast",n=".".concat(m),o=k.default.fn.toast,p={CLICK_DISMISS:"click.dismiss".concat(n),HIDE:"hide".concat(n),HIDDEN:"hidden".concat(n),SHOW:"show".concat(n),SHOWN:"shown".concat(n)},q={FADE:"fade",HIDE:"hide",SHOW:"show",SHOWING:"showing"},r={animation:"boolean",autohide:"boolean",delay:"number"},s={animation:!0,autohide:!0,delay:500},t={DATA_DISMISS:"[data-dismiss=\"toast\"]"},u=function(){function a(b,c){h(this,a);this._element=b;this._config=this._getConfig(c);this._timeout=null;this._setListeners()}j(a,[{key:"show",value:function(){var a=this;(0,k.default)(this._element).trigger(p.SHOW);if(this._config.animation){this._element.classList.add(q.FADE)}var b=function(){a._element.classList.remove(q.SHOWING);a._element.classList.add(q.SHOW);(0,k.default)(a._element).trigger(p.SHOWN);if(a._config.autohide){a.hide()}};this._element.classList.remove(q.HIDE);this._element.classList.add(q.SHOWING);if(this._config.animation){var c=l.default.getTransitionDurationFromElement(this._element);(0,k.default)(this._element).one(l.default.TRANSITION_END,b).emulateTransitionEnd(c)}else{b()}}},{key:"hide",value:function(a){var b=this;if(!this._element.classList.contains(q.SHOW)){return}(0,k.default)(this._element).trigger(p.HIDE);if(a){this._close()}else{this._timeout=setTimeout(function(){b._close()},this._config.delay)}}},{key:"dispose",value:function(){clearTimeout(this._timeout);this._timeout=null;if(this._element.classList.contains(q.SHOW)){this._element.classList.remove(q.SHOW)}(0,k.default)(this._element).off(p.CLICK_DISMISS);k.default.removeData(this._element,m);this._element=null;this._config=null}},{key:"_getConfig",value:function(a){a=f({},s,(0,k.default)(this._element).data(),"object"===e(a)&&a?a:{});l.default.typeCheckConfig("toast",a,this.constructor.DefaultType);return a}},{key:"_setListeners",value:function(){var a=this;(0,k.default)(this._element).on(p.CLICK_DISMISS,t.DATA_DISMISS,function(){return a.hide(!0)})}},{key:"_close",value:function(){var a=this,b=function(){a._element.classList.add(q.HIDE);(0,k.default)(a._element).trigger(p.HIDDEN)};this._element.classList.remove(q.SHOW);if(this._config.animation){var c=l.default.getTransitionDurationFromElement(this._element);(0,k.default)(this._element).one(l.default.TRANSITION_END,b).emulateTransitionEnd(c)}else{b()}}}],[{key:"_jQueryInterface",value:function(b){return this.each(function(){var c=(0,k.default)(this),d=c.data(m),f="object"===e(b)&&b;if(!d){d=new a(this,f);c.data(m,d)}if("string"==typeof b){if("undefined"==typeof d[b]){throw new TypeError("No method named \"".concat(b,"\""))}d[b](this)}})}},{key:"VERSION",get:function(){return"4.3.1"}},{key:"DefaultType",get:function(){return r}},{key:"Default",get:function(){return s}}]);return a}();k.default.fn.toast=u._jQueryInterface;k.default.fn.toast.Constructor=u;k.default.fn.toast.noConflict=function(){k.default.fn.toast=o;return u._jQueryInterface};a.default=u;return a.default});
"use strict";define ("theme_boost/tab",["exports","jquery","./util"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c);function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function f(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function g(a,b,c){if(b)f(a.prototype,b);if(c)f(a,c);return a}var j="bs.tab",k=".".concat(j),l=h.default.fn.tab,m={HIDE:"hide".concat(k),HIDDEN:"hidden".concat(k),SHOW:"show".concat(k),SHOWN:"shown".concat(k),CLICK_DATA_API:"click".concat(k).concat(".data-api")},n={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"},o={DROPDOWN:".dropdown",NAV_LIST_GROUP:".nav, .list-group",ACTIVE:".active",ACTIVE_UL:"> li > .active",DATA_TOGGLE:"[data-toggle=\"tab\"], [data-toggle=\"pill\"], [data-toggle=\"list\"]",DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"},p=function(){function a(b){e(this,a);this._element=b}g(a,[{key:"show",value:function(){var a=this;if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&(0,h.default)(this._element).hasClass(n.ACTIVE)||(0,h.default)(this._element).hasClass(n.DISABLED)){return}var b,c,d=(0,h.default)(this._element).closest(o.NAV_LIST_GROUP)[0],e=i.default.getSelectorFromElement(this._element);if(d){var f="UL"===d.nodeName||"OL"===d.nodeName?o.ACTIVE_UL:o.ACTIVE;c=h.default.makeArray((0,h.default)(d).find(f));c=c[c.length-1]}var g=h.default.Event(m.HIDE,{relatedTarget:this._element}),j=h.default.Event(m.SHOW,{relatedTarget:c});if(c){(0,h.default)(c).trigger(g)}(0,h.default)(this._element).trigger(j);if(j.isDefaultPrevented()||g.isDefaultPrevented()){return}if(e){b=document.querySelector(e)}this._activate(this._element,d);var k=function(){var b=h.default.Event(m.HIDDEN,{relatedTarget:a._element}),d=h.default.Event(m.SHOWN,{relatedTarget:c});(0,h.default)(c).trigger(b);(0,h.default)(a._element).trigger(d)};if(b){this._activate(b,b.parentNode,k)}else{k()}}},{key:"dispose",value:function(){h.default.removeData(this._element,j);this._element=null}},{key:"_activate",value:function(a,b,c){var d=this,e=b&&("UL"===b.nodeName||"OL"===b.nodeName)?(0,h.default)(b).find(o.ACTIVE_UL):(0,h.default)(b).children(o.ACTIVE),f=e[0],g=c&&f&&(0,h.default)(f).hasClass(n.FADE),j=function(){return d._transitionComplete(a,f,c)};if(f&&g){var k=i.default.getTransitionDurationFromElement(f);(0,h.default)(f).removeClass(n.SHOW).one(i.default.TRANSITION_END,j).emulateTransitionEnd(k)}else{j()}}},{key:"_transitionComplete",value:function(a,b,c){if(b){(0,h.default)(b).removeClass(n.ACTIVE);var d=(0,h.default)(b.parentNode).find(o.DROPDOWN_ACTIVE_CHILD)[0];if(d){(0,h.default)(d).removeClass(n.ACTIVE)}if("tab"===b.getAttribute("role")){b.setAttribute("aria-selected",!1)}}(0,h.default)(a).addClass(n.ACTIVE);if("tab"===a.getAttribute("role")){a.setAttribute("aria-selected",!0)}i.default.reflow(a);if(a.classList.contains(n.FADE)){a.classList.add(n.SHOW)}if(a.parentNode&&(0,h.default)(a.parentNode).hasClass(n.DROPDOWN_MENU)){var e=(0,h.default)(a).closest(o.DROPDOWN)[0];if(e){var f=[].slice.call(e.querySelectorAll(o.DROPDOWN_TOGGLE));(0,h.default)(f).addClass(n.ACTIVE)}a.setAttribute("aria-expanded",!0)}if(c){c()}}}],[{key:"_jQueryInterface",value:function(b){return this.each(function(){var c=(0,h.default)(this),d=c.data(j);if(!d){d=new a(this);c.data(j,d)}if("string"==typeof b){if("undefined"==typeof d[b]){throw new TypeError("No method named \"".concat(b,"\""))}d[b]()}})}},{key:"VERSION",get:function(){return"4.3.1"}}]);return a}();(0,h.default)(document).on(m.CLICK_DATA_API,o.DATA_TOGGLE,function(a){a.preventDefault();p._jQueryInterface.call((0,h.default)(this),"show")});h.default.fn.tab=p._jQueryInterface;h.default.fn.tab.Constructor=p;h.default.fn.tab.noConflict=function(){h.default.fn.tab=l;return p._jQueryInterface};a.default=p;return a.default});
"use strict";function _typeof2(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof2=function(a){return typeof a}}else{_typeof2=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof2(a)}define ("theme_boost/dropdown",["exports","jquery","core/popper","./util"],function(a,b,c,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=e(b),m=e(c),n=e(d);function e(a){return a&&a.__esModule?a:{default:a}}function f(a){if("function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)){f=function(a){return _typeof2(a)}}else{f=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":_typeof2(a)}}return f(a)}function g(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);if("function"==typeof Object.getOwnPropertySymbols){d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))}d.forEach(function(b){h(a,b,c[b])})}return a}function h(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}function i(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function j(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function k(a,b,c){if(b)j(a.prototype,b);if(c)j(a,c);return a}var o="bs.dropdown",p=".".concat(o),q=".data-api",r=l.default.fn.dropdown,s=27,t=32,u=9,v=38,w=40,x=new RegExp("".concat(v,"|").concat(w,"|").concat(s)),y={HIDE:"hide".concat(p),HIDDEN:"hidden".concat(p),SHOW:"show".concat(p),SHOWN:"shown".concat(p),CLICK:"click".concat(p),CLICK_DATA_API:"click".concat(p).concat(q),KEYDOWN_DATA_API:"keydown".concat(p).concat(q),KEYUP_DATA_API:"keyup".concat(p).concat(q)},z={DISABLED:"disabled",SHOW:"show",DROPUP:"dropup",DROPRIGHT:"dropright",DROPLEFT:"dropleft",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",POSITION_STATIC:"position-static"},A={DATA_TOGGLE:"[data-toggle=\"dropdown\"]",FORM_CHILD:".dropdown form",MENU:".dropdown-menu",NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)"},B={TOP:"top-start",TOPEND:"top-end",BOTTOM:"bottom-start",BOTTOMEND:"bottom-end",RIGHT:"right-start",RIGHTEND:"right-end",LEFT:"left-start",LEFTEND:"left-end"},C={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},D={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"},E=function(){function a(b,c){i(this,a);this._element=b;this._popper=null;this._config=this._getConfig(c);this._menu=this._getMenuElement();this._inNavbar=this._detectNavbar();this._addEventListeners()}k(a,[{key:"toggle",value:function(){if(this._element.disabled||(0,l.default)(this._element).hasClass(z.DISABLED)){return}var b=a._getParentFromElement(this._element),c=(0,l.default)(this._menu).hasClass(z.SHOW);a._clearMenus();if(c){return}var d={relatedTarget:this._element},e=l.default.Event(y.SHOW,d);(0,l.default)(b).trigger(e);if(e.isDefaultPrevented()){return}if(!this._inNavbar){if("undefined"==typeof m.default){throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)")}var f=this._element;if("parent"===this._config.reference){f=b}else if(n.default.isElement(this._config.reference)){f=this._config.reference;if("undefined"!=typeof this._config.reference.jquery){f=this._config.reference[0]}}if("scrollParent"!==this._config.boundary){(0,l.default)(b).addClass(z.POSITION_STATIC)}this._popper=new m.default(f,this._menu,this._getPopperConfig())}if("ontouchstart"in document.documentElement&&0===(0,l.default)(b).closest(A.NAVBAR_NAV).length){(0,l.default)(document.body).children().on("mouseover",null,l.default.noop)}this._element.focus();this._element.setAttribute("aria-expanded",!0);(0,l.default)(this._menu).toggleClass(z.SHOW);(0,l.default)(b).toggleClass(z.SHOW).trigger(l.default.Event(y.SHOWN,d))}},{key:"show",value:function(){if(this._element.disabled||(0,l.default)(this._element).hasClass(z.DISABLED)||(0,l.default)(this._menu).hasClass(z.SHOW)){return}var b={relatedTarget:this._element},c=l.default.Event(y.SHOW,b),d=a._getParentFromElement(this._element);(0,l.default)(d).trigger(c);if(c.isDefaultPrevented()){return}(0,l.default)(this._menu).toggleClass(z.SHOW);(0,l.default)(d).toggleClass(z.SHOW).trigger(l.default.Event(y.SHOWN,b))}},{key:"hide",value:function(){if(this._element.disabled||(0,l.default)(this._element).hasClass(z.DISABLED)||!(0,l.default)(this._menu).hasClass(z.SHOW)){return}var b={relatedTarget:this._element},c=l.default.Event(y.HIDE,b),d=a._getParentFromElement(this._element);(0,l.default)(d).trigger(c);if(c.isDefaultPrevented()){return}(0,l.default)(this._menu).toggleClass(z.SHOW);(0,l.default)(d).toggleClass(z.SHOW).trigger(l.default.Event(y.HIDDEN,b))}},{key:"dispose",value:function(){l.default.removeData(this._element,o);(0,l.default)(this._element).off(p);this._element=null;this._menu=null;if(null!==this._popper){this._popper.destroy();this._popper=null}}},{key:"update",value:function(){this._inNavbar=this._detectNavbar();if(null!==this._popper){this._popper.scheduleUpdate()}}},{key:"_addEventListeners",value:function(){var a=this;(0,l.default)(this._element).on(y.CLICK,function(b){b.preventDefault();b.stopPropagation();a.toggle()})}},{key:"_getConfig",value:function(a){a=g({},this.constructor.Default,(0,l.default)(this._element).data(),a);n.default.typeCheckConfig("dropdown",a,this.constructor.DefaultType);return a}},{key:"_getMenuElement",value:function(){if(!this._menu){var b=a._getParentFromElement(this._element);if(b){this._menu=b.querySelector(A.MENU)}}return this._menu}},{key:"_getPlacement",value:function(){var a=(0,l.default)(this._element.parentNode),b=B.BOTTOM;if(a.hasClass(z.DROPUP)){b=B.TOP;if((0,l.default)(this._menu).hasClass(z.MENURIGHT)){b=B.TOPEND}}else if(a.hasClass(z.DROPRIGHT)){b=B.RIGHT}else if(a.hasClass(z.DROPLEFT)){b=B.LEFT}else if((0,l.default)(this._menu).hasClass(z.MENURIGHT)){b=B.BOTTOMEND}return b}},{key:"_detectNavbar",value:function(){return 0<(0,l.default)(this._element).closest(".navbar").length}},{key:"_getOffset",value:function(){var a=this,b={};if("function"==typeof this._config.offset){b.fn=function(b){b.offsets=g({},b.offsets,a._config.offset(b.offsets,a._element)||{});return b}}else{b.offset=this._config.offset}return b}},{key:"_getPopperConfig",value:function(){var a={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};if("static"===this._config.display){a.modifiers.applyStyle={enabled:!1}}return a}}],[{key:"_jQueryInterface",value:function(b){return this.each(function(){var c=(0,l.default)(this).data(o),d="object"===f(b)?b:null;if(!c){c=new a(this,d);(0,l.default)(this).data(o,c)}if("string"==typeof b){if("undefined"==typeof c[b]){throw new TypeError("No method named \"".concat(b,"\""))}c[b]()}})}},{key:"_clearMenus",value:function(b){if(b&&(b.which===3||"keyup"===b.type&&b.which!==u)){return}for(var c=[].slice.call(document.querySelectorAll(A.DATA_TOGGLE)),d=0,e=c.length;d<e;d++){var f=a._getParentFromElement(c[d]),g=(0,l.default)(c[d]).data(o),h={relatedTarget:c[d]};if(b&&"click"===b.type){h.clickEvent=b}if(!g){continue}var j=g._menu;if(!(0,l.default)(f).hasClass(z.SHOW)){continue}if(b&&("click"===b.type&&/input|textarea/i.test(b.target.tagName)||"keyup"===b.type&&b.which===u)&&l.default.contains(f,b.target)){continue}var k=l.default.Event(y.HIDE,h);(0,l.default)(f).trigger(k);if(k.isDefaultPrevented()){continue}if("ontouchstart"in document.documentElement){(0,l.default)(document.body).children().off("mouseover",null,l.default.noop)}c[d].setAttribute("aria-expanded","false");(0,l.default)(j).removeClass(z.SHOW);(0,l.default)(f).removeClass(z.SHOW).trigger(l.default.Event(y.HIDDEN,h))}}},{key:"_getParentFromElement",value:function(a){var b,c=n.default.getSelectorFromElement(a);if(c){b=document.querySelector(c)}return b||a.parentNode}},{key:"_dataApiKeydownHandler",value:function(b){if(/input|textarea/i.test(b.target.tagName)?b.which===t||b.which!==s&&(b.which!==w&&b.which!==v||(0,l.default)(b.target).closest(A.MENU).length):!x.test(b.which)){return}b.preventDefault();b.stopPropagation();if(this.disabled||(0,l.default)(this).hasClass(z.DISABLED)){return}var c=a._getParentFromElement(this),d=(0,l.default)(c).hasClass(z.SHOW);if(!d||d&&(b.which===s||b.which===t)){if(b.which===s){var e=c.querySelector(A.DATA_TOGGLE);(0,l.default)(e).trigger("focus")}(0,l.default)(this).trigger("click");return}var f=[].slice.call(c.querySelectorAll(A.VISIBLE_ITEMS));if(0===f.length){return}var g=f.indexOf(b.target);if(b.which===v&&0<g){g--}if(b.which===w&&g<f.length-1){g++}if(0>g){g=0}f[g].focus()}},{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return C}},{key:"DefaultType",get:function(){return D}}]);return a}();(0,l.default)(document).on(y.KEYDOWN_DATA_API,A.DATA_TOGGLE,E._dataApiKeydownHandler).on(y.KEYDOWN_DATA_API,A.MENU,E._dataApiKeydownHandler).on("".concat(y.CLICK_DATA_API," ").concat(y.KEYUP_DATA_API),E._clearMenus).on(y.CLICK_DATA_API,A.DATA_TOGGLE,function(a){a.preventDefault();a.stopPropagation();E._jQueryInterface.call((0,l.default)(this),"toggle")}).on(y.CLICK_DATA_API,A.FORM_CHILD,function(a){a.stopPropagation()});l.default.fn.dropdown=E._jQueryInterface;l.default.fn.dropdown.Constructor=E;l.default.fn.dropdown.noConflict=function(){l.default.fn.dropdown=r;return E._jQueryInterface};a.default=E;return a.default});
define ("theme_boost/form-display-errors",["jquery","core/event"],function(a,b){return{enhance:function enhance(c){var d=document.getElementById(c);if(!d){return}a(d).on(b.Events.FORM_FIELD_VALIDATION,function(b,c){b.preventDefault();var e=a(d).closest(".form-group"),f=e.find(".form-control-feedback");if("TEXTAREA"==a(d).prop("tagName")&&e.find("[contenteditable]")){d=e.find("[contenteditable]")}if(""!==c){e.addClass("has-danger");e.data("client-validation-error",!0);a(d).addClass("is-invalid");a(d).attr("aria-describedby",f.attr("id"));a(d).attr("aria-invalid",!0);f.attr("tabindex",0);f.html(c);if(!f.is(":visible")){f.show();f.focus()}}else{if(!0===e.data("client-validation-error")){e.removeClass("has-danger");e.data("client-validation-error",!1);a(d).removeClass("is-invalid");a(d).removeAttr("aria-describedby");a(d).attr("aria-invalid",!1);f.hide()}}});var e=d.closest("form");if(!("boostFormErrorsEnhanced"in e.dataset)){e.addEventListener("submit",function(){var b=a(".form-control-feedback:visible");if(b.length){b[0].focus()}});e.dataset.boostFormErrorsEnhanced=1}}}});
function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}(function(a,b){if("function"==typeof define&&define.amd){define ("theme_boost/tether",b)}else if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))){module.exports=b(require,exports,module)}else{a.Tether=b()}})(this,function(){'use strict';var u=function(){function a(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}return function(b,c,d){if(c)a(b.prototype,c);if(d)a(b,d);return b}}();function a(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}var v;if("undefined"==typeof v){v={modules:[]}}var w=null;function b(a){var c=a.getBoundingClientRect(),d={};for(var e in c){d[e]=c[e]}if(a.ownerDocument!==document){var f=a.ownerDocument.defaultView.frameElement;if(f){var g=b(f);d.top+=g.top;d.bottom+=g.top;d.left+=g.left;d.right+=g.left}}return d}function c(a){var b=getComputedStyle(a)||{},c=b.position,d=[];if("fixed"===c){return[a]}var e=a;while((e=e.parentNode)&&e&&1===e.nodeType){var f=void 0;try{f=getComputedStyle(e)}catch(a){}if("undefined"==typeof f||null===f){d.push(e);return d}var g=f,h=g.overflow,i=g.overflowX,j=g.overflowY;if(/(auto|scroll)/.test(h+j+i)){if("absolute"!==c||0<=["relative","absolute","fixed"].indexOf(f.position)){d.push(e)}}}d.push(a.ownerDocument.body);if(a.ownerDocument!==document){d.push(a.ownerDocument.defaultView)}return d}var x=function(){var a=0;return function(){return++a}}(),y={},z=function(){var a=w;if(!a){a=document.createElement("div");a.setAttribute("data-tether-id",x());h(a.style,{top:0,left:0,position:"absolute"});document.body.appendChild(a);w=a}var c=a.getAttribute("data-tether-id");if("undefined"==typeof y[c]){y[c]=b(a);B(function(){delete y[c]})}return y[c]};function d(){if(w){document.body.removeChild(w)}w=null}function e(a){var c;if(a===document){c=document;a=document.documentElement}else{c=a.ownerDocument}var d=c.documentElement,e=b(a),f=z();e.top-=f.top;e.left-=f.left;if("undefined"==typeof e.width){e.width=document.body.scrollWidth-e.left-e.right}if("undefined"==typeof e.height){e.height=document.body.scrollHeight-e.top-e.bottom}e.top=e.top-d.clientTop;e.left=e.left-d.clientLeft;e.right=c.body.clientWidth-e.width-e.left;e.bottom=c.body.clientHeight-e.height-e.top;return e}function f(a){return a.offsetParent||document.documentElement}function g(){var a=document.createElement("div");a.style.width="100%";a.style.height="200px";var b=document.createElement("div");h(b.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"});b.appendChild(a);document.body.appendChild(b);var c=a.offsetWidth;b.style.overflow="scroll";var d=a.offsetWidth;if(c===d){d=b.clientWidth}document.body.removeChild(b);var e=c-d;return{width:e,height:e}}function h(){var a=0>=arguments.length||arguments[0]===void 0?{}:arguments[0],b=[];Array.prototype.push.apply(b,arguments);b.slice(1).forEach(function(b){if(b){for(var c in b){if({}.hasOwnProperty.call(b,c)){a[c]=b[c]}}}});return a}function i(a,b){if("undefined"!=typeof a.classList){b.split(" ").forEach(function(b){if(b.trim()){a.classList.remove(b)}})}else{var c=new RegExp("(^| )"+b.split(" ").join("|")+"( |$)","gi"),d=l(a).replace(c," ");m(a,d)}}function j(a,b){if("undefined"!=typeof a.classList){b.split(" ").forEach(function(b){if(b.trim()){a.classList.add(b)}})}else{i(a,b);var c=l(a)+(" "+b);m(a,c)}}function k(a,b){if("undefined"!=typeof a.classList){return a.classList.contains(b)}var c=l(a);return new RegExp("(^| )"+b+"( |$)","gi").test(c)}function l(a){if(a.className instanceof a.ownerDocument.defaultView.SVGAnimatedString){return a.className.baseVal}return a.className}function m(a,b){a.setAttribute("class",b)}function n(a,b,c){c.forEach(function(c){if(-1===b.indexOf(c)&&k(a,c)){i(a,c)}});b.forEach(function(b){if(!k(a,b)){j(a,b)}})}var A=[],B=function(a){A.push(a)},C=function(){var a;while(a=A.pop()){a()}},D=function(){function b(){a(this,b)}u(b,[{key:"on",value:function(a,b,c){var d=3>=arguments.length||arguments[3]===void 0?!1:arguments[3];if("undefined"==typeof this.bindings){this.bindings={}}if("undefined"==typeof this.bindings[a]){this.bindings[a]=[]}this.bindings[a].push({handler:b,ctx:c,once:d})}},{key:"once",value:function(a,b,c){this.on(a,b,c,!0)}},{key:"off",value:function(a,b){if("undefined"==typeof this.bindings||"undefined"==typeof this.bindings[a]){return}if("undefined"==typeof b){delete this.bindings[a]}else{var c=0;while(c<this.bindings[a].length){if(this.bindings[a][c].handler===b){this.bindings[a].splice(c,1)}else{++c}}}}},{key:"trigger",value:function(a){if("undefined"!=typeof this.bindings&&this.bindings[a]){for(var b=0,c=arguments.length,d=Array(1<c?c-1:0),e=1;e<c;e++){d[e-1]=arguments[e]}while(b<this.bindings[a].length){var f=this.bindings[a][b],g=f.handler,h=f.ctx,j=f.once,k=h;if("undefined"==typeof k){k=this}g.apply(k,d);if(j){this.bindings[a].splice(b,1)}else{++b}}}}}]);return b}();v.Utils={getActualBoundingClientRect:b,getScrollParents:c,getBounds:e,getOffsetParent:f,extend:h,addClass:j,removeClass:i,hasClass:k,updateClasses:n,defer:B,flush:C,uniqueId:x,Evented:D,getScrollBarSize:g,removeUtilElements:d};var E=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done);d=!0){c.push(h.value);if(b&&c.length===b)break}}catch(a){e=!0;f=a}finally{try{if(!d&&g["return"])g["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b)){return b}else if(Symbol.iterator in Object(b)){return a(b,c)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}(),u=function(){function a(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}return function(b,c,d){if(c)a(b.prototype,c);if(d)a(b,d);return b}}(),F=function(a,b,c){var d=!0;_function:while(d){var e=a,f=b,g=c;d=!1;if(null===e)e=Function.prototype;var h=Object.getOwnPropertyDescriptor(e,f);if(h===void 0){var i=Object.getPrototypeOf(e);if(null===i){return}else{a=i;b=f;c=g;d=!0;h=i=void 0;continue _function}}else if("value"in h){return h.value}else{var j=h.get;if(j===void 0){return}return j.call(g)}}};function a(b,c){if(!(b instanceof c)){throw new TypeError("Cannot call a class as a function")}}function o(a,b){if("function"!=typeof b&&null!==b){throw new TypeError("Super expression must either be null or a function, not "+_typeof(b))}a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});if(b)Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b}if("undefined"==typeof v){throw new Error("You must include the utils.js file before tether.js")}var G=v.Utils,c=G.getScrollParents,e=G.getBounds,f=G.getOffsetParent,h=G.extend,j=G.addClass,i=G.removeClass,n=G.updateClasses,B=G.defer,C=G.flush,g=G.getScrollBarSize,d=G.removeUtilElements;function p(c,a){var b=2>=arguments.length||arguments[2]===void 0?1:arguments[2];return c+b>=a&&a>=c-b}var H=function(){if("undefined"==typeof document){return""}for(var a=document.createElement("div"),b=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],c=0,d;c<b.length;++c){d=b[c];if(a.style[d]!==void 0){return d}}}(),I=[],J=function(){I.forEach(function(a){a.position(!1)});C()};function q(){if("undefined"!=typeof performance&&"undefined"!=typeof performance.now){return performance.now()}return+new Date}(function(){var a=null,b=null,c=null,d=function d(){if("undefined"!=typeof b&&16<b){b=Math.min(b-16,250);c=setTimeout(d,250);return}if("undefined"!=typeof a&&10>q()-a){return}if(null!=c){clearTimeout(c);c=null}a=q();J();b=q()-a};if("undefined"!=typeof window&&"undefined"!=typeof window.addEventListener){["resize","scroll","touchmove"].forEach(function(a){window.addEventListener(a,d)})}})();var K={center:"center",left:"right",right:"left"},L={middle:"middle",top:"bottom",bottom:"top"},M={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},N=function(a,b){var c=a.left,d=a.top;if("auto"===c){c=K[b.left]}if("auto"===d){d=L[b.top]}return{left:c,top:d}},O=function(a){var b=a.left,c=a.top;if("undefined"!=typeof M[a.left]){b=M[a.left]}if("undefined"!=typeof M[a.top]){c=M[a.top]}return{left:b,top:c}};function r(){for(var a={top:0,left:0},b=arguments.length,c=Array(b),d=0;d<b;d++){c[d]=arguments[d]}c.forEach(function(b){var c=b.top,d=b.left;if("string"==typeof c){c=parseFloat(c,10)}if("string"==typeof d){d=parseFloat(d,10)}a.top+=c;a.left+=d});return a}function s(a,b){if("string"==typeof a.left&&-1!==a.left.indexOf("%")){a.left=parseFloat(a.left,10)/100*b.width}if("string"==typeof a.top&&-1!==a.top.indexOf("%")){a.top=parseFloat(a.top,10)/100*b.height}return a}var P=function(a){var b=a.split(" "),c=E(b,2),d=c[0],e=c[1];return{top:d,left:e}},Q=P,R=function(b){o(k,b);function k(b){var c=this;a(this,k);F(Object.getPrototypeOf(k.prototype),"constructor",this).call(this);this.position=this.position.bind(this);I.push(this);this.history=[];this.setOptions(b,!1);v.modules.forEach(function(a){if("undefined"!=typeof a.initialize){a.initialize.call(c)}});this.position()}u(k,[{key:"getClass",value:function(){var a=0>=arguments.length||arguments[0]===void 0?"":arguments[0],b=this.options.classes;if("undefined"!=typeof b&&b[a]){return this.options.classes[a]}else if(this.options.classPrefix){return this.options.classPrefix+"-"+a}else{return a}}},{key:"setOptions",value:function(a){var b=this,d=1>=arguments.length||arguments[1]===void 0?!0:arguments[1];this.options=h({offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},a);var e=this.options,f=e.element,g=e.target,i=e.targetModifier;this.element=f;this.target=g;this.targetModifier=i;if("viewport"===this.target){this.target=document.body;this.targetModifier="visible"}else if("scroll-handle"===this.target){this.target=document.body;this.targetModifier="scroll-handle"}["element","target"].forEach(function(a){if("undefined"==typeof b[a]){throw new Error("Tether Error: Both element and target must be defined")}if("undefined"!=typeof b[a].jquery){b[a]=b[a][0]}else if("string"==typeof b[a]){b[a]=document.querySelector(b[a])}});j(this.element,this.getClass("element"));if(!(!1===this.options.addTargetClasses)){j(this.target,this.getClass("target"))}if(!this.options.attachment){throw new Error("Tether Error: You must provide an attachment")}this.targetAttachment=Q(this.options.targetAttachment);this.attachment=Q(this.options.attachment);this.offset=P(this.options.offset);this.targetOffset=P(this.options.targetOffset);if("undefined"!=typeof this.scrollParents){this.disable()}if("scroll-handle"===this.targetModifier){this.scrollParents=[this.target]}else{this.scrollParents=c(this.target)}if(!(!1===this.options.enabled)){this.enable(d)}}},{key:"getTargetBounds",value:function(){if("undefined"!=typeof this.targetModifier){if("visible"===this.targetModifier){if(this.target===document.body){return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}}else{var a=e(this.target),b={height:a.height,width:a.width,top:a.top,left:a.left};b.height=Math.min(b.height,a.height-(pageYOffset-a.top));b.height=Math.min(b.height,a.height-(a.top+a.height-(pageYOffset+innerHeight)));b.height=Math.min(innerHeight,b.height);b.height-=2;b.width=Math.min(b.width,a.width-(pageXOffset-a.left));b.width=Math.min(b.width,a.width-(a.left+a.width-(pageXOffset+innerWidth)));b.width=Math.min(innerWidth,b.width);b.width-=2;if(b.top<pageYOffset){b.top=pageYOffset}if(b.left<pageXOffset){b.left=pageXOffset}return b}}else if("scroll-handle"===this.targetModifier){var a=void 0,c=this.target;if(c===document.body){c=document.documentElement;a={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}}else{a=e(c)}var d=getComputedStyle(c),f=c.scrollWidth>c.clientWidth||0<=[d.overflow,d.overflowX].indexOf("scroll")||this.target!==document.body,g=0;if(f){g=15}var h=a.height-parseFloat(d.borderTopWidth)-parseFloat(d.borderBottomWidth)-g,b={width:15,height:.975*h*(h/c.scrollHeight),left:a.left+a.width-parseFloat(d.borderLeftWidth)-15},i=0;if(408>h&&this.target===document.body){i=-11e-5*Math.pow(h,2)-.00727*h+22.58}if(this.target!==document.body){b.height=Math.max(b.height,24)}var j=this.target.scrollTop/(c.scrollHeight-h);b.top=j*(h-b.height-i)+a.top+parseFloat(d.borderTopWidth);if(this.target===document.body){b.height=Math.max(b.height,24)}return b}}else{return e(this.target)}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(a,b){if("undefined"==typeof this._cache){this._cache={}}if("undefined"==typeof this._cache[a]){this._cache[a]=b.call(this)}return this._cache[a]}},{key:"enable",value:function(){var a=this,b=0>=arguments.length||arguments[0]===void 0?!0:arguments[0];if(!(!1===this.options.addTargetClasses)){j(this.target,this.getClass("enabled"))}j(this.element,this.getClass("enabled"));this.enabled=!0;this.scrollParents.forEach(function(b){if(b!==a.target.ownerDocument){b.addEventListener("scroll",a.position)}});if(b){this.position()}}},{key:"disable",value:function(){var a=this;i(this.target,this.getClass("enabled"));i(this.element,this.getClass("enabled"));this.enabled=!1;if("undefined"!=typeof this.scrollParents){this.scrollParents.forEach(function(b){b.removeEventListener("scroll",a.position)})}}},{key:"destroy",value:function(){var a=this;this.disable();I.forEach(function(b,c){if(b===a){I.splice(c,1)}});if(0===I.length){d()}}},{key:"updateAttachClasses",value:function(a,b){var c=this;a=a||this.attachment;b=b||this.targetAttachment;if("undefined"!=typeof this._addAttachClasses&&this._addAttachClasses.length){this._addAttachClasses.splice(0,this._addAttachClasses.length)}if("undefined"==typeof this._addAttachClasses){this._addAttachClasses=[]}var d=this._addAttachClasses;if(a.top){d.push(this.getClass("element-attached")+"-"+a.top)}if(a.left){d.push(this.getClass("element-attached")+"-"+a.left)}if(b.top){d.push(this.getClass("target-attached")+"-"+b.top)}if(b.left){d.push(this.getClass("target-attached")+"-"+b.left)}var e=[];["left","top","bottom","right","middle","center"].forEach(function(a){e.push(c.getClass("element-attached")+"-"+a);e.push(c.getClass("target-attached")+"-"+a)});B(function(){if(!("undefined"!=typeof c._addAttachClasses)){return}n(c.element,c._addAttachClasses,e);if(!(!1===c.options.addTargetClasses)){n(c.target,c._addAttachClasses,e)}delete c._addAttachClasses})}},{key:"position",value:function(){var a=this,b=0>=arguments.length||arguments[0]===void 0?!0:arguments[0];if(!this.enabled){return}this.clearCache();var c=N(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,c);var d=this.cache("element-bounds",function(){return e(a.element)}),h=d.width,j=d.height;if(0===h&&0===j&&"undefined"!=typeof this.lastSize){var k=this.lastSize;h=k.width;j=k.height}else{this.lastSize={width:h,height:j}}var l=this.cache("target-bounds",function(){return a.getTargetBounds()}),m=l,n=s(O(this.attachment),{width:h,height:j}),o=s(O(c),m),p=s(this.offset,{width:h,height:j}),q=s(this.targetOffset,m);n=r(n,p);o=r(o,q);for(var t=l.left+o.left-n.left,u=l.top+o.top-n.top,w=0;w<v.modules.length;++w){var x=v.modules[w],y=x.position.call(this,{left:t,top:u,targetAttachment:c,targetPos:l,elementPos:d,offset:n,targetOffset:o,manualOffset:p,manualTargetOffset:q,scrollbarSize:D,attachment:this.attachment});if(!1===y){return!1}else if("undefined"==typeof y||"object"!==_typeof(y)){continue}else{u=y.top;t=y.left}}var z={page:{top:u,left:t},viewport:{top:u-pageYOffset,bottom:pageYOffset-u-j+innerHeight,left:t-pageXOffset,right:pageXOffset-t-h+innerWidth}},A=this.target.ownerDocument,B=A.defaultView,D=void 0;if(A.body.scrollWidth>B.innerWidth){D=this.cache("scrollbar-size",g);z.viewport.bottom-=D.height}if(A.body.scrollHeight>B.innerHeight){D=this.cache("scrollbar-size",g);z.viewport.right-=D.width}if(-1===["","static"].indexOf(A.body.style.position)||-1===["","static"].indexOf(A.body.parentElement.style.position)){z.page.bottom=A.body.scrollHeight-u-j;z.page.right=A.body.scrollWidth-t-h}if("undefined"!=typeof this.options.optimizations&&!1!==this.options.optimizations.moveElement&&!("undefined"!=typeof this.targetModifier)){(function(){var b=a.cache("target-offsetparent",function(){return f(a.target)}),c=a.cache("target-offsetparent-bounds",function(){return e(b)}),d=getComputedStyle(b),g=c,h={};["Top","Left","Bottom","Right"].forEach(function(a){h[a.toLowerCase()]=parseFloat(d["border"+a+"Width"])});c.right=A.body.scrollWidth-c.left-g.width+h.right;c.bottom=A.body.scrollHeight-c.top-g.height+h.bottom;if(z.page.top>=c.top+h.top&&z.page.bottom>=c.bottom){if(z.page.left>=c.left+h.left&&z.page.right>=c.right){var i=b.scrollTop,j=b.scrollLeft;z.offset={top:z.page.top-c.top+i-h.top,left:z.page.left-c.left+j-h.left}}}})()}this.move(z);this.history.unshift(z);if(3<this.history.length){this.history.pop()}if(b){C()}return!0}},{key:"move",value:function(a){var b=this;if(!("undefined"!=typeof this.element.parentNode)){return}var c={};for(var d in a){c[d]={};for(var e in a[d]){for(var g=!1,j=0,k;j<this.history.length;++j){k=this.history[j];if("undefined"!=typeof k[d]&&!p(k[d][e],a[d][e])){g=!0;break}}if(!g){c[d][e]=!0}}}var l={top:"",left:"",right:"",bottom:""},m=function(a,c){var d="undefined"!=typeof b.options.optimizations,e=d?b.options.optimizations.gpu:null;if(!1!==e){var f,g;if(a.top){l.top=0;f=c.top}else{l.bottom=0;f=-c.bottom}if(a.left){l.left=0;g=c.left}else{l.right=0;g=-c.right}l[H]="translateX("+Math.round(g)+"px) translateY("+Math.round(f)+"px)";if("msTransform"!==H){l[H]+=" translateZ(0)"}}else{if(a.top){l.top=c.top+"px"}else{l.bottom=c.bottom+"px"}if(a.left){l.left=c.left+"px"}else{l.right=c.right+"px"}}},n=!1;if((c.page.top||c.page.bottom)&&(c.page.left||c.page.right)){l.position="absolute";m(c.page,a.page)}else if((c.viewport.top||c.viewport.bottom)&&(c.viewport.left||c.viewport.right)){l.position="fixed";m(c.viewport,a.viewport)}else if("undefined"!=typeof c.offset&&c.offset.top&&c.offset.left){(function(){l.position="absolute";var d=b.cache("target-offsetparent",function(){return f(b.target)});if(f(b.element)!==d){B(function(){b.element.parentNode.removeChild(b.element);d.appendChild(b.element)})}m(c.offset,a.offset);n=!0})()}else{l.position="absolute";m({top:!0,left:!0},a.page)}if(!n){var o=!0,q=this.element.parentNode;while(q&&1===q.nodeType&&"BODY"!==q.tagName){if("static"!==getComputedStyle(q).position){o=!1;break}q=q.parentNode}if(!o){this.element.parentNode.removeChild(this.element);this.element.ownerDocument.body.appendChild(this.element)}}var r={},s=!1;for(var e in l){var t=l[e],u=this.element.style[e];if(u!==t){s=!0;r[e]=t}}if(s){B(function(){h(b.element.style,r)})}}}]);return k}(D);R.modules=[];v.position=J;var S=h(R,v);var E=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done);d=!0){c.push(h.value);if(b&&c.length===b)break}}catch(a){e=!0;f=a}finally{try{if(!d&&g["return"])g["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b)){return b}else if(Symbol.iterator in Object(b)){return a(b,c)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}(),G=v.Utils,e=G.getBounds,h=G.extend,n=G.updateClasses,B=G.defer,T=["left","top","right","bottom"];function t(a,b){if("scrollParent"===b){b=a.scrollParents[0]}else if("window"===b){b=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]}if(b===document){b=b.documentElement}if("undefined"!=typeof b.nodeType){(function(){var a=b,c=e(b),d=c,f=getComputedStyle(b);b=[d.left,d.top,c.width+d.left,c.height+d.top];if(a.ownerDocument!==document){var g=a.ownerDocument.defaultView;b[0]+=g.pageXOffset;b[1]+=g.pageYOffset;b[2]+=g.pageXOffset;b[3]+=g.pageYOffset}T.forEach(function(a,c){a=a[0].toUpperCase()+a.substr(1);if("Top"===a||"Left"===a){b[c]+=parseFloat(f["border"+a+"Width"])}else{b[c]-=parseFloat(f["border"+a+"Width"])}})})()}return b}v.modules.push({position:function(a){var b=this,c=a.top,d=a.left,f=a.targetAttachment;if(!this.options.constraints){return!0}var g=this.cache("element-bounds",function(){return e(b.element)}),i=g.height,j=g.width;if(0===j&&0===i&&"undefined"!=typeof this.lastSize){var k=this.lastSize;j=k.width;i=k.height}var l=this.cache("target-bounds",function(){return b.getTargetBounds()}),m=l.height,o=l.width,p=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(a){var b=a.outOfBoundsClass,c=a.pinnedClass;if(b){p.push(b)}if(c){p.push(c)}});p.forEach(function(a){["left","top","right","bottom"].forEach(function(b){p.push(a+"-"+b)})});var q=[],r=h({},f),s=h({},this.attachment);this.options.constraints.forEach(function(a){var e=a.to,g=a.attachment,h=a.pin;if("undefined"==typeof g){g=""}var k,l;if(0<=g.indexOf(" ")){var n=g.split(" "),p=E(n,2);l=p[0];k=p[1]}else{k=l=g}var u=t(b,e);if("target"===l||"both"===l){if(c<u[1]&&"top"===r.top){c+=m;r.top="bottom"}if(c+i>u[3]&&"bottom"===r.top){c-=m;r.top="top"}}if("together"===l){if("top"===r.top){if("bottom"===s.top&&c<u[1]){c+=m;r.top="bottom";c+=i;s.top="top"}else if("top"===s.top&&c+i>u[3]&&c-(i-m)>=u[1]){c-=i-m;r.top="bottom";s.top="bottom"}}if("bottom"===r.top){if("top"===s.top&&c+i>u[3]){c-=m;r.top="top";c-=i;s.top="bottom"}else if("bottom"===s.top&&c<u[1]&&c+(2*i-m)<=u[3]){c+=i-m;r.top="top";s.top="top"}}if("middle"===r.top){if(c+i>u[3]&&"top"===s.top){c-=i;s.top="bottom"}else if(c<u[1]&&"bottom"===s.top){c+=i;s.top="top"}}}if("target"===k||"both"===k){if(d<u[0]&&"left"===r.left){d+=o;r.left="right"}if(d+j>u[2]&&"right"===r.left){d-=o;r.left="left"}}if("together"===k){if(d<u[0]&&"left"===r.left){if("right"===s.left){d+=o;r.left="right";d+=j;s.left="left"}else if("left"===s.left){d+=o;r.left="right";d-=j;s.left="right"}}else if(d+j>u[2]&&"right"===r.left){if("left"===s.left){d-=o;r.left="left";d-=j;s.left="right"}else if("right"===s.left){d-=o;r.left="left";d+=j;s.left="left"}}else if("center"===r.left){if(d+j>u[2]&&"left"===s.left){d-=j;s.left="right"}else if(d<u[0]&&"right"===s.left){d+=j;s.left="left"}}}if("element"===l||"both"===l){if(c<u[1]&&"bottom"===s.top){c+=i;s.top="top"}if(c+i>u[3]&&"top"===s.top){c-=i;s.top="bottom"}}if("element"===k||"both"===k){if(d<u[0]){if("right"===s.left){d+=j;s.left="left"}else if("center"===s.left){d+=j/2;s.left="left"}}if(d+j>u[2]){if("left"===s.left){d-=j;s.left="right"}else if("center"===s.left){d-=j/2;s.left="right"}}}if("string"==typeof h){h=h.split(",").map(function(a){return a.trim()})}else if(!0===h){h=["top","left","right","bottom"]}h=h||[];var v=[],w=[];if(c<u[1]){if(0<=h.indexOf("top")){c=u[1];v.push("top")}else{w.push("top")}}if(c+i>u[3]){if(0<=h.indexOf("bottom")){c=u[3]-i;v.push("bottom")}else{w.push("bottom")}}if(d<u[0]){if(0<=h.indexOf("left")){d=u[0];v.push("left")}else{w.push("left")}}if(d+j>u[2]){if(0<=h.indexOf("right")){d=u[2]-j;v.push("right")}else{w.push("right")}}if(v.length){(function(){var a;if("undefined"!=typeof b.options.pinnedClass){a=b.options.pinnedClass}else{a=b.getClass("pinned")}q.push(a);v.forEach(function(b){q.push(a+"-"+b)})})()}if(w.length){(function(){var a;if("undefined"!=typeof b.options.outOfBoundsClass){a=b.options.outOfBoundsClass}else{a=b.getClass("out-of-bounds")}q.push(a);w.forEach(function(b){q.push(a+"-"+b)})})()}if(0<=v.indexOf("left")||0<=v.indexOf("right")){s.left=r.left=!1}if(0<=v.indexOf("top")||0<=v.indexOf("bottom")){s.top=r.top=!1}if(r.top!==f.top||r.left!==f.left||s.top!==b.attachment.top||s.left!==b.attachment.left){b.updateAttachClasses(s,r);b.trigger("update",{attachment:s,targetAttachment:r})}});B(function(){if(!(!1===b.options.addTargetClasses)){n(b.target,q,p)}n(b.element,q,p)});return{top:c,left:d}}});var G=v.Utils,e=G.getBounds,n=G.updateClasses,B=G.defer;v.modules.push({position:function(a){var b=this,c=a.top,d=a.left,f=this.cache("element-bounds",function(){return e(b.element)}),g=f.height,h=f.width,i=this.getTargetBounds(),j=c+g,k=d+h,l=[];if(c<=i.bottom&&j>=i.top){["left","right"].forEach(function(a){var b=i[a];if(b===d||b===k){l.push(a)}})}if(d<=i.right&&k>=i.left){["top","bottom"].forEach(function(a){var b=i[a];if(b===c||b===j){l.push(a)}})}var m=[],o=[];m.push(this.getClass("abutted"));["left","top","right","bottom"].forEach(function(a){m.push(b.getClass("abutted")+"-"+a)});if(l.length){o.push(this.getClass("abutted"))}l.forEach(function(a){o.push(b.getClass("abutted")+"-"+a)});B(function(){if(!(!1===b.options.addTargetClasses)){n(b.target,o,m)}n(b.element,o,m)});return!0}});var E=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done);d=!0){c.push(h.value);if(b&&c.length===b)break}}catch(a){e=!0;f=a}finally{try{if(!d&&g["return"])g["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b)){return b}else if(Symbol.iterator in Object(b)){return a(b,c)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();v.modules.push({position:function(a){var b=a.top,c=a.left;if(!this.options.shift){return}var d=this.options.shift;if("function"==typeof this.options.shift){d=this.options.shift.call(this,{top:b,left:c})}var e,f;if("string"==typeof d){d=d.split(" ");d[1]=d[1]||d[0];var g=d,h=E(g,2);e=h[0];f=h[1];e=parseFloat(e,10);f=parseFloat(f,10)}else{e=d.top;f=d.left}b+=e;c+=f;return{top:b,left:c}}});return S});
define ("theme_boost/aria",["jquery","core/pending"],function(a,b){return{init:function init(){var c=!1,d=function(){c=!0},e=function(){var a=c;c=!1;return a};a("[data-toggle=\"dropdown\"]").keydown(function(b){var c=b.which||b.keyCode,e;if(38==c){d()}if(27==c){e=a(b.target).attr("aria-expanded");b.preventDefault();if("false"==e){a(b.target).click()}}if(32==c||13==c){b.preventDefault();a(b.target).click()}});var f=function(c){var d=function(b){a(this).focus();b.resolve()}.bind(c);setTimeout(d,50,new b("core/aria:delayed-focus"))};a(".dropdown").on("shown.bs.dropdown",function(b){var c=a(b.target).find("[role=\"menu\"]"),d=!1,g=!1;if(c){d=a(c).find("[role=\"menuitem\"]")}if(d&&0<d.length){if(e()){g=d[d.length-1]}else{g=d[0]}}if(g){f(g)}});a(".dropdown [role=\"menu\"] [role=\"menuitem\"]").keypress(function(b){var c=String.fromCharCode(b.which||b.keyCode),d=a(b.target).closest("[role=\"menu\"]"),e=0,g=!1,h,j;if(!d){return}g=a(d).find("[role=\"menuitem\"]");if(!g){return}c=c.toLowerCase();for(e=0;e<g.length;e++){h=a(g[e]);j=h.text().trim().toLowerCase();if(0==j.indexOf(c)){f(h);break}}});a(".dropdown [role=\"menu\"] [role=\"menuitem\"]").keydown(function(b){var c=b.which||b.keyCode,d=!1,e=a(b.target).closest("[role=\"menu\"]"),g=0,h=!1;if(!e){return}h=a(e).find("[role=\"menuitem\"]");if(!h){return}if(40==c){for(g=0;g<h.length-1;g++){if(h[g]==b.target){d=h[g+1];break}}if(!d){d=h[0]}}else if(38==c){for(g=1;g<h.length;g++){if(h[g]==b.target){d=h[g-1];break}}if(!d){d=h[h.length-1]}}else if(36==c){d=h[0]}else if(35==c){d=h[h.length-1]}if(d){b.preventDefault();f(d)}});a(".dropdown").on("hidden.bs.dropdown",function(b){var c=a(b.target).find("[data-toggle=\"dropdown\"]");if(c){f(c)}});window.addEventListener("load",function(){var a=document.querySelectorAll("[data-aria-autofocus=\"true\"][role=\"alert\"]");Array.prototype.forEach.call(a,function(a){a.innerHTML+=" ";a.removeAttribute("data-aria-autofocus")})})}}});
"use strict";function _typeof2(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof2=function(a){return typeof a}}else{_typeof2=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof2(a)}define ("theme_boost/modal",["exports","jquery","./util"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var k=d(b),l=d(c);function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if("function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)){e=function(a){return _typeof2(a)}}else{e=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":_typeof2(a)}}return e(a)}function f(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);if("function"==typeof Object.getOwnPropertySymbols){d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))}d.forEach(function(b){g(a,b,c[b])})}return a}function g(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}function h(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function i(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function j(a,b,c){if(b)i(a.prototype,b);if(c)i(a,c);return a}var m="bs.modal",n=".".concat(m),o=k.default.fn.modal,p={backdrop:!0,keyboard:!0,focus:!0,show:!0},q={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},r={HIDE:"hide".concat(n),HIDDEN:"hidden".concat(n),SHOW:"show".concat(n),SHOWN:"shown".concat(n),FOCUSIN:"focusin".concat(n),RESIZE:"resize".concat(n),CLICK_DISMISS:"click.dismiss".concat(n),KEYDOWN_DISMISS:"keydown.dismiss".concat(n),MOUSEUP_DISMISS:"mouseup.dismiss".concat(n),MOUSEDOWN_DISMISS:"mousedown.dismiss".concat(n),CLICK_DATA_API:"click".concat(n).concat(".data-api")},s={SCROLLABLE:"modal-dialog-scrollable",SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show"},t={DIALOG:".modal-dialog",MODAL_BODY:".modal-body",DATA_TOGGLE:"[data-toggle=\"modal\"]",DATA_DISMISS:"[data-dismiss=\"modal\"]",FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top"},u=function(){function a(b,c){h(this,a);this._config=this._getConfig(c);this._element=b;this._dialog=b.querySelector(t.DIALOG);this._backdrop=null;this._isShown=!1;this._isBodyOverflowing=!1;this._ignoreBackdropClick=!1;this._isTransitioning=!1;this._scrollbarWidth=0}j(a,[{key:"toggle",value:function(a){return this._isShown?this.hide():this.show(a)}},{key:"show",value:function(a){var b=this;if(this._isShown||this._isTransitioning){return}if((0,k.default)(this._element).hasClass(s.FADE)){this._isTransitioning=!0}var c=k.default.Event(r.SHOW,{relatedTarget:a});(0,k.default)(this._element).trigger(c);if(this._isShown||c.isDefaultPrevented()){return}this._isShown=!0;this._checkScrollbar();this._setScrollbar();this._adjustDialog();this._setEscapeEvent();this._setResizeEvent();(0,k.default)(this._element).on(r.CLICK_DISMISS,t.DATA_DISMISS,function(a){return b.hide(a)});(0,k.default)(this._dialog).on(r.MOUSEDOWN_DISMISS,function(){(0,k.default)(b._element).one(r.MOUSEUP_DISMISS,function(a){if((0,k.default)(a.target).is(b._element)){b._ignoreBackdropClick=!0}})});this._showBackdrop(function(){return b._showElement(a)})}},{key:"hide",value:function(a){var b=this;if(a){a.preventDefault()}if(!this._isShown||this._isTransitioning){return}var c=k.default.Event(r.HIDE);(0,k.default)(this._element).trigger(c);if(!this._isShown||c.isDefaultPrevented()){return}this._isShown=!1;var d=(0,k.default)(this._element).hasClass(s.FADE);if(d){this._isTransitioning=!0}this._setEscapeEvent();this._setResizeEvent();(0,k.default)(document).off(r.FOCUSIN);(0,k.default)(this._element).removeClass(s.SHOW);(0,k.default)(this._element).off(r.CLICK_DISMISS);(0,k.default)(this._dialog).off(r.MOUSEDOWN_DISMISS);if(d){var e=l.default.getTransitionDurationFromElement(this._element);(0,k.default)(this._element).one(l.default.TRANSITION_END,function(a){return b._hideModal(a)}).emulateTransitionEnd(e)}else{this._hideModal()}}},{key:"dispose",value:function(){[window,this._element,this._dialog].forEach(function(a){return(0,k.default)(a).off(n)});(0,k.default)(document).off(r.FOCUSIN);k.default.removeData(this._element,m);this._config=null;this._element=null;this._dialog=null;this._backdrop=null;this._isShown=null;this._isBodyOverflowing=null;this._ignoreBackdropClick=null;this._isTransitioning=null;this._scrollbarWidth=null}},{key:"handleUpdate",value:function(){this._adjustDialog()}},{key:"_getConfig",value:function(a){a=f({},p,a);l.default.typeCheckConfig("modal",a,q);return a}},{key:"_showElement",value:function(a){var b=this,c=(0,k.default)(this._element).hasClass(s.FADE);if(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE){document.body.appendChild(this._element)}this._element.style.display="block";this._element.removeAttribute("aria-hidden");this._element.setAttribute("aria-modal",!0);if((0,k.default)(this._dialog).hasClass(s.SCROLLABLE)){this._dialog.querySelector(t.MODAL_BODY).scrollTop=0}else{this._element.scrollTop=0}if(c){l.default.reflow(this._element)}(0,k.default)(this._element).addClass(s.SHOW);if(this._config.focus){this._enforceFocus()}var d=k.default.Event(r.SHOWN,{relatedTarget:a}),e=function(){if(b._config.focus){b._element.focus()}b._isTransitioning=!1;(0,k.default)(b._element).trigger(d)};if(c){var f=l.default.getTransitionDurationFromElement(this._dialog);(0,k.default)(this._dialog).one(l.default.TRANSITION_END,e).emulateTransitionEnd(f)}else{e()}}},{key:"_enforceFocus",value:function(){var a=this;(0,k.default)(document).off(r.FOCUSIN).on(r.FOCUSIN,function(b){if(document!==b.target&&a._element!==b.target&&0===(0,k.default)(a._element).has(b.target).length){a._element.focus()}})}},{key:"_setEscapeEvent",value:function(){var a=this;if(this._isShown&&this._config.keyboard){(0,k.default)(this._element).on(r.KEYDOWN_DISMISS,function(b){if(b.which===27){b.preventDefault();a.hide()}})}else if(!this._isShown){(0,k.default)(this._element).off(r.KEYDOWN_DISMISS)}}},{key:"_setResizeEvent",value:function(){var a=this;if(this._isShown){(0,k.default)(window).on(r.RESIZE,function(b){return a.handleUpdate(b)})}else{(0,k.default)(window).off(r.RESIZE)}}},{key:"_hideModal",value:function(){var a=this;this._element.style.display="none";this._element.setAttribute("aria-hidden",!0);this._element.removeAttribute("aria-modal");this._isTransitioning=!1;this._showBackdrop(function(){(0,k.default)(document.body).removeClass(s.OPEN);a._resetAdjustments();a._resetScrollbar();(0,k.default)(a._element).trigger(r.HIDDEN)})}},{key:"_removeBackdrop",value:function(){if(this._backdrop){(0,k.default)(this._backdrop).remove();this._backdrop=null}}},{key:"_showBackdrop",value:function(a){var b=this,c=(0,k.default)(this._element).hasClass(s.FADE)?s.FADE:"";if(this._isShown&&this._config.backdrop){this._backdrop=document.createElement("div");this._backdrop.className=s.BACKDROP;if(c){this._backdrop.classList.add(c)}(0,k.default)(this._backdrop).appendTo(document.body);(0,k.default)(this._element).on(r.CLICK_DISMISS,function(a){if(b._ignoreBackdropClick){b._ignoreBackdropClick=!1;return}if(a.target!==a.currentTarget){return}if("static"===b._config.backdrop){b._element.focus()}else{b.hide()}});if(c){l.default.reflow(this._backdrop)}(0,k.default)(this._backdrop).addClass(s.SHOW);if(!a){return}if(!c){a();return}var d=l.default.getTransitionDurationFromElement(this._backdrop);(0,k.default)(this._backdrop).one(l.default.TRANSITION_END,a).emulateTransitionEnd(d)}else if(!this._isShown&&this._backdrop){(0,k.default)(this._backdrop).removeClass(s.SHOW);var e=function(){b._removeBackdrop();if(a){a()}};if((0,k.default)(this._element).hasClass(s.FADE)){var f=l.default.getTransitionDurationFromElement(this._backdrop);(0,k.default)(this._backdrop).one(l.default.TRANSITION_END,e).emulateTransitionEnd(f)}else{e()}}else if(a){a()}}},{key:"_adjustDialog",value:function(){var a=this._element.scrollHeight>document.documentElement.clientHeight;if(!this._isBodyOverflowing&&a){this._element.style.paddingLeft="".concat(this._scrollbarWidth,"px")}if(this._isBodyOverflowing&&!a){this._element.style.paddingRight="".concat(this._scrollbarWidth,"px")}}},{key:"_resetAdjustments",value:function(){this._element.style.paddingLeft="";this._element.style.paddingRight=""}},{key:"_checkScrollbar",value:function(){var a=document.body.getBoundingClientRect();this._isBodyOverflowing=a.left+a.right<window.innerWidth;this._scrollbarWidth=this._getScrollbarWidth()}},{key:"_setScrollbar",value:function(){var a=this;if(this._isBodyOverflowing){var b=[].slice.call(document.querySelectorAll(t.FIXED_CONTENT)),c=[].slice.call(document.querySelectorAll(t.STICKY_CONTENT));(0,k.default)(b).each(function(b,c){var d=c.style.paddingRight,e=(0,k.default)(c).css("padding-right");(0,k.default)(c).data("padding-right",d).css("padding-right","".concat(parseFloat(e)+a._scrollbarWidth,"px"))});(0,k.default)(c).each(function(b,c){var d=c.style.marginRight,e=(0,k.default)(c).css("margin-right");(0,k.default)(c).data("margin-right",d).css("margin-right","".concat(parseFloat(e)-a._scrollbarWidth,"px"))});var d=document.body.style.paddingRight,e=(0,k.default)(document.body).css("padding-right");(0,k.default)(document.body).data("padding-right",d).css("padding-right","".concat(parseFloat(e)+this._scrollbarWidth,"px"))}(0,k.default)(document.body).addClass(s.OPEN)}},{key:"_resetScrollbar",value:function(){var a=[].slice.call(document.querySelectorAll(t.FIXED_CONTENT));(0,k.default)(a).each(function(a,b){var c=(0,k.default)(b).data("padding-right");(0,k.default)(b).removeData("padding-right");b.style.paddingRight=c?c:""});var b=[].slice.call(document.querySelectorAll("".concat(t.STICKY_CONTENT)));(0,k.default)(b).each(function(a,b){var c=(0,k.default)(b).data("margin-right");if("undefined"!=typeof c){(0,k.default)(b).css("margin-right",c).removeData("margin-right")}});var c=(0,k.default)(document.body).data("padding-right");(0,k.default)(document.body).removeData("padding-right");document.body.style.paddingRight=c?c:""}},{key:"_getScrollbarWidth",value:function(){var a=document.createElement("div");a.className=s.SCROLLBAR_MEASURER;document.body.appendChild(a);var b=a.getBoundingClientRect().width-a.clientWidth;document.body.removeChild(a);return b}}],[{key:"_jQueryInterface",value:function(b,c){return this.each(function(){var d=(0,k.default)(this).data(m),g=f({},p,(0,k.default)(this).data(),"object"===e(b)&&b?b:{});if(!d){d=new a(this,g);(0,k.default)(this).data(m,d)}if("string"==typeof b){if("undefined"==typeof d[b]){throw new TypeError("No method named \"".concat(b,"\""))}d[b](c)}else if(g.show){d.show(c)}})}},{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return p}}]);return a}();(0,k.default)(document).on(r.CLICK_DATA_API,t.DATA_TOGGLE,function(a){var b=this,c,d=l.default.getSelectorFromElement(this);if(d){c=document.querySelector(d)}var e=(0,k.default)(c).data(m)?"toggle":f({},(0,k.default)(c).data(),(0,k.default)(this).data());if("A"===this.tagName||"AREA"===this.tagName){a.preventDefault()}var g=(0,k.default)(c).one(r.SHOW,function(a){if(a.isDefaultPrevented()){return}g.one(r.HIDDEN,function(){if((0,k.default)(b).is(":visible")){b.focus()}})});u._jQueryInterface.call((0,k.default)(c),e,this)});k.default.fn.modal=u._jQueryInterface;k.default.fn.modal.Constructor=u;k.default.fn.modal.noConflict=function(){k.default.fn.modal=o;return u._jQueryInterface};a.default=u;return a.default});
define ("theme_boost/loader",["jquery","./tether","core/event","core/custom_interaction_events"],function(a,b,c,d){window.jQuery=a;window.Tether=b;M.util.js_pending("theme_boost/loader:children");require(["theme_boost/aria","theme_boost/pending","theme_boost/util","theme_boost/alert","theme_boost/button","theme_boost/carousel","theme_boost/collapse","theme_boost/dropdown","theme_boost/modal","theme_boost/scrollspy","theme_boost/tab","theme_boost/tooltip","theme_boost/popover"],function(b){a("body").popover({trigger:"focus",selector:"[data-toggle=popover][data-trigger!=hover]",placement:"auto"});d.define(a("body"),[d.events.escape]);a("body").on(d.events.escape,"[data-toggle=popover]",function(){a(this).trigger("blur")});a("html").popover({container:"body",selector:"[data-toggle=popover][data-trigger=hover]",trigger:"hover",delay:{hide:500}});a("html").tooltip({selector:"[data-toggle=\"tooltip\"]"});a.fn.dropdown.Constructor.Default.flip=!1;a("a[data-toggle=\"tab\"]").on("shown.bs.tab",function(b){var c=a(b.target).attr("href");if(history.replaceState){history.replaceState(null,null,c)}else{location.hash=c}});var e=window.location.hash;if(e){a(".nav-link[href=\""+e+"\"]").tab("show")}c.getLegacyEvents().done(function(b){a(document).on(b.FILTER_CONTENT_UPDATED,function(){a("body").popover({selector:"[data-toggle=\"popover\"]",trigger:"focus"})})});b.init();M.util.js_complete("theme_boost/loader:children")});return{}});
"use strict";function _typeof2(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof2=function(a){return typeof a}}else{_typeof2=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof2(a)}define ("theme_boost/collapse",["exports","jquery","./util"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var k=d(b),l=d(c);function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if("function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)){e=function(a){return _typeof2(a)}}else{e=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":_typeof2(a)}}return e(a)}function f(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);if("function"==typeof Object.getOwnPropertySymbols){d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))}d.forEach(function(b){g(a,b,c[b])})}return a}function g(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}function h(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function i(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function j(a,b,c){if(b)i(a.prototype,b);if(c)i(a,c);return a}var m="bs.collapse",n=".".concat(m),o=k.default.fn.collapse,p={toggle:!0,parent:""},q={toggle:"boolean",parent:"(string|element)"},r={SHOW:"show".concat(n),SHOWN:"shown".concat(n),HIDE:"hide".concat(n),HIDDEN:"hidden".concat(n),CLICK_DATA_API:"click".concat(n).concat(".data-api")},s={SHOW:"show",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"},t={WIDTH:"width",HEIGHT:"height"},u={ACTIVES:".show, .collapsing",DATA_TOGGLE:"[data-toggle=\"collapse\"]"},v=function(){function a(b,c){h(this,a);this._isTransitioning=!1;this._element=b;this._config=this._getConfig(c);this._triggerArray=[].slice.call(document.querySelectorAll("[data-toggle=\"collapse\"][href=\"#".concat(b.id,"\"],")+"[data-toggle=\"collapse\"][data-target=\"#".concat(b.id,"\"]")));for(var d=[].slice.call(document.querySelectorAll(u.DATA_TOGGLE)),e=0,f=d.length;e<f;e++){var g=d[e],j=l.default.getSelectorFromElement(g),k=[].slice.call(document.querySelectorAll(j)).filter(function(a){return a===b});if(null!==j&&0<k.length){this._selector=j;this._triggerArray.push(g)}}this._parent=this._config.parent?this._getParent():null;if(!this._config.parent){this._addAriaAndCollapsedClass(this._element,this._triggerArray)}if(this._config.toggle){this.toggle()}}j(a,[{key:"toggle",value:function(){if((0,k.default)(this._element).hasClass(s.SHOW)){this.hide()}else{this.show()}}},{key:"show",value:function(){var b=this;if(this._isTransitioning||(0,k.default)(this._element).hasClass(s.SHOW)){return}var c,d;if(this._parent){c=[].slice.call(this._parent.querySelectorAll(u.ACTIVES)).filter(function(a){if("string"==typeof b._config.parent){return a.getAttribute("data-parent")===b._config.parent}return a.classList.contains(s.COLLAPSE)});if(0===c.length){c=null}}if(c){d=(0,k.default)(c).not(this._selector).data(m);if(d&&d._isTransitioning){return}}var e=k.default.Event(r.SHOW);(0,k.default)(this._element).trigger(e);if(e.isDefaultPrevented()){return}if(c){a._jQueryInterface.call((0,k.default)(c).not(this._selector),"hide");if(!d){(0,k.default)(c).data(m,null)}}var f=this._getDimension();(0,k.default)(this._element).removeClass(s.COLLAPSE).addClass(s.COLLAPSING);this._element.style[f]=0;if(this._triggerArray.length){(0,k.default)(this._triggerArray).removeClass(s.COLLAPSED).attr("aria-expanded",!0)}this.setTransitioning(!0);var g=f[0].toUpperCase()+f.slice(1),h="scroll".concat(g),i=l.default.getTransitionDurationFromElement(this._element);(0,k.default)(this._element).one(l.default.TRANSITION_END,function(){(0,k.default)(b._element).removeClass(s.COLLAPSING).addClass(s.COLLAPSE).addClass(s.SHOW);b._element.style[f]="";b.setTransitioning(!1);(0,k.default)(b._element).trigger(r.SHOWN)}).emulateTransitionEnd(i);this._element.style[f]="".concat(this._element[h],"px")}},{key:"hide",value:function(){var a=this;if(this._isTransitioning||!(0,k.default)(this._element).hasClass(s.SHOW)){return}var b=k.default.Event(r.HIDE);(0,k.default)(this._element).trigger(b);if(b.isDefaultPrevented()){return}var c=this._getDimension();this._element.style[c]="".concat(this._element.getBoundingClientRect()[c],"px");l.default.reflow(this._element);(0,k.default)(this._element).addClass(s.COLLAPSING).removeClass(s.COLLAPSE).removeClass(s.SHOW);var d=this._triggerArray.length;if(0<d){for(var e=0;e<d;e++){var f=this._triggerArray[e],g=l.default.getSelectorFromElement(f);if(null!==g){var h=(0,k.default)([].slice.call(document.querySelectorAll(g)));if(!h.hasClass(s.SHOW)){(0,k.default)(f).addClass(s.COLLAPSED).attr("aria-expanded",!1)}}}}this.setTransitioning(!0);this._element.style[c]="";var j=l.default.getTransitionDurationFromElement(this._element);(0,k.default)(this._element).one(l.default.TRANSITION_END,function(){a.setTransitioning(!1);(0,k.default)(a._element).removeClass(s.COLLAPSING).addClass(s.COLLAPSE).trigger(r.HIDDEN)}).emulateTransitionEnd(j)}},{key:"setTransitioning",value:function(a){this._isTransitioning=a}},{key:"dispose",value:function(){k.default.removeData(this._element,m);this._config=null;this._parent=null;this._element=null;this._triggerArray=null;this._isTransitioning=null}},{key:"_getConfig",value:function(a){a=f({},p,a);a.toggle=!!a.toggle;l.default.typeCheckConfig("collapse",a,q);return a}},{key:"_getDimension",value:function(){var a=(0,k.default)(this._element).hasClass(t.WIDTH);return a?t.WIDTH:t.HEIGHT}},{key:"_getParent",value:function(){var b=this,c;if(l.default.isElement(this._config.parent)){c=this._config.parent;if("undefined"!=typeof this._config.parent.jquery){c=this._config.parent[0]}}else{c=document.querySelector(this._config.parent)}var d="[data-toggle=\"collapse\"][data-parent=\"".concat(this._config.parent,"\"]"),e=[].slice.call(c.querySelectorAll(d));(0,k.default)(e).each(function(c,d){b._addAriaAndCollapsedClass(a._getTargetFromElement(d),[d])});return c}},{key:"_addAriaAndCollapsedClass",value:function(a,b){var c=(0,k.default)(a).hasClass(s.SHOW);if(b.length){(0,k.default)(b).toggleClass(s.COLLAPSED,!c).attr("aria-expanded",c)}}}],[{key:"_getTargetFromElement",value:function(a){var b=l.default.getSelectorFromElement(a);return b?document.querySelector(b):null}},{key:"_jQueryInterface",value:function(b){return this.each(function(){var c=(0,k.default)(this),d=c.data(m),g=f({},p,c.data(),"object"===e(b)&&b?b:{});if(!d&&g.toggle&&/show|hide/.test(b)){g.toggle=!1}if(!d){d=new a(this,g);c.data(m,d)}if("string"==typeof b){if("undefined"==typeof d[b]){throw new TypeError("No method named \"".concat(b,"\""))}d[b]()}})}},{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return p}}]);return a}();(0,k.default)(document).on(r.CLICK_DATA_API,u.DATA_TOGGLE,function(a){if("A"===a.currentTarget.tagName){a.preventDefault()}var b=(0,k.default)(this),c=l.default.getSelectorFromElement(this),d=[].slice.call(document.querySelectorAll(c));(0,k.default)(d).each(function(){var a=(0,k.default)(this),c=a.data(m),d=c?"toggle":b.data();v._jQueryInterface.call(a,d)})});k.default.fn.collapse=v._jQueryInterface;k.default.fn.collapse.Constructor=v;k.default.fn.collapse.noConflict=function(){k.default.fn.collapse=o;return v._jQueryInterface};a.default=v;return a.default});
"use strict";define ("theme_boost/index",["exports","jquery","./alert","./button","./carousel","./collapse","./dropdown","./modal","./popover","./scrollspy","./tab","./toast","./tooltip","./util"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.Tooltip=a.Toast=a.Tab=a.Scrollspy=a.Popover=a.Modal=a.Dropdown=a.Collapse=a.Carousel=a.Button=a.Alert=a.Util=void 0;var p=o(b),q=o(c),r=o(d),s=o(e),t=o(f),u=o(g),v=o(h),w=o(i),x=o(j),y=o(k),z=o(l),A=o(m),B=o(n);function o(a){return a&&a.__esModule?a:{default:a}}(function(){if("undefined"==typeof p.default){throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.")}var a=p.default.fn.jquery.split(" ")[0].split("."),b=9;if(a[0]<2&&a[1]<b||a[0]===1&&a[1]===b&&a[2]<1||a[0]>=4){throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}})();a.Util=B.default;a.Alert=q.default;a.Button=r.default;a.Carousel=s.default;a.Collapse=t.default;a.Dropdown=u.default;a.Modal=v.default;a.Popover=w.default;a.Scrollspy=x.default;a.Tab=y.default;a.Toast=z.default;a.Tooltip=A.default});
define ("theme_boost/pending",["jquery"],function(a){var b={alert:[{start:"close",end:"closed"}],carousel:[{start:"slide",end:"slid"}],collapse:[{start:"hide",end:"hidden"},{start:"show",end:"shown"}],dropdown:[{start:"hide",end:"hidden"},{start:"show",end:"shown"}],modal:[{start:"hide",end:"hidden"},{start:"show",end:"shown"}],popover:[{start:"hide",end:"hidden"},{start:"show",end:"shown"}],tab:[{start:"hide",end:"hidden"},{start:"show",end:"shown"}],toast:[{start:"hide",end:"hidden"},{start:"show",end:"shown"}],tooltip:[{start:"hide",end:"hidden"},{start:"show",end:"shown"}]};Object.keys(b).forEach(function(c){b[c].forEach(function(b){var d=b.start+".bs."+c,e=b.end+".bs."+c;a(document.body).on(d,function(){M.util.js_pending(e)});a(document.body).on(e,function(){M.util.js_complete(e)})})})});
"use strict";define ("theme_boost/sanitizer",["exports"],function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.sanitizeHtml=function(a,c,d){if(0===a.length){return a}if(d&&"function"==typeof d){return d(a)}for(var e=new window.DOMParser,f=e.parseFromString(a,"text/html"),g=Object.keys(c),h=[].slice.call(f.body.querySelectorAll("*")),j=function(a){var d=h[a],e=d.nodeName.toLowerCase();if(-1===g.indexOf(d.nodeName.toLowerCase())){d.parentNode.removeChild(d);return"continue"}var f=[].slice.call(d.attributes),i=[].concat(c["*"]||[],c[e]||[]);f.forEach(function(a){if(!b(a,i)){d.removeAttribute(a.nodeName)}})},k=0,l=h.length,m;k<l;k++){m=j(k,l);if("continue"===m)continue}return f.body.innerHTML};var c=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],d=/^aria-[\w-]*$/i,e=a.DefaultWhitelist={"*":["class","dir","id","lang","role",d],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},f=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,g=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function b(a,b){var d=a.nodeName.toLowerCase();if(-1!==b.indexOf(d)){if(-1!==c.indexOf(d)){return!!(a.nodeValue.match(f)||a.nodeValue.match(g))}return!0}for(var e=b.filter(function(a){return a instanceof RegExp}),h=0,j=e.length;h<j;h++){if(d.match(e[h])){return!0}}return!1}});
function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("theme_snap/util",["jquery"],function(a){var b=null;return{whenTrue:function whenTrue(a,b,c,d,e){d=!d?10:d;e=!e?0:e+1;if(e>d){if(c){b()}return}if(a()){b()}else{var f=this;window.setTimeout(function(){f.whenTrue(a,b,c,d,e)},200)}},scrollToElement:function scrollToElement(b){var c=a("#mr-nav").outerHeight();if(!b.length){return}if(1<b.length){return}var d=b.offset().top-c;a("html, body").animate({scrollTop:d},600)},supportsSessionStorage:function supportsSessionStorage(){if(null!==b){return b}if("object"===_typeof(window.sessionStorage)){try{window.sessionStorage.setItem("sessionStorage",1);window.sessionStorage.removeItem("sessionStorage");b=!0}catch(a){b=!1}}return b}}});
define ("theme_snap/pm_course_favorites",["jquery","core/ajax","core/notification","core/log","theme_snap/model_view","theme_snap/ajax_notification"],function(a,b,c,d,e,f){return function(){d.enableAll(!0);var c=function(b,c){var d=a.Deferred();e(c,"theme_snap/course_cards");a(c).trigger("modelUpdate",[b,function callback(){var b=a(c).find(".favoritetoggle");a(b).removeClass("ajaxing");a(b).focus()}]);a(c).on("modelUpdated",function(a){d.resolve(a)});return d.promise()},g=function(b){return parseInt(a(b).find(".coursecard-body").data("courseid"))},h=function(b,c){if(c===void 0){c=!0}var d=a(b).find(".coursecard-coursename").html();if(c){d=d.toLowerCase()}return d},i=function(a,b){if(0===b.length){return-1}var c=[],d={};b.each(function(){d={title:h(this),card:this};c.push(d)});d={title:h(a),card:a};c.push(d);c.sort(function(c,a){var b=g(c.card),d=g(a.card);if(c.title===a.title){if(b===d){return 0}return b>d?1:-1}return c.title>a.title?1:-1});return c.indexOf(d)},j=function(b,c,e,f,g){var h=a(c),j=i(b,h),k=j+1;d.debug("Moving card element into position "+k+" of list (size = "+h.length+") : "+c);if(0<k){if(k<=h.length){d.debug("Moving card before position "+k+"  using selector "+c);a(c).eq(j).before(b)}else{d.debug("Moving card after position "+h.length+" using selector "+c);a(c).eq(h.length-1).after(b)}}else{d.debug("Destination "+c+" empty");if(f){d.debug("prepending to "+e);a(e).prepend(b)}else{d.debug("appending to "+e);a(e).append(b)}}if("function"==typeof g){g()}},k=function(b,c){var d,e=a("#snap-pm-courses-current .coursecard:not([data-hidden=\"true\"])").length;if(!0===a(b).data("hidden")&&0<e){d="#snap-pm-courses-hidden-cards";a("#snap-pm-courses-hidden").addClass("state-visible");a("#snap-pm-courses-hidden-cards").collapse("show")}else{window.console.log("not a hidden card");d="#snap-pm-courses-current-cards"}j(b,d+" .coursecard:not(.favorited)",d,!1,c)},l=function(d){if(a(d).hasClass("ajaxing")){return}a(d).addClass("ajaxing");var e="true"===a(d).attr("aria-pressed")?0:1,g=a(a(d).parents(".coursecard")[0]),h=a(g).data("shortname"),i=function(i){return b.call([{methodname:"theme_snap_course_card",args:{courseshortname:h,favorited:e},fail:function fail(b){a(d).removeClass("ajaxing");f.ifErrorShowBestMsg(b)}}],!0,!0)[0].then(function(a){return c(a,g)}).then(function(){M.util.js_complete(i)})},l;if(1==e){l="favourite_"+new Date().getTime().toString(16)+Math.floor(1e3*Math.random());M.util.js_pending(l);j(g,"#snap-pm-courses-current-cards .coursecard.favorited","#snap-pm-courses-current-cards",!0,function(){i(l)})}else{l="unfavourite_"+new Date().getTime().toString(16)+Math.floor(1e3*Math.random());M.util.js_pending(l);k(g,function(){i(l)})}};a("#snap-pm").on("click",".favoritetoggle",function(a){a.preventDefault();a.stopPropagation();l(this)})}});
function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("theme_snap/section_asset_management",["jquery","core/log","core/ajax","core/str","core/templates","core/notification","theme_snap/util","theme_snap/ajax_notification","theme_snap/footer_alert","core/event","core/fragment"],function(a,b,c,d,e,f,g,h,i,j,k){var l=this,m=[],n,o=!1,p,q=[],r=null,s=null,t=function(){if("weeks"==l.courseConfig.format||"topics"==l.courseConfig.format){a("#course-toc .chapter-title").click(function(b){var c=a(b.target),d=c.attr("href");if("undefined"!=typeof d&&0<d.length){y(d.split("#section-")[1],0)}});a("#toc-searchables li a").click(function(b){var c=a(b.target),d=c.attr("href").split("&"),e=d[0],f=d[1]||null;e=e.split("#section-")[1];y(e,f)})}},u=function(){if("weeks"==l.courseConfig.format||"topics"==l.courseConfig.format){a(".section_footer .next_section, .section_footer .icon-arrow-right, .section_footer .previous_section, .section_footer .icon-arrow-left").click(function(b){var c=a(b.target),d=c.attr("section-number");if("undefined"!=typeof d&&0<d.length){y(d,0)}});a(".section_footer .text").click(function(b){var c=a(b.target),d=c.find(".nav_guide").attr("section-number");if("undefined"!=typeof d&&0<d.length){y(d,0)}})}},v=function(b){a("#toc-search-results").html("");var c=a("#"+b.replace("#",""));g.scrollToElement(c);var d=a("#searchpin");if(!d.length){d=a("<i id=\"searchpin\"></i>")}a(c).find(".instancename").prepend(d);a(c).attr("tabindex","-1").focus();a("#course-toc").removeClass("state-visible")},w=function(){var b;if(1===m.length){var c=a(m[0]).find(".snap-asset-link .instancename").html();c=c||M.util.get_string("pluginname","label",c);b=M.util.get_string("moving","theme_snap",c)}else{b=M.util.get_string("movingcount","theme_snap",m.length)}i.setTitle(b)},x=function(b){if("undefined"!=typeof m&&0<m.length){a(".section-drop").each(function(){var c=M.util.get_string("movingdropsectionhelp","theme_snap",{moving:b,before:a(this).data("title")});a(this).html(c)});i.setSrNotice(M.util.get_string("movingstartedhelp","theme_snap",b))}},y=function(b,c){var d=a("#section-"+b);if(0==d.length&&-1==q.indexOf(b)){q.push(b);var e={courseid:l.courseConfig.id,section:b};a(".sk-fading-circle").show();a(".course-content ."+l.courseConfig.format+" li[id^=\"section-\"]").hide();k.loadFragment("theme_snap","section",l.courseConfig.contextid,e).done(function(d,e){var f=a(d);z(b,f,c,e);var g=f.find("li.snap-activity.modtype_folder");a.each(g,function(b,c){var d=a(c).find("div.contentwithoutlink div.snap-assettype");if(0<d.length){if(0==a(c).find("div.activityinstance div.snap-header-card .asset-type").length){var e=a(c).find("div.activityinstance div.snap-header-card");d.prependTo(e)}}})})}},z=function(b,c,d,f){var g=a(".course-content ."+l.courseConfig.format),h=[];g.find("li[id^=section-]").each(function(){h.push(parseInt(a(this).attr("id").split("section-")[1]))});var i=a("<div></div>");e.replaceNodeContents(i,c,"");i.find(".snap-resource-long .contentafterlink .snap-resource-card-fadeout").each(function(){a(this).appendTo(a(this).prevAll(".snap-resource-long .contentafterlink .no-overflow"))});i.find(".snap-header-card .snap-header-card-icons .disabled-snap-asset-completion-tracking").remove();if(0<h.length){var k=h.reduce(function(a,c){return Math.abs(c-b)<Math.abs(a-b)?c:a});if(k>b){g.find("#section-"+k).before(i.find("li[id^=\"section-\"]"))}else{g.find("#section-"+k).after(i.find("li[id^=\"section-\"]"))}}else{a(".sk-fading-circle").after(i)}e.runTemplateJS(f);a(".sk-fading-circle").hide();j.notifyFilterContentUpdated(a(".course-content ."+l.courseConfig.format));var m=g.find("li[id^=\"section-\"]");m.removeClass("state-visible");var n="#section-"+b;a(n).addClass("state-visible");if("top"==l.courseConfig.toctype&&"topics"==l.courseConfig.format&&0<b){var o=a(n).find(".sectionname").html(),p=a(".chapter-title"),q=0;a.each(p,function(c,d){if(a(d).attr("href").split("#section-")[1]==b){q=c}});a(n).find(".sectionname").html(o);a(n).find(".sectionnumber").html(q+".")}m.show();a(n).find(".section_footer .next_section, .section_footer .icon-arrow-right, .section_footer .previous_section, .section_footer .icon-arrow-left").click(function(b){var c=a(b.target),d=c.attr("section-number");if("undefined"!=typeof d&&0<d.length){y(d,0)}});a(n).find(".section_footer .text").click(function(b){var c=a(b.target),d=c.find(".nav_guide").attr("section-number");if("undefined"!=typeof d&&0<d.length){y(d,0)}});a(n+" .section-modchooser-link").click(function(){var b=a(this).attr("data-section");a(".snap-modchooser-addlink").each(function(){var c=this.href.replace(/(section=)[0-9]+/ig,"$1"+b);a(this).attr("href",c)})});if(0!=d&&"undefined"!=typeof d){v(d)}var r=a("#region-main .section-moving").find(".sectionname").text();if("undefined"!=typeof r&&0<r.length){x(r)}var s=a("#region-main .section-moving").attr("id");if("undefined"!=typeof s&&0<s.length){a("#section-"+(parseInt(s.split("section-")[1])+1)+" .snap-drop.section-drop").removeClass("partial-render")}a("#course-toc #chapters li").removeClass("snap-visible-section");a("#course-toc .chapter-title[href=\"#section-"+b+"\"]").parent("li").addClass("snap-visible-section");a(n).find("ul.section").append("<li class=\"snap-drop asset-drop\"><div class=\"asset-wrapper\"><a href=\"#\">"+M.util.get_string("movehere","theme_snap")+"</a></div></li>")};return{init:function init(j){l.courseConfig=j.courseConfig;p=new function AjaxTracker(){var c={};this.start=function(d,e,f){if(this.ajaxing(d)){b.debug("Skipping ajax request for "+d+", AJAX already in progress");return!1}M.util.js_pending(d);c[d]={trigger:e,subSelector:f};if(e){if(f){a(e).find(f).addClass("ajaxing")}else{a(e).addClass("ajaxing")}}return!0};this.ajaxing=function(a){return-1<M.util.pending_js.indexOf(a)};this.complete=function(b){var d,e;if(c[b]){d=c[b].trigger;e=c[b].subSelector}if(d){if(e){a(d).find(e).removeClass("ajaxing")}else{a(d).removeClass("ajaxing")}}delete c[b];M.util.js_complete(b)}};var k=function(b){if(l.courseConfig.partialrender){return parseInt(a(b).attr("id").split("section-")[1])}else{return parseInt(a(b).attr("id").replace("section-",""))}},v=function(b){return k(a(b).parents("li.section.main")[0])},z=function(){a("body").removeClass("snap-move-inprogress");a("body").removeClass("snap-move-section");a("body").removeClass("snap-move-asset");i.hideAndReset();a(".section-moving").removeClass("section-moving");a(".asset-moving").removeClass("asset-moving");a(".snap-asset a").removeAttr("tabindex");a(".snap-asset button").removeAttr("disabled");a(".js-snap-asset-move").removeAttr("checked");m=[];if(l.courseConfig.partialrender){a(".snap-drop.section-drop").addClass("partial-render")}},A=function(){var b=a(n).find(".instancename").html();i.removeAjaxLoading();i.setTitle(M.util.get_string("movefailed","theme_snap",b));window.setTimeout(function(){z(!1)},2e3)},B=function(a){var b=m.indexOf(a);if(-1<b){m.splice(b,1)}w()},C=function(c,d,e){if(o){b.debug("Skipping ajax request, one already in progress");return}i.addAjaxLoading();c.sesskey=M.cfg.sesskey;c.courseId=j.courseConfig.id;c.field="move";b.debug("Making course/rest.php request",c);var f=a.ajax({type:"POST",async:!0,data:c,url:M.cfg.wwwroot+j.courseConfig.ajaxurl});f.done(function(a){h.ifErrorShowBestMsg(a).done(function(a){if(a){b.debug("Ajax request fail");A()}else{b.debug("Ajax request successful");if(d){d()}if(e){if("resource"===c.class){z()}}}})});f.fail(function(){A()});if(e){f.always(function(){o=!1;i.removeAjaxLoading()})}},D=function(b){if(l.courseConfig.partialrender){return a("#course-toc #chapters > li a[href=\"#section-"+b+"\"]").text()}else{return a("#chapters li:nth-of-type("+(b+1)+") .chapter-title").html()}},E=function(b){var c=a.Deferred(),d,f;if(!b){if(l.courseConfig.partialrender){b="#course-toc #chapters > li a"}else{b="#region-main .course-content > ul li.section"}d=a(b);f=d.length}else{d=a(b);if(l.courseConfig.partialrender){var g=a("#course-toc #chapters > li a")}else{var g=a("#region-main .course-content > ul li.section")}f=g.length}var h=0;a.each(d,function(b,g){if(l.courseConfig.partialrender){var i=a(g).attr("href"),j;if(_typeof(i)!=="undefined"&&!1!==i){j=parseInt(a(g).attr("href").split("#section-")[1])}else{j=parseInt(a(g).attr("id").split("section-")[1])}}else{var j=k(g)}var m=j-1,n=j+1,o=!1,p=!1,q,r;if(-1<m){if(l.courseConfig.partialrender){q=a("#section-"+m).hasClass("draft")}else{q=a("#section-"+m).hasClass("hidden")}r=q?" dimmed_text":"";o={section:m,title:D(m),classes:r}}if(n<f){if(l.courseConfig.partialrender){q=a("#section-"+n).hasClass("draft")}else{q=a("#section-"+n).hasClass("hidden")}r=q?" dimmed_text":"";p={section:n,title:D(n),classes:r}}var s={previous:o,next:p};e.render("theme_snap/course_section_navigation",s).done(function(b){var e=a("#section-"+j+" .section_footer");if(0<e.length){e.replaceWith(b)}h++;if(h===d.length){c.resolve()}})});return c.promise()},F=function(a,b,c){if(c>=a.length){var d=c-a.length+1;while(d--){a.push(void 0)}}a.splice(c,0,a.splice(b,1)[0]);return a},G=function(b,c,d,e){if(j.courseConfig.partialrender){var f=[],g=[];if(0!=b&&0!=c){a.each(a("#course-toc #chapters > li a"),function(b,c){g.push(a(c).attr("href").split("#section-")[1])});var h=F(g,b,c)}else{g=d;d.splice(e,1);var h=d}a.each(a("#region-main .course-content > ul li.section"),function(b,c){var d=a(c).attr("id").split("section-")[1],e=h.indexOf(d),g=D(e),i=g;a(c).attr("id","section-"+e);if("top"==l.courseConfig.toctype&&"topics"==l.courseConfig.format&&0<e){i="<span class='sectionnumber'> ".concat(e,".</span>").concat(g)}a("#section-"+e+" .content .sectionname").html(i);f.push(e);a(c).find("a.section-modchooser-link").attr("data-section",e)});q=f}else{a.each(a("#region-main .course-content > ul li.section"),function(b,c){a(c).attr("id","section-"+b);var d=D(b),e=d;if("top"==l.courseConfig.toctype&&"topics"==l.courseConfig.format&&0<b){e="<span class='sectionnumber'></span>".concat(d)}a("#section-"+b+" .content .sectionname").html(e);a(this).find("a.section-modchooser-link").attr("data-section",b)})}E().done(function(){if(j.courseConfig.partialrender){W()}})},H=function(d,g){d.preventDefault();var k=v(g),m=a("#section-"+k),n=m.find(".sectionname").text(),o=function(){if(!p.start("section_delete",g)){return}var d=M.util.get_string("deletingsection","theme_snap",n);i.addAjaxLoading("");i.show();i.setTitle(d);var f={courseshortname:j.courseConfig.shortname,action:"delete",sectionnumber:k,value:1,loadmodules:!0};b.debug("Making course/rest.php section delete request",f);var o=c.call([{methodname:"theme_snap_course_sections",args:f}],!0,!0),q=[];a.each(a("#course-toc #chapters > li a"),function(b,c){q.push(a(c).attr("href").split("#section-")[1])});o[0].done(function(b){e.render("theme_snap/course_toc",b.toc).done(function(b){a("#course-toc").html(a(b).html());a(document).trigger("snapTOCReplaced");m.remove();G(0,0,q,k);if(l.courseConfig.partialrender){var c=a(".chapter-title"),d=[];a.each(c,function(b,c){d.push(a(c).attr("href").split("#section-")[1])});var e=d.reduce(function(a,b){return Math.abs(b-k)<Math.abs(a-k)?b:a});location.hash="section-"+e;if(1==a("li#section-"+e).length){j.showSection()}else{y(e,0)}}else{if(k>=a(".course-content > ul li.section").length){location.hash="section-"+(k-1)}j.showSection()}p.complete("section_delete")}).always(function(){i.hideAndReset()}).fail(function(){p.complete("section_delete")})}).fail(function(a){h.ifErrorShowBestMsg(a);i.hideAndReset();p.complete("section_delete")})},q=M.util.get_string("confirm","moodle"),r=M.util.get_string("confirmdeletesection","moodle",n),s=M.util.get_string("deletesectionconfirm","theme_snap"),t=M.util.get_string("cancel","moodle");f.confirm(q,r,s,t,o)},I=function(g,e){g.preventDefault();var j=a(a(e).parents(".snap-asset")[0]),k=+j[0].id.replace("module-",""),l=j.find(".instancename").text().trim(),m=a(e).data("action"),n="",o="",q="",t="",u="asset_"+m;if(p.ajaxing(u)){return}var v=function(){if(!p.start(u,j,".snap-edit-asset-more")){return}c.call([{methodname:"core_course_edit_module",args:{action:m,sectionreturn:0,id:k}}],!0,!0)[0].done(function(c){h.ifErrorShowBestMsg(c,q,t).done(function(d){p.complete(u);if(d){b.debug("Ajax request fail")}else{b.debug("Ajax request successful");r=null;s=null;if("delete"===m){j.remove();a("#toc-searchables li[data-id=\""+k+"\"]").remove()}else if("show"===m){j.removeClass("draft");j.removeClass("stealth")}else if("hide"===m){j.removeClass("stealth");j.addClass("draft")}else if("duplicate"===m){j.replaceWith(c)}else if("stealth"===m){j.addClass("stealth");j.removeClass("draft")}}})}).fail(function(a){h.ifErrorShowBestMsg(a,q,t).done(function(){p.complete(u)})}).always(function(){i.hideAndReset()})},w=function(){if("duplicate"===m){n="action:duplicateasset";o="error:failedtoduplicateasset"}else if("show"===m||"hide"===m){n="action:changeassetvisibility";o="error:failedtochangeassetvisibility"}else if("delete"===m){n="action:deleteasset";o="error:failedtodeleteasset"}return d.get_strings([{key:n,component:"theme_snap"},{key:o,component:"theme_snap"}])};w().then(function(a){q=a[0];t=a[0];if("delete"===m){var b="",c={type:M.util.get_string("pluginname",j.attr("class").match(/modtype_([^\s]*)/)[1])};if(""!==l){c.name=l;b=M.util.get_string("deletechecktypename","moodle",c)}else{b=M.util.get_string("deletechecktype","moodle",c)}var d=M.util.get_string("confirm","moodle"),e=M.util.get_string("deleteassetconfirm","theme_snap",c.type),g=M.util.get_string("cancel","moodle");f.confirm(d,b,e,g,v)}else{v()}})},J=function(c){var d={};b.debug("Move objects",m);d.class="resource";w();n=m.shift();d.id=+n.id.replace("module-","");if(c&&!a(c).hasClass("snap-drop")){d.beforeId=+a(c)[0].id.replace("module-","")}else{d.beforeId=0}if("page-site-index"===document.body.id){d.sectionId=1}else{if(c){d.sectionId=v(c)}else{d.sectionId=v(n)}}if(0<m.length){C(d,function(){a(c).before(a(n));J(c)},!1)}else{C(d,function(){a(c).before(a(n))},!0)}},K=function(b){var d=v(b),f=k(m[0]),g=f<d?d-1:d;C({class:"section",id:f,value:g},function(){c.call([{methodname:"theme_snap_course_toc_chapters",args:{courseshortname:j.courseConfig.shortname},done:function done(b){e.render("theme_snap/course_toc_chapters",b.chapters).done(function(b){a("#chapters").replaceWith(b);a("#section-"+d).before(a("#section-"+f));G(f,g,[],null);location.hash="section-"+g;j.showSection();z()})},fail:function fail(a){h.ifErrorShowBestMsg(a);z()}}],!0,!0)},!0)},L=function(){var b=".snap-asset-actions .js_snap_hide, ";b+=".snap-asset-actions .js_snap_show, ";b+=".snap-asset-actions .js_snap_delete, ";b+=".snap-asset-actions .js_snap_duplicate,";b+=".snap-asset-actions .js_snap_stealth";a(document).on("click",b,function(a){I(a,this)})},N=function(b,d){a("#region-main").on("click",".snap-section-editing.actions .snap-"+b,function(f){f.stopPropagation();f.preventDefault();var g=this,i=function(a){this.message="Invalid section action: "+a;this.name="invalidActionException"};if(-1===["visibility","highlight"].indexOf(b)){throw new i(b)}if(!p.start("section_"+b,g)){return}var k,m=!0;if("visibility"===b){k=a(this).hasClass("snap-hide")?0:1;if(r&&0<r.length&&s&&0<s.length){m=!1}}else{k="true"===a(this).attr("aria-pressed")?0:1}var n=v(this),o="#section-"+n+" .snap-section-editing"+" .snap-"+b,q=c.call([{methodname:"theme_snap_course_sections",args:{courseshortname:j.courseConfig.shortname,action:b,sectionnumber:n,value:k,loadmodules:m}}],!0,!0);q[0].fail(function(a){var c,d;if("visibility"===b){c=M.util.get_string("error:failedtochangesectionvisibility","theme_snap");d=M.util.get_string("action:changesectionvisibility","theme_snap")}else{c=M.util.get_string("error:failedtohighlightsection","theme_snap");d=M.util.get_string("action:highlightsectionvisibility","theme_snap")}h.ifErrorShowBestMsg(a,d,c).done(function(){p.complete("section_"+b)})}).always(function(){a(g).removeClass("ajaxing")}).done(function(c){return e.render("theme_snap/course_action_section",c.actionmodel).then(function(b){a(o).replaceWith(b);a(o).focus();if(!m){if(r&&0<r.length&&0===c.toc.modules.length){c.toc.modules=r}if(s&&0<s.length){var d=s.slice(0);a.each(c.toc.chapters.chapters,function(a){c.toc.chapters.chapters[a].progress=d.shift()})}}if(m){r=c.toc.modules;s=[];a.each(c.toc.chapters.chapters,function(a,b){s.push(b.progress)})}return e.render("theme_snap/course_toc",c.toc)}).then(function(c){a("#course-toc").html(a(c).html());a(document).trigger("snapTOCReplaced");if(d&&"function"==typeof d){var e=d(n,k);if(l.courseConfig.partialrender){if("function"==typeof d){p.complete("section_"+b)}}else{if(e&&"function"==typeof e.always){e.always(function(){p.complete("section_"+b)})}else{p.complete("section_"+b)}}}else{p.complete("section_"+b)}})})})},O=function(){N("highlight",function(b){a("#section-"+b).toggleClass("current");var c=a("li.section.main").not("#section-"+b).not("#section-0").removeClass("current");c.each(function(){var b=a(this).find(".snap-highlight"),c=v(b),d=a(b).attr("href").replace(/(marker=)[0-9]+/ig,"$1"+c);a(b).attr("href",d).attr("aria-pressed","false")})})},P=function(){a(document).on("click",".snap-section-editing.actions .snap-delete",function(a){H(a,this)})},Q=function(){N("visibility",function manageHiddenClass(b,c){if(0===c){a("#section-"+b).addClass("hidden")}else{a("#section-"+b).removeClass("hidden");a("#section-"+b+" .stealth-section-hidden").removeClass("stealth");a("#section-"+b+" .stealth-section-hidden").removeClass("stealth-section-hidden")}var d=["#section-"+(b-1),"#section-"+(b+1)].join(",");return E(d)})},R=function(){i.show(function(a){a.preventDefault();z()})},S=function(){a("#region-main").on("click",".snap-section-editing.actions .snap-move",function(c){c.stopPropagation();c.preventDefault();a("body").addClass("snap-move-inprogress");R();var d=v(this);b.debug("Section is",d);var e=a("#section-"+d),f=e.find(".sectionname").text();b.debug("Moving this section",f);m=[e];a(".section-moving").removeClass("section-moving");e.addClass("section-moving");a("a[href=\"#section-"+d+"\"]").parent("li").addClass("section-moving");a("body").addClass("snap-move-section");if(l.courseConfig.partialrender){a("#section-"+(d+1)+" .snap-drop.section-drop").removeClass("partial-render")}var g=M.util.get_string("moving","theme_snap",f);i.setTitle(g);x(f)})},T=function(){if("page-site-index"===document.body.id){a("#region-main .sitetopic ul.section").append("<li class=\"snap-drop asset-drop\"><div class=\"asset-wrapper\"><a href=\"#\">"+M.util.get_string("movehere","theme_snap")+"</a></div></li>")}else{a("li.section .content ul.section").append("<li class=\"snap-drop asset-drop\"><div class=\"asset-wrapper\"><a href=\"#\">"+M.util.get_string("movehere","theme_snap")+"</a></div></li>")}},U=function(){a("#region-main").on("change",".js-snap-asset-move",function(c){c.stopPropagation();var d=a(this).parents(".snap-asset")[0],e=a(d).parents("ul.section")[0],f=a(e).find("li.snap-drop.asset-drop");a(e).append(f);if(0===m.length){var g=a(d).find(".snap-asset-link .instancename").html();b.debug("Moving this asset",g);var h=a(d).attr("class"),i=/(?=snap-mime)([a-z0-9\-]*)/,j=i.exec(h);h="";if(j){h=j.join(" ")}b.debug("Moving this class",h);a(d).addClass("asset-moving");a(".snap-asset button").attr("disabled","disabled");a(d).find("button").removeAttr("disabled");a(".snap-asset .snap-asset-content a").attr("tabindex","-1");a(d).find("a").removeAttr("tabindex");a(d).find(".js-snap-asset-move").prop("checked","checked");a("body").addClass("snap-move-inprogress");a("body").addClass("snap-move-asset")}if(a(this).prop("checked")){m.push(d);a(d).find("a").removeAttr("tabindex");a(d).find("button").removeAttr("disabled");a(d).addClass("asset-moving")}else{B(d);a(d).find(".snap-asset-content a").attr("tabindex","-1");a(d).find("button").attr("disabled","disabled");a(d).removeClass("asset-moving");if(0===m.length){z()}}R();w()})},V=function(){a(document).on("click",".snap-move-note, .snap-drop",function(c){b.debug("Snap drop clicked",c);if(m){c.stopPropagation();c.preventDefault();if(a("body").hasClass("snap-move-section")){K(this)}else{var d;if(a(this).hasClass("snap-drop")){d=this}else{d=a(this).closest(".snap-asset")}J(d)}}})},W=function(){t();u()},X=function(){S();Q();O();P();U();V();L();T();if(j.courseConfig.partialrender){W()}a("body").addClass("snap-course-listening")},Y=function(){if(M.course&&M.course.resource_toolbox){M.course.resource_toolbox.handle_resource_dim=function(a,b,c){return"hide"===c?0:1}}},Z=function(){if(0===a(".snap-section-editing.actions").length){return}var b=a("#region-main");if(!p.start("section_toc",b)){return}var d=c.call([{methodname:"theme_snap_course_sections",args:{courseshortname:j.courseConfig.shortname,action:"toc",sectionnumber:0,value:0,loadmodules:0}}],!0,!0);d[0].fail(function(a){var b,c;b=M.util.get_string("error:failedtotoc","theme_snap");c=M.util.get_string("action:sectiontoc","theme_snap");h.ifErrorShowBestMsg(a,c,b).done(function(){p.complete("section_toc")})}).always(function(){a(b).removeClass("ajaxing")}).done(function(b){r=b.toc.modules;s=[];a.each(b.toc.chapters.chapters,function(a,b){s.push(b.progress)});p.complete("section_toc")})};(function initialise(){X();Z();g.whenTrue(function(){return M.course&&M.course.init_section_toolbox},function(){Y()},!0)})()},renderAndFocusSection:function renderAndFocusSection(a,b){y(a,b)},setTocObserver:function setTocObserver(){t()}}});
function _typeof(e){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(e){return typeof e}}else{_typeof=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return _typeof(e)}(function(e){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module){module.exports=e()}else if("function"==typeof define&&define.amd){define ("theme_snap/progressbar",[],e)}else{var t;if("undefined"!=typeof window){t=window}else if("undefined"!=typeof global){t=global}else if("undefined"!=typeof self){t=self}else{t=this}t.ProgressBar=e()}})(function(){var e;return function p(d,e,t){function r(i,o){if(!e[i]){if(!d[i]){var s="function"==typeof require&&require;if(!o&&s)return s(i,!0);if(n)return n(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var u=e[i]={exports:{}};d[i][0].call(u.exports,function(t){var e=d[i][1][t];return r(e?e:t)},u,u.exports,p,d,e,t)}return e[i].exports}for(var n="function"==typeof require&&require,a=0;a<t.length;a++){r(t[a])}return r}({1:[function(t,o,r){(function(){var t=this||Function("return this")(),a=function(){'use strict';var _,g,m="linear",f=Date.now?Date.now:function(){return+new Date},y="undefined"!=typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:f;if("undefined"!=typeof window){g=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame||setTimeout}else{g=setTimeout}function a(){}function n(e,t){for(var o in e){if(Object.hasOwnProperty.call(e,o)){t(o)}}}function i(e,t){n(t,function(o){e[o]=t[o]});return e}function s(e,t){n(t,function(o){if("undefined"==typeof e[o]){e[o]=t[o]}})}function p(e,t,o,r,a,n,i){var s=e<n?0:(e-n)/a,p,u,d;for(p in t){if(t.hasOwnProperty(p)){u=i[p];d="function"==typeof u?u:_[u];t[p]=l(o[p],r[p],d,s)}}return t}function l(e,t,o,r){return e+(t-e)*o(r)}function u(e,t){var o=h.prototype.filter,r=e._filterArgs;n(o,function(a){if("undefined"!=typeof o[a][t]){o[a][t].apply(e,r)}})}var w,S,x,C;function d(e,t,o,r,a,n,i,s,l,d,c){w=t+o+r;S=Math.min(c||y(),w);x=S>=w;C=r-(w-S);if(e.isPlaying()){if(x){l(i,e._attachment,C);e.stop(!0)}else{e._scheduleId=d(e._timeoutHandler,1e3/60);u(e,"beforeTween");if(S<t+o){p(1,a,n,i,1,1,s)}else{p(S,a,n,i,r,t+o,s)}u(e,"afterTween");l(a,e._attachment,C)}}}function c(e,t){var o={},r=_typeof(t);if("string"===r||"function"===r){n(e,function(e){o[e]=t})}else{n(e,function(e){if(!o[e]){o[e]=t[e]||m}})}return o}function h(e,t){this._currentState=e||{};this._configured=!1;this._scheduleFunction=g;if("undefined"!=typeof t){this.setConfig(t)}}h.prototype.tween=function(e){if(this._isTweening){return this}if(e!==void 0||!this._configured){this.setConfig(e)}this._timestamp=y();this._start(this.get(),this._attachment);return this.resume()};h.prototype.setConfig=function(e){e=e||{};this._configured=!0;this._attachment=e.attachment;this._pausedAtTime=null;this._scheduleId=null;this._delay=e.delay||0;this._start=e.start||a;this._step=e.step||a;this._finish=e.finish||a;this._duration=e.duration||500;this._currentState=i({},e.from)||this.get();this._originalState=this.get();this._targetState=i({},e.to)||this.get();var t=this;this._timeoutHandler=function(){d(t,t._timestamp,t._delay,t._duration,t._currentState,t._originalState,t._targetState,t._easing,t._step,t._scheduleFunction)};var o=this._currentState,r=this._targetState;s(r,o);this._easing=c(o,e.easing||m);this._filterArgs=[o,this._originalState,r,this._easing];u(this,"tweenCreated");return this};h.prototype.get=function(){return i({},this._currentState)};h.prototype.set=function(e){this._currentState=e};h.prototype.pause=function(){this._pausedAtTime=y();this._isPaused=!0;return this};h.prototype.resume=function(){if(this._isPaused){this._timestamp+=y()-this._pausedAtTime}this._isPaused=!1;this._isTweening=!0;this._timeoutHandler();return this};h.prototype.seek=function(e){e=Math.max(e,0);var t=y();if(0===this._timestamp+e){return this}this._timestamp=t-e;if(!this.isPlaying()){this._isTweening=!0;this._isPaused=!1;d(this,this._timestamp,this._delay,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction,t);this.pause()}return this};h.prototype.stop=function(e){this._isTweening=!1;this._isPaused=!1;this._timeoutHandler=a;(t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.oCancelAnimationFrame||t.msCancelAnimationFrame||t.mozCancelRequestAnimationFrame||t.clearTimeout)(this._scheduleId);if(e){u(this,"beforeTween");p(1,this._currentState,this._originalState,this._targetState,1,0,this._easing);u(this,"afterTween");u(this,"afterTweenEnd");this._finish.call(this,this._currentState,this._attachment)}return this};h.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused};h.prototype.setScheduleFunction=function(e){this._scheduleFunction=e};h.prototype.dispose=function(){for(var e in this){if(this.hasOwnProperty(e)){delete this[e]}}};h.prototype.filter={};h.prototype.formula={linear:function linear(e){return e}};_=h.prototype.formula;i(h,{now:y,each:n,tweenProps:p,tweenProp:l,applyFilter:u,shallowCopy:i,defaults:s,composeEasingObject:c});if("function"==typeof SHIFTY_DEBUG_NOW){t.timeoutHandler=d}if("object"===_typeof(r)){o.exports=h}else if("function"==typeof e&&e.amd){e(function(){return h})}else if("undefined"==typeof t.Tweenable){t.Tweenable=h}return h}();(function(){a.shallowCopy(a.prototype.formula,{easeInQuad:function easeInQuad(e){return Math.pow(e,2)},easeOutQuad:function easeOutQuad(e){return-(Math.pow(e-1,2)-1)},easeInOutQuad:function easeInOutQuad(e){if(1>(e/=.5)){return .5*Math.pow(e,2)}return-.5*((e-=2)*e-2)},easeInCubic:function easeInCubic(e){return Math.pow(e,3)},easeOutCubic:function easeOutCubic(e){return Math.pow(e-1,3)+1},easeInOutCubic:function easeInOutCubic(e){if(1>(e/=.5)){return .5*Math.pow(e,3)}return .5*(Math.pow(e-2,3)+2)},easeInQuart:function easeInQuart(e){return Math.pow(e,4)},easeOutQuart:function easeOutQuart(e){return-(Math.pow(e-1,4)-1)},easeInOutQuart:function easeInOutQuart(e){if(1>(e/=.5)){return .5*Math.pow(e,4)}return-.5*((e-=2)*Math.pow(e,3)-2)},easeInQuint:function easeInQuint(e){return Math.pow(e,5)},easeOutQuint:function easeOutQuint(e){return Math.pow(e-1,5)+1},easeInOutQuint:function easeInOutQuint(e){if(1>(e/=.5)){return .5*Math.pow(e,5)}return .5*(Math.pow(e-2,5)+2)},easeInSine:function easeInSine(e){return-Math.cos(e*(Math.PI/2))+1},easeOutSine:function easeOutSine(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function easeInOutSine(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function easeInExpo(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function easeOutExpo(e){return 1===e?1:-Math.pow(2,-10*e)+1},easeInOutExpo:function easeInOutExpo(e){if(0===e){return 0}if(1===e){return 1}if(1>(e/=.5)){return .5*Math.pow(2,10*(e-1))}return .5*(-Math.pow(2,-10*--e)+2)},easeInCirc:function easeInCirc(e){return-(Math.sqrt(1-e*e)-1)},easeOutCirc:function easeOutCirc(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function easeInOutCirc(e){if(1>(e/=.5)){return-.5*(Math.sqrt(1-e*e)-1)}return .5*(Math.sqrt(1-(e-=2)*e)+1)},easeOutBounce:function easeOutBounce(e){if(e<1/2.75){return 7.5625*e*e}else if(e<2/2.75){return 7.5625*(e-=1.5/2.75)*e+.75}else if(e<2.5/2.75){return 7.5625*(e-=2.25/2.75)*e+.9375}else{return 7.5625*(e-=2.625/2.75)*e+.984375}},easeInBack:function easeInBack(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function easeOutBack(e){var t=1.70158;return(e=e-1)*e*((t+1)*e+t)+1},easeInOutBack:function easeInOutBack(e){var t=1.70158;if(1>(e/=.5)){return .5*(e*e*(((t*=1.525)+1)*e-t))}return .5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},elastic:function elastic(e){return-1*Math.pow(4,-8*e)*Math.sin((6*e-1)*(2*Math.PI)/2)+1},swingFromTo:function swingFromTo(e){var t=1.70158;return 1>(e/=.5)?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},swingFrom:function swingFrom(e){var t=1.70158;return e*e*((t+1)*e-t)},swingTo:function swingTo(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},bounce:function bounce(e){if(e<1/2.75){return 7.5625*e*e}else if(e<2/2.75){return 7.5625*(e-=1.5/2.75)*e+.75}else if(e<2.5/2.75){return 7.5625*(e-=2.25/2.75)*e+.9375}else{return 7.5625*(e-=2.625/2.75)*e+.984375}},bouncePast:function bouncePast(e){if(e<1/2.75){return 7.5625*e*e}else if(e<2/2.75){return 2-(7.5625*(e-=1.5/2.75)*e+.75)}else if(e<2.5/2.75){return 2-(7.5625*(e-=2.25/2.75)*e+.9375)}else{return 2-(7.5625*(e-=2.625/2.75)*e+.984375)}},easeFromTo:function easeFromTo(e){if(1>(e/=.5)){return .5*Math.pow(e,4)}return-.5*((e-=2)*Math.pow(e,3)-2)},easeFrom:function easeFrom(e){return Math.pow(e,4)},easeTo:function easeTo(e){return Math.pow(e,.25)}})})();(function(){function e(e,t,o,r,a,n){var d=0,c=0,h=0,_=0,g=0,m=0;function i(e){return((d*e+c)*e+h)*e}function s(e){return((_*e+g)*e+m)*e}function p(e){return(3*d*e+2*c)*e+h}function l(e){if(0<=e){return e}else{return 0-e}}function u(e,t){var o,r,a,n,s,u;for(a=e,u=0;8>u;u++){n=i(a)-e;if(l(n)<t){return a}s=p(a);if(1e-6>l(s)){break}a=a-n/s}o=0;r=1;a=e;if(a<o){return o}if(a>r){return r}while(o<r){n=i(a);if(l(n-e)<t){return a}if(e>n){o=a}else{r=a}a=.5*(r-o)+o}return a}h=3*t;c=3*(r-t)-h;d=1-h-c;m=3*o;g=3*(a-o)-m;_=1-m-g;return function(e,t){return s(u(e,t))}(e,function(e){return 1/(200*e)}(n))}function t(t,o,r,a){return function(n){return e(n,t,o,r,a,1)}}a.setBezierFunction=function(e,o,r,n,i){var s=t(o,r,n,i);s.displayName=e;s.x1=o;s.y1=r;s.x2=n;s.y2=i;return a.prototype.formula[e]=s};a.unsetBezierFunction=function(e){delete a.prototype.formula[e]}})();(function(){function e(e,t,o,r,n,i){return a.tweenProps(r,t,e,o,1,i,n)}var t=new a;t._filterArgs=[];a.interpolate=function(o,r,n,i,s){var p=a.shallowCopy({},o),l=a.composeEasingObject(o,i||"linear");t.set({});var u=t._filterArgs;u.length=0;u[0]=p;u[1]=o;u[2]=r;u[3]=l;a.applyFilter(t,"tweenCreated");a.applyFilter(t,"beforeTween");var d=e(o,p,r,n,l,s||0);a.applyFilter(t,"afterTween");return d}})();(function(e){var S=/(\d|\-|\.)/,x=/([^\-0-9\.]+)/g,C=/[0-9.\-]+/g,b=new RegExp("rgb\\("+C.source+/,\s*/.source+C.source+/,\s*/.source+C.source+"\\)","g"),T=/^.*\(/,O=/#([0-9]|[a-f]){3,6}/gi,P="VAL";function t(e,t){var o=[],r=e.length,a;for(a=0;a<r;a++){o.push("_"+t+"_"+a)}return o}function o(e){var t=e.match(x);if(!t){t=["",""]}else if(1===t.length||e[0].match(S)){t.unshift("")}return t.join(P)}function r(t){e.each(t,function(e){var o=t[e];if("string"==typeof o&&o.match(O)){t[e]=a(o)}})}function a(e){return p(O,e,n)}function n(e){var t=i(e);return"rgb("+t[0]+","+t[1]+","+t[2]+")"}var v=[];function i(e){e=e.replace(/#/,"");if(3===e.length){e=e.split("");e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]}v[0]=s(e.substr(0,2));v[1]=s(e.substr(2,2));v[2]=s(e.substr(4,2));return v}function s(e){return parseInt(e,16)}function p(e,t,o){var r=t.match(e),a=t.replace(e,P);if(r){for(var n=r.length,s,p=0;p<n;p++){s=r.shift();a=a.replace(P,o(s))}}return a}function l(e){return p(b,e,u)}function u(e){for(var t=e.match(C),o=t.length,r=e.match(T)[0],a=0;a<o;a++){r+=parseInt(t[a],10)+","}r=r.slice(0,-1)+")";return r}function d(r){var a={};e.each(r,function(e){var n=r[e];if("string"==typeof n){var i=f(n);a[e]={formatString:o(n),chunkNames:t(i,e)}}});return a}function c(t,o){e.each(o,function(e){for(var r=t[e],a=f(r),n=a.length,s=0;s<n;s++){t[o[e].chunkNames[s]]=+a[s]}delete t[e]})}function h(t,o){e.each(o,function(e){var r=t[e],a=_(t,o[e].chunkNames),n=g(a,o[e].chunkNames);r=m(o[e].formatString,n);t[e]=l(r)})}function _(e,t){for(var o={},r,a=t.length,n=0;n<a;n++){r=t[n];o[r]=e[r];delete e[r]}return o}var k=[];function g(e,t){k.length=0;for(var o=t.length,r=0;r<o;r++){k.push(e[t[r]])}return k}function m(e,t){for(var o=e,r=t.length,a=0;a<r;a++){o=o.replace(P,+t[a].toFixed(4))}return o}function f(e){return e.match(C)}function y(t,o){e.each(o,function(e){var r=o[e],a=r.chunkNames,n=a.length,s=t[e],p;if("string"==typeof s){var l=s.split(" "),u=l[l.length-1];for(p=0;p<n;p++){t[a[p]]=l[p]||u}}else{for(p=0;p<n;p++){t[a[p]]=s}}delete t[e]})}function w(t,o){e.each(o,function(e){var r=o[e],a=r.chunkNames,n=a.length,s=t[a[0]],p=_typeof(s);if("string"===p){for(var l="",u=0;u<n;u++){l+=" "+t[a[u]];delete t[a[u]]}t[e]=l.substr(1)}else{t[e]=s}})}e.prototype.filter.token={tweenCreated:function tweenCreated(e,t,o){r(e);r(t);r(o);this._tokenData=d(e)},beforeTween:function beforeTween(e,t,o,r){y(r,this._tokenData);c(e,this._tokenData);c(t,this._tokenData);c(o,this._tokenData)},afterTween:function afterTween(e,t,o,r){h(e,this._tokenData);h(t,this._tokenData);h(o,this._tokenData);w(r,this._tokenData)}}})(a)}).call(null)},{}],2:[function(e,t){var o=e("./shape"),a=e("./utils"),n=function(){this._pathTemplate="M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}";this.containerAspectRatio=1;o.apply(this,arguments)};n.prototype=new o;n.prototype.constructor=n;n.prototype._pathString=function(e){var t=e.strokeWidth;if(e.trailWidth&&e.trailWidth>e.strokeWidth){t=e.trailWidth}var o=50-t/2;return a.render(this._pathTemplate,{radius:o,"2radius":2*o})};n.prototype._trailString=function(e){return this._pathString(e)};t.exports=n},{"./shape":7,"./utils":8}],3:[function(e,t){var o=e("./shape"),r=e("./utils"),a=function(){this._pathTemplate="M 0,{center} L 100,{center}";o.apply(this,arguments)};a.prototype=new o;a.prototype.constructor=a;a.prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 "+t.strokeWidth);e.setAttribute("preserveAspectRatio","none")};a.prototype._pathString=function(e){return r.render(this._pathTemplate,{center:e.strokeWidth/2})};a.prototype._trailString=function(e){return this._pathString(e)};t.exports=a},{"./shape":7,"./utils":8}],4:[function(e,t){t.exports={Line:e("./line"),Circle:e("./circle"),SemiCircle:e("./semicircle"),Path:e("./path"),Shape:e("./shape"),utils:e("./utils")}},{"./circle":2,"./line":3,"./path":5,"./semicircle":6,"./shape":7,"./utils":8}],5:[function(e,t){var o=e("shifty"),r=e("./utils"),a={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"},n=function e(t,o){if(!(this instanceof e)){throw new Error("Constructor was called without new keyword")}o=r.extend({duration:800,easing:"linear",from:{},to:{},step:function step(){}},o);var a;if(r.isString(t)){a=document.querySelector(t)}else{a=t}this.path=a;this._opts=o;this._tweenable=null;var n=this.path.getTotalLength();this.path.style.strokeDasharray=n+" "+n;this.set(0)};n.prototype.value=function(){var e=this._getComputedDashOffset(),t=this.path.getTotalLength();return parseFloat((1-e/t).toFixed(6),10)};n.prototype.set=function(e){this.stop();this.path.style.strokeDashoffset=this._progressToOffset(e);var t=this._opts.step;if(r.isFunction(t)){var o=this._easing(this._opts.easing),a=this._calculateTo(e,o),n=this._opts.shape||this;t(a,n,this._opts.attachment)}};n.prototype.stop=function(){this._stopTween();this.path.style.strokeDashoffset=this._getComputedDashOffset()};n.prototype.animate=function(e,t,a){t=t||{};if(r.isFunction(t)){a=t;t={}}var n=r.extend({},t),i=r.extend({},this._opts);t=r.extend(i,t);var s=this._easing(t.easing),p=this._resolveFromAndTo(e,s,n);this.stop();this.path.getBoundingClientRect();var l=this._getComputedDashOffset(),u=this._progressToOffset(e),d=this;this._tweenable=new o;this._tweenable.tween({from:r.extend({offset:l},p.from),to:r.extend({offset:u},p.to),duration:t.duration,easing:s,step:function step(e){d.path.style.strokeDashoffset=e.offset;var o=t.shape||d;t.step(e,o,t.attachment)},finish:function finish(){if(r.isFunction(a)){a()}}})};n.prototype._getComputedDashOffset=function(){var e=window.getComputedStyle(this.path,null);return parseFloat(e.getPropertyValue("stroke-dashoffset"),10)};n.prototype._progressToOffset=function(e){var t=this.path.getTotalLength();return t-e*t};n.prototype._resolveFromAndTo=function(e,t,o){if(o.from&&o.to){return{from:o.from,to:o.to}}return{from:this._calculateFrom(t),to:this._calculateTo(e,t)}};n.prototype._calculateFrom=function(e){return o.interpolate(this._opts.from,this._opts.to,this.value(),e)};n.prototype._calculateTo=function(e,t){return o.interpolate(this._opts.from,this._opts.to,e,t)};n.prototype._stopTween=function(){if(null!==this._tweenable){this._tweenable.stop();this._tweenable=null}};n.prototype._easing=function(e){if(a.hasOwnProperty(e)){return a[e]}return e};t.exports=n},{"./utils":8,shifty:1}],6:[function(e,t){var o=e("./shape"),r=e("./circle"),a=e("./utils"),n=function(){this._pathTemplate="M 50,50 m -{radius},0 a {radius},{radius} 0 1 1 {2radius},0";this.containerAspectRatio=2;o.apply(this,arguments)};n.prototype=new o;n.prototype.constructor=n;n.prototype._initializeSvg=function(e){e.setAttribute("viewBox","0 0 100 50")};n.prototype._initializeTextContainer=function(e,t,o){if(e.text.style){o.style.top="auto";o.style.bottom="0";if(e.text.alignToBottom){a.setStyle(o,"transform","translate(-50%, 0)")}else{a.setStyle(o,"transform","translate(-50%, 50%)")}}};n.prototype._pathString=r.prototype._pathString;n.prototype._trailString=r.prototype._trailString;t.exports=n},{"./circle":2,"./shape":7,"./utils":8}],7:[function(e,t){var o=e("./path"),r=e("./utils"),a="Object is destroyed",n=function e(t,a){if(!(this instanceof e)){throw new Error("Constructor was called without new keyword")}if(0===arguments.length){return}this._opts=r.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{style:{color:null,position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}},autoStyleContainer:!0,alignToBottom:!0,value:null,className:"progressbar-text"},svgStyle:{display:"block",width:"100%"},warnings:!1},a,!0);if(r.isObject(a)&&a.svgStyle!==void 0){this._opts.svgStyle=a.svgStyle}if(r.isObject(a)&&r.isObject(a.text)&&a.text.style!==void 0){this._opts.text.style=a.text.style}var n=this._createSvgView(this._opts),i;if(r.isString(t)){i=document.querySelector(t)}else{i=t}if(!i){throw new Error("Container does not exist: "+t)}this._container=i;this._container.appendChild(n.svg);if(this._opts.warnings){this._warnContainerAspectRatio(this._container)}if(this._opts.svgStyle){r.setStyles(n.svg,this._opts.svgStyle)}this.svg=n.svg;this.path=n.path;this.trail=n.trail;this.text=null;var s=r.extend({attachment:void 0,shape:this},this._opts);this._progressPath=new o(n.path,s);if(r.isObject(this._opts.text)&&null!==this._opts.text.value){this.setText(this._opts.text.value)}};n.prototype.animate=function(e,t,o){if(null===this._progressPath){throw new Error(a)}this._progressPath.animate(e,t,o)};n.prototype.stop=function(){if(null===this._progressPath){throw new Error(a)}if(this._progressPath===void 0){return}this._progressPath.stop()};n.prototype.destroy=function(){if(null===this._progressPath){throw new Error(a)}this.stop();this.svg.parentNode.removeChild(this.svg);this.svg=null;this.path=null;this.trail=null;this._progressPath=null;if(null!==this.text){this.text.parentNode.removeChild(this.text);this.text=null}};n.prototype.set=function(e){if(null===this._progressPath){throw new Error(a)}this._progressPath.set(e)};n.prototype.value=function(){if(null===this._progressPath){throw new Error(a)}if(this._progressPath===void 0){return 0}return this._progressPath.value()};n.prototype.setText=function(e){if(null===this._progressPath){throw new Error(a)}if(null===this.text){this.text=this._createTextContainer(this._opts,this._container);this._container.appendChild(this.text)}if(r.isObject(e)){r.removeChildren(this.text);this.text.appendChild(e)}else{this.text.innerHTML=e}};n.prototype._createSvgView=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(t,e);var o=null;if(e.trailColor||e.trailWidth){o=this._createTrail(e);t.appendChild(o)}var r=this._createPath(e);t.appendChild(r);return{svg:t,path:r,trail:o}};n.prototype._initializeSvg=function(e){e.setAttribute("viewBox","0 0 100 100")};n.prototype._createPath=function(e){var t=this._pathString(e);return this._createPathElement(t,e)};n.prototype._createTrail=function(e){var t=this._trailString(e),o=r.extend({},e);if(!o.trailColor){o.trailColor="#eee"}if(!o.trailWidth){o.trailWidth=o.strokeWidth}o.color=o.trailColor;o.strokeWidth=o.trailWidth;o.fill=null;return this._createPathElement(t,o)};n.prototype._createPathElement=function(e,t){var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d",e);o.setAttribute("stroke",t.color);o.setAttribute("stroke-width",t.strokeWidth);if(t.fill){o.setAttribute("fill",t.fill)}else{o.setAttribute("fill-opacity","0")}return o};n.prototype._createTextContainer=function(e,t){var o=document.createElement("div");o.className=e.text.className;var a=e.text.style;if(a){if(e.text.autoStyleContainer){t.style.position="relative"}r.setStyles(o,a);if(!a.color){o.style.color=e.color}}this._initializeTextContainer(e,t,o);return o};n.prototype._initializeTextContainer=function(){};n.prototype._pathString=function(){throw new Error("Override this function for each progress bar")};n.prototype._trailString=function(){throw new Error("Override this function for each progress bar")};n.prototype._warnContainerAspectRatio=function(e){if(!this.containerAspectRatio){return}var t=window.getComputedStyle(e,null),o=parseFloat(t.getPropertyValue("width"),10),a=parseFloat(t.getPropertyValue("height"),10);if(!r.floatEquals(this.containerAspectRatio,o/a)){console.warn("Incorrect aspect ratio of container","#"+e.id,"detected:",t.getPropertyValue("width")+"(width)","/",t.getPropertyValue("height")+"(height)","=",o/a);console.warn("Aspect ratio of should be",this.containerAspectRatio)}};t.exports=n},{"./path":5,"./utils":8}],8:[function(e,t){var p=["Webkit","Moz","O","ms"];function o(e,t,r){e=e||{};t=t||{};r=r||!1;for(var a in t){if(t.hasOwnProperty(a)){var n=e[a],s=t[a];if(r&&i(n)&&i(s)){e[a]=o(n,s,r)}else{e[a]=s}}}return e}function r(e,t,o){for(var r=e.style,n=0,s;n<p.length;++n){s=p[n];r[s+a(t)]=o}r[t]=o}function a(e){return e.charAt(0).toUpperCase()+e.slice(1)}function n(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e){if(n(e)){return!1}var t=_typeof(e);return"object"===t&&!!e}function s(e,t){for(var o in e){if(e.hasOwnProperty(o)){var r=e[o];t(r,o)}}}t.exports={extend:o,render:function(e,t){var o=e;for(var r in t){if(t.hasOwnProperty(r)){var a=t[r],n=new RegExp("\\{"+r+"\\}","g");o=o.replace(n,a)}}return o},setStyle:r,setStyles:function(e,t){s(t,function(t,o){if(null===t||t===void 0){return}if(i(t)&&!0===t.prefix){r(e,o,t.value)}else{e.style[o]=t}})},capitalize:a,isString:function(e){return"string"==typeof e||e instanceof String},isFunction:function(e){return"function"==typeof e},isObject:i,forEachObject:s,floatEquals:function(e,t){return Math.abs(e-t)<.001},removeChildren:function(e){while(e.firstChild){e.removeChild(e.firstChild)}}}},{}]},{},[4])(4)});
define ("theme_snap/snap",["jquery","core/log","theme_snap/headroom","theme_snap/util","theme_snap/personal_menu","theme_snap/cover_image","theme_snap/progressbar","core/templates","core/str","theme_snap/accessibility","theme_snap/messages"],function(a,b,c,d,e,f,g,h,i,j,k){'use strict';M.theme_snap=M.theme_snap||{};b.disableAll(!0);var m="",n="",o="",p="",q="",r=function(a){var b=a.split("?");if(2>b.length){return!1}var c=b[1];c=c.split("#")[0];for(var d=c.split("&"),e=[],f=0;f<d.length;f++){var g=d[f].split("="),h=g[0],j=g[1];e[h]=j}return e};a(window).on("resize",function(){s()});var s=function(){var b=a("div[role=main] .mform div.snap-form-required fieldset > div.form-group.fitem"),c=a("div[role=main] .mform div.snap-form-advanced > div:nth-of-type(3)"),d=a(window).width();if(767>d){a(".snap-form-advanced").append(b)}else if(767<d){a(".snap-form-required fieldset#id_general").append(c)}},t=function(){var b=a(".xdebug-error");if(b.length){for(var c=0;c<b.length;c++){var d=b[c],e=d.parentNode,f=a(e).prev("br");a(f).remove()}}var g=a(".xdebug-error, .php-debug, .debuggingmessage");if(g.length){a(g).addClass("php-debug-footer");var h=a("<div id=\"footer-error-cont\"><h3>"+M.util.get_string("debugerrors","theme_snap")+"</h3><hr></div>");a("#page-footer").append(h);a("#footer-error-cont").append(g);a(".php-debug-footer").after(a("<hr>"));a("#mr-nav").addClass("errors-found");var i=a("<a class=\"footer-error-link btn btn-danger\" href=\"#footer-error-cont\">"+M.util.get_string("problemsfound","theme_snap")+" <span class=\"badge\">"+g.length+"</span></a>");a("#page-header").append(i)}},u=function(){return 0===a("body").attr("id").indexOf("page-course-view-")},v=function(){if(u()){a(".block_adminblock form").each(function(){a(this).attr("action",a(this).attr("action")+"#coursetools")})}if(""!==location.hash){return}var b=r(location.href);if(u()&&"undefined"!=typeof b.time){location.hash="coursetools";if(a(".block_calendar_month")){d.scrollToElement(a(".block_calendar_month"))}}var c=["body.path-blocks-collect #notice form"],e=["bui_deleteid","bui_editid"];for(var f in e){var g=e[f];if("undefined"!=typeof b[g]){c.push("#notice form");break}}a(c.join(", ")).each(function(){var b=a(this).attr("action");if(-1===b.indexOf("#")&&-1<b.indexOf("/course/view.php")){a(this).attr("action",a(this).attr("action")+"#coursetools")}})},w=function(){a(".path-mod-forum tr.discussion td.topic.starter").attr("data-cellname",M.util.get_string("forumtopic","theme_snap"));a(".path-mod-forum tr.discussion td.picture:not('.group')").attr("data-cellname",M.util.get_string("forumauthor","theme_snap"));a(".path-mod-forum tr.discussion td.picture.group").attr("data-cellname",M.util.get_string("forumpicturegroup","theme_snap"));a(".path-mod-forum tr.discussion td.replies").attr("data-cellname",M.util.get_string("forumreplies","theme_snap"));a(".path-mod-forum tr.discussion td.lastpost").attr("data-cellname",M.util.get_string("forumlastpost","theme_snap"))},x=function(a){a=a.trim().toLowerCase();return a},y=function(b){var c,d=window.navigator.userAgent;if(d.indexOf("MSIE ")||d.indexOf("Trident/")){b=a("#toc-searchables").find("li").clone(!0)}var e=a("#toc-search-input").val();e=x(e);if(0===e.length){a("#toc-search-results").html("");a("#toc-search-input").removeClass("state-active")}else{a("#toc-search-input").addClass("state-active");var f=[];for(c=0;c<b.length;c++){var g=b[c];if(-1<x(a(g).text()).indexOf(e)){f.push(g)}}a("#toc-search-results").html(f)}},z=function(){var b=[];if(a("#notice.snap-continue-cancel").length){b.push("hascontinuecancel")}a("body").addClass(b.join(" "))},A=function(c){var d=location.hash;a(window).on("popstate hashchange",function(f){var g=location.hash;b.info("hashchange");if(g!==d){if("#primary-nav"===location.hash){e.update()}else{a("#page, #moodle-footer, #js-snap-pm-trigger, #logo, .skiplinks").css("display","");if(u()){b.info("show section",f.target);c.showSection()}}}d=g})},B=function(){a("#snap-course-footer-recent-activity .info").each(function(){a(this).appendTo(a(this).prev())});a("#snap-course-footer-recent-activity .head .name").each(function(){a(this).prependTo(a(this).closest(".head"))})},C=function(b,c){var d=new g.Circle(b,{color:"inherit",easing:"linear",strokeWidth:6,trailWidth:3,duration:1400,text:{value:"0"}}),e=a(b).attr("value")/100,f=m;if(0===e||"-"===a(b).attr("value")){d.setText("-")}else{if(50>a(b).attr("value")){f=n}d.setText(c(b))}d.animate(e,{from:{color:"#999"},to:{color:f},step:function step(a,b){b.path.setAttribute("stroke",a.color)}})},D=function(){a(".snap-student-dashboard-progress .js-progressbar-circle").each(function(){C(this,function(b){return a(b).attr("value")+"<small>%</small>"})});a(".snap-student-dashboard-grade .js-progressbar-circle").each(function(){C(this,function(b){var c=a(b).attr("value"),d=a(b).attr("gradeformat");if(d==o||d==p||d==q){c=c+"<small>%</small>"}return c})})},E=function(){a(document).on("click",[".chapters a",".section_footer a"," #toc-search-results a"].join(", "),function(b){var c=this.getAttribute("href");if(window.history&&window.history.pushState){history.pushState(null,null,c);a(window).trigger("hashchange");b.preventDefault()}else{location.hash=c}});var b=document.querySelector("#mr-nav"),e=new c(b,{tolerance:5,offset:100,classes:{initial:"headroom",pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top"},onPin:function onPin(){a(".snap-drawer-no-headroom").addClass("snap-drawer-headroom");a(".snap-drawer-headroom").removeClass("snap-drawer-no-headroom")},onUnpin:function onUnpin(){a(".snap-drawer-headroom").addClass("snap-drawer-no-headroom");a(".snap-drawer-no-headroom").removeClass("snap-drawer-headroom")}});if(!a(".notloggedin").length){e.init()}var f=a("#toc-searchables").find("li").clone(!0);a("#course-toc").on("keyup","#toc-search-input",function(){y(f)});a("#course-toc").on("keydown","#toc-search-input",function(b){var c=b.keyCode||b.which;if(9===c){a("#toc-search-results a").last().blur(function(){a(this).off("blur");a("#toc-search-input").val("");a("#toc-search-results").html("");a("#toc-search-input").removeClass("state-active")})}});a("#course-toc").on("click","#toc-search-results a",function(){a("#toc-search-input").val("");a("#toc-search-results").html("");a("#toc-search-input").removeClass("state-active")});a(document).on("click",function(b){if(!a(b.target).closest("#toc-search-input").length){a("#toc-search-input").val("");a("#toc-search-results").html("");a("#toc-search-input").removeClass("state-active")}});a(document).on("click","#admin-menu-trigger, #toc-mobile-menu-toggle",function(b){var c=this.getAttribute("href");if("admin-menu-trigger"===this.getAttribute("id")){a(this).toggleClass("active");a("#page").toggleClass("offcanvas")}a(c).attr("tabindex","0");a(c).toggleClass("state-visible").focus();b.preventDefault();if(0===a(".message-app.main").length){document.dispatchEvent(new Event("messages-drawer:toggle"))}});a(document).on("click","#course-toc.state-visible a",function(){a("#course-toc").removeClass("state-visible")});a(document).on("click",".news-article .toggle",function(b){var c=a(this).closest(".news-article");d.scrollToElement(c);a(".news-article").not(c).removeClass("state-expanded");a(".news-article-message").css("display","none");c.toggleClass("state-expanded");a(".state-expanded").find(".news-article-message").slideDown("fast",function(){if(c.is(".state-expanded")){c.find(".news-article-message").focus();c.attr("aria-expanded","true")}else{c.focus();c.attr("aria-expanded","false")}a(document).trigger("snapContentRevealed")});b.preventDefault()});a(function(){var b=!1;if("ontouchstart"in window){b=!0}else if(window.navigator.msPointerEnabled){b=!0}if(!b){var c=a("[data-toggle=\"tooltip\"]");if(a.isFunction(c.tooltip)){c.tooltip()}}})};function l(){var b=0,c=setInterval(function(){b=b+1;if(b>15){clearInterval(c)}else{if(0!=a("button.atto_fullscreen_button").length&&0!=a("div.editor_atto").length){a("button.atto_fullscreen_button").click(function(){a("div.editor_atto").css("background-color","#eee");a("div.editor_atto").css("z-index","1")});a("button.atto_html_button").click(function(){a("#id_introeditor").css("z-index","1")});clearInterval(c)}}},2e3)}return{snapInit:function snapInit(b,c,d,g,u,x,y,C,F,G){m=F.success;n=F.warning;o=G.gradepercentage;p=G.gradepercentagereal;q=G.gradepercentageletter;M.cfg.context=b.contextid;M.snapTheme={forcePassChange:g};e.init(y);if(c){require(["theme_snap/course-lazy"],function(a){var c=new a(b);A(c)})}a(document).ready(function(){t();w();E();v();z();s();a("#page-mod-assign-view #page-content").append(a("#moodle-blocks"));a(".snap-resource-long .contentafterlink .snap-resource-card-fadeout").each(function(){a(this).appendTo(a(this).prevAll(".snap-resource-long .contentafterlink .no-overflow"))});a(".snap-header-card .snap-header-card-icons .disabled-snap-asset-completion-tracking").remove();var c=a("li.snap-activity.modtype_folder");a.each(c,function(b,c){var d=a(c).find("div.contentwithoutlink div.snap-assettype");if(0<d.length){if(0==a(c).find("div.activityinstance div.snap-header-card .asset-type").length){var e=a(c).find("div.activityinstance div.snap-header-card");d.prependTo(e)}}});a("body").addClass("snap-js-loaded");D();B();if(a("body").hasClass("pagelayout-course")||a("body").hasClass("pagelayout-frontpage")){f.courseImage(b.shortname,d)}else if(a("body").hasClass("pagelayout-coursecategory")){if(b.categoryid){f.categoryImage(b.categoryid,d)}}if(a("#page-admin-setting-themesettingsnap").length){var g=location.hash;if(g&&a(".nav-link[href=\""+g+"\"]").length){a(".nav-link[href=\""+g+"\"]").tab("show");a(window).scrollTop(0)}var j=function(b,c){var d=a(b),e=a(c);if(d.is(":checked")){e.show();return}e.hide()},k="#id_s_theme_snap_personalmenuadvancedfeedsenable",m="#admin-personalmenuadvancedfeedslifetime";j(k,m);a(k).on("click",function(){j(k,m)})}var n=a("#page-admin-setting-themesettingsnap #themesnapfeaturespots #admin-fs_one_title_link span.error"),o=a("#page-admin-setting-themesettingsnap #themesnapfeaturespots #admin-fs_two_title_link span.error"),p=a("#page-admin-setting-themesettingsnap #themesnapfeaturespots #admin-fs_three_title_link span.error"),q=a("#page-admin-setting-themesettingsnap #themesnapfeaturespots #admin-fs_one_title_link .form-label"),y=a("#page-admin-setting-themesettingsnap #themesnapfeaturespots #admin-fs_two_title_link .form-label"),A=a("#page-admin-setting-themesettingsnap #themesnapfeaturespots #admin-fs_three_title_link .form-label");a("#page-admin-setting-themesettingsnap #themesnapfeaturespots #admin-fs_three_title").nextUntil("#page-admin-setting-themesettingsnap #themesnapfeaturespots #admin-fs_one_title_link_cb").wrapAll("<div class=fs-title-links></div>");var F={"padding-bottom":"2.1em"};if(n.length){y.css(F);A.css(F)}if(o.length){q.css(F);A.css(F)}if(p.length){q.css(F);y.css(F)}if(a("body").hasClass("snap-pm-open")){e.update()}if(a("#page-course-editsection.format-topics").length){var G=document.getElementById("id_name_customize"),H=document.getElementById("id_name_value");G.value="1";G.checked=!0;H.required="required";a(H).attr("pattern",".*\\S+.*");a(G).parent().css("display","none");a("#id_cancel").on("click",function(){a(H).removeAttr("required");a(H).removeAttr("pattern");return!0})}else{a("#id_name_value").attr("pattern",".*\\S+.*");a("#id_cancel").on("click",function(){a(H).removeAttr("pattern");return!0})}if(a("#page-mod-book-view a[href*=\"mod/book/tool/print/index.php\"]").length){var I=r(location.href);if(I){a("[data-block=\"_fake\"]").append("<p><hr><a target=\"_blank\" href=\"/mod/book/tool/print/index.php?id="+I.id+"\">"+M.util.get_string("printbook","booktool_print")+"</a></p>")}}var J=/^page-mod-.*-mod$/,K=J.test(a("body").attr("id"))&&-1<location.href.indexOf("modedit");if(!K){J=/^page-mod-.*-general$/;K=J.test(a("body").attr("id"))&&-1<location.href.indexOf("modedit")}var L="page-course-edit"===a("body").attr("id"),N="page-course-editsection"===a("body").attr("id");a("#page-mod-hvp-mod .h5p-editor-iframe").parent().css({display:"block"});var O=-1===["page-mod-hvp-mod"].indexOf(a("body").attr("id"));if((K||L||N)&&O){var P=[":first","#page-course-edit #id_descriptionhdr","#id_contentsection","#id_general + #id_general","#id_content","#page-mod-choice-mod #id_optionhdr","#page-mod-workshop-mod #id_gradingsettings","#page-mod-choicegroup-mod #id_miscellaneoussettingshdr","#page-mod-choicegroup-mod #id_groups","#page-mod-scorm-mod #id_packagehdr"];P=P.join();a("form[id^=\"mform1\"] > fieldset").not(P).wrapAll("<div class=\"snap-form-advanced col-md-4\" />");a(".snap-form-advanced").append(a(".collapsible-actions"));if(!a("#page-course-edit").length){a(".snap-form-advanced fieldset").addClass("collapsed")}for(var Q=a("form[id^=\"mform1\"] fieldset:first"),R=a("form[id^=\"mform1\"] fieldset:first .fcontainer"),S=a("form[id^=\"mform1\"] > fieldset").not("form[id^=\"mform1\"] > fieldset:first"),T=0,U;T<S.length;T++){U=a(S[T]).find(".fcontainer");a(R).append(U);a(S[T]).remove()}a(Q).wrap("<div class=\"snap-form-required col-md-8\" />");var V=a("form[id^=\"mform1\"] fieldset:first .fitem_feditor:not(.required)");if(K&&V){if(0===a(["body#page-mod-assign-mod","body#page-mod-choice-mod","body#page-mod-turnitintool-mod","body#page-mod-workshop-mod"].join()).length){a(R).append(V);a(R).append(a("#fitem_id_showdescription"))}if(0<a(["body#page-mod-url-mod","body#page-mod-resource-mod","body#page-mod-folder-mod","body#page-mod-imscp-mod","body#page-mod-lightboxgallery-mod","body#page-mod-scorm-mod"].join()).length){i.get_strings([{key:"multimediacard",component:"theme_snap"}]).done(function(b){var c=b[0],d=a("[id='id_showdescription']").closest(".form-group");a(d).append(c)})}}V=a("#page-mod-resource-mod [data-fieldtype='editor']").closest(".form-group");var W=a("#page-mod-resource-mod [id='id_showdescription']").closest(".form-group");a("#page-mod-resource-mod .snap-form-advanced #id_modstandardelshdr .fcontainer").append(V);a("#page-mod-resource-mod .snap-form-advanced #id_modstandardelshdr .fcontainer").append(W);var X=a("#page-mod-assign-mod [data-fieldtype='filemanager']").closest(".form-group"),Y=a("#page-mod-assign-mod [for='id_duedate']").closest(".form-group");a("#page-mod-assign-mod .snap-form-advanced #id_modstandardelshdr .fcontainer").append(X);a("#page-mod-assign-mod .snap-form-required .fcontainer").append(Y);var Z=a("#id_visible").closest(".form-group").addClass("snap-form-visibility"),$=a(Z).find("label"),_=a(Z).find("select");a($).insertBefore(_);a($).text(M.util.get_string("visibility","theme_snap")+" ");if(a("#page-course-edit").length){var aa="";(function(){return i.get_strings([{key:"showallsectionsdisabled",component:"theme_snap"},{key:"disabled",component:"theme_snap"}])})().then(function(a){var b=a[0];aa=a[1];return h.render("theme_snap/form_alert",{type:"warning",classes:"",message:b})}).then(function(b){var c=a("[name=\"coursedisplay\"] > option[value=\"0\"]"),d=a("[name=\"coursedisplay\"] > option[value=\"1\"]"),e=a("[name=\"coursedisplay\"]");c.attr("disabled","disabled");c.append(" ("+aa+")");c.removeAttr("selected");d.attr("selected","selected");e.parent().append(b)})}a(".snap-form-advanced").prepend(Z);var ba=a("form[id^=\"mform1\"] > .form-group:last");a(Q).append(ba);var ca=a(".form-group.has-danger");if(K&&ca.length){ca.closest(".collapsible").removeClass("collapsed")}if(a("#page-mod-page-mod").length){(function(){return i.get_strings([{key:"showappearancedisabled",component:"theme_snap"}])})().then(function(a){return h.render("theme_snap/form_alert",{type:"warning",classes:"",message:a})}).then(function(b){var c=a("[id=\"id_printheading\"], [id=\"id_printintro\"], [id=\"id_printlastmodified\"]");c.attr("readonly",!0);c.attr("tabindex",-1);c.click(function(a){a.preventDefault();return!1});c.parent().parent().parent().css("background-color","#f1f1f1");c.parent().parent().parent().css("color","#d5d5d5");var d=a("[id=\"id_error_printheading\"]");d.parent().parent().parent().append(b)})}}if(u){require(["theme_snap/conversation_badge_count-lazy"],function(a){a.init(x)})}var da=a("#snap-coverimagecontrol label");if(da&&da.length){da.keypress(function(b){if(13===b.which){a("#snap-coverfiles").trigger("click")}})}if(!a(".block_settings").length){a("#admin-menu-trigger").hide();if(C){require(["theme_snap/alternative_role_handler-lazy"],function(a){a.init(b.id)})}}var ea=a("ul#snap-navbar-content li:first-child a"),fa=a("#moodle-page a:first"),ga=a("#nav-notification-popover-container > div.popover-region-toggle.nav-link"),ha=a(".search-input-wrapper.nav-link > div[role=\"button\"]"),ia=a("#admin-menu-trigger"),ja;if(ea.length){ja=ea}else{ja=fa}if(ga.length&&ha.length&&ia.length&&ja.length){require(["theme_snap/rearrange_tab_handler-lazy"],function(a){a.init([ga,ha,ia,ja])})}a(".snap-settings-tab-link").on("click",function(){var b=a("a[href=\""+a(this).attr("href")+"\"].nav-link");if(b.length){b.tab("show")}});if("#course-detail-title"===window.location.hash){a("#mr-nav").removeClass("headroom--pinned").addClass("headroom--unpinned")}var ka=a("div[role=main] .mform div.snap-form-required fieldset > div.form-group.fitem"),la=a(window).width();if(767>la){a(".snap-form-advanced").append(ka)}l()});j.snapAxInit();k.init()}}});
define ("theme_snap/personal_menu",["jquery","core/log","core/yui","theme_snap/pm_course_cards","theme_snap/util","theme_snap/ajax_notification"],function(a,b,c,d,e,f){return new function PersonalMenu(){var c=this,g=!1;this.update=function(){if(g){var c=M.cfg.wwwroot+"/user/policy.php";window.location=c;return}d.reqCourseInfo(d.getCourseIds());a("#snap-pm").focus();var h=function(c){var d=a("#snap-personal-menu-"+c);if(a(d).length){var g=M.cfg.sesskey+"personal-menu-"+c;try{if(e.supportsSessionStorage()&&window.sessionStorage[g]){b.info("using locally stored "+c);var h=window.sessionStorage[g];a(d).html(h)}b.info("fetching "+c);a.ajax({type:"GET",async:!0,url:M.cfg.wwwroot+"/theme/snap/rest.php?action=get_"+c+"&contextid="+M.cfg.context,success:function success(h){f.ifErrorShowBestMsg(h).done(function(f){if(f){}else{b.info("fetched "+c);if(e.supportsSessionStorage()&&"undefined"!=typeof h.html){window.sessionStorage[g]=h.html}a(d).attr("data-content-loaded","1");a(d).html(h.html)}})}})}catch(a){sessionStorage.clear();b.error(a)}}};h("deadlines");h("graded");h("grading");h("messages");h("forumposts");a(document).trigger("snapUpdatePersonalMenu");try{document.dispatchEvent(new Event("snapPersonalMenuOpen"))}catch(a){b.error(a.message);try{var i=document.createEvent("Event");i.initEvent("snapPersonalMenuOpen",!0,!0);document.dispatchEvent(i)}catch(a){b.error(a.message)}}};var h=function(){var b=function(b){var c=a("#snap-pm-content section"),d=a(c).outerWidth(),e=a(b),f=a("#snap-pm-updates section > div, #snap-pm-updates section > snap-feed > div").index(e)+1,g=d*f,h=a(b).outerHeight()+200;if("#snap-pm-courses"==b){g=0}var i=a(window).height();if(h<i){h=i}return{left:g,height:h}};a(window).on("resize",function(){if(992<=window.innerWidth){a("#snap-pm-content").removeAttr("style");if(0<a("#snap-pm-courses div#snap-personal-menu-intelliboard").length){var c=a("div#snap-personal-menu-intelliboard").closest("section");c.prependTo("#snap-pm-updates")}if(0<a("#snap-pm-courses div#snap-personal-menu-intellicart").length){var c=a("div#snap-personal-menu-intellicart").closest("section");c.prependTo("#snap-pm-updates")}return}var d=a("#snap-pm-mobilemenu a.state-active");if(!d||!d.length){return}if(0<a("#snap-pm-updates div#snap-personal-menu-intelliboard").length){var c=a("div#snap-personal-menu-intelliboard").closest("section");c.appendTo("section#snap-pm-courses")}if(0<a("#snap-pm-updates div#snap-personal-menu-intellicart").length){var c=a("div#snap-personal-menu-intellicart").closest("section");c.appendTo("section#snap-pm-courses")}var e=d.attr("href"),f=b(e);a("#snap-pm-content").css("left","-"+f.left+"px");a("#snap-pm-content").css("height",f.height+"px")});a(document).on("click","#snap-pm-mobilemenu a",function(c){var d=this.getAttribute("href"),e=b(d);a("html, body").animate({scrollTop:0},0);a("#snap-pm-content").animate({left:"-"+e.left+"px",height:e.height+"px"},"700","swing",function(){});a("#snap-pm-mobilemenu a").removeClass("state-active");a(this).addClass("state-active");c.preventDefault()})},i=function(){a(document).on("click",".js-snap-pm-trigger",function(b){a("html, body").animate({scrollTop:0},0);a("body").toggleClass("snap-pm-open");if(a(".snap-pm-open #snap-pm").is(":visible")){c.update()}b.preventDefault();if(992>window.innerWidth){if(0<a("#snap-pm-updates div#snap-personal-menu-intelliboard").length){var d=a("div#snap-personal-menu-intelliboard").closest("section");d.appendTo("section#snap-pm-courses")}if(0<a("#snap-pm-updates div#snap-personal-menu-intellicart").length){var d=a("div#snap-personal-menu-intellicart").closest("section");d.appendTo("section#snap-pm-courses")}}if(0===a(".message-app.main").length){document.dispatchEvent(new Event("messages-drawer:pm-toggle"))}});h()};this.init=function(a){g=a;i();if(!g){d.init()}}}});
function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("theme_snap/ajax_notification",["jquery","core/notification","core/ajax","core/templates","core/str","theme_snap/util"],function(a,b,c,d,e,f){var g=!1,h=!1,i=!1;a(document).ready(function(){a("#snap-pm-logout").click(function(){h=!0})});return{ifErrorShowBestMsg:function ifErrorShowBestMsg(c,j,k){var l=a.Deferred(),m=function(c){var d=a.Deferred();if(k){b.alert(M.util.get_string("error","moodle"),k,M.util.get_string("ok","moodle"))}else{if(c.backtrace){b.exception(c)}else{var e;if(c.error){e=c.error;if(c.stacktrace){e="<div>"+e+"<pre>"+c.stacktrace+"</pre></div>"}}else{if(c.errorcode&&c.message){e=c.message}else{d.resolve(!1);return d.promise()}}b.alert(M.util.get_string("error","moodle"),e,M.util.get_string("ok","moodle"))}}f.whenTrue(function(){var b=a(".moodle-dialogue-base").is(":visible");return b},function(){d.resolve(!0)},!0);return d.promise()};if(g){l.resolve(!0);return l.promise()}if(h){l.resolve(!0);return l.promise()}if("object"!==_typeof(c)){try{var n=JSON.parse(c);c=n}catch(a){}}if("undefined"==typeof c){return!1}if(c.errorcode&&"sitepolicynotagreed"===c.errorcode){var o=M.cfg.wwwroot+"/user/policy.php";if(window.location!=o&&!i&&a("#primary-nav").is(":visible")){window.location=o;i=!0;g=!0;l.resolve(!0)}else{l.resolve(!1)}return l.promise()}if(c.error||c.errorcode){if(M.snapTheme.forcePassChange){var p=M.cfg.wwwroot+"/login/change_password.php";if(a("#snap-pm-content").length){e.get_string("forcepwdwarningpersonalmenu","theme_snap",p).then(function(a){return d.render("core/notification_warning",{message:a,extraclasses:"force-pwd-warning"})}).then(function(b){a("#snap-pm-content").html("<br />"+b);l.resolve(!0)});if(a("#snap-pm-content").is(":visible")){g=!0;return l.promise()}}if(window.location!=p){window.location=p}g=!0;l.resolve(!0);return l.promise()}j=j?j:"";return a.ajax({type:"POST",async:!0,data:{sesskey:M.cfg.sesskey,failedactionmsg:j},url:M.cfg.wwwroot+"/theme/snap/rest.php?action=get_loginstatus"}).then(function(d){if(g){l.resolve(!0);return l.promise()}if(!d.loggedin){a("<style>.confirmation-dialogue .confirmation-buttons input:nth-of-type(2), .moodle-dialogue-base.moodle-dialogue-confirm button.yui3-button.closebutton{ display : none }</style>").appendTo("head");b.confirm(d.loggedouttitle,d.loggedoutmsg,d.loggedoutcontinue," ",function(){window.location=M.cfg.wwwroot+"/login/index.php"});g=!0;l.resolve(!0);return l.promise()}else{return m(c)}})}l.resolve(!1);return l.promise()}}});
define ("theme_snap/accessibility",["jquery","core/str","core/event"],function(a,b,c){return{snapAxInit:function snapAxInit(c,d,e){b.get_strings([{key:"accessforumstringdis",component:"theme_snap"},{key:"accessforumstringmov",component:"theme_snap"},{key:"calendar",component:"calendar"},{key:"accessglobalsearchstring",component:"theme_snap"},{key:"viewcalendar",component:"theme_snap"},{key:"viewmyfeedback",component:"theme_snap"},{key:"viewmessaging",component:"theme_snap"},{key:"viewforumposts",component:"theme_snap"},{key:"editcoursesettings",component:"theme_snap"},{key:"pluginname",component:"local_joulegrader"},{key:"gradebook",component:"local_joulegrader"},{key:"gradebook",component:"core_grades"},{key:"numparticipants",component:"core_message"},{key:"joulereports",component:"block_reports"},{key:"pld",component:"theme_snap"},{key:"competencies",component:"core_competency"},{key:"outcomes",component:"core_outcome"},{key:"badges",component:"core_badges"},{key:"coursereport",component:"report_allylti"}]).done(function(b){if(a("#page-mod-forum-discuss")){a("div[data-content='forum-discussion'] div.singleselect form.form-inline select.custom-select.singleselect").attr("aria-label",b[0]);a("div[data-content='forum-discussion'] div.movediscussionoption select.custom-select.urlselect").attr("aria-label",b[1])}a("i.fa-calendar").parent().attr("aria-label",b[2]);a("input[name='TimeEventSelector[calendar]']").attr("aria-label",b[2]);a(".search-input-wrapper.nav-link div").attr("aria-label",b[3]);a("#snap-pm-updates section a.snap-personal-menu-more small:contains(\""+b[4]+"\")").attr("id","snap-pm-deadline");a("#snap-pm-updates section a.snap-personal-menu-more small:contains(\""+b[5]+"\")").attr("id","snap-pm-feedback");a("#snap-pm-updates section a.snap-personal-menu-more small:contains(\""+b[6]+"\")").attr("id","snap-pm-messages");a("#snap-pm-updates section a.snap-personal-menu-more small:contains(\""+b[7]+"\")").attr("id","snap-pm-forum-posts");a.expr[":"].contains=a.expr.createPseudo(function(b){return function(c){return 0<=a(c).text().toUpperCase().indexOf(b.toUpperCase())}});var f=b[12].split(" ");a("section#coursetools div#coursetools-list a:contains(\""+b[8]+"\")").attr("id","ct-course-settings");a("section#coursetools div#coursetools-list a:contains(\""+f[1]+"\")").attr("id","ct-participants-number");a("section#coursetools div#coursetools-list a:contains(\""+b[14]+"\")").attr("id","ct-pld");a("section#coursetools div#coursetools-list a:contains(\""+b[15]+"\")").attr("id","ct-competencies");a("section#coursetools div#coursetools-list a:contains(\""+b[16]+"\")").attr("id","ct-outcomes");a("section#coursetools div#coursetools-list a:contains(\""+b[17]+"\")").attr("id","ct-badges");if(c){a("section#coursetools div#coursetools-list a:contains(\""+b[9]+"\")").attr("id","ct-open-grader");a("section#coursetools div#coursetools-list a:contains(\""+b[10]+"\")").attr("id","ct-course-gradebook")}else{a("section#coursetools div#coursetools-list a:contains(\""+b[11]+"\")").attr("id","ct-course-gradebook")}if(e){a("section#coursetools div#coursetools-list a:contains(\""+b[13]+"\")").attr("id","ct-open-reports")}if(d){a("section#coursetools div#coursetools-list a:contains(\""+b[18]+"\")").attr("id","ct-ally")}});a(document).ready(function(){a("#page-mod-data-edit input[id*='url']").attr("type","url").attr("autocomplete","url");a("#moodle-blocks aside#block-region-side-pre a.sr-only.sr-only-focusable").attr("tabindex","-1");a(".mform").submit(function(){a("input.form-control.is-invalid:first").focus()});var c=a(".groupmanagementtable #buttonscell p.arrow_button input[name=\"add\"]").attr("value"),d=a(".groupmanagementtable #buttonscell p.arrow_button input[name='remove']").attr("value");new f("snap-pm-accessible-tab");new f("modchooser-accessible-tab");var e=a(window);function b(){var b=e.width();if(1220>b){a(".groupmanagementtable #buttonscell p.arrow_button input[name='add']").attr("value","+");a(".groupmanagementtable #buttonscell p.arrow_button input[name='remove']").attr("value","-")}else if(1220<b){a(".groupmanagementtable #buttonscell p.arrow_button input[name='add']").attr("value",c);a(".groupmanagementtable #buttonscell p.arrow_button input[name='remove']").attr("value",d)}}b();a(window).resize(b)});function f(b){this._id=b;this.$tpanel=a("#"+b);this.$tabs=this.$tpanel.find(".tab");this.$panels=this.$tpanel.find(".tab-pane");this.bindHandlers();this.init()}f.prototype.keys={left:37,up:38,right:39,down:40};f.prototype.init=function(){var a;this.$panels.attr("aria-hidden","true");this.$panels.removeClass("active in");a=this.$tabs.filter(".active");if(a===void 0){a=this.$tabs.first();a.addClass("active")}this.$tpanel.find("#"+a.find("a").attr("aria-controls")).addClass("active in").attr("aria-hidden","false")};f.prototype.switchTabs=function(a,b){var c=a.find("a"),d=b.find("a");a.removeClass("active");c.attr("tabindex","-1").attr("aria-selected","false");b.addClass("active");d.attr("aria-selected","true");this.$tpanel.find("#"+c.attr("aria-controls")).removeClass("active in").attr("aria-hidden","true");this.$tpanel.find("#"+d.attr("aria-controls")).addClass("active in").attr("aria-hidden","false");d.attr("tabindex","0");d.focus()};f.prototype.bindHandlers=function(){var b=this;this.$tabs.keydown(function(c){return b.handleTabKeyDown(a(this),c)});this.$tabs.click(function(c){return b.handleTabClick(a(this),c)})};f.prototype.handleTabKeyDown=function(a,b){var c,d;switch(b.keyCode){case this.keys.left:case this.keys.up:{d=this.$tabs.index(a);if(0===d){c=this.$tabs.last()}else{c=this.$tabs.eq(d-1)}this.switchTabs(a,c);b.preventDefault();return!1}case this.keys.right:case this.keys.down:{d=this.$tabs.index(a);if(d===this.$tabs.length-1){c=this.$tabs.first()}else{c=this.$tabs.eq(d+1)}this.switchTabs(a,c);b.preventDefault();return!1}}};f.prototype.handleTabClick=function(a){var b=this.$tpanel.find(".tab.active");this.switchTabs(b,a)}},enhanceform:function enhanceform(b){var d=document.getElementById(b);a(d).on(c.Events.FORM_FIELD_VALIDATION,function(b,c){b.preventDefault();var e=a(d).closest(".form-group"),f=e.find(".form-control-feedback"),g=e.find("input.form-control.is-invalid");if("TEXTAREA"==a(d).prop("tagName")&&e.find("[contenteditable]")){d=e.find("[contenteditable]")}if(""!==c){e.addClass("has-danger");e.data("client-validation-error",!0);a(d).addClass("is-invalid");a(d).attr("aria-describedby",f.attr("id"));a(d).attr("aria-invalid",!0);g.attr("tabindex",0);f.html(c);if(!f.is(":visible")){f.show();f.focus()}}else{if(!0===e.data("client-validation-error")){e.removeClass("has-danger");e.data("client-validation-error",!1);a(d).removeClass("is-invalid");a(d).removeAttr("aria-describedby");a(d).attr("aria-invalid",!1);f.hide()}}})}}});
define ("theme_snap/pm_course_cards",["jquery","core/log","core/templates","theme_snap/pm_course_favorites","theme_snap/model_view","theme_snap/ajax_notification","theme_snap/util","theme_snap/appear"],function(a,b,c,d,e,f,g,h){return new function CourseCards(){var i=this;this.applyCourseInfo=function(d){c.render("theme_snap/course_cards",[]).done(function(){for(var c in d){var f=d[c];b.debug("applying course data for courseid "+f.course);var g=a(".coursecard[data-courseid=\""+f.course+"\"]");e(g,"theme_snap/course_cards");a(g).trigger("modelUpdate",f)}})};this.reqCourseInfo=function(c){if(0===c.length){return}var d="courseids="+c.join(","),e=M.cfg.sesskey+"coursecard";b.debug("fetching course data");a.ajax({type:"GET",async:!0,url:M.cfg.wwwroot+"/theme/snap/rest.php?action=get_courseinfo&contextid="+M.cfg.context,data:d,success:function success(a){f.ifErrorShowBestMsg(a).done(function(c){if(c){}else{if(a.info){b.debug("fetched coursedata",a.info);if(g.supportsSessionStorage()){window.sessionStorage[e]=JSON.stringify(a.info)}i.applyCourseInfo(a.info)}else{b.warn("fetched coursedata with error: JSON data object is missing info property",a)}}})}})};this.getCourseIds=function(){var b=[];a(".coursecard").each(function(){b.push(a(this).attr("data-courseid"))});return b};this.applyAppearForImages=function(){h(document.body).on("appear",".coursecard",function(b,c){c.each(function(){var b=a(this).data("image-url");if(b!==void 0){var c=a(this);a("<img src=\""+b.trim()+"\" />").on("load",function(){a(c).css("background-image","url("+b.trim()+")")})}})});function b(){var a,b=document.createElement("fakeelement"),c="Animationend",d={Animation:"Animationend",OAnimation:"oAnimationEnd",MozAnimation:"Animationend",WebkitAnimation:"webkitAnimationEnd"};for(a in d){if(b.style[a]!==void 0){c=d[a];break}}return c}a("#snap-pm-courses .nav-tabs .nav-link").on("click",function(){var c=a(this).attr("href");a(c)[0].addEventListener(b(),function(){a.force_appear()},!1)});a(".coursecard").appear({appeartopoffset:100,appearleftoffset:100});h.force_appear()};this.init=function(){a(document).ready(function(){d();var a=i.getCourseIds(),b=M.cfg.sesskey+"coursecard";if(0<a.length){i.applyAppearForImages();if(g.supportsSessionStorage()&&window.sessionStorage[b]){var c=JSON.parse(window.sessionStorage[b]);i.applyCourseInfo(c)}else{i.reqCourseInfo(a)}}});a(document).on("click",".coursecard[data-href]",function(b){var c=a(b.target);if(!a(c).closest("a").length){window.open(a(this).data("href"),"_self");b.preventDefault()}})}}});
define ("theme_snap/footer_alert",["jquery","core/templates"],function(a,b){return new function FooterAlert(){var c;a(document).ready(function(){c.detach()});(function(){c=a("#snap-footer-alert");if(0===c.length){b.render("theme_snap/footer_alert",{}).done(function(b){a("#region-main").append(b);c=a("#snap-footer-alert")})}})();this.setTitle=function(b){a(".snap-footer-alert-title").html(b);this.setSrNotice("");c.focus()};this.setSrNotice=function(a){c.find("p.sr-only").html(a)};this.addAjaxLoading=function(b){b=!b?M.util.get_string("loading","theme_snap"):b;var c=a(".snap-footer-alert-title");if(0===c.find(".loadingstat").length){c.append("<span class=\"loadingstat spinner-three-quarters\">"+b+"</span>")}};this.removeAjaxLoading=function(){c.find(".loadingstat").remove()};this.show=function(b){c.prependTo("section#region-main");c.addClass("snap-footer-alert-visible");if("function"==typeof b){a(".snap-footer-alert-cancel").click(b);a(".snap-footer-alert-cancel").addClass("state-visible")}else{a(".snap-footer-alert-cancel").removeClass("state-visible")}};this.hide=function(){c.removeClass("snap-footer-alert-visible");a(".snap-footer-alert-cancel").removeClass("state-visible");c.detach()};this.hideAndReset=function(){this.removeAjaxLoading();this.setTitle("");this.setSrNotice("");this.hide()}}});
define ("theme_snap/adminevents",["jquery","core/str"],function(a,b){return{init:function init(){b.get_strings([{key:"admineventwarning",component:"theme_snap"},{key:"gotocalendarsnap",component:"theme_snap"}]).done(function(b){a(".block_calendar_upcoming .gotocal a").before("<span>"+b[0]+" </span>");a(".block_calendar_upcoming .gotocal a").text(b[1]);a(".block_calendar_upcoming .gotocal ").addClass("alert alert-warning alert-block");a(".block_calendar_month .card-body").append("<div class='alleventswarning alert alert-warning alert-block'><span>"+b[0]+"<a href='"+location.origin+"/calendar/view.php'> "+b[1]+"</a></span></div>")})}}});
define ("theme_snap/wcloader",[],function(){return{init:function init(a){var b=JSON.parse(a);if({}!==b){require.config({enforceDefine:!1,paths:b});var c=Object.keys(b);require(c,function(){})}}}});
function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("theme_snap/messages",["jquery","core/pubsub"],function(a,b){var c=[],d=560;return{init:function init(){if(0===a(".preferences-page-container").length&&0===a(".message-app.main").length&&(0!=a("#page-message-edit").length||0!=a("#page-message-index").length)){var e=a(".drawer .message-app");e.css("visibility","visible");e.animate({width:"100%"},0);document.addEventListener("messages-drawer:toggle",function(){if(a("#page-message-edit").length||a("#page-message-index").length){if(a(".block_settings").hasClass("state-visible")){if(a(window).width()<d){a(".drawer .message-app").hide()}else{a(".drawer .message-app").animate({width:"50%"},0)}}else{if(a(window).width()<d){a(".drawer .message-app").show()}else{a(".drawer .message-app").animate({width:"100%"},0)}}}});document.addEventListener("messages-drawer:pm-toggle",function(){if(a("#page-message-edit").length||a("#page-message-index").length){if(a(".snap-pm-open").length){a(".drawer .message-app").hide()}else{a(".drawer .message-app").show()}}});var f=a("div.popover-region");f.on("popoverregion:menuopened",function(){if(a("#page-message-edit").length||a("#page-message-index").length){var b=a(this).attr("id");if(-1==c.indexOf(b)){c.push(b)}if(0<c.length){if(a(window).width()<d){a(".drawer .message-app").hide()}else{a(".drawer .message-app").animate({width:"50%"},0)}}}}).bind();f.on("popoverregion:menuclosed",function(){if(a("#page-message-edit").length||a("#page-message-index").length){var b=a(this).attr("id"),e=c.indexOf(b);c.splice(e,1);if(0==c.length){if(a(window).width()<d){a(".drawer .message-app").show()}else{a(".drawer .message-app").animate({width:"100%"},0)}}}}).bind()}else if(0!=a("#page-user-profile").length||0!=a(".userprofile #message-user-button").length){b.subscribe("message-drawer-create-conversation-with-user",function(a){this.redirectToMessage(a)});b.subscribe("message-drawer-show-conversation",function(a){this.redirectToMessage(a)})}},redirectToMessage:function redirectToMessage(a){var b="";if("object"===_typeof(a)&&a.userid){b=parseInt(a.userid)}else{b=parseInt(a)}var c=M.cfg.wwwroot;window.location=c.concat("/message/index.php?id=",b)}}});
define ("theme_snap/appear",["jquery"],function(a){(function(a){var e=[],f=!1,g=!1,h={interval:250,force_process:!1},i={},j=a(window),k=[];function b(b){return a(b).filter(function(){return a(this).is(":appeared")})}function c(){g=!1;for(var a=0,c=e.length,d;a<c;a++){d=b(e[a]);d.trigger("appear",[d]);if(k[a]){var f=k[a].not(d);f.trigger("disappear",[f])}k[a]=d}}function d(a){e.push(a);k.push()}a.expr[":"].appeared=function(b){var c=a(b);if(!c.is(":visible")){return!1}var d=j.scrollLeft(),e=j.scrollTop(),f=c.offset(),g=f.left,h=f.top,k=c.data("appear-top-offset")||i.appeartopoffset||0,l=c.data("appear-left-offset")||i.appearleftoffset||0;if(h+c.height()+k>=e&&h-k<=e+j.height()&&g+c.width()+l>=d&&g-l<=d+j.width()){return!0}else{return!1}};a.fn.extend({appear:function appear(b){i=a.extend({},h,b||{});var e=this.selector||this;if(!f){var j=function(){if(g){return}g=!0;setTimeout(c,i.interval)};a(window).scroll(j).resize(j);a(".appear_enabled").scroll(j);f=!0}if(i.force_process){setTimeout(c,i.interval)}d(e);return a(e)}});a.extend({force_appear:function force_appear(){if(f){c();return!0}return!1}})})(function(){if("undefined"!=typeof module){return require("jquery")}else{return a}}());return a});
define ("theme_snap/model_view",["jquery","core/notification","core/templates","core/log"],function(a,b,c,d){return function(e,f,g){var h=function(b,c,d){var e=[];a.each(a(b)[0].attributes,function(){if("data-model"==this.name){return!0}if(d&&"id"==this.name){return!0}e.push(this.name);a(c).attr(this.name,this.value);return!0});a.each(a(c)[0].attributes,function(){if(-1==e.indexOf(this.name)){a(c).removeAttr(this.name)}})},i=function(i,j){if(!i){d.debug("Using data element for model");i=a(e).data("model")}else{d.debug("Using object for model")}for(var k in i){g[k]=i[k]}a(e).data("model",g);c.render(f,g).done(function(b){var c=a(a.parseHTML(b));a(e).html(c.html());h(c,a(e),!0);if("function"==typeof j){j()}a(e).trigger("modelUpdated")}).fail(b.exception)},j=function(){if(!g&&a(e).data("model")){g=a(e).data("model")}if(1!=a(e).data("modelInitialised")){a(e).on("modelUpdate",function(a,b,c){i(b,c)})}a(e).data("modelInitialised",1)};j()}});
define ("theme_snap/cover_image",["jquery","core/log","core/ajax","core/notification","theme_snap/ajax_notification"],function(a,b,c,d,e){var f=function(b,c){var d=M.util.get_string("closebuttontitle","moodle");if(!a(b).length){a("#snap-coverimagecontrol").before("<div id=\""+b+"\" class=\"snap-alert-cover-image alert alert-warning\" role=\"alert\">"+c+"<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\""+d+"\"><span aria-hidden=\"true\">&times;</span></button></div>")}},g=function(a){var b=Math.floor(Math.log(a)/Math.log(1024));return 1*(a/Math.pow(1024,b)).toFixed(2)+" "+["B","kB","MB","GB","TB"][b]},h=function(){a("#snap-changecoverimageconfirmation .ok").removeClass("ajaxing");a("#snap-alert-cover-image-size").remove();a("#snap-alert-cover-image-bytes").remove();a("label[for=\"snap-coverfiles\"]").removeClass("ajaxing");a("#snap-changecoverimageconfirmation").removeClass("state-visible");a("label[for=\"snap-coverfiles\"]").addClass("state-visible");a("#snap-coverfiles").val("")},i=function(){a("#snap-alert-cover-image-upload-failed").remove();a("#snap-changecoverimageconfirmation").removeClass("disabled");a("label[for=\"snap-coverfiles\"]").removeClass("state-visible");a("#snap-changecoverimageconfirmation").addClass("state-visible");a("body").removeClass("cover-image-change")},j=function(b,d){a("#page-header").data("servercoverfile",a("#page-header").css("background-image"));a("#changecoverimage").click(function(b){b.preventDefault();a(this).removeClass("state-visible");a("label[for=\"snap-coverfiles\"]").addClass("state-visible")});var j,k;a("#snap-coverfiles").on("change",function(c){a("body").addClass("cover-image-change");var d=c.target.files;if(!d.length){return}j=d[0];if(!j.type.match("image.*")){return}var e=new FileReader;a("label[for=\"snap-coverfiles\"]").addClass("ajaxing");e.onload=function(c){return function(d){k=d.target.result;a(".path-course-view #page-header").addClass("mast-image");a(".path-course-view #page-header .breadcrumb-item a").addClass("mast-breadcrumb");var e=b;if(c.size>e){h();var j=g(e),l=M.util.get_string("error:coverimageexceedsmaxbytes","theme_snap",j);f("snap-alert-cover-image-bytes",l);return}else{a("#snap-alert-cover-image-bytes").remove()}var m=a("<img />");m=m.get(0);m.src=k;a(m).on("load",function(){if(1024>m.width){f("snap-alert-cover-image-size",M.util.get_string("error:coverimageresolutionlow","theme_snap"))}else{a("#snap-alert-cover-image-size").remove()}});a("#page-header").css("background-image","url("+k+")");a("#page-header").data("localcoverfile",c.name);i()}}(j);e.readAsDataURL(j)});a("#snap-changecoverimageconfirmation .ok").click(function(){if(a(this).parent().hasClass("disabled")){return}a("#snap-alert-cover-image-size").remove();a("#snap-alert-cover-image-bytes").remove();a("#snap-changecoverimageconfirmation .ok").addClass("ajaxing");a("#snap-changecoverimageconfirmation").addClass("disabled");var b=k.split("base64,")[1];d.imagedata=b;d.imagefilename=j.name;c.call([{methodname:"theme_snap_cover_image",args:{params:d},done:function done(a){h();if(a.contrast){f("snap-alert-cover-image-size",a.contrast)}if(!a.success&&a.warning){f("snap-alert-cover-image-upload-failed",a.warning)}},fail:function fail(a){h();e.ifErrorShowBestMsg(a)}}],!0,!0)});a("#snap-changecoverimageconfirmation .cancel").click(function(){if(a(this).parent().hasClass("disabled")){return}a("#page-header").css("background-image",a("#page-header").data("servercoverfile"));h()});a("#snap-coverimagecontrol").addClass("snap-js-enabled")};return{courseImage:function courseCoverImage(a,b){j(b,{imagefilename:null,imagedata:null,categoryid:null,courseshortname:a})},categoryImage:function categoryCoverImage(a,b){j(b,{imagefilename:null,imagedata:null,categoryid:a,courseshortname:null})}}});
define ("theme_snap/course_modules",["jquery","core/ajax","theme_snap/util","theme_snap/ajax_notification","core/str","core/event"],function(a,b,c,d,e,f){var g=function(b,c){b.find(".snap-asset-completion-tracking").html(c);b.find(".btn-link").focus();a(document).trigger("snapModuleCompletionChange",b)},h=function(){a(".course-content").on("submit","form.togglecompletion",function(c){c.preventDefault();var e=a(this);if(e.hasClass("ajaxing")){return}var f=a(e).find("input[name=\"id\"]").val(),h=a(e).find("input[name=\"completionstate\"]").val(),i=a(e).parents("li.snap-asset").first();e.addClass("ajaxing");b.call([{methodname:"theme_snap_course_module_completion",args:{id:f,completionstate:h},done:function done(a){d.ifErrorShowBestMsg(a).done(function(b){e.removeClass("ajaxing");if(b){}else{g(i,a.completionhtml)}})},fail:function fail(a){d.ifErrorShowBestMsg(a).then(function(){e.removeClass("ajaxing")})}}],!0,!0)})},i=function(a,b){a.find(".pagemod-content").slideToggle("fast",function(){if(a.is(".state-expanded")){a.attr("aria-expanded","true");a.find(".pagemod-content").focus()}else{a.attr("aria-expanded","false");a.focus()}});if(b){g(a,b)}},j=function(){a(document).on("click",".modtype_page .instancename,.pagemod-readmore,.pagemod-content .snap-action-icon",function(b){var h=a(this).closest(".modtype_page");c.scrollToElement(h);var j=h.hasClass("state-expanded");h.toggleClass("state-expanded");var k=h.find(".pagemod-readmore"),l=h.find(".pagemod-content");if(1==l.data("content-loaded")){i(h);var m=M.cfg.wwwroot+"/theme/snap/rest.php?action=read_page&contextid="+k.data("pagemodcontext");if(!j){a.ajax({type:"GET",async:!0,url:m,success:function success(a){d.ifErrorShowBestMsg(a).done(function(b){if(b){}else{g(h,a.completionhtml)}})}})}}else{if(!j){var n=e.get_string("loading","theme_snap");a.when(n).done(function(a){h.find(".contentafterlink").prepend("<div class=\"ajaxstatus alert alert-info\">"+a+"</div>")});var o=M.cfg.wwwroot+"/theme/snap/rest.php?action=get_page&contextid="+k.data("pagemodcontext");a.ajax({type:"GET",async:!0,url:o,success:function success(a){d.ifErrorShowBestMsg(a).done(function(b){if(b){}else{l.prepend(a.html);l.data("content-loaded",1);h.find(".contentafterlink .ajaxstatus").remove();i(h,a.completionhtml);f.notifyFilterContentUpdated(".pagemod-content")}})}}).then(function(){a(document).trigger("snap-course-content-loaded")})}else{i(h)}}b.preventDefault()})},k=function(b){var c=function(b,c){var d=a("#snap-light-box");if(0===d.length){a(b).append("<div id=\"snap-light-box\" tabindex=\"-1\"><div id=\"snap-light-box-content\"></div><a id=\"snap-light-box-close\" class=\"pull-right snap-action-icon snap-icon-close\" href=\"#\"><small>Close</small></a></div>");a("#snap-light-box-close").click(function(a){a.preventDefault();a.stopPropagation();f();if("function"==typeof c){c()}});d=a("#snap-light-box")}return d},f=function(){var a=c();a.remove()},h=function(b,d,e){d=d?d:a("body");var f=c(d,e);if(b){var g=a("#snap-light-box-content");g.html("");g.append(b)}f.addClass("state-visible")},i=a("body"),j="<div class=\"loadingstat three-quarters\">"+Y.Escape.html(M.util.get_string("loading","theme_snap"))+"</div>";h(j,i,function(){a(b).attr("tabindex","-1").focus();a(b).removeAttr("tabindex")});a.ajax({type:"GET",async:!0,url:M.cfg.wwwroot+"/theme/snap/rest.php?action=get_media&contextid="+a(b).data("modcontext"),success:function success(c){d.ifErrorShowBestMsg(c).done(function(d){if(d){}else{h(c.html,i);g(a(b),c.completionhtml);a(document).trigger("snapContentRevealed");a("#snap-light-box").focus()}})}})};return{init:function init(b){if(b.loadPageInCourse){j()}h();a(document).on("click","[data-action=hide],[data-action=show],[data-action=stealth]",function(){if("hide"===a(this).attr("data-action")){a(this).closest("li.activity").addClass("draft");a(this).closest("li.activity").removeClass("stealth")}else if("stealth"===a(this).attr("data-action")){a(this).closest("li.activity").removeClass("draft");a(this).closest("li.activity").addClass("stealth")}else if("show"===a(this).attr("data-action")){a(this).closest("li.activity").removeClass("draft");a(this).closest("li.activity").removeClass("stealth")}});a(document).on("click",".js-snap-media .snap-asset-link [href*=\"/mod/resource/view.php?id=\"]",function(b){k(a(this).closest(".snap-resource, .snap-extended-resource"));b.preventDefault()});a(document).on("click",".snap-resource-card .snap-resource, .snap-extended-resource",function(b){var c=a(b.target),d="_self",e=a(c).closest(".snap-resource").find(".snap-asset-link a"),f="";if(0<e.length){f=a(e).attr("href")}var g=a(c).closest(".snap-asset-completion-tracking, .snap-asset-actions, .contentafterlink a, .ally-actions, .snap-header-card, .contentafterlink, .snap-asset-meta").length;if(!g){if(a(this).hasClass("js-snap-media")){k(this)}else{if(""===f){return}if("_blank"===a(e).attr("target")){d="_blank"}sessionStorage.setItem("lastMod",a(this).attr("id"));window.open(f,d)}b.preventDefault()}})}}});
function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}(function(a,b){'use strict';if("function"==typeof define&&define.amd){define ("theme_snap/headroom",[],b)}else if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))){module.exports=b()}else{a.Headroom=b()}})(this,function(){'use strict';var f={bind:!!function(){}.bind,classList:"classList"in document.documentElement,rAF:!!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)};window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;function a(a){this.callback=a;this.ticking=!1}a.prototype={constructor:a,update:function update(){this.callback&&this.callback();this.ticking=!1},requestTick:function requestTick(){if(!this.ticking){requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this)));this.ticking=!0}},handleEvent:function handleEvent(){this.requestTick()}};function b(a){return a&&"undefined"!=typeof window&&(a===window||a.nodeType)}function c(a){if(0>=arguments.length){throw new Error("Missing arguments in extend function")}var d=a||{},e,f;for(f=1;f<arguments.length;f++){var g=arguments[f]||{};for(e in g){if("object"===_typeof(d[e])&&!b(d[e])){d[e]=c(d[e],g[e])}else{d[e]=d[e]||g[e]}}}return d}function d(a){return a===Object(a)?a:{down:a,up:a}}function e(a,b){b=c(b,e.options);this.lastKnownScrollY=0;this.elem=a;this.tolerance=d(b.tolerance);this.classes=b.classes;this.offset=b.offset;this.scroller=b.scroller;this.initialised=!1;this.onPin=b.onPin;this.onUnpin=b.onUnpin;this.onTop=b.onTop;this.onNotTop=b.onNotTop;this.onBottom=b.onBottom;this.onNotBottom=b.onNotBottom}e.prototype={constructor:e,init:function init(){if(!e.cutsTheMustard){return}this.debouncer=new a(this.update.bind(this));this.elem.classList.add(this.classes.initial);setTimeout(this.attachEvent.bind(this),100);return this},destroy:function destroy(){var a=this.classes;this.initialised=!1;this.elem.classList.remove(a.unpinned,a.pinned,a.top,a.notTop,a.initial);this.scroller.removeEventListener("scroll",this.debouncer,!1)},attachEvent:function attachEvent(){if(!this.initialised){this.lastKnownScrollY=this.getScrollY();this.initialised=!0;this.scroller.addEventListener("scroll",this.debouncer,!1);this.debouncer.handleEvent()}},unpin:function unpin(){var a=this.elem.classList,b=this.classes;if(a.contains(b.pinned)||!a.contains(b.unpinned)){a.add(b.unpinned);a.remove(b.pinned);this.onUnpin&&this.onUnpin.call(this)}},pin:function pin(){var a=this.elem.classList,b=this.classes;if(a.contains(b.unpinned)){a.remove(b.unpinned);a.add(b.pinned);this.onPin&&this.onPin.call(this)}},top:function top(){var a=this.elem.classList,b=this.classes;if(!a.contains(b.top)){a.add(b.top);a.remove(b.notTop);this.onTop&&this.onTop.call(this)}},notTop:function notTop(){var a=this.elem.classList,b=this.classes;if(!a.contains(b.notTop)){a.add(b.notTop);a.remove(b.top);this.onNotTop&&this.onNotTop.call(this)}},bottom:function bottom(){var a=this.elem.classList,b=this.classes;if(!a.contains(b.bottom)){a.add(b.bottom);a.remove(b.notBottom);this.onBottom&&this.onBottom.call(this)}},notBottom:function notBottom(){var a=this.elem.classList,b=this.classes;if(!a.contains(b.notBottom)){a.add(b.notBottom);a.remove(b.bottom);this.onNotBottom&&this.onNotBottom.call(this)}},getScrollY:function getScrollY(){return this.scroller.pageYOffset!==void 0?this.scroller.pageYOffset:this.scroller.scrollTop!==void 0?this.scroller.scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop},getViewportHeight:function getViewportHeight(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},getElementPhysicalHeight:function getElementPhysicalHeight(a){return Math.max(a.offsetHeight,a.clientHeight)},getScrollerPhysicalHeight:function getScrollerPhysicalHeight(){return this.scroller===window||this.scroller===document.body?this.getViewportHeight():this.getElementPhysicalHeight(this.scroller)},getDocumentHeight:function getDocumentHeight(){var a=document.body,b=document.documentElement;return Math.max(a.scrollHeight,b.scrollHeight,a.offsetHeight,b.offsetHeight,a.clientHeight,b.clientHeight)},getElementHeight:function getElementHeight(a){return Math.max(a.scrollHeight,a.offsetHeight,a.clientHeight)},getScrollerHeight:function getScrollerHeight(){return this.scroller===window||this.scroller===document.body?this.getDocumentHeight():this.getElementHeight(this.scroller)},isOutOfBounds:function isOutOfBounds(a){var b=a+this.getScrollerPhysicalHeight()>this.getScrollerHeight();return 0>a||b},toleranceExceeded:function toleranceExceeded(a,b){return Math.abs(a-this.lastKnownScrollY)>=this.tolerance[b]},shouldUnpin:function shouldUnpin(a,b){var c=a>this.lastKnownScrollY,d=a>=this.offset;return c&&d&&b},shouldPin:function shouldPin(a,b){var c=a<this.lastKnownScrollY,d=a<=this.offset;return c&&b||d},update:function update(){var a=this.getScrollY(),b=a>this.lastKnownScrollY?"down":"up",c=this.toleranceExceeded(a,b);if(this.isOutOfBounds(a)){return}if(a<=this.offset){this.top()}else{this.notTop()}if(a+this.getViewportHeight()>=this.getScrollerHeight()){this.bottom()}else{this.notBottom()}if(this.shouldUnpin(a,c)){this.unpin()}else if(this.shouldPin(a,c)){this.pin()}this.lastKnownScrollY=a}};e.options={tolerance:{up:0,down:0},offset:0,scroller:window,classes:{pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",bottom:"headroom--bottom",notBottom:"headroom--not-bottom",initial:"headroom"}};e.cutsTheMustard="undefined"!=typeof f&&f.rAF&&f.bind&&f.classList;return e});
define('local_ce/wcloader', ["jquery"],function(a){return{init:function(b){var c=JSON.parse(b);c!=={}&&a.each(c,function(b,c){var d=document.createElement("script");d.type=c.type,d.src=c.src,a("body").append(d)}),a("#local_ce_loader").toggle()}}});
define ("local_drift/drift",["jquery","core/str"],function(a,b){"use strict";!function(){var a=window.driftt=window.drift=window.driftt||[];if(!a.init){if(a.invoked)return void(window.console&&console.error&&console.error("Drift snippet included twice."));a.invoked=!0,a.methods=["identify","config","track","reset","debug","show","ping","page","hide","off","on"],a.factory=function(b){return function(){var c=Array.prototype.slice.call(arguments);return c.unshift(b),a.push(c),a}},a.methods.forEach(function(b){a[b]=a.factory(b)}),a.load=function(a){var b=Math.ceil(new Date/300000)*300000,c=document.createElement("script");c.type="text/javascript",c.async=!0,c.crossorigin="anonymous",c.src="https://js.driftt.com/include/"+b+"/"+a+".js";var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)}}}();drift.SNIPPET_VERSION="0.3.1";var c=function(a){drift.load(a)};a(function(){drift.on("ready",function(b){a(".drift-open-widget").click(function(a){a.preventDefault();b.sidebar.open()})})});return{getScript:function getScript(a){var b=Math.ceil(new Date/300000)*300000,c=document.createElement("script");c.type="text/javascript",c.async=!0,c.crossorigin="anonymous",c.src="https://js.driftt.com/embeds/"+b+"/"+a+".json";return c},init:function init(a){c(a)},testConnection:function testConnection(d){c(d);var e=b.get_string("drift_welcome_message","local_drift");a.when(e).done(function(a){drift.on("ready",function(b){b.showWelcomeMessage({message:a})})})},sendData:function sendData(a,b){c(a);drift.identify(b.userid,b.data)}}});
define ("local_drift/settings",["jquery","core/str","core/modal_factory","core/templates","local_drift/drift"],function(a,b,c,d,f){return{init:function init(g){var h=a("#admin-clientkey"),i=a("<div></div>").attr("class","form-setting"),j=a("<div></div>").attr("class","form-select"),k=a("<button>Test connection</button>").attr("id","drift_test_connection");if(h.hasClass("row")){i.attr("class","row");j.attr("class","offset-sm-3 col-sm-3");k.css("margin-bottom","1em")}k.attr("class","btn btn-primary").attr("type","submit");j.append(k);i.append(j);var l=function(b){a(k).attr("disabled","disabled");a(k).text(b)},m=b.get_strings([{key:"drift_testconnection",component:"local_drift"},{key:"drift_buttondisabled",component:"local_drift"}]);a.when(m).done(function(b){var c=a("#id_s_local_drift_clientkey");if(""==c.val()){l(b[1])}else{k.text(b[0])}a(c).on("input",function(){l(b[1])})});var n=b.get_strings([{key:"drift_testconnection",component:"local_drift"},{key:"drift_connection_verified",component:"local_drift"},{key:"drift_connection_fail",component:"local_drift"}]),o=[];a.when(n).done(function(a){o=a;c.create({title:a[0],body:d.render("local_drift/settings",{}),type:c.types.DEFAULT},k).done(function(){h.append(i)})});k.click(function(b){b.preventDefault();t();a("#drift_result").text("...");var c=f.getScript(g);if(M.cfg.behatsiterunning){var d=M.cfg.wwwroot+"/local/drift/tests/fixtures/";c.src=g.trim()=="right-password".trim()?d+"dummy-drift.js":d+"empty.js"}a.get(c.src).done(function(){r(p,20).then(function(){q(!0,o[1])});f.testConnection(g)}).fail(function(){r(p,20).then(function(){q(!1,o[2])})})});var p=function(){return 0!==a("#drift_testing").length},q=function(b,c){s(b);a("#drift_result").text(c)},r=function(b,c){c=!c?10:c;var d=a.Deferred(),e=0,f=setInterval(function(){e=e+1;if(e>c){d.reject();clearInterval(f)}else{if(b()){d.resolve();clearInterval(f)}}},1e3);return d.promise()},s=function(b){if(b){if(a("#drift_testing").hasClass("alert-warning")){a("#drift_testing").removeClass("alert-warning").addClass("alert-success")}else if(a("#drift_testing").hasClass("alert-danger")){a("#drift_testing").removeClass("alert-danger").addClass("alert-success")}}else{if(a("#drift_testing").hasClass("alert-warning")){a("#drift_testing").removeClass("alert-warning").addClass("alert-danger")}else if(a("#drift_testing").hasClass("alert-success")){a("#drift_testing").removeClass("alert-success").addClass("alert-danger")}}},t=function(){if(a("#drift_testing").hasClass("alert-success")){a("#drift_testing").removeClass("alert-success").addClass("alert-warning")}else if(a("#drift_testing").hasClass("alert-danger")){a("#drift_testing").removeClass("alert-danger").addClass("alert-warning")}}}}});
define('local_grademessenger/grade_messenger', ["jquery","core/templates","core/ajax","core/modal_factory","core/notification","core/str"],function(a,b,c,d,e,f){var g,h,i,j,k={FORMCTRL:".form-control",FORMCTRLFEEDBACK:".form-control-feedback",FORMGROUP:".form-group",GRADEITEM:"#local_grademessenger-gradeitem",MESSAGE:"#local_grademessenger-messagebody-field",MESSAGERANGEBUTTON:"#local_grademessenger-messagerange-btn",NEXTBUTTON:"#local_grademessenger-nextbtn",PREVBUTTON:"#local_grademessenger-previousbtn",RANGE:"#local_grademessenger-range",RANGEMIN:"#local_grademessenger-range-min",RANGEMAX:"#local_grademessenger-range-max",SENDBUTTON:"#local_grademessenger-sendbtn",SUBJECT:"#local_grademessenger-subject-field",USERIDS:"#local_grademessenger-userids",EMAILS:"#local_grademessenger-emails",REMOVEUSERS:".local_grademessenger-removeuser"},l={GRADERANGESCALE:"local_grademessenger/grade_range_scale",GRADERANGENUMERIC:"local_grademessenger/grade_range_numeric",BUTTONS:"local_grademessenger/buttons",MESSAGEUSERS:"local_grademessenger/message_users",GRADEMESSENGER:"local_grademessenger/grade_messenger",CORELOADING:"core/loading"},m=!1,n={gradeitem:null,grademin:null,grademax:null},o=function(a){return a.hasOwnProperty("scaleopts")?f.get_string("itemrangescale","local_grademessenger").then(function(c){return a.itemrangetype=c,b.render(l.GRADERANGESCALE,a)}):(a.step=Math.pow(10,a.decimals*-1),f.get_string("itemrangenum","local_grademessenger",a).then(function(c){return a.itemrangetype=c,b.render(l.GRADERANGENUMERIC,a)}))},p=function(a){return a.then(function(a,c,d){return b.render(l.BUTTONS,{previousbutton:a,nextbutton:c,sendbutton:d})})},q=function(c){var d=b.render(l.MESSAGEUSERS,c),e=f.get_string("back","local_grademessenger"),g=f.get_string("submit","local_grademessenger"),h=a.when(e,null,g),i=p(h);return a.when(d,i).then(function(a,b){return a[0]+b[0]})},r=function(){b.render(l.CORELOADING,{}).then(function(a){return j.setBody(a),w()}).then(function(a){return q(a)}).then(function(a){j.setBody(a),D()})["catch"](e.exception)},s=function(c,d){var e=b.render(l.GRADEMESSENGER,c),g=o(d),h=p(a.when(null,f.get_string("next","local_grademessenger"),null));return a.when(e,g,h).then(function(a,b,c){return a[0]+b[0]+c[0]})},t=function(b){return"undefined"!=typeof h&&(null!==n.gradeitem?n.gradeitem:(n.gradeitem=a.grep(h.gradeitems,function(a){return parseInt(a.id)===parseInt(b.value)})[0],n.gradeitem))},u=function(){return null!==n.grademin&&null!==n.grademax||(n.grademin=parseFloat(a(k.RANGEMIN).val()),n.grademax=parseFloat(a(k.RANGEMAX).val())),{grademin:n.grademin,grademax:n.grademax}},v=function(b){b.hasOwnProperty("scaleopts")&&(a(k.RANGEMIN).val(b.grademin),a(k.RANGEMAX).val(b.grademax))},w=function(){if("undefined"!=typeof i)return a.Deferred().resolve(i).promise();var b=t(a(k.GRADEITEM)),d=u(),e={courseid:g,itemid:b.id};a.extend(e,d);var f=[{methodname:"local_grademessenger_get_message_recipients",args:e}];return c.call(f)[f.length-1].then(function(a){return i=a,a})},x=function(){if("undefined"!=typeof h)return a.Deferred().resolve(h).promise();var b=[{methodname:"local_grademessenger_get_course_grade_items",args:{courseid:g}}];return c.call(b)[b.length-1].then(function(a){return h=a,a})},y=function(){j.getRoot().find(k.FORMCTRLFEEDBACK).text(""),j.getRoot().find(k.FORMCTRL).removeClass("form-control-danger"),j.getRoot().find(k.FORMGROUP).removeClass("has-danger")},z=function(){var b,c,d=a(k.RANGEMIN),e=a(k.RANGEMAX),g=u(),h=g.grademin,i=g.grademax,j=d.data("limit"),l=e.data("limit"),m={grademin:j,grademax:l};return(isNaN(h)||h<j||h>l)&&(b=f.get_string("rangevalidationnumber","local_grademessenger",m)),(isNaN(i)||i>l||i<j)&&(c=f.get_string("rangevalidationnumber","local_grademessenger",m)),"undefined"==typeof c&&"undefined"==typeof b&&h>i&&(b=f.get_string("startrangegreater","local_grademessenger")),a.when(b,c).done(function(a,b){var c=[];"undefined"!=typeof a&&c.push({element:d,message:a}),"undefined"!=typeof b&&c.push({element:e,message:b}),B(c)}),"undefined"==typeof c&&"undefined"==typeof b},A=function(){var b,c,d,e=a(k.SUBJECT),g=a(k.MESSAGE),h=a(k.EMAILS),i=a(k.USERIDS),j=e.val().trim(),l=g.val().trim(),m=h.val().trim(),n=i.val(),o="^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$",p=new RegExp(o),q=[];if(""===j&&(b=f.get_string("subjectrequired","local_grademessenger")),""===l&&(c=f.get_string("messagerequired","local_grademessenger")),""!==m){var r=m.split(",").every(function(a){return p.test(a)});r||(d=f.get_string("emailsnotvalid","local_grademessenger"))}else""===n&&(d=f.get_string("emailsnotvalid","local_grademessenger"));return a.when(b,c,d).done(function(a,b,c){"undefined"!=typeof a&&q.push({element:e,message:a}),"undefined"!=typeof b&&q.push({element:g,message:b}),"undefined"!=typeof c&&q.push({element:h,message:c}),B(q)}),"undefined"==typeof b&&"undefined"==typeof c&&"undefined"==typeof d},B=function(a){a.forEach(function(a){a.element.parent().addClass("has-danger"),a.element.addClass("form-control-danger"),a.element.next(k.FORMCTRLFEEDBACK).text(a.message)})},C=function(){m=!1,i=void 0;var b=a(k.USERIDS).val(),d=a(k.EMAILS).val().trim(),h=a(k.SUBJECT).val().trim(),l=a(k.MESSAGE).val().trim(),n={courseid:g,userids:b,emails:d,subject:h,message:l},o=[{methodname:"local_grademessenger_send_message",args:n}];c.call(o)[o.length-1].then(function(){return f.get_string("messagessent","local_grademessenger")}).done(function(a){e.addNotification({type:"success",message:a})})["catch"](e.exception),j.hide()},D=function(){a(k.PREVBUTTON).on("click",function(){var b=t(),c=u();i=void 0,s(h,b).then(function(d){j.setBody(d),a(k.GRADEITEM).val(b.id),a(k.RANGEMIN).val(c.grademin),a(k.RANGEMAX).val(c.grademax),E()})}),a(k.REMOVEUSERS).on("click",function(){var b=a(this).parent("span"),c=b.data("userid"),d=a(k.USERIDS),e=d.val().split(",").filter(function(a){return parseInt(c)!==parseInt(a)});d.val(e.join(",")),b.remove()}),a(k.SENDBUTTON).on("click",function(){y(),A()&&C()})},E=function(){a(k.GRADEITEM).change(function(){n.gradeitem=null;var b=t(this);o(b).then(function(b){a(k.RANGE).replaceWith(b),v(n.gradeitem)})}),a(k.NEXTBUTTON).on("click",function(){n.grademin=null,n.grademax=null,y(),z()&&r()})},F=function(){m||x().then(function(a){var b=a.gradeitems[0];return n.gradeitem=b,s(a,b)}).then(function(a){j.setBody(a),E(),v(n.gradeitem),m=!0})["catch"](e.exception)},G=function(b){return d.create({type:d.types.DEFAULT,large:!1,title:b},a(k.MESSAGERANGEBUTTON))};return{init:function(c,d){g=d,a.when(G(c),b.render(l.CORELOADING,{})).done(function(a,b){a.setBody(b[0]),a.getRoot().on("modal:shown",function(){F(a)}),j=a})["catch"](e.exception)}}});
function _typeof2(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof2=function(a){return typeof a}}else{_typeof2=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof2(a)}define ("local_intelliboard/flatpickr",["jquery"],function(a){function b(q,e){function H(a){return a.bind(oa)}function n(a){oa.config.noCalendar&&!oa.selectedDates.length&&(oa.selectedDates=[oa.now]),na(a),oa.selectedDates.length&&(!oa.minDateHasTime||"input"!==a.type||2<=a.target.value.length?(I(),ea()):setTimeout(function(){I(),ea()},1e3))}function I(){if(oa.config.enableTime){var b=(parseInt(oa.hourElement.value,10)||0)%(oa.amPM?12:24),c=(parseInt(oa.minuteElement.value,10)||0)%60,d=oa.config.enableSeconds?(parseInt(oa.secondElement.value,10)||0)%60:0;void 0!==oa.amPM&&(b=b%12+12*("PM"===oa.amPM.textContent)),oa.minDateHasTime&&0===ma(oa.latestSelectedDateObj,oa.config.minDate)&&(b=Math.max(b,oa.config.minDate.getHours()))===oa.config.minDate.getHours()&&(c=Math.max(c,oa.config.minDate.getMinutes())),oa.maxDateHasTime&&0===ma(oa.latestSelectedDateObj,oa.config.maxDate)&&(b=Math.min(b,oa.config.maxDate.getHours()))===oa.config.maxDate.getHours()&&(c=Math.min(c,oa.config.maxDate.getMinutes())),a(b,c,d)}}function S(b){var c=b||oa.latestSelectedDateObj;c&&a(c.getHours(),c.getMinutes(),c.getSeconds())}function a(a,b,c){oa.selectedDates.length&&oa.latestSelectedDateObj.setHours(a%24,b,c||0,0),oa.config.enableTime&&!oa.isMobile&&(oa.hourElement.value=oa.pad(oa.config.time_24hr?a:(12+a)%12+12*(0==a%12)),oa.minuteElement.value=oa.pad(b),oa.config.time_24hr||(oa.amPM.textContent=12<=a?"PM":"AM"),!0===oa.config.enableSeconds&&(oa.secondElement.value=oa.pad(c)))}function i(a){var b=a.target.value;a.delta&&(b=(parseInt(b)+a.delta).toString()),4!==b.length&&"Enter"!==a.key||(oa.currentYearElement.blur(),/[^\d]/.test(b)||Y(b))}function l(a,b,c){return b instanceof Array?b.forEach(function(b){return l(a,b,c)}):a instanceof Array?a.forEach(function(a){return l(a,b,c)}):(a.addEventListener(b,c),void oa._handlers.push({element:a,event:b,handler:c}))}function c(a){return function(b){return 1===b.which&&a(b)}}function o(){if(oa._handlers=[],oa._animationLoop=[],oa.config.wrap&&["open","close","toggle","clear"].forEach(function(a){Array.prototype.forEach.call(oa.element.querySelectorAll("[data-"+a+"]"),function(b){return l(b,"mousedown",c(oa[a]))})}),oa.isMobile)return X();if(oa.debouncedResize=la(P,50),oa.triggerChange=function(){_("Change")},oa.debouncedChange=la(oa.triggerChange,300),"range"===oa.config.mode&&oa.daysContainer&&l(oa.daysContainer,"mouseover",function(a){return L(a.target)}),l(window.document.body,"keydown",A),oa.config.static||l(oa._input,"keydown",A),oa.config.inline||oa.config.static||l(window,"resize",oa.debouncedResize),void 0!==window.ontouchstart&&l(window.document,"touchstart",F),l(window.document,"mousedown",c(F)),l(oa._input,"blur",F),!0===oa.config.clickOpens&&(l(oa._input,"focus",oa.open),l(oa._input,"mousedown",c(oa.open))),oa.config.noCalendar||(oa.monthNav.addEventListener("wheel",function(a){return a.preventDefault()}),l(oa.monthNav,"wheel",la(ga,10)),l(oa.monthNav,"mousedown",c(ha)),l(oa.monthNav,["keyup","increment"],i),l(oa.daysContainer,"mousedown",c(K)),oa.config.animate&&(l(oa.daysContainer,["webkitAnimationEnd","animationend"],r),l(oa.monthNav,["webkitAnimationEnd","animationend"],f))),oa.config.enableTime){var a=function(a){return a.target.select()};l(oa.timeContainer,["wheel","input","increment"],n),l(oa.timeContainer,"mousedown",c(s)),l(oa.timeContainer,["wheel","increment"],oa.debouncedChange),l(oa.timeContainer,"input",oa.triggerChange),l([oa.hourElement,oa.minuteElement],"focus",a),void 0!==oa.secondElement&&l(oa.secondElement,"focus",function(){return oa.secondElement.select()}),void 0!==oa.amPM&&l(oa.amPM,"mousedown",c(function(a){n(a),oa.triggerChange(a)}))}}function d(){for(var a=oa._animationLoop.length;a--;){oa._animationLoop[a](),oa._animationLoop.splice(a,1)}}function r(a){if(1<oa.daysContainer.childNodes.length)switch(a.animationName){case"fpSlideLeft":oa.daysContainer.lastChild.classList.remove("slideLeftNew"),oa.daysContainer.removeChild(oa.daysContainer.firstChild),oa.days=oa.daysContainer.firstChild,d();break;case"fpSlideRight":oa.daysContainer.firstChild.classList.remove("slideRightNew"),oa.daysContainer.removeChild(oa.daysContainer.lastChild),oa.days=oa.daysContainer.firstChild,d();}}function f(a){switch(a.animationName){case"fpSlideLeftNew":case"fpSlideRightNew":oa.navigationCurrentMonth.classList.remove("slideLeftNew"),oa.navigationCurrentMonth.classList.remove("slideRightNew");for(var b=oa.navigationCurrentMonth;b.nextSibling&&/curr/.test(b.nextSibling.className);){oa.monthNav.removeChild(b.nextSibling)}for(;b.previousSibling&&/curr/.test(b.previousSibling.className);){oa.monthNav.removeChild(b.previousSibling)}oa.oldCurMonth=null;}}function m(a){a=a?oa.parseDate(a):oa.latestSelectedDateObj||(oa.config.minDate>oa.now?oa.config.minDate:oa.config.maxDate&&oa.config.maxDate<oa.now?oa.config.maxDate:oa.now);try{oa.currentYear=a.getFullYear(),oa.currentMonth=a.getMonth()}catch(b){console.error(b.stack),console.warn("Invalid date supplied: "+a)}oa.redraw()}function s(a){~a.target.className.indexOf("arrow")&&p(a,a.target.classList.contains("arrowUp")?1:-1)}function p(b,c,d){var e=d||b.target.parentNode.childNodes[0],a=aa("increment");a.delta=c,e.dispatchEvent(a)}function u(b){var c=ia("div","numInputWrapper"),d=ia("input","numInput "+b),e=ia("span","arrowUp"),a=ia("span","arrowDown");return d.type="text",d.pattern="\\d*",c.appendChild(d),c.appendChild(e),c.appendChild(a),c}function t(){var a=window.document.createDocumentFragment();oa.calendarContainer=ia("div","flatpickr-calendar"),oa.calendarContainer.tabIndex=-1,oa.config.noCalendar||(a.appendChild(y()),oa.innerContainer=ia("div","flatpickr-innerContainer"),oa.config.weekNumbers&&oa.innerContainer.appendChild(E()),oa.rContainer=ia("div","flatpickr-rContainer"),oa.rContainer.appendChild(x()),oa.daysContainer||(oa.daysContainer=ia("div","flatpickr-days"),oa.daysContainer.tabIndex=-1),D(),oa.rContainer.appendChild(oa.daysContainer),oa.innerContainer.appendChild(oa.rContainer),a.appendChild(oa.innerContainer)),oa.config.enableTime&&a.appendChild(k()),ka(oa.calendarContainer,"rangeMode","range"===oa.config.mode),ka(oa.calendarContainer,"animate",oa.config.animate),oa.calendarContainer.appendChild(a);var b=oa.config.appendTo&&oa.config.appendTo.nodeType;if(oa.config.inline||oa.config.static){if(oa.calendarContainer.classList.add(oa.config.inline?"inline":"static"),oa.config.inline&&!b)return oa.element.parentNode.insertBefore(oa.calendarContainer,oa._input.nextSibling);if(oa.config.static){var c=ia("div","flatpickr-wrapper");return oa.element.parentNode.insertBefore(c,oa.element),c.appendChild(oa.element),oa.altInput&&c.appendChild(oa.altInput),void c.appendChild(oa.calendarContainer)}}(b?oa.config.appendTo:window.document.body).appendChild(oa.calendarContainer)}function v(b,c,d,e){var a=O(c,!0),f=ia("span","flatpickr-day "+b,c.getDate());return f.dateObj=c,f.$i=e,f.setAttribute("aria-label",oa.formatDate(c,oa.config.ariaDateFormat)),0===ma(c,oa.now)&&(oa.todayDateElem=f,f.classList.add("today")),a?(f.tabIndex=-1,ba(c)&&(f.classList.add("selected"),oa.selectedDateElem=f,"range"===oa.config.mode&&(ka(f,"startRange",0===ma(c,oa.selectedDates[0])),ka(f,"endRange",0===ma(c,oa.selectedDates[1]))))):(f.classList.add("disabled"),oa.selectedDates[0]&&c>oa.minRangeDate&&c<oa.selectedDates[0]?oa.minRangeDate=c:oa.selectedDates[0]&&c<oa.maxRangeDate&&c>oa.selectedDates[0]&&(oa.maxRangeDate=c)),"range"===oa.config.mode&&(ca(c)&&!ba(c)&&f.classList.add("inRange"),1===oa.selectedDates.length&&(c<oa.minRangeDate||c>oa.maxRangeDate)&&f.classList.add("notAllowed")),oa.config.weekNumbers&&"prevMonthDay"!==b&&1==d%7&&oa.weekNumbers.insertAdjacentHTML("beforeend","<span class='disabled flatpickr-day'>"+oa.config.getWeek(c)+"</span>"),_("DayCreate",f),f}function C(b,c){var d=b+c||0,e=void 0!==b?oa.days.childNodes[d]:oa.selectedDateElem||oa.todayDateElem||oa.days.childNodes[0],f=function(){(e=e||oa.days.childNodes[d]).focus(),"range"===oa.config.mode&&L(e)};if(void 0===e&&0!==c)return 0<c?(oa.changeMonth(1),d%=42):0>c&&(oa.changeMonth(-1),d+=42),w(f);f()}function w(a){if(!0===oa.config.animate)return oa._animationLoop.push(a);a()}function D(b){var d=(new Date(oa.currentYear,oa.currentMonth,1).getDay()-oa.l10n.firstDayOfWeek+7)%7,e="range"===oa.config.mode;oa.prevMonthDays=oa.utils.getDaysinMonth((oa.currentMonth-1+12)%12),oa.selectedDateElem=void 0,oa.todayDateElem=void 0;var f=oa.utils.getDaysinMonth(),a=window.document.createDocumentFragment(),g=oa.prevMonthDays+1-d,h=0;for(oa.config.weekNumbers&&oa.weekNumbers.firstChild&&(oa.weekNumbers.textContent=""),e&&(oa.minRangeDate=new Date(oa.currentYear,oa.currentMonth-1,g),oa.maxRangeDate=new Date(oa.currentYear,oa.currentMonth+1,(42-d)%f));g<=oa.prevMonthDays;g++,h++){a.appendChild(v("prevMonthDay",new Date(oa.currentYear,oa.currentMonth-1,g),g,h))}for(g=1;g<=f;g++,h++){a.appendChild(v("",new Date(oa.currentYear,oa.currentMonth,g),g,h))}for(var i=f+1;i<=42-d;i++,h++){a.appendChild(v("nextMonthDay",new Date(oa.currentYear,oa.currentMonth+1,i%f),i,h))}e&&1===oa.selectedDates.length&&a.childNodes[0]?(oa._hidePrevMonthArrow=oa._hidePrevMonthArrow||oa.minRangeDate>a.childNodes[0].dateObj,oa._hideNextMonthArrow=oa._hideNextMonthArrow||oa.maxRangeDate<new Date(oa.currentYear,oa.currentMonth+1,1)):da();var j=ia("div","dayContainer");if(j.appendChild(a),oa.config.animate&&void 0!==b)for(;1<oa.daysContainer.childNodes.length;){oa.daysContainer.removeChild(oa.daysContainer.firstChild)}else M(oa.daysContainer);return 0<=b?oa.daysContainer.appendChild(j):oa.daysContainer.insertBefore(j,oa.daysContainer.firstChild),oa.days=oa.daysContainer.firstChild,oa.daysContainer}function M(a){for(;a.firstChild;){a.removeChild(a.firstChild)}}function y(){var a=window.document.createDocumentFragment();oa.monthNav=ia("div","flatpickr-month"),oa.prevMonthNav=ia("span","flatpickr-prev-month"),oa.prevMonthNav.innerHTML=oa.config.prevArrow,oa.currentMonthElement=ia("span","cur-month"),oa.currentMonthElement.title=oa.l10n.scrollTitle;var b=u("cur-year");return oa.currentYearElement=b.childNodes[0],oa.currentYearElement.title=oa.l10n.scrollTitle,oa.config.minDate&&(oa.currentYearElement.min=oa.config.minDate.getFullYear()),oa.config.maxDate&&(oa.currentYearElement.max=oa.config.maxDate.getFullYear(),oa.currentYearElement.disabled=oa.config.minDate&&oa.config.minDate.getFullYear()===oa.config.maxDate.getFullYear()),oa.nextMonthNav=ia("span","flatpickr-next-month"),oa.nextMonthNav.innerHTML=oa.config.nextArrow,oa.navigationCurrentMonth=ia("span","flatpickr-current-month"),oa.navigationCurrentMonth.appendChild(oa.currentMonthElement),oa.navigationCurrentMonth.appendChild(b),a.appendChild(oa.prevMonthNav),a.appendChild(oa.navigationCurrentMonth),a.appendChild(oa.nextMonthNav),oa.monthNav.appendChild(a),Object.defineProperty(oa,"_hidePrevMonthArrow",{get:function get(){return this.__hidePrevMonthArrow},set:function set(a){this.__hidePrevMonthArrow!==a&&(oa.prevMonthNav.style.display=a?"none":"block"),this.__hidePrevMonthArrow=a}}),Object.defineProperty(oa,"_hideNextMonthArrow",{get:function get(){return this.__hideNextMonthArrow},set:function set(a){this.__hideNextMonthArrow!==a&&(oa.nextMonthNav.style.display=a?"none":"block"),this.__hideNextMonthArrow=a}}),da(),oa.monthNav}function k(){oa.calendarContainer.classList.add("hasTime"),oa.config.noCalendar&&oa.calendarContainer.classList.add("noCalendar"),oa.timeContainer=ia("div","flatpickr-time"),oa.timeContainer.tabIndex=-1;var b=ia("span","flatpickr-time-separator",":"),c=u("flatpickr-hour");oa.hourElement=c.childNodes[0];var d=u("flatpickr-minute");if(oa.minuteElement=d.childNodes[0],oa.hourElement.tabIndex=oa.minuteElement.tabIndex=-1,oa.hourElement.value=oa.pad(oa.latestSelectedDateObj?oa.latestSelectedDateObj.getHours():oa.config.defaultHour),oa.minuteElement.value=oa.pad(oa.latestSelectedDateObj?oa.latestSelectedDateObj.getMinutes():oa.config.defaultMinute),oa.hourElement.step=oa.config.hourIncrement,oa.minuteElement.step=oa.config.minuteIncrement,oa.hourElement.min=oa.config.time_24hr?0:1,oa.hourElement.max=oa.config.time_24hr?23:12,oa.minuteElement.min=0,oa.minuteElement.max=59,oa.hourElement.title=oa.minuteElement.title=oa.l10n.scrollTitle,oa.timeContainer.appendChild(c),oa.timeContainer.appendChild(b),oa.timeContainer.appendChild(d),oa.config.time_24hr&&oa.timeContainer.classList.add("time24hr"),oa.config.enableSeconds){oa.timeContainer.classList.add("hasSeconds");var e=u("flatpickr-second");oa.secondElement=e.childNodes[0],oa.secondElement.value=oa.latestSelectedDateObj?oa.pad(oa.latestSelectedDateObj.getSeconds()):"00",oa.secondElement.step=oa.minuteElement.step,oa.secondElement.min=oa.minuteElement.min,oa.secondElement.max=oa.minuteElement.max,oa.timeContainer.appendChild(ia("span","flatpickr-time-separator",":")),oa.timeContainer.appendChild(e)}return oa.config.time_24hr||(oa.amPM=ia("span","flatpickr-am-pm",["AM","PM"][0|11<oa.hourElement.value]),oa.amPM.title=oa.l10n.toggleTitle,oa.amPM.tabIndex=-1,oa.timeContainer.appendChild(oa.amPM)),oa.timeContainer}function x(){oa.weekdayContainer||(oa.weekdayContainer=ia("div","flatpickr-weekdays"));var a=oa.l10n.firstDayOfWeek,b=oa.l10n.weekdays.shorthand.slice();return 0<a&&a<b.length&&(b=[].concat(b.splice(a,b.length),b.splice(0,a))),oa.weekdayContainer.innerHTML="\n\t\t<span class=flatpickr-weekday>\n\t\t\t"+b.join("</span><span class=flatpickr-weekday>")+"\n\t\t</span>\n\t\t",oa.weekdayContainer}function E(){return oa.calendarContainer.classList.add("hasWeeks"),oa.weekWrapper=ia("div","flatpickr-weekwrapper"),oa.weekWrapper.appendChild(ia("span","flatpickr-weekday",oa.l10n.weekAbbreviation)),oa.weekNumbers=ia("div","flatpickr-weeks"),oa.weekWrapper.appendChild(oa.weekNumbers),oa.weekWrapper}function N(b,c,d){var e=(c=void 0===c||c)?b:b-oa.currentMonth,a=!oa.config.animate||!1===d;if(!(0>e&&oa._hidePrevMonthArrow||0<e&&oa._hideNextMonthArrow)){if(oa.currentMonth+=e,(0>oa.currentMonth||11<oa.currentMonth)&&(oa.currentYear+=11<oa.currentMonth?1:-1,oa.currentMonth=(oa.currentMonth+12)%12,_("YearChange")),D(a?void 0:e),a)return _("MonthChange"),da();var f=oa.navigationCurrentMonth;if(0>e)for(;f.nextSibling&&/curr/.test(f.nextSibling.className);){oa.monthNav.removeChild(f.nextSibling)}else if(0<e)for(;f.previousSibling&&/curr/.test(f.previousSibling.className);){oa.monthNav.removeChild(f.previousSibling)}if(oa.oldCurMonth=oa.navigationCurrentMonth,oa.navigationCurrentMonth=oa.monthNav.insertBefore(oa.oldCurMonth.cloneNode(!0),0<e?oa.oldCurMonth.nextSibling:oa.oldCurMonth),0<e?(oa.daysContainer.firstChild.classList.add("slideLeft"),oa.daysContainer.lastChild.classList.add("slideLeftNew"),oa.oldCurMonth.classList.add("slideLeft"),oa.navigationCurrentMonth.classList.add("slideLeftNew")):0>e&&(oa.daysContainer.firstChild.classList.add("slideRightNew"),oa.daysContainer.lastChild.classList.add("slideRight"),oa.oldCurMonth.classList.add("slideRight"),oa.navigationCurrentMonth.classList.add("slideRightNew")),oa.currentMonthElement=oa.navigationCurrentMonth.firstChild,oa.currentYearElement=oa.navigationCurrentMonth.lastChild.childNodes[0],da(),oa.oldCurMonth.firstChild.textContent=oa.utils.monthToStr(oa.currentMonth-e),_("MonthChange"),document.activeElement&&document.activeElement.$i){var g=document.activeElement.$i;w(function(){C(g,0)})}}}function T(a){return!(!oa.config.appendTo||!oa.config.appendTo.contains(a))||oa.calendarContainer.contains(a)}function F(a){if(oa.isOpen&&!oa.config.inline){var b=T(a.target),c=a.target===oa.input||a.target===oa.altInput||oa.element.contains(a.target)||a.path&&a.path.indexOf&&(~a.path.indexOf(oa.input)||~a.path.indexOf(oa.altInput));("blur"===a.type?c&&a.relatedTarget&&!T(a.relatedTarget):!c&&!b)&&-1===oa.config.ignoredFocusElements.indexOf(a.target)&&(oa.close(),"range"===oa.config.mode&&1===oa.selectedDates.length&&(oa.clear(!1),oa.redraw()))}}function Y(a){if(!(!a||oa.currentYearElement.min&&a<oa.currentYearElement.min||oa.currentYearElement.max&&a>oa.currentYearElement.max)){var b=parseInt(a,10),c=oa.currentYear!==b;oa.currentYear=b||oa.currentYear,oa.config.maxDate&&oa.currentYear===oa.config.maxDate.getFullYear()?oa.currentMonth=Math.min(oa.config.maxDate.getMonth(),oa.currentMonth):oa.config.minDate&&oa.currentYear===oa.config.minDate.getFullYear()&&(oa.currentMonth=Math.max(oa.config.minDate.getMonth(),oa.currentMonth)),c&&(oa.redraw(),_("YearChange"))}}function O(b,c){if(oa.config.minDate&&0>ma(b,oa.config.minDate,void 0!==c?c:!oa.minDateHasTime)||oa.config.maxDate&&0<ma(b,oa.config.maxDate,void 0!==c?c:!oa.maxDateHasTime))return!1;if(!oa.config.enable.length&&!oa.config.disable.length)return!0;for(var d,e=oa.parseDate(b,null,!0),a=0<oa.config.enable.length,f=a?oa.config.enable:oa.config.disable,g=0;g<f.length;g++){if((d=f[g])instanceof Function&&d(e))return a;if(d instanceof Date&&d.getTime()===e.getTime())return a;if("string"==typeof d&&oa.parseDate(d,null,!0).getTime()===e.getTime())return a;if("object"===(void 0===d?"undefined":j(d))&&d.from&&d.to&&e>=d.from&&e<=d.to)return a}return!a}function A(a){var b=a.target===oa._input,e=T(a.target),f=oa.config.allowInput,g=oa.isOpen&&(!f||!b),h=oa.config.inline&&b&&!f;if("Enter"===a.key&&f&&b)return oa.setDate(oa._input.value,!0,a.target===oa.altInput?oa.config.altFormat:oa.config.dateFormat),a.target.blur();if(e||g||h){var i=oa.timeContainer&&oa.timeContainer.contains(a.target);switch(a.key){case"Enter":i?ea():K(a);break;case"Escape":a.preventDefault(),oa.close();break;case"ArrowLeft":case"ArrowRight":if(!i)if(a.preventDefault(),oa.daysContainer){var c="ArrowRight"===a.key?1:-1;a.ctrlKey?N(c,!0):C(a.target.$i,c)}else oa.config.enableTime&&!i&&oa.hourElement.focus();break;case"ArrowUp":case"ArrowDown":a.preventDefault();var j="ArrowDown"===a.key?1:-1;oa.daysContainer?a.ctrlKey?(Y(oa.currentYear-j),C(a.target.$i,0)):i||C(a.target.$i,7*j):oa.config.enableTime&&(i||oa.hourElement.focus(),n(a));break;case"Tab":a.target===oa.hourElement?(a.preventDefault(),oa.minuteElement.select()):a.target===oa.minuteElement&&(oa.secondElement||oa.amPM)?(a.preventDefault(),(oa.secondElement||oa.amPM).focus()):a.target===oa.secondElement&&(a.preventDefault(),oa.amPM.focus());break;case"a":a.target===oa.amPM&&(oa.amPM.textContent="AM",I(),ea());break;case"p":a.target===oa.amPM&&(oa.amPM.textContent="PM",I(),ea());}_("KeyDown",a)}}function L(b){if(1===oa.selectedDates.length&&b.classList.contains("flatpickr-day")){for(var e=b.dateObj,f=oa.parseDate(oa.selectedDates[0],null,!0),g=Math.min(e.getTime(),oa.selectedDates[0].getTime()),a=Math.max(e.getTime(),oa.selectedDates[0].getTime()),h=!1,d=g;d<a;d+=oa.utils.duration.DAY){if(!O(new Date(d))){h=!0;break}}for(var i=oa.days.childNodes[0].dateObj.getTime(),j=0;42>j;j++,i+=oa.utils.duration.DAY){(function(i,j){var k=i<oa.minRangeDate.getTime()||i>oa.maxRangeDate.getTime(),c=oa.days.childNodes[j];if(k)return oa.days.childNodes[j].classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(a){c.classList.remove(a)}),"continue";if(h&&!k)return"continue";["startRange","inRange","endRange","notAllowed"].forEach(function(a){c.classList.remove(a)});var l=Math.max(oa.minRangeDate.getTime(),g),d=Math.min(oa.maxRangeDate.getTime(),a);b.classList.add(e<oa.selectedDates[0]?"startRange":"endRange"),f<e&&i===f.getTime()?c.classList.add("startRange"):f>e&&i===f.getTime()&&c.classList.add("endRange"),i>=l&&i<=d&&c.classList.add("inRange")})(i,j)}}}function P(){!oa.isOpen||oa.config.static||oa.config.inline||B()}function $(b){return function(c){var d=oa.config["_"+b+"Date"]=oa.parseDate(c),e=oa.config["_"+("min"===b?"max":"min")+"Date"],a=c&&d instanceof Date;a&&(oa[b+"DateHasTime"]=d.getHours()||d.getMinutes()||d.getSeconds()),oa.selectedDates&&(oa.selectedDates=oa.selectedDates.filter(function(a){return O(a)}),oa.selectedDates.length||"min"!==b||S(d),ea()),oa.daysContainer&&(J(),a?oa.currentYearElement[b]=d.getFullYear():oa.currentYearElement.removeAttribute(b),oa.currentYearElement.disabled=e&&d&&e.getFullYear()===d.getFullYear())}}function R(){var b=["wrap","weekNumbers","allowInput","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],d=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange"];oa.config=Object.create(g.defaultConfig);var e=h({},oa.instanceConfig,JSON.parse(JSON.stringify(oa.element.dataset||{})));oa.config.parseDate=e.parseDate,oa.config.formatDate=e.formatDate,Object.defineProperty(oa.config,"enable",{get:function get(){return oa.config._enable||[]},set:function set(a){return oa.config._enable=z(a)}}),Object.defineProperty(oa.config,"disable",{get:function get(){return oa.config._disable||[]},set:function set(a){return oa.config._disable=z(a)}}),h(oa.config,e),!e.dateFormat&&e.enableTime&&(oa.config.dateFormat=oa.config.noCalendar?"H:i"+(oa.config.enableSeconds?":S":""):g.defaultConfig.dateFormat+" H:i"+(oa.config.enableSeconds?":S":"")),e.altInput&&e.enableTime&&!e.altFormat&&(oa.config.altFormat=oa.config.noCalendar?"h:i"+(oa.config.enableSeconds?":S K":" K"):g.defaultConfig.altFormat+" h:i"+(oa.config.enableSeconds?":S":"")+" K"),Object.defineProperty(oa.config,"minDate",{get:function get(){return this._minDate},set:$("min")}),Object.defineProperty(oa.config,"maxDate",{get:function get(){return this._maxDate},set:$("max")}),oa.config.minDate=e.minDate,oa.config.maxDate=e.maxDate;for(var a=0;a<b.length;a++){oa.config[b[a]]=!0===oa.config[b[a]]||"true"===oa.config[b[a]]}for(var f=d.length;f--;){void 0!==oa.config[d[f]]&&(oa.config[d[f]]=ja(oa.config[d[f]]||[]).map(H))}for(var j=0,k;j<oa.config.plugins.length;j++){k=oa.config.plugins[j](oa)||{};for(var m in k){oa.config[m]instanceof Array||~d.indexOf(m)?oa.config[m]=ja(k[m]).map(H).concat(oa.config[m]):void 0===e[m]&&(oa.config[m]=k[m])}}_("ParseConfig")}function W(){"object"!==j(oa.config.locale)&&void 0===g.l10ns[oa.config.locale]&&console.warn("flatpickr: invalid locale "+oa.config.locale),oa.l10n=h(Object.create(g.l10ns.default),"object"===j(oa.config.locale)?oa.config.locale:"default"!==oa.config.locale?g.l10ns[oa.config.locale]||{}:{})}function B(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:oa._positionElement;if(void 0!==oa.calendarContainer){var e=oa.calendarContainer.offsetHeight,f=oa.calendarContainer.offsetWidth,g=oa.config.position,a=b.getBoundingClientRect(),h=window.innerHeight-a.bottom,i="above"===g||"below"!==g&&h<e&&a.top>e,j=window.pageYOffset+a.top+(i?-e-2:b.offsetHeight+2);if(ka(oa.calendarContainer,"arrowTop",!i),ka(oa.calendarContainer,"arrowBottom",i),!oa.config.inline){var k=window.pageXOffset+a.left,c=window.document.body.offsetWidth-a.right,l=k+f>window.document.body.offsetWidth;ka(oa.calendarContainer,"rightMost",l),oa.config.static||(oa.calendarContainer.style.top=j+"px",l?(oa.calendarContainer.style.left="auto",oa.calendarContainer.style.right=c+"px"):(oa.calendarContainer.style.left=k+"px",oa.calendarContainer.style.right="auto"))}}}function J(){oa.config.noCalendar||oa.isMobile||(x(),da(),D())}function K(b){if(b.preventDefault(),b.stopPropagation(),b.target.classList.contains("flatpickr-day")&&!b.target.classList.contains("disabled")&&!b.target.classList.contains("notAllowed")){var d=oa.latestSelectedDateObj=new Date(b.target.dateObj.getTime()),e=d.getMonth()!==oa.currentMonth&&"range"!==oa.config.mode;if(oa.selectedDateElem=b.target,"single"===oa.config.mode)oa.selectedDates=[d];else if("multiple"===oa.config.mode){var f=ba(d);f?oa.selectedDates.splice(f,1):oa.selectedDates.push(d)}else"range"===oa.config.mode&&(2===oa.selectedDates.length&&oa.clear(),oa.selectedDates.push(d),0!==ma(d,oa.selectedDates[0],!0)&&oa.selectedDates.sort(function(a,b){return a.getTime()-b.getTime()}));if(I(),e){var a=oa.currentYear!==d.getFullYear();oa.currentYear=d.getFullYear(),oa.currentMonth=d.getMonth(),a&&_("YearChange"),_("MonthChange")}if(D(),oa.minDateHasTime&&oa.config.enableTime&&0===ma(d,oa.config.minDate)&&S(oa.config.minDate),ea(),oa.config.enableTime&&setTimeout(function(){return oa.showTimeInput=!0},50),"range"===oa.config.mode&&(1===oa.selectedDates.length?(L(b.target),oa._hidePrevMonthArrow=oa._hidePrevMonthArrow||oa.minRangeDate>oa.days.childNodes[0].dateObj,oa._hideNextMonthArrow=oa._hideNextMonthArrow||oa.maxRangeDate<new Date(oa.currentYear,oa.currentMonth+1,1)):da()),_("Change"),e?w(function(){return oa.selectedDateElem.focus()}):C(b.target.$i,0),oa.config.enableTime&&setTimeout(function(){return oa.hourElement.select()},451),oa.config.closeOnSelect){var g="single"===oa.config.mode&&!oa.config.enableTime,h="range"===oa.config.mode&&2===oa.selectedDates.length&&!oa.config.enableTime;(g||h)&&oa.close()}}}function U(a,b){if(a instanceof Array)oa.selectedDates=a.map(function(a){return oa.parseDate(a,b)});else if(a instanceof Date||!isNaN(a))oa.selectedDates=[oa.parseDate(a,b)];else if(a&&a.substring)switch(oa.config.mode){case"single":oa.selectedDates=[oa.parseDate(a,b)];break;case"multiple":oa.selectedDates=a.split("; ").map(function(a){return oa.parseDate(a,b)});break;case"range":oa.selectedDates=a.split(oa.l10n.rangeSeparator).map(function(a){return oa.parseDate(a,b)});}oa.selectedDates=oa.selectedDates.filter(function(a){return a instanceof Date&&O(a,!1)}),oa.selectedDates.sort(function(a,b){return a.getTime()-b.getTime()})}function z(a){for(var b=a.length;b--;){"string"==typeof a[b]||+a[b]?a[b]=oa.parseDate(a[b],null,!0):a[b]&&a[b].from&&a[b].to&&(a[b].from=oa.parseDate(a[b].from),a[b].to=oa.parseDate(a[b].to))}return a.filter(function(a){return a})}function G(){oa.selectedDates=[],oa.now=new Date;var a=oa.config.defaultDate||oa.input.value;a&&U(a,oa.config.dateFormat);var b=oa.selectedDates.length?oa.selectedDates[0]:oa.config.minDate&&oa.config.minDate.getTime()>oa.now?oa.config.minDate:oa.config.maxDate&&oa.config.maxDate.getTime()<oa.now?oa.config.maxDate:oa.now;oa.currentYear=b.getFullYear(),oa.currentMonth=b.getMonth(),oa.selectedDates.length&&(oa.latestSelectedDateObj=oa.selectedDates[0]),oa.minDateHasTime=oa.config.minDate&&(oa.config.minDate.getHours()||oa.config.minDate.getMinutes()||oa.config.minDate.getSeconds()),oa.maxDateHasTime=oa.config.maxDate&&(oa.config.maxDate.getHours()||oa.config.maxDate.getMinutes()||oa.config.maxDate.getSeconds()),Object.defineProperty(oa,"latestSelectedDateObj",{get:function get(){return oa._selectedDateObj||oa.selectedDates[oa.selectedDates.length-1]},set:function set(a){oa._selectedDateObj=a}}),oa.isMobile||Object.defineProperty(oa,"showTimeInput",{get:function get(){return oa._showTimeInput},set:function set(a){oa._showTimeInput=a,oa.calendarContainer&&ka(oa.calendarContainer,"showTimeInput",a),B()}})}function V(){oa.utils={duration:{DAY:864e5},getDaysinMonth:function getDaysinMonth(a,b){return a=void 0===a?oa.currentMonth:a,b=void 0===b?oa.currentYear:b,1===a&&(0==b%4&&0!=b%100||0==b%400)?29:oa.l10n.daysInMonth[a]},monthToStr:function monthToStr(a,b){return b=void 0===b?oa.config.shorthandCurrentMonth:b,oa.l10n.months[(b?"short":"long")+"hand"][a]}}}function Z(){oa.formats=Object.create(b.prototype.formats),["D","F","J","M","W","l"].forEach(function(a){oa.formats[a]=b.prototype.formats[a].bind(oa)}),oa.revFormat.F=b.prototype.revFormat.F.bind(oa),oa.revFormat.M=b.prototype.revFormat.M.bind(oa)}function Q(){if(oa.input=oa.config.wrap?oa.element.querySelector("[data-input]"):oa.element,!oa.input)return console.warn("Error: invalid input element specified",oa.input);oa.input._type=oa.input.type,oa.input.type="text",oa.input.classList.add("flatpickr-input"),oa._input=oa.input,oa.config.altInput&&(oa.altInput=ia(oa.input.nodeName,oa.input.className+" "+oa.config.altInputClass),oa._input=oa.altInput,oa.altInput.placeholder=oa.input.placeholder,oa.altInput.disabled=oa.input.disabled,oa.altInput.required=oa.input.required,oa.altInput.type="text",oa.input.type="hidden",!oa.config.static&&oa.input.parentNode&&oa.input.parentNode.insertBefore(oa.altInput,oa.input.nextSibling)),oa.config.allowInput||oa._input.setAttribute("readonly","readonly"),oa._positionElement=oa.config.positionElement||oa._input}function X(){var a=oa.config.enableTime?oa.config.noCalendar?"time":"datetime-local":"date";oa.mobileInput=ia("input",oa.input.className+" flatpickr-mobile"),oa.mobileInput.step="any",oa.mobileInput.tabIndex=1,oa.mobileInput.type=a,oa.mobileInput.disabled=oa.input.disabled,oa.mobileInput.placeholder=oa.input.placeholder,oa.mobileFormatStr="datetime-local"==a?"Y-m-d\\TH:i:S":"date"===a?"Y-m-d":"H:i:S",oa.selectedDates.length&&(oa.mobileInput.defaultValue=oa.mobileInput.value=oa.formatDate(oa.selectedDates[0],oa.mobileFormatStr)),oa.config.minDate&&(oa.mobileInput.min=oa.formatDate(oa.config.minDate,"Y-m-d")),oa.config.maxDate&&(oa.mobileInput.max=oa.formatDate(oa.config.maxDate,"Y-m-d")),oa.input.type="hidden",oa.config.altInput&&(oa.altInput.type="hidden");try{oa.input.parentNode.insertBefore(oa.mobileInput,oa.input.nextSibling)}catch(a){}oa.mobileInput.addEventListener("change",function(a){oa.setDate(a.target.value,!1,oa.mobileFormatStr),_("Change"),_("Close")})}function _(b,c){var d=oa.config["on"+b];if(void 0!==d&&0<d.length)for(var e=0;d[e]&&e<d.length;e++){d[e](oa.selectedDates,oa.input.value,oa,c)}"Change"===b&&(oa.input.dispatchEvent(aa("change")),oa.input.dispatchEvent(aa("input")))}function aa(a){return oa._supportsEvents?new Event(a,{bubbles:!0}):(oa._[a+"Event"]=document.createEvent("Event"),oa._[a+"Event"].initEvent(a,!0,!0),oa._[a+"Event"])}function ba(a){for(var b=0;b<oa.selectedDates.length;b++){if(0===ma(oa.selectedDates[b],a))return""+b}return!1}function ca(a){return!("range"!==oa.config.mode||2>oa.selectedDates.length)&&0<=ma(a,oa.selectedDates[0])&&0>=ma(a,oa.selectedDates[1])}function da(){oa.config.noCalendar||oa.isMobile||!oa.monthNav||(oa.currentMonthElement.textContent=oa.utils.monthToStr(oa.currentMonth)+" ",oa.currentYearElement.value=oa.currentYear,oa._hidePrevMonthArrow=oa.config.minDate&&(oa.currentYear===oa.config.minDate.getFullYear()?oa.currentMonth<=oa.config.minDate.getMonth():oa.currentYear<oa.config.minDate.getFullYear()),oa._hideNextMonthArrow=oa.config.maxDate&&(oa.currentYear===oa.config.maxDate.getFullYear()?oa.currentMonth+1>oa.config.maxDate.getMonth():oa.currentYear>oa.config.maxDate.getFullYear()))}function ea(a){if(!oa.selectedDates.length)return oa.clear(a);oa.isMobile&&(oa.mobileInput.value=oa.selectedDates.length?oa.formatDate(oa.latestSelectedDateObj,oa.mobileFormatStr):"");var b="range"!==oa.config.mode?"; ":oa.l10n.rangeSeparator;oa.input.value=oa.selectedDates.map(function(a){return oa.formatDate(a,oa.config.dateFormat)}).join(b),oa.config.altInput&&(oa.altInput.value=oa.selectedDates.map(function(a){return oa.formatDate(a,oa.config.altFormat)}).join(b)),!1!==a&&_("ValueUpdate")}function fa(a){return Math.max(-1,Math.min(1,a.wheelDelta||-a.deltaY))}function ga(a){a.preventDefault();var b=oa.currentYearElement.parentNode.contains(a.target);if(a.target===oa.currentMonthElement||b){var c=fa(a);b?(Y(oa.currentYear+c),a.target.value=oa.currentYear):oa.changeMonth(c,!0,!1)}}function ha(a){var b=oa.prevMonthNav.contains(a.target),c=oa.nextMonthNav.contains(a.target);b||c?N(b?-1:1):a.target===oa.currentYearElement?(a.preventDefault(),oa.currentYearElement.select()):"arrowUp"===a.target.className?oa.changeYear(oa.currentYear+1):"arrowDown"===a.target.className&&oa.changeYear(oa.currentYear-1)}function ia(b,c,d){var e=window.document.createElement(b);return c=c||"",d=d||"",e.className=c,void 0!==d&&(e.textContent=d),e}function ja(a){return a instanceof Array?a:[a]}function ka(a,b,c){if(c)return a.classList.add(b);a.classList.remove(b)}function la(b,c,d){var e;return function(){var a=this,f=arguments;clearTimeout(e),e=setTimeout(function(){e=null,d||b.apply(a,f)},c),d&&!e&&b.apply(a,f)}}function ma(a,b,c){return a instanceof Date&&b instanceof Date&&(!1!==c?new Date(a.getTime()).setHours(0,0,0,0)-new Date(b.getTime()).setHours(0,0,0,0):a.getTime()-b.getTime())}function na(b){b.preventDefault();var d="keydown"===b.type,e=(b.type,b.type,b.target);if(oa.amPM&&b.target===oa.amPM)return b.target.textContent=["AM","PM"][0|"AM"===b.target.textContent];var f=+e.min,a=+e.max,g=+e.step,h=parseInt(e.value,10),i=h+g*(b.delta||(d?38===b.which?1:-1:Math.max(-1,Math.min(1,b.wheelDelta||-b.deltaY))||0));if(void 0!==e.value&&2===e.value.length){var j=e===oa.hourElement,c=e===oa.minuteElement;i<f?(i=a+i+!j+(j&&!oa.amPM),c&&p(null,-1,oa.hourElement)):i>a&&(i=e===oa.hourElement?i-a-!oa.amPM:f,c&&p(null,1,oa.hourElement)),oa.amPM&&j&&(1===g?23===i+h:Math.abs(i-h)>g)&&(oa.amPM.textContent="PM"===oa.amPM.textContent?"AM":"PM"),e.value=oa.pad(i)}}var oa=this;return oa._={},oa._.afterDayAnim=w,oa._bind=l,oa._compareDates=ma,oa._setHoursFromDate=S,oa.changeMonth=N,oa.changeYear=Y,oa.clear=function(a){oa.input.value="",oa.altInput&&(oa.altInput.value=""),oa.mobileInput&&(oa.mobileInput.value=""),oa.selectedDates=[],oa.latestSelectedDateObj=void 0,oa.showTimeInput=!1,oa.redraw(),!1!==a&&_("Change")},oa.close=function(){oa.isOpen=!1,oa.isMobile||(oa.calendarContainer.classList.remove("open"),oa._input.classList.remove("active")),_("Close")},oa._createElement=ia,oa.destroy=function(){void 0!==oa.config&&_("Destroy");for(var a=oa._handlers.length,b;a--;){b=oa._handlers[a];b.element.removeEventListener(b.event,b.handler)}oa._handlers=[],oa.mobileInput?(oa.mobileInput.parentNode&&oa.mobileInput.parentNode.removeChild(oa.mobileInput),oa.mobileInput=null):oa.calendarContainer&&oa.calendarContainer.parentNode&&oa.calendarContainer.parentNode.removeChild(oa.calendarContainer),oa.altInput&&(oa.input.type="text",oa.altInput.parentNode&&oa.altInput.parentNode.removeChild(oa.altInput),delete oa.altInput),oa.input&&(oa.input.type=oa.input._type,oa.input.classList.remove("flatpickr-input"),oa.input.removeAttribute("readonly"),oa.input.value=""),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(a){return delete oa[a]})},oa.isEnabled=O,oa.jumpToDate=m,oa.open=function(a,b){if(oa.isMobile)return a&&(a.preventDefault(),a.target.blur()),setTimeout(function(){oa.mobileInput.click()},0),void _("Open");oa.isOpen||oa._input.disabled||oa.config.inline||(oa.isOpen=!0,oa.calendarContainer.classList.add("open"),B(b),oa._input.classList.add("active"),_("Open"))},oa.redraw=J,oa.set=function(a,b){oa.config[a]=b,oa.redraw(),m()},oa.setDate=function(a,b,c){if(0!==a&&!a)return oa.clear(b);U(a,c),oa.showTimeInput=0<oa.selectedDates.length,oa.latestSelectedDateObj=oa.selectedDates[0],oa.redraw(),m(),S(),ea(b),b&&_("Change")},oa.toggle=function(){if(oa.isOpen)return oa.close();oa.open()},function(){oa.element=oa.input=q,oa.instanceConfig=e||{},oa.parseDate=b.prototype.parseDate.bind(oa),oa.formatDate=b.prototype.formatDate.bind(oa),Z(),R(),W(),Q(),G(),V(),oa.isOpen=!1,oa.isMobile=!oa.config.disableMobile&&!oa.config.inline&&"single"===oa.config.mode&&!oa.config.disable.length&&!oa.config.enable.length&&!oa.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),oa.isMobile||t(),o(),(oa.selectedDates.length||oa.config.noCalendar)&&(oa.config.enableTime&&S(oa.config.noCalendar?oa.latestSelectedDateObj||oa.config.minDate:null),ea()),oa.showTimeInput=0<oa.selectedDates.length||oa.config.noCalendar,oa.config.weekNumbers&&(oa.calendarContainer.style.width=oa.daysContainer.offsetWidth+oa.weekWrapper.offsetWidth+"px"),oa.isMobile||B(),_("Ready")}(),oa}function c(c,d){for(var e=Array.prototype.slice.call(c),f=[],a=0;a<e.length;a++){try{if(null!==e[a].getAttribute("data-fp-omit"))continue;e[a]._flatpickr&&(e[a]._flatpickr.destroy(),e[a]._flatpickr=null),e[a]._flatpickr=new b(e[a],d||{}),f.push(e[a]._flatpickr)}catch(a){console.warn(a,a.stack)}}return 1===f.length?f[0]:f}function g(a,b){return a instanceof NodeList?c(a,b):a instanceof HTMLElement?c([a],b):c(window.document.querySelectorAll(a),b)}var h=Object.assign||function(b){for(var c=1,d;c<arguments.length;c++){d=arguments[c];for(var e in d){Object.prototype.hasOwnProperty.call(d,e)&&(b[e]=d[e])}}return b},j="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(a){return _typeof2(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":_typeof2(a)};b.prototype={formats:{Z:function Z(a){return a.toISOString()},D:function D(a){return this.l10n.weekdays.shorthand[this.formats.w(a)]},F:function F(a){return this.utils.monthToStr(this.formats.n(a)-1,!1)},G:function G(a){return b.prototype.pad(b.prototype.formats.h(a))},H:function H(a){return b.prototype.pad(a.getHours())},J:function J(a){return a.getDate()+this.l10n.ordinal(a.getDate())},K:function K(a){return 11<a.getHours()?"PM":"AM"},M:function M(a){return this.utils.monthToStr(a.getMonth(),!0)},S:function S(a){return b.prototype.pad(a.getSeconds())},U:function U(a){return a.getTime()/1e3},W:function W(a){return this.config.getWeek(a)},Y:function Y(a){return a.getFullYear()},d:function d(a){return b.prototype.pad(a.getDate())},h:function h(a){return a.getHours()%12?a.getHours()%12:12},i:function i(a){return b.prototype.pad(a.getMinutes())},j:function j(a){return a.getDate()},l:function l(a){return this.l10n.weekdays.longhand[a.getDay()]},m:function m(a){return b.prototype.pad(a.getMonth()+1)},n:function n(a){return a.getMonth()+1},s:function s(a){return a.getSeconds()},w:function w(a){return a.getDay()},y:function y(a){return(a.getFullYear()+"").substring(2)}},formatDate:function formatDate(b,a){var c=this;return void 0!==this.config&&void 0!==this.config.formatDate?this.config.formatDate(b,a):a.split("").map(function(d,e,a){return c.formats[d]&&"\\"!==a[e-1]?c.formats[d](b):"\\"!==d?d:""}).join("")},revFormat:{D:function D(){},F:function F(a,b){a.setMonth(this.l10n.months.longhand.indexOf(b))},G:function G(a,b){a.setHours(parseFloat(b))},H:function H(a,b){a.setHours(parseFloat(b))},J:function J(a,b){a.setDate(parseFloat(b))},K:function K(a,b){var c=a.getHours();12!==c&&a.setHours(c%12+12*/pm/i.test(b))},M:function M(a,b){a.setMonth(this.l10n.months.shorthand.indexOf(b))},S:function S(a,b){a.setSeconds(b)},U:function U(a,b){return new Date(1e3*parseFloat(b))},W:function W(a,b){return b=parseInt(b),new Date(a.getFullYear(),0,2+7*(b-1),0,0,0,0,0)},Y:function Y(a,b){a.setFullYear(b)},Z:function Z(a,b){return new Date(b)},d:function d(a,b){a.setDate(parseFloat(b))},h:function h(a,b){a.setHours(parseFloat(b))},i:function i(a,b){a.setMinutes(parseFloat(b))},j:function j(a,b){a.setDate(parseFloat(b))},l:function l(){},m:function m(a,b){a.setMonth(parseFloat(b)-1)},n:function n(a,b){a.setMonth(parseFloat(b)-1)},s:function s(a,b){a.setSeconds(parseFloat(b))},w:function w(){},y:function y(a,b){a.setFullYear(2e3+parseFloat(b))}},tokenRegex:{D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"(am|AM|Am|aM|pm|PM|Pm|pM)",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},pad:function pad(a){return("0"+a).slice(-2)},parseDate:function parseDate(b,h,j){if(0!==b&&!b)return null;var k=b;if(b instanceof Date)b=new Date(b.getTime());else if(void 0!==b.toFixed)b=new Date(b);else{var a=h||(this.config||g.defaultConfig).dateFormat;if("today"===(b=(b+"").trim()))b=new Date,j=!0;else if(/Z$/.test(b)||/GMT$/.test(b))b=new Date(b);else if(this.config&&this.config.parseDate)b=this.config.parseDate(b,a);else{for(var i=this.config&&this.config.noCalendar?new Date(new Date().setHours(0,0,0,0)):new Date(new Date().getFullYear(),0,1,0,0,0,0),p=void 0,q=0,t=0,v="";q<a.length;q++){var w=a[q],d="\\"===w,u="\\"===a[q-1]||d;if(this.tokenRegex[w]&&!u){v+=this.tokenRegex[w];var f=new RegExp(v).exec(b);f&&(p=!0)&&(i=this.revFormat[w](i,f[++t])||i)}else d||(v+=".")}b=p?i:null}}return b instanceof Date?(!0===j&&b.setHours(0,0,0,0),b):(console.warn("flatpickr: invalid date "+k),console.info(this.element),null)}},"undefined"!=typeof HTMLElement&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(a){return c(this,a)},HTMLElement.prototype.flatpickr=function(a){return c([this],a)}),g.defaultConfig=b.defaultConfig={mode:"single",position:"auto",animate:-1===window.navigator.userAgent.indexOf("MSIE"),wrap:!1,weekNumbers:!1,allowInput:!1,clickOpens:!0,closeOnSelect:!0,time_24hr:!1,enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",ariaDateFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",altFormat:"F j, Y",defaultDate:null,minDate:null,maxDate:null,parseDate:null,formatDate:null,getWeek:function getWeek(a){var b=new Date(a.getTime()),c=new Date(b.getFullYear(),0,1);return Math.ceil(((b-c)/864e5+c.getDay()+1)/7)},enable:[],disable:[],shorthandCurrentMonth:!1,inline:!1,static:!1,appendTo:null,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",enableSeconds:!1,hourIncrement:1,minuteIncrement:5,defaultHour:12,defaultMinute:0,disableMobile:!1,locale:"default",plugins:[],ignoredFocusElements:[],onClose:void 0,onChange:void 0,onDayCreate:void 0,onMonthChange:void 0,onOpen:void 0,onParseConfig:void 0,onReady:void 0,onValueUpdate:void 0,onYearChange:void 0,onKeyDown:void 0,onDestroy:void 0},g.l10ns={en:{weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function ordinal(a){var b=a%100;if(3<b&&21>b)return"th";switch(b%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th";}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle"}},g.l10ns.default=Object.create(g.l10ns.en),g.localize=function(a){return h(g.l10ns.default,a||{})},g.setDefaults=function(a){return h(g.defaultConfig,a||{})},"undefined"!=typeof a&&(a.fn.flatpickr=function(a){return c(this,a)}),Date.prototype.fp_incr=function(a){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+parseInt(a,10))},"undefined"!=typeof module&&(module.exports=g)});
define ("local_intelliboard/intb_circlechart",["jquery"],function(a){(function(a){a.fn.extend({percentcircle:function percentcircle(b){var c={animate:!0,diameter:100,guage:2,coverBg:"#fff",bgColor:"#efefef",fillColor:"#5c93c8",percentSize:"15px",percentWeight:"normal"};c=a.extend(c,b);var d={cirContainer:{width:c.diameter,height:c.diameter},cir:{position:"relative","text-align":"center",width:c.diameter,height:c.diameter,"border-radius":"100%","background-color":c.bgColor,"background-image":"linear-gradient(91deg, transparent 50%, "+c.bgColor+" 50%), linear-gradient(90deg, "+c.bgColor+" 50%, transparent 50%)"},cirCover:{position:"relative",top:c.guage,left:c.guage,"text-align":"center",width:c.diameter-2*c.guage,height:c.diameter-2*c.guage,"border-radius":"100%","background-color":c.coverBg},percent:{display:"block",width:c.diameter,height:c.diameter,"line-height":c.diameter+"px","vertical-align":"middle","font-size":c.percentSize,"font-weight":c.percentWeight,color:c.fillColor}},e=this;var f=function(a,b,d){var e=b;if(b<=a){if(180<=e){d.css("background-image","linear-gradient("+(90+e)+"deg, transparent 50%, "+c.fillColor+" 50%),linear-gradient(90deg, "+c.fillColor+" 50%, transparent 50%)")}else{d.css("background-image","linear-gradient("+(e-90)+"deg, transparent 50%, "+c.bgColor+" 50%),linear-gradient(90deg, "+c.fillColor+" 50%, transparent 50%)")}b++;setTimeout(function(){f(a,b,d)},1)}};(function(){e.each(function(){var b=a(this),e=b.data("percent"),g=Math.round(e),h=3.6*g,i=c.animate?0:h,j=a("<div><div class=\"ab\"><div class=\"cir\"><span class=\"perc\">{{percentage}}</span></div></div></div>".replace("{{percentage}}",isNaN(e)?e:Math.max(e,g)+"%"));j.css(d.cirContainer).find(".ab").css(d.cir).find(".cir").css(d.cirCover).find(".perc").css(d.percent);b.append(j);setTimeout(function(){f(h,parseInt(i),j.find(".ab"))},250)})})()}})})(a)});
define ("local_intelliboard/intelliboard",["jquery","local_intelliboard/intb_circlechart"],function(a){return{circleProgress:function circleProgress(b){b=JSON.parse(b);a(document).ready(function(){a(".circle-progress").percentcircle(b)})}}});
define ("local_intelliboard/setup",["jquery","local_intelliboard/setup_moodle_settings","local_intelliboard/setup_terms","local_intelliboard/setup_authentication"],function(a,b,c,d){var e={activeRequest:!1,serviceToken:"",useRestProtocol:!0,init:function init(){e.moodleSettingsHandler();e.termsHandler()},moodleSettingsHandler:function moodleSettingsHandler(){a(".moodle-settings .tab-header-button button.next, .moodle-settings .tab-body-button button.next").unbind("click");a(".moodle-settings .tab-header-button button.next, .moodle-settings .tab-body-button button.next").on("click",function(){if(e.activeRequest){return}e.activeRequest=!0;b.hideErrors();b.loaderContainer.removeClass("hidden");b.save(function(d){e.activeRequest=!1;b.loaderContainer.addClass("hidden");if("success"===d.status){e.serviceToken=JSON.parse(d.data).token;e.useRestProtocol=a("#rest_protocol").is(":checked");b.closeTab();c.openTab()}else{b.showErrors(d.data)}})});a(".moodle-settings .choose-group .item").unbind("click");a(".moodle-settings .choose-group .item").on("click",function(){a(".moodle-settings .choose-group .item").removeClass("active");a(".moodle-settings .choose-group .item input").prop("checked",!1).attr("checked","");a(this).addClass("active");a(this).find("input").attr("checked","checked").prop("checked",!0)})},termsHandler:function termsHandler(){a(".tab-item.terms .tab-header-button button.next, .tab-item.terms .tab-body-button button.next").unbind("click");a(".tab-item.terms .tab-header-button button.next, .tab-item.terms .tab-body-button button.next").on("click",function(){if(e.activeRequest){return}c.hideErrors();c.loaderContainer.removeClass("hidden");if(c.termsIsAccepted()){c.loaderContainer.addClass("hidden");c.closeTab();e.authenticationHandler()}else{c.showErrorMessage(function(){c.loaderContainer.addClass("hidden")})}});a(".tab-item.terms .tab-header-button button.back, .tab-item.terms .tab-body-button button.back").on("click",function(){c.closeTab();b.openTab()})},authenticationHandler:function authenticationHandler(){var b=a("#subscription_email").val();d.openTab();d.setFormEmail(b);d.loaderContainer.removeClass("hidden");d.checkEmail(b,function(b){if(b.email_exists){d.showLoginForm();d.loginHandler(e.serviceToken,e.useRestProtocol,function(){d.closeTab();a(".setup-wrapper .tab-item.congrats").removeClass("closed")})}else{d.showRegisterForm();d.registerHandler(e.serviceToken,e.useRestProtocol,function(){d.closeTab();a(".setup-wrapper .tab-item.congrats").removeClass("closed")})}});a(".tab-item.authentication .tab-header-button button.back, .tab-item.authentication .tab-body-button button.back").on("click",function(){d.closeTab();d.hideLoginForm();d.hideRegisterForm();c.openTab()})}};return e});
function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("local_intelliboard/intb_multipleselect",["jquery"],function(a){(function(a){'use strict';function b(b,c){var d=this,e=b.attr("name")||c.name||"";b.parent().hide();var f=b.css("width");b.parent().show();if("0px"==f){f=b.outerWidth()+20}this.$el=b.hide();this.options=c;this.$parent=a("<div"+a.map(["class","title"],function(a){var b=d.$el.attr(a)||"";b=("class"===a?"ms-parent"+(b?" ":""):"")+b;return b?" "+a+"=\""+b+"\"":""}).join("")+" />");this.$choice=a("<button type=\"button\" class=\"ms-choice\"><span class=\"placeholder\">"+c.placeholder+"</span><div></div></button>");this.$drop=a("<div class=\"ms-drop "+c.position+"\"></div>");this.$el.after(this.$parent);this.$parent.append(this.$choice);this.$parent.append(this.$drop);if(this.$el.prop("disabled")){this.$choice.addClass("disabled")}this.$parent.css("width",c.width||f);if(!this.options.keepOpen){a("body").click(function(b){if(a(b.target)[0]===d.$choice[0]||a(b.target).parents(".ms-choice")[0]===d.$choice[0]){return}if("INPUT"===b.target.tagName.toUpperCase()&&(a(b.target)[0]===d.$drop[0]||a(b.target).parents(".ms-drop")[0]!==d.$drop[0])&&d.options.isOpen){d.close()}})}this.selectAllName="name=\"selectAll"+e+"\"";this.selectGroupName="name=\"selectGroup"+e+"\"";this.selectItemName="name=\"selectItem"+e+"\""}b.prototype={constructor:b,init:function init(){var b=this,c=[];if(this.options.filter){c.push("<div class=\"ms-search\">","<input type=\"text\" autocomplete=\"off\" autocorrect=\"off\" autocapitilize=\"off\" spellcheck=\"false\">","</div>")}c.push("<ul>");if(this.options.selectAll&&!this.options.single){c.push("<li class=\"ms-select-all\">","<label>","<input type=\"checkbox\" "+this.selectAllName+" /> ",this.options.selectAllDelimiter[0]+this.options.selectAllText+this.options.selectAllDelimiter[1],"</label>","</li>")}a.each(this.$el.children(),function(a,d){c.push(b.optionToHtml(a,d))});c.push("<li class=\"ms-no-results\">"+this.options.noMatchesFound+"</li>");c.push("</ul>");this.$drop.html(c.join(""));this.$drop.find("ul").css("max-height",this.options.maxHeight+"px");this.$drop.find(".multiple").css("width",this.options.multipleWidth+"px");this.$searchInput=this.$drop.find(".ms-search input");this.$selectAll=this.$drop.find("input["+this.selectAllName+"]");this.$selectGroups=this.$drop.find("input["+this.selectGroupName+"]");this.$selectItems=this.$drop.find("input["+this.selectItemName+"]:enabled");this.$disableItems=this.$drop.find("input["+this.selectItemName+"]:disabled");this.$noResults=this.$drop.find(".ms-no-results");this.events();this.updateSelectAll(!0);this.update(!0);if(this.options.isOpen){this.open()}},optionToHtml:function optionToHtml(b,c,d,e){var f=this,g=a(c),h=[],i=this.options.multiple,j=a.map(["class","title"],function(a){var b="class"===a&&i,c=g.attr(a)||"";return b||c?" "+a+"=\""+(b?"multiple"+(c?" ":""):"")+c+"\"":""}).join(""),k,l=this.options.single?"radio":"checkbox";if(g.is("option")){var m=g.val(),n=f.options.textTemplate(g),o=f.$el.attr("multiple")!=void 0?g.prop("selected"):"selected"==g.attr("selected"),p=this.options.styler(m)?" style=\""+this.options.styler(m)+"\"":"";k=e||g.prop("disabled");if(""<this.options.blockSeparator&&this.options.blockSeparator==g.val()){h.push("<li  title=\""+n+"\" "+j+p+">","<label class=\""+this.options.blockSeparator+(k?"disabled":"")+"\">",n,"</label>","</li>")}else{h.push("<li  title=\""+n+"\" "+j+p+">","<label"+(k?" class=\"disabled\"":"")+">","<input type=\""+l+"\" "+this.selectItemName+" value=\""+m+"\""+(o?" checked=\"checked\"":"")+(k?" disabled=\"disabled\"":"")+(d?" data-group=\""+d+"\"":"")+"/> ",n,"</label>","</li>")}}else if(!d&&g.is("optgroup")){var q="group_"+b,r=g.attr("label");k=g.prop("disabled");h.push("<li class=\"group\">","<label class=\"optgroup"+(k?" disabled":"")+"\" data-group=\""+q+"\">",this.options.hideOptgroupCheckboxes?"":"<input type=\"checkbox\" "+this.selectGroupName+(k?" disabled=\"disabled\"":"")+" /> ",r,"</label>","</li>");a.each(g.children(),function(a,b){h.push(f.optionToHtml(a,b,q,k))})}return h.join("")},events:function events(){var c=this;function b(a){a.preventDefault();c[c.options.isOpen?"close":"open"]()}var d=this.$el.parent().closest("label")[0]||a("label[for="+this.$el.attr("id")+"]")[0];if(d){a(d).off("click").on("click",function(a){if("label"!==a.target.nodeName.toLowerCase()||a.target!==this){return}b(a);if(!c.options.filter||!c.options.isOpen){c.focus()}a.stopPropagation()})}this.$choice.off("click").on("click",b).off("focus").on("focus",this.options.onFocus).off("blur").on("blur",this.options.onBlur);this.$parent.off("keydown").on("keydown",function(a){switch(a.which){case 27:c.close();c.$choice.focus();break;}});this.$searchInput.off("keydown").on("keydown",function(a){if(9===a.keyCode&&a.shiftKey){c.close()}}).off("keyup").on("keyup",function(a){if(c.options.filterAcceptOnEnter&&(13===a.which||32==a.which)&&c.$searchInput.val()){c.$selectAll.click();c.close();c.focus();return}c.filter()});this.$selectAll.off("click").on("click",function(){var b=a(this).prop("checked"),d=c.$selectItems.filter(":visible");if(d.length===c.$selectItems.length){c[b?"checkAll":"uncheckAll"]()}else{c.$selectGroups.prop("checked",b);d.prop("checked",b);c.options[b?"onCheckAll":"onUncheckAll"]();c.update()}});this.$selectGroups.off("click").on("click",function(){var b=a(this).parent().attr("data-group"),d=c.$selectItems.filter(":visible"),e=d.filter("[data-group=\""+b+"\"]"),f=e.length!==e.filter(":checked").length;e.prop("checked",f);c.updateSelectAll();c.update();c.options.onOptgroupClick({label:a(this).parent().text(),checked:f,children:e.get()})});this.$selectItems.off("click").on("click",function(){c.updateSelectAll();c.update();c.updateOptGroupSelect();c.options.onClick({label:a(this).parent().text(),value:a(this).val(),checked:a(this).prop("checked")});if(c.options.single&&c.options.isOpen&&!c.options.keepOpen){c.close()}})},open:function open(){if(this.$choice.hasClass("disabled")){return}this.options.isOpen=!0;this.$choice.find(">div").addClass("open");this.$drop.show();this.$selectAll.parent().show();this.$noResults.hide();if(0===this.$el.children().length){this.$selectAll.parent().hide();this.$noResults.show()}if(this.options.container){var b=this.$drop.offset();this.$drop.appendTo(a(this.options.container));this.$drop.offset({top:b.top,left:b.left})}if(this.options.filter){this.$searchInput.val("");this.$searchInput.focus();this.filter()}this.options.onOpen()},close:function close(){this.options.isOpen=!1;this.$choice.find(">div").removeClass("open");this.$drop.hide();if(this.options.container){this.$parent.append(this.$drop);this.$drop.css({top:"auto",left:"auto"})}this.options.onClose()},update:function update(b){var c=this.getSelects(),d=this.$choice.find(">span");if(0===c.length){d.addClass("placeholder").html(this.options.placeholder)}else if(this.options.countSelected&&c.length<this.options.minimumCountSelected){d.removeClass("placeholder").html((this.options.displayValues?c:this.getSelects("text")).join(this.options.delimiter))}else if(this.options.allSelected&&c.length===this.$selectItems.length+this.$disableItems.length){d.removeClass("placeholder").html(this.options.allSelected)}else if((this.options.countSelected||this.options.etcaetera)&&c.length>this.options.minimumCountSelected){if(this.options.etcaetera){d.removeClass("placeholder").html((this.options.displayValues?c:this.getSelects("text").slice(0,this.options.minimumCountSelected)).join(this.options.delimiter)+"...")}else{d.removeClass("placeholder").html(this.options.countSelected.replace("#",c.length).replace("%",this.$selectItems.length+this.$disableItems.length))}}else{d.removeClass("placeholder").html((this.options.displayValues?c:this.getSelects("text")).join(this.options.delimiter))}this.$el.val(this.getSelects());this.$drop.find("li").removeClass("selected");this.$drop.find("input["+this.selectItemName+"]:checked").each(function(){a(this).parents("li").first().addClass("selected")});if(!b){this.$el.trigger("change")}},updateSelectAll:function updateSelectAll(a){var b=this.$selectItems;if(!a){b=b.filter(":visible")}this.$selectAll.prop("checked",b.length&&b.length===b.filter(":checked").length);if(this.$selectAll.prop("checked")){this.options.onCheckAll()}},updateOptGroupSelect:function updateOptGroupSelect(){var b=this.$selectItems.filter(":visible");a.each(this.$selectGroups,function(c,d){var e=a(d).parent().attr("data-group"),f=b.filter("[data-group=\""+e+"\"]");a(d).prop("checked",f.length&&f.length===f.filter(":checked").length)})},getSelects:function getSelects(b){var c=this,d=[],e=[];this.$drop.find("input["+this.selectItemName+"]:checked").each(function(){d.push(a(this).parents("li").first().text());e.push(a(this).val())});if("text"===b&&this.$selectGroups.length){d=[];this.$selectGroups.each(function(){var b=[],e=a.trim(a(this).parent().text()),f=a(this).parent().data("group"),g=c.$drop.find("["+c.selectItemName+"][data-group=\""+f+"\"]"),h=g.filter(":checked");if(0===h.length){return}b.push("[");b.push(e);if(g.length>h.length){var i=[];h.each(function(){i.push(a(this).parent().text())});b.push(": "+i.join(", "))}b.push("]");d.push(b.join(""))})}return"text"===b?d:e},setSelects:function setSelects(b){var c=this;this.$selectItems.prop("checked",!1);a.each(b,function(a,b){c.$selectItems.filter("[value=\""+b+"\"]").prop("checked",!0)});this.$selectAll.prop("checked",this.$selectItems.length===this.$selectItems.filter(":checked").length);this.update()},enable:function enable(){this.$choice.removeClass("disabled")},disable:function disable(){this.$choice.addClass("disabled")},checkAll:function checkAll(){this.$selectItems.prop("checked",!0);this.$selectGroups.prop("checked",!0);this.$selectAll.prop("checked",!0);this.update();this.options.onCheckAll()},uncheckAll:function uncheckAll(){this.$selectItems.prop("checked",!1);this.$selectGroups.prop("checked",!1);this.$selectAll.prop("checked",!1);this.update();this.options.onUncheckAll()},focus:function focus(){this.$choice.focus();this.options.onFocus()},blur:function blur(){this.$choice.blur();this.options.onBlur()},refresh:function refresh(){this.init()},filter:function filter(){var b=this,c=a.trim(this.$searchInput.val()).toLowerCase();if(0===c.length){this.$selectItems.parent().show();this.$disableItems.parent().show();this.$selectGroups.parent().show()}else{this.$selectItems.each(function(){var b=a(this).parent();b[0>b.text().toLowerCase().indexOf(c)?"hide":"show"]()});this.$disableItems.parent().hide();this.$selectGroups.each(function(){var c=a(this).parent(),d=c.attr("data-group"),e=b.$selectItems.filter(":visible");c[0===e.filter("[data-group=\""+d+"\"]").length?"hide":"show"]()});if(this.$selectItems.filter(":visible").length){this.$selectAll.parent().show();this.$noResults.hide()}else{this.$selectAll.parent().hide();this.$noResults.show()}}this.updateOptGroupSelect();this.updateSelectAll()}};a.fn.multipleSelect=function(){var c=arguments[0],d=arguments,e,f=["getSelects","setSelects","enable","disable","checkAll","uncheckAll","focus","blur","refresh","close"];this.each(function(){var g=a(this),h=g.data("multipleSelect"),i=a.extend({},a.fn.multipleSelect.defaults,g.data(),"object"===_typeof(c)&&c);if(!h){h=new b(g,i);g.data("multipleSelect",h)}if("string"==typeof c){if(0>a.inArray(c,f)){throw"Unknown method: "+c}e=h[c](d[1])}else{h.init();if(d[1]){e=h[d[1]].apply(h,[].slice.call(d,2))}}});return e?e:this};a.fn.multipleSelect.defaults={name:"",isOpen:!1,placeholder:"",selectAll:!0,selectAllText:"Select all",selectAllDelimiter:["[","]"],allSelected:"All selected",minimumCountSelected:3,countSelected:"# of % selected",noMatchesFound:"No matches found",multiple:!1,multipleWidth:80,single:!1,filter:!1,width:void 0,maxHeight:250,container:null,position:"bottom",keepOpen:!1,blockSeparator:"",displayValues:!1,delimiter:", ",styler:function styler(){return!1},textTemplate:function textTemplate(a){return a.text()},onOpen:function onOpen(){return!1},onClose:function onClose(){return!1},onCheckAll:function onCheckAll(){return!1},onUncheckAll:function onUncheckAll(){return!1},onFocus:function onFocus(){return!1},onBlur:function onBlur(){return!1},onOptgroupClick:function onOptgroupClick(){return!1},onClick:function onClick(){return!1}}})(a)});
define ("local_intelliboard/competency_dashboard",["jquery","local_intelliboard/intb_multipleselect","core/str"],function(a,b,c){return{cohortFilter:function cohortFilter(){var b=a("#competencyCohortFilter");if(b.length){var d=c.get_string("all_cohorts","local_intelliboard");a.when(d).done(function(c){b.multipleSelect({placeholder:c,selectAll:!1,filter:!0,single:!0,onClick:function onClick(){window.location.href=a("#competencyCohortFilter option:selected").data("href")}})})}}}});
define ("local_intelliboard/setup_terms",["jquery","core/str"],function(a,b){var c={errorsContainer:a(".tab-item.terms .warnings-block"),loaderContainer:a(".tab-item.terms .loader"),errorMessage:"",isInit:!1,showErrorMessage:function showErrorMessage(d){if(!c.errorMessage){var e=b.get_string("please_accept_terms_and_conditions","local_intelliboard");a.when(e).done(function(a){c.errorMessage=a;c.errorsContainer.html(a);c.errorsContainer.removeClass("hidden");d()})}else{c.errorsContainer.html(c.errorMessage);c.errorsContainer.removeClass("hidden");d()}},hideErrors:function hideErrors(){c.errorsContainer.html("");c.errorsContainer.addClass("hidden")},closeTab:function closeTab(){a(".tab-item.terms").addClass("closed")},openTab:function openTab(){a(".tab-item.terms").removeClass("closed")},termsIsAccepted:function termsIsAccepted(){var b=a("#termsField").is(":checked"),c=a("#shieldField").is(":checked"),d=a("#privacyField").is(":checked");return b&&c&&d}};return c});
define ("local_intelliboard/instructor",["jquery","core/ajax","local_intelliboard/intb_multipleselect"],function(a,b){return{dashboardSettings:function dashboardSettings(c){var d=a(".instructor-courses-settings"),e=a(".instructor-dashboard-settings-wrapper");d.multipleSelect({multiple:!0,placeholder:c,multipleWidth:350,filter:!0});e.find(".ms-drop.bottom").append("<button class=\"btn btn-primary\">OK</button>");e.find(".ms-drop.bottom button").on("click",function(){var a=d.val();if(null==a){a=[]}var c=b.call([{methodname:"local_intelliboard_save_instructor_courses",args:{data:JSON.stringify({courses:a})}}]);c[0].done(function(){window.location.reload()})})}}});
define ("local_intelliboard/setup_moodle_settings",["jquery","core/ajax","local_intelliboard/validator","core/str"],function(a,b,c,d){var e={errorsContainer:a(".moodle-settings .warnings-block"),loaderContainer:a(".moodle-settings .loader"),save:function save(e){if(c.validateEmail(a("#subscription_email").val())){var f=b.call([{methodname:"local_intelliboard_setup_base_settings",args:{params:{webservice:a("#webservice").is(":checked"),rest_protocol:a("#rest_protocol").is(":checked"),soap_protocol:a("#soap_protocol").is(":checked"),user_identifier:a("#usernameorid").val(),enable_tracking:a("#enable_tracking").is(":checked"),enable_sso_link:a("#enable_sso_link").is(":checked"),email:a("#subscription_email").val()}}}]);f[0].done(function(a){e(a)});f[0].fail(function(){var b=d.get_string("server_error","local_intelliboard");a.when(b).done(function(a){e({status:"error",data:"<p>"+a+"</p>"})})})}else{var g=d.get_string("invalid_email","local_intelliboard");a.when(g).done(function(a){e({status:"error",data:"<p>"+a+"</p>"})})}},showErrors:function showErrors(a){e.errorsContainer.html(a);e.errorsContainer.removeClass("hidden")},hideErrors:function hideErrors(){e.errorsContainer.html("");e.errorsContainer.addClass("hidden")},closeTab:function closeTab(){a(".moodle-settings").addClass("closed")},openTab:function openTab(){a(".moodle-settings").removeClass("closed")}};return e});
define ("local_intelliboard/tracking",["jquery"],function(a){return{trackActivityLabelClicks:function trackActivityLabelClicks(b){a(".intelliboardLabelTracking").on("submit",function(c){if(!a(this).data("allowsubmit")){c.preventDefault();var d=a(this).parents("li.activity").attr("id").replace("module-",""),e=a(this);if(d){a.ajax(b,{data:{page:"module",param:d,time:1},complete:function complete(){e.attr("data-allowsubmit",1);e.submit()}})}}})}}});
define ("local_intelliboard/setup_authentication",["jquery","core/ajax","local_intelliboard/validator","core/str"],function(a,b,c,d){var e={errorsContainer:a(".tab-item.authentication .warnings-block"),loaderContainer:a(".tab-item.authentication .loader"),showErrors:function showErrors(a){e.errorsContainer.html(a);e.errorsContainer.removeClass("hidden")},hideErrors:function hideErrors(){e.errorsContainer.html("");e.errorsContainer.addClass("hidden")},closeTab:function closeTab(){a(".tab-item.authentication").addClass("closed")},openTab:function openTab(){a(".tab-item.authentication").removeClass("closed")},showLoginForm:function showLoginForm(){a(".tab-item .tab-body .login-form").removeClass("hidden")},hideLoginForm:function hideLoginForm(){a(".tab-item .tab-body .login-form").addClass("hidden")},showRegisterForm:function showRegisterForm(){a(".tab-item .tab-body .register-form").removeClass("hidden")},hideRegisterForm:function hideRegisterForm(){a(".tab-item .tab-body .register-form").addClass("hidden")},setFormEmail:function setFormEmail(b){a("#loginEmail").val(b);a("#registerEmail").val(b)},checkEmail:function checkEmail(d,e){if(c.validateEmail(d)){var f=b.call([{methodname:"local_intelliboard_setup_check_email",args:{email:a("#subscription_email").val()}}]);f[0].done(function(a){e(a)});f[0].fail(function(){e({email_exists:!1})})}else{e({email_exists:!1})}},loginHandler:function loginHandler(c,f,g){e.loaderContainer.addClass("hidden");a(".tab-body .login-form .sign-in").unbind("click");a(".tab-body .login-form .sign-in").on("click",function(){var h=a("#loginEmail").val(),i=a("#loginPassword").val();e.loaderContainer.removeClass("hidden");e.hideErrors();if(!h||!i){var j=d.get_string("all_fields_required","local_intelliboard");a.when(j).done(function(a){e.loaderContainer.addClass("hidden");e.showErrors(a)})}else{var k=b.call([{methodname:"local_intelliboard_setup_login",args:{email:h,password:i,moodle_service_token:c,restProtocol:f}}]);k[0].done(function(a){e.loaderContainer.addClass("hidden");if("error"===a.status){e.showErrors(a.message)}else{g()}});k[0].fail(function(){var b=d.get_string("server_error","local_intelliboard");a.when(b).done(function(a){e.loaderContainer.addClass("hidden");e.showErrors("<p>"+a+"</p>")})})}})},registerHandler:function registerHandler(c,f,g){e.loaderContainer.addClass("hidden");a(".tab-body .register-form .sign-up").unbind("click");a(".tab-body .register-form .sign-up").on("click",function(){var h=a("#registerEmail").val(),i=a("#registerPassword").val(),j=a("#registerName").val();e.loaderContainer.removeClass("hidden");e.hideErrors();if(!h||!i||!j){var k=d.get_string("all_fields_required","local_intelliboard");a.when(k).done(function(a){e.loaderContainer.addClass("hidden");e.showErrors(a)})}else{var l=b.call([{methodname:"local_intelliboard_setup_register",args:{name:j,email:h,password:i,country:a("#registerCountry").val(),moodle_service_token:c,restProtocol:f}}]);l[0].done(function(a){e.loaderContainer.addClass("hidden");if("error"===a.status){e.showErrors(a.message)}else{g()}});l[0].fail(function(){var b=d.get_string("server_error","local_intelliboard");a.when(b).done(function(a){e.loaderContainer.addClass("hidden");e.showErrors("<p>"+a+"</p>")})})}})}};return e});
define ("local_intelliboard/validator",[],function(){return{validateEmail:function validateEmail(a){return /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test((a+"").toLowerCase())}}});
define ("local_intellicart/intellicart_calendar",["jquery","core/ajax","local_intellicart/fullcalendar","core/str","core/config","core/modal_factory","core/modal_events","core/templates","core/notification"],function(a,b,c,d,e,f,g,h,i){var j={productid:0,canedit:!1,disablecreatepopup:!1,createsessioninpasttime:!1,timezone:"",Calendar:null,loader:"<i class=\"loader fa fa-circle-o-notch fa-spin\"></i>",calendarbox:".ic-calendar-box",calendarcontainer:"#ic_calendar",eventcontainer:".ic-event-box",container:".sessions-list.privatetutoring",init:function init(b,c,d,e,f){j.productid=b;j.canedit=c;j.timezone=d;j.disablecreatepopup=e;j.createsessioninpasttime=f;j.loadCalendar();a(j.eventcontainer).on("click",".backtocalendar-btn",function(){j.showCalendar()})},loadCalendar:function loadCalendar(){var c=j.productid;j.Calendar=a(j.calendarcontainer).fullCalendar({header:{left:"today,month,agendaWeek,agendaDay",center:"prev title next",right:""},events:function events(a,d,e,f){var g=b.call([{methodname:"local_intellicart_calendar_sessions",args:{start:a,end:d,productid:c,type:"teaching"}}]);g[0].done(function(a){var b=[];if(a.length){for(var c=0;c<a.length;c++){b.push({id:a[c].id,title:a[c].title,start:a[c].start,end:a[c].end,allDay:!1,className:a[c].class})}}f(b)});g[0].fail(function(a){console.log(a)})},dayClick:function dayClick(a){var b=new Date(new Date().toISOString().slice(0,10)).getTime(),c=new Date(a.format()).getTime();if(!j.createsessioninpasttime||c>=b){if(j.disablecreatepopup){window.location.href=e.wwwroot+"/local/intellicart/products/editsession.php?datestart="+new Date(a).getTime()/1e3+"&iscalendarcreate=1"}else{j.showCreateSessionForm(a)}}},eventClick:function eventClick(b){j.loadEvent(b.id);var c=b.start;a(j.calendarcontainer).fullCalendar("gotoDate",c.format())}})},showCalendar:function showCalendar(){a(j.calendarbox).show();a(j.eventcontainer).addClass("hidden").html("")},refreshCalendar:function refreshCalendar(){a(j.calendarcontainer).fullCalendar("refetchEvents")},loadEvent:function loadEvent(c){a(j.calendarbox).hide();a(j.eventcontainer).removeClass("hidden").html(j.loader);var d=b.call([{methodname:"local_intellicart_calendar_get_session",args:{sessionid:c}}]);d[0].done(function(b){a(j.eventcontainer).removeClass("hidden").html(b.content)});d[0].fail(function(a){console.log(a)})},showCreateSessionForm:function showCreateSessionForm(c){var e="",k=!1,l=j.formatDate(c);d.get_strings([{key:"spdatetitle",component:"local_intellicart",param:{date:l}},{key:"save",component:"local_intellicart"}]).then(function(a){e=a[1];return f.create({type:f.types.SAVE_CANCEL,title:a[0],body:h.render("local_intellicart/create-session-modal",{productid:j.productid,timezone:j.timezone})})}).then(function(d){d.setSaveButtonText(e);d.getRoot().on(g.hidden,function(){d.setBody("");i.fetchNotifications()});d.getBody().find("#create_session_form input[name=starttime], #create_session_form  input[name=endtime], \n                        #create_session_form  input[name=repeat_until]").change(function(){var a=d.getBody().find("#create_session_form"),e=b.call([{methodname:"local_intellicart_session_validation",args:{formdata:a.serialize(),date:c}}]);e[0].done(function(b){if(b.status){k=0;a.find("input[name=\"starttime\"]").removeClass("alert-danger");a.find("input[name=\"endtime\"]").removeClass("alert-danger")}else{k=1;a.find("input[name=\"starttime\"]").addClass("alert-danger");a.find("input[name=\"endtime\"]").addClass("alert-danger")}j.notification(b.error,"#create_session_form .timeisbusy","danger",0)});e[0].fail(function(a){console.log(a)})});d.getRoot().on(g.save,function(f){f.preventDefault();var e=a("#create_session_form"),g=e.find("input[name=\"productid\"]").val(),h=e.find("input[name=\"starttime\"]").val(),i=e.find("input[name=\"endtime\"]").val(),l=e.find("input[name=\"repeat\"]:checked").val(),m=e.find("input[name=\"repeat_until\"]").val(),n=e.find("input[name=\"name\"]").val();if(h.length){e.find("input[name=\"starttime\"]").removeClass("alert-danger")}else{e.find("input[name=\"starttime\"]").addClass("alert-danger")}if(i.length){e.find("input[name=\"endtime\"]").removeClass("alert-danger")}else{e.find("input[name=\"endtime\"]").addClass("alert-danger")}if("yes"==l){if(m.length){e.find("input[name=\"repeat_until\"]").removeClass("alert-danger")}else{e.find("input[name=\"repeat_until\"]").addClass("alert-danger")}}else{e.find("input[name=\"repeat_until\"]").removeClass("alert-danger")}if(k){e.find("input[name=\"starttime\"]").addClass("alert-danger");e.find("input[name=\"endtime\"]").addClass("alert-danger")}if(!k&&h.length&&i.length&&("yes"==l&&m.length||l==void 0||"yes"!=l)){d.hide();var o=b.call([{methodname:"local_intellicart_calendar_save_session",args:{id:0,productid:g,date:c,starttime:h,endtime:i,repeat:l!=void 0?l:"no",repeat_until:m,name:n}}]);o[0].done(function(){d.hide();j.refreshCalendar()});o[0].fail(function(a){console.log(a)})}});d.show()}).catch(i.exception)},notification:function(b,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"info",e=3<arguments.length&&arguments[3]!==void 0?arguments[3]:5e3,f=c!=void 0?c:"#user-notifications";if(!b){a(f).html("");return null}a(f).html("<div class=\"alert alert-"+d+" ic-notification alert-block\" role=\"alert\">    <button type=\"button\" class=\"close\" data-dismiss=\"alert\">\xD7</button>"+b+"</div>");if(e){setTimeout(function(){a(".ic-notification").remove()},5e3)}},formatDate:function formatDate(a){var b=[];b.Jan="January";b.Feb="February";b.Mar="March";b.Apr="April";b.May="May";b.Jun="June";b.Jul="July";b.Aug="August";b.Sep="September";b.Oct="October";b.Nov="November";b.Dec="December";var c=a.toString().split(" "),d=c[2],e=c[1],f=c[3];return b[e]+" "+d+", "+f}};return j});
define ("local_intellicart/assignprograms",["jquery","core/ajax","core/notification"],function(a,b){return{list:function list(a){var c,c=b.call([{methodname:"local_intellicart_get_assignable_programs",args:a}])[0];return c},processResults:function processResults(b,c){var d=[];data=JSON.parse(c.resp);a.each(data,function(a,b){d.push({value:b.id,label:b.fullname})});return d},transport:function transport(b,c,d){var e=a(b).attr("data-id");this.list({query:c,instanceid:e}).then(d)}}});
define ("local_intellicart/intellicart_popover_controller",["jquery","core/ajax","core/templates","core/str","core/url","core/notification","core/custom_interaction_events","core/popover_region_controller","local_intellicart/intellicart_repository","local_intellicart/intellicart_area_events"],function(a,b,c,d,e,f,g,h,i){var j={ALL_PRODUCTS_CONTAINER:"[data-region=\"all-products\"]",PRODUCT:"[data-region=\"product-content-item-container\"]",EMPTY_MESSAGE:"[data-region=\"empty-message\"]",COUNT_CONTAINER:"[data-region=\"count-container\"]",PRODUCT_DELETE_LINK:"[data-action=\"delete-item\"]",CONTENT_CONTAINER:"[data-region=\"popover-region-content-container\"]",CONTENT_FOOTER:"[data-region=\"popover-region-footer-container\"]",CONTENT_HEADER:"[data-region=\"popover-region-header-text\"]",CONTENT_HEADER_LI:"[data-region=\"popover-region-header-currency-li\"]"},k=function(a){h.call(this,a);this.productsCount=0;this.userId=this.root.attr("data-userid");this.container=this.root.find(j.ALL_PRODUCTS_CONTAINER);this.content_container=this.root.find(j.CONTENT_CONTAINER);this.footer=this.root.find(j.CONTENT_FOOTER);this.initialLoad=!1;this.loadProductsCount()};k.prototype=Object.create(h.prototype);k.prototype.constructor=k;k.prototype.getContent=function(){return this.container};k.prototype.getRoot=function(){return this.root};k.prototype.getFooter=function(){return this.footer};k.prototype.hasDoneInitialLoad=function(){return this.initialLoad};k.prototype.renderProductsCount=function(){var a=this.root.find(j.COUNT_CONTAINER);if(this.productsCount){a.text(this.productsCount);a.removeClass("hidden")}else{a.addClass("hidden")}};k.prototype.loadProductsCount=function(){i.countProducts({userid:this.userId}).then(function(a){this.productsCount=a;this.renderProductsCount()}.bind(this))};k.prototype.getProductElement=function(a){var b=this.root.find(j.PRODUCT+"[data-id=\""+a+"\"]");return 1==b.length?b:null};k.prototype.renderProducts=function(b,d){var e=[],g=[],h=[];if(b.length){a.each(b,function(a,b){var d=c.render("local_intellicart/product_content_item",b);e.push(d);d.then(function(b,c){g[a]=b;h[a]=c}).fail(f.exception)}.bind(this))}return a.when.apply(a.when,e).then(function(){d.html("");if(b.length){a.each(b,function(a){d.append(g[a]);c.runTemplateJS(h[a])})}})};k.prototype.renderTotals=function(a){var b=c.render("local_intellicart/intellicart_popover_footer",a),d=this.getRoot();b.then(function(a,b){d.find(j.CONTENT_FOOTER).html(a);c.runTemplateJS(b)}).fail(f.exception)};k.prototype.renderHeader=function(a){if(a.enablecurrencies){var b=c.render("local_intellicart/intellicart_popover_header_currency",a),d=this.getRoot(),e=d.find(j.CONTENT_HEADER);b.then(function(a,b){if(!e.find(".popover-currency").length){e.append(a)}c.runTemplateJS(b)}).fail(f.exception)}};k.prototype.deleteProduct=function(a){return i.deleteItem(a.attr("data-id")).then(function(){this.productsCount--;a.remove();location.reload()}.bind(this))};k.prototype.loadProducts=function(){if(this.isLoading){return a.Deferred().resolve()}this.startLoading();var b={userid:this.userId},c=this.getContent();return i.query(b).then(function(a){var b=a.products;this.productsCount=a.productscount;this.initialLoad=!0;if(b.length){this.root.find(j.EMPTY_MESSAGE).hide();this.renderProducts(b,c);this.renderHeader(a);return this.renderTotals(a)}else{this.footer.empty();this.renderHeader(a);this.renderTotals(a);this.root.find(j.EMPTY_MESSAGE).show()}return!1}.bind(this)).always(function(){this.stopLoading()}.bind(this))};k.prototype.registerEventListeners=function(){g.define(this.root,[g.events.activate]);this.root.on(g.events.activate,j.PRODUCT_DELETE_LINK,function(b){var c=a(b.target).closest(j.PRODUCT);this.deleteProduct(c);b.stopPropagation()}.bind(this));this.root.on(this.events().menuOpened,function(){this.loadProducts()}.bind(this));this.root.on(this.events().startLoading,function(){this.getContent().attr("aria-busy","true")}.bind(this));this.root.on(this.events().stopLoading,function(){this.getContent().attr("aria-busy","false")}.bind(this));this.root.on("click",j.CONTENT_HEADER_LI,function(c){var d=a(c.target).attr("data-code"),e=b.call([{methodname:"local_intellicart_set_currency",args:{code:d}}])[0];location.reload()}.bind(this));this.content_container.after("<div data-region=\"popover-region-footer-container\" class=\"popover-region-footer-container\"></div>")};return k});
define ("local_intellicart/enrollusers",["jquery","core/ajax","core/notification"],function(a,b){return{list:function list(a){var c,c=b.call([{methodname:"local_intellicart_get_users_for_enrollment",args:a}])[0];return c},processResults:function processResults(b,c){var d=[];data=JSON.parse(c.resp)[0];a.each(data,function(a,b){d.push({value:b.id,label:b.name})});return d},transport:function transport(b,c,d){var e=a(b).attr("data-id"),f=a(b).attr("data-type");this.list({query:c,id:e,type:f}).then(d)}}});
define ("local_intellicart/intellicart_chart_reports",["jquery","local_intellicart/intellicart_charts"],function(a,b){return{init:function init(c,d,e){a("#groupbyselect").on("change",function(){a("#groupbyFilterForm").submit()});switch(c){case 6:b.report6(d,e);break;case 7:b.report7(d,e);break;case 10:b.report10(d,e);break;case 11:b.report11(d,e);break;case 12:b.report12(d,e);break;}}}});
define ("local_intellicart/intellicart_multilang",["jquery","core/str","core/modal_factory","core/modal_events","core/fragment","core/ajax","core/yui"],function(a,b,c,d,e,f,g){var h=function(a,b,c){this.instancetype=a;this.instanceid=b;this.contextid=c;this.init()};h.prototype.modal=null;h.prototype.instanceid=0;h.prototype.contextid=0;h.prototype.instancetype="";h.prototype.formidentifier=".form-multilanguage";h.prototype.init=function(){var e=this;b.get_strings([{key:"editmultilangtitle",component:"local_intellicart"}]).then(function(b){a(e.formidentifier+" .field-multilang-block input[type=text], "+e.formidentifier+" .field-multilang-block textarea").each(function(){var c=a(this),d=c.prop("tagName");if(c.attr("id").includes("editor")){d="EDITOR"}var f=e.preparename(c.attr("name")),g=a("<span/>",{class:"add-multi-lang fa fa-language","data-name":f,"data-tag":d,title:b[0],text:" ",style:"font-size:20px;cursor:pointer;margin-left:5px;"});a(c).after(g)})});a(document).on("click",e.formidentifier+" .add-multi-lang",function(){var f=a(this).data("name"),g=a(this).data("tag");b.get_strings([{key:"langmodaltitle",component:"local_intellicart"}]).then(function(a){return c.create({type:c.types.SAVE_CANCEL,title:a[0],body:e.getBody({},f,g)}).done(function(a){e.modal=a;e.modal.setLarge();e.modal.getRoot().on(d.hidden,function(){e.modal.setBody("")}.bind(e));e.modal.getRoot().on(d.save,e.submitForm.bind(e));e.modal.getRoot().on("submit","form",e.submitFormAjax.bind(e));return e.modal}.bind(e)).then(function(){e.modal.show()})})})};h.prototype.preparename=function(a){a=a.replace("_editor[text]","");return a};h.prototype.getBody=function(a,b,c){if("undefined"==typeof a){a={}}var d={name:b,filedtype:c,instanceid:this.instanceid,instancetype:this.instancetype,jsonformdata:JSON.stringify(a)};return e.loadFragment("local_intellicart","new_multilang_form",this.contextid,d)};h.prototype.handleFormSubmissionResponse=function(){this.modal.hide();g.use("moodle-core-formchangechecker",function(){M.core_formchangechecker.reset_form_dirty_state()});document.location.reload()};h.prototype.handleFormSubmissionFailure=function(a){this.modal.setBody(this.getBody(a))};h.prototype.submitFormAjax=function(b){b.preventDefault();var c=document.createEvent("HTMLEvents");c.initEvent("change",!0,!0);this.modal.getRoot().find(":input").each(function(a,b){b.dispatchEvent(c)});var d=a.merge(this.modal.getRoot().find("[aria-invalid=\"true\"]"),this.modal.getRoot().find(".error"));if(d.length){d.first().focus();return}var e=this.modal.getRoot().find("form").serialize();f.call([{methodname:"local_intellicart_create_multilang_form",args:{contextid:this.contextid,jsonformdata:JSON.stringify(e)},done:this.handleFormSubmissionResponse.bind(this,e),fail:this.handleFormSubmissionFailure.bind(this,e)}])};h.prototype.submitForm=function(a){a.preventDefault();this.modal.getRoot().find("form").submit()};return{init:function init(a,b,c){return new h(a,b,c)}}});
define ("local_intellicart/assigncohorts",["jquery","core/ajax","core/notification"],function(a,b){return{list:function list(a){var c,c=b.call([{methodname:"local_intellicart_get_assignable_cohorts",args:a}])[0];return c},processResults:function processResults(b,c){var d=[];data=JSON.parse(c.resp)[0];a.each(data,function(a,b){d.push({value:b.id,label:b.name})});return d},transport:function transport(b,c,d){var e=a(".shopping-cart-formbox .mform input[name=\"id\"]").val(),f=a(".shopping-cart-formbox .mform input[name=\"itemtype\"]").val();this.list({query:c,instanceid:e,type:f}).then(d)}}});
define ("local_intellicart/intellicart_customfields",["jquery","core/ajax","jqueryui"],function(a,b){var c={firstUpdate:!0,edit:function edit(){var b=c.getSelectedFieldType();c.processFieldTypeSelect(b);a("#page-local-intellicart-customfields-edit form select[name=\"fieldtype\"]").on("change",function(){var a=c.getSelectedFieldType();c.processFieldTypeSelect(a)})},getSelectedFieldType:function getSelectedFieldType(){var b=a("#page-local-intellicart-customfields-edit form select[name=\"fieldtype\"] option:selected").val();return b},processFieldTypeSelect:function processFieldTypeSelect(b){if(!c.firstUpdate){a("#page-local-intellicart-customfields-edit form textarea[name=\"options\"]").val("")}c.firstUpdate=!1;if("select"==b||"multiselect"==b){a("#page-local-intellicart-customfields-edit form textarea[name=\"options\"]").parents("div.fitem").css("display","flex")}else{a("#page-local-intellicart-customfields-edit form textarea[name=\"options\"]").parents("div.fitem").css("display","none")}},init:function init(c){a("table").addClass("sorting");a(".sorting > tbody").sortable({containerSelector:".sorting > tbody",itemSelector:"tr",group:"sort_1",handle:".move-action",update:function update(){var d=a("table.sorting tbody tr").not(".emptyrow"),e={},f=1;d.each(function(b,c){var d=a(c).find("td:last-child a:last-child");e[d.attr("data-fieldid")]=f;f++});b.call([{methodname:"local_intellicart_save_custom_fields_sequence",args:{instancetype:c,data:JSON.stringify(e)}}])}})}};return c});
define ("local_intellicart/helper",["jquery"],function(a){return{processCollectedJavascript:function processCollectedJavascript(b){var c=a(b),d="";c.each(function(b,c){c=a(c);var e=c.prop("tagName");if(e&&"script"===e.toLowerCase()){if(c.attr("src")){var f=!1;a("script").each(function(b,d){if(a(d).attr("src")===c.attr("src")){f=!0}return!f});if(!f){d+=" { ";d+=" node = document.createElement(\"script\"); ";d+=" node.type = \"text/javascript\"; ";d+=" node.src = decodeURI(\""+encodeURI(c.attr("src"))+"\"); ";d+=" document.getElementsByTagName(\"head\")[0].appendChild(node); ";d+=" } "}}else{d+=" "+c.text()}}});return d}}});
function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}!function(a,b){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define ("local_intellicart/flatpickr",b):(a=a||self).flatpickr=b()}(this,function(){"use strict";var C=function e(){return(C=Object.assign||function(b){for(var c,d=1,e=arguments.length;d<e;d++){for(var a in c=arguments[d]){Object.prototype.hasOwnProperty.call(c,a)&&(b[a]=c[a])}}return b}).apply(this,arguments)};function j(){for(var b=0,c=0,d=arguments.length;c<d;c++){b+=arguments[c].length}var f=Array(b),a=0;for(c=0;c<d;c++){for(var g=arguments[c],h=0,j=g.length;h<j;h++,a++){f[a]=g[h]}}return f}var x=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],aa={_disable:[],_enable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==("undefined"==typeof window?"undefined":_typeof(window))&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enable:[],enableSeconds:!1,enableTime:!1,errorHandler:function errorHandler(a){return"undefined"!=typeof console&&console.warn(a)},getWeek:function getWeek(a){var b=new Date(a.getTime());b.setHours(0,0,0,0),b.setDate(b.getDate()+3-(b.getDay()+6)%7);var c=new Date(b.getFullYear(),0,4);return 1+Math.round(((b.getTime()-c.getTime())/864e5-3+(c.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},a={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function ordinal(a){var b=a%100;if(3<b&&21>b)return"th";switch(b%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th";}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},s=function(a,b){return void 0===b&&(b=2),("000"+a).slice(-1*b)},y=function(a){return!0===a?1:0};function n(b,c,d){var e;return void 0===d&&(d=!1),function(){var a=this,f=arguments;null!==e&&clearTimeout(e),e=window.setTimeout(function(){e=null,d||b.apply(a,f)},c),d&&!e&&b.apply(a,f)}}var o=function(a){return a instanceof Array?a:[a]};function k(a,b,c){if(!0===c)return a.classList.add(b);a.classList.remove(b)}function M(b,c,d){var e=window.document.createElement(b);return c=c||"",d=d||"",e.className=c,void 0!==d&&(e.textContent=d),e}function d(a){for(;a.firstChild;){a.removeChild(a.firstChild)}}function l(b,c){var d=M("div","numInputWrapper"),e=M("input","numInput "+b),a=M("span","arrowUp"),f=M("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?e.type="number":(e.type="text",e.pattern="\\d*"),void 0!==c)for(var g in c){e.setAttribute(g,c[g])}return d.appendChild(e),d.appendChild(a),d.appendChild(f),d}function q(a){try{return"function"==typeof a.composedPath?a.composedPath()[0]:a.target}catch(b){return a.target}}var c=function(){},g=function(a,b,c){return c.months[b?"shorthand":"longhand"][a]},i={D:c,F:function F(a,b,c){a.setMonth(c.months.longhand.indexOf(b))},G:function G(a,b){a.setHours(parseFloat(b))},H:function H(a,b){a.setHours(parseFloat(b))},J:function J(a,b){a.setDate(parseFloat(b))},K:function K(a,b,c){a.setHours(a.getHours()%12+12*y(new RegExp(c.amPM[1],"i").test(b)))},M:function M(a,b,c){a.setMonth(c.months.shorthand.indexOf(b))},S:function S(a,b){a.setSeconds(parseFloat(b))},U:function U(a,b){return new Date(1e3*parseFloat(b))},W:function W(b,c,d){var e=parseInt(c),a=new Date(b.getFullYear(),0,2+7*(e-1),0,0,0,0);return a.setDate(a.getDate()-a.getDay()+d.firstDayOfWeek),a},Y:function Y(a,b){a.setFullYear(parseFloat(b))},Z:function Z(a,b){return new Date(b)},d:function(a,b){a.setDate(parseFloat(b))},h:function(a,b){a.setHours(parseFloat(b))},i:function(a,b){a.setMinutes(parseFloat(b))},j:function j(a,b){a.setDate(parseFloat(b))},l:c,m:function(a,b){a.setMonth(parseFloat(b)-1)},n:function(a,b){a.setMonth(parseFloat(b)-1)},s:function(a,b){a.setSeconds(parseFloat(b))},u:function(a,b){return new Date(parseFloat(b))},w:c,y:function(a,b){a.setFullYear(2e3+parseFloat(b))}},t={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},h={Z:function Z(a){return a.toISOString()},D:function D(a,b,c){return b.weekdays.shorthand[h.w(a,b,c)]},F:function F(a,b,c){return g(h.n(a,b,c)-1,!1,b)},G:function G(a,b,c){return s(h.h(a,b,c))},H:function H(a){return s(a.getHours())},J:function J(a,b){return void 0!==b.ordinal?a.getDate()+b.ordinal(a.getDate()):a.getDate()},K:function K(a,b){return b.amPM[y(11<a.getHours())]},M:function M(a,b){return g(a.getMonth(),!0,b)},S:function S(a){return s(a.getSeconds())},U:function U(a){return a.getTime()/1e3},W:function W(a,b,c){return c.getWeek(a)},Y:function Y(a){return s(a.getFullYear(),4)},d:function(a){return s(a.getDate())},h:function(a){return a.getHours()%12?a.getHours()%12:12},i:function(a){return s(a.getMinutes())},j:function j(a){return a.getDate()},l:function(a,b){return b.weekdays.longhand[a.getDay()]},m:function(a){return s(a.getMonth()+1)},n:function(a){return a.getMonth()+1},s:function(a){return a.getSeconds()},u:function(a){return a.getTime()},w:function(a){return a.getDay()},y:function(a){return(a.getFullYear()+"").substring(2)}},p=function(b){var c=b.config,d=void 0===c?aa:c,e=b.l10n,f=void 0===e?a:e,g=b.isMobile;return function(b,c,e){var j=e||f;return void 0===d.formatDate||void 0!==g&&g?c.split("").map(function(c,e,a){return h[c]&&"\\"!==a[e-1]?h[c](b,j,d):"\\"!==c?c:""}).join(""):d.formatDate(b,c,j)}},r=function(b){var c=b.config,d=void 0===c?aa:c,e=b.l10n,f=void 0===e?a:e;return function(a,c,e,h){if(0===a||a){var j;if(a instanceof Date)j=new Date(a.getTime());else if("string"!=typeof a&&void 0!==a.toFixed)j=new Date(a);else if("string"==typeof a){var k=c||(d||aa).dateFormat,n=(a+"").trim();if("today"===n)j=new Date,e=!0;else if(/Z$/.test(n)||/GMT$/.test(n))j=new Date(a);else if(d&&d.parseDate)j=d.parseDate(a,k);else{j=d&&d.noCalendar?new Date(new Date().setHours(0,0,0,0)):new Date(new Date().getFullYear(),0,1,0,0,0,0);for(var o=void 0,q=[],m=0,r=0,s="";m<k.length;m++){var u=k[m],v="\\"===u,b="\\"===k[m-1]||v;if(t[u]&&!b){s+=t[u];var w=new RegExp(s).exec(a);w&&(o=!0)&&q["Y"!==u?"push":"unshift"]({fn:i[u],val:w[++r]})}else v||(s+=".");q.forEach(function(a){var b=a.fn,c=a.val;return j=b(j,c,h||f)||j})}j=o?j:void 0}}if(j instanceof Date&&!isNaN(j.getTime()))return!0===e&&j.setHours(0,0,0,0),j;d.errorHandler(new Error("Invalid date provided: "+a))}}};function f(a,b,c){return void 0===c&&(c=!0),!1!==c?new Date(a.getTime()).setHours(0,0,0,0)-new Date(b.getTime()).setHours(0,0,0,0):a.getTime()-b.getTime()}"function"!=typeof Object.assign&&(Object.assign=function(b){for(var c=[],d=1;d<arguments.length;d++){c[d-1]=arguments[d]}if(!b)throw TypeError("Cannot convert undefined or null to object");for(var e=function(a){a&&Object.keys(a).forEach(function(c){return b[c]=a[c]})},a=0,f=c,g;a<f.length;a++){g=f[a];e(g)}return b});function e(v,c){var ta={config:C(C({},aa),b.defaultConfig),l10n:a};function h(a){return a.bind(ta)}function e(){var a=ta.config;!1===a.weekNumbers&&1===a.showMonths||!0!==a.noCalendar&&window.requestAnimationFrame(function(){if(void 0!==ta.calendarContainer&&(ta.calendarContainer.style.visibility="hidden",ta.calendarContainer.style.display="block"),void 0!==ta.daysContainer){var b=(ta.days.offsetWidth+1)*a.showMonths;ta.daysContainer.style.width=b+"px",ta.calendarContainer.style.width=b+(void 0!==ta.weekWrapper?ta.weekWrapper.offsetWidth:0)+"px",ta.calendarContainer.style.removeProperty("visibility"),ta.calendarContainer.style.removeProperty("display")}})}function m(b){if(0===ta.selectedDates.length){var d=void 0!==ta.config.minDate?new Date(ta.config.minDate.getTime()):new Date,e=w(),f=e.hours,a=e.minutes,g=e.seconds;d.setHours(f,a,g,0),ta.setDate(d,!1)}void 0!==b&&"blur"!==b.type&&function(b){b.preventDefault();var e="keydown"===b.type,h=q(b),j=h;void 0!==ta.amPM&&h===ta.amPM&&(ta.amPM.textContent=ta.l10n.amPM[y(ta.amPM.textContent===ta.l10n.amPM[0])]);var a=parseFloat(j.getAttribute("min")),i=parseFloat(j.getAttribute("max")),k=parseFloat(j.getAttribute("step")),c=parseInt(j.value,10),d=b.delta||(e?38===b.which?1:-1:0),l=c+k*d;if(void 0!==j.value&&2===j.value.length){var m=j===ta.hourElement,f=j===ta.minuteElement;l<a?(l=i+l+y(!m)+(y(m)&&y(!ta.amPM)),f&&P(void 0,-1,ta.hourElement)):l>i&&(l=j===ta.hourElement?l-i-y(!ta.amPM):a,f&&P(void 0,1,ta.hourElement)),ta.amPM&&m&&(1===k?23===l+c:Math.abs(l-c)>k)&&(ta.amPM.textContent=ta.l10n.amPM[y(ta.amPM.textContent===ta.l10n.amPM[0])]),j.value=s(l)}}(b);var h=ta._input.value;u(),ra(),ta._input.value!==h&&ta._debouncedChange()}function u(){if(void 0!==ta.hourElement&&void 0!==ta.minuteElement){var b,d,g=(parseInt(ta.hourElement.value.slice(-2),10)||0)%24,h=(parseInt(ta.minuteElement.value,10)||0)%60,j=void 0!==ta.secondElement?(parseInt(ta.secondElement.value,10)||0)%60:0;void 0!==ta.amPM&&(b=g,d=ta.amPM.textContent,g=b%12+12*y(d===ta.l10n.amPM[1]));var k=void 0!==ta.config.minTime||ta.config.minDate&&ta.minDateHasTime&&ta.latestSelectedDateObj&&0===f(ta.latestSelectedDateObj,ta.config.minDate,!0);if(void 0!==ta.config.maxTime||ta.config.maxDate&&ta.maxDateHasTime&&ta.latestSelectedDateObj&&0===f(ta.latestSelectedDateObj,ta.config.maxDate,!0)){var m=void 0!==ta.config.maxTime?ta.config.maxTime:ta.config.maxDate;(g=Math.min(g,m.getHours()))===m.getHours()&&(h=Math.min(h,m.getMinutes())),h===m.getMinutes()&&(j=Math.min(j,m.getSeconds()))}if(k){var l=void 0!==ta.config.minTime?ta.config.minTime:ta.config.minDate;(g=Math.max(g,l.getHours()))===l.getHours()&&(h=Math.max(h,l.getMinutes())),h===l.getMinutes()&&(j=Math.max(j,l.getSeconds()))}E(g,h,j)}}function i(a){var b=a||ta.latestSelectedDateObj;b&&E(b.getHours(),b.getMinutes(),b.getSeconds())}function w(){var b=ta.config.defaultHour,c=ta.config.defaultMinute,d=ta.config.defaultSeconds;if(void 0!==ta.config.minDate){var f=ta.config.minDate.getHours(),a=ta.config.minDate.getMinutes();(b=Math.max(b,f))===f&&(c=Math.max(a,c)),b===f&&c===a&&(d=ta.config.minDate.getSeconds())}if(void 0!==ta.config.maxDate){var g=ta.config.maxDate.getHours(),h=ta.config.maxDate.getMinutes();(b=Math.min(b,g))===g&&(c=Math.min(h,c)),b===g&&c===h&&(d=ta.config.maxDate.getSeconds())}return{hours:b,minutes:c,seconds:d}}function E(a,b,c){void 0!==ta.latestSelectedDateObj&&ta.latestSelectedDateObj.setHours(a%24,b,c||0,0),ta.hourElement&&ta.minuteElement&&!ta.isMobile&&(ta.hourElement.value=s(ta.config.time_24hr?a:(12+a)%12+12*y(0==a%12)),ta.minuteElement.value=s(b),void 0!==ta.amPM&&(ta.amPM.textContent=ta.l10n.amPM[y(12<=a)]),void 0!==ta.secondElement&&(ta.secondElement.value=s(c)))}function I(a){var b=q(a),c=parseInt(b.value)+(a.delta||0);(1<c/1e3||"Enter"===a.key&&!/[^\d]/.test(c.toString()))&&V(c)}function O(b,c,d,f){return c instanceof Array?c.forEach(function(a){return O(b,a,d,f)}):b instanceof Array?b.forEach(function(a){return O(a,c,d,f)}):(b.addEventListener(c,d,f),void ta._handlers.push({element:b,event:c,handler:d,options:f}))}function F(){ma("onChange")}function N(b,c){var d=void 0!==b?ta.parseDate(b):ta.latestSelectedDateObj||(ta.config.minDate&&ta.config.minDate>ta.now?ta.config.minDate:ta.config.maxDate&&ta.config.maxDate<ta.now?ta.config.maxDate:ta.now),e=ta.currentYear,a=ta.currentMonth;try{void 0!==d&&(ta.currentYear=d.getFullYear(),ta.currentMonth=d.getMonth())}catch(a){a.message="Invalid date supplied: "+d,ta.config.errorHandler(a)}c&&ta.currentYear!==e&&(ma("onYearChange"),B()),c&&(ta.currentYear!==e||ta.currentMonth!==a)&&ma("onMonthChange"),ta.redraw()}function A(a){var b=q(a);~b.className.indexOf("arrow")&&P(a,b.classList.contains("arrowUp")?1:-1)}function P(b,c,d){var e=b&&q(b),a=d||e&&e.parentNode&&e.parentNode.firstChild,f=na("increment");f.delta=c,a&&a.dispatchEvent(f)}function S(b,c,d,e){var a=Z(c,!0),g=M("span","flatpickr-day "+b,c.getDate().toString());return g.dateObj=c,g.$i=e,g.setAttribute("aria-label",ta.formatDate(c,ta.config.ariaDateFormat)),-1===b.indexOf("hidden")&&0===f(c,ta.now)&&(ta.todayDateElem=g,g.classList.add("today"),g.setAttribute("aria-current","date")),a?(g.tabIndex=-1,oa(c)&&(g.classList.add("selected"),ta.selectedDateElem=g,"range"===ta.config.mode&&(k(g,"startRange",ta.selectedDates[0]&&0===f(c,ta.selectedDates[0],!0)),k(g,"endRange",ta.selectedDates[1]&&0===f(c,ta.selectedDates[1],!0)),"nextMonthDay"===b&&g.classList.add("inRange")))):g.classList.add("flatpickr-disabled"),"range"===ta.config.mode&&function(a){return!("range"!==ta.config.mode||2>ta.selectedDates.length)&&0<=f(a,ta.selectedDates[0])&&0>=f(a,ta.selectedDates[1])}(c)&&!oa(c)&&g.classList.add("inRange"),ta.weekNumbers&&1===ta.config.showMonths&&"prevMonthDay"!==b&&1==d%7&&ta.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+ta.config.getWeek(c)+"</span>"),ma("onDayCreate",g),g}function H(a){a.focus(),"range"===ta.config.mode&&ba(a)}function T(b){for(var d=0<b?0:ta.config.showMonths-1,e=0<b?ta.config.showMonths:-1,f=d;f!=e;f+=b){for(var g=ta.daysContainer.children[f],h=0<b?0:g.children.length-1,i=0<b?g.children.length:-1,j=h,k;j!=i;j+=b){k=g.children[j];if(-1===k.className.indexOf("hidden")&&Z(k.dateObj))return k}}}function L(b,c){var d=Q(document.activeElement||document.body),e=void 0!==b?b:d?document.activeElement:void 0!==ta.selectedDateElem&&Q(ta.selectedDateElem)?ta.selectedDateElem:void 0!==ta.todayDateElem&&Q(ta.todayDateElem)?ta.todayDateElem:T(0<c?1:-1);void 0===e?ta._input.focus():d?function(b,e){for(var f=-1===b.className.indexOf("Month")?b.dateObj.getMonth():ta.currentMonth,g=0<e?ta.config.showMonths:-1,a=0<e?1:-1,h=f-ta.currentMonth;h!=g;h+=a){for(var i=ta.daysContainer.children[h],j=f-ta.currentMonth==h?b.$i+e:0>e?i.children.length-1:0,k=i.children.length,c=j,l;0<=c&&c<k&&c!=(0<e?k:-1);c+=a){l=i.children[c];if(-1===l.className.indexOf("hidden")&&Z(l.dateObj)&&Math.abs(b.$i-c)>=Math.abs(e))return H(l)}}ta.changeMonth(a),L(T(a),0)}(e,c):H(e)}function W(b,e){for(var g=(new Date(b,e,1).getDay()-ta.l10n.firstDayOfWeek+7)%7,h=ta.utils.getDaysInMonth((e-1+12)%12,b),a=ta.utils.getDaysInMonth(e,b),i=window.document.createDocumentFragment(),j=1<ta.config.showMonths,k=j?"prevMonthDay hidden":"prevMonthDay",l=j?"nextMonthDay hidden":"nextMonthDay",c=h+1-g,n=0;c<=h;c++,n++){i.appendChild(S(k,new Date(b,e-1,c),c,n))}for(c=1;c<=a;c++,n++){i.appendChild(S("",new Date(b,e,c),c,n))}for(var o=a+1;o<=42-g&&(1===ta.config.showMonths||0!=n%7);o++,n++){i.appendChild(S(l,new Date(b,e+1,o%a),o,n))}var p=M("div","dayContainer");return p.appendChild(i),p}function R(){if(void 0!==ta.daysContainer){d(ta.daysContainer),ta.weekNumbers&&d(ta.weekNumbers);for(var a=document.createDocumentFragment(),b=0,c;b<ta.config.showMonths;b++){c=new Date(ta.currentYear,ta.currentMonth,1);c.setMonth(ta.currentMonth+b),a.appendChild(W(c.getFullYear(),c.getMonth()))}ta.daysContainer.appendChild(a),ta.days=ta.daysContainer.firstChild,"range"===ta.config.mode&&1===ta.selectedDates.length&&ba()}}function B(){if(!(1<ta.config.showMonths||"dropdown"!==ta.config.monthSelectorType)){var a=function(a){return!(void 0!==ta.config.minDate&&ta.currentYear===ta.config.minDate.getFullYear()&&a<ta.config.minDate.getMonth())&&!(void 0!==ta.config.maxDate&&ta.currentYear===ta.config.maxDate.getFullYear()&&a>ta.config.maxDate.getMonth())};ta.monthsDropdownContainer.tabIndex=-1,ta.monthsDropdownContainer.innerHTML="";for(var b=0;12>b;b++){if(a(b)){var c=M("option","flatpickr-monthDropdown-month");c.value=new Date(ta.currentYear,b).getMonth().toString(),c.textContent=g(b,ta.config.shorthandCurrentMonth,ta.l10n),c.tabIndex=-1,ta.currentMonth===b&&(c.selected=!0),ta.monthsDropdownContainer.appendChild(c)}}}}function J(){var b,c=M("div","flatpickr-month"),d=window.document.createDocumentFragment();1<ta.config.showMonths||"static"===ta.config.monthSelectorType?b=M("span","cur-month"):(ta.monthsDropdownContainer=M("select","flatpickr-monthDropdown-months"),ta.monthsDropdownContainer.setAttribute("aria-label",ta.l10n.monthAriaLabel),O(ta.monthsDropdownContainer,"change",function(a){var b=q(a),c=parseInt(b.value,10);ta.changeMonth(c-ta.currentMonth),ma("onMonthChange")}),B(),b=ta.monthsDropdownContainer);var f=l("cur-year",{tabindex:"-1"}),a=f.getElementsByTagName("input")[0];a.setAttribute("aria-label",ta.l10n.yearAriaLabel),ta.config.minDate&&a.setAttribute("min",ta.config.minDate.getFullYear().toString()),ta.config.maxDate&&(a.setAttribute("max",ta.config.maxDate.getFullYear().toString()),a.disabled=!!ta.config.minDate&&ta.config.minDate.getFullYear()===ta.config.maxDate.getFullYear());var g=M("div","flatpickr-current-month");return g.appendChild(b),g.appendChild(f),d.appendChild(g),c.appendChild(d),{container:c,yearElement:a,monthElement:b}}function K(){d(ta.monthNav),ta.monthNav.appendChild(ta.prevMonthNav),ta.config.showMonths&&(ta.yearElements=[],ta.monthElements=[]);for(var a=ta.config.showMonths,b;a--;){b=J();ta.yearElements.push(b.yearElement),ta.monthElements.push(b.monthElement),ta.monthNav.appendChild(b.container)}ta.monthNav.appendChild(ta.nextMonthNav)}function U(){ta.weekdayContainer?d(ta.weekdayContainer):ta.weekdayContainer=M("div","flatpickr-weekdays");for(var a=ta.config.showMonths,b;a--;){b=M("div","flatpickr-weekdaycontainer");ta.weekdayContainer.appendChild(b)}return Y(),ta.weekdayContainer}function Y(){if(ta.weekdayContainer){var b=ta.l10n.firstDayOfWeek,c=j(ta.l10n.weekdays.shorthand);0<b&&b<c.length&&(c=j(c.splice(b,c.length),c.splice(0,b)));for(var d=ta.config.showMonths;d--;){ta.weekdayContainer.children[d].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+c.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}}function $(a,b){void 0===b&&(b=!0);var c=b?a:a-ta.currentMonth;0>c&&!0===ta._hidePrevMonthArrow||0<c&&!0===ta._hideNextMonthArrow||(ta.currentMonth+=c,(0>ta.currentMonth||11<ta.currentMonth)&&(ta.currentYear+=11<ta.currentMonth?1:-1,ta.currentMonth=(ta.currentMonth+12)%12,ma("onYearChange"),B()),R(),ma("onMonthChange"),pa())}function z(a){return!(!ta.config.appendTo||!ta.config.appendTo.contains(a))||ta.calendarContainer.contains(a)}function G(b){if(ta.isOpen&&!ta.config.inline){var c=q(b),d=z(c),e=c===ta.input||c===ta.altInput||ta.element.contains(c)||b.path&&b.path.indexOf&&(~b.path.indexOf(ta.input)||~b.path.indexOf(ta.altInput)),a="blur"===b.type?e&&b.relatedTarget&&!z(b.relatedTarget):!e&&!d&&!z(b.relatedTarget),f=!ta.config.ignoredFocusElements.some(function(a){return a.contains(c)});a&&f&&(void 0!==ta.timeContainer&&void 0!==ta.minuteElement&&void 0!==ta.hourElement&&""!==ta.input.value&&void 0!==ta.input.value&&m(),ta.close(),ta.config&&"range"===ta.config.mode&&1===ta.selectedDates.length&&(ta.clear(!1),ta.redraw()))}}function V(a){if(!(!a||ta.config.minDate&&a<ta.config.minDate.getFullYear()||ta.config.maxDate&&a>ta.config.maxDate.getFullYear())){var b=a,c=ta.currentYear!==b;ta.currentYear=b||ta.currentYear,ta.config.maxDate&&ta.currentYear===ta.config.maxDate.getFullYear()?ta.currentMonth=Math.min(ta.config.maxDate.getMonth(),ta.currentMonth):ta.config.minDate&&ta.currentYear===ta.config.minDate.getFullYear()&&(ta.currentMonth=Math.max(ta.config.minDate.getMonth(),ta.currentMonth)),c&&(ta.redraw(),ma("onYearChange"),B())}}function Z(b,c){void 0===c&&(c=!0);var d=ta.parseDate(b,void 0,c);if(ta.config.minDate&&d&&0>f(d,ta.config.minDate,void 0!==c?c:!ta.minDateHasTime)||ta.config.maxDate&&d&&0<f(d,ta.config.maxDate,void 0!==c?c:!ta.maxDateHasTime))return!1;if(0===ta.config.enable.length&&0===ta.config.disable.length)return!0;if(void 0===d)return!1;for(var e=0<ta.config.enable.length,a=e?ta.config.enable:ta.config.disable,g=0,h=void 0;g<a.length;g++){if("function"==typeof(h=a[g])&&h(d))return e;if(h instanceof Date&&void 0!==d&&h.getTime()===d.getTime())return e;if("string"==typeof h&&void 0!==d){var i=ta.parseDate(h,void 0,!0);return i&&i.getTime()===d.getTime()?e:!e}if("object"==_typeof(h)&&void 0!==d&&h.from&&h.to&&d.getTime()>=h.from.getTime()&&d.getTime()<=h.to.getTime())return e}return!e}function Q(a){return void 0!==ta.daysContainer&&-1===a.className.indexOf("hidden")&&-1===a.className.indexOf("flatpickr-disabled")&&ta.daysContainer.contains(a)}function X(a){!(a.target===ta._input)||a.relatedTarget&&z(a.relatedTarget)||ta.setDate(ta._input.value,!0,a.target===ta.altInput?ta.config.altFormat:ta.config.dateFormat)}function _(b){var e=q(b),f=ta.config.wrap?v.contains(e):e===ta._input,g=ta.config.allowInput,a=ta.isOpen&&(!g||!f),h=ta.config.inline&&f&&!g;if(13===b.keyCode&&f){if(g)return ta.setDate(ta._input.value,!0,e===ta.altInput?ta.config.altFormat:ta.config.dateFormat),e.blur();ta.open()}else if(z(e)||a||h){var i=!!ta.timeContainer&&ta.timeContainer.contains(e);switch(b.keyCode){case 13:i?(b.preventDefault(),m(),ia()):ja(b);break;case 27:b.preventDefault(),ia();break;case 8:case 46:f&&!ta.config.allowInput&&(b.preventDefault(),ta.clear());break;case 37:case 39:if(i||f)ta.hourElement&&ta.hourElement.focus();else if(b.preventDefault(),void 0!==ta.daysContainer&&(!1===g||document.activeElement&&Q(document.activeElement))){var j=39===b.keyCode?1:-1;b.ctrlKey?(b.stopPropagation(),$(j),L(T(1),0)):L(void 0,j)}break;case 38:case 40:b.preventDefault();var k=40===b.keyCode?1:-1;ta.daysContainer&&void 0!==e.$i||e===ta.input||e===ta.altInput?b.ctrlKey?(b.stopPropagation(),V(ta.currentYear-k),L(T(1),0)):i||L(void 0,7*k):e===ta.currentYearElement?V(ta.currentYear-k):ta.config.enableTime&&(!i&&ta.hourElement&&ta.hourElement.focus(),m(b),ta._debouncedChange());break;case 9:if(i){var c=[ta.hourElement,ta.minuteElement,ta.secondElement,ta.amPM].concat(ta.pluginElements).filter(function(a){return a}),d=c.indexOf(e);if(-1!==d){var l=c[d+(b.shiftKey?-1:1)];b.preventDefault(),(l||ta._input).focus()}}else!ta.config.noCalendar&&ta.daysContainer&&ta.daysContainer.contains(e)&&b.shiftKey&&(b.preventDefault(),ta._input.focus());}}if(void 0!==ta.amPM&&e===ta.amPM)switch(b.key){case ta.l10n.amPM[0].charAt(0):case ta.l10n.amPM[0].charAt(0).toLowerCase():ta.amPM.textContent=ta.l10n.amPM[0],u(),ra();break;case ta.l10n.amPM[1].charAt(0):case ta.l10n.amPM[1].charAt(0).toLowerCase():ta.amPM.textContent=ta.l10n.amPM[1],u(),ra();}(f||z(e))&&ma("onKeyDown",b)}function ba(b){if(1===ta.selectedDates.length&&(!b||b.classList.contains("flatpickr-day")&&!b.classList.contains("flatpickr-disabled"))){for(var e=b?b.dateObj.getTime():ta.days.firstElementChild.dateObj.getTime(),h=ta.parseDate(ta.selectedDates[0],void 0,!0).getTime(),g=Math.min(e,ta.selectedDates[0].getTime()),a=Math.max(e,ta.selectedDates[0].getTime()),i=!1,j=0,k=0,n=g;n<a;n+=86400000){Z(new Date(n),!0)||(i=i||n>g&&n<a,n<h&&(!j||n>j)?j=n:n>h&&(!k||n<k)&&(k=n))}for(var p=0;p<ta.config.showMonths;p++){for(var q=ta.daysContainer.children[p],s=function(l){var a,n,o,p=q.children[l],f=p.dateObj.getTime(),m=0<j&&f<j||0<k&&f>k;return m?(p.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(a){p.classList.remove(a)}),"continue"):i&&!m?"continue":(["startRange","inRange","endRange","notAllowed"].forEach(function(a){p.classList.remove(a)}),void(void 0!==b&&(b.classList.add(e<=ta.selectedDates[0].getTime()?"startRange":"endRange"),h<e&&f===h?p.classList.add("startRange"):h>e&&f===h&&p.classList.add("endRange"),f>=j&&(0===k||f<=k)&&(n=h,o=e,(a=f)>Math.min(n,o)&&a<Math.max(n,o))&&p.classList.add("inRange"))))},t=0,u=q.children.length;t<u;t++){s(t)}}}}function ca(){!ta.isOpen||ta.config.static||ta.config.inline||ga()}function da(b){return function(c){var d=ta.config["_"+b+"Date"]=ta.parseDate(c,ta.config.dateFormat),e=ta.config["_"+("min"===b?"max":"min")+"Date"];void 0!==d&&(ta["min"===b?"minDateHasTime":"maxDateHasTime"]=0<d.getHours()||0<d.getMinutes()||0<d.getSeconds()),ta.selectedDates&&(ta.selectedDates=ta.selectedDates.filter(function(a){return Z(a)}),ta.selectedDates.length||"min"!==b||i(d),ra()),ta.daysContainer&&(ha(),void 0!==d?ta.currentYearElement[b]=d.getFullYear().toString():ta.currentYearElement.removeAttribute(b),ta.currentYearElement.disabled=!!e&&void 0!==d&&e.getFullYear()===d.getFullYear())}}function ea(){return ta.config.wrap?v.querySelector("[data-input]"):v}function fa(){"object"!=_typeof(ta.config.locale)&&void 0===b.l10ns[ta.config.locale]&&ta.config.errorHandler(new Error("flatpickr: invalid locale "+ta.config.locale)),ta.l10n=C(C({},b.l10ns.default),"object"==_typeof(ta.config.locale)?ta.config.locale:"default"!==ta.config.locale?b.l10ns[ta.config.locale]:void 0),t.K="("+ta.l10n.amPM[0]+"|"+ta.l10n.amPM[1]+"|"+ta.l10n.amPM[0].toLowerCase()+"|"+ta.l10n.amPM[1].toLowerCase()+")",void 0===C(C({},c),JSON.parse(JSON.stringify(v.dataset||{}))).time_24hr&&void 0===b.defaultConfig.time_24hr&&(ta.config.time_24hr=ta.l10n.time_24hr),ta.formatDate=p(ta),ta.parseDate=r({config:ta.config,l10n:ta.l10n})}function ga(d){if(void 0!==ta.calendarContainer){ma("onPreCalendarPosition");var e=d||ta._positionElement,j=Array.prototype.reduce.call(ta.calendarContainer.children,function(a,b){return a+b.offsetHeight},0),n=ta.calendarContainer.offsetWidth,a=ta.config.position.split(" "),i=a[0],o=1<a.length?a[1]:null,q=e.getBoundingClientRect(),l=window.innerHeight-q.bottom,c="above"===i||"below"!==i&&l<j&&q.top>j,r=window.pageYOffset+q.top+(c?-j-2:e.offsetHeight+2);if(k(ta.calendarContainer,"arrowTop",!c),k(ta.calendarContainer,"arrowBottom",c),!ta.config.inline){var s=window.pageXOffset+q.left,t=!1,u=!1;"center"===o?(s-=(n-q.width)/2,t=!0):"right"===o&&(s-=n-q.width,u=!0),k(ta.calendarContainer,"arrowLeft",!t&&!u),k(ta.calendarContainer,"arrowCenter",t),k(ta.calendarContainer,"arrowRight",u);var x=window.document.body.offsetWidth-(window.pageXOffset+q.right),p=s+n>window.document.body.offsetWidth,h=x+n>window.document.body.offsetWidth;if(k(ta.calendarContainer,"rightMost",p),!ta.config.static)if(ta.calendarContainer.style.top=r+"px",p){if(h){var v=function(){for(var b=null,c=0,d;c<document.styleSheets.length;c++){d=document.styleSheets[c];try{d.cssRules}catch(a){continue}b=d;break}return null!=b?b:(f=document.createElement("style"),document.head.appendChild(f),f.sheet);var f}();if(void 0===v)return;var w=window.document.body.offsetWidth,b=Math.max(0,w/2-n/2),z=v.cssRules.length,A="{left:"+q.left+"px;right:auto;}";k(ta.calendarContainer,"rightMost",!1),k(ta.calendarContainer,"centerMost",!0),v.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+A,z),ta.calendarContainer.style.left=b+"px",ta.calendarContainer.style.right="auto"}else ta.calendarContainer.style.left="auto",ta.calendarContainer.style.right=x+"px";}else ta.calendarContainer.style.left=s+"px",ta.calendarContainer.style.right="auto"}}}function ha(){ta.config.noCalendar||ta.isMobile||(B(),pa(),R())}function ia(){ta._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(ta.close,0):ta.close()}function ja(b){b.preventDefault(),b.stopPropagation();var d=function a(b,c){return c(b)?b:b.parentNode?a(b.parentNode,c):void 0}(q(b),function(a){return a.classList&&a.classList.contains("flatpickr-day")&&!a.classList.contains("flatpickr-disabled")&&!a.classList.contains("notAllowed")});if(void 0!==d){var e=d,g=ta.latestSelectedDateObj=new Date(e.dateObj.getTime()),a=(g.getMonth()<ta.currentMonth||g.getMonth()>ta.currentMonth+ta.config.showMonths-1)&&"range"!==ta.config.mode;if(ta.selectedDateElem=e,"single"===ta.config.mode)ta.selectedDates=[g];else if("multiple"===ta.config.mode){var h=oa(g);h?ta.selectedDates.splice(parseInt(h),1):ta.selectedDates.push(g)}else"range"===ta.config.mode&&(2===ta.selectedDates.length&&ta.clear(!1,!1),ta.latestSelectedDateObj=g,ta.selectedDates.push(g),0!==f(g,ta.selectedDates[0],!0)&&ta.selectedDates.sort(function(a,b){return a.getTime()-b.getTime()}));if(u(),a){var i=ta.currentYear!==g.getFullYear();ta.currentYear=g.getFullYear(),ta.currentMonth=g.getMonth(),i&&(ma("onYearChange"),B()),ma("onMonthChange")}if(pa(),R(),ra(),a||"range"===ta.config.mode||1!==ta.config.showMonths?void 0!==ta.selectedDateElem&&void 0===ta.hourElement&&ta.selectedDateElem&&ta.selectedDateElem.focus():H(e),void 0!==ta.hourElement&&void 0!==ta.hourElement&&ta.hourElement.focus(),ta.config.closeOnSelect){var j="single"===ta.config.mode&&!ta.config.enableTime,k="range"===ta.config.mode&&2===ta.selectedDates.length&&!ta.config.enableTime;(j||k)&&ia()}F()}}ta.parseDate=r({config:ta.config,l10n:ta.l10n}),ta._handlers=[],ta.pluginElements=[],ta.loadedPlugins=[],ta._bind=O,ta._setHoursFromDate=i,ta._positionCalendar=ga,ta.changeMonth=$,ta.changeYear=V,ta.clear=function(b,c){void 0===b&&(b=!0);void 0===c&&(c=!0);ta.input.value="",void 0!==ta.altInput&&(ta.altInput.value="");void 0!==ta.mobileInput&&(ta.mobileInput.value="");ta.selectedDates=[],ta.latestSelectedDateObj=void 0,!0===c&&(ta.currentYear=ta._initialDate.getFullYear(),ta.currentMonth=ta._initialDate.getMonth());if(!0===ta.config.enableTime){var d=w(),f=d.hours,a=d.minutes,g=d.seconds;E(f,a,g)}ta.redraw(),b&&ma("onChange")},ta.close=function(){ta.isOpen=!1,ta.isMobile||(void 0!==ta.calendarContainer&&ta.calendarContainer.classList.remove("open"),void 0!==ta._input&&ta._input.classList.remove("active"));ma("onClose")},ta._createElement=M,ta.destroy=function(){void 0!==ta.config&&ma("onDestroy");for(var a=ta._handlers.length,b;a--;){b=ta._handlers[a];b.element.removeEventListener(b.event,b.handler,b.options)}if(ta._handlers=[],ta.mobileInput)ta.mobileInput.parentNode&&ta.mobileInput.parentNode.removeChild(ta.mobileInput),ta.mobileInput=void 0;else if(ta.calendarContainer&&ta.calendarContainer.parentNode)if(ta.config.static&&ta.calendarContainer.parentNode){var c=ta.calendarContainer.parentNode;if(c.lastChild&&c.removeChild(c.lastChild),c.parentNode){for(;c.firstChild;){c.parentNode.insertBefore(c.firstChild,c)}c.parentNode.removeChild(c)}}else ta.calendarContainer.parentNode.removeChild(ta.calendarContainer);ta.altInput&&(ta.input.type="text",ta.altInput.parentNode&&ta.altInput.parentNode.removeChild(ta.altInput),delete ta.altInput);ta.input&&(ta.input.type=ta.input._type,ta.input.classList.remove("flatpickr-input"),ta.input.removeAttribute("readonly"));["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(a){try{delete ta[a]}catch(a){}})},ta.isEnabled=Z,ta.jumpToDate=N,ta.open=function(b,c){void 0===c&&(c=ta._positionElement);if(!0===ta.isMobile){if(b){b.preventDefault();var d=q(b);d&&d.blur()}return void 0!==ta.mobileInput&&(ta.mobileInput.focus(),ta.mobileInput.click()),void ma("onOpen")}if(ta._input.disabled||ta.config.inline)return;var e=ta.isOpen;ta.isOpen=!0,e||(ta.calendarContainer.classList.add("open"),ta._input.classList.add("active"),ma("onOpen"),ga(c));!0===ta.config.enableTime&&!0===ta.config.noCalendar&&(!1!==ta.config.allowInput||void 0!==b&&ta.timeContainer.contains(b.relatedTarget)||setTimeout(function(){return ta.hourElement.select()},50))},ta.redraw=ha,ta.set=function(b,c){if(null!==b&&"object"==_typeof(b))for(var d in Object.assign(ta.config,b),b){void 0!==D[d]&&D[d].forEach(function(a){return a()})}else ta.config[b]=c,void 0!==D[b]?D[b].forEach(function(a){return a()}):-1<x.indexOf(b)&&(ta.config[b]=o(c));ta.redraw(),ra(!0)},ta.setDate=function(a,b,c){void 0===b&&(b=!1);void 0===c&&(c=ta.config.dateFormat);if(0!==a&&!a||a instanceof Array&&0===a.length)return ta.clear(b);ka(a,c),ta.latestSelectedDateObj=ta.selectedDates[ta.selectedDates.length-1],ta.redraw(),N(void 0,b),i(),0===ta.selectedDates.length&&ta.clear(!1);ra(b),b&&ma("onChange")},ta.toggle=function(a){if(!0===ta.isOpen)return ta.close();ta.open(a)};var D={locale:[fa,Y],showMonths:[K,e,U],minDate:[N],maxDate:[N]};function ka(a,b){var c=[];if(a instanceof Array)c=a.map(function(a){return ta.parseDate(a,b)});else if(a instanceof Date||"number"==typeof a)c=[ta.parseDate(a,b)];else if("string"==typeof a)switch(ta.config.mode){case"single":case"time":c=[ta.parseDate(a,b)];break;case"multiple":c=a.split(ta.config.conjunction).map(function(a){return ta.parseDate(a,b)});break;case"range":c=a.split(ta.l10n.rangeSeparator).map(function(a){return ta.parseDate(a,b)});}else ta.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(a)));ta.selectedDates=ta.config.allowInvalidPreload?c:c.filter(function(a){return a instanceof Date&&Z(a,!1)}),"range"===ta.config.mode&&ta.selectedDates.sort(function(a,b){return a.getTime()-b.getTime()})}function la(a){return a.slice().map(function(a){return"string"==typeof a||"number"==typeof a||a instanceof Date?ta.parseDate(a,void 0,!0):a&&"object"==_typeof(a)&&a.from&&a.to?{from:ta.parseDate(a.from,void 0),to:ta.parseDate(a.to,void 0)}:a}).filter(function(a){return a})}function ma(b,c){if(void 0!==ta.config){var d=ta.config[b];if(void 0!==d&&0<d.length)for(var e=0;d[e]&&e<d.length;e++){d[e](ta.selectedDates,ta.input.value,ta,c)}"onChange"===b&&(ta.input.dispatchEvent(na("change")),ta.input.dispatchEvent(na("input")))}}function na(a){var b=document.createEvent("Event");return b.initEvent(a,!0,!0),b}function oa(a){for(var b=0;b<ta.selectedDates.length;b++){if(0===f(ta.selectedDates[b],a))return""+b}return!1}function pa(){ta.config.noCalendar||ta.isMobile||!ta.monthNav||(ta.yearElements.forEach(function(a,b){var c=new Date(ta.currentYear,ta.currentMonth,1);c.setMonth(ta.currentMonth+b),1<ta.config.showMonths||"static"===ta.config.monthSelectorType?ta.monthElements[b].textContent=g(c.getMonth(),ta.config.shorthandCurrentMonth,ta.l10n)+" ":ta.monthsDropdownContainer.value=c.getMonth().toString(),a.value=c.getFullYear().toString()}),ta._hidePrevMonthArrow=void 0!==ta.config.minDate&&(ta.currentYear===ta.config.minDate.getFullYear()?ta.currentMonth<=ta.config.minDate.getMonth():ta.currentYear<ta.config.minDate.getFullYear()),ta._hideNextMonthArrow=void 0!==ta.config.maxDate&&(ta.currentYear===ta.config.maxDate.getFullYear()?ta.currentMonth+1>ta.config.maxDate.getMonth():ta.currentYear>ta.config.maxDate.getFullYear()))}function qa(a){return ta.selectedDates.map(function(b){return ta.formatDate(b,a)}).filter(function(a,b,c){return"range"!==ta.config.mode||ta.config.enableTime||c.indexOf(a)===b}).join("range"!==ta.config.mode?ta.config.conjunction:ta.l10n.rangeSeparator)}function ra(a){void 0===a&&(a=!0),void 0!==ta.mobileInput&&ta.mobileFormatStr&&(ta.mobileInput.value=void 0!==ta.latestSelectedDateObj?ta.formatDate(ta.latestSelectedDateObj,ta.mobileFormatStr):""),ta.input.value=qa(ta.config.dateFormat),void 0!==ta.altInput&&(ta.altInput.value=qa(ta.config.altFormat)),!1!==a&&ma("onValueUpdate")}function sa(b){var c=q(b),d=ta.prevMonthNav.contains(c),e=ta.nextMonthNav.contains(c);d||e?$(d?-1:1):0<=ta.yearElements.indexOf(c)?c.select():c.classList.contains("arrowUp")?ta.changeYear(ta.currentYear+1):c.classList.contains("arrowDown")&&ta.changeYear(ta.currentYear-1)}return function(){ta.element=ta.input=v,ta.isOpen=!1,function(){var a=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],e=C(C({},JSON.parse(JSON.stringify(v.dataset||{}))),c),g={};ta.config.parseDate=e.parseDate,ta.config.formatDate=e.formatDate,Object.defineProperty(ta.config,"enable",{get:function get(){return ta.config._enable},set:function set(a){ta.config._enable=la(a)}}),Object.defineProperty(ta.config,"disable",{get:function get(){return ta.config._disable},set:function set(a){ta.config._disable=la(a)}});var i="time"===e.mode;if(!e.dateFormat&&(e.enableTime||i)){var j=b.defaultConfig.dateFormat||aa.dateFormat;g.dateFormat=e.noCalendar||i?"H:i"+(e.enableSeconds?":S":""):j+" H:i"+(e.enableSeconds?":S":"")}if(e.altInput&&(e.enableTime||i)&&!e.altFormat){var k=b.defaultConfig.altFormat||aa.altFormat;g.altFormat=e.noCalendar||i?"h:i"+(e.enableSeconds?":S K":" K"):k+" h:i"+(e.enableSeconds?":S":"")+" K"}Object.defineProperty(ta.config,"minDate",{get:function get(){return ta.config._minDate},set:da("min")}),Object.defineProperty(ta.config,"maxDate",{get:function get(){return ta.config._maxDate},set:da("max")});var d=function(a){return function(b){ta.config["min"===a?"_minTime":"_maxTime"]=ta.parseDate(b,"H:i:S")}};Object.defineProperty(ta.config,"minTime",{get:function get(){return ta.config._minTime},set:d("min")}),Object.defineProperty(ta.config,"maxTime",{get:function get(){return ta.config._maxTime},set:d("max")}),"time"===e.mode&&(ta.config.noCalendar=!0,ta.config.enableTime=!0);Object.assign(ta.config,g,e);for(var l=0;l<a.length;l++){ta.config[a[l]]=!0===ta.config[a[l]]||"true"===ta.config[a[l]]}x.filter(function(a){return void 0!==ta.config[a]}).forEach(function(a){ta.config[a]=o(ta.config[a]||[]).map(h)}),ta.isMobile=!ta.config.disableMobile&&!ta.config.inline&&"single"===ta.config.mode&&!ta.config.disable.length&&!ta.config.enable.length&&!ta.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(l=0;l<ta.config.plugins.length;l++){var n=ta.config.plugins[l](ta)||{};for(var f in n){-1<x.indexOf(f)?ta.config[f]=o(n[f]).map(h).concat(ta.config[f]):void 0===e[f]&&(ta.config[f]=n[f])}}e.altInputClass||(ta.config.altInputClass=ea().className+" "+ta.config.altInputClass);ma("onParseConfig")}(),fa(),function(){if(ta.input=ea(),!ta.input)return void ta.config.errorHandler(new Error("Invalid input element specified"));ta.input._type=ta.input.type,ta.input.type="text",ta.input.classList.add("flatpickr-input"),ta._input=ta.input,ta.config.altInput&&(ta.altInput=M(ta.input.nodeName,ta.config.altInputClass),ta._input=ta.altInput,ta.altInput.placeholder=ta.input.placeholder,ta.altInput.disabled=ta.input.disabled,ta.altInput.required=ta.input.required,ta.altInput.tabIndex=ta.input.tabIndex,ta.altInput.type="text",ta.input.setAttribute("type","hidden"),!ta.config.static&&ta.input.parentNode&&ta.input.parentNode.insertBefore(ta.altInput,ta.input.nextSibling));ta.config.allowInput||ta._input.setAttribute("readonly","readonly");ta._positionElement=ta.config.positionElement||ta._input}(),function(){ta.selectedDates=[],ta.now=ta.parseDate(ta.config.now)||new Date;var a=ta.config.defaultDate||("INPUT"!==ta.input.nodeName&&"TEXTAREA"!==ta.input.nodeName||!ta.input.placeholder||ta.input.value!==ta.input.placeholder?ta.input.value:null);a&&ka(a,ta.config.dateFormat);ta._initialDate=0<ta.selectedDates.length?ta.selectedDates[0]:ta.config.minDate&&ta.config.minDate.getTime()>ta.now.getTime()?ta.config.minDate:ta.config.maxDate&&ta.config.maxDate.getTime()<ta.now.getTime()?ta.config.maxDate:ta.now,ta.currentYear=ta._initialDate.getFullYear(),ta.currentMonth=ta._initialDate.getMonth(),0<ta.selectedDates.length&&(ta.latestSelectedDateObj=ta.selectedDates[0]);void 0!==ta.config.minTime&&(ta.config.minTime=ta.parseDate(ta.config.minTime,"H:i"));void 0!==ta.config.maxTime&&(ta.config.maxTime=ta.parseDate(ta.config.maxTime,"H:i"));ta.minDateHasTime=!!ta.config.minDate&&(0<ta.config.minDate.getHours()||0<ta.config.minDate.getMinutes()||0<ta.config.minDate.getSeconds()),ta.maxDateHasTime=!!ta.config.maxDate&&(0<ta.config.maxDate.getHours()||0<ta.config.maxDate.getMinutes()||0<ta.config.maxDate.getSeconds())}(),ta.utils={getDaysInMonth:function getDaysInMonth(a,b){return void 0===a&&(a=ta.currentMonth),void 0===b&&(b=ta.currentYear),1===a&&(0==b%4&&0!=b%100||0==b%400)?29:ta.l10n.daysInMonth[a]}},ta.isMobile||function(){var b=window.document.createDocumentFragment();if(ta.calendarContainer=M("div","flatpickr-calendar"),ta.calendarContainer.tabIndex=-1,!ta.config.noCalendar){if(b.appendChild((ta.monthNav=M("div","flatpickr-months"),ta.yearElements=[],ta.monthElements=[],ta.prevMonthNav=M("span","flatpickr-prev-month"),ta.prevMonthNav.innerHTML=ta.config.prevArrow,ta.nextMonthNav=M("span","flatpickr-next-month"),ta.nextMonthNav.innerHTML=ta.config.nextArrow,K(),Object.defineProperty(ta,"_hidePrevMonthArrow",{get:function get(){return ta.__hidePrevMonthArrow},set:function set(a){ta.__hidePrevMonthArrow!==a&&(k(ta.prevMonthNav,"flatpickr-disabled",a),ta.__hidePrevMonthArrow=a)}}),Object.defineProperty(ta,"_hideNextMonthArrow",{get:function get(){return ta.__hideNextMonthArrow},set:function set(a){ta.__hideNextMonthArrow!==a&&(k(ta.nextMonthNav,"flatpickr-disabled",a),ta.__hideNextMonthArrow=a)}}),ta.currentYearElement=ta.yearElements[0],pa(),ta.monthNav)),ta.innerContainer=M("div","flatpickr-innerContainer"),ta.config.weekNumbers){var c=function(){ta.calendarContainer.classList.add("hasWeeks");var a=M("div","flatpickr-weekwrapper");a.appendChild(M("span","flatpickr-weekday",ta.l10n.weekAbbreviation));var b=M("div","flatpickr-weeks");return a.appendChild(b),{weekWrapper:a,weekNumbers:b}}(),d=c.weekWrapper,e=c.weekNumbers;ta.innerContainer.appendChild(d),ta.weekNumbers=e,ta.weekWrapper=d}ta.rContainer=M("div","flatpickr-rContainer"),ta.rContainer.appendChild(U()),ta.daysContainer||(ta.daysContainer=M("div","flatpickr-days"),ta.daysContainer.tabIndex=-1),R(),ta.rContainer.appendChild(ta.daysContainer),ta.innerContainer.appendChild(ta.rContainer),b.appendChild(ta.innerContainer)}ta.config.enableTime&&b.appendChild(function(){ta.calendarContainer.classList.add("hasTime"),ta.config.noCalendar&&ta.calendarContainer.classList.add("noCalendar");ta.timeContainer=M("div","flatpickr-time"),ta.timeContainer.tabIndex=-1;var b=M("span","flatpickr-time-separator",":"),c=l("flatpickr-hour",{"aria-label":ta.l10n.hourAriaLabel});ta.hourElement=c.getElementsByTagName("input")[0];var d=l("flatpickr-minute",{"aria-label":ta.l10n.minuteAriaLabel});ta.minuteElement=d.getElementsByTagName("input")[0],ta.hourElement.tabIndex=ta.minuteElement.tabIndex=-1,ta.hourElement.value=s(ta.latestSelectedDateObj?ta.latestSelectedDateObj.getHours():ta.config.time_24hr?ta.config.defaultHour:function(a){switch(a%24){case 0:case 12:return 12;default:return a%12;}}(ta.config.defaultHour)),ta.minuteElement.value=s(ta.latestSelectedDateObj?ta.latestSelectedDateObj.getMinutes():ta.config.defaultMinute),ta.hourElement.setAttribute("step",ta.config.hourIncrement.toString()),ta.minuteElement.setAttribute("step",ta.config.minuteIncrement.toString()),ta.hourElement.setAttribute("min",ta.config.time_24hr?"0":"1"),ta.hourElement.setAttribute("max",ta.config.time_24hr?"23":"12"),ta.minuteElement.setAttribute("min","0"),ta.minuteElement.setAttribute("max","59"),ta.timeContainer.appendChild(c),ta.timeContainer.appendChild(b),ta.timeContainer.appendChild(d),ta.config.time_24hr&&ta.timeContainer.classList.add("time24hr");if(ta.config.enableSeconds){ta.timeContainer.classList.add("hasSeconds");var e=l("flatpickr-second");ta.secondElement=e.getElementsByTagName("input")[0],ta.secondElement.value=s(ta.latestSelectedDateObj?ta.latestSelectedDateObj.getSeconds():ta.config.defaultSeconds),ta.secondElement.setAttribute("step",ta.minuteElement.getAttribute("step")),ta.secondElement.setAttribute("min","0"),ta.secondElement.setAttribute("max","59"),ta.timeContainer.appendChild(M("span","flatpickr-time-separator",":")),ta.timeContainer.appendChild(e)}ta.config.time_24hr||(ta.amPM=M("span","flatpickr-am-pm",ta.l10n.amPM[y(11<(ta.latestSelectedDateObj?ta.hourElement.value:ta.config.defaultHour))]),ta.amPM.title=ta.l10n.toggleTitle,ta.amPM.tabIndex=-1,ta.timeContainer.appendChild(ta.amPM));return ta.timeContainer}());k(ta.calendarContainer,"rangeMode","range"===ta.config.mode),k(ta.calendarContainer,"animate",!0===ta.config.animate),k(ta.calendarContainer,"multiMonth",1<ta.config.showMonths),ta.calendarContainer.appendChild(b);var a=void 0!==ta.config.appendTo&&void 0!==ta.config.appendTo.nodeType;if((ta.config.inline||ta.config.static)&&(ta.calendarContainer.classList.add(ta.config.inline?"inline":"static"),ta.config.inline&&(!a&&ta.element.parentNode?ta.element.parentNode.insertBefore(ta.calendarContainer,ta._input.nextSibling):void 0!==ta.config.appendTo&&ta.config.appendTo.appendChild(ta.calendarContainer)),ta.config.static)){var f=M("div","flatpickr-wrapper");ta.element.parentNode&&ta.element.parentNode.insertBefore(f,ta.element),f.appendChild(ta.element),ta.altInput&&f.appendChild(ta.altInput),f.appendChild(ta.calendarContainer)}ta.config.static||ta.config.inline||(void 0!==ta.config.appendTo?ta.config.appendTo:window.document.body).appendChild(ta.calendarContainer)}(),function(){ta.config.wrap&&["open","close","toggle","clear"].forEach(function(a){Array.prototype.forEach.call(ta.element.querySelectorAll("[data-"+a+"]"),function(b){return O(b,"click",ta[a])})});if(ta.isMobile)return void function(){var a=ta.config.enableTime?ta.config.noCalendar?"time":"datetime-local":"date";ta.mobileInput=M("input",ta.input.className+" flatpickr-mobile"),ta.mobileInput.tabIndex=1,ta.mobileInput.type=a,ta.mobileInput.disabled=ta.input.disabled,ta.mobileInput.required=ta.input.required,ta.mobileInput.placeholder=ta.input.placeholder,ta.mobileFormatStr="datetime-local"==a?"Y-m-d\\TH:i:S":"date"===a?"Y-m-d":"H:i:S",0<ta.selectedDates.length&&(ta.mobileInput.defaultValue=ta.mobileInput.value=ta.formatDate(ta.selectedDates[0],ta.mobileFormatStr));ta.config.minDate&&(ta.mobileInput.min=ta.formatDate(ta.config.minDate,"Y-m-d"));ta.config.maxDate&&(ta.mobileInput.max=ta.formatDate(ta.config.maxDate,"Y-m-d"));ta.input.getAttribute("step")&&(ta.mobileInput.step=ta.input.getAttribute("step")+"");ta.input.type="hidden",void 0!==ta.altInput&&(ta.altInput.type="hidden");try{ta.input.parentNode&&ta.input.parentNode.insertBefore(ta.mobileInput,ta.input.nextSibling)}catch(a){}O(ta.mobileInput,"change",function(a){ta.setDate(q(a).value,!1,ta.mobileFormatStr),ma("onChange"),ma("onClose")})}();var a=n(ca,50);ta._debouncedChange=n(F,300),ta.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&O(ta.daysContainer,"mouseover",function(a){"range"===ta.config.mode&&ba(q(a))});O(window.document.body,"keydown",_),ta.config.inline||ta.config.static||O(window,"resize",a);void 0!==window.ontouchstart?O(window.document,"touchstart",G):O(window.document,"click",G);O(window.document,"focus",G,{capture:!0}),!0===ta.config.clickOpens&&(O(ta._input,"focus",ta.open),O(ta._input,"click",ta.open));void 0!==ta.daysContainer&&(O(ta.monthNav,"click",sa),O(ta.monthNav,["keyup","increment"],I),O(ta.daysContainer,"click",ja));if(void 0!==ta.timeContainer&&void 0!==ta.minuteElement&&void 0!==ta.hourElement){O(ta.timeContainer,["increment"],m),O(ta.timeContainer,"blur",m,{capture:!0}),O(ta.timeContainer,"click",A),O([ta.hourElement,ta.minuteElement],["focus","click"],function(a){return q(a).select()}),void 0!==ta.secondElement&&O(ta.secondElement,"focus",function(){return ta.secondElement&&ta.secondElement.select()}),void 0!==ta.amPM&&O(ta.amPM,"click",function(a){m(a),F()})}ta.config.allowInput&&O(ta._input,"blur",X)}(),(ta.selectedDates.length||ta.config.noCalendar)&&(ta.config.enableTime&&i(ta.config.noCalendar?ta.latestSelectedDateObj||ta.config.minDate:void 0),ra(!1)),e();var a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!ta.isMobile&&a&&ga(),ma("onReady")}(),ta}function m(b,c){for(var d=Array.prototype.slice.call(b).filter(function(a){return a instanceof HTMLElement}),f=[],a=0,g;a<d.length;a++){g=d[a];try{if(null!==g.getAttribute("data-fp-omit"))continue;void 0!==g._flatpickr&&(g._flatpickr.destroy(),g._flatpickr=void 0),g._flatpickr=e(g,c||{}),f.push(g._flatpickr)}catch(a){console.error(a)}}return 1===f.length?f[0]:f}"undefined"!=typeof HTMLElement&&"undefined"!=typeof HTMLCollection&&"undefined"!=typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(a){return m(this,a)},HTMLElement.prototype.flatpickr=function(a){return m([this],a)});var b=function(a,b){return"string"==typeof a?m(window.document.querySelectorAll(a),b):a instanceof Node?m([a],b):m(a,b)};return b.defaultConfig={},b.l10ns={en:C({},a),default:C({},a)},b.localize=function(a){b.l10ns.default=C(C({},b.l10ns.default),a)},b.setDefaults=function(a){b.defaultConfig=C(C({},b.defaultConfig),a)},b.parseDate=r({}),b.formatDate=p({}),b.compareDates=f,"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.flatpickr=function(a){return m(this,a)}),Date.prototype.fp_incr=function(a){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof a?parseInt(a,10):a))},"undefined"!=typeof window&&(window.flatpickr=b),b});
define ("local_intellicart/assignusers",["jquery","core/ajax","core/notification"],function(a,b){return{list:function list(a){var c,c=b.call([{methodname:"local_intellicart_get_assignable_users",args:a}])[0];return c},processResults:function processResults(b,c){var d=[];data=JSON.parse(c.resp)[0];a.each(data,function(a,b){d.push({value:b.id,label:b.name})});return d},transport:function transport(b,c,d){var e=a(".shopping-cart-formbox .mform input[name=\"id\"]").val(),f=a(".shopping-cart-formbox .mform input[name=\"itemtype\"]").val(),g=a(".shopping-cart-formbox .mform input[name=\"role\"]").val();this.list({query:c,instanceid:e,type:f,role:g}).then(d)}}});
define ("local_intellicart/intellicart_bulkactions",["jquery","core/str","core/notification"],function(a,b,c){var d={FORM:".intellicart-bulk-actions-form",CHECKALL:".ic-check-all",CHECKBOXES:".ic-bulkaction-checkbox",CHECKBOXESCHECKED:".ic-bulkaction-checkbox:checked",BULKACTIONS:".ic-bulk-actions",init:function init(){a(d.CHECKALL).on("click",function(){var b=a(this).closest(d.FORM),c=b.find(d.CHECKALL).prop("checked");b.find(d.CHECKBOXES).each(function(){a(this).prop("checked",c)});b.find(d.BULKACTIONS).prop("disabled",!c)});a(d.CHECKBOXES).on("click",function(){var b=a(this).closest(d.FORM),c=b.find(d.CHECKBOXESCHECKED).length;if(0<c){c=!0}else{c=!1}b.find(d.BULKACTIONS).prop("disabled",!c);b.find(d.CHECKALL).prop("checked",c)});a(d.BULKACTIONS).on("change",function(){var e=a(this).val();if("aria-label"==e){return!1}var f=a(this).find("option:selected").text(),g=a(this).closest(d.FORM);g.find(".bulkaction").val(e);b.get_strings([{key:"confirm",component:"local_intellicart"},{key:"bulkactionmsg",component:"local_intellicart",param:f},{key:"yes"},{key:"no"}]).done(function(a){c.confirm(a[0],a[1],a[2],a[3],function(){g.submit()})}).fail(c.exception)})}};return d});
define ("local_intellicart/modal_form",["jquery","core/modal_factory","core/modal_events","core/ajax","core/notification","core/yui","core/event","core/str","local_intellicart/helper"],function(a,b,c,d,e,f,g,h,i){var j=function(a){this.config=a;this.config.modalConfig=this.config.modalConfig||{};this.config.modalConfig.type=this.config.modalConfig.type||b.types.SAVE_CANCEL;this.config.args=this.config.args||{};this.init()};j.prototype.config={};j.prototype.modal=null;j.prototype.init=function(){var d=this;h.get_strings([{key:"collapseall",component:"moodle"},{key:"expandall",component:"moodle"}]).then(function(){return b.create(this.config.modalConfig,this.config.triggerElement)}.bind(this)).then(function(b){this.modal=b;this.modal.setBody(this.getBody(a.param(this.config.args)));this.modal.setLarge();this.modal.getRoot().on(c.hidden,function(){this.modal.destroy();this.resetDirtyFormState()}.bind(this));this.modal.getModal().addClass("local-intellicart-modal-form-dialogue");this.modal.getRoot().on("click","form input[type=submit][data-no-submit]",this.noSubmitButtonPressed.bind(this));this.modal.getRoot().on("submit","form",this.submitFormAjax.bind(this));if("undefined"!=typeof this.config.saveButtonText&&"undefined"!=typeof this.modal.setSaveButtonText){this.modal.setSaveButtonText(this.config.saveButtonText)}this.onInit();this.modal.show();return this.modal}.bind(this)).fail(e.exception)};j.prototype.onInit=function(){this.modal.getRoot().on(c.save,this.submitForm.bind(this))};j.prototype.getBody=function(b){var c=a.Deferred(),e={formdata:b,form:this.config.formClass};d.call([{methodname:"local_intellicart_modal_form",args:e}])[0].then(function(a){console.log(j);c.resolve(a.html,i.processCollectedJavascript(a.javascript));return null}).fail(function(a){c.reject(a)});return c.promise()};j.prototype.onSubmitSuccess=function(a){return a};j.prototype.onValidationError=function(){};j.prototype.onSubmitError=function(a){e.exception(a)};j.prototype.resetDirtyFormState=function(){f.use("moodle-core-formchangechecker",function(){M.core_formchangechecker.reset_form_dirty_state()})};j.prototype.noSubmitButtonPressed=function(b){b.preventDefault();var c=this.modal.getRoot().find("form").serialize(),d=a(b.currentTarget);c=c+"&"+encodeURIComponent(d.attr("name"))+"="+encodeURIComponent(d.attr("value"));this.modal.setBody(this.getBody(c))};j.prototype.validateElements=function(){var b=a.merge(this.modal.getRoot().find("[aria-invalid=\"true\"]"),this.modal.getRoot().find(".error"));if(b.length){b.first().focus();return!1}return!0};j.prototype.disableButtons=function(){this.modal.getFooter().find("[data-action]").attr("disabled",!0)};j.prototype.enableButtons=function(){this.modal.getFooter().find("[data-action]").removeAttr("disabled")};j.prototype.submitFormAjax=function(b){b.preventDefault();if(!this.validateElements()){return}this.disableButtons();var c=this.modal.getRoot().find("form").serialize();d.call([{methodname:"local_intellicart_modal_form",args:{formdata:c,form:this.config.formClass}}])[0].then(function(b){if(!b.submitted){var c=a.Deferred();console.log(b.javascript);c.resolve(b.html,i.processCollectedJavascript(b.javascript));this.modal.setBody(c.promise());this.enableButtons();this.onValidationError()}else{var d=JSON.parse(b.data);this.modal.hide();this.onSubmitSuccess(d)}return null}.bind(this)).fail(this.onSubmitError.bind(this))};j.prototype.submitForm=function(a){a.preventDefault();this.modal.getRoot().find("form").submit()};return j});
define ("local_intellicart/intellicart_certification_templates",["jquery","jqueryui","local_intellicart/modal_form","core/notification","core/str","core/ajax"],function(a,b,c,d,f,g){var h=function(b){b.preventDefault();f.get_strings([{key:"confirm"},{key:"cerdeleteelementconfirm",component:"local_intellicart",param:a(b.currentTarget).attr("data-name")},{key:"delete"},{key:"cancel"}]).done(function(c){d.confirm(c[0],c[1],c[2],c[3],function(){var c=g.call([{methodname:"local_intellicart_certificate_delete_element",args:{id:a(b.currentTarget).attr("data-id")}}]);c[0].done(function(){window.location.reload()}).fail(d.exception)})}).fail(d.exception)},i=function(b){b.preventDefault();if(a(b.currentTarget).hasClass("isdragged")){return}var d=new c({formClass:"\\local_intellicart\\components\\certifications\\forms\\certificateelement_form",args:{id:a(b.currentTarget).attr("data-id")},modalConfig:{title:f.get_string("certeditelement","local_intellicart",a(b.currentTarget).attr("data-name"))},saveButtonText:f.get_string("save"),triggerElement:a(b.currentTarget)});d.onSubmitSuccess=function(){window.location.reload()}},j=function(b){b.preventDefault();var d=a(b.currentTarget).attr("data-pageid"),e=a(b.currentTarget).attr("data-element"),g=new c({formClass:"\\local_intellicart\\components\\certifications\\forms\\certificateelement_form",args:{pageid:d,element:e},modalConfig:{title:f.get_string("certaddelement","local_intellicart")},saveButtonText:f.get_string("save"),triggerElement:a(b.currentTarget)});g.onSubmitSuccess=function(){window.location.reload()}},k=function(b){b.preventDefault();f.get_strings([{key:"confirm",component:"moodle"},{key:"deletepageconfirm",component:"local_intellicart"},{key:"delete",component:"moodle"},{key:"cancel",component:"moodle"}]).done(function(c){d.confirm(c[0],c[1],c[2],c[3],function(){window.location.href=a(b.currentTarget).attr("href")})}).fail(d.exception)},l=function(b){b.preventDefault();var d=new c({formClass:"\\local_intellicart\\components\\certifications\\forms\\certificatepage_form",args:{templateid:a("[data-region=\"template\"][data-id]").attr("data-id")},modalConfig:{title:f.get_string("certaddpage","local_intellicart")},saveButtonText:f.get_string("save"),triggerElement:a(b.currentTarget)});d.onSubmitSuccess=function(){window.location.reload()}},m=function(b){b.preventDefault();var d=new c({formClass:"\\local_intellicart\\components\\certifications\\forms\\certificatepage_form",args:{id:a(b.currentTarget).attr("data-id")},modalConfig:{title:f.get_string("certeditpage","local_intellicart",a(b.currentTarget).attr("data-pagenumber"))},saveButtonText:f.get_string("save"),triggerElement:a(b.currentTarget)});d.onSubmitSuccess=function(){window.location.reload()}},n=function(a){return 2*parseFloat(a)},o=function(a){return Math.round(parseFloat(a)/2)},p=function(a){return .352778*n(a)},q=function(){var b=a(this);b.css("width",n(b.data("pagewidth"))+"px");b.css("height",n(b.data("pageheight"))+"px");b.find("[data-width]").each(function(){a(this).css("width",n(a(this).data("width"))+"px")});b.find("[data-height]").each(function(){a(this).css("height",n(a(this).data("height"))+"px")});b.find("[data-fontsize]").each(function(){a(this).css("font-size",p(a(this).data("fontsize"))+"px")});b.find("[data-posy]").each(function(){a(this).css("top",n(a(this).data("posy"))+"px")});b.find("[data-posx]").each(function(){var b=n(a(this).data("posx")),c=a(this).data("refpoint")?parseInt(a(this).data("refpoint")):0,d=c?parseInt(a(this).width())*c/2:0;a(this).css("left",b-d+"px")});b.addClass("recalculated");b.find("[data-drag-type=\"move\"]").draggable()},r=function(){a("body").on("mousedown","[data-region=\"pdf\"] [data-drag-type=\"move\"]",function(b){var c=a(b.currentTarget),d=c.closest("[data-region=\"pdf\"]");d.find("[data-region=\"pagecenter\"]").css("left",n(d.data("pagecentre"))-c.width()/2+"px").css("width",c.width()+"px");c.draggable({snap:b.shiftKey?!1:".snapdraggable",snapMode:"inner",snapTolerance:10,containment:[d.offset().left-c.width(),d.offset().top-c.height(),d.offset().left+n(d.data("pagewidth")),d.offset().top+n(d.data("pageheight"))]})}).on("dragstart","[data-region=\"pdf\"] [data-drag-type=\"move\"]",function(b){a(b.currentTarget).addClass("isdragged")}).on("dragstop","[data-region=\"pdf\"] [data-drag-type=\"move\"]",function(b){var c=a(b.currentTarget),e=c.closest("[data-region=\"pdf\"]"),f=parseInt(a(this).data("refpoint")),h=f?parseInt(a(this).width())*f/2:0,i=o(c.offset().left-e.offset().left+h),j=o(c.offset().top-e.offset().top);setTimeout(function(){c.removeClass("isdragged")},100);var k={methodname:"local_intellicart_certificate_update_element",args:{id:c.data("id"),posx:i,posy:j}};g.call([k])[0].fail(d.exception)})};return{init:function init(){a("[data-action=\"deleteelement\"]").on("click",h);a("[data-action=\"editelement\"]").on("click",i);a("[data-action=\"addelement\"]").on("click",j);a("[data-action=\"deletepage\"]").on("click",k);a("[data-tabs-element=\"addbutton\"]").on("click",l);a("[data-action=\"editpage\"]").on("click",m);r();a("[data-region=\"pdf\"]").each(q)}}});
define ("local_intellicart/intellicart_reviews",["jquery","core/ajax","core/str","core/config","core/log"],function(a,b,c,d,e){var f={loader:"<i class=\"loader fa fa-circle-o-notch fa-spin\"></i>",selector:"body",instanceid:0,type:"",reviewscontainer:".reviews-posts",reviewitem:".review-post-item",reviewpostform:".reviews-post-form",commentscontainer:".review-comments",commentitem:".comments-post-item",init:function init(b,c,d){f.selector=d;f.instanceid=b;f.type=c;reviewscontainer=a(f.reviewscontainer);a(d).on("click",".review-send-btn",function(){f.save(this)});a(d).on("click",".review-form-rating .rating-star",function(){a("body").find(".review-send-btn").removeClass("disabled").removeAttr("disabled")});a(d).on("click",".review-cancel-btn",function(){f.cleanReviewForm()});a(d).on("click",".btn-reviews-filter",function(b){b.preventDefault();var c=a(this).attr("data-filter");reviewscontainer.attr("data-filter",c);a(this).parents(".reviews-filter").find(".btn-reviews-filter").removeClass("active");a(this).addClass("active");f.load(0,c)});reviewscontainer.on("click",".btn-reviews-pagination",function(b){b.preventDefault();var c=a(this).attr("data-page"),d=reviewscontainer.attr("data-filter");f.load(c,d)});reviewscontainer.on("click",".review-approve-btn",function(){var b=a(this).parents(f.reviewitem).attr("data-id");f.approve(this,b)});reviewscontainer.on("click",".review-delete-btn",function(){var b=a(this).parents(f.reviewitem).attr("data-id");f.delete(this,b)});reviewscontainer.on("click",".review-like-btn",function(){var b=a(this).parents(f.reviewitem).attr("data-id");f.like(this,b,1)});reviewscontainer.on("click",".review-dislike-btn",function(){var b=a(this).parents(f.reviewitem).attr("data-id");f.like(this,b,0)});reviewscontainer.on("click",".review-edit-btn",function(){var b=a(this).parents(f.reviewitem);f.edit(b)});reviewscontainer.on("click",".review-comments-btn",function(){var b=a(this).parents(f.reviewitem).attr("data-id");if(a(this).parents(f.reviewitem).find(f.commentscontainer).hasClass("hidden")){f.loadComments(this,b)}else{f.hideComments(this,b)}});reviewscontainer.on("click",".comment-send-btn",function(){f.saveComment(this)});reviewscontainer.on("keydown",".commenttext-input",function(b){if(13===b.keyCode){b.preventDefault();a(this).parent().find(".comment-send-btn").trigger("click")}});reviewscontainer.on("click",".comment-edit-btn",function(){var b=a(this).parents(f.commentitem);f.editComment(b)});reviewscontainer.on("click",".comment-approve-btn",function(){var b=a(this).parents(f.commentitem).attr("data-id");f.approveComment(this,b)});reviewscontainer.on("click",".comment-delete-btn",function(){var b=a(this).parents(f.commentitem).attr("data-id");f.deleteComment(this,b)})},load:function load(c,d){reviewscontainer=a(f.reviewscontainer);reviewscontainer.addClass("loading").html(f.loader);var g=reviewscontainer.attr("data-instanceid"),h=reviewscontainer.attr("data-type");b.call([{methodname:"local_intellicart_reviews_load",args:{instanceid:g,type:h,filter:d,page:c}}])[0].done(function(a){try{reviewscontainer.html(a.reviewshtml);f.exitLoading(reviewscontainer)}catch(a){e.debug(a.message);f.exitLoading(reviewscontainer)}}).fail(function(a){e.debug(a.message);f.exitLoading(reviewscontainer)})},save:function save(c){var d=a(c).html(),g=a(c).parents(".post-form"),h=g.find("[name=id]").val();a(c).addClass("disabled").html(f.loader);b.call([{methodname:"local_intellicart_review_save",args:{id:h,instanceid:g.find("[name=instanceid]").val(),type:g.find("[name=type]").val(),rate:g.find("[name=rate]").val(),reviewtext:g.find("[name=reviewtext]").val()}}])[0].done(function(b){try{a(c).html(d);f.cleanReviewForm();if(0<h){a(f.reviewscontainer).find(f.reviewitem+"[data-id=\""+h+"\"]").replaceWith(b.review)}else{a(f.reviewscontainer).prepend(b.review)}f.refreshProductRating(b.rating)}catch(b){e.debug(b.message);a(c).removeClass("disabled").html(d)}}).fail(function(b){e.debug(b.message);a(c).removeClass("disabled").html(d)})},approve:function approve(c,d){a(c).addClass("disabled");b.call([{methodname:"local_intellicart_review_approve",args:{id:d}}])[0].done(function(b){try{a(c).parents(".review-actions").find(".edit").remove();a(c).parent(".approve").remove();f.refreshProductRating(b.rating);a(f.selector).find(".btn-reviews-filter[data-filter=\"2\"] .number").html(b.pendingreviews)}catch(b){e.debug(b.message);a(c).removeClass("disabled")}}).fail(function(b){e.debug(b.message);a(c).removeClass("disabled")})},delete:function _delete(c,d){a(c).addClass("disabled");b.call([{methodname:"local_intellicart_review_delete",args:{id:d}}])[0].done(function(b){try{a(c).parents(f.reviewitem).remove();f.refreshProductRating(b.rating)}catch(b){e.debug(b.message);a(c).removeClass("disabled")}}).fail(function(b){e.debug(b.message);a(c).removeClass("disabled")})},refreshProductRating:function refreshProductRating(b){if(a(".product-rating-box")){a(".product-rating-box").html(b)}},cleanReviewForm:function cleanReviewForm(){var b=a(f.reviewpostform);b.find(".post-form [name=\"id\"]").val(0);b.find(".post-form [name=\"reviewtext\"]").text("").val("");b.find(".post-form [name=\"rate\"]").val(0);b.find(".product-rating .rating-star").removeClass("selected");a("body").find(".review-send-btn").addClass("disabled").prop("disabled",!0);a("body").find(".review-cancel-btn").addClass("hidden")},like:function like(c,d,g){if(a(this).hasClass("active")){return}a(c).addClass("disabled");b.call([{methodname:"local_intellicart_review_like",args:{id:d,status:g,type:"review"}}])[0].done(function(b){try{var d=parseInt(b.likes),h=parseInt(b.dislikes);if(0<g){a(c).parents(f.reviewitem).find(".review-dislike-btn").removeClass("active").find(".number").html(h?h+" ":"0 ");a(c).addClass("active").find(".number").html(d?d+" ":"0 ")}else{a(c).parents(f.reviewitem).find(".review-like-btn").removeClass("active").find(".number").html(d?d+" ":"0 ");a(c).addClass("active").find(".number").html(h?h+" ":"0 ")}}catch(b){e.debug(b.message);a(c).removeClass("disabled")}}).fail(function(b){e.debug(b.message);a(c).removeClass("disabled")})},edit:function edit(b){var c=b.attr("data-id");var d=b.find(".review-text").html(),e=b.find(".rating").attr("data-rate"),g=a(f.reviewpostform);g.find(".post-form [name=\"id\"]").val(c);g.find(".post-form [name=\"reviewtext\"]").val(d?d.trim():"");g.find(".post-form [name=\"rate\"]").val(e);g.find(".product-rating .rating-star").removeClass("selected");g.find(".review-send-btn").removeClass("disabled").removeAttr("disabled");g.find(".review-cancel-btn").removeClass("hidden");if(5==e){g.find(".product-rating .rating-star").addClass("selected")}else{g.find(".product-rating .rating-star[data-rating=\""+(e+1)+"\"]").prevAll().addClass("selected")}},loadComments:function loadComments(c,d){var g=a(c).parents(f.reviewitem).find(f.commentscontainer);g.removeClass("hidden").addClass("loading").find(".comments-list").html(f.loader);b.call([{methodname:"local_intellicart_load_comments",args:{instanceid:d,type:"review"}}])[0].done(function(a){try{g.find(".comments-list").html(a.commentshtml);g.removeClass("loading")}catch(a){e.debug(a.message)}}).fail(function(a){e.debug(a.message);g.removeClass("loading").addClass("hidden")})},hideComments:function hideComments(b){a(b).parents(f.reviewitem).find(f.commentscontainer).addClass("hidden")},saveComment:function saveComment(c){var d=a(c).parents(f.reviewitem),g=d.find(".comments-form"),h=d.find(".review-comments"),i=d.attr("data-id"),j=g.find("[name=\"id\"]").val(),k=g.find("[name=\"commenttext\"]").val();if(k.length){g.addClass("loading").prepend(f.loader);b.call([{methodname:"local_intellicart_comment_save",args:{id:j,instanceid:i,type:"review",commenttext:k}}])[0].done(function(a){try{if(a.commenthtml.length){f.exitLoading(g);g.find("input[name=\"id\"]").val(0);g.find("input[name=\"commenttext\"]").val("");if(0<j){h.find(f.commentitem+"[data-id=\""+j+"\"]").replaceWith(a.commenthtml)}else{h.find(".comments-list").append(a.commenthtml)}d.find(".review-comments-btn .number").html(a.commentsnumber)}else{g.exitLoading(h)}}catch(a){e.debug(a.message);g.exitLoading(h)}}).fail(function(a){e.debug(a.message);g.exitLoading(h)})}},approveComment:function approveComment(c,d){a(c).addClass("disabled");b.call([{methodname:"local_intellicart_comment_approve",args:{id:d}}])[0].done(function(b){try{a(c).parents(".comments-actions").find(".edit").remove();a(c).parents(f.reviewitem).find(".review-comments-btn .number").html(b.commentsnumber);a(c).parent(".approve").remove()}catch(b){e.debug(b.message);a(c).removeClass("disabled")}}).fail(function(b){e.debug(b.message);a(c).removeClass("disabled")})},deleteComment:function deleteComment(c,d){a(c).addClass("disabled");b.call([{methodname:"local_intellicart_comment_delete",args:{id:d}}])[0].done(function(b){try{a(c).parents(f.reviewitem).find(".review-comments-btn .number").html(b.commentsnumber);a(c).parents(f.commentitem).remove()}catch(b){e.debug(b.message);a(c).removeClass("disabled")}}).fail(function(b){e.debug(b.message);a(c).removeClass("disabled")})},editComment:function editComment(a){var b=a.attr("data-id"),c=a.find(".comment-text").html(),d=a.parents(f.reviewitem),e=d.find(".comments-form");e.find("[name=\"id\"]").val(b);e.find("[name=\"commenttext\"]").val(c?c.trim():"")},exitLoading:function exitLoading(a){a.removeClass("loading");a.find(".loader").remove()}};return f});
define ("local_intellicart/intellicart_tablefilters",["jquery","local_intellicart/flatpickr"],function(a){var b={tablecontainer:".custom-filtering-table",formcontainer:".form-table-filter",init:function init(){a(b.formcontainer+" .filters-block input, "+b.formcontainer+" .filters-block select").change(function(){b.cleanDownload();if("daterange"!=a(this).attr("data-input-type")){b.formSubmit()}});a(b.formcontainer+" input[data-input-type=\"daterange\"]").each(function(){var c=document.getElementById(a(this).attr("id")),d=a(this).data("class");c.flatpickr({mode:"range",dateFormat:"Y-m-d",onChange:function onChange(a){if(2==a.length){b.formSubmit()}}}).calendarContainer.classList.add(d)});a(b.tablecontainer+" .report-export-panel a[data-type=\"download-link\"]").click(function(){var c=a(this).attr("data-download-type");a(b.formcontainer).find("input[name=\"download\"]").val(c);b.formSubmit()});a(b.tablecontainer+" .intb-pagination a").click(function(c){c.preventDefault();var d=parseInt(a(this).text());d=0<d?d-1:0;a(b.formcontainer).find("input[name=\"page\"]").val(d);b.cleanDownload();b.formSubmit()})},formSubmit:function formSubmit(){a(b.formcontainer).submit()},cleanDownload:function cleanDownload(){a(b.formcontainer).find("input[name=\"download\"]").val("")}};return b});
define ("local_intellicart/intellicart_area_events",[],function(){return{showIntellicart:"intellicart-area-events:showIntellicart",intellicartShown:"intellicart-area-events:intellicartShown"}});
function _typeof(e){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(e){return typeof e}}else{_typeof=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return _typeof(e)}(function(e,t){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof(module)))module.exports=t(require("moment"),require("jquery"));else if("function"==typeof define&&define.amd)define ("local_intellicart/fullcalendar",["local_intellicart/moment","jquery"],t);else if("object"===("undefined"==typeof exports?"undefined":_typeof(exports)))exports.FullCalendar=t(require("moment"),require("jquery"));else e.FullCalendar=t(e.moment,e.jQuery)})("undefined"!=typeof self?self:this,function(e,t){return function(e){var o={};function t(n){if(o[n]){return o[n].exports}var r=o[n]={i:n,l:!1,exports:{}};e[n].call(r.exports,r,r.exports,t);r.l=!0;return r.exports}t.m=e;t.c=o;t.d=function(e,o,n){if(!t.o(e,o)){Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})}};t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};t.d(o,"a",o);return o};t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};t.p="";return t(t.s=236)}([function(t){t.exports=e},,function(e,t){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t){if(t.hasOwnProperty(o))e[o]=t[o]}};t.__extends=function(e,t){o(e,t);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}},function(e){e.exports=t},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var w=o(0),E=o(3);t.compensateScroll=function(e,t){if(t.left){e.css({"border-left-width":1,"margin-left":t.left-1})}if(t.right){e.css({"border-right-width":1,"margin-right":t.right-1})}};t.uncompensateScroll=function(e){e.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})};t.disableCursor=function(){E("body").addClass("fc-not-allowed")};t.enableCursor=function(){E("body").removeClass("fc-not-allowed")};t.distributeHeight=function(e,t,o){var r=Math.floor(t/e.length),a=Math.floor(t-r*(e.length-1)),l=[],s=[],d=[],p=0;n(e);e.each(function(t,o){var n=t===e.length-1?a:r,i=E(o).outerHeight(!0);if(i<n){l.push(o);s.push(i);d.push(E(o).height())}else{p+=i}});if(o){t-=p;r=Math.floor(t/l.length);a=Math.floor(t-r*(l.length-1))}E(l).each(function(e,t){var o=e===l.length-1?a:r,n=s[e],i=d[e];if(n<o){E(t).height(o-(n-i))}})};function n(e){e.height("")}t.undistributeHeight=n;t.matchCellWidths=function(e){var t=0;e.find("> *").each(function(e,o){var n=E(o).outerWidth();if(n>t){t=n}});t++;e.width(t);return t};t.subtractInnerElHeight=function(e,t){var o=e.add(t),n;o.css({position:"relative",left:-1});n=e.outerHeight()-t.outerHeight();o.css({position:"",left:""});return n};t.getScrollParent=function(e){var t=e.css("position"),o=e.parents().filter(function(){var e=E(this);return /(auto|scroll)/.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"===t||!o.length?E(e[0].ownerDocument||document):o};t.getOuterRect=function(e,t){var o=e.offset(),n=o.left-(t?t.left:0),r=o.top-(t?t.top:0);return{left:n,right:n+e.outerWidth(),top:r,bottom:r+e.outerHeight()}};t.getClientRect=function(e,t){var o=e.offset(),n=r(e),a=o.left+s(e,"border-left-width")+n.left-(t?t.left:0),i=o.top+s(e,"border-top-width")+n.top-(t?t.top:0);return{left:a,right:a+e[0].clientWidth,top:i,bottom:i+e[0].clientHeight}};t.getContentRect=function(e,t){var o=e.offset(),n=o.left+s(e,"border-left-width")+s(e,"padding-left")-(t?t.left:0),r=o.top+s(e,"border-top-width")+s(e,"padding-top")-(t?t.top:0);return{left:n,right:n+e.width(),top:r,bottom:r+e.height()}};function r(e){var t=e[0].offsetWidth-e[0].clientWidth,o=e[0].offsetHeight-e[0].clientHeight,n;t=a(t);o=a(o);n={left:0,right:0,top:0,bottom:o};if(i()&&"rtl"===e.css("direction")){n.left=t}else{n.right=t}return n}t.getScrollbarWidths=r;function a(e){e=Math.max(0,e);e=Math.round(e);return e}var S=null;function i(){if(null===S){S=l()}return S}function l(){var e=E("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),t=e.children(),o=t.offset().left>e.offset().left;e.remove();return o}function s(e,t){return parseFloat(e.css(t))||0}t.isPrimaryMouseButton=function(e){return 1===e.which&&!e.ctrlKey};t.getEvX=function(e){var t=e.originalEvent.touches;if(t&&t.length){return t[0].pageX}return e.pageX};t.getEvY=function(e){var t=e.originalEvent.touches;if(t&&t.length){return t[0].pageY}return e.pageY};t.getEvIsTouch=function(e){return /^touch/.test(e.type)};t.preventSelection=function(e){e.addClass("fc-unselectable").on("selectstart",d)};t.allowSelection=function(e){e.removeClass("fc-unselectable").off("selectstart",d)};function d(e){e.preventDefault()}t.preventDefault=d;t.intersectRects=function(e,t){var o={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)};if(o.left<o.right&&o.top<o.bottom){return o}return!1};t.constrainPoint=function(e,t){return{left:Math.min(Math.max(e.left,t.left),t.right),top:Math.min(Math.max(e.top,t.top),t.bottom)}};t.getRectCenter=function(e){return{left:(e.left+e.right)/2,top:(e.top+e.bottom)/2}};t.diffPoints=function(e,t){return{left:e.left-t.left,top:e.top-t.top}};t.parseFieldSpecs=function(e){var t=[],o=[],n,r;if("string"==typeof e){o=e.split(/\s*,\s*/)}else if("function"==typeof e){o=[e]}else if(E.isArray(e)){o=e}for(n=0;n<o.length;n++){r=o[n];if("string"==typeof r){t.push("-"===r.charAt(0)?{field:r.substring(1),order:-1}:{field:r,order:1})}else if("function"==typeof r){t.push({func:r})}}return t};t.compareByFieldSpecs=function(e,t,o,n,r){var a,l;for(a=0;a<o.length;a++){l=p(e,t,o[a],n,r);if(l){return l}}return 0};function p(e,t,o,n,r){if(o.func){return o.func(e,t)}var a=e[o.field],i=t[o.field];if(null==a&&n){a=n[o.field]}if(null==i&&r){i=r[o.field]}return c(a,i)*(o.order||1)}t.compareByFieldSpec=p;function c(e,t){if(!e&&!t){return 0}if(null==t){return-1}if(null==e){return 1}if("string"===E.type(e)||"string"===E.type(t)){return(e+"").localeCompare(t+"")}return e-t}t.flexibleCompare=c;t.dayIDs=["sun","mon","tue","wed","thu","fri","sat"];t.unitsDesc=["year","month","week","day","hour","minute","second","millisecond"];t.diffDayTime=function(e,t){return w.duration({days:e.clone().stripTime().diff(t.clone().stripTime(),"days"),ms:e.time()-t.time()})};t.diffDay=function(e,t){return w.duration({days:e.clone().stripTime().diff(t.clone().stripTime(),"days")})};t.diffByUnit=function(e,t,o){return w.duration(Math.round(e.diff(t,o,!0)),o)};function u(e,o){var n,r,a;for(n=0;n<t.unitsDesc.length;n++){r=t.unitsDesc[n];a=f(r,e,o);if(1<=a&&b(a)){break}}return r}t.computeGreatestUnit=u;function g(e,t){var o=u(e);if("week"===o&&"object"===_typeof(t)&&t.days){o="day"}return o}t.computeDurationGreatestUnit=g;function f(e,t,o){if(null!=o){return o.diff(t,e,!0)}else if(w.isDuration(t)){return t.as(e)}else{return t.end.diff(t.start,e,!0)}}t.divideRangeByDuration=function(e,t,o){var n;if(y(o)){return(t-e)/o}n=o.asMonths();if(1<=Math.abs(n)&&b(n)){return t.diff(e,"months",!0)/n}return t.diff(e,"days",!0)/o.asDays()};t.divideDurationByDuration=function(e,t){var o,n;if(y(e)||y(t)){return e/t}o=e.asMonths();n=t.asMonths();if(1<=Math.abs(o)&&b(o)&&1<=Math.abs(n)&&b(n)){return o/n}return e.asDays()/t.asDays()};t.multiplyDuration=function(e,t){var o;if(y(e)){return w.duration(e*t)}o=e.asMonths();if(1<=Math.abs(o)&&b(o)){return w.duration({months:o*t})}return w.duration({days:e.asDays()*t})};function y(e){return!!(e.hours()||e.minutes()||e.seconds()||e.milliseconds())}t.durationHasTime=y;t.isNativeDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date};t.isTimeString=function(e){return"string"==typeof e&&/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(e)};function m(){for(var e=[],t=0;t<arguments.length;t++){e[t]=arguments[t]}var o=window.console;if(o&&o.log){return o.log.apply(o,e)}}t.log=m;t.warn=function(){for(var e=[],t=0;t<arguments.length;t++){e[t]=arguments[t]}var o=window.console;if(o&&o.warn){return o.warn.apply(o,e)}else{return m.apply(null,e)}};var C={}.hasOwnProperty;function v(e,t){var o={},n,r,a,l,s,d;if(t){for(n=0;n<t.length;n++){r=t[n];a=[];for(l=e.length-1;0<=l;l--){s=e[l][r];if("object"===_typeof(s)){a.unshift(s)}else if(s!==void 0){o[r]=s;break}}if(a.length){o[r]=v(a)}}}for(n=e.length-1;0<=n;n--){d=e[n];for(r in d){if(!(r in o)){o[r]=d[r]}}}return o}t.mergeProps=v;t.copyOwnProps=function(e,t){for(var o in e){if(h(e,o)){t[o]=e[o]}}};function h(e,t){return C.call(e,t)}t.hasOwnProp=h;t.applyAll=function(e,t,o){if(E.isFunction(e)){e=[e]}if(e){var n=void 0,r=void 0;for(n=0;n<e.length;n++){r=e[n].apply(t,o)||r}return r}};t.removeMatching=function(e,t){var o=0,n=0;while(n<e.length){if(t(e[n])){e.splice(n,1);o++}else{n++}}return o};t.removeExact=function(e,t){var o=0,n=0;while(n<e.length){if(e[n]===t){e.splice(n,1);o++}else{n++}}return o};t.isArraysEqual=function(e,t){var o=e.length,n;if(null==o||o!==t.length){return!1}for(n=0;n<o;n++){if(e[n]!==t[n]){return!1}}return!0};t.firstDefined=function(){for(var e=[],t=0;t<arguments.length;t++){e[t]=arguments[t]}for(var o=0;o<e.length;o++){if(e[o]!==void 0){return e[o]}}};function D(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}t.htmlEscape=D;t.stripHtmlEntities=function(e){return e.replace(/&.*?;/g,"")};t.cssToStr=function(e){var t=[];E.each(e,function(e,o){if(null!=o){t.push(e+":"+o)}});return t.join(";")};t.attrsToStr=function(e){var t=[];E.each(e,function(e,o){if(null!=o){t.push(e+"=\""+D(o)+"\"")}});return t.join(" ")};t.capitaliseFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};t.compareNumbers=function(e,t){return e-t};function b(e){return 0==e%1}t.isInt=b;t.proxy=function(e,t){var o=e[t];return function(){return o.apply(e,arguments)}};t.debounce=function(e,t,o){if(void 0===o){o=!1}var n,r,a,i,l,s=function(){var d=+new Date-i;if(d<t){n=setTimeout(s,t-d)}else{n=null;if(!o){l=e.apply(a,r);a=r=null}}};return function(){a=this;r=arguments;i=+new Date;var d=o&&!n;if(!n){n=setTimeout(s,t)}if(d){l=e.apply(a,r);a=r=null}return l}}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var r=o(0),a=o(10),i=function(){function e(e,t){this.isStart=!0;this.isEnd=!0;if(r.isMoment(e)){e=e.clone().stripZone()}if(r.isMoment(t)){t=t.clone().stripZone()}if(e){this.startMs=e.valueOf()}if(t){this.endMs=t.valueOf()}}e.invertRanges=function(t,o){var r=[],a=o.startMs,l,s;t.sort(n);for(l=0;l<t.length;l++){s=t[l];if(s.startMs>a){r.push(new e(a,s.startMs))}if(s.endMs>a){a=s.endMs}}if(a<o.endMs){r.push(new e(a,o.endMs))}return r};e.prototype.intersect=function(t){var o=this.startMs,n=this.endMs,r=null;if(null!=t.startMs){if(null==o){o=t.startMs}else{o=Math.max(o,t.startMs)}}if(null!=t.endMs){if(null==n){n=t.endMs}else{n=Math.min(n,t.endMs)}}if(null==o||null==n||o<n){r=new e(o,n);r.isStart=this.isStart&&o===this.startMs;r.isEnd=this.isEnd&&n===this.endMs}return r};e.prototype.intersectsWith=function(e){return(null==this.endMs||null==e.startMs||this.endMs>e.startMs)&&(null==this.startMs||null==e.endMs||this.startMs<e.endMs)};e.prototype.containsRange=function(e){return(null==this.startMs||null!=e.startMs&&e.startMs>=this.startMs)&&(null==this.endMs||null!=e.endMs&&e.endMs<=this.endMs)};e.prototype.containsDate=function(e){var t=e.valueOf();return(null==this.startMs||t>=this.startMs)&&(null==this.endMs||t<this.endMs)};e.prototype.constrainDate=function(e){var t=e.valueOf();if(null!=this.startMs&&t<this.startMs){t=this.startMs}if(null!=this.endMs&&t>=this.endMs){t=this.endMs-1}return t};e.prototype.equals=function(e){return this.startMs===e.startMs&&this.endMs===e.endMs};e.prototype.clone=function(){var t=new e(this.startMs,this.endMs);t.isStart=this.isStart;t.isEnd=this.isEnd;return t};e.prototype.getStart=function(){if(null!=this.startMs){return a.default.utc(this.startMs).stripZone()}return null};e.prototype.getEnd=function(){if(null!=this.endMs){return a.default.utc(this.endMs).stripZone()}return null};e.prototype.as=function(e){return r.utc(this.endMs).diff(r.utc(this.startMs),e,!0)};return e}();t.default=i;function n(e,t){return e.startMs-t.startMs}return t.default},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(3),a=o(208),i=o(33),l=o(49),s=function(e){n.__extends(t,e);function t(o){var n=e.call(this)||this;n.calendar=o;n.className=[];n.uid=t.uuid++ +"";return n}t.parse=function(e,t){var o=new this(t);if("object"===_typeof(e)){if(o.applyProps(e)){return o}}return!1};t.normalizeId=function(e){if(e){return e+""}return null};t.prototype.fetch=function(){};t.prototype.removeEventDefsById=function(){};t.prototype.removeAllEventDefs=function(){};t.prototype.getPrimitive=function(){};t.prototype.parseEventDefs=function(e){var t,o,n=[];for(t=0;t<e.length;t++){o=this.parseEventDef(e[t]);if(o){n.push(o)}}return n};t.prototype.parseEventDef=function(e){var t=this.calendar.opt("eventDataTransform"),o=this.eventDataTransform;if(t){e=t(e,this.calendar)}if(o){e=o(e,this.calendar)}return l.default.parse(e,this)};t.prototype.applyManualStandardProps=function(e){if(null!=e.id){this.id=t.normalizeId(e.id)}if(r.isArray(e.className)){this.className=e.className}else if("string"==typeof e.className){this.className=e.className.split(/\s+/)}return!0};t.uuid=0;t.defineStandardProps=a.default.defineStandardProps;t.copyVerbatimStandardProps=a.default.copyVerbatimStandardProps;return t}(i.default);t.default=s;a.default.mixInto(s);s.defineStandardProps({id:!1,className:!1,color:!0,backgroundColor:!0,borderColor:!0,textColor:!0,editable:!0,startEditable:!0,durationEditable:!0,rendering:!0,overlap:!0,constraint:!0,allDayDefault:!0,eventDataTransform:!0})},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(3),a=o(14),i=0,l=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.listenTo=function(e,t,o){if("object"===_typeof(t)){for(var n in t){if(t.hasOwnProperty(n)){this.listenTo(e,n,t[n])}}}else if("string"==typeof t){e.on(t+"."+this.getListenerNamespace(),r.proxy(o,this))}};t.prototype.stopListeningTo=function(e,t){e.off((t||"")+"."+this.getListenerNamespace())};t.prototype.getListenerNamespace=function(){if(null==this.listenerId){this.listenerId=i++}return"_listener"+this.listenerId};return t}(a.default);t.default=l},,,function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var r=o(0),a=o(3),i=o(4),l=r.fn;t.newMomentProto=l;var s=a.extend({},l);t.oldMomentProto=s;var d=r.momentProperties;d.push("_fullCalendar");d.push("_ambigTime");d.push("_ambigZone");t.oldMomentFormat=function(e,t){return s.format.call(e,t)};var p=function(){return n(arguments)};t.default=p;p.utc=function(){var e=n(arguments,!0);if(e.hasTime()){e.utc()}return e};p.parseZone=function(){return n(arguments,!0,!0)};function n(e,t,o){if(void 0===t){t=!1}if(void 0===o){o=!1}var n=e[0],l=1===e.length&&"string"==typeof n,s,d,p,c;if(r.isMoment(n)||i.isNativeDate(n)||n===void 0){c=r.apply(null,e)}else{s=!1;d=!1;if(l){if(/^\s*\d{4}-\d\d$/.test(n)){n+="-01";e=[n];s=!0;d=!0}else if(p=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/.exec(n)){s=!p[5];d=!0}}else if(a.isArray(n)){d=!0}if(t||s){c=r.utc.apply(r,e)}else{c=r.apply(null,e)}if(s){c._ambigTime=!0;c._ambigZone=!0}else if(o){if(d){c._ambigZone=!0}else if(l){c.utcOffset(n)}}}c._fullCalendar=!0;return c}l.week=l.weeks=function(e){var t=this._locale._fullCalendar_weekCalc;if(null==e&&"function"==typeof t){return t(this)}else if("ISO"===t){return s.isoWeek.apply(this,arguments)}return s.week.apply(this,arguments)};l.time=function(e){if(!this._fullCalendar){return s.time.apply(this,arguments)}if(null==e){return r.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()})}else{this._ambigTime=!1;if(!r.isDuration(e)&&!r.isMoment(e)){e=r.duration(e)}var t=0;if(r.isDuration(e)){t=24*Math.floor(e.asDays())}return this.hours(t+e.hours()).minutes(e.minutes()).seconds(e.seconds()).milliseconds(e.milliseconds())}};l.stripTime=function(){if(!this._ambigTime){this.utc(!0);this.set({hours:0,minutes:0,seconds:0,ms:0});this._ambigTime=!0;this._ambigZone=!0}return this};l.hasTime=function(){return!this._ambigTime};l.stripZone=function(){var e;if(!this._ambigZone){e=this._ambigTime;this.utc(!0);this._ambigTime=e||!1;this._ambigZone=!0}return this};l.hasZone=function(){return!this._ambigZone};l.local=function(e){s.local.call(this,this._ambigZone||e);this._ambigTime=!1;this._ambigZone=!1;return this};l.utc=function(e){s.utc.call(this,e);this._ambigTime=!1;this._ambigZone=!1;return this};l.utcOffset=function(e){if(null!=e){this._ambigTime=!1;this._ambigZone=!1}return s.utcOffset.apply(this,arguments)}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(3),a=o(14),i=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.on=function(e,t){r(this).on(e,this._prepareIntercept(t));return this};t.prototype.one=function(e,t){r(this).one(e,this._prepareIntercept(t));return this};t.prototype._prepareIntercept=function(e){var t=function(t,o){return e.apply(o.context||this,o.args||[])};if(!e.guid){e.guid=r.guid++}t.guid=e.guid;return t};t.prototype.off=function(e,t){r(this).off(e,t);return this};t.prototype.trigger=function(e){for(var t=[],o=1;o<arguments.length;o++){t[o-1]=arguments[o]}r(this).triggerHandler(e,{args:t});return this};t.prototype.triggerWith=function(e,t,o){r(this).triggerHandler(e,{context:t,args:o});return this};t.prototype.hasHandlers=function(e){var t=r._data(this,"events");return t&&t[e]&&0<t[e].length};return t}(a.default);t.default=i},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){this.isAllDay=!1;this.unzonedRange=e;this.isAllDay=t}e.prototype.toLegacy=function(e){return{start:e.msToMoment(this.unzonedRange.startMs,this.isAllDay),end:e.msToMoment(this.unzonedRange.endMs,this.isAllDay)}};return e}();t.default=o},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(34),a=o(209),i=o(17),l=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.buildInstances=function(){return[this.buildInstance()]};t.prototype.buildInstance=function(){return new a.default(this,this.dateProfile)};t.prototype.isAllDay=function(){return this.dateProfile.isAllDay()};t.prototype.clone=function(){var t=e.prototype.clone.call(this);t.dateProfile=this.dateProfile;return t};t.prototype.rezone=function(){var e=this.source.calendar,t=this.dateProfile;this.dateProfile=new i.default(e.moment(t.start),t.end?e.moment(t.end):null,e)};t.prototype.applyManualStandardProps=function(t){var o=e.prototype.applyManualStandardProps.call(this,t),n=i.default.parse(t,this.source);if(n){this.dateProfile=n;if(null!=t.date){this.miscProps.date=t.date}return o}else{return!1}};return t}(r.default);t.default=l;l.defineStandardProps({start:!1,date:!1,end:!1,allDay:!1})},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}e.mixInto=function(e){var t=this;Object.getOwnPropertyNames(this.prototype).forEach(function(o){if(!e.prototype[o]){e.prototype[o]=t.prototype[o]}})};e.mixOver=function(e){var t=this;Object.getOwnPropertyNames(this.prototype).forEach(function(o){e.prototype[o]=t.prototype[o]})};return e}();t.default=o},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.view=e._getView();this.component=e}e.prototype.opt=function(e){return this.view.opt(e)};e.prototype.end=function(){};return e}();t.default=o},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});t.version="3.9.0";t.internalApiVersion=12;var n=o(4);t.applyAll=n.applyAll;t.debounce=n.debounce;t.isInt=n.isInt;t.htmlEscape=n.htmlEscape;t.cssToStr=n.cssToStr;t.proxy=n.proxy;t.capitaliseFirstLetter=n.capitaliseFirstLetter;t.getOuterRect=n.getOuterRect;t.getClientRect=n.getClientRect;t.getContentRect=n.getContentRect;t.getScrollbarWidths=n.getScrollbarWidths;t.preventDefault=n.preventDefault;t.parseFieldSpecs=n.parseFieldSpecs;t.compareByFieldSpecs=n.compareByFieldSpecs;t.compareByFieldSpec=n.compareByFieldSpec;t.flexibleCompare=n.flexibleCompare;t.computeGreatestUnit=n.computeGreatestUnit;t.divideRangeByDuration=n.divideRangeByDuration;t.divideDurationByDuration=n.divideDurationByDuration;t.multiplyDuration=n.multiplyDuration;t.durationHasTime=n.durationHasTime;t.log=n.log;t.warn=n.warn;t.removeExact=n.removeExact;t.intersectRects=n.intersectRects;var r=o(47);t.formatDate=r.formatDate;t.formatRange=r.formatRange;t.queryMostGranularFormatUnit=r.queryMostGranularFormatUnit;var a=o(31);t.datepickerLocale=a.datepickerLocale;t.locale=a.locale;var i=o(10);t.moment=i.default;var l=o(11);t.EmitterMixin=l.default;var s=o(7);t.ListenerMixin=s.default;var d=o(48);t.Model=d.default;var p=o(207);t.Constraints=p.default;var c=o(5);t.UnzonedRange=c.default;var u=o(12);t.ComponentFootprint=u.default;var g=o(212);t.BusinessHourGenerator=g.default;var f=o(34);t.EventDef=f.default;var y=o(37);t.EventDefMutation=y.default;var m=o(38);t.EventSourceParser=m.default;var v=o(6);t.EventSource=v.default;var h=o(51);t.defineThemeSystem=h.defineThemeSystem;var D=o(18);t.EventInstanceGroup=D.default;var b=o(52);t.ArrayEventSource=b.default;var w=o(215);t.FuncEventSource=w.default;var E=o(216);t.JsonFeedEventSource=E.default;var S=o(36);t.EventFootprint=S.default;var C=o(33);t.Class=C.default;var R=o(14);t.Mixin=R.default;var T=o(53);t.CoordCache=T.default;var I=o(54);t.DragListener=I.default;var M=o(20);t.Promise=M.default;var H=o(217);t.TaskQueue=H.default;var P=o(218);t.RenderQueue=P.default;var _=o(39);t.Scroller=_.default;var x=o(19);t.Theme=x.default;var F=o(219);t.DateComponent=F.default;var z=o(40);t.InteractiveDateComponent=z.default;var B=o(220);t.Calendar=B.default;var A=o(41);t.View=A.default;var k=o(22);t.defineView=k.defineView;t.getViewConfig=k.getViewConfig;var O=o(55);t.DayTableMixin=O.default;var N=o(56);t.BusinessHourRenderer=N.default;var L=o(42);t.EventRenderer=L.default;var V=o(57);t.FillRenderer=V.default;var G=o(58);t.HelperRenderer=G.default;var U=o(222);t.ExternalDropping=U.default;var W=o(223);t.EventResizing=W.default;var q=o(59);t.EventPointing=q.default;var Y=o(224);t.EventDragging=Y.default;var j=o(225);t.DateSelecting=j.default;var Z=o(60);t.StandardInteractionsMixin=Z.default;var Q=o(226);t.AgendaView=Q.default;var X=o(227);t.TimeGrid=X.default;var K=o(61);t.DayGrid=K.default;var J=o(62);t.BasicView=J.default;var $=o(229);t.MonthView=$.default;var ee=o(230);t.ListView=ee.default},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(5),r=function(){function e(e,t,o){this.start=e;this.end=t||null;this.unzonedRange=this.buildUnzonedRange(o)}e.parse=function(t,o){var n=t.start||t.date,r=t.end;if(!n){return!1}var a=o.calendar,i=a.moment(n),l=r?a.moment(r):null,s=t.allDay,d=a.opt("forceEventDuration");if(!i.isValid()){return!1}if(l&&(!l.isValid()||!l.isAfter(i))){l=null}if(null==s){s=o.allDayDefault;if(null==s){s=a.opt("allDayDefault")}}if(!0===s){i.stripTime();if(l){l.stripTime()}}else if(!1===s){if(!i.hasTime()){i.time(0)}if(l&&!l.hasTime()){l.time(0)}}if(!l&&d){l=a.getDefaultEventEnd(!i.hasTime(),i)}return new e(i,l,a)};e.isStandardProp=function(e){return"start"===e||"date"===e||"end"===e||"allDay"===e};e.prototype.isAllDay=function(){return!(this.start.hasTime()||this.end&&this.end.hasTime())};e.prototype.buildUnzonedRange=function(e){var t=this.start.clone().stripZone().valueOf(),o=this.getEnd(e).stripZone().valueOf();return new n.default(t,o)};e.prototype.getEnd=function(e){return this.end?this.end.clone():e.getDefaultEventEnd(this.isAllDay(),this.start)};return e}();t.default=r},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(5),r=o(35),a=o(211),i=function(){function e(e){this.eventInstances=e||[]}e.prototype.getAllEventRanges=function(e){if(e){return this.sliceNormalRenderRanges(e)}else{return this.eventInstances.map(r.eventInstanceToEventRange)}};e.prototype.sliceRenderRanges=function(e){if(this.isInverse()){return this.sliceInverseRenderRanges(e)}else{return this.sliceNormalRenderRanges(e)}};e.prototype.sliceNormalRenderRanges=function(e){var t=this.eventInstances,o,n,r,l=[];for(o=0;o<t.length;o++){n=t[o];r=n.dateProfile.unzonedRange.intersect(e);if(r){l.push(new a.default(r,n.def,n))}}return l};e.prototype.sliceInverseRenderRanges=function(e){var t=this.eventInstances.map(r.eventInstanceToUnzonedRange),o=this.getEventDef();t=n.default.invertRanges(t,e);return t.map(function(e){return new a.default(e,o)})};e.prototype.isInverse=function(){return this.getEventDef().hasInverseRendering()};e.prototype.getEventDef=function(){return this.explicitEventDef||this.eventInstances[0].def};return e}();t.default=i},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(3),r=function(){function e(e){this.optionsManager=e;this.processIconOverride()}e.prototype.processIconOverride=function(){if(this.iconOverrideOption){this.setIconOverride(this.optionsManager.get(this.iconOverrideOption))}};e.prototype.setIconOverride=function(e){var t,o;if(n.isPlainObject(e)){t=n.extend({},this.iconClasses);for(o in e){t[o]=this.applyIconOverridePrefix(e[o])}this.iconClasses=t}else if(!1===e){this.iconClasses={}}};e.prototype.applyIconOverridePrefix=function(e){var t=this.iconOverridePrefix;if(t&&0!==e.indexOf(t)){e=t+e}return e};e.prototype.getClass=function(e){return this.classes[e]||""};e.prototype.getIconClass=function(e){var t=this.iconClasses[e];if(t){return this.baseIconClass+" "+t}return""};e.prototype.getCustomButtonIconClass=function(e){var t;if(this.iconOverrideCustomButtonOption){t=e[this.iconOverrideCustomButtonOption];if(t){return this.baseIconClass+" "+this.applyIconOverridePrefix(t)}}return""};return e}();t.default=r;r.prototype.classes={};r.prototype.iconClasses={};r.prototype.baseIconClass="";r.prototype.iconOverridePrefix=""},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var a=o(3),i={construct:function construct(e){var t=a.Deferred(),o=t.promise();if("function"==typeof e){e(function(e){t.resolve(e);n(o,e)},function(){t.reject();r(o)})}return o},resolve:function resolve(e){var t=a.Deferred().resolve(e),o=t.promise();n(o,e);return o},reject:function reject(){var e=a.Deferred().reject(),t=e.promise();r(t);return t}};t.default=i;function n(e,t){e.then=function(o){if("function"==typeof o){return i.resolve(o(t))}return e}}function r(e){e.then=function(t,o){if("function"==typeof o){o()}return e}}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(3),r=o(16),a=o(11),i=o(7);r.touchMouseIgnoreWait=500;var l=null,s=0,d=function(){function e(){this.isTouching=!1;this.mouseIgnoreDepth=0}e.get=function(){if(!l){l=new e;l.bind()}return l};e.needed=function(){e.get();s++};e.unneeded=function(){s--;if(!s){l.unbind();l=null}};e.prototype.bind=function(){var e=this;this.listenTo(n(document),{touchstart:this.handleTouchStart,touchcancel:this.handleTouchCancel,touchend:this.handleTouchEnd,mousedown:this.handleMouseDown,mousemove:this.handleMouseMove,mouseup:this.handleMouseUp,click:this.handleClick,selectstart:this.handleSelectStart,contextmenu:this.handleContextMenu});window.addEventListener("touchmove",this.handleTouchMoveProxy=function(t){e.handleTouchMove(n.Event(t))},{passive:!1});window.addEventListener("scroll",this.handleScrollProxy=function(t){e.handleScroll(n.Event(t))},!0)};e.prototype.unbind=function(){this.stopListeningTo(n(document));window.removeEventListener("touchmove",this.handleTouchMoveProxy);window.removeEventListener("scroll",this.handleScrollProxy,!0)};e.prototype.handleTouchStart=function(e){this.stopTouch(e,!0);this.isTouching=!0;this.trigger("touchstart",e)};e.prototype.handleTouchMove=function(e){if(this.isTouching){this.trigger("touchmove",e)}};e.prototype.handleTouchCancel=function(e){if(this.isTouching){this.trigger("touchcancel",e);this.stopTouch(e)}};e.prototype.handleTouchEnd=function(e){this.stopTouch(e)};e.prototype.handleMouseDown=function(e){if(!this.shouldIgnoreMouse()){this.trigger("mousedown",e)}};e.prototype.handleMouseMove=function(e){if(!this.shouldIgnoreMouse()){this.trigger("mousemove",e)}};e.prototype.handleMouseUp=function(e){if(!this.shouldIgnoreMouse()){this.trigger("mouseup",e)}};e.prototype.handleClick=function(e){if(!this.shouldIgnoreMouse()){this.trigger("click",e)}};e.prototype.handleSelectStart=function(e){this.trigger("selectstart",e)};e.prototype.handleContextMenu=function(e){this.trigger("contextmenu",e)};e.prototype.handleScroll=function(e){this.trigger("scroll",e)};e.prototype.stopTouch=function(e,t){if(void 0===t){t=!1}if(this.isTouching){this.isTouching=!1;this.trigger("touchend",e);if(!t){this.startTouchMouseIgnore()}}};e.prototype.startTouchMouseIgnore=function(){var e=this,t=r.touchMouseIgnoreWait;if(t){this.mouseIgnoreDepth++;setTimeout(function(){e.mouseIgnoreDepth--},t)}};e.prototype.shouldIgnoreMouse=function(){return this.isTouching||!!this.mouseIgnoreDepth};return e}();t.default=d;i.default.mixInto(d);a.default.mixInto(d)},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(16);t.viewHash={};n.views=t.viewHash;t.defineView=function(e,o){t.viewHash[e]=o};t.getViewConfig=function(e){return t.viewHash[e]}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var a=o(2),i=o(4),l=o(54),s=function(e){a.__extends(t,e);function t(t,o){var n=e.call(this,o)||this;n.component=t;return n}t.prototype.handleInteractionStart=function(t){var o=this.subjectEl,n,r,a;this.component.hitsNeeded();this.computeScrollBounds();if(t){r={left:i.getEvX(t),top:i.getEvY(t)};a=r;if(o){n=i.getOuterRect(o);a=i.constrainPoint(a,n)}this.origHit=this.queryHit(a.left,a.top);if(o&&this.options.subjectCenter){if(this.origHit){n=i.intersectRects(this.origHit,n)||n}a=i.getRectCenter(n)}this.coordAdjust=i.diffPoints(a,r)}else{this.origHit=null;this.coordAdjust=null}e.prototype.handleInteractionStart.call(this,t)};t.prototype.handleDragStart=function(t){var o;e.prototype.handleDragStart.call(this,t);o=this.queryHit(i.getEvX(t),i.getEvY(t));if(o){this.handleHitOver(o)}};t.prototype.handleDrag=function(t,o,r){var a;e.prototype.handleDrag.call(this,t,o,r);a=this.queryHit(i.getEvX(r),i.getEvY(r));if(!n(a,this.hit)){if(this.hit){this.handleHitOut()}if(a){this.handleHitOver(a)}}};t.prototype.handleDragEnd=function(t){this.handleHitDone();e.prototype.handleDragEnd.call(this,t)};t.prototype.handleHitOver=function(e){var t=n(e,this.origHit);this.hit=e;this.trigger("hitOver",this.hit,t,this.origHit)};t.prototype.handleHitOut=function(){if(this.hit){this.trigger("hitOut",this.hit);this.handleHitDone();this.hit=null}};t.prototype.handleHitDone=function(){if(this.hit){this.trigger("hitDone",this.hit)}};t.prototype.handleInteractionEnd=function(t,o){e.prototype.handleInteractionEnd.call(this,t,o);this.origHit=null;this.hit=null;this.component.hitsNotNeeded()};t.prototype.handleScrollEnd=function(){e.prototype.handleScrollEnd.call(this);if(this.isDragging){this.component.releaseHits();this.component.prepareHits()}};t.prototype.queryHit=function(e,t){if(this.coordAdjust){e+=this.coordAdjust.left;t+=this.coordAdjust.top}return this.component.queryHit(e,t)};return t}(l.default);t.default=s;function n(e,t){if(!e&&!t){return!0}if(e&&t){return e.component===t.component&&r(e,t)&&r(t,e)}return!1}function r(e,t){for(var o in e){if(!/^(component|left|right|top|bottom)$/.test(o)){if(e[o]!==t[o]){return!1}}}return!0}},,,,,,,,function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var a=o(3),i=o(0),l=o(16),s=o(32),d=o(4);t.localeOptionHash={};l.locales=t.localeOptionHash;var p={buttonText:function buttonText(e){return{prev:d.stripHtmlEntities(e.prevText),next:d.stripHtmlEntities(e.nextText),today:d.stripHtmlEntities(e.currentText)}},monthYearFormat:function monthYearFormat(e){return e.showMonthAfterYear?"YYYY["+e.yearSuffix+"] MMMM":"MMMM YYYY["+e.yearSuffix+"]"}},c={dayOfMonthFormat:function dayOfMonthFormat(e,t){var o=e.longDateFormat("l");o=o.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,"");if(t.isRTL){o+=" ddd"}else{o="ddd "+o}return o},mediumTimeFormat:function mediumTimeFormat(e){return e.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function smallTimeFormat(e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function extraSmallTimeFormat(e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function hourFormat(e){return e.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function noMeridiemTimeFormat(e){return e.longDateFormat("LT").replace(/\s*a$/i,"")}},u={smallDayDateFormat:function smallDayDateFormat(e){return e.isRTL?"D dd":"dd D"},weekFormat:function weekFormat(e){return e.isRTL?"w[ "+e.weekNumberTitle+"]":"["+e.weekNumberTitle+" ]w"},smallWeekFormat:function smallWeekFormat(e){return e.isRTL?"w["+e.weekNumberTitle+"]":"["+e.weekNumberTitle+"]w"}};t.populateInstanceComputableOptions=function(e){a.each(u,function(t,o){if(null==e[t]){e[t]=o(e)}})};t.datepickerLocale=function(e,o,n){var r=t.localeOptionHash[e]||(t.localeOptionHash[e]={});r.isRTL=n.isRTL;r.weekNumberTitle=n.weekHeader;a.each(p,function(e,t){r[e]=t(n)});var i=a.datepicker;if(i){i.regional[o]=i.regional[e]=n;i.regional.en=i.regional[""];i.setDefaults(n)}};function n(e,o){var n,i;n=t.localeOptionHash[e]||(t.localeOptionHash[e]={});if(o){n=t.localeOptionHash[e]=s.mergeOptions([n,o])}i=r(e);a.each(c,function(e,t){if(null==n[e]){n[e]=t(i,n)}});s.globalDefaults.locale=e}t.locale=n;function r(e){return i.localeData(e)||i.localeData("en")}t.getMomentLocaleData=r;n("en",s.englishDefaults)},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(4);t.globalDefaults={titleRangeSeparator:" \u2013 ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",columnHeader:!0,defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",minTime:"00:00:00",maxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,locale:null,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},allDayText:"all-day",agendaEventMinHeight:0,theme:!1,dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventOrder:"title",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3};t.englishDefaults={dayPopoverFormat:"dddd, MMMM D"};t.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var r=["header","footer","buttonText","buttonIcons","themeButtonIcons"];t.mergeOptions=function(e){return n.mergeProps(e,r)}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(4),a=function(){function e(){}e.extend=function(e){var t=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}return t}(this);r.copyOwnProps(e,t.prototype);return t};e.mixin=function(e){r.copyOwnProps(e,this.prototype)};return e}();t.default=a},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(3),r=o(208),a=function(){function e(e){this.source=e;this.className=[];this.miscProps={}}e.parse=function(e,t){var o=new this(t);if(o.applyProps(e)){return o}return!1};e.normalizeId=function(e){return e+""};e.generateId=function(){return"_fc"+e.uuid++};e.prototype.clone=function(){var t=new this.constructor(this.source);t.id=this.id;t.rawId=this.rawId;t.uid=this.uid;e.copyVerbatimStandardProps(this,t);t.className=this.className.slice();t.miscProps=n.extend({},this.miscProps);return t};e.prototype.hasInverseRendering=function(){return"inverse-background"===this.getRendering()};e.prototype.hasBgRendering=function(){var e=this.getRendering();return"inverse-background"===e||"background"===e};e.prototype.getRendering=function(){if(null!=this.rendering){return this.rendering}return this.source.rendering};e.prototype.getConstraint=function(){if(null!=this.constraint){return this.constraint}if(null!=this.source.constraint){return this.source.constraint}return this.source.calendar.opt("eventConstraint")};e.prototype.getOverlap=function(){if(null!=this.overlap){return this.overlap}if(null!=this.source.overlap){return this.source.overlap}return this.source.calendar.opt("eventOverlap")};e.prototype.isStartExplicitlyEditable=function(){if(null!=this.startEditable){return this.startEditable}return this.source.startEditable};e.prototype.isDurationExplicitlyEditable=function(){if(null!=this.durationEditable){return this.durationEditable}return this.source.durationEditable};e.prototype.isExplicitlyEditable=function(){if(null!=this.editable){return this.editable}return this.source.editable};e.prototype.toLegacy=function(){var t=n.extend({},this.miscProps);t._id=this.uid;t.source=this.source;t.className=this.className.slice();t.allDay=this.isAllDay();if(null!=this.rawId){t.id=this.rawId}e.copyVerbatimStandardProps(this,t);return t};e.prototype.applyManualStandardProps=function(t){if(null!=t.id){this.id=e.normalizeId(this.rawId=t.id)}else{this.id=e.generateId()}if(null!=t._id){this.uid=t._id+""}else{this.uid=e.generateId()}if(n.isArray(t.className)){this.className=t.className}if("string"==typeof t.className){this.className=t.className.split(/\s+/)}return!0};e.prototype.applyMiscProps=function(e){n.extend(this.miscProps,e)};e.uuid=0;e.defineStandardProps=r.default.defineStandardProps;e.copyVerbatimStandardProps=r.default.copyVerbatimStandardProps;return e}();t.default=a;r.default.mixInto(a);a.defineStandardProps({_id:!1,id:!1,className:!1,source:!1,title:!0,url:!0,rendering:!0,constraint:!0,overlap:!0,editable:!0,startEditable:!0,durationEditable:!0,color:!0,backgroundColor:!0,borderColor:!0,textColor:!0})},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(211),r=o(36),a=o(12);t.eventDefsToEventInstances=function(e,t){var o=[],n;for(n=0;n<e.length;n++){o.push.apply(o,e[n].buildInstances(t))}return o};t.eventInstanceToEventRange=function(e){return new n.default(e.dateProfile.unzonedRange,e.def,e)};t.eventRangeToEventFootprint=function(e){return new r.default(new a.default(e.unzonedRange,e.eventDef.isAllDay()),e.eventDef,e.eventInstance)};t.eventInstanceToUnzonedRange=function(e){return e.dateProfile.unzonedRange};t.eventFootprintToComponentFootprint=function(e){return e.componentFootprint}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t,o){this.componentFootprint=e;this.eventDef=t;if(o){this.eventInstance=o}}e.prototype.getEventLegacy=function(){return(this.eventInstance||this.eventDef).toLegacy()};return e}();t.default=o},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(4),r=o(17),a=o(34),i=o(50),l=o(13),s=function(){function e(){}e.createFromRawProps=function(t,o,l){var s=t.def,d={},p={},c={},u={},g=null,f=null,y,m,v,h;for(y in o){if(r.default.isStandardProp(y)){d[y]=o[y]}else if(s.isStandardProp(y)){p[y]=o[y]}else if(s.miscProps[y]!==o[y]){c[y]=o[y]}}m=r.default.parse(d,s.source);if(m){v=i.default.createFromDiff(t.dateProfile,m,l)}if(p.id!==s.id){g=p.id}if(!n.isArraysEqual(p.className,s.className)){f=p.className}a.default.copyVerbatimStandardProps(p,u);h=new e;h.eventDefId=g;h.className=f;h.verbatimStandardProps=u;h.miscProps=c;if(v){h.dateMutation=v}return h};e.prototype.mutateSingle=function(e){var t;if(this.dateMutation){t=e.dateProfile;e.dateProfile=this.dateMutation.buildNewDateProfile(t,e.source.calendar)}if(null!=this.eventDefId){e.id=a.default.normalizeId(e.rawId=this.eventDefId)}if(this.className){e.className=this.className}if(this.verbatimStandardProps){l.default.copyVerbatimStandardProps(this.verbatimStandardProps,e)}if(this.miscProps){e.applyMiscProps(this.miscProps)}if(t){return function(){e.dateProfile=t}}else{return function(){}}};e.prototype.setDateMutation=function(e){if(e&&!e.isEmpty()){this.dateMutation=e}else{this.dateMutation=null}};e.prototype.isEmpty=function(){return!this.dateMutation};return e}();t.default=s},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default={sourceClasses:[],registerClass:function registerClass(e){this.sourceClasses.unshift(e)},parse:function parse(e,t){var o=this.sourceClasses,n,r;for(n=0;n<o.length;n++){r=o[n].parse(e,t);if(r){return r}}}}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(3),a=o(4),i=o(33),l=function(e){n.__extends(t,e);function t(t){var o=e.call(this)||this;t=t||{};o.overflowX=t.overflowX||t.overflow||"auto";o.overflowY=t.overflowY||t.overflow||"auto";return o}t.prototype.render=function(){this.el=this.renderEl();this.applyOverflow()};t.prototype.renderEl=function(){return this.scrollEl=r("<div class=\"fc-scroller\"></div>")};t.prototype.clear=function(){this.setHeight("auto");this.applyOverflow()};t.prototype.destroy=function(){this.el.remove()};t.prototype.applyOverflow=function(){this.scrollEl.css({"overflow-x":this.overflowX,"overflow-y":this.overflowY})};t.prototype.lockOverflow=function(e){var t=this.overflowX,o=this.overflowY;e=e||this.getScrollbarWidths();if("auto"===t){t=e.top||e.bottom||this.scrollEl[0].scrollWidth-1>this.scrollEl[0].clientWidth?"scroll":"hidden"}if("auto"===o){o=e.left||e.right||this.scrollEl[0].scrollHeight-1>this.scrollEl[0].clientHeight?"scroll":"hidden"}this.scrollEl.css({"overflow-x":t,"overflow-y":o})};t.prototype.setHeight=function(e){this.scrollEl.height(e)};t.prototype.getScrollTop=function(){return this.scrollEl.scrollTop()};t.prototype.setScrollTop=function(e){this.scrollEl.scrollTop(e)};t.prototype.getClientWidth=function(){return this.scrollEl[0].clientWidth};t.prototype.getClientHeight=function(){return this.scrollEl[0].clientHeight};t.prototype.getScrollbarWidths=function(){return a.getScrollbarWidths(this.scrollEl)};return t}(i.default);t.default=l},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(3),i=o(4),l=o(219),s=o(21),d=function(e){n.__extends(t,e);function t(t,o){var n=e.call(this,t,o)||this;n.segSelector=".fc-event-container > *";if(n.dateSelectingClass){n.dateClicking=new n.dateClickingClass(n)}if(n.dateSelectingClass){n.dateSelecting=new n.dateSelectingClass(n)}if(n.eventPointingClass){n.eventPointing=new n.eventPointingClass(n)}if(n.eventDraggingClass&&n.eventPointing){n.eventDragging=new n.eventDraggingClass(n,n.eventPointing)}if(n.eventResizingClass&&n.eventPointing){n.eventResizing=new n.eventResizingClass(n,n.eventPointing)}if(n.externalDroppingClass){n.externalDropping=new n.externalDroppingClass(n)}return n}t.prototype.setElement=function(t){e.prototype.setElement.call(this,t);if(this.dateClicking){this.dateClicking.bindToEl(t)}if(this.dateSelecting){this.dateSelecting.bindToEl(t)}this.bindAllSegHandlersToEl(t)};t.prototype.removeElement=function(){this.endInteractions();e.prototype.removeElement.call(this)};t.prototype.executeEventUnrender=function(){this.endInteractions();e.prototype.executeEventUnrender.call(this)};t.prototype.bindGlobalHandlers=function(){e.prototype.bindGlobalHandlers.call(this);if(this.externalDropping){this.externalDropping.bindToDocument()}};t.prototype.unbindGlobalHandlers=function(){e.prototype.unbindGlobalHandlers.call(this);if(this.externalDropping){this.externalDropping.unbindFromDocument()}};t.prototype.bindDateHandlerToEl=function(e,t,o){var n=this;this.el.on(t,function(e){if(!r(e.target).is(n.segSelector+":not(.fc-helper),"+n.segSelector+":not(.fc-helper) *,.fc-more,a[data-goto]")){return o.call(n,e)}})};t.prototype.bindAllSegHandlersToEl=function(e){[this.eventPointing,this.eventDragging,this.eventResizing].forEach(function(t){if(t){t.bindToEl(e)}})};t.prototype.bindSegHandlerToEl=function(e,t,o){var n=this;e.on(t,this.segSelector,function(e){var t=r(e.currentTarget);if(!t.is(".fc-helper")){var a=t.data("fc-seg");if(a&&!n.shouldIgnoreEventPointing()){return o.call(n,a,e)}}})};t.prototype.shouldIgnoreMouse=function(){return s.default.get().shouldIgnoreMouse()};t.prototype.shouldIgnoreTouch=function(){var e=this._getView();return e.isSelected||e.selectedEvent};t.prototype.shouldIgnoreEventPointing=function(){return this.eventDragging&&this.eventDragging.isDragging||this.eventResizing&&this.eventResizing.isResizing};t.prototype.canStartSelection=function(e,t){return i.getEvIsTouch(t)&&!this.canStartResize(e,t)&&(this.isEventDefDraggable(e.footprint.eventDef)||this.isEventDefResizable(e.footprint.eventDef))};t.prototype.canStartDrag=function(e,t){return!this.canStartResize(e,t)&&this.isEventDefDraggable(e.footprint.eventDef)};t.prototype.canStartResize=function(e,t){var o=this._getView(),n=e.footprint.eventDef;return(!i.getEvIsTouch(t)||o.isEventDefSelected(n))&&this.isEventDefResizable(n)&&r(t.target).is(".fc-resizer")};t.prototype.endInteractions=function(){[this.dateClicking,this.dateSelecting,this.eventPointing,this.eventDragging,this.eventResizing].forEach(function(e){if(e){e.end()}})};t.prototype.isEventDefDraggable=function(e){return this.isEventDefStartEditable(e)};t.prototype.isEventDefStartEditable=function(e){var t=e.isStartExplicitlyEditable();if(null==t){t=this.opt("eventStartEditable");if(null==t){t=this.isEventDefGenerallyEditable(e)}}return t};t.prototype.isEventDefGenerallyEditable=function(e){var t=e.isExplicitlyEditable();if(null==t){t=this.opt("editable")}return t};t.prototype.isEventDefResizableFromStart=function(e){return this.opt("eventResizableFromStart")&&this.isEventDefResizable(e)};t.prototype.isEventDefResizableFromEnd=function(e){return this.isEventDefResizable(e)};t.prototype.isEventDefResizable=function(e){var t=e.isDurationExplicitlyEditable();if(null==t){t=this.opt("eventDurationEditable");if(null==t){t=this.isEventDefGenerallyEditable(e)}}return t};t.prototype.diffDates=function(e,t){if(this.largeUnit){return i.diffByUnit(e,t,this.largeUnit)}else{return i.diffDayTime(e,t)}};t.prototype.isEventInstanceGroupAllowed=function(e){var t=this._getView(),o=this.dateProfile,n=this.eventRangesToEventFootprints(e.getAllEventRanges()),r;for(r=0;r<n.length;r++){if(!o.validUnzonedRange.containsRange(n[r].componentFootprint.unzonedRange)){return!1}}return t.calendar.constraints.isEventInstanceGroupAllowed(e)};t.prototype.isExternalInstanceGroupAllowed=function(e){var t=this._getView(),o=this.dateProfile,n=this.eventRangesToEventFootprints(e.getAllEventRanges()),r;for(r=0;r<n.length;r++){if(!o.validUnzonedRange.containsRange(n[r].componentFootprint.unzonedRange)){return!1}}for(r=0;r<n.length;r++){if(!t.calendar.constraints.isSelectionFootprintAllowed(n[r].componentFootprint)){return!1}}return!0};return t}(l.default);t.default=d},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(3),a=o(0),i=o(4),l=o(218),s=o(221),d=o(40),p=o(21),c=o(5),u=function(e){n.__extends(t,e);function t(t,o){var n=e.call(this,null,o.options)||this;n.batchRenderDepth=0;n.isSelected=!1;n.calendar=t;n.viewSpec=o;n.type=o.type;n.name=n.type;n.initRenderQueue();n.initHiddenDays();n.dateProfileGenerator=new n.dateProfileGeneratorClass(n);n.bindBaseRenderHandlers();n.eventOrderSpecs=i.parseFieldSpecs(n.opt("eventOrder"));if(n.initialize){n.initialize()}return n}t.prototype._getView=function(){return this};t.prototype.opt=function(e){return this.options[e]};t.prototype.initRenderQueue=function(){this.renderQueue=new l.default({event:this.opt("eventRenderWait")});this.renderQueue.on("start",this.onRenderQueueStart.bind(this));this.renderQueue.on("stop",this.onRenderQueueStop.bind(this));this.on("before:change",this.startBatchRender);this.on("change",this.stopBatchRender)};t.prototype.onRenderQueueStart=function(){this.calendar.freezeContentHeight();this.addScroll(this.queryScroll())};t.prototype.onRenderQueueStop=function(){if(this.calendar.updateViewSize()){this.popScroll()}this.calendar.thawContentHeight()};t.prototype.startBatchRender=function(){if(!this.batchRenderDepth++){this.renderQueue.pause()}};t.prototype.stopBatchRender=function(){if(! --this.batchRenderDepth){this.renderQueue.resume()}};t.prototype.requestRender=function(e,t,o){this.renderQueue.queue(e,t,o)};t.prototype.whenSizeUpdated=function(e){if(this.renderQueue.isRunning){this.renderQueue.one("stop",e.bind(this))}else{e.call(this)}};t.prototype.computeTitle=function(e){var t;if(/^(year|month)$/.test(e.currentRangeUnit)){t=e.currentUnzonedRange}else{t=e.activeUnzonedRange}return this.formatRange({start:this.calendar.msToMoment(t.startMs,e.isRangeAllDay),end:this.calendar.msToMoment(t.endMs,e.isRangeAllDay)},e.isRangeAllDay,this.opt("titleFormat")||this.computeTitleFormat(e),this.opt("titleRangeSeparator"))};t.prototype.computeTitleFormat=function(e){var t=e.currentRangeUnit;if("year"===t){return"YYYY"}else if("month"===t){return this.opt("monthYearFormat")}else if(1<e.currentUnzonedRange.as("days")){return"ll"}else{return"LL"}};t.prototype.setDate=function(e){var t=this.get("dateProfile"),o=this.dateProfileGenerator.build(e,void 0,!0);if(!t||!t.activeUnzonedRange.equals(o.activeUnzonedRange)){this.set("dateProfile",o)}};t.prototype.unsetDate=function(){this.unset("dateProfile")};t.prototype.fetchInitialEvents=function(e){var t=this.calendar,o=e.isRangeAllDay&&!this.usesMinMaxTime;return t.requestEvents(t.msToMoment(e.activeUnzonedRange.startMs,o),t.msToMoment(e.activeUnzonedRange.endMs,o))};t.prototype.bindEventChanges=function(){this.listenTo(this.calendar,"eventsReset",this.resetEvents)};t.prototype.unbindEventChanges=function(){this.stopListeningTo(this.calendar,"eventsReset")};t.prototype.setEvents=function(e){this.set("currentEvents",e);this.set("hasEvents",!0)};t.prototype.unsetEvents=function(){this.unset("currentEvents");this.unset("hasEvents")};t.prototype.resetEvents=function(e){this.startBatchRender();this.unsetEvents();this.setEvents(e);this.stopBatchRender()};t.prototype.requestDateRender=function(e){var t=this;this.requestRender(function(){t.executeDateRender(e)},"date","init")};t.prototype.requestDateUnrender=function(){var e=this;this.requestRender(function(){e.executeDateUnrender()},"date","destroy")};t.prototype.executeDateRender=function(t){e.prototype.executeDateRender.call(this,t);if(this.render){this.render()}this.trigger("datesRendered");this.addScroll({isDateInit:!0});this.startNowIndicator()};t.prototype.executeDateUnrender=function(){this.unselect();this.stopNowIndicator();this.trigger("before:datesUnrendered");if(this.destroy){this.destroy()}e.prototype.executeDateUnrender.call(this)};t.prototype.bindBaseRenderHandlers=function(){var e=this;this.on("datesRendered",function(){e.whenSizeUpdated(e.triggerViewRender)});this.on("before:datesUnrendered",function(){e.triggerViewDestroy()})};t.prototype.triggerViewRender=function(){this.publiclyTrigger("viewRender",{context:this,args:[this,this.el]})};t.prototype.triggerViewDestroy=function(){this.publiclyTrigger("viewDestroy",{context:this,args:[this,this.el]})};t.prototype.requestEventsRender=function(e){var t=this;this.requestRender(function(){t.executeEventRender(e);t.whenSizeUpdated(t.triggerAfterEventsRendered)},"event","init")};t.prototype.requestEventsUnrender=function(){var e=this;this.requestRender(function(){e.triggerBeforeEventsDestroyed();e.executeEventUnrender()},"event","destroy")};t.prototype.requestBusinessHoursRender=function(e){var t=this;this.requestRender(function(){t.renderBusinessHours(e)},"businessHours","init")};t.prototype.requestBusinessHoursUnrender=function(){var e=this;this.requestRender(function(){e.unrenderBusinessHours()},"businessHours","destroy")};t.prototype.bindGlobalHandlers=function(){e.prototype.bindGlobalHandlers.call(this);this.listenTo(p.default.get(),{touchstart:this.processUnselect,mousedown:this.handleDocumentMousedown})};t.prototype.unbindGlobalHandlers=function(){e.prototype.unbindGlobalHandlers.call(this);this.stopListeningTo(p.default.get())};t.prototype.startNowIndicator=function(){var e=this,t,o,n;if(this.opt("nowIndicator")){t=this.getNowIndicatorUnit();if(t){o=i.proxy(this,"updateNowIndicator");this.initialNowDate=this.calendar.getNow();this.initialNowQueriedMs=new Date().valueOf();n=this.initialNowDate.clone().startOf(t).add(1,t).valueOf()-this.initialNowDate.valueOf();this.nowIndicatorTimeoutID=setTimeout(function(){e.nowIndicatorTimeoutID=null;o();n=+a.duration(1,t);n=Math.max(100,n);e.nowIndicatorIntervalID=setInterval(o,n)},n)}}};t.prototype.updateNowIndicator=function(){if(this.isDatesRendered&&this.initialNowDate){this.unrenderNowIndicator();this.renderNowIndicator(this.initialNowDate.clone().add(new Date().valueOf()-this.initialNowQueriedMs));this.isNowIndicatorRendered=!0}};t.prototype.stopNowIndicator=function(){if(this.isNowIndicatorRendered){if(this.nowIndicatorTimeoutID){clearTimeout(this.nowIndicatorTimeoutID);this.nowIndicatorTimeoutID=null}if(this.nowIndicatorIntervalID){clearInterval(this.nowIndicatorIntervalID);this.nowIndicatorIntervalID=null}this.unrenderNowIndicator();this.isNowIndicatorRendered=!1}};t.prototype.updateSize=function(t,o,n){if(this.setHeight){this.setHeight(t,o)}else{e.prototype.updateSize.call(this,t,o,n)}this.updateNowIndicator()};t.prototype.addScroll=function(e){var t=this.queuedScroll||(this.queuedScroll={});r.extend(t,e)};t.prototype.popScroll=function(){this.applyQueuedScroll();this.queuedScroll=null};t.prototype.applyQueuedScroll=function(){if(this.queuedScroll){this.applyScroll(this.queuedScroll)}};t.prototype.queryScroll=function(){var e={};if(this.isDatesRendered){r.extend(e,this.queryDateScroll())}return e};t.prototype.applyScroll=function(e){if(e.isDateInit&&this.isDatesRendered){r.extend(e,this.computeInitialDateScroll())}if(this.isDatesRendered){this.applyDateScroll(e)}};t.prototype.computeInitialDateScroll=function(){return{}};t.prototype.queryDateScroll=function(){return{}};t.prototype.applyDateScroll=function(){};t.prototype.reportEventDrop=function(e,t,o,n){var r=this.calendar.eventManager,i=r.mutateEventsWithId(e.def.id,t),l=t.dateMutation;if(l){e.dateProfile=l.buildNewDateProfile(e.dateProfile,this.calendar)}this.triggerEventDrop(e,l&&l.dateDelta||a.duration(),i,o,n)};t.prototype.triggerEventDrop=function(e,t,o,n,r){this.publiclyTrigger("eventDrop",{context:n[0],args:[e.toLegacy(),t,o,r,{},this]})};t.prototype.reportExternalDrop=function(e,t,o,n,r,a){if(t){this.calendar.eventManager.addEventDef(e,o)}this.triggerExternalDrop(e,t,n,r,a)};t.prototype.triggerExternalDrop=function(e,t,o,n,r){this.publiclyTrigger("drop",{context:o[0],args:[e.dateProfile.start.clone(),n,r,this]});if(t){this.publiclyTrigger("eventReceive",{context:this,args:[e.buildInstance().toLegacy(),this]})}};t.prototype.reportEventResize=function(e,t,o,n){var r=this.calendar.eventManager,a=r.mutateEventsWithId(e.def.id,t);e.dateProfile=t.dateMutation.buildNewDateProfile(e.dateProfile,this.calendar);this.triggerEventResize(e,t.dateMutation.endDelta,a,o,n)};t.prototype.triggerEventResize=function(e,t,o,n,r){this.publiclyTrigger("eventResize",{context:n[0],args:[e.toLegacy(),t,o,r,{},this]})};t.prototype.select=function(e,t){this.unselect(t);this.renderSelectionFootprint(e);this.reportSelection(e,t)};t.prototype.renderSelectionFootprint=function(t){if(this.renderSelection){this.renderSelection(t.toLegacy(this.calendar))}else{e.prototype.renderSelectionFootprint.call(this,t)}};t.prototype.reportSelection=function(e,t){this.isSelected=!0;this.triggerSelect(e,t)};t.prototype.triggerSelect=function(e,t){var o=this.calendar.footprintToDateProfile(e);this.publiclyTrigger("select",{context:this,args:[o.start,o.end,t,this]})};t.prototype.unselect=function(e){if(this.isSelected){this.isSelected=!1;if(this.destroySelection){this.destroySelection()}this.unrenderSelection();this.publiclyTrigger("unselect",{context:this,args:[e,this]})}};t.prototype.selectEventInstance=function(e){if(!this.selectedEventInstance||this.selectedEventInstance!==e){this.unselectEventInstance();this.getEventSegs().forEach(function(t){if(t.footprint.eventInstance===e&&t.el){t.el.addClass("fc-selected")}});this.selectedEventInstance=e}};t.prototype.unselectEventInstance=function(){if(this.selectedEventInstance){this.getEventSegs().forEach(function(e){if(e.el){e.el.removeClass("fc-selected")}});this.selectedEventInstance=null}};t.prototype.isEventDefSelected=function(e){return this.selectedEventInstance&&this.selectedEventInstance.def.id===e.id};t.prototype.handleDocumentMousedown=function(e){if(i.isPrimaryMouseButton(e)){this.processUnselect(e)}};t.prototype.processUnselect=function(e){this.processRangeUnselect(e);this.processEventUnselect(e)};t.prototype.processRangeUnselect=function(e){var t;if(this.isSelected&&this.opt("unselectAuto")){t=this.opt("unselectCancel");if(!t||!r(e.target).closest(t).length){this.unselect(e)}}};t.prototype.processEventUnselect=function(e){if(this.selectedEventInstance){if(!r(e.target).closest(".fc-selected").length){this.unselectEventInstance()}}};t.prototype.triggerBaseRendered=function(){this.publiclyTrigger("viewRender",{context:this,args:[this,this.el]})};t.prototype.triggerBaseUnrendered=function(){this.publiclyTrigger("viewDestroy",{context:this,args:[this,this.el]})};t.prototype.triggerDayClick=function(e,t,o){var n=this.calendar.footprintToDateProfile(e);this.publiclyTrigger("dayClick",{context:t,args:[n.start,o,this]})};t.prototype.isDateInOtherMonth=function(){return!1};t.prototype.getUnzonedRangeOption=function(e){var t=this.opt(e);if("function"==typeof t){t=t.apply(null,Array.prototype.slice.call(arguments,1))}if(t){return this.calendar.parseUnzonedRange(t)}};t.prototype.initHiddenDays=function(){var e=this.opt("hiddenDays")||[],t=[],o=0,n;if(!1===this.opt("weekends")){e.push(0,6)}for(n=0;7>n;n++){if(!(t[n]=-1!==r.inArray(n,e))){o++}}if(!o){throw new Error("invalid hiddenDays")}this.isHiddenDayHash=t};t.prototype.trimHiddenDays=function(e){var t=e.getStart(),o=e.getEnd();if(t){t=this.skipHiddenDays(t)}if(o){o=this.skipHiddenDays(o,-1,!0)}if(null===t||null===o||t<o){return new c.default(t,o)}return null};t.prototype.isHiddenDay=function(e){if(a.isMoment(e)){e=e.day()}return this.isHiddenDayHash[e]};t.prototype.skipHiddenDays=function(e,t,o){if(void 0===t){t=1}if(void 0===o){o=!1}var n=e.clone();while(this.isHiddenDayHash[(n.day()+(o?t:0)+7)%7]){n.add(t,"days")}return n};return t}(d.default);t.default=u;u.prototype.usesMinMaxTime=!1;u.prototype.dateProfileGeneratorClass=s.default;u.watch("displayingDates",["isInDom","dateProfile"],function(e){this.requestDateRender(e.dateProfile)},function(){this.requestDateUnrender()});u.watch("displayingBusinessHours",["displayingDates","businessHourGenerator"],function(e){this.requestBusinessHoursRender(e.businessHourGenerator)},function(){this.requestBusinessHoursUnrender()});u.watch("initialEvents",["dateProfile"],function(e){return this.fetchInitialEvents(e.dateProfile)});u.watch("bindingEvents",["initialEvents"],function(e){this.setEvents(e.initialEvents);this.bindEventChanges()},function(){this.unbindEventChanges();this.unsetEvents()});u.watch("displayingEvents",["displayingDates","hasEvents"],function(){this.requestEventsRender(this.get("currentEvents"))},function(){this.requestEventsUnrender()});u.watch("title",["dateProfile"],function(e){return this.title=this.computeTitle(e.dateProfile)});u.watch("legacyDateProps",["dateProfile"],function(e){var t=this.calendar,o=e.dateProfile;this.start=t.msToMoment(o.activeUnzonedRange.startMs,o.isRangeAllDay);this.end=t.msToMoment(o.activeUnzonedRange.endMs,o.isRangeAllDay);this.intervalStart=t.msToMoment(o.currentUnzonedRange.startMs,o.isRangeAllDay);this.intervalEnd=t.msToMoment(o.currentUnzonedRange.endMs,o.isRangeAllDay)})},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(3),r=o(4),a=function(){function e(e,t){this.view=e._getView();this.component=e;this.fillRenderer=t}e.prototype.opt=function(e){return this.view.opt(e)};e.prototype.rangeUpdated=function(){var e,t;this.eventTimeFormat=this.opt("eventTimeFormat")||this.opt("timeFormat")||this.computeEventTimeFormat();e=this.opt("displayEventTime");if(null==e){e=this.computeDisplayEventTime()}t=this.opt("displayEventEnd");if(null==t){t=this.computeDisplayEventEnd()}this.displayEventTime=e;this.displayEventEnd=t};e.prototype.render=function(e){var t=this.component._getDateProfile(),o,n,r,a=[],i=[];for(o in e){n=e[o];r=n.sliceRenderRanges(t.activeUnzonedRange);if(n.getEventDef().hasBgRendering()){a.push.apply(a,r)}else{i.push.apply(i,r)}}this.renderBgRanges(a);this.renderFgRanges(i)};e.prototype.unrender=function(){this.unrenderBgRanges();this.unrenderFgRanges()};e.prototype.renderFgRanges=function(e){var t=this.component.eventRangesToEventFootprints(e),o=this.component.eventFootprintsToSegs(t);o=this.renderFgSegEls(o);if(!1!==this.renderFgSegs(o)){this.fgSegs=o}};e.prototype.unrenderFgRanges=function(){this.unrenderFgSegs(this.fgSegs||[]);this.fgSegs=null};e.prototype.renderBgRanges=function(e){var t=this.component.eventRangesToEventFootprints(e),o=this.component.eventFootprintsToSegs(t);if(!1!==this.renderBgSegs(o)){this.bgSegs=o}};e.prototype.unrenderBgRanges=function(){this.unrenderBgSegs();this.bgSegs=null};e.prototype.getSegs=function(){return(this.bgSegs||[]).concat(this.fgSegs||[])};e.prototype.renderFgSegs=function(){return!1};e.prototype.unrenderFgSegs=function(){};e.prototype.renderBgSegs=function(e){var t=this;if(this.fillRenderer){this.fillRenderer.renderSegs("bgEvent",e,{getClasses:function getClasses(e){return t.getBgClasses(e.footprint.eventDef)},getCss:function getCss(e){return{"background-color":t.getBgColor(e.footprint.eventDef)}},filterEl:function filterEl(e,o){return t.filterEventRenderEl(e.footprint,o)}})}else{return!1}};e.prototype.unrenderBgSegs=function(){if(this.fillRenderer){this.fillRenderer.unrender("bgEvent")}};e.prototype.renderFgSegEls=function(e,t){var o=this;if(void 0===t){t=!1}var r=this.view.hasPublicHandlers("eventRender"),a="",l=[],s;if(e.length){for(s=0;s<e.length;s++){this.beforeFgSegHtml(e[s]);a+=this.fgSegHtml(e[s],t)}n(a).each(function(t,a){var i=e[t],s=n(a);if(r){s=o.filterEventRenderEl(i.footprint,s)}if(s){s.data("fc-seg",i);i.el=s;l.push(i)}})}return l};e.prototype.beforeFgSegHtml=function(){};e.prototype.fgSegHtml=function(){};e.prototype.getSegClasses=function(e,t,o){var n=["fc-event",e.isStart?"fc-start":"fc-not-start",e.isEnd?"fc-end":"fc-not-end"].concat(this.getClasses(e.footprint.eventDef));if(t){n.push("fc-draggable")}if(o){n.push("fc-resizable")}if(this.view.isEventDefSelected(e.footprint.eventDef)){n.push("fc-selected")}return n};e.prototype.filterEventRenderEl=function(e,t){var o=e.getEventLegacy(),r=this.view.publiclyTrigger("eventRender",{context:o,args:[o,t,this.view]});if(!1===r){t=null}else if(r&&!0!==r){t=n(r)}return t};e.prototype.getTimeText=function(e,t,o){return this._getTimeText(e.eventInstance.dateProfile.start,e.eventInstance.dateProfile.end,e.componentFootprint.isAllDay,t,o)};e.prototype._getTimeText=function(e,t,o,n,r){if(null==n){n=this.eventTimeFormat}if(null==r){r=this.displayEventEnd}if(this.displayEventTime&&!o){if(r&&t){return this.view.formatRange({start:e,end:t},!1,n)}else{return e.format(n)}}return""};e.prototype.computeEventTimeFormat=function(){return this.opt("smallTimeFormat")};e.prototype.computeDisplayEventTime=function(){return!0};e.prototype.computeDisplayEventEnd=function(){return!0};e.prototype.getBgClasses=function(e){var t=this.getClasses(e);t.push("fc-bgevent");return t};e.prototype.getClasses=function(e){var t=this.getStylingObjs(e),o,n=[];for(o=0;o<t.length;o++){n.push.apply(n,t[o].eventClassName||t[o].className||[])}return n};e.prototype.getSkinCss=function(e){return{"background-color":this.getBgColor(e),"border-color":this.getBorderColor(e),color:this.getTextColor(e)}};e.prototype.getBgColor=function(e){var t=this.getStylingObjs(e),o,n;for(o=0;o<t.length&&!n;o++){n=t[o].eventBackgroundColor||t[o].eventColor||t[o].backgroundColor||t[o].color}if(!n){n=this.opt("eventBackgroundColor")||this.opt("eventColor")}return n};e.prototype.getBorderColor=function(e){var t=this.getStylingObjs(e),o,n;for(o=0;o<t.length&&!n;o++){n=t[o].eventBorderColor||t[o].eventColor||t[o].borderColor||t[o].color}if(!n){n=this.opt("eventBorderColor")||this.opt("eventColor")}return n};e.prototype.getTextColor=function(e){var t=this.getStylingObjs(e),o,n;for(o=0;o<t.length&&!n;o++){n=t[o].eventTextColor||t[o].textColor}if(!n){n=this.opt("eventTextColor")}return n};e.prototype.getStylingObjs=function(e){var t=this.getFallbackStylingObjs(e);t.unshift(e);return t};e.prototype.getFallbackStylingObjs=function(e){return[e.source]};e.prototype.sortEventSegs=function(e){e.sort(r.proxy(this,"compareEventSegs"))};e.prototype.compareEventSegs=function(e,t){var o=e.footprint,n=t.footprint,a=o.componentFootprint,i=n.componentFootprint,l=a.unzonedRange,s=i.unzonedRange;return l.startMs-s.startMs||s.endMs-s.startMs-(l.endMs-l.startMs)||i.isAllDay-a.isAllDay||r.compareByFieldSpecs(o.eventDef,n.eventDef,this.view.eventOrderSpecs,o.eventDef.miscProps,n.eventDef.miscProps)};return e}();t.default=a},,,,,function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var y=o(10);y.newMomentProto.format=function(){if(this._fullCalendar&&arguments[0]){return r(this,arguments[0])}if(this._ambigTime){return y.oldMomentFormat(n(this),"YYYY-MM-DD")}if(this._ambigZone){return y.oldMomentFormat(n(this),"YYYY-MM-DD[T]HH:mm:ss")}if(this._fullCalendar){return y.oldMomentFormat(n(this))}return y.oldMomentProto.format.apply(this,arguments)};y.newMomentProto.toISOString=function(){if(this._ambigTime){return y.oldMomentFormat(n(this),"YYYY-MM-DD")}if(this._ambigZone){return y.oldMomentFormat(n(this),"YYYY-MM-DD[T]HH:mm:ss")}if(this._fullCalendar){return y.oldMomentProto.toISOString.apply(n(this),arguments)}return y.oldMomentProto.toISOString.apply(this,arguments)};function n(e){if("en"!==e.locale()){return e.clone().locale("en")}return e}var m="\x1F",v="\x1E",h=new RegExp(v+"([^"+v+"]*)"+v,"g"),D={t:function t(e){return y.oldMomentFormat(e,"a").charAt(0)},T:function T(e){return y.oldMomentFormat(e,"A").charAt(0)}},b={Y:{value:1,unit:"year"},M:{value:2,unit:"month"},W:{value:3,unit:"week"},w:{value:3,unit:"week"},D:{value:4,unit:"day"},d:{value:4,unit:"day"}};function r(e,t){return u(i(t).fakeFormatString,e)}t.formatDate=r;t.formatRange=function(e,t,o,n,r){var l;e=y.default.parseZone(e);t=y.default.parseZone(t);l=e.localeData();o=l.longDateFormat(o)||o;return a(i(o),e,t,n||" - ",r)};function a(e,t,o,n,r){var a=e.sameUnits,i=t.clone().stripZone(),l=o.clone().stripZone(),s=g(e.fakeFormatString,t),d=g(e.fakeFormatString,o),p,c="",u,y="",m,v="",h="",D="";for(p=0;p<a.length&&(!a[p]||i.isSame(l,a[p]));p++){c+=s[p]}for(u=a.length-1;u>p&&(!a[u]||i.isSame(l,a[u]));u--){if(u-1===p&&"."===s[u]){break}y=s[u]+y}for(m=p;m<=u;m++){v+=s[m];h+=d[m]}if(v||h){if(r){D=h+n+v}else{D=v+n+h}}return f(c+D+y)}var w={};function i(e){return w[e]||(w[e]=l(e))}function l(e){var t=s(e);return{fakeFormatString:p(t),sameUnits:c(t)}}function s(e){var t=[],o;while(o=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g.exec(e)){if(o[1]){t.push.apply(t,d(o[1]))}else if(o[2]){t.push({maybe:s(o[2])})}else if(o[3]){t.push({token:o[3]})}else if(o[5]){t.push.apply(t,d(o[5]))}}return t}function d(e){if(". "===e){return["."," "]}else{return[e]}}function p(e){var t=[],o,n;for(o=0;o<e.length;o++){n=e[o];if("string"==typeof n){t.push("["+n+"]")}else if(n.token){if(n.token in D){t.push(m+"["+n.token+"]")}else{t.push(n.token)}}else if(n.maybe){t.push(v+p(n.maybe)+v)}}return t.join("\x0B")}function c(e){var t=[],o,n,r;for(o=0;o<e.length;o++){n=e[o];if(n.token){r=b[n.token.charAt(0)];t.push(r?r.unit:"second")}else if(n.maybe){t.push.apply(t,c(n.maybe))}else{t.push(null)}}return t}function u(e,t){return f(g(e,t).join(""))}function g(e,t){var o=[],n=y.oldMomentFormat(t,e),r=n.split("\x0B"),a,l;for(a=0;a<r.length;a++){l=r[a];if(l.charAt(0)===m){o.push(D[l.substring(1)](t))}else{o.push(l)}}return o}function f(e){return e.replace(h,function(e,t){if(t.match(/[1-9]/)){return t}else{return""}})}t.queryMostGranularFormatUnit=function(e){var t=s(e),o,n,r,a;for(o=0;o<t.length;o++){n=t[o];if(n.token){r=b[n.token.charAt(0)];if(r){if(!a||r.value>a.value){a=r}}}}if(a){return a.unit}return null}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(33),a=o(11),i=o(7),l=function(e){n.__extends(t,e);function t(){var t=e.call(this)||this;t._watchers={};t._props={};t.applyGlobalWatchers();t.constructed();return t}t.watch=function(e){for(var t=[],o=1;o<arguments.length;o++){t[o-1]=arguments[o]}if(!this.prototype.hasOwnProperty("_globalWatchArgs")){this.prototype._globalWatchArgs=Object.create(this.prototype._globalWatchArgs)}this.prototype._globalWatchArgs[e]=t};t.prototype.constructed=function(){};t.prototype.applyGlobalWatchers=function(){var e=this._globalWatchArgs,t;for(t in e){this.watch.apply(this,[t].concat(e[t]))}};t.prototype.has=function(e){return e in this._props};t.prototype.get=function(e){if(e===void 0){return this._props}return this._props[e]};t.prototype.set=function(e,t){var o;if("string"==typeof e){o={};o[e]=t===void 0?null:t}else{o=e}this.setProps(o)};t.prototype.reset=function(e){var t=this._props,o={},n;for(n in t){o[n]=void 0}for(n in e){o[n]=e[n]}this.setProps(o)};t.prototype.unset=function(e){var t={},o,n;if("string"==typeof e){o=[e]}else{o=e}for(n=0;n<o.length;n++){t[o[n]]=void 0}this.setProps(t)};t.prototype.setProps=function(e){var t={},o=0,n,r;for(n in e){r=e[n];if("object"===_typeof(r)||r!==this._props[n]){t[n]=r;o++}}if(o){this.trigger("before:batchChange",t);for(n in t){r=t[n];this.trigger("before:change",n,r);this.trigger("before:change:"+n,r)}for(n in t){r=t[n];if(r===void 0){delete this._props[n]}else{this._props[n]=r}this.trigger("change:"+n,r);this.trigger("change",n,r)}this.trigger("batchChange",t)}};t.prototype.watch=function(e,t,o,n){var r=this;this.unwatch(e);this._watchers[e]=this._watchDeps(t,function(t){var n=o.call(r,t);if(n&&n.then){r.unset(e);n.then(function(t){r.set(e,t)})}else{r.set(e,n)}},function(t){r.unset(e);if(n){n.call(r,t)}})};t.prototype.unwatch=function(e){var t=this._watchers[e];if(t){delete this._watchers[e];t.teardown()}};t.prototype._watchDeps=function(e,t,o){var n=this,r=0,a=e.length,l=0,s={},d=[],p=!1,c=function(){r++;if(1===r){if(l===a){p=!0;o(s);p=!1}}},u=function(e,o,n){if(o===void 0){if(!n&&s[e]!==void 0){l--}delete s[e]}else{if(!n&&s[e]===void 0){l++}s[e]=o}r--;if(!r){if(l===a){if(!p){t(s)}}}},g=function(e,t){n.on(e,t);d.push([e,t])};e.forEach(function(e){var t=!1;if("?"===e.charAt(0)){e=e.substring(1);t=!0}g("before:change:"+e,function(o){c(e,o,t)});g("change:"+e,function(o){u(e,o,t)})});e.forEach(function(e){var t=!1;if("?"===e.charAt(0)){e=e.substring(1);t=!0}if(n.has(e)){s[e]=n.get(e);l++}else if(t){l++}});if(l===a){t(s)}return{teardown:function teardown(){for(var e=0;e<d.length;e++){n.off(d[e][0],d[e][1])}d=null;if(l===a){o()}},flash:function flash(){if(l===a){o();t(s)}}}};t.prototype.flash=function(e){var t=this._watchers[e];if(t){t.flash()}};return t}(r.default);t.default=l;l.prototype._globalWatchArgs={};a.default.mixInto(l);i.default.mixInto(l)},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),r=o(4),a=o(13),i=o(210);t.default={parse:function parse(e,t){if(r.isTimeString(e.start)||n.isDuration(e.start)||r.isTimeString(e.end)||n.isDuration(e.end)){return i.default.parse(e,t)}else{return a.default.parse(e,t)}}}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(4),r=o(17),a=function(){function e(){this.clearEnd=!1;this.forceTimed=!1;this.forceAllDay=!1}e.createFromDiff=function(t,o,r){var i=t.end&&!o.end,l=t.isAllDay()&&!o.isAllDay(),s=!t.isAllDay()&&o.isAllDay(),d,p,c,u;function a(e,t){if(r){return n.diffByUnit(e,t,r)}else if(o.isAllDay()){return n.diffDay(e,t)}else{return n.diffDayTime(e,t)}}d=a(o.start,t.start);if(o.end){p=a(o.unzonedRange.getEnd(),t.unzonedRange.getEnd());c=p.subtract(d)}u=new e;u.clearEnd=i;u.forceTimed=l;u.forceAllDay=s;u.setDateDelta(d);u.setEndDelta(c);return u};e.prototype.buildNewDateProfile=function(e,t){var o=e.start.clone(),n=null,a=!1;if(e.end&&!this.clearEnd){n=e.end.clone()}else if(this.endDelta&&!n){n=t.getDefaultEventEnd(e.isAllDay(),o)}if(this.forceTimed){a=!0;if(!o.hasTime()){o.time(0)}if(n&&!n.hasTime()){n.time(0)}}else if(this.forceAllDay){if(o.hasTime()){o.stripTime()}if(n&&n.hasTime()){n.stripTime()}}if(this.dateDelta){a=!0;o.add(this.dateDelta);if(n){n.add(this.dateDelta)}}if(this.endDelta){a=!0;n.add(this.endDelta)}if(this.startDelta){a=!0;o.add(this.startDelta)}if(a){o=t.applyTimezone(o);if(n){n=t.applyTimezone(n)}}if(!n&&t.opt("forceEventDuration")){n=t.getDefaultEventEnd(e.isAllDay(),o)}return new r.default(o,n,t)};e.prototype.setDateDelta=function(e){if(e&&e.valueOf()){this.dateDelta=e}else{this.dateDelta=null}};e.prototype.setStartDelta=function(e){if(e&&e.valueOf()){this.startDelta=e}else{this.startDelta=null}};e.prototype.setEndDelta=function(e){if(e&&e.valueOf()){this.endDelta=e}else{this.endDelta=null}};e.prototype.isEmpty=function(){return!this.clearEnd&&!this.forceTimed&&!this.forceAllDay&&!this.dateDelta&&!this.startDelta&&!this.endDelta};return e}();t.default=a},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(213),r=o(214),a={};t.defineThemeSystem=function(e,t){a[e]=t};t.getThemeSystemClass=function(e){if(!e){return n.default}else if(!0===e){return r.default}else{return a[e]}}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(3),a=o(4),l=o(20),s=o(6),d=o(13),p=function(e){n.__extends(t,e);function t(t){var o=e.call(this,t)||this;o.eventDefs=[];return o}t.parse=function(e,t){var o;if(r.isArray(e.events)){o=e}else if(r.isArray(e)){o={events:e}}if(o){return s.default.parse.call(this,o,t)}return!1};t.prototype.setRawEventDefs=function(e){this.rawEventDefs=e;this.eventDefs=this.parseEventDefs(e)};t.prototype.fetch=function(e,t,o){var n=this.eventDefs,r;if(null!=this.currentTimezone&&this.currentTimezone!==o){for(r=0;r<n.length;r++){if(n[r]instanceof d.default){n[r].rezone()}}}this.currentTimezone=o;return l.default.resolve(n)};t.prototype.addEventDef=function(e){this.eventDefs.push(e)};t.prototype.removeEventDefsById=function(e){return a.removeMatching(this.eventDefs,function(t){return t.id===e})};t.prototype.removeAllEventDefs=function(){this.eventDefs=[]};t.prototype.getPrimitive=function(){return this.rawEventDefs};t.prototype.applyManualStandardProps=function(t){var o=e.prototype.applyManualStandardProps.call(this,t);this.setRawEventDefs(t.events);return o};return t}(s.default);t.default=p;p.defineStandardProps({events:!1})},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(3),r=o(4),a=function(){function e(e){this.isHorizontal=!1;this.isVertical=!1;this.els=n(e.els);this.isHorizontal=e.isHorizontal;this.isVertical=e.isVertical;this.forcedOffsetParentEl=e.offsetParent?n(e.offsetParent):null}e.prototype.build=function(){var e=this.forcedOffsetParentEl;if(!e&&0<this.els.length){e=this.els.eq(0).offsetParent()}this.origin=e?e.offset():null;this.boundingRect=this.queryBoundingRect();if(this.isHorizontal){this.buildElHorizontals()}if(this.isVertical){this.buildElVerticals()}};e.prototype.clear=function(){this.origin=null;this.boundingRect=null;this.lefts=null;this.rights=null;this.tops=null;this.bottoms=null};e.prototype.ensureBuilt=function(){if(!this.origin){this.build()}};e.prototype.buildElHorizontals=function(){var e=[],t=[];this.els.each(function(o,r){var a=n(r),i=a.offset().left,l=a.outerWidth();e.push(i);t.push(i+l)});this.lefts=e;this.rights=t};e.prototype.buildElVerticals=function(){var e=[],t=[];this.els.each(function(o,r){var a=n(r),i=a.offset().top,l=a.outerHeight();e.push(i);t.push(i+l)});this.tops=e;this.bottoms=t};e.prototype.getHorizontalIndex=function(e){this.ensureBuilt();var t=this.lefts,o=this.rights,n=t.length,r;for(r=0;r<n;r++){if(e>=t[r]&&e<o[r]){return r}}};e.prototype.getVerticalIndex=function(e){this.ensureBuilt();var t=this.tops,o=this.bottoms,n=t.length,r;for(r=0;r<n;r++){if(e>=t[r]&&e<o[r]){return r}}};e.prototype.getLeftOffset=function(e){this.ensureBuilt();return this.lefts[e]};e.prototype.getLeftPosition=function(e){this.ensureBuilt();return this.lefts[e]-this.origin.left};e.prototype.getRightOffset=function(e){this.ensureBuilt();return this.rights[e]};e.prototype.getRightPosition=function(e){this.ensureBuilt();return this.rights[e]-this.origin.left};e.prototype.getWidth=function(e){this.ensureBuilt();return this.rights[e]-this.lefts[e]};e.prototype.getTopOffset=function(e){this.ensureBuilt();return this.tops[e]};e.prototype.getTopPosition=function(e){this.ensureBuilt();return this.tops[e]-this.origin.top};e.prototype.getBottomOffset=function(e){this.ensureBuilt();return this.bottoms[e]};e.prototype.getBottomPosition=function(e){this.ensureBuilt();return this.bottoms[e]-this.origin.top};e.prototype.getHeight=function(e){this.ensureBuilt();return this.bottoms[e]-this.tops[e]};e.prototype.queryBoundingRect=function(){var e;if(0<this.els.length){e=r.getScrollParent(this.els.eq(0));if(!e.is(document)){return r.getClientRect(e)}}return null};e.prototype.isPointInBounds=function(e,t){return this.isLeftInBounds(e)&&this.isTopInBounds(t)};e.prototype.isLeftInBounds=function(e){return!this.boundingRect||e>=this.boundingRect.left&&e<this.boundingRect.right};e.prototype.isTopInBounds=function(e){return!this.boundingRect||e>=this.boundingRect.top&&e<this.boundingRect.bottom};return e}();t.default=a},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(3),r=o(4),a=o(7),i=o(21),l=function(){function e(e){this.isInteracting=!1;this.isDistanceSurpassed=!1;this.isDelayEnded=!1;this.isDragging=!1;this.isTouch=!1;this.isGeneric=!1;this.shouldCancelTouchScroll=!0;this.scrollAlwaysKills=!1;this.isAutoScroll=!1;this.scrollSensitivity=30;this.scrollSpeed=200;this.scrollIntervalMs=50;this.options=e||{}}e.prototype.startInteraction=function(e,t){if(void 0===t){t={}}if("mousedown"===e.type){if(i.default.get().shouldIgnoreMouse()){return}else if(!r.isPrimaryMouseButton(e)){return}else{e.preventDefault()}}if(!this.isInteracting){this.delay=r.firstDefined(t.delay,this.options.delay,0);this.minDistance=r.firstDefined(t.distance,this.options.distance,0);this.subjectEl=this.options.subjectEl;r.preventSelection(n("body"));this.isInteracting=!0;this.isTouch=r.getEvIsTouch(e);this.isGeneric="dragstart"===e.type;this.isDelayEnded=!1;this.isDistanceSurpassed=!1;this.originX=r.getEvX(e);this.originY=r.getEvY(e);this.scrollEl=r.getScrollParent(n(e.target));this.bindHandlers();this.initAutoScroll();this.handleInteractionStart(e);this.startDelay(e);if(!this.minDistance){this.handleDistanceSurpassed(e)}}};e.prototype.handleInteractionStart=function(e){this.trigger("interactionStart",e)};e.prototype.endInteraction=function(e,t){if(this.isInteracting){this.endDrag(e);if(this.delayTimeoutId){clearTimeout(this.delayTimeoutId);this.delayTimeoutId=null}this.destroyAutoScroll();this.unbindHandlers();this.isInteracting=!1;this.handleInteractionEnd(e,t);r.allowSelection(n("body"))}};e.prototype.handleInteractionEnd=function(e,t){this.trigger("interactionEnd",e,t||!1)};e.prototype.bindHandlers=function(){var e=i.default.get();if(this.isGeneric){this.listenTo(n(document),{drag:this.handleMove,dragstop:this.endInteraction})}else if(this.isTouch){this.listenTo(e,{touchmove:this.handleTouchMove,touchend:this.endInteraction,scroll:this.handleTouchScroll})}else{this.listenTo(e,{mousemove:this.handleMouseMove,mouseup:this.endInteraction})}this.listenTo(e,{selectstart:r.preventDefault,contextmenu:r.preventDefault})};e.prototype.unbindHandlers=function(){this.stopListeningTo(i.default.get());this.stopListeningTo(n(document))};e.prototype.startDrag=function(e,t){this.startInteraction(e,t);if(!this.isDragging){this.isDragging=!0;this.handleDragStart(e)}};e.prototype.handleDragStart=function(e){this.trigger("dragStart",e)};e.prototype.handleMove=function(e){var t=r.getEvX(e)-this.originX,o=r.getEvY(e)-this.originY,n=this.minDistance,a;if(!this.isDistanceSurpassed){a=t*t+o*o;if(a>=n*n){this.handleDistanceSurpassed(e)}}if(this.isDragging){this.handleDrag(t,o,e)}};e.prototype.handleDrag=function(e,t,o){this.trigger("drag",e,t,o);this.updateAutoScroll(o)};e.prototype.endDrag=function(e){if(this.isDragging){this.isDragging=!1;this.handleDragEnd(e)}};e.prototype.handleDragEnd=function(e){this.trigger("dragEnd",e)};e.prototype.startDelay=function(e){var t=this;if(this.delay){this.delayTimeoutId=setTimeout(function(){t.handleDelayEnd(e)},this.delay)}else{this.handleDelayEnd(e)}};e.prototype.handleDelayEnd=function(e){this.isDelayEnded=!0;if(this.isDistanceSurpassed){this.startDrag(e)}};e.prototype.handleDistanceSurpassed=function(e){this.isDistanceSurpassed=!0;if(this.isDelayEnded){this.startDrag(e)}};e.prototype.handleTouchMove=function(e){if(this.isDragging&&this.shouldCancelTouchScroll){e.preventDefault()}this.handleMove(e)};e.prototype.handleMouseMove=function(e){this.handleMove(e)};e.prototype.handleTouchScroll=function(e){if(!this.isDragging||this.scrollAlwaysKills){this.endInteraction(e,!0)}};e.prototype.trigger=function(e){for(var t=[],o=1;o<arguments.length;o++){t[o-1]=arguments[o]}if(this.options[e]){this.options[e].apply(this,t)}if(this["_"+e]){this["_"+e].apply(this,t)}};e.prototype.initAutoScroll=function(){var e=this.scrollEl;this.isAutoScroll=this.options.scroll&&e&&!e.is(window)&&!e.is(document);if(this.isAutoScroll){this.listenTo(e,"scroll",r.debounce(this.handleDebouncedScroll,100))}};e.prototype.destroyAutoScroll=function(){this.endAutoScroll();if(this.isAutoScroll){this.stopListeningTo(this.scrollEl,"scroll")}};e.prototype.computeScrollBounds=function(){if(this.isAutoScroll){this.scrollBounds=r.getOuterRect(this.scrollEl)}};e.prototype.updateAutoScroll=function(e){var t=this.scrollSensitivity,o=this.scrollBounds,n,a,i,l,s=0,d=0;if(o){n=(t-(r.getEvY(e)-o.top))/t;a=(t-(o.bottom-r.getEvY(e)))/t;i=(t-(r.getEvX(e)-o.left))/t;l=(t-(o.right-r.getEvX(e)))/t;if(0<=n&&1>=n){s=-1*(n*this.scrollSpeed)}else if(0<=a&&1>=a){s=a*this.scrollSpeed}if(0<=i&&1>=i){d=-1*(i*this.scrollSpeed)}else if(0<=l&&1>=l){d=l*this.scrollSpeed}}this.setScrollVel(s,d)};e.prototype.setScrollVel=function(e,t){this.scrollTopVel=e;this.scrollLeftVel=t;this.constrainScrollVel();if((this.scrollTopVel||this.scrollLeftVel)&&!this.scrollIntervalId){this.scrollIntervalId=setInterval(r.proxy(this,"scrollIntervalFunc"),this.scrollIntervalMs)}};e.prototype.constrainScrollVel=function(){var e=this.scrollEl;if(0>this.scrollTopVel){if(0>=e.scrollTop()){this.scrollTopVel=0}}else if(0<this.scrollTopVel){if(e.scrollTop()+e[0].clientHeight>=e[0].scrollHeight){this.scrollTopVel=0}}if(0>this.scrollLeftVel){if(0>=e.scrollLeft()){this.scrollLeftVel=0}}else if(0<this.scrollLeftVel){if(e.scrollLeft()+e[0].clientWidth>=e[0].scrollWidth){this.scrollLeftVel=0}}};e.prototype.scrollIntervalFunc=function(){var e=this.scrollEl,t=this.scrollIntervalMs/1e3;if(this.scrollTopVel){e.scrollTop(e.scrollTop()+this.scrollTopVel*t)}if(this.scrollLeftVel){e.scrollLeft(e.scrollLeft()+this.scrollLeftVel*t)}this.constrainScrollVel();if(!this.scrollTopVel&&!this.scrollLeftVel){this.endAutoScroll()}};e.prototype.endAutoScroll=function(){if(this.scrollIntervalId){clearInterval(this.scrollIntervalId);this.scrollIntervalId=null;this.handleScrollEnd()}};e.prototype.handleDebouncedScroll=function(){if(!this.scrollIntervalId){this.handleScrollEnd()}};e.prototype.handleScrollEnd=function(){};return e}();t.default=l;a.default.mixInto(l)},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(4),a=o(14),i=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.updateDayTable=function(){var e=this,t=e.view,o=t.calendar,n=o.msToUtcMoment(e.dateProfile.renderUnzonedRange.startMs,!0),r=o.msToUtcMoment(e.dateProfile.renderUnzonedRange.endMs,!0),a=-1,i=[],l=[],s,d,p;while(n.isBefore(r)){if(t.isHiddenDay(n)){i.push(a+.5)}else{a++;i.push(a);l.push(n.clone())}n.add(1,"days")}if(this.breakOnWeeks){d=l[0].day();for(s=1;s<l.length;s++){if(l[s].day()===d){break}}p=Math.ceil(l.length/s)}else{p=1;s=l.length}this.dayDates=l;this.dayIndices=i;this.daysPerRow=s;this.rowCnt=p;this.updateDayTableCols()};t.prototype.updateDayTableCols=function(){this.colCnt=this.computeColCnt();this.colHeadFormat=this.opt("columnHeaderFormat")||this.opt("columnFormat")||this.computeColHeadFormat()};t.prototype.computeColCnt=function(){return this.daysPerRow};t.prototype.getCellDate=function(e,t){return this.dayDates[this.getCellDayIndex(e,t)].clone()};t.prototype.getCellRange=function(e,t){var o=this.getCellDate(e,t),n=o.clone().add(1,"days");return{start:o,end:n}};t.prototype.getCellDayIndex=function(e,t){return e*this.daysPerRow+this.getColDayIndex(t)};t.prototype.getColDayIndex=function(e){if(this.isRTL){return this.colCnt-1-e}else{return e}};t.prototype.getDateDayIndex=function(e){var t=this.dayIndices,o=e.diff(this.dayDates[0],"days");if(0>o){return t[0]-1}else if(o>=t.length){return t[t.length-1]+1}else{return t[o]}};t.prototype.computeColHeadFormat=function(){if(1<this.rowCnt||10<this.colCnt){return"ddd"}else if(1<this.colCnt){return this.opt("dayOfMonthFormat")}else{return"dddd"}};t.prototype.sliceRangeByRow=function(e){var t=this.daysPerRow,o=this.view.computeDayRange(e),n=this.getDateDayIndex(o.start),r=this.getDateDayIndex(o.end.clone().subtract(1,"days")),a=[],i,l,s,d,p;for(i=0;i<this.rowCnt;i++){l=i*t;s=l+t-1;d=Math.max(n,l);p=Math.min(r,s);d=Math.ceil(d);p=Math.floor(p);if(d<=p){a.push({row:i,firstRowDayIndex:d-l,lastRowDayIndex:p-l,isStart:d===n,isEnd:p===r})}}return a};t.prototype.sliceRangeByDay=function(e){var t=this.daysPerRow,o=this.view.computeDayRange(e),n=this.getDateDayIndex(o.start),r=this.getDateDayIndex(o.end.clone().subtract(1,"days")),a=[],l,s,d,p,c,u;for(l=0;l<this.rowCnt;l++){s=l*t;d=s+t-1;for(p=s;p<=d;p++){c=Math.max(n,p);u=Math.min(r,p);c=Math.ceil(c);u=Math.floor(u);if(c<=u){a.push({row:l,firstRowDayIndex:c-s,lastRowDayIndex:u-s,isStart:c===n,isEnd:u===r})}}}return a};t.prototype.renderHeadHtml=function(){var e=this.view.calendar.theme;return"<div class=\"fc-row "+e.getClass("headerRow")+"\"><table class=\""+e.getClass("tableGrid")+"\"><thead>"+this.renderHeadTrHtml()+"</thead></table></div>"};t.prototype.renderHeadIntroHtml=function(){return this.renderIntroHtml()};t.prototype.renderHeadTrHtml=function(){return"<tr>"+(this.isRTL?"":this.renderHeadIntroHtml())+this.renderHeadDateCellsHtml()+(this.isRTL?this.renderHeadIntroHtml():"")+"</tr>"};t.prototype.renderHeadDateCellsHtml=function(){var e=[],t,o;for(t=0;t<this.colCnt;t++){o=this.getCellDate(0,t);e.push(this.renderHeadDateCellHtml(o))}return e.join("")};t.prototype.renderHeadDateCellHtml=function(e,o,n){var a=this,t=a.view,i=a.dateProfile.activeUnzonedRange.containsDate(e),l=["fc-day-header",t.calendar.theme.getClass("widgetHeader")],s;if("function"==typeof a.opt("columnHeaderHtml")){s=a.opt("columnHeaderHtml")(e)}else if("function"==typeof a.opt("columnHeaderText")){s=r.htmlEscape(a.opt("columnHeaderText")(e))}else{s=r.htmlEscape(e.format(a.colHeadFormat))}if(1===a.rowCnt){l=l.concat(a.getDayClasses(e,!0))}else{l.push("fc-"+r.dayIDs[e.day()])}return"<th class=\""+l.join(" ")+"\""+(1===(i&&a.rowCnt)?" data-date=\""+e.format("YYYY-MM-DD")+"\"":"")+(1<o?" colspan=\""+o+"\"":"")+(n?" "+n:"")+">"+(i?t.buildGotoAnchorHtml({date:e,forceOff:1<a.rowCnt||1===a.colCnt},s):s)+"</th>"};t.prototype.renderBgTrHtml=function(e){return"<tr>"+(this.isRTL?"":this.renderBgIntroHtml(e))+this.renderBgCellsHtml(e)+(this.isRTL?this.renderBgIntroHtml(e):"")+"</tr>"};t.prototype.renderBgIntroHtml=function(){return this.renderIntroHtml()};t.prototype.renderBgCellsHtml=function(e){var t=[],o,n;for(o=0;o<this.colCnt;o++){n=this.getCellDate(e,o);t.push(this.renderBgCellHtml(n))}return t.join("")};t.prototype.renderBgCellHtml=function(e,o){var n=this,t=n.view,r=n.dateProfile.activeUnzonedRange.containsDate(e),a=n.getDayClasses(e);a.unshift("fc-day",t.calendar.theme.getClass("widgetContent"));return"<td class=\""+a.join(" ")+"\""+(r?" data-date=\""+e.format("YYYY-MM-DD")+"\"":"")+(o?" "+o:"")+"></td>"};t.prototype.renderIntroHtml=function(){};t.prototype.bookendCells=function(e){var t=this.renderIntroHtml();if(t){if(this.isRTL){e.append(t)}else{e.prepend(t)}}};return t}(a.default);t.default=i},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){this.component=e;this.fillRenderer=t}e.prototype.render=function(e){var t=this.component,o=t._getDateProfile().activeUnzonedRange,n=e.buildEventInstanceGroup(t.hasAllDayBusinessHours,o),r=n?t.eventRangesToEventFootprints(n.sliceRenderRanges(o)):[];this.renderEventFootprints(r)};e.prototype.renderEventFootprints=function(e){var t=this.component.eventFootprintsToSegs(e);this.renderSegs(t);this.segs=t};e.prototype.renderSegs=function(e){if(this.fillRenderer){this.fillRenderer.renderSegs("businessHours",e,{getClasses:function getClasses(){return["fc-nonbusiness","fc-bgevent"]}})}};e.prototype.unrender=function(){if(this.fillRenderer){this.fillRenderer.unrender("businessHours")}this.segs=null};e.prototype.getSegs=function(){return this.segs||[]};return e}();t.default=o},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(3),r=o(4),a=function(){function e(e){this.fillSegTag="div";this.component=e;this.elsByFill={}}e.prototype.renderFootprint=function(e,t,o){this.renderSegs(e,this.component.componentFootprintToSegs(t),o)};e.prototype.renderSegs=function(e,t,o){var n;t=this.buildSegEls(e,t,o);n=this.attachSegEls(e,t);if(n){this.reportEls(e,n)}return t};e.prototype.unrender=function(e){var t=this.elsByFill[e];if(t){t.remove();delete this.elsByFill[e]}};e.prototype.buildSegEls=function(e,t,o){var r=this,a="",l=[],s;if(t.length){for(s=0;s<t.length;s++){a+=this.buildSegHtml(e,t[s],o)}n(a).each(function(e,a){var i=t[e],s=n(a);if(o.filterEl){s=o.filterEl(i,s)}if(s){s=n(s);if(s.is(r.fillSegTag)){i.el=s;l.push(i)}}})}return l};e.prototype.buildSegHtml=function(e,t,o){var n=o.getClasses?o.getClasses(t):[],a=r.cssToStr(o.getCss?o.getCss(t):{});return"<"+this.fillSegTag+(n.length?" class=\""+n.join(" ")+"\"":"")+(a?" style=\""+a+"\"":"")+" />"};e.prototype.attachSegEls=function(){};e.prototype.reportEls=function(e,t){if(this.elsByFill[e]){this.elsByFill[e]=this.elsByFill[e].add(t)}else{this.elsByFill[e]=n(t)}};return e}();t.default=a},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(13),r=o(36),a=o(6),i=function(){function e(e,t){this.view=e._getView();this.component=e;this.eventRenderer=t}e.prototype.renderComponentFootprint=function(e){this.renderEventFootprints([this.fabricateEventFootprint(e)])};e.prototype.renderEventDraggingFootprints=function(e,t,o){this.renderEventFootprints(e,t,"fc-dragging",o?null:this.view.opt("dragOpacity"))};e.prototype.renderEventResizingFootprints=function(e,t){this.renderEventFootprints(e,t,"fc-resizing")};e.prototype.renderEventFootprints=function(e,t,o,n){var r=this.component.eventFootprintsToSegs(e),a;r=this.eventRenderer.renderFgSegEls(r);for(a=0;a<r.length;a++){r[a].el.addClass("fc-helper "+(o||""))}if(null!=n){for(a=0;a<r.length;a++){r[a].el.css("opacity",n)}}this.helperEls=this.renderSegs(r,t)};e.prototype.renderSegs=function(){};e.prototype.unrender=function(){if(this.helperEls){this.helperEls.remove();this.helperEls=null}};e.prototype.fabricateEventFootprint=function(e){var t=this.view.calendar,o=t.footprintToDateProfile(e),i=new n.default(new a.default(t)),l;i.dateProfile=o;l=i.buildInstance();return new r.default(e,i,l)};return e}();t.default=i},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(21),a=o(15),i=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.bindToEl=function(e){var t=this.component;t.bindSegHandlerToEl(e,"click",this.handleClick.bind(this));t.bindSegHandlerToEl(e,"mouseenter",this.handleMouseover.bind(this));t.bindSegHandlerToEl(e,"mouseleave",this.handleMouseout.bind(this))};t.prototype.handleClick=function(e,t){var o=this.component.publiclyTrigger("eventClick",{context:e.el[0],args:[e.footprint.getEventLegacy(),t,this.view]});if(!1===o){t.preventDefault()}};t.prototype.handleMouseover=function(e,t){if(!r.default.get().shouldIgnoreMouse()&&!this.mousedOverSeg){this.mousedOverSeg=e;if(this.view.isEventDefResizable(e.footprint.eventDef)){e.el.addClass("fc-allow-mouse-resize")}this.component.publiclyTrigger("eventMouseover",{context:e.el[0],args:[e.footprint.getEventLegacy(),t,this.view]})}};t.prototype.handleMouseout=function(e,t){if(this.mousedOverSeg){this.mousedOverSeg=null;if(this.view.isEventDefResizable(e.footprint.eventDef)){e.el.removeClass("fc-allow-mouse-resize")}this.component.publiclyTrigger("eventMouseout",{context:e.el[0],args:[e.footprint.getEventLegacy(),t||{},this.view]})}};t.prototype.end=function(){if(this.mousedOverSeg){this.handleMouseout(this.mousedOverSeg)}};return t}(a.default);t.default=i},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(14),a=o(245),i=o(225),l=o(59),s=o(224),d=o(223),p=o(222),c=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}return t}(r.default);t.default=c;c.prototype.dateClickingClass=a.default;c.prototype.dateSelectingClass=i.default;c.prototype.eventPointingClass=l.default;c.prototype.eventDraggingClass=s.default;c.prototype.eventResizingClass=d.default;c.prototype.externalDroppingClass=p.default},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(3),a=o(4),i=o(53),l=o(249),s=o(5),d=o(12),p=o(36),c=o(56),u=o(60),g=o(40),f=o(55),y=o(250),m=o(251),v=o(252),h=function(e){n.__extends(t,e);function t(t){var o=e.call(this,t)||this;o.cellWeekNumbersVisible=!1;o.bottomCoordPadding=0;o.isRigid=!1;o.hasAllDayBusinessHours=!0;return o}t.prototype.componentFootprintToSegs=function(e){var t=this.sliceRangeByRow(e.unzonedRange),o,n;for(o=0;o<t.length;o++){n=t[o];if(this.isRTL){n.leftCol=this.daysPerRow-1-n.lastRowDayIndex;n.rightCol=this.daysPerRow-1-n.firstRowDayIndex}else{n.leftCol=n.firstRowDayIndex;n.rightCol=n.lastRowDayIndex}}return t};t.prototype.renderDates=function(e){this.dateProfile=e;this.updateDayTable();this.renderGrid()};t.prototype.unrenderDates=function(){this.removeSegPopover()};t.prototype.renderGrid=function(){var e=this.view,t=this.rowCnt,o=this.colCnt,n="",r,a;if(this.headContainerEl){this.headContainerEl.html(this.renderHeadHtml())}for(r=0;r<t;r++){n+=this.renderDayRowHtml(r,this.isRigid)}this.el.html(n);this.rowEls=this.el.find(".fc-row");this.cellEls=this.el.find(".fc-day, .fc-disabled-day");this.rowCoordCache=new i.default({els:this.rowEls,isVertical:!0});this.colCoordCache=new i.default({els:this.cellEls.slice(0,this.colCnt),isHorizontal:!0});for(r=0;r<t;r++){for(a=0;a<o;a++){this.publiclyTrigger("dayRender",{context:e,args:[this.getCellDate(r,a),this.getCellEl(r,a),e]})}}};t.prototype.renderDayRowHtml=function(e,t){var o=this.view.calendar.theme,n=["fc-row","fc-week",o.getClass("dayRow")];if(t){n.push("fc-rigid")}return"<div class=\""+n.join(" ")+"\"><div class=\"fc-bg\"><table class=\""+o.getClass("tableGrid")+"\">"+this.renderBgTrHtml(e)+"</table></div><div class=\"fc-content-skeleton\"><table>"+(this.getIsNumbersVisible()?"<thead>"+this.renderNumberTrHtml(e)+"</thead>":"")+"</table></div></div>"};t.prototype.getIsNumbersVisible=function(){return this.getIsDayNumbersVisible()||this.cellWeekNumbersVisible};t.prototype.getIsDayNumbersVisible=function(){return 1<this.rowCnt};t.prototype.renderNumberTrHtml=function(e){return"<tr>"+(this.isRTL?"":this.renderNumberIntroHtml(e))+this.renderNumberCellsHtml(e)+(this.isRTL?this.renderNumberIntroHtml(e):"")+"</tr>"};t.prototype.renderNumberIntroHtml=function(){return this.renderIntroHtml()};t.prototype.renderNumberCellsHtml=function(e){var t=[],o,n;for(o=0;o<this.colCnt;o++){n=this.getCellDate(e,o);t.push(this.renderNumberCellHtml(n))}return t.join("")};t.prototype.renderNumberCellHtml=function(e){var t=this.view,o="",n=this.dateProfile.activeUnzonedRange.containsDate(e),r=this.getIsDayNumbersVisible()&&n,a,i;if(!r&&!this.cellWeekNumbersVisible){return"<td/>"}a=this.getDayClasses(e);a.unshift("fc-day-top");if(this.cellWeekNumbersVisible){if("ISO"===e._locale._fullCalendar_weekCalc){i=1}else{i=e._locale.firstDayOfWeek()}}o+="<td class=\""+a.join(" ")+"\""+(n?" data-date=\""+e.format()+"\"":"")+">";if(this.cellWeekNumbersVisible&&e.day()===i){o+=t.buildGotoAnchorHtml({date:e,type:"week"},{class:"fc-week-number"},e.format("w"))}if(r){o+=t.buildGotoAnchorHtml(e,{class:"fc-day-number"},e.format("D"))}o+="</td>";return o};t.prototype.prepareHits=function(){this.colCoordCache.build();this.rowCoordCache.build();this.rowCoordCache.bottoms[this.rowCnt-1]+=this.bottomCoordPadding};t.prototype.releaseHits=function(){this.colCoordCache.clear();this.rowCoordCache.clear()};t.prototype.queryHit=function(e,t){if(this.colCoordCache.isLeftInBounds(e)&&this.rowCoordCache.isTopInBounds(t)){var o=this.colCoordCache.getHorizontalIndex(e),n=this.rowCoordCache.getVerticalIndex(t);if(null!=n&&null!=o){return this.getCellHit(n,o)}}};t.prototype.getHitFootprint=function(e){var t=this.getCellRange(e.row,e.col);return new d.default(new s.default(t.start,t.end),!0)};t.prototype.getHitEl=function(e){return this.getCellEl(e.row,e.col)};t.prototype.getCellHit=function(e,t){return{row:e,col:t,component:this,left:this.colCoordCache.getLeftOffset(t),right:this.colCoordCache.getRightOffset(t),top:this.rowCoordCache.getTopOffset(e),bottom:this.rowCoordCache.getBottomOffset(e)}};t.prototype.getCellEl=function(e,t){return this.cellEls.eq(e*this.colCnt+t)};t.prototype.executeEventUnrender=function(){this.removeSegPopover();e.prototype.executeEventUnrender.call(this)};t.prototype.getOwnEventSegs=function(){return e.prototype.getOwnEventSegs.call(this).concat(this.popoverSegs||[])};t.prototype.renderDrag=function(e,t,o){var n;for(n=0;n<e.length;n++){this.renderHighlight(e[n].componentFootprint)}if(e.length&&t&&t.component!==this){this.helperRenderer.renderEventDraggingFootprints(e,t,o);return!0}};t.prototype.unrenderDrag=function(){this.unrenderHighlight();this.helperRenderer.unrender()};t.prototype.renderEventResize=function(e,t,o){var n;for(n=0;n<e.length;n++){this.renderHighlight(e[n].componentFootprint)}this.helperRenderer.renderEventResizingFootprints(e,t,o)};t.prototype.unrenderEventResize=function(){this.unrenderHighlight();this.helperRenderer.unrender()};t.prototype.removeSegPopover=function(){if(this.segPopover){this.segPopover.hide()}};t.prototype.limitRows=function(e){var t=this.eventRenderer.rowStructs||[],o,n;for(o=0;o<t.length;o++){this.unlimitRow(o);if(!e){n=!1}else if("number"==typeof e){n=e}else{n=this.computeRowLevelLimit(o)}if(!1!==n){this.limitRow(o,n)}}};t.prototype.computeRowLevelLimit=function(e){var o=this.rowEls.eq(e),n=o.height(),a=this.eventRenderer.rowStructs[e].tbodyEl.children(),l,s,d;function t(e,t){d=Math.max(d,r(t).outerHeight())}for(l=0;l<a.length;l++){s=a.eq(l).removeClass("fc-limited");d=0;s.find("> td > :first-child").each(t);if(s.position().top+d>n){return l}}return!1};t.prototype.limitRow=function(e,t){var o=this,n=this.eventRenderer.rowStructs[e],a=[],l=0,s,d,p,c,u,g,f,y,m,v,h,D,b,w,E,S=function(n){while(l<n){g=o.getCellSegs(e,l,t);if(g.length){m=d[t-1][l];E=o.renderMoreLink(e,l,g);w=r("<div/>").append(E);m.append(w);a.push(w[0])}l++}};if(t&&t<n.segLevels.length){s=n.segLevels[t-1];d=n.cellMatrix;p=n.tbodyEl.children().slice(t).addClass("fc-limited").get();for(c=0;c<s.length;c++){u=s[c];S(u.leftCol);y=[];f=0;while(l<=u.rightCol){g=this.getCellSegs(e,l,t);y.push(g);f+=g.length;l++}if(f){m=d[t-1][u.leftCol];v=m.attr("rowspan")||1;h=[];for(D=0;D<y.length;D++){b=r("<td class=\"fc-more-cell\"/>").attr("rowspan",v);g=y[D];E=this.renderMoreLink(e,u.leftCol+D,[u].concat(g));w=r("<div/>").append(E);b.append(w);h.push(b[0]);a.push(b[0])}m.addClass("fc-limited").after(r(h));p.push(m[0])}}S(this.colCnt);n.moreEls=r(a);n.limitedEls=r(p)}};t.prototype.unlimitRow=function(e){var t=this.eventRenderer.rowStructs[e];if(t.moreEls){t.moreEls.remove();t.moreEls=null}if(t.limitedEls){t.limitedEls.removeClass("fc-limited");t.limitedEls=null}};t.prototype.renderMoreLink=function(e,t,o){var n=this,a=this.view;return r("<a class=\"fc-more\"/>").text(this.getMoreLinkText(o.length)).on("click",function(i){var l=n.opt("eventLimitClick"),s=n.getCellDate(e,t),d=r(i.currentTarget),p=n.getCellEl(e,t),c=n.getCellSegs(e,t),u=n.resliceDaySegs(c,s),g=n.resliceDaySegs(o,s);if("function"==typeof l){l=n.publiclyTrigger("eventLimitClick",{context:a,args:[{date:s.clone(),dayEl:p,moreEl:d,segs:u,hiddenSegs:g},i,a]})}if("popover"===l){n.showSegPopover(e,t,d,u)}else if("string"==typeof l){a.calendar.zoomTo(s,l)}})};t.prototype.showSegPopover=function(e,t,o,n){var r=this,a=this.view,i=o.parent(),s,d;if(1===this.rowCnt){s=a.el}else{s=this.rowEls.eq(e)}d={className:"fc-more-popover "+a.calendar.theme.getClass("popover"),content:this.renderSegPopoverContent(e,t,n),parentEl:a.el,top:s.offset().top,autoHide:!0,viewportConstrain:this.opt("popoverViewportConstrain"),hide:function hide(){if(r.popoverSegs){r.triggerBeforeEventSegsDestroyed(r.popoverSegs)}r.segPopover.removeElement();r.segPopover=null;r.popoverSegs=null}};if(this.isRTL){d.right=i.offset().left+i.outerWidth()+1}else{d.left=i.offset().left-1}this.segPopover=new l.default(d);this.segPopover.show();this.bindAllSegHandlersToEl(this.segPopover.el);this.triggerAfterEventSegsRendered(n)};t.prototype.renderSegPopoverContent=function(e,t,o){var n=this.view,l=n.calendar.theme,s=this.getCellDate(e,t).format(this.opt("dayPopoverFormat")),d=r("<div class=\"fc-header "+l.getClass("popoverHeader")+"\"><span class=\"fc-close "+l.getIconClass("close")+"\"></span><span class=\"fc-title\">"+a.htmlEscape(s)+"</span><div class=\"fc-clear\"/></div><div class=\"fc-body "+l.getClass("popoverContent")+"\"><div class=\"fc-event-container\"></div></div>"),p=d.find(".fc-event-container"),c;o=this.eventRenderer.renderFgSegEls(o,!0);this.popoverSegs=o;for(c=0;c<o.length;c++){this.hitsNeeded();o[c].hit=this.getCellHit(e,t);this.hitsNotNeeded();p.append(o[c].el)}return d};t.prototype.resliceDaySegs=function(e,t){var o=t.clone(),n=o.clone().add(1,"days"),a=new s.default(o,n),l=[],c,u,g;for(c=0;c<e.length;c++){u=e[c];g=u.footprint.componentFootprint.unzonedRange.intersect(a);if(g){l.push(r.extend({},u,{footprint:new p.default(new d.default(g,u.footprint.componentFootprint.isAllDay),u.footprint.eventDef,u.footprint.eventInstance),isStart:u.isStart&&g.isStart,isEnd:u.isEnd&&g.isEnd}))}}this.eventRenderer.sortEventSegs(l);return l};t.prototype.getMoreLinkText=function(e){var t=this.opt("eventLimitText");if("function"==typeof t){return t(e)}else{return"+"+e+" "+t}};t.prototype.getCellSegs=function(e,t,o){var n=this.eventRenderer.rowStructs[e].segMatrix,r=o||0,a=[],i;while(r<n.length){i=n[r][t];if(i){a.push(i)}r++}return a};return t}(g.default);t.default=h;h.prototype.eventRendererClass=y.default;h.prototype.businessHourRendererClass=c.default;h.prototype.helperRendererClass=m.default;h.prototype.fillRendererClass=v.default;u.default.mixInto(h);f.default.mixInto(h)},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var r=o(2),a=o(3),i=o(4),l=o(39),s=o(41),d=o(228),p=o(61),c=function(e){r.__extends(t,e);function t(t,o){var n=e.call(this,t,o)||this;n.dayGrid=n.instantiateDayGrid();n.dayGrid.isRigid=n.hasRigidRows();if(n.opt("weekNumbers")){if(n.opt("weekNumbersWithinDays")){n.dayGrid.cellWeekNumbersVisible=!0;n.dayGrid.colWeekNumbersVisible=!1}else{n.dayGrid.cellWeekNumbersVisible=!1;n.dayGrid.colWeekNumbersVisible=!0}}n.addChild(n.dayGrid);n.scroller=new l.default({overflowX:"hidden",overflowY:"auto"});return n}t.prototype.instantiateDayGrid=function(){var e=n(this.dayGridClass);return new e(this)};t.prototype.executeDateRender=function(t){this.dayGrid.breakOnWeeks=/year|month|week/.test(t.currentRangeUnit);e.prototype.executeDateRender.call(this,t)};t.prototype.renderSkeleton=function(){var e,t;this.el.addClass("fc-basic-view").html(this.renderSkeletonHtml());this.scroller.render();e=this.scroller.el.addClass("fc-day-grid-container");t=a("<div class=\"fc-day-grid\" />").appendTo(e);this.el.find(".fc-body > tr > td").append(e);this.dayGrid.headContainerEl=this.el.find(".fc-head-container");this.dayGrid.setElement(t)};t.prototype.unrenderSkeleton=function(){this.dayGrid.removeElement();this.scroller.destroy()};t.prototype.renderSkeletonHtml=function(){var e=this.calendar.theme;return"<table class=\""+e.getClass("tableGrid")+"\">"+(this.opt("columnHeader")?"<thead class=\"fc-head\"><tr><td class=\"fc-head-container "+e.getClass("widgetHeader")+"\">&nbsp;</td></tr></thead>":"")+"<tbody class=\"fc-body\"><tr><td class=\""+e.getClass("widgetContent")+"\"></td></tr></tbody></table>"};t.prototype.weekNumberStyleAttr=function(){if(null!=this.weekNumberWidth){return"style=\"width:"+this.weekNumberWidth+"px\""}return""};t.prototype.hasRigidRows=function(){var e=this.opt("eventLimit");return e&&"number"!=typeof e};t.prototype.updateSize=function(t,o,n){var r=this.opt("eventLimit"),a=this.dayGrid.headContainerEl.find(".fc-row"),l,s;if(!this.dayGrid.rowEls){if(!o){l=this.computeScrollerHeight(t);this.scroller.setHeight(l)}return}e.prototype.updateSize.call(this,t,o,n);if(this.dayGrid.colWeekNumbersVisible){this.weekNumberWidth=i.matchCellWidths(this.el.find(".fc-week-number"))}this.scroller.clear();i.uncompensateScroll(a);this.dayGrid.removeSegPopover();if(r&&"number"==typeof r){this.dayGrid.limitRows(r)}l=this.computeScrollerHeight(t);this.setGridHeight(l,o);if(r&&"number"!=typeof r){this.dayGrid.limitRows(r)}if(!o){this.scroller.setHeight(l);s=this.scroller.getScrollbarWidths();if(s.left||s.right){i.compensateScroll(a,s);l=this.computeScrollerHeight(t);this.scroller.setHeight(l)}this.scroller.lockOverflow(s)}};t.prototype.computeScrollerHeight=function(e){return e-i.subtractInnerElHeight(this.el,this.scroller.el)};t.prototype.setGridHeight=function(e,t){if(t){i.undistributeHeight(this.dayGrid.rowEls)}else{i.distributeHeight(this.dayGrid.rowEls,e,!0)}};t.prototype.computeInitialDateScroll=function(){return{top:0}};t.prototype.queryDateScroll=function(){return{top:this.scroller.getScrollTop()}};t.prototype.applyDateScroll=function(e){if(e.top!==void 0){this.scroller.setScrollTop(e.top)}};return t}(s.default);t.default=c;c.prototype.dateProfileGeneratorClass=d.default;c.prototype.dayGridClass=p.default;function n(e){return function(e){r.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.colWeekNumbersVisible=!1;return t}t.prototype.renderHeadIntroHtml=function(){var e=this.view;if(this.colWeekNumbersVisible){return"<th class=\"fc-week-number "+e.calendar.theme.getClass("widgetHeader")+"\" "+e.weekNumberStyleAttr()+"><span>"+i.htmlEscape(this.opt("weekNumberTitle"))+"</span></th>"}return""};t.prototype.renderNumberIntroHtml=function(e){var t=this.view,o=this.getCellDate(e,0);if(this.colWeekNumbersVisible){return"<td class=\"fc-week-number\" "+t.weekNumberStyleAttr()+">"+t.buildGotoAnchorHtml({date:o,type:"week",forceOff:1===this.colCnt},o.format("w"))+"</td>"}return""};t.prototype.renderBgIntroHtml=function(){var e=this.view;if(this.colWeekNumbersVisible){return"<td class=\"fc-week-number "+e.calendar.theme.getClass("widgetContent")+"\" "+e.weekNumberStyleAttr()+"></td>"}return""};t.prototype.renderIntroHtml=function(){var e=this.view;if(this.colWeekNumbersVisible){return"<td class=\"fc-week-number\" "+e.weekNumberStyleAttr()+"></td>"}return""};t.prototype.getIsNumbersVisible=function(){return p.default.prototype.getIsNumbersVisible.apply(this,arguments)||this.colWeekNumbersVisible};return t}(e)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var a=o(5),i=o(12),l=o(49),s=o(6),d=o(35),p=function(){function e(e,t){this.eventManager=e;this._calendar=t}e.prototype.opt=function(e){return this._calendar.opt(e)};e.prototype.isEventInstanceGroupAllowed=function(e){var t=e.getEventDef(),o=this.eventRangesToEventFootprints(e.getAllEventRanges()),n,r=this.getPeerEventInstances(t),a=r.map(d.eventInstanceToEventRange),l=this.eventRangesToEventFootprints(a),s=t.getConstraint(),p=t.getOverlap(),c=this.opt("eventAllow");for(n=0;n<o.length;n++){if(!this.isFootprintAllowed(o[n].componentFootprint,l,s,p,o[n].eventInstance)){return!1}}if(c){for(n=0;n<o.length;n++){if(!1===c(o[n].componentFootprint.toLegacy(this._calendar),o[n].getEventLegacy())){return!1}}}return!0};e.prototype.getPeerEventInstances=function(e){return this.eventManager.getEventInstancesWithoutId(e.id)};e.prototype.isSelectionFootprintAllowed=function(e){var t=this.eventManager.getEventInstances(),o=t.map(d.eventInstanceToEventRange),n=this.eventRangesToEventFootprints(o),r;if(this.isFootprintAllowed(e,n,this.opt("selectConstraint"),this.opt("selectOverlap"))){r=this.opt("selectAllow");if(r){return!1!==r(e.toLegacy(this._calendar))}else{return!0}}return!1};e.prototype.isFootprintAllowed=function(e,t,o,a,i){var l,s;if(null!=o){l=this.constraintValToFootprints(o,e.isAllDay);if(!this.isFootprintWithinConstraints(e,l)){return!1}}s=this.collectOverlapEventFootprints(t,e);if(!1===a){if(s.length){return!1}}else if("function"==typeof a){if(!n(s,a,i)){return!1}}if(i){if(!r(s,i)){return!1}}return!0};e.prototype.isFootprintWithinConstraints=function(e,t){var o;for(o=0;o<t.length;o++){if(this.footprintContainsFootprint(t[o],e)){return!0}}return!1};e.prototype.constraintValToFootprints=function(e,t){var o;if("businessHours"===e){return this.buildCurrentBusinessFootprints(t)}else if("object"===_typeof(e)){o=this.parseEventDefToInstances(e);if(!o){return this.parseFootprints(e)}else{return this.eventInstancesToFootprints(o)}}else if(null!=e){o=this.eventManager.getEventInstancesWithId(e);return this.eventInstancesToFootprints(o)}};e.prototype.buildCurrentBusinessFootprints=function(e){var t=this._calendar.view,o=t.get("businessHourGenerator"),n=t.dateProfile.activeUnzonedRange,r=o.buildEventInstanceGroup(e,n);if(r){return this.eventInstancesToFootprints(r.eventInstances)}else{return[]}};e.prototype.eventInstancesToFootprints=function(e){var t=e.map(d.eventInstanceToEventRange),o=this.eventRangesToEventFootprints(t);return o.map(d.eventFootprintToComponentFootprint)};e.prototype.collectOverlapEventFootprints=function(e,t){var o=[],n;for(n=0;n<e.length;n++){if(this.footprintsIntersect(t,e[n].componentFootprint)){o.push(e[n])}}return o};e.prototype.parseEventDefToInstances=function(e){var t=this.eventManager,o=l.default.parse(e,new s.default(this._calendar));if(!o){return!1}return o.buildInstances(t.currentPeriod.unzonedRange)};e.prototype.eventRangesToEventFootprints=function(e){var t,o=[];for(t=0;t<e.length;t++){o.push.apply(o,this.eventRangeToEventFootprints(e[t]))}return o};e.prototype.eventRangeToEventFootprints=function(e){return[d.eventRangeToEventFootprint(e)]};e.prototype.parseFootprints=function(e){var t,o;if(e.start){t=this._calendar.moment(e.start);if(!t.isValid()){t=null}}if(e.end){o=this._calendar.moment(e.end);if(!o.isValid()){o=null}}return[new i.default(new a.default(t,o),t&&!t.hasTime()||o&&!o.hasTime())]};e.prototype.footprintContainsFootprint=function(e,t){return e.unzonedRange.containsRange(t.unzonedRange)};e.prototype.footprintsIntersect=function(e,t){return e.unzonedRange.intersectsWith(t.unzonedRange)};return e}();t.default=p;function n(e,t,o){var n;for(n=0;n<e.length;n++){if(!t(e[n].eventInstance.toLegacy(),o?o.toLegacy():null)){return!1}}return!0}function r(e,t){var o=t.toLegacy(),n,r,a,l;for(n=0;n<e.length;n++){r=e[n].eventInstance;a=r.def;l=a.getOverlap();if(!1===l){return!1}else if("function"==typeof l){if(!l(r.toLegacy(),o)){return!1}}}return!0}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(4),a=o(14),i=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.defineStandardProps=function(e){var t=this.prototype;if(!t.hasOwnProperty("standardPropMap")){t.standardPropMap=Object.create(t.standardPropMap)}r.copyOwnProps(e,t.standardPropMap)};t.copyVerbatimStandardProps=function(e,t){var o=this.prototype.standardPropMap,n;for(n in o){if(null!=e[n]&&!0===o[n]){t[n]=e[n]}}};t.prototype.applyProps=function(e){var t=this.standardPropMap,o={},n={},r;for(r in e){if(!0===t[r]){this[r]=e[r]}else if(!1===t[r]){o[r]=e[r]}else{n[r]=e[r]}}this.applyMiscProps(n);return this.applyManualStandardProps(o)};t.prototype.applyManualStandardProps=function(){return!0};t.prototype.applyMiscProps=function(){};t.prototype.isStandardProp=function(e){return e in this.standardPropMap};return t}(a.default);t.default=i;i.prototype.standardPropMap={}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){this.def=e;this.dateProfile=t}e.prototype.toLegacy=function(){var e=this.dateProfile,t=this.def.toLegacy();t.start=e.start.clone();t.end=e.end?e.end.clone():null;return t};return e}();t.default=o},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(3),a=o(0),i=o(34),l=o(209),s=o(17),d=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.isAllDay=function(){return!this.startTime&&!this.endTime};t.prototype.buildInstances=function(e){var t=this.source.calendar,o=e.getStart(),n=e.getEnd(),r,a,i,d=[];while(o.isBefore(n)){if(!this.dowHash||this.dowHash[o.day()]){r=t.applyTimezone(o);a=r.clone();i=null;if(this.startTime){a.time(this.startTime)}else{a.stripTime()}if(this.endTime){i=r.clone().time(this.endTime)}d.push(new l.default(this,new s.default(a,i,t)))}o.add(1,"days")}return d};t.prototype.setDow=function(e){if(!this.dowHash){this.dowHash={}}for(var t=0;t<e.length;t++){this.dowHash[e[t]]=!0}};t.prototype.clone=function(){var t=e.prototype.clone.call(this);if(t.startTime){t.startTime=a.duration(this.startTime)}if(t.endTime){t.endTime=a.duration(this.endTime)}if(this.dowHash){t.dowHash=r.extend({},this.dowHash)}return t};return t}(i.default);t.default=d;d.prototype.applyProps=function(e){var t=i.default.prototype.applyProps.call(this,e);if(e.start){this.startTime=a.duration(e.start)}if(e.end){this.endTime=a.duration(e.end)}if(e.dow){this.setDow(e.dow)}return t};d.defineStandardProps({start:!1,end:!1,dow:!1})},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t,o){this.unzonedRange=e;this.eventDef=t;if(o){this.eventInstance=o}}}();t.default=o},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(3),r=o(35),a=o(18),i=o(210),l=o(6),s={start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},d=function(){function e(e,t){this.rawComplexDef=e;this.calendar=t}e.prototype.buildEventInstanceGroup=function(e,t){var o=this.buildEventDefs(e),n;if(o.length){n=new a.default(r.eventDefsToEventInstances(o,t));n.explicitEventDef=o[0];return n}};e.prototype.buildEventDefs=function(e){var t=this.rawComplexDef,o=[],r=!1,a,l=[];if(!0===t){o=[{}]}else if(n.isPlainObject(t)){o=[t]}else if(n.isArray(t)){o=t;r=!0}for(a=0;a<o.length;a++){if(!r||o[a].dow){l.push(this.buildEventDef(e,o[a]))}}return l};e.prototype.buildEventDef=function(e,t){var o=n.extend({},s,t);if(e){o.start=null;o.end=null}return i.default.parse(o,new l.default(this.calendar))};return e}();t.default=d},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(19),a=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}return t}(r.default);t.default=a;a.prototype.classes={widget:"fc-unthemed",widgetHeader:"fc-widget-header",widgetContent:"fc-widget-content",buttonGroup:"fc-button-group",button:"fc-button",cornerLeft:"fc-corner-left",cornerRight:"fc-corner-right",stateDefault:"fc-state-default",stateActive:"fc-state-active",stateDisabled:"fc-state-disabled",stateHover:"fc-state-hover",stateDown:"fc-state-down",popoverHeader:"fc-widget-header",popoverContent:"fc-widget-content",headerRow:"fc-widget-header",dayRow:"fc-widget-content",listView:"fc-widget-content"};a.prototype.baseIconClass="fc-icon";a.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-left-single-arrow",next:"fc-icon-right-single-arrow",prevYear:"fc-icon-left-double-arrow",nextYear:"fc-icon-right-double-arrow"};a.prototype.iconOverrideOption="buttonIcons";a.prototype.iconOverrideCustomButtonOption="icon";a.prototype.iconOverridePrefix="fc-icon-"},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(19),a=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}return t}(r.default);t.default=a;a.prototype.classes={widget:"ui-widget",widgetHeader:"ui-widget-header",widgetContent:"ui-widget-content",buttonGroup:"fc-button-group",button:"ui-button",cornerLeft:"ui-corner-left",cornerRight:"ui-corner-right",stateDefault:"ui-state-default",stateActive:"ui-state-active",stateDisabled:"ui-state-disabled",stateHover:"ui-state-hover",stateDown:"ui-state-down",today:"ui-state-highlight",popoverHeader:"ui-widget-header",popoverContent:"ui-widget-content",headerRow:"ui-widget-header",dayRow:"ui-widget-content",listView:"ui-widget-content"};a.prototype.baseIconClass="ui-icon";a.prototype.iconClasses={close:"ui-icon-closethick",prev:"ui-icon-circle-triangle-w",next:"ui-icon-circle-triangle-e",prevYear:"ui-icon-seek-prev",nextYear:"ui-icon-seek-next"};a.prototype.iconOverrideOption="themeButtonIcons";a.prototype.iconOverrideCustomButtonOption="themeIcon";a.prototype.iconOverridePrefix="ui-icon-"},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(3),a=o(20),i=o(6),l=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.parse=function(e,t){var o;if(r.isFunction(e.events)){o=e}else if(r.isFunction(e)){o={events:e}}if(o){return i.default.parse.call(this,o,t)}return!1};t.prototype.fetch=function(e,t,o){var n=this;this.calendar.pushLoading();return a.default.construct(function(r){n.func.call(n.calendar,e.clone(),t.clone(),o,function(e){n.calendar.popLoading();r(n.parseEventDefs(e))})})};t.prototype.getPrimitive=function(){return this.func};t.prototype.applyManualStandardProps=function(t){var o=e.prototype.applyManualStandardProps.call(this,t);this.func=t.events;return o};return t}(i.default);t.default=l;l.defineStandardProps({events:!1})},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(3),a=o(4),i=o(20),l=o(6),s=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.parse=function(e,t){var o;if("string"==typeof e.url){o=e}else if("string"==typeof e){o={url:e}}if(o){return l.default.parse.call(this,o,t)}return!1};t.prototype.fetch=function(e,o,n){var l=this,s=this.ajaxSettings,d=s.success,p=s.error,c=this.buildRequestParams(e,o,n);this.calendar.pushLoading();return i.default.construct(function(e,o){r.ajax(r.extend({},t.AJAX_DEFAULTS,s,{url:l.url,data:c,success:function success(t,n,i){var s;l.calendar.popLoading();if(t){s=a.applyAll(d,l,[t,n,i]);if(r.isArray(s)){t=s}e(l.parseEventDefs(t))}else{o()}},error:function error(e,t,n){l.calendar.popLoading();a.applyAll(p,l,[e,t,n]);o()}}))})};t.prototype.buildRequestParams=function(e,t,o){var n=this.calendar,a=this.ajaxSettings,i,l,s,d,p={};i=this.startParam;if(null==i){i=n.opt("startParam")}l=this.endParam;if(null==l){l=n.opt("endParam")}s=this.timezoneParam;if(null==s){s=n.opt("timezoneParam")}if(r.isFunction(a.data)){d=a.data()}else{d=a.data||{}}r.extend(p,d);p[i]=e.format();p[l]=t.format();if(o&&"local"!==o){p[s]=o}return p};t.prototype.getPrimitive=function(){return this.url};t.prototype.applyMiscProps=function(e){this.ajaxSettings=e};t.AJAX_DEFAULTS={dataType:"json",cache:!1};return t}(l.default);t.default=s;s.defineStandardProps({url:!0,startParam:!0,endParam:!0,timezoneParam:!0})},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(11),r=function(){function e(){this.q=[];this.isPaused=!1;this.isRunning=!1}e.prototype.queue=function(){for(var e=[],t=0;t<arguments.length;t++){e[t]=arguments[t]}this.q.push.apply(this.q,e);this.tryStart()};e.prototype.pause=function(){this.isPaused=!0};e.prototype.resume=function(){this.isPaused=!1;this.tryStart()};e.prototype.getIsIdle=function(){return!this.isRunning&&!this.isPaused};e.prototype.tryStart=function(){if(!this.isRunning&&this.canRunNext()){this.isRunning=!0;this.trigger("start");this.runRemaining()}};e.prototype.canRunNext=function(){return!this.isPaused&&this.q.length};e.prototype.runRemaining=function(){var e=this,t,o;do{t=this.q.shift();o=this.runTask(t);if(o&&o.then){o.then(function(){if(e.canRunNext()){e.runRemaining()}});return}}while(this.canRunNext());this.trigger("stop");this.isRunning=!1;this.tryStart()};e.prototype.runTask=function(e){return e()};return e}();t.default=r;n.default.mixInto(r)},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(217),a=function(e){n.__extends(t,e);function t(t){var o=e.call(this)||this;o.waitsByNamespace=t||{};return o}t.prototype.queue=function(e,t,o){var n;if(t){n=this.waitsByNamespace[t]}if(this.waitNamespace){if(t===this.waitNamespace&&null!=n){this.delayWait(n)}else{this.clearWait();this.tryStart()}}if(this.compoundTask({func:e,namespace:t,type:o})){if(!this.waitNamespace&&null!=n){this.startWait(t,n)}else{this.tryStart()}}};t.prototype.startWait=function(e,t){this.waitNamespace=e;this.spawnWait(t)};t.prototype.delayWait=function(e){clearTimeout(this.waitId);this.spawnWait(e)};t.prototype.spawnWait=function(e){var t=this;this.waitId=setTimeout(function(){t.waitNamespace=null;t.tryStart()},e)};t.prototype.clearWait=function(){if(this.waitNamespace){clearTimeout(this.waitId);this.waitId=null;this.waitNamespace=null}};t.prototype.canRunNext=function(){if(!e.prototype.canRunNext.call(this)){return!1}if(this.waitNamespace){for(var t=this.q,o=0;o<t.length;o++){if(t[o].namespace!==this.waitNamespace){return!0}}return!1}return!0};t.prototype.runTask=function(e){e.func()};t.prototype.compoundTask=function(e){var t=this.q,o=!0,n,r;if(e.namespace&&"destroy"===e.type){for(n=t.length-1;0<=n;n--){r=t[n];switch(r.type){case"init":o=!1;case"add":case"remove":t.splice(n,1);}}}if(o){t.push(e)}return o};return t}(r.default);t.default=a},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var r=o(2),a=o(3),i=o(0),l=o(4),s=o(10),d=o(47),p=o(237),c=o(35),u=function(e){r.__extends(t,e);function t(o,n){var r=e.call(this)||this;r.isRTL=!1;r.hitsNeededDepth=0;r.hasAllDayBusinessHours=!1;r.isDatesRendered=!1;if(o){r.view=o}if(n){r.options=n}r.uid=t.guid++ +"";r.childrenByUid={};r.nextDayThreshold=i.duration(r.opt("nextDayThreshold"));r.isRTL=r.opt("isRTL");if(r.fillRendererClass){r.fillRenderer=new r.fillRendererClass(r)}if(r.eventRendererClass){r.eventRenderer=new r.eventRendererClass(r,r.fillRenderer)}if(r.helperRendererClass&&r.eventRenderer){r.helperRenderer=new r.helperRendererClass(r,r.eventRenderer)}if(r.businessHourRendererClass&&r.fillRenderer){r.businessHourRenderer=new r.businessHourRendererClass(r,r.fillRenderer)}return r}t.prototype.addChild=function(e){if(!this.childrenByUid[e.uid]){this.childrenByUid[e.uid]=e;return!0}return!1};t.prototype.removeChild=function(e){if(this.childrenByUid[e.uid]){delete this.childrenByUid[e.uid];return!0}return!1};t.prototype.updateSize=function(){this.callChildren("updateSize",arguments)};t.prototype.opt=function(e){return this._getView().opt(e)};t.prototype.publiclyTrigger=function(){for(var e=[],t=0;t<arguments.length;t++){e[t]=arguments[t]}var o=this._getCalendar();return o.publiclyTrigger.apply(o,e)};t.prototype.hasPublicHandlers=function(){for(var e=[],t=0;t<arguments.length;t++){e[t]=arguments[t]}var o=this._getCalendar();return o.hasPublicHandlers.apply(o,e)};t.prototype.executeDateRender=function(e){this.dateProfile=e;this.renderDates(e);this.isDatesRendered=!0;this.callChildren("executeDateRender",arguments)};t.prototype.executeDateUnrender=function(){this.callChildren("executeDateUnrender",arguments);this.dateProfile=null;this.unrenderDates();this.isDatesRendered=!1};t.prototype.renderDates=function(){};t.prototype.unrenderDates=function(){};t.prototype.getNowIndicatorUnit=function(){};t.prototype.renderNowIndicator=function(){this.callChildren("renderNowIndicator",arguments)};t.prototype.unrenderNowIndicator=function(){this.callChildren("unrenderNowIndicator",arguments)};t.prototype.renderBusinessHours=function(e){if(this.businessHourRenderer){this.businessHourRenderer.render(e)}this.callChildren("renderBusinessHours",arguments)};t.prototype.unrenderBusinessHours=function(){this.callChildren("unrenderBusinessHours",arguments);if(this.businessHourRenderer){this.businessHourRenderer.unrender()}};t.prototype.executeEventRender=function(e){if(this.eventRenderer){this.eventRenderer.rangeUpdated();this.eventRenderer.render(e)}else if(this.renderEvents){this.renderEvents(n(e))}this.callChildren("executeEventRender",arguments)};t.prototype.executeEventUnrender=function(){this.callChildren("executeEventUnrender",arguments);if(this.eventRenderer){this.eventRenderer.unrender()}else if(this.destroyEvents){this.destroyEvents()}};t.prototype.getBusinessHourSegs=function(){var e=this.getOwnBusinessHourSegs();this.iterChildren(function(t){e.push.apply(e,t.getBusinessHourSegs())});return e};t.prototype.getOwnBusinessHourSegs=function(){if(this.businessHourRenderer){return this.businessHourRenderer.getSegs()}return[]};t.prototype.getEventSegs=function(){var e=this.getOwnEventSegs();this.iterChildren(function(t){e.push.apply(e,t.getEventSegs())});return e};t.prototype.getOwnEventSegs=function(){if(this.eventRenderer){return this.eventRenderer.getSegs()}return[]};t.prototype.triggerAfterEventsRendered=function(){this.triggerAfterEventSegsRendered(this.getEventSegs());this.publiclyTrigger("eventAfterAllRender",{context:this,args:[this]})};t.prototype.triggerAfterEventSegsRendered=function(e){var t=this;if(this.hasPublicHandlers("eventAfterRender")){e.forEach(function(e){var o;if(e.el){o=e.footprint.getEventLegacy();t.publiclyTrigger("eventAfterRender",{context:o,args:[o,e.el,t]})}})}};t.prototype.triggerBeforeEventsDestroyed=function(){this.triggerBeforeEventSegsDestroyed(this.getEventSegs())};t.prototype.triggerBeforeEventSegsDestroyed=function(e){var t=this;if(this.hasPublicHandlers("eventDestroy")){e.forEach(function(e){var o;if(e.el){o=e.footprint.getEventLegacy();t.publiclyTrigger("eventDestroy",{context:o,args:[o,e.el,t]})}})}};t.prototype.showEventsWithId=function(e){this.getEventSegs().forEach(function(t){if(t.footprint.eventDef.id===e&&t.el){t.el.css("visibility","")}});this.callChildren("showEventsWithId",arguments)};t.prototype.hideEventsWithId=function(e){this.getEventSegs().forEach(function(t){if(t.footprint.eventDef.id===e&&t.el){t.el.css("visibility","hidden")}});this.callChildren("hideEventsWithId",arguments)};t.prototype.renderDrag=function(e,t,o){var n=!1;this.iterChildren(function(r){if(r.renderDrag(e,t,o)){n=!0}});return n};t.prototype.unrenderDrag=function(){this.callChildren("unrenderDrag",arguments)};t.prototype.renderEventResize=function(){this.callChildren("renderEventResize",arguments)};t.prototype.unrenderEventResize=function(){this.callChildren("unrenderEventResize",arguments)};t.prototype.renderSelectionFootprint=function(e){this.renderHighlight(e);this.callChildren("renderSelectionFootprint",arguments)};t.prototype.unrenderSelection=function(){this.unrenderHighlight();this.callChildren("unrenderSelection",arguments)};t.prototype.renderHighlight=function(e){if(this.fillRenderer){this.fillRenderer.renderFootprint("highlight",e,{getClasses:function getClasses(){return["fc-highlight"]}})}this.callChildren("renderHighlight",arguments)};t.prototype.unrenderHighlight=function(){if(this.fillRenderer){this.fillRenderer.unrender("highlight")}this.callChildren("unrenderHighlight",arguments)};t.prototype.hitsNeeded=function(){if(!this.hitsNeededDepth++){this.prepareHits()}this.callChildren("hitsNeeded",arguments)};t.prototype.hitsNotNeeded=function(){if(this.hitsNeededDepth&&! --this.hitsNeededDepth){this.releaseHits()}this.callChildren("hitsNotNeeded",arguments)};t.prototype.prepareHits=function(){};t.prototype.releaseHits=function(){};t.prototype.queryHit=function(e,t){var o=this.childrenByUid,n,r;for(n in o){r=o[n].queryHit(e,t);if(r){break}}return r};t.prototype.getSafeHitFootprint=function(e){var t=this.getHitFootprint(e);if(!this.dateProfile.activeUnzonedRange.containsRange(t.unzonedRange)){return null}return t};t.prototype.getHitFootprint=function(){};t.prototype.getHitEl=function(){};t.prototype.eventRangesToEventFootprints=function(e){var t=[],o;for(o=0;o<e.length;o++){t.push.apply(t,this.eventRangeToEventFootprints(e[o]))}return t};t.prototype.eventRangeToEventFootprints=function(e){return[c.eventRangeToEventFootprint(e)]};t.prototype.eventFootprintsToSegs=function(e){var t=[],o;for(o=0;o<e.length;o++){t.push.apply(t,this.eventFootprintToSegs(e[o]))}return t};t.prototype.eventFootprintToSegs=function(e){var t=e.componentFootprint.unzonedRange,o,n,r;o=this.componentFootprintToSegs(e.componentFootprint);for(n=0;n<o.length;n++){r=o[n];if(!t.isStart){r.isStart=!1}if(!t.isEnd){r.isEnd=!1}r.footprint=e}return o};t.prototype.componentFootprintToSegs=function(){return[]};t.prototype.callChildren=function(e,t){this.iterChildren(function(o){o[e].apply(o,t)})};t.prototype.iterChildren=function(e){var t=this.childrenByUid,o;for(o in t){e(t[o])}};t.prototype._getCalendar=function(){var e=this;return e.calendar||e.view.calendar};t.prototype._getView=function(){return this.view};t.prototype._getDateProfile=function(){return this._getView().get("dateProfile")};t.prototype.buildGotoAnchorHtml=function(e,t,o){var n,r,i,d;if(a.isPlainObject(e)){n=e.date;r=e.type;i=e.forceOff}else{n=e}n=s.default(n);d={date:n.format("YYYY-MM-DD"),type:r||"day"};if("string"==typeof t){o=t;t=null}t=t?" "+l.attrsToStr(t):"";o=o||"";if(!i&&this.opt("navLinks")){return"<a"+t+" data-goto=\""+l.htmlEscape(JSON.stringify(d))+"\">"+o+"</a>"}else{return"<span"+t+">"+o+"</span>"}};t.prototype.getAllDayHtml=function(){return this.opt("allDayHtml")||l.htmlEscape(this.opt("allDayText"))};t.prototype.getDayClasses=function(e,t){var o=this._getView(),n=[],r;if(!this.dateProfile.activeUnzonedRange.containsDate(e)){n.push("fc-disabled-day")}else{n.push("fc-"+l.dayIDs[e.day()]);if(o.isDateInOtherMonth(e,this.dateProfile)){n.push("fc-other-month")}r=o.calendar.getNow();if(e.isSame(r,"day")){n.push("fc-today");if(!0!==t){n.push(o.calendar.theme.getClass("today"))}}else if(e<r){n.push("fc-past")}else{n.push("fc-future")}}return n};t.prototype.formatRange=function(e,t,o,n){var r=e.end;if(t){r=r.clone().subtract(1)}return d.formatRange(e.start,r,o,n,this.isRTL)};t.prototype.currentRangeAs=function(e){return this._getDateProfile().currentUnzonedRange.as(e)};t.prototype.computeDayRange=function(e){var t=this._getCalendar(),o=t.msToUtcMoment(e.startMs,!0),n=t.msToUtcMoment(e.endMs),r=+n.time(),a=n.clone().stripTime();if(r&&r>=this.nextDayThreshold){a.add(1,"days")}if(a<=o){a=o.clone().add(1,"days")}return{start:o,end:a}};t.prototype.isMultiDayRange=function(e){var t=this.computeDayRange(e);return 1<t.end.diff(t.start,"days")};t.guid=0;return t}(p.default);t.default=u;function n(e){var t,o,n=[],r;for(t in e){o=e[t].eventInstances;for(r=0;r<o.length;r++){n.push(o[r].toLegacy())}}return n}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var r=o(3),a=o(0),i=o(4),l=o(32),s=o(238),d=o(21),p=o(11),c=o(7),u=o(239),g=o(240),f=o(241),y=o(207),m=o(31),v=o(10),h=o(5),D=o(12),b=o(17),w=o(242),E=o(212),S=o(38),C=o(49),R=o(13),T=o(37),I=o(6),M=o(51),H=function(){function e(e,t){this.loadingLevel=0;this.ignoreUpdateViewSize=0;this.freezeContentHeightDepth=0;d.default.needed();this.el=e;this.viewsByType={};this.optionsManager=new g.default(this,t);this.viewSpecManager=new f.default(this.optionsManager,this);this.initMomentInternals();this.initCurrentDate();this.initEventManager();this.constraints=new y.default(this.eventManager,this);this.constructed()}e.prototype.constructed=function(){};e.prototype.getView=function(){return this.view};e.prototype.publiclyTrigger=function(e,t){var o=this.opt(e),n,a;if(r.isPlainObject(t)){n=t.context;a=t.args}else if(r.isArray(t)){a=t}if(null==n){n=this.el[0]}if(!a){a=[]}this.triggerWith(e,n,a);if(o){return o.apply(n,a)}};e.prototype.hasPublicHandlers=function(e){return this.hasHandlers(e)||this.opt(e)};e.prototype.option=function(e,t){var o;if("string"==typeof e){if(t===void 0){return this.optionsManager.get(e)}else{o={};o[e]=t;this.optionsManager.add(o)}}else if("object"===_typeof(e)){this.optionsManager.add(e)}};e.prototype.opt=function(e){return this.optionsManager.get(e)};e.prototype.instantiateView=function(e){var t=this.viewSpecManager.getViewSpec(e);if(!t){throw new Error("View type \""+e+"\" is not valid")}return new t["class"](this,t)};e.prototype.isValidViewType=function(e){return!!this.viewSpecManager.getViewSpec(e)};e.prototype.changeView=function(e,t){if(t){if(t.start&&t.end){this.optionsManager.recordOverrides({visibleRange:t})}else{this.currentDate=this.moment(t).stripZone()}}this.renderView(e)};e.prototype.zoomTo=function(e,t){var o;t=t||"day";o=this.viewSpecManager.getViewSpec(t)||this.viewSpecManager.getUnitViewSpec(t);this.currentDate=e.clone();this.renderView(o?o.type:null)};e.prototype.initCurrentDate=function(){var e=this.opt("defaultDate");if(null!=e){this.currentDate=this.moment(e).stripZone()}else{this.currentDate=this.getNow()}};e.prototype.prev=function(){var e=this.view,t=e.dateProfileGenerator.buildPrev(e.get("dateProfile"));if(t.isValid){this.currentDate=t.date;this.renderView()}};e.prototype.next=function(){var e=this.view,t=e.dateProfileGenerator.buildNext(e.get("dateProfile"));if(t.isValid){this.currentDate=t.date;this.renderView()}};e.prototype.prevYear=function(){this.currentDate.add(-1,"years");this.renderView()};e.prototype.nextYear=function(){this.currentDate.add(1,"years");this.renderView()};e.prototype.today=function(){this.currentDate=this.getNow();this.renderView()};e.prototype.gotoDate=function(e){this.currentDate=this.moment(e).stripZone();this.renderView()};e.prototype.incrementDate=function(e){this.currentDate.add(a.duration(e));this.renderView()};e.prototype.getDate=function(){return this.applyTimezone(this.currentDate)};e.prototype.pushLoading=function(){if(!this.loadingLevel++){this.publiclyTrigger("loading",[!0,this.view])}};e.prototype.popLoading=function(){if(! --this.loadingLevel){this.publiclyTrigger("loading",[!1,this.view])}};e.prototype.render=function(){if(!this.contentEl){this.initialRender()}else if(this.elementVisible()){this.calcSize();this.updateViewSize()}};e.prototype.initialRender=function(){var e=this,t=this.el;t.addClass("fc");t.on("click.fc","a[data-goto]",function(t){var o=r(t.currentTarget),n=o.data("goto"),a=e.moment(n.date),l=n.type,s=e.view.opt("navLink"+i.capitaliseFirstLetter(l)+"Click");if("function"==typeof s){s(a,t)}else{if("string"==typeof s){l=s}e.zoomTo(a,l)}});this.optionsManager.watch("settingTheme",["?theme","?themeSystem"],function(o){var n=M.getThemeSystemClass(o.themeSystem||o.theme),r=new n(e.optionsManager),a=r.getClass("widget");e.theme=r;if(a){t.addClass(a)}},function(){var o=e.theme.getClass("widget");e.theme=null;if(o){t.removeClass(o)}});this.optionsManager.watch("settingBusinessHourGenerator",["?businessHours"],function(t){e.businessHourGenerator=new E.default(t.businessHours,e);if(e.view){e.view.set("businessHourGenerator",e.businessHourGenerator)}},function(){e.businessHourGenerator=null});this.optionsManager.watch("applyingDirClasses",["?isRTL","?locale"],function(e){t.toggleClass("fc-ltr",!e.isRTL);t.toggleClass("fc-rtl",e.isRTL)});this.contentEl=r("<div class='fc-view-container'/>").prependTo(t);this.initToolbars();this.renderHeader();this.renderFooter();this.renderView(this.opt("defaultView"));if(this.opt("handleWindowResize")){r(window).resize(this.windowResizeProxy=i.debounce(this.windowResize.bind(this),this.opt("windowResizeDelay")))}};e.prototype.destroy=function(){if(this.view){this.clearView()}this.toolbarsManager.proxyCall("removeElement");this.contentEl.remove();this.el.removeClass("fc fc-ltr fc-rtl");this.optionsManager.unwatch("settingTheme");this.optionsManager.unwatch("settingBusinessHourGenerator");this.el.off(".fc");if(this.windowResizeProxy){r(window).unbind("resize",this.windowResizeProxy);this.windowResizeProxy=null}d.default.unneeded()};e.prototype.elementVisible=function(){return this.el.is(":visible")};e.prototype.bindViewHandlers=function(e){var t=this;e.watch("titleForCalendar",["title"],function(o){if(e===t.view){t.setToolbarsTitle(o.title)}});e.watch("dateProfileForCalendar",["dateProfile"],function(o){if(e===t.view){t.currentDate=o.dateProfile.date;t.updateToolbarButtons(o.dateProfile)}})};e.prototype.unbindViewHandlers=function(e){e.unwatch("titleForCalendar");e.unwatch("dateProfileForCalendar")};e.prototype.renderView=function(e){var t=this.view,o;this.freezeContentHeight();if(t&&e&&t.type!==e){this.clearView()}if(!this.view&&e){o=this.view=this.viewsByType[e]||(this.viewsByType[e]=this.instantiateView(e));this.bindViewHandlers(o);o.startBatchRender();o.setElement(r("<div class='fc-view fc-"+e+"-view' />").appendTo(this.contentEl));this.toolbarsManager.proxyCall("activateButton",e)}if(this.view){if(this.view.get("businessHourGenerator")!==this.businessHourGenerator){this.view.set("businessHourGenerator",this.businessHourGenerator)}this.view.setDate(this.currentDate);if(o){o.stopBatchRender()}}this.thawContentHeight()};e.prototype.clearView=function(){var e=this.view;this.toolbarsManager.proxyCall("deactivateButton",e.type);this.unbindViewHandlers(e);e.removeElement();e.unsetDate();this.view=null};e.prototype.reinitView=function(){var e=this.view,t=e.queryScroll();this.freezeContentHeight();this.clearView();this.calcSize();this.renderView(e.type);this.view.applyScroll(t);this.thawContentHeight()};e.prototype.getSuggestedViewHeight=function(){if(null==this.suggestedViewHeight){this.calcSize()}return this.suggestedViewHeight};e.prototype.isHeightAuto=function(){return"auto"===this.opt("contentHeight")||"auto"===this.opt("height")};e.prototype.updateViewSize=function(e){if(void 0===e){e=!1}var t=this.view,o;if(!this.ignoreUpdateViewSize&&t){if(e){this.calcSize();o=t.queryScroll()}this.ignoreUpdateViewSize++;t.updateSize(this.getSuggestedViewHeight(),this.isHeightAuto(),e);this.ignoreUpdateViewSize--;if(e){t.applyScroll(o)}return!0}};e.prototype.calcSize=function(){if(this.elementVisible()){this._calcSize()}};e.prototype._calcSize=function(){var e=this.opt("contentHeight"),t=this.opt("height");if("number"==typeof e){this.suggestedViewHeight=e}else if("function"==typeof e){this.suggestedViewHeight=e()}else if("number"==typeof t){this.suggestedViewHeight=t-this.queryToolbarsHeight()}else if("function"==typeof t){this.suggestedViewHeight=t()-this.queryToolbarsHeight()}else if("parent"===t){this.suggestedViewHeight=this.el.parent().height()-this.queryToolbarsHeight()}else{this.suggestedViewHeight=Math.round(this.contentEl.width()/Math.max(this.opt("aspectRatio"),.5))}};e.prototype.windowResize=function(e){if(e.target===window&&this.view&&this.view.isDatesRendered){if(this.updateViewSize(!0)){this.publiclyTrigger("windowResize",[this.view])}}};e.prototype.freezeContentHeight=function(){if(!this.freezeContentHeightDepth++){this.forceFreezeContentHeight()}};e.prototype.forceFreezeContentHeight=function(){this.contentEl.css({width:"100%",height:this.contentEl.height(),overflow:"hidden"})};e.prototype.thawContentHeight=function(){this.freezeContentHeightDepth--;this.contentEl.css({width:"",height:"",overflow:""});if(this.freezeContentHeightDepth){this.forceFreezeContentHeight()}};e.prototype.initToolbars=function(){this.header=new u.default(this,this.computeHeaderOptions());this.footer=new u.default(this,this.computeFooterOptions());this.toolbarsManager=new s.default([this.header,this.footer])};e.prototype.computeHeaderOptions=function(){return{extraClasses:"fc-header-toolbar",layout:this.opt("header")}};e.prototype.computeFooterOptions=function(){return{extraClasses:"fc-footer-toolbar",layout:this.opt("footer")}};e.prototype.renderHeader=function(){var e=this.header;e.setToolbarOptions(this.computeHeaderOptions());e.render();if(e.el){this.el.prepend(e.el)}};e.prototype.renderFooter=function(){var e=this.footer;e.setToolbarOptions(this.computeFooterOptions());e.render();if(e.el){this.el.append(e.el)}};e.prototype.setToolbarsTitle=function(e){this.toolbarsManager.proxyCall("updateTitle",e)};e.prototype.updateToolbarButtons=function(e){var t=this.getNow(),o=this.view,n=o.dateProfileGenerator.build(t),r=o.dateProfileGenerator.buildPrev(o.get("dateProfile")),a=o.dateProfileGenerator.buildNext(o.get("dateProfile"));this.toolbarsManager.proxyCall(n.isValid&&!e.currentUnzonedRange.containsDate(t)?"enableButton":"disableButton","today");this.toolbarsManager.proxyCall(r.isValid?"enableButton":"disableButton","prev");this.toolbarsManager.proxyCall(a.isValid?"enableButton":"disableButton","next")};e.prototype.queryToolbarsHeight=function(){return this.toolbarsManager.items.reduce(function(e,t){var o=t.el?t.el.outerHeight(!0):0;return e+o},0)};e.prototype.select=function(){this.view.select(this.buildSelectFootprint.apply(this,arguments))};e.prototype.unselect=function(){if(this.view){this.view.unselect()}};e.prototype.buildSelectFootprint=function(e,t){var o=this.moment(e).stripZone(),n;if(t){n=this.moment(t).stripZone()}else if(o.hasTime()){n=o.clone().add(this.defaultTimedEventDuration)}else{n=o.clone().add(this.defaultAllDayEventDuration)}return new D.default(new h.default(o,n),!o.hasTime())};e.prototype.initMomentInternals=function(){var e=this;this.defaultAllDayEventDuration=a.duration(this.opt("defaultAllDayEventDuration"));this.defaultTimedEventDuration=a.duration(this.opt("defaultTimedEventDuration"));this.optionsManager.watch("buildingMomentLocale",["?locale","?monthNames","?monthNamesShort","?dayNames","?dayNamesShort","?firstDay","?weekNumberCalculation"],function(t){var o=t.weekNumberCalculation,n=t.firstDay,r;if("iso"===o){o="ISO"}var a=Object.create(m.getMomentLocaleData(t.locale));if(t.monthNames){a._months=t.monthNames}if(t.monthNamesShort){a._monthsShort=t.monthNamesShort}if(t.dayNames){a._weekdays=t.dayNames}if(t.dayNamesShort){a._weekdaysShort=t.dayNamesShort}if(null==n&&"ISO"===o){n=1}if(null!=n){r=Object.create(a._week);r.dow=n;a._week=r}if("ISO"===o||"local"===o||"function"==typeof o){a._fullCalendar_weekCalc=o}e.localeData=a;if(e.currentDate){e.localizeMoment(e.currentDate)}})};e.prototype.moment=function(){for(var e=[],t=0;t<arguments.length;t++){e[t]=arguments[t]}var o;if("local"===this.opt("timezone")){o=v.default.apply(null,e);if(o.hasTime()){o.local()}}else if("UTC"===this.opt("timezone")){o=v.default.utc.apply(null,e)}else{o=v.default.parseZone.apply(null,e)}this.localizeMoment(o);return o};e.prototype.msToMoment=function(e,t){var o=v.default.utc(e);if(t){o.stripTime()}else{o=this.applyTimezone(o)}this.localizeMoment(o);return o};e.prototype.msToUtcMoment=function(e,t){var o=v.default.utc(e);if(t){o.stripTime()}this.localizeMoment(o);return o};e.prototype.localizeMoment=function(e){e._locale=this.localeData};e.prototype.getIsAmbigTimezone=function(){return"local"!==this.opt("timezone")&&"UTC"!==this.opt("timezone")};e.prototype.applyTimezone=function(e){if(!e.hasTime()){return e.clone()}var t=this.moment(e.toArray()),o=e.time().asMilliseconds()-t.time().asMilliseconds(),n;if(o){n=t.clone().add(o);if(0==e.time().asMilliseconds()-n.time().asMilliseconds()){t=n}}return t};e.prototype.footprintToDateProfile=function(e,t){if(void 0===t){t=!1}var o=v.default.utc(e.unzonedRange.startMs),n;if(!t){n=v.default.utc(e.unzonedRange.endMs)}if(e.isAllDay){o.stripTime();if(n){n.stripTime()}}else{o=this.applyTimezone(o);if(n){n=this.applyTimezone(n)}}return new b.default(o,n,this)};e.prototype.getNow=function(){var e=this.opt("now");if("function"==typeof e){e=e()}return this.moment(e).stripZone()};e.prototype.humanizeDuration=function(e){return e.locale(this.opt("locale")).humanize()};e.prototype.parseUnzonedRange=function(e){var t=null,o=null;if(e.start){t=this.moment(e.start).stripZone()}if(e.end){o=this.moment(e.end).stripZone()}if(!t&&!o){return null}if(t&&o&&o.isBefore(t)){return null}return new h.default(t,o)};e.prototype.initEventManager=function(){var e=this,t=new w.default(this),o=this.opt("eventSources")||[],n=this.opt("events");this.eventManager=t;if(n){o.unshift(n)}t.on("release",function(t){e.trigger("eventsReset",t)});t.freeze();o.forEach(function(o){var n=S.default.parse(o,e);if(n){t.addSource(n)}});t.thaw()};e.prototype.requestEvents=function(e,t){return this.eventManager.requestEvents(e,t,this.opt("timezone"),!this.opt("lazyFetching"))};e.prototype.getEventEnd=function(e){if(e.end){return e.end.clone()}else{return this.getDefaultEventEnd(e.allDay,e.start)}};e.prototype.getDefaultEventEnd=function(e,t){var o=t.clone();if(e){o.stripTime().add(this.defaultAllDayEventDuration)}else{o.add(this.defaultTimedEventDuration)}if(this.getIsAmbigTimezone()){o.stripZone()}return o};e.prototype.rerenderEvents=function(){this.view.flash("displayingEvents")};e.prototype.refetchEvents=function(){this.eventManager.refetchAllSources()};e.prototype.renderEvents=function(e,t){this.eventManager.freeze();for(var o=0;o<e.length;o++){this.renderEvent(e[o],t)}this.eventManager.thaw()};e.prototype.renderEvent=function(e,t){if(void 0===t){t=!1}var o=this.eventManager,n=C.default.parse(e,e.source||o.stickySource);if(n){o.addEventDef(n,t)}};e.prototype.removeEvents=function(e){var t=this.eventManager,o=[],r={},a,l;if(null==e){t.removeAllEventDefs()}else{t.getEventInstances().forEach(function(e){o.push(e.toLegacy())});o=n(o,e);for(l=0;l<o.length;l++){a=this.eventManager.getEventDefByUid(o[l]._id);r[a.id]=!0}t.freeze();for(l in r){t.removeEventDefsById(l)}t.thaw()}};e.prototype.clientEvents=function(e){var t=[];this.eventManager.getEventInstances().forEach(function(e){t.push(e.toLegacy())});return n(t,e)};e.prototype.updateEvents=function(e){this.eventManager.freeze();for(var t=0;t<e.length;t++){this.updateEvent(e[t])}this.eventManager.thaw()};e.prototype.updateEvent=function(e){var t=this.eventManager.getEventDefByUid(e._id),o,n;if(t instanceof R.default){o=t.buildInstance();n=T.default.createFromRawProps(o,e,null);this.eventManager.mutateEventsWithId(t.id,n)}};e.prototype.getEventSources=function(){return this.eventManager.otherSources.slice()};e.prototype.getEventSourceById=function(e){return this.eventManager.getSourceById(I.default.normalizeId(e))};e.prototype.addEventSource=function(e){var t=S.default.parse(e,this);if(t){this.eventManager.addSource(t)}};e.prototype.removeEventSources=function(e){var t=this.eventManager,o,n;if(null==e){this.eventManager.removeAllSources()}else{o=t.multiQuerySources(e);t.freeze();for(n=0;n<o.length;n++){t.removeSource(o[n])}t.thaw()}};e.prototype.removeEventSource=function(e){var t=this.eventManager,o=t.querySources(e),n;t.freeze();for(n=0;n<o.length;n++){t.removeSource(o[n])}t.thaw()};e.prototype.refetchEventSources=function(e){var t=this.eventManager,o=t.multiQuerySources(e),n;t.freeze();for(n=0;n<o.length;n++){t.refetchSource(o[n])}t.thaw()};e.defaults=l.globalDefaults;e.englishDefaults=l.englishDefaults;e.rtlDefaults=l.rtlDefaults;return e}();t.default=H;p.default.mixInto(H);c.default.mixInto(H);function n(e,t){if(null==t){return e}else if(r.isFunction(t)){return e.filter(t)}else{t+="";return e.filter(function(e){return e.id==t||e._id===t})}}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),r=o(4),a=o(5),i=function(){function e(e){this._view=e}e.prototype.opt=function(e){return this._view.opt(e)};e.prototype.trimHiddenDays=function(e){return this._view.trimHiddenDays(e)};e.prototype.msToUtcMoment=function(e,t){return this._view.calendar.msToUtcMoment(e,t)};e.prototype.buildPrev=function(e){var t=e.date.clone().startOf(e.currentRangeUnit).subtract(e.dateIncrement);return this.build(t,-1)};e.prototype.buildNext=function(e){var t=e.date.clone().startOf(e.currentRangeUnit).add(e.dateIncrement);return this.build(t,1)};e.prototype.build=function(e,t,o){if(void 0===o){o=!1}var r=!e.hasTime(),a,i=null,l=null,s,d,p,c,u;a=this.buildValidRange();a=this.trimHiddenDays(a);if(o){e=this.msToUtcMoment(a.constrainDate(e),r)}s=this.buildCurrentRangeInfo(e,t);d=/^(year|month|week|day)$/.test(s.unit);p=this.buildRenderRange(this.trimHiddenDays(s.unzonedRange),s.unit,d);p=this.trimHiddenDays(p);c=p.clone();if(!this.opt("showNonCurrentDates")){c=c.intersect(s.unzonedRange)}i=n.duration(this.opt("minTime"));l=n.duration(this.opt("maxTime"));c=this.adjustActiveRange(c,i,l);c=c.intersect(a);if(c){e=this.msToUtcMoment(c.constrainDate(e),r)}u=s.unzonedRange.intersectsWith(a);return{validUnzonedRange:a,currentUnzonedRange:s.unzonedRange,currentRangeUnit:s.unit,isRangeAllDay:d,activeUnzonedRange:c,renderUnzonedRange:p,minTime:i,maxTime:l,isValid:u,date:e,dateIncrement:this.buildDateIncrement(s.duration)}};e.prototype.buildValidRange=function(){return this._view.getUnzonedRangeOption("validRange",this._view.calendar.getNow())||new a.default};e.prototype.buildCurrentRangeInfo=function(e,t){var o=this._view.viewSpec,n=null,a=null,i=null,l;if(o.duration){n=o.duration;a=o.durationUnit;i=this.buildRangeFromDuration(e,t,n,a)}else if(l=this.opt("dayCount")){a="day";i=this.buildRangeFromDayCount(e,t,l)}else if(i=this.buildCustomVisibleRange(e)){a=r.computeGreatestUnit(i.getStart(),i.getEnd())}else{n=this.getFallbackDuration();a=r.computeGreatestUnit(n);i=this.buildRangeFromDuration(e,t,n,a)}return{duration:n,unit:a,unzonedRange:i}};e.prototype.getFallbackDuration=function(){return n.duration({days:1})};e.prototype.adjustActiveRange=function(e,t,o){var n=e.getStart(),r=e.getEnd();if(this._view.usesMinMaxTime){if(0>t){n.time(0).add(t)}if(o>86400000){r.time(o-86400000)}}return new a.default(n,r)};e.prototype.buildRangeFromDuration=function(e,t,o,i){var s=this.opt("dateAlignment"),d,p,c,u,g;if(!s){d=this.opt("dateIncrement");if(d){p=n.duration(d);if(p<o){s=r.computeDurationGreatestUnit(p,d)}else{s=i}}else{s=i}}if(1>=o.as("days")){if(this._view.isHiddenDay(c)){c=this._view.skipHiddenDays(c,t);c.startOf("day")}}function l(){c=e.clone().startOf(s);u=c.clone().add(o);g=new a.default(c,u)}l();if(!this.trimHiddenDays(g)){e=this._view.skipHiddenDays(e,t);l()}return g};e.prototype.buildRangeFromDayCount=function(e,t,o){var n=this.opt("dateAlignment"),r=0,i=e.clone(),l;if(n){i.startOf(n)}i.startOf("day");i=this._view.skipHiddenDays(i,t);l=i.clone();do{l.add(1,"day");if(!this._view.isHiddenDay(l)){r++}}while(r<o);return new a.default(i,l)};e.prototype.buildCustomVisibleRange=function(e){var t=this._view.getUnzonedRangeOption("visibleRange",this._view.calendar.applyTimezone(e));if(t&&(null==t.startMs||null==t.endMs)){return null}return t};e.prototype.buildRenderRange=function(e){return e.clone()};e.prototype.buildDateIncrement=function(e){var t=this.opt("dateIncrement"),o;if(t){return n.duration(t)}else if(o=this.opt("dateAlignment")){return n.duration(1,o)}else if(e){return e}else{return n.duration({days:1})}};return e}();t.default=i},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var r=o(2),a=o(3),i=o(0),l=o(16),s=o(4),d=o(10),p=o(7),c=o(23),u=o(13),g=o(18),f=o(6),y=o(15),m=function(e){r.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.isDragging=!1;return t}t.prototype.end=function(){if(this.dragListener){this.dragListener.endInteraction()}};t.prototype.bindToDocument=function(){this.listenTo(a(document),{dragstart:this.handleDragStart,sortstart:this.handleDragStart})};t.prototype.unbindFromDocument=function(){this.stopListeningTo(a(document))};t.prototype.handleDragStart=function(e,t){var o,n;if(this.opt("droppable")){o=a((t?t.item:null)||e.target);n=this.opt("dropAccept");if(a.isFunction(n)?n.call(o[0],o):o.is(n)){if(!this.isDragging){this.listenToExternalDrag(o,e,t)}}}};t.prototype.listenToExternalDrag=function(e,t,o){var r=this,a=this.component,i=this.view,l=n(e),d,p=this.dragListener=new c.default(a,{interactionStart:function interactionStart(){r.isDragging=!0},hitOver:function hitOver(e){var t=!0,o=e.component.getSafeHitFootprint(e),n;if(o){d=r.computeExternalDrop(o,l);if(d){n=new g.default(d.buildInstances());t=l.eventProps?a.isEventInstanceGroupAllowed(n):a.isExternalInstanceGroupAllowed(n)}else{t=!1}}else{t=!1}if(!t){d=null;s.disableCursor()}if(d){a.renderDrag(a.eventRangesToEventFootprints(n.sliceRenderRanges(a.dateProfile.renderUnzonedRange,i.calendar)))}},hitOut:function hitOut(){d=null},hitDone:function hitDone(){s.enableCursor();a.unrenderDrag()},interactionEnd:function interactionEnd(t){if(d){i.reportExternalDrop(d,!!l.eventProps,!!l.stick,e,t,o)}r.isDragging=!1;r.dragListener=null}});p.startDrag(t)};t.prototype.computeExternalDrop=function(e,t){var o=this.view.calendar,n=d.default.utc(e.unzonedRange.startMs).stripZone(),r,i;if(e.isAllDay){if(t.startTime){n.time(t.startTime)}else{n.stripTime()}}if(t.duration){r=n.clone().add(t.duration)}n=o.applyTimezone(n);if(r){r=o.applyTimezone(r)}i=u.default.parse(a.extend({},t.eventProps,{start:n,end:r}),new f.default(o));return i};return t}(y.default);t.default=m;p.default.mixInto(m);l.dataAttrPrefix="";function n(e){var t=l.dataAttrPrefix,o,n,r,s;if(t){t+="-"}o=e.data(t+"event")||null;if(o){if("object"===_typeof(o)){o=a.extend({},o)}else{o={}}n=o.start;if(null==n){n=o.time}r=o.duration;s=o.stick;delete o.start;delete o.time;delete o.duration;delete o.stick}if(null==n){n=e.data(t+"start")}if(null==n){n=e.data(t+"time")}if(null==r){r=e.data(t+"duration")}if(null==s){s=e.data(t+"stick")}n=null!=n?i.duration(n):null;r=null!=r?i.duration(r):null;s=!!s;return{eventProps:o,startTime:n,duration:r,stick:s}}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(3),a=o(4),i=o(37),l=o(50),s=o(23),d=o(15),p=function(e){n.__extends(t,e);function t(t,o){var n=e.call(this,t)||this;n.isResizing=!1;n.eventPointing=o;return n}t.prototype.end=function(){if(this.dragListener){this.dragListener.endInteraction()}};t.prototype.bindToEl=function(e){var t=this.component;t.bindSegHandlerToEl(e,"mousedown",this.handleMouseDown.bind(this));t.bindSegHandlerToEl(e,"touchstart",this.handleTouchStart.bind(this))};t.prototype.handleMouseDown=function(e,t){if(this.component.canStartResize(e,t)){this.buildDragListener(e,r(t.target).is(".fc-start-resizer")).startInteraction(t,{distance:5})}};t.prototype.handleTouchStart=function(e,t){if(this.component.canStartResize(e,t)){this.buildDragListener(e,r(t.target).is(".fc-start-resizer")).startInteraction(t)}};t.prototype.buildDragListener=function(e,t){var o=this,n=this.component,r=this.view,i=r.calendar,l=i.eventManager,d=e.el,p=e.footprint.eventDef,c=e.footprint.eventInstance,u,g,f=this.dragListener=new s.default(n,{scroll:this.opt("dragScroll"),subjectEl:d,interactionStart:function interactionStart(){u=!1},dragStart:function dragStart(t){u=!0;o.eventPointing.handleMouseout(e,t);o.segResizeStart(e,t)},hitOver:function hitOver(s,d,c){var u=!0,f=n.getSafeHitFootprint(c),y=n.getSafeHitFootprint(s),m;if(f&&y){g=t?o.computeEventStartResizeMutation(f,y,e.footprint):o.computeEventEndResizeMutation(f,y,e.footprint);if(g){m=l.buildMutatedEventInstanceGroup(p.id,g);u=n.isEventInstanceGroupAllowed(m)}else{u=!1}}else{u=!1}if(!u){g=null;a.disableCursor()}else if(g.isEmpty()){g=null}if(g){r.hideEventsWithId(e.footprint.eventDef.id);r.renderEventResize(n.eventRangesToEventFootprints(m.sliceRenderRanges(n.dateProfile.renderUnzonedRange,i)),e)}},hitOut:function hitOut(){g=null},hitDone:function hitDone(){r.unrenderEventResize(e);r.showEventsWithId(e.footprint.eventDef.id);a.enableCursor()},interactionEnd:function interactionEnd(t){if(u){o.segResizeStop(e,t)}if(g){r.reportEventResize(c,g,d,t)}o.dragListener=null}});return f};t.prototype.segResizeStart=function(e,t){this.isResizing=!0;this.component.publiclyTrigger("eventResizeStart",{context:e.el[0],args:[e.footprint.getEventLegacy(),t,{},this.view]})};t.prototype.segResizeStop=function(e,t){this.isResizing=!1;this.component.publiclyTrigger("eventResizeStop",{context:e.el[0],args:[e.footprint.getEventLegacy(),t,{},this.view]})};t.prototype.computeEventStartResizeMutation=function(e,t,o){var n=o.componentFootprint.unzonedRange,r=this.component.diffDates(t.unzonedRange.getStart(),e.unzonedRange.getStart()),a,s;if(n.getStart().add(r)<n.getEnd()){a=new l.default;a.setStartDelta(r);s=new i.default;s.setDateMutation(a);return s}return!1};t.prototype.computeEventEndResizeMutation=function(e,t,o){var n=o.componentFootprint.unzonedRange,r=this.component.diffDates(t.unzonedRange.getEnd(),e.unzonedRange.getEnd()),a,s;if(n.getEnd().add(r)>n.getStart()){a=new l.default;a.setEndDelta(r);s=new i.default;s.setDateMutation(a);return s}return!1};return t}(d.default);t.default=p},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(4),a=o(37),i=o(50),l=o(54),s=o(23),d=o(244),p=o(15),c=function(e){n.__extends(t,e);function t(t,o){var n=e.call(this,t)||this;n.isDragging=!1;n.eventPointing=o;return n}t.prototype.end=function(){if(this.dragListener){this.dragListener.endInteraction()}};t.prototype.getSelectionDelay=function(){var e=this.opt("eventLongPressDelay");if(null==e){e=this.opt("longPressDelay")}return e};t.prototype.bindToEl=function(e){var t=this.component;t.bindSegHandlerToEl(e,"mousedown",this.handleMousedown.bind(this));t.bindSegHandlerToEl(e,"touchstart",this.handleTouchStart.bind(this))};t.prototype.handleMousedown=function(e,t){if(!this.component.shouldIgnoreMouse()&&this.component.canStartDrag(e,t)){this.buildDragListener(e).startInteraction(t,{distance:5})}};t.prototype.handleTouchStart=function(e,t){var o=this.component,n={delay:this.view.isEventDefSelected(e.footprint.eventDef)?0:this.getSelectionDelay()};if(o.canStartDrag(e,t)){this.buildDragListener(e).startInteraction(t,n)}else if(o.canStartSelection(e,t)){this.buildSelectListener(e).startInteraction(t,n)}};t.prototype.buildSelectListener=function(e){var t=this,o=this.view,n=e.footprint.eventDef,r=e.footprint.eventInstance;if(this.dragListener){return this.dragListener}var a=this.dragListener=new l.default({dragStart:function dragStart(){if(a.isTouch&&!o.isEventDefSelected(n)&&r){o.selectEventInstance(r)}},interactionEnd:function interactionEnd(){t.dragListener=null}});return a};t.prototype.buildDragListener=function(e){var t=this,o=this.component,n=this.view,a=n.calendar,i=a.eventManager,l=e.el,p=e.footprint.eventDef,c=e.footprint.eventInstance,u,g,f;if(this.dragListener){return this.dragListener}var y=this.dragListener=new s.default(n,{scroll:this.opt("dragScroll"),subjectEl:l,subjectCenter:!0,interactionStart:function interactionStart(r){e.component=o;u=!1;g=new d.default(e.el,{additionalClass:"fc-dragging",parentEl:n.el,opacity:y.isTouch?null:t.opt("dragOpacity"),revertDuration:t.opt("dragRevertDuration"),zIndex:2});g.hide();g.start(r)},dragStart:function dragStart(o){if(y.isTouch&&!n.isEventDefSelected(p)&&c){n.selectEventInstance(c)}u=!0;t.eventPointing.handleMouseout(e,o);t.segDragStart(e,o);n.hideEventsWithId(e.footprint.eventDef.id)},hitOver:function hitOver(l,s,d){var c=!0,u,m,v;if(e.hit){d=e.hit}u=d.component.getSafeHitFootprint(d);m=l.component.getSafeHitFootprint(l);if(u&&m){f=t.computeEventDropMutation(u,m,p);if(f){v=i.buildMutatedEventInstanceGroup(p.id,f);c=o.isEventInstanceGroupAllowed(v)}else{c=!1}}else{c=!1}if(!c){f=null;r.disableCursor()}if(f&&n.renderDrag(o.eventRangesToEventFootprints(v.sliceRenderRanges(o.dateProfile.renderUnzonedRange,a)),e,y.isTouch)){g.hide()}else{g.show()}if(s){f=null}},hitOut:function hitOut(){n.unrenderDrag(e);g.show();f=null},hitDone:function hitDone(){r.enableCursor()},interactionEnd:function interactionEnd(o){delete e.component;g.stop(!f,function(){if(u){n.unrenderDrag(e);t.segDragStop(e,o)}n.showEventsWithId(e.footprint.eventDef.id);if(f){n.reportEventDrop(c,f,l,o)}});t.dragListener=null}});return y};t.prototype.segDragStart=function(e,t){this.isDragging=!0;this.component.publiclyTrigger("eventDragStart",{context:e.el[0],args:[e.footprint.getEventLegacy(),t,{},this.view]})};t.prototype.segDragStop=function(e,t){this.isDragging=!1;this.component.publiclyTrigger("eventDragStop",{context:e.el[0],args:[e.footprint.getEventLegacy(),t,{},this.view]})};t.prototype.computeEventDropMutation=function(e,t){var o=new a.default;o.setDateMutation(this.computeEventDateMutation(e,t));return o};t.prototype.computeEventDateMutation=function(e,t){var o=e.unzonedRange.getStart(),n=t.unzonedRange.getStart(),r=!1,a=!1,l=!1,s,d;if(e.isAllDay!==t.isAllDay){r=!0;if(t.isAllDay){l=!0;o.stripTime()}else{a=!0}}s=this.component.diffDates(n,o);d=new i.default;d.clearEnd=r;d.forceTimed=a;d.forceAllDay=l;d.setDateDelta(s);return d};return t}(p.default);t.default=c},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(4),a=o(23),i=o(12),l=o(5),s=o(15),d=function(e){n.__extends(t,e);function t(t){var o=e.call(this,t)||this;o.dragListener=o.buildDragListener();return o}t.prototype.end=function(){this.dragListener.endInteraction()};t.prototype.getDelay=function(){var e=this.opt("selectLongPressDelay");if(null==e){e=this.opt("longPressDelay")}return e};t.prototype.bindToEl=function(e){var t=this,o=this.component,n=this.dragListener;o.bindDateHandlerToEl(e,"mousedown",function(e){if(t.opt("selectable")&&!o.shouldIgnoreMouse()){n.startInteraction(e,{distance:t.opt("selectMinDistance")})}});o.bindDateHandlerToEl(e,"touchstart",function(e){if(t.opt("selectable")&&!o.shouldIgnoreTouch()){n.startInteraction(e,{delay:t.getDelay()})}});r.preventSelection(e)};t.prototype.buildDragListener=function(){var e=this,t=this.component,o,n=new a.default(t,{scroll:this.opt("dragScroll"),interactionStart:function interactionStart(){o=null},dragStart:function dragStart(t){e.view.unselect(t)},hitOver:function hitOver(n,a,i){var l,s;if(i){l=t.getSafeHitFootprint(i);s=t.getSafeHitFootprint(n);if(l&&s){o=e.computeSelection(l,s)}else{o=null}if(o){t.renderSelectionFootprint(o)}else if(!1===o){r.disableCursor()}}},hitOut:function hitOut(){o=null;t.unrenderSelection()},hitDone:function hitDone(){r.enableCursor()},interactionEnd:function interactionEnd(t,n){if(!n&&o){e.view.reportSelection(o,t)}}});return n};t.prototype.computeSelection=function(e,t){var o=this.computeSelectionFootprint(e,t);if(o&&!this.isSelectionFootprintAllowed(o)){return!1}return o};t.prototype.computeSelectionFootprint=function(e,t){var o=[e.unzonedRange.startMs,e.unzonedRange.endMs,t.unzonedRange.startMs,t.unzonedRange.endMs];o.sort(r.compareNumbers);return new i.default(new l.default(o[0],o[3]),e.isAllDay)};t.prototype.isSelectionFootprintAllowed=function(e){return this.component.dateProfile.validUnzonedRange.containsRange(e.unzonedRange)&&this.view.calendar.constraints.isSelectionFootprintAllowed(e)};return t}(s.default);t.default=d},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var r=o(2),a=o(0),i=o(3),l=o(4),s=o(39),d=o(41),p=o(227),c=o(61),u,g,f=function(e){r.__extends(t,e);function t(t,o){var n=e.call(this,t,o)||this;n.usesMinMaxTime=!0;n.timeGrid=n.instantiateTimeGrid();n.addChild(n.timeGrid);if(n.opt("allDaySlot")){n.dayGrid=n.instantiateDayGrid();n.addChild(n.dayGrid)}n.scroller=new s.default({overflowX:"hidden",overflowY:"auto"});return n}t.prototype.instantiateTimeGrid=function(){var e=new this.timeGridClass(this);l.copyOwnProps(u,e);return e};t.prototype.instantiateDayGrid=function(){var e=new this.dayGridClass(this);l.copyOwnProps(g,e);return e};t.prototype.renderSkeleton=function(){var e,t;this.el.addClass("fc-agenda-view").html(this.renderSkeletonHtml());this.scroller.render();e=this.scroller.el.addClass("fc-time-grid-container");t=i("<div class=\"fc-time-grid\" />").appendTo(e);this.el.find(".fc-body > tr > td").append(e);this.timeGrid.headContainerEl=this.el.find(".fc-head-container");this.timeGrid.setElement(t);if(this.dayGrid){this.dayGrid.setElement(this.el.find(".fc-day-grid"));this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()}};t.prototype.unrenderSkeleton=function(){this.timeGrid.removeElement();if(this.dayGrid){this.dayGrid.removeElement()}this.scroller.destroy()};t.prototype.renderSkeletonHtml=function(){var e=this.calendar.theme;return"<table class=\""+e.getClass("tableGrid")+"\">"+(this.opt("columnHeader")?"<thead class=\"fc-head\"><tr><td class=\"fc-head-container "+e.getClass("widgetHeader")+"\">&nbsp;</td></tr></thead>":"")+"<tbody class=\"fc-body\"><tr><td class=\""+e.getClass("widgetContent")+"\">"+(this.dayGrid?"<div class=\"fc-day-grid\"/><hr class=\"fc-divider "+e.getClass("widgetHeader")+"\"/>":"")+"</td></tr></tbody></table>"};t.prototype.axisStyleAttr=function(){if(null!=this.axisWidth){return"style=\"width:"+this.axisWidth+"px\""}return""};t.prototype.getNowIndicatorUnit=function(){return this.timeGrid.getNowIndicatorUnit()};t.prototype.updateSize=function(t,o,n){var r,a,i;e.prototype.updateSize.call(this,t,o,n);this.axisWidth=l.matchCellWidths(this.el.find(".fc-axis"));if(!this.timeGrid.colEls){if(!o){a=this.computeScrollerHeight(t);this.scroller.setHeight(a)}return}var s=this.el.find(".fc-row:not(.fc-scroller *)");this.timeGrid.bottomRuleEl.hide();this.scroller.clear();l.uncompensateScroll(s);if(this.dayGrid){this.dayGrid.removeSegPopover();r=this.opt("eventLimit");if(r&&"number"!=typeof r){r=5}if(r){this.dayGrid.limitRows(r)}}if(!o){a=this.computeScrollerHeight(t);this.scroller.setHeight(a);i=this.scroller.getScrollbarWidths();if(i.left||i.right){l.compensateScroll(s,i);a=this.computeScrollerHeight(t);this.scroller.setHeight(a)}this.scroller.lockOverflow(i);if(this.timeGrid.getTotalSlatHeight()<a){this.timeGrid.bottomRuleEl.show()}}};t.prototype.computeScrollerHeight=function(e){return e-l.subtractInnerElHeight(this.el,this.scroller.el)};t.prototype.computeInitialDateScroll=function(){var e=a.duration(this.opt("scrollTime")),t=this.timeGrid.computeTimeTop(e);t=Math.ceil(t);if(t){t++}return{top:t}};t.prototype.queryDateScroll=function(){return{top:this.scroller.getScrollTop()}};t.prototype.applyDateScroll=function(e){if(e.top!==void 0){this.scroller.setScrollTop(e.top)}};t.prototype.getHitFootprint=function(e){return e.component.getHitFootprint(e)};t.prototype.getHitEl=function(e){return e.component.getHitEl(e)};t.prototype.executeEventRender=function(e){var t={},o={},n,r;for(n in e){r=e[n];if(r.getEventDef().isAllDay()){t[n]=r}else{o[n]=r}}this.timeGrid.executeEventRender(o);if(this.dayGrid){this.dayGrid.executeEventRender(t)}};t.prototype.renderDrag=function(e,t,o){var r=n(e),a=!1;a=this.timeGrid.renderDrag(r.timed,t,o);if(this.dayGrid){a=this.dayGrid.renderDrag(r.allDay,t,o)||a}return a};t.prototype.renderEventResize=function(e,t,o){var r=n(e);this.timeGrid.renderEventResize(r.timed,t,o);if(this.dayGrid){this.dayGrid.renderEventResize(r.allDay,t,o)}};t.prototype.renderSelectionFootprint=function(e){if(!e.isAllDay){this.timeGrid.renderSelectionFootprint(e)}else if(this.dayGrid){this.dayGrid.renderSelectionFootprint(e)}};return t}(d.default);t.default=f;f.prototype.timeGridClass=p.default;f.prototype.dayGridClass=c.default;u={renderHeadIntroHtml:function renderHeadIntroHtml(){var e=this.view,t=e.calendar,o=t.msToUtcMoment(this.dateProfile.renderUnzonedRange.startMs,!0),n;if(this.opt("weekNumbers")){n=o.format(this.opt("smallWeekFormat"));return"<th class=\"fc-axis fc-week-number "+t.theme.getClass("widgetHeader")+"\" "+e.axisStyleAttr()+">"+e.buildGotoAnchorHtml({date:o,type:"week",forceOff:1<this.colCnt},l.htmlEscape(n))+"</th>"}else{return"<th class=\"fc-axis "+t.theme.getClass("widgetHeader")+"\" "+e.axisStyleAttr()+"></th>"}},renderBgIntroHtml:function renderBgIntroHtml(){var e=this.view;return"<td class=\"fc-axis "+e.calendar.theme.getClass("widgetContent")+"\" "+e.axisStyleAttr()+"></td>"},renderIntroHtml:function renderIntroHtml(){var e=this.view;return"<td class=\"fc-axis\" "+e.axisStyleAttr()+"></td>"}};g={renderBgIntroHtml:function renderBgIntroHtml(){var e=this.view;return"<td class=\"fc-axis "+e.calendar.theme.getClass("widgetContent")+"\" "+e.axisStyleAttr()+"><span>"+e.getAllDayHtml()+"</span></td>"},renderIntroHtml:function renderIntroHtml(){var e=this.view;return"<td class=\"fc-axis\" "+e.axisStyleAttr()+"></td>"}};function n(e){var t=[],o=[],n;for(n=0;n<e.length;n++){if(e[n].componentFootprint.isAllDay){t.push(e[n])}else{o.push(e[n])}}return{allDay:t,timed:o}}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(3),a=o(0),l=o(4),s=o(40),d=o(56),p=o(60),c=o(55),u=o(53),g=o(5),f=o(12),y=o(246),m=o(247),v=o(248),h=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}],D=function(e){n.__extends(t,e);function t(t){var o=e.call(this,t)||this;o.processOptions();return o}t.prototype.componentFootprintToSegs=function(e){var t=this.sliceRangeByTimes(e.unzonedRange),o;for(o=0;o<t.length;o++){if(this.isRTL){t[o].col=this.daysPerRow-1-t[o].dayIndex}else{t[o].col=t[o].dayIndex}}return t};t.prototype.sliceRangeByTimes=function(e){var t=[],o,n;for(n=0;n<this.daysPerRow;n++){o=e.intersect(this.dayRanges[n]);if(o){t.push({startMs:o.startMs,endMs:o.endMs,isStart:o.isStart,isEnd:o.isEnd,dayIndex:n})}}return t};t.prototype.processOptions=function(){var e=this.opt("slotDuration"),t=this.opt("snapDuration"),o;e=a.duration(e);t=t?a.duration(t):e;this.slotDuration=e;this.snapDuration=t;this.snapsPerSlot=e/t;o=this.opt("slotLabelFormat");if(r.isArray(o)){o=o[o.length-1]}this.labelFormat=o||this.opt("smallTimeFormat");o=this.opt("slotLabelInterval");this.labelInterval=o?a.duration(o):this.computeLabelInterval(e)};t.prototype.computeLabelInterval=function(e){var t,o,n;for(t=h.length-1;0<=t;t--){o=a.duration(h[t]);n=l.divideDurationByDuration(o,e);if(l.isInt(n)&&1<n){return o}}return a.duration(e)};t.prototype.renderDates=function(e){this.dateProfile=e;this.updateDayTable();this.renderSlats();this.renderColumns()};t.prototype.unrenderDates=function(){this.unrenderColumns()};t.prototype.renderSkeleton=function(){var e=this.view.calendar.theme;this.el.html("<div class=\"fc-bg\"></div><div class=\"fc-slats\"></div><hr class=\"fc-divider "+e.getClass("widgetHeader")+"\" style=\"display:none\" />");this.bottomRuleEl=this.el.find("hr")};t.prototype.renderSlats=function(){var e=this.view.calendar.theme;this.slatContainerEl=this.el.find("> .fc-slats").html("<table class=\""+e.getClass("tableGrid")+"\">"+this.renderSlatRowHtml()+"</table>");this.slatEls=this.slatContainerEl.find("tr");this.slatCoordCache=new u.default({els:this.slatEls,isVertical:!0})};t.prototype.renderSlatRowHtml=function(){var e=this.view,t=e.calendar,o=t.theme,n=this.isRTL,r=this.dateProfile,i="",s=a.duration(+r.minTime),d=a.duration(0),p,c,u;while(s<r.maxTime){p=t.msToUtcMoment(r.renderUnzonedRange.startMs).time(s);c=l.isInt(l.divideDurationByDuration(d,this.labelInterval));u="<td class=\"fc-axis fc-time "+o.getClass("widgetContent")+"\" "+e.axisStyleAttr()+">"+(c?"<span>"+l.htmlEscape(p.format(this.labelFormat))+"</span>":"")+"</td>";i+="<tr data-time=\""+p.format("HH:mm:ss")+"\""+(c?"":" class=\"fc-minor\"")+">"+(!n?u:"")+"<td class=\""+o.getClass("widgetContent")+"\"/>"+(n?u:"")+"</tr>";s.add(this.slotDuration);d.add(this.slotDuration)}return i};t.prototype.renderColumns=function(){var e=this.dateProfile,t=this.view.calendar.theme;this.dayRanges=this.dayDates.map(function(t){return new g.default(t.clone().add(e.minTime),t.clone().add(e.maxTime))});if(this.headContainerEl){this.headContainerEl.html(this.renderHeadHtml())}this.el.find("> .fc-bg").html("<table class=\""+t.getClass("tableGrid")+"\">"+this.renderBgTrHtml(0)+"</table>");this.colEls=this.el.find(".fc-day, .fc-disabled-day");this.colCoordCache=new u.default({els:this.colEls,isHorizontal:!0});this.renderContentSkeleton()};t.prototype.unrenderColumns=function(){this.unrenderContentSkeleton()};t.prototype.renderContentSkeleton=function(){var e="",t,o;for(t=0;t<this.colCnt;t++){e+="<td><div class=\"fc-content-col\"><div class=\"fc-event-container fc-helper-container\"></div><div class=\"fc-event-container\"></div><div class=\"fc-highlight-container\"></div><div class=\"fc-bgevent-container\"></div><div class=\"fc-business-container\"></div></div></td>"}o=this.contentSkeletonEl=r("<div class=\"fc-content-skeleton\"><table><tr>"+e+"</tr></table></div>");this.colContainerEls=o.find(".fc-content-col");this.helperContainerEls=o.find(".fc-helper-container");this.fgContainerEls=o.find(".fc-event-container:not(.fc-helper-container)");this.bgContainerEls=o.find(".fc-bgevent-container");this.highlightContainerEls=o.find(".fc-highlight-container");this.businessContainerEls=o.find(".fc-business-container");this.bookendCells(o.find("tr"));this.el.append(o)};t.prototype.unrenderContentSkeleton=function(){if(this.contentSkeletonEl){this.contentSkeletonEl.remove();this.contentSkeletonEl=null;this.colContainerEls=null;this.helperContainerEls=null;this.fgContainerEls=null;this.bgContainerEls=null;this.highlightContainerEls=null;this.businessContainerEls=null}};t.prototype.groupSegsByCol=function(e){var t=[],o;for(o=0;o<this.colCnt;o++){t.push([])}for(o=0;o<e.length;o++){t[e[o].col].push(e[o])}return t};t.prototype.attachSegsByCol=function(e,t){var o,n,r;for(o=0;o<this.colCnt;o++){n=e[o];for(r=0;r<n.length;r++){t.eq(o).append(n[r].el)}}};t.prototype.getNowIndicatorUnit=function(){return"minute"};t.prototype.renderNowIndicator=function(e){if(!this.colContainerEls){return}var t=this.componentFootprintToSegs(new f.default(new g.default(e,e.valueOf()+1),!1)),o=this.computeDateTop(e,e),n=[],a;for(a=0;a<t.length;a++){n.push(r("<div class=\"fc-now-indicator fc-now-indicator-line\"></div>").css("top",o).appendTo(this.colContainerEls.eq(t[a].col))[0])}if(0<t.length){n.push(r("<div class=\"fc-now-indicator fc-now-indicator-arrow\"></div>").css("top",o).appendTo(this.el.find(".fc-content-skeleton"))[0])}this.nowIndicatorEls=r(n)};t.prototype.unrenderNowIndicator=function(){if(this.nowIndicatorEls){this.nowIndicatorEls.remove();this.nowIndicatorEls=null}};t.prototype.updateSize=function(t,o,n){e.prototype.updateSize.call(this,t,o,n);this.slatCoordCache.build();if(n){this.updateSegVerticals([].concat(this.eventRenderer.getSegs(),this.businessSegs||[]))}};t.prototype.getTotalSlatHeight=function(){return this.slatContainerEl.outerHeight()};t.prototype.computeDateTop=function(e,t){return this.computeTimeTop(a.duration(e-t.clone().stripTime()))};t.prototype.computeTimeTop=function(e){var t=this.slatEls.length,o=this.dateProfile,n=(e-o.minTime)/this.slotDuration,r,a;n=Math.max(0,n);n=Math.min(t,n);r=Math.floor(n);r=Math.min(r,t-1);a=n-r;return this.slatCoordCache.getTopPosition(r)+this.slatCoordCache.getHeight(r)*a};t.prototype.updateSegVerticals=function(e){this.computeSegVerticals(e);this.assignSegVerticals(e)};t.prototype.computeSegVerticals=function(e){var t=this.opt("agendaEventMinHeight"),o,n,r;for(o=0;o<e.length;o++){n=e[o];r=this.dayDates[n.dayIndex];n.top=this.computeDateTop(n.startMs,r);n.bottom=Math.max(n.top+t,this.computeDateTop(n.endMs,r))}};t.prototype.assignSegVerticals=function(e){var t,o;for(t=0;t<e.length;t++){o=e[t];o.el.css(this.generateSegVerticalCss(o))}};t.prototype.generateSegVerticalCss=function(e){return{top:e.top,bottom:-e.bottom}};t.prototype.prepareHits=function(){this.colCoordCache.build();this.slatCoordCache.build()};t.prototype.releaseHits=function(){this.colCoordCache.clear()};t.prototype.queryHit=function(e,t){var o=this.snapsPerSlot,n=this.colCoordCache,r=this.slatCoordCache;if(n.isLeftInBounds(e)&&r.isTopInBounds(t)){var a=n.getHorizontalIndex(e),i=r.getVerticalIndex(t);if(null!=a&&null!=i){var l=r.getTopOffset(i),s=r.getHeight(i),d=Math.floor((t-l)/s*o);return{col:a,snap:i*o+d,component:this,left:n.getLeftOffset(a),right:n.getRightOffset(a),top:l+d/o*s,bottom:l+(d+1)/o*s}}}};t.prototype.getHitFootprint=function(e){var t=this.getCellDate(0,e.col),o=this.computeSnapTime(e.snap),n;t.time(o);n=t.clone().add(this.snapDuration);return new f.default(new g.default(t,n),!1)};t.prototype.computeSnapTime=function(e){return a.duration(this.dateProfile.minTime+this.snapDuration*e)};t.prototype.getHitEl=function(e){return this.colEls.eq(e.col)};t.prototype.renderDrag=function(e,t,o){var n;if(t){if(e.length){this.helperRenderer.renderEventDraggingFootprints(e,t,o);return!0}}else{for(n=0;n<e.length;n++){this.renderHighlight(e[n].componentFootprint)}}};t.prototype.unrenderDrag=function(){this.unrenderHighlight();this.helperRenderer.unrender()};t.prototype.renderEventResize=function(e,t,o){this.helperRenderer.renderEventResizingFootprints(e,t,o)};t.prototype.unrenderEventResize=function(){this.helperRenderer.unrender()};t.prototype.renderSelectionFootprint=function(e){if(this.opt("selectHelper")){this.helperRenderer.renderComponentFootprint(e)}else{this.renderHighlight(e)}};t.prototype.unrenderSelection=function(){this.helperRenderer.unrender();this.unrenderHighlight()};return t}(s.default);t.default=D;D.prototype.eventRendererClass=y.default;D.prototype.businessHourRendererClass=d.default;D.prototype.helperRendererClass=m.default;D.prototype.fillRendererClass=v.default;p.default.mixInto(D);c.default.mixInto(D)},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(5),a=o(221),i=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.buildRenderRange=function(t,o,n){var a=e.prototype.buildRenderRange.call(this,t,o,n),i=this.msToUtcMoment(a.startMs,n),l=this.msToUtcMoment(a.endMs,n);if(/^(year|month)$/.test(o)){i.startOf("week");if(l.weekday()){l.add(1,"week").startOf("week")}}return new r.default(i,l)};return t}(a.default);t.default=i},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(0),a=o(4),i=o(62),l=o(253),s=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.setGridHeight=function(e,t){if(t){e*=this.dayGrid.rowCnt/6}a.distributeHeight(this.dayGrid.rowEls,e,!t)};t.prototype.isDateInOtherMonth=function(e,t){return e.month()!==r.utc(t.currentUnzonedRange.startMs).month()};return t}(i.default);t.default=s;s.prototype.dateProfileGeneratorClass=l.default},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(3),a=o(4),i=o(5),l=o(41),s=o(39),d=o(254),p=o(255),c=function(e){n.__extends(t,e);function t(t,o){var n=e.call(this,t,o)||this;n.segSelector=".fc-list-item";n.scroller=new s.default({overflowX:"hidden",overflowY:"auto"});return n}t.prototype.renderSkeleton=function(){this.el.addClass("fc-list-view "+this.calendar.theme.getClass("listView"));this.scroller.render();this.scroller.el.appendTo(this.el);this.contentEl=this.scroller.scrollEl};t.prototype.unrenderSkeleton=function(){this.scroller.destroy()};t.prototype.updateSize=function(t,o,n){e.prototype.updateSize.call(this,t,o,n);this.scroller.clear();if(!o){this.scroller.setHeight(this.computeScrollerHeight(t))}};t.prototype.computeScrollerHeight=function(e){return e-a.subtractInnerElHeight(this.el,this.scroller.el)};t.prototype.renderDates=function(e){var t=this.calendar,o=t.msToUtcMoment(e.renderUnzonedRange.startMs,!0),n=t.msToUtcMoment(e.renderUnzonedRange.endMs,!0),r=[],a=[];while(o<n){r.push(o.clone());a.push(new i.default(o,o.clone().add(1,"day")));o.add(1,"day")}this.dayDates=r;this.dayRanges=a};t.prototype.componentFootprintToSegs=function(e){var t=this.dayRanges,o,n,r,a=[];for(o=0;o<t.length;o++){n=e.unzonedRange.intersect(t[o]);if(n){r={startMs:n.startMs,endMs:n.endMs,isStart:n.isStart,isEnd:n.isEnd,dayIndex:o};a.push(r);if(!r.isEnd&&!e.isAllDay&&o+1<t.length&&e.unzonedRange.endMs<t[o+1].startMs+this.nextDayThreshold){r.endMs=e.unzonedRange.endMs;r.isEnd=!0;break}}}return a};t.prototype.renderEmptyMessage=function(){this.contentEl.html("<div class=\"fc-list-empty-wrap2\"><div class=\"fc-list-empty-wrap1\"><div class=\"fc-list-empty\">"+a.htmlEscape(this.opt("noEventsMessage"))+"</div></div></div>")};t.prototype.renderSegList=function(e){var t=this.groupSegsByDay(e),o,n,a,l=r("<table class=\"fc-list-table "+this.calendar.theme.getClass("tableList")+"\"><tbody/></table>"),s=l.find("tbody");for(o=0;o<t.length;o++){n=t[o];if(n){s.append(this.dayHeaderHtml(this.dayDates[o]));this.eventRenderer.sortEventSegs(n);for(a=0;a<n.length;a++){s.append(n[a].el)}}}this.contentEl.empty().append(l)};t.prototype.groupSegsByDay=function(e){var t=[],o,n;for(o=0;o<e.length;o++){n=e[o];(t[n.dayIndex]||(t[n.dayIndex]=[])).push(n)}return t};t.prototype.dayHeaderHtml=function(e){var t=this.opt("listDayFormat"),o=this.opt("listDayAltFormat");return"<tr class=\"fc-list-heading\" data-date=\""+e.format("YYYY-MM-DD")+"\"><td class=\""+(this.calendar.theme.getClass("tableListHeading")||this.calendar.theme.getClass("widgetHeader"))+"\" colspan=\"3\">"+(t?this.buildGotoAnchorHtml(e,{class:"fc-list-heading-main"},a.htmlEscape(e.format(t))):"")+(o?this.buildGotoAnchorHtml(e,{class:"fc-list-heading-alt"},a.htmlEscape(e.format(o))):"")+"</td></tr>"};return t}(l.default);t.default=c;c.prototype.eventRendererClass=d.default;c.prototype.eventPointingClass=p.default},,,,,,function(e,t,o){var n=o(3),r=o(16),a=o(4),i=o(220);o(10);o(47);o(256);o(257);o(260);o(261);o(262);o(263);n.fullCalendar=r;n.fn.fullCalendar=function(e){var t=Array.prototype.slice.call(arguments,1),o=this;this.each(function(r,l){var s=n(l),d=s.data("fullCalendar"),p;if("string"==typeof e){if("getCalendar"===e){if(!r){o=d}}else if("destroy"===e){if(d){d.destroy();s.removeData("fullCalendar")}}else if(!d){a.warn("Attempting to call a FullCalendar method on an element with no calendar.")}else if(n.isFunction(d[e])){p=d[e].apply(d,t);if(!r){o=p}if("destroy"===e){s.removeData("fullCalendar")}}else{a.warn("'"+e+"' is an unknown FullCalendar method.")}}else if(!d){d=new i.default(s,e);s.data("fullCalendar",d);d.render()}});return o};e.exports=r},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(48),a=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.setElement=function(e){this.el=e;this.bindGlobalHandlers();this.renderSkeleton();this.set("isInDom",!0)};t.prototype.removeElement=function(){this.unset("isInDom");this.unrenderSkeleton();this.unbindGlobalHandlers();this.el.remove()};t.prototype.bindGlobalHandlers=function(){};t.prototype.unbindGlobalHandlers=function(){};t.prototype.renderSkeleton=function(){};t.prototype.unrenderSkeleton=function(){};return t}(r.default);t.default=a},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.items=e||[]}e.prototype.proxyCall=function(e){for(var t=[],o=1;o<arguments.length;o++){t[o-1]=arguments[o]}var n=[];this.items.forEach(function(o){n.push(o[e].apply(o,t))});return n};return e}();t.default=o},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(3),r=o(4),a=function(){function e(e,t){this.el=null;this.viewsWithButtons=[];this.calendar=e;this.toolbarOptions=t}e.prototype.setToolbarOptions=function(e){this.toolbarOptions=e};e.prototype.render=function(){var e=this.toolbarOptions.layout,t=this.el;if(e){if(!t){t=this.el=n("<div class='fc-toolbar "+this.toolbarOptions.extraClasses+"'/>")}else{t.empty()}t.append(this.renderSection("left")).append(this.renderSection("right")).append(this.renderSection("center")).append("<div class=\"fc-clear\"/>")}else{this.removeElement()}};e.prototype.removeElement=function(){if(this.el){this.el.remove();this.el=null}};e.prototype.renderSection=function(e){var t=this,o=this.calendar,a=o.theme,i=o.optionsManager,l=o.viewSpecManager,s=n("<div class=\"fc-"+e+"\"/>"),d=this.toolbarOptions.layout[e],p=i.get("customButtons")||{},c=i.overrides.buttonText||{},u=i.get("buttonText")||{};if(d){n.each(d.split(" "),function(e,i){var d=n(),g=!0,f;n.each(i.split(","),function(e,i){var s,f,y,m,v,h,D,b,w;if("title"===i){d=d.add(n("<h2>&nbsp;</h2>"));g=!1}else{if(s=p[i]){y=function(e){if(s.click){s.click.call(b[0],e)}};(m=a.getCustomButtonIconClass(s))||(m=a.getIconClass(i))||(v=s.text)}else if(f=l.getViewSpec(i)){t.viewsWithButtons.push(i);y=function(){o.changeView(i)};(v=f.buttonTextOverride)||(m=a.getIconClass(i))||(v=f.buttonTextDefault)}else if(o[i]){y=function(){o[i]()};(v=c[i])||(m=a.getIconClass(i))||(v=u[i])}if(y){D=["fc-"+i+"-button",a.getClass("button"),a.getClass("stateDefault")];if(v){h=r.htmlEscape(v);w=""}else if(m){h="<span class='"+m+"'></span>";w=" aria-label=\""+i+"\""}b=n("<button type=\"button\" class=\""+D.join(" ")+"\""+w+">"+h+"</button>").click(function(e){if(!b.hasClass(a.getClass("stateDisabled"))){y(e);if(b.hasClass(a.getClass("stateActive"))||b.hasClass(a.getClass("stateDisabled"))){b.removeClass(a.getClass("stateHover"))}}}).mousedown(function(){b.not("."+a.getClass("stateActive")).not("."+a.getClass("stateDisabled")).addClass(a.getClass("stateDown"))}).mouseup(function(){b.removeClass(a.getClass("stateDown"))}).hover(function(){b.not("."+a.getClass("stateActive")).not("."+a.getClass("stateDisabled")).addClass(a.getClass("stateHover"))},function(){b.removeClass(a.getClass("stateHover")).removeClass(a.getClass("stateDown"))});d=d.add(b)}}});if(g){d.first().addClass(a.getClass("cornerLeft")).end().last().addClass(a.getClass("cornerRight")).end()}if(1<d.length){f=n("<div/>");if(g){f.addClass(a.getClass("buttonGroup"))}f.append(d);s.append(f)}else{s.append(d)}})}return s};e.prototype.updateTitle=function(e){if(this.el){this.el.find("h2").text(e)}};e.prototype.activateButton=function(e){if(this.el){this.el.find(".fc-"+e+"-button").addClass(this.calendar.theme.getClass("stateActive"))}};e.prototype.deactivateButton=function(e){if(this.el){this.el.find(".fc-"+e+"-button").removeClass(this.calendar.theme.getClass("stateActive"))}};e.prototype.disableButton=function(e){if(this.el){this.el.find(".fc-"+e+"-button").prop("disabled",!0).addClass(this.calendar.theme.getClass("stateDisabled"))}};e.prototype.enableButton=function(e){if(this.el){this.el.find(".fc-"+e+"-button").prop("disabled",!1).removeClass(this.calendar.theme.getClass("stateDisabled"))}};e.prototype.getViewsWithButtons=function(){return this.viewsWithButtons};return e}();t.default=a},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(3),a=o(4),i=o(32),l=o(31),s=o(48),d=function(e){n.__extends(t,e);function t(t,o){var n=e.call(this)||this;n._calendar=t;n.overrides=r.extend({},o);n.dynamicOverrides={};n.compute();return n}t.prototype.add=function(e){var t=0,o;this.recordOverrides(e);for(o in e){t++}if(1==t){if("height"===o||"contentHeight"===o||"aspectRatio"===o){this._calendar.updateViewSize(!0);return}else if("defaultDate"===o){return}else if("businessHours"===o){return}else if(/^(event|select)(Overlap|Constraint|Allow)$/.test(o)){return}else if("timezone"===o){this._calendar.view.flash("initialEvents");return}}this._calendar.renderHeader();this._calendar.renderFooter();this._calendar.viewsByType={};this._calendar.reinitView()};t.prototype.compute=function(){var e,t,o,n,r;e=a.firstDefined(this.dynamicOverrides.locale,this.overrides.locale);t=l.localeOptionHash[e];if(!t){e=i.globalDefaults.locale;t=l.localeOptionHash[e]||{}}o=a.firstDefined(this.dynamicOverrides.isRTL,this.overrides.isRTL,t.isRTL,i.globalDefaults.isRTL);n=o?i.rtlDefaults:{};this.dirDefaults=n;this.localeDefaults=t;r=i.mergeOptions([i.globalDefaults,n,t,this.overrides,this.dynamicOverrides]);l.populateInstanceComputableOptions(r);this.reset(r)};t.prototype.recordOverrides=function(e){for(var t in e){this.dynamicOverrides[t]=e[t]}this._calendar.viewSpecManager.clearCache();this.compute()};return t}(s.default);t.default=d},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),r=o(3),a=o(22),l=o(4),s=o(32),d=o(31),p=function(){function e(e,t){this.optionsManager=e;this._calendar=t;this.clearCache()}e.prototype.clearCache=function(){this.viewSpecCache={}};e.prototype.getViewSpec=function(e){var t=this.viewSpecCache;return t[e]||(t[e]=this.buildViewSpec(e))};e.prototype.getUnitViewSpec=function(e){var t,o,n;if(-1!==r.inArray(e,l.unitsDesc)){t=this._calendar.header.getViewsWithButtons();r.each(a.viewHash,function(e){t.push(e)});for(o=0;o<t.length;o++){n=this.getViewSpec(t[o]);if(n){if(n.singleUnit===e){return n}}}}};e.prototype.buildViewSpec=function(e){var t=this.optionsManager.overrides.views||{},o=[],r=[],i=[],d=e,p,c,u,g,f;while(d){p=a.viewHash[d];c=t[d];d=null;if("function"==typeof p){p={class:p}}if(p){o.unshift(p);r.unshift(p.defaults||{});u=u||p.duration;d=d||p.type}if(c){i.unshift(c);u=u||c.duration;d=d||c.type}}p=l.mergeProps(o);p.type=e;if(!p["class"]){return!1}u=u||this.optionsManager.dynamicOverrides.duration||this.optionsManager.overrides.duration;if(u){g=n.duration(u);if(g.valueOf()){f=l.computeDurationGreatestUnit(g,u);p.duration=g;p.durationUnit=f;if(1===g.as(f)){p.singleUnit=f;i.unshift(t[f]||{})}}}p.defaults=s.mergeOptions(r);p.overrides=s.mergeOptions(i);this.buildViewSpecOptions(p);this.buildViewSpecButtonText(p,e);return p};e.prototype.buildViewSpecOptions=function(e){var t=this.optionsManager;e.options=s.mergeOptions([s.globalDefaults,e.defaults,t.dirDefaults,t.localeDefaults,t.overrides,e.overrides,t.dynamicOverrides]);d.populateInstanceComputableOptions(e.options)};e.prototype.buildViewSpecButtonText=function(e,t){var n=this.optionsManager;function o(o){var n=o.buttonText||{};return n[t]||(e.buttonTextKey?n[e.buttonTextKey]:null)||(e.singleUnit?n[e.singleUnit]:null)}e.buttonTextOverride=o(n.dynamicOverrides)||o(n.overrides)||e.overrides.buttonText;e.buttonTextDefault=o(n.localeDefaults)||o(n.dirDefaults)||e.defaults.buttonText||o(s.globalDefaults)||(e.duration?this._calendar.humanizeDuration(e.duration):null)||t};return e}();t.default=p},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var r=o(3),a=o(4),i=o(243),l=o(52),s=o(6),d=o(38),p=o(13),c=o(18),u=o(11),g=o(7),f=function(){function e(e){this.calendar=e;this.stickySource=new l.default(e);this.otherSources=[]}e.prototype.requestEvents=function(e,t,o,n){if(n||!this.currentPeriod||!this.currentPeriod.isWithinRange(e,t)||o!==this.currentPeriod.timezone){this.setPeriod(new i.default(e,t,o))}return this.currentPeriod.whenReleased()};e.prototype.addSource=function(e){this.otherSources.push(e);if(this.currentPeriod){this.currentPeriod.requestSource(e)}};e.prototype.removeSource=function(e){a.removeExact(this.otherSources,e);if(this.currentPeriod){this.currentPeriod.purgeSource(e)}};e.prototype.removeAllSources=function(){this.otherSources=[];if(this.currentPeriod){this.currentPeriod.purgeAllSources()}};e.prototype.refetchSource=function(e){var t=this.currentPeriod;if(t){t.freeze();t.purgeSource(e);t.requestSource(e);t.thaw()}};e.prototype.refetchAllSources=function(){var e=this.currentPeriod;if(e){e.freeze();e.purgeAllSources();e.requestSources(this.getSources());e.thaw()}};e.prototype.getSources=function(){return[this.stickySource].concat(this.otherSources)};e.prototype.multiQuerySources=function(e){if(!e){e=[]}else if(!r.isArray(e)){e=[e]}var t=[],o;for(o=0;o<e.length;o++){t.push.apply(t,this.querySources(e[o]))}return t};e.prototype.querySources=function(e){var t=this.otherSources,o,a;for(o=0;o<t.length;o++){a=t[o];if(a===e){return[a]}}a=this.getSourceById(s.default.normalizeId(e));if(a){return[a]}e=d.default.parse(e,this.calendar);if(e){return r.grep(t,function(t){return n(e,t)})}};e.prototype.getSourceById=function(e){return r.grep(this.otherSources,function(t){return t.id&&t.id===e})[0]};e.prototype.setPeriod=function(e){if(this.currentPeriod){this.unbindPeriod(this.currentPeriod);this.currentPeriod=null}this.currentPeriod=e;this.bindPeriod(e);e.requestSources(this.getSources())};e.prototype.bindPeriod=function(e){this.listenTo(e,"release",function(e){this.trigger("release",e)})};e.prototype.unbindPeriod=function(e){this.stopListeningTo(e)};e.prototype.getEventDefByUid=function(e){if(this.currentPeriod){return this.currentPeriod.getEventDefByUid(e)}};e.prototype.addEventDef=function(e,t){if(t){this.stickySource.addEventDef(e)}if(this.currentPeriod){this.currentPeriod.addEventDef(e)}};e.prototype.removeEventDefsById=function(e){this.getSources().forEach(function(t){t.removeEventDefsById(e)});if(this.currentPeriod){this.currentPeriod.removeEventDefsById(e)}};e.prototype.removeAllEventDefs=function(){this.getSources().forEach(function(e){e.removeAllEventDefs()});if(this.currentPeriod){this.currentPeriod.removeAllEventDefs()}};e.prototype.mutateEventsWithId=function(e,t){var o=this.currentPeriod,n,r=[];if(o){o.freeze();n=o.getEventDefsById(e);n.forEach(function(e){o.removeEventDef(e);r.push(t.mutateSingle(e));o.addEventDef(e)});o.thaw();return function(){o.freeze();for(var e=0;e<n.length;e++){o.removeEventDef(n[e]);r[e]();o.addEventDef(n[e])}o.thaw()}}return function(){}};e.prototype.buildMutatedEventInstanceGroup=function(e,t){var o=this.getEventDefsById(e),n,r,a=[];for(n=0;n<o.length;n++){r=o[n].clone();if(r instanceof p.default){t.mutateSingle(r);a.push.apply(a,r.buildInstances())}}return new c.default(a)};e.prototype.freeze=function(){if(this.currentPeriod){this.currentPeriod.freeze()}};e.prototype.thaw=function(){if(this.currentPeriod){this.currentPeriod.thaw()}};e.prototype.getEventDefsById=function(e){return this.currentPeriod.getEventDefsById(e)};e.prototype.getEventInstances=function(){return this.currentPeriod.getEventInstances()};e.prototype.getEventInstancesWithId=function(e){return this.currentPeriod.getEventInstancesWithId(e)};e.prototype.getEventInstancesWithoutId=function(e){return this.currentPeriod.getEventInstancesWithoutId(e)};return e}();t.default=f;u.default.mixInto(f);g.default.mixInto(f);function n(e,t){return e.getPrimitive()===t.getPrimitive()}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(3),r=o(4),a=o(20),i=o(11),l=o(5),s=o(18),d=function(){function e(e,t,o){this.pendingCnt=0;this.freezeDepth=0;this.stuntedReleaseCnt=0;this.releaseCnt=0;this.start=e;this.end=t;this.timezone=o;this.unzonedRange=new l.default(e.clone().stripZone(),t.clone().stripZone());this.requestsByUid={};this.eventDefsByUid={};this.eventDefsById={};this.eventInstanceGroupsById={}}e.prototype.isWithinRange=function(e,t){return!e.isBefore(this.start)&&!t.isAfter(this.end)};e.prototype.requestSources=function(e){this.freeze();for(var t=0;t<e.length;t++){this.requestSource(e[t])}this.thaw()};e.prototype.requestSource=function(e){var t=this,o={source:e,status:"pending",eventDefs:null};this.requestsByUid[e.uid]=o;this.pendingCnt+=1;e.fetch(this.start,this.end,this.timezone).then(function(e){if("cancelled"!==o.status){o.status="completed";o.eventDefs=e;t.addEventDefs(e);t.pendingCnt--;t.tryRelease()}},function(){if("cancelled"!==o.status){o.status="failed";t.pendingCnt--;t.tryRelease()}})};e.prototype.purgeSource=function(e){var t=this.requestsByUid[e.uid];if(t){delete this.requestsByUid[e.uid];if("pending"===t.status){t.status="cancelled";this.pendingCnt--;this.tryRelease()}else if("completed"===t.status){t.eventDefs.forEach(this.removeEventDef.bind(this))}}};e.prototype.purgeAllSources=function(){var e=this.requestsByUid,t,o,n=0;for(t in e){o=e[t];if("pending"===o.status){o.status="cancelled"}else if("completed"===o.status){n++}}this.requestsByUid={};this.pendingCnt=0;if(n){this.removeAllEventDefs()}};e.prototype.getEventDefByUid=function(e){return this.eventDefsByUid[e]};e.prototype.getEventDefsById=function(e){var t=this.eventDefsById[e];if(t){return t.slice()}return[]};e.prototype.addEventDefs=function(e){for(var t=0;t<e.length;t++){this.addEventDef(e[t])}};e.prototype.addEventDef=function(e){var t=this.eventDefsById,o=e.id,n=t[o]||(t[o]=[]),r=e.buildInstances(this.unzonedRange),a;n.push(e);this.eventDefsByUid[e.uid]=e;for(a=0;a<r.length;a++){this.addEventInstance(r[a],o)}};e.prototype.removeEventDefsById=function(e){var t=this;this.getEventDefsById(e).forEach(function(e){t.removeEventDef(e)})};e.prototype.removeAllEventDefs=function(){var e=n.isEmptyObject(this.eventDefsByUid);this.eventDefsByUid={};this.eventDefsById={};this.eventInstanceGroupsById={};if(!e){this.tryRelease()}};e.prototype.removeEventDef=function(e){var t=this.eventDefsById,o=t[e.id];delete this.eventDefsByUid[e.uid];if(o){r.removeExact(o,e);if(!o.length){delete t[e.id]}this.removeEventInstancesForDef(e)}};e.prototype.getEventInstances=function(){var e=this.eventInstanceGroupsById,t=[],o;for(o in e){t.push.apply(t,e[o].eventInstances)}return t};e.prototype.getEventInstancesWithId=function(e){var t=this.eventInstanceGroupsById[e];if(t){return t.eventInstances.slice()}return[]};e.prototype.getEventInstancesWithoutId=function(e){var t=this.eventInstanceGroupsById,o=[],n;for(n in t){if(n!==e){o.push.apply(o,t[n].eventInstances)}}return o};e.prototype.addEventInstance=function(e,t){var o=this.eventInstanceGroupsById,n=o[t]||(o[t]=new s.default);n.eventInstances.push(e);this.tryRelease()};e.prototype.removeEventInstancesForDef=function(e){var t=this.eventInstanceGroupsById,o=t[e.id],n;if(o){n=r.removeMatching(o.eventInstances,function(t){return t.def===e});if(!o.eventInstances.length){delete t[e.id]}if(n){this.tryRelease()}}};e.prototype.tryRelease=function(){if(!this.pendingCnt){if(!this.freezeDepth){this.release()}else{this.stuntedReleaseCnt++}}};e.prototype.release=function(){this.releaseCnt++;this.trigger("release",this.eventInstanceGroupsById)};e.prototype.whenReleased=function(){var e=this;if(this.releaseCnt){return a.default.resolve(this.eventInstanceGroupsById)}else{return a.default.construct(function(t){e.one("release",t)})}};e.prototype.freeze=function(){if(!this.freezeDepth++){this.stuntedReleaseCnt=0}};e.prototype.thaw=function(){if(! --this.freezeDepth&&this.stuntedReleaseCnt&&!this.pendingCnt){this.release()}};return e}();t.default=d;i.default.mixInto(d)},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(3),r=o(4),a=o(7),i=function(){function e(e,t){this.isFollowing=!1;this.isHidden=!1;this.isAnimating=!1;this.options=t=t||{};this.sourceEl=e;this.parentEl=t.parentEl?n(t.parentEl):e.parent()}e.prototype.start=function(e){if(!this.isFollowing){this.isFollowing=!0;this.y0=r.getEvY(e);this.x0=r.getEvX(e);this.topDelta=0;this.leftDelta=0;if(!this.isHidden){this.updatePosition()}if(r.getEvIsTouch(e)){this.listenTo(n(document),"touchmove",this.handleMove)}else{this.listenTo(n(document),"mousemove",this.handleMove)}}};e.prototype.stop=function(e,t){var o=this,r=this.options.revertDuration,a=function(){o.isAnimating=!1;o.removeElement();o.top0=o.left0=null;if(t){t()}};if(this.isFollowing&&!this.isAnimating){this.isFollowing=!1;this.stopListeningTo(n(document));if(e&&r&&!this.isHidden){this.isAnimating=!0;this.el.animate({top:this.top0,left:this.left0},{duration:r,complete:a})}else{a()}}};e.prototype.getEl=function(){var e=this.el;if(!e){e=this.el=this.sourceEl.clone().addClass(this.options.additionalClass||"").css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex});e.addClass("fc-unselectable");e.appendTo(this.parentEl)}return e};e.prototype.removeElement=function(){if(this.el){this.el.remove();this.el=null}};e.prototype.updatePosition=function(){var e,t;this.getEl();if(null==this.top0){e=this.sourceEl.offset();t=this.el.offsetParent().offset();this.top0=e.top-t.top;this.left0=e.left-t.left}this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})};e.prototype.handleMove=function(e){this.topDelta=r.getEvY(e)-this.y0;this.leftDelta=r.getEvX(e)-this.x0;if(!this.isHidden){this.updatePosition()}};e.prototype.hide=function(){if(!this.isHidden){this.isHidden=!0;if(this.el){this.el.hide()}}};e.prototype.show=function(){if(this.isHidden){this.isHidden=!1;this.updatePosition();this.getEl().show()}};return e}();t.default=i;a.default.mixInto(i)},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(23),a=o(15),i=function(e){n.__extends(t,e);function t(t){var o=e.call(this,t)||this;o.dragListener=o.buildDragListener();return o}t.prototype.end=function(){this.dragListener.endInteraction()};t.prototype.bindToEl=function(e){var t=this.component,o=this.dragListener;t.bindDateHandlerToEl(e,"mousedown",function(e){if(!t.shouldIgnoreMouse()){o.startInteraction(e)}});t.bindDateHandlerToEl(e,"touchstart",function(e){if(!t.shouldIgnoreTouch()){o.startInteraction(e)}})};t.prototype.buildDragListener=function(){var e=this,t=this.component,o,n=new r.default(t,{scroll:this.opt("dragScroll"),interactionStart:function interactionStart(){o=n.origHit},hitOver:function hitOver(e,t){if(!t){o=null}},hitOut:function hitOut(){o=null},interactionEnd:function interactionEnd(n,r){var a;if(!r&&o){a=t.getSafeHitFootprint(o);if(a){e.view.triggerDayClick(a,t.getHitEl(o),n)}}}});n.shouldCancelTouchScroll=!1;n.scrollAlwaysKills=!0;return n};return t}(a.default);t.default=i},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var s=o(2),d=o(4),p=o(42),c=function(e){s.__extends(t,e);function t(t,o){var n=e.call(this,t,o)||this;n.timeGrid=t;return n}t.prototype.renderFgSegs=function(e){this.renderFgSegsIntoContainers(e,this.timeGrid.fgContainerEls)};t.prototype.renderFgSegsIntoContainers=function(e,t){var o,n;o=this.timeGrid.groupSegsByCol(e);for(n=0;n<this.timeGrid.colCnt;n++){this.updateFgSegCoords(o[n])}this.timeGrid.attachSegsByCol(o,t)};t.prototype.unrenderFgSegs=function(){if(this.fgSegs){this.fgSegs.forEach(function(e){e.el.remove()})}};t.prototype.computeEventTimeFormat=function(){return this.opt("noMeridiemTimeFormat")};t.prototype.computeDisplayEventEnd=function(){return!0};t.prototype.fgSegHtml=function(e,t){var o=this.view,n=o.calendar,r=e.footprint.componentFootprint,a=r.isAllDay,i=e.footprint.eventDef,l=o.isEventDefDraggable(i),s=!t&&e.isStart&&o.isEventDefResizableFromStart(i),p=!t&&e.isEnd&&o.isEventDefResizableFromEnd(i),c=this.getSegClasses(e,l,s||p),u=d.cssToStr(this.getSkinCss(i)),g,f,y;c.unshift("fc-time-grid-event","fc-v-event");if(o.isMultiDayRange(r.unzonedRange)){if(e.isStart||e.isEnd){var m=n.msToMoment(e.startMs),v=n.msToMoment(e.endMs);g=this._getTimeText(m,v,a);f=this._getTimeText(m,v,a,"LT");y=this._getTimeText(m,v,a,null,!1)}}else{g=this.getTimeText(e.footprint);f=this.getTimeText(e.footprint,"LT");y=this.getTimeText(e.footprint,null,!1)}return"<a class=\""+c.join(" ")+"\""+(i.url?" href=\""+d.htmlEscape(i.url)+"\"":"")+(u?" style=\""+u+"\"":"")+"><div class=\"fc-content\">"+(g?"<div class=\"fc-time\" data-start=\""+d.htmlEscape(y)+"\" data-full=\""+d.htmlEscape(f)+"\"><span>"+d.htmlEscape(g)+"</span></div>":"")+(i.title?"<div class=\"fc-title\">"+d.htmlEscape(i.title)+"</div>":"")+"</div><div class=\"fc-bg\"/>"+(p?"<div class=\"fc-resizer fc-end-resizer\" />":"")+"</a>"};t.prototype.updateFgSegCoords=function(e){this.timeGrid.computeSegVerticals(e);this.computeFgSegHorizontals(e);this.timeGrid.assignSegVerticals(e);this.assignFgSegHorizontals(e)};t.prototype.computeFgSegHorizontals=function(e){var t,o,l;this.sortEventSegs(e);t=n(e);r(t);if(o=t[0]){for(l=0;l<o.length;l++){a(o[l])}for(l=0;l<o.length;l++){this.computeFgSegForwardBack(o[l],0,0)}}};t.prototype.computeFgSegForwardBack=function(e,t,o){var n=e.forwardSegs,r;if(e.forwardCoord===void 0){if(!n.length){e.forwardCoord=1}else{this.sortForwardSegs(n);this.computeFgSegForwardBack(n[0],t+1,o);e.forwardCoord=n[0].backwardCoord}e.backwardCoord=e.forwardCoord-(e.forwardCoord-o)/(t+1);for(r=0;r<n.length;r++){this.computeFgSegForwardBack(n[r],0,e.forwardCoord)}}};t.prototype.sortForwardSegs=function(e){e.sort(d.proxy(this,"compareForwardSegs"))};t.prototype.compareForwardSegs=function(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||this.compareEventSegs(e,t)};t.prototype.assignFgSegHorizontals=function(e){var t,o;for(t=0;t<e.length;t++){o=e[t];o.el.css(this.generateFgSegHorizontalCss(o));if(30>o.bottom-o.top){o.el.addClass("fc-short")}}};t.prototype.generateFgSegHorizontalCss=function(e){var t=this.opt("slotEventOverlap"),o=e.backwardCoord,n=e.forwardCoord,r=this.timeGrid.generateSegVerticalCss(e),a=this.timeGrid.isRTL,i,l;if(t){n=Math.min(1,o+2*(n-o))}if(a){i=1-n;l=o}else{i=o;l=1-n}r.zIndex=e.level+1;r.left=100*i+"%";r.right=100*l+"%";if(t&&e.forwardPressure){r[a?"marginLeft":"marginRight"]=20}return r};return t}(p.default);t.default=c;function n(e){var t=[],o,n,r;for(o=0;o<e.length;o++){n=e[o];for(r=0;r<t.length;r++){if(!i(n,t[r]).length){break}}n.level=r;(t[r]||(t[r]=[])).push(n)}return t}function r(e){var t,o,n,r,a;for(t=0;t<e.length;t++){o=e[t];for(n=0;n<o.length;n++){r=o[n];r.forwardSegs=[];for(a=t+1;a<e.length;a++){i(r,e[a],r.forwardSegs)}}}}function a(e){var t=e.forwardSegs,o=0,n,r;if(e.forwardPressure===void 0){for(n=0;n<t.length;n++){r=t[n];a(r);o=Math.max(o,1+r.forwardPressure)}e.forwardPressure=o}}function i(e,t,o){if(void 0===o){o=[]}for(var n=0;n<t.length;n++){if(l(e,t[n])){o.push(t[n])}}return o}function l(e,t){return e.bottom>t.top&&e.top<t.bottom}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(3),a=o(58),i=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.renderSegs=function(e,t){var o=[],n,a,l;this.eventRenderer.renderFgSegsIntoContainers(e,this.component.helperContainerEls);for(n=0;n<e.length;n++){a=e[n];if(t&&t.col===a.col){l=t.el;a.el.css({left:l.css("left"),right:l.css("right"),"margin-left":l.css("margin-left"),"margin-right":l.css("margin-right")})}o.push(a.el[0])}return r(o)};return t}(a.default);t.default=i},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(57),a=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.attachSegEls=function(e,t){var o=this.component,n;if("bgEvent"===e){n=o.bgContainerEls}else if("businessHours"===e){n=o.businessContainerEls}else if("highlight"===e){n=o.highlightContainerEls}o.updateSegVerticals(t);o.attachSegsByCol(o.groupSegsByCol(t),n);return t.map(function(e){return e.el[0]})};return t}(r.default);t.default=a},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(3),r=o(4),a=o(7),i=function(){function e(e){this.isHidden=!0;this.margin=10;this.options=e||{}}e.prototype.show=function(){if(this.isHidden){if(!this.el){this.render()}this.el.show();this.position();this.isHidden=!1;this.trigger("show")}};e.prototype.hide=function(){if(!this.isHidden){this.el.hide();this.isHidden=!0;this.trigger("hide")}};e.prototype.render=function(){var e=this,t=this.options;this.el=n("<div class=\"fc-popover\"/>").addClass(t.className||"").css({top:0,left:0}).append(t.content).appendTo(t.parentEl);this.el.on("click",".fc-close",function(){e.hide()});if(t.autoHide){this.listenTo(n(document),"mousedown",this.documentMousedown)}};e.prototype.documentMousedown=function(e){if(this.el&&!n(e.target).closest(this.el).length){this.hide()}};e.prototype.removeElement=function(){this.hide();if(this.el){this.el.remove();this.el=null}this.stopListeningTo(n(document),"mousedown")};e.prototype.position=function(){var e=this.options,t=this.el.offsetParent().offset(),o=this.el.outerWidth(),a=this.el.outerHeight(),i=n(window),l=r.getScrollParent(this.el),s,d,p,c,u;c=e.top||0;if(e.left!==void 0){u=e.left}else if(e.right!==void 0){u=e.right-o}else{u=0}if(l.is(window)||l.is(document)){l=i;s=0;d=0}else{p=l.offset();s=p.top;d=p.left}s+=i.scrollTop();d+=i.scrollLeft();if(!1!==e.viewportConstrain){c=Math.min(c,s+l.outerHeight()-a-this.margin);c=Math.max(c,s+this.margin);u=Math.min(u,d+l.outerWidth()-o-this.margin);u=Math.max(u,d+this.margin)}this.el.css({top:c-t.top,left:u-t.left})};e.prototype.trigger=function(e){if(this.options[e]){this.options[e].apply(this,Array.prototype.slice.call(arguments,1))}};return e}();t.default=i;a.default.mixInto(i)},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var a=o(2),l=o(3),i=o(4),s=o(42),d=function(e){a.__extends(t,e);function t(t,o){var n=e.call(this,t,o)||this;n.dayGrid=t;return n}t.prototype.renderBgRanges=function(t){t=l.grep(t,function(e){return e.eventDef.isAllDay()});e.prototype.renderBgRanges.call(this,t)};t.prototype.renderFgSegs=function(e){var t=this.rowStructs=this.renderSegRows(e);this.dayGrid.rowEls.each(function(e,o){l(o).find(".fc-content-skeleton > table").append(t[e].tbodyEl)})};t.prototype.unrenderFgSegs=function(){var e=this.rowStructs||[],t;while(t=e.pop()){t.tbodyEl.remove()}this.rowStructs=null};t.prototype.renderSegRows=function(e){var t=[],o,n;o=this.groupSegRows(e);for(n=0;n<o.length;n++){t.push(this.renderSegRow(n,o[n]))}return t};t.prototype.renderSegRow=function(e,t){var n=this.dayGrid.colCnt,r=this.buildSegLevels(t),a=Math.max(1,r.length),s=l("<tbody/>"),d=[],p=[],c=[],u,g,f,y,m,v,h;function o(e){while(f<e){h=(c[u-1]||[])[f];if(h){h.attr("rowspan",parseInt(h.attr("rowspan")||1,10)+1)}else{h=l("<td/>");y.append(h)}p[u][f]=h;c[u][f]=h;f++}}for(u=0;u<a;u++){g=r[u];f=0;y=l("<tr/>");d.push([]);p.push([]);c.push([]);if(g){for(m=0;m<g.length;m++){v=g[m];o(v.leftCol);h=l("<td class=\"fc-event-container\"/>").append(v.el);if(v.leftCol!==v.rightCol){h.attr("colspan",v.rightCol-v.leftCol+1)}else{c[u][f]=h}while(f<=v.rightCol){p[u][f]=h;d[u][f]=v;f++}y.append(h)}}o(n);this.dayGrid.bookendCells(y);s.append(y)}return{row:e,tbodyEl:s,cellMatrix:p,segMatrix:d,segLevels:r,segs:t}};t.prototype.buildSegLevels=function(e){var t=[],o,a,l;this.sortEventSegs(e);for(o=0;o<e.length;o++){a=e[o];for(l=0;l<t.length;l++){if(!n(a,t[l])){break}}a.level=l;(t[l]||(t[l]=[])).push(a)}for(l=0;l<t.length;l++){t[l].sort(r)}return t};t.prototype.groupSegRows=function(e){var t=[],o;for(o=0;o<this.dayGrid.rowCnt;o++){t.push([])}for(o=0;o<e.length;o++){t[e[o].row].push(e[o])}return t};t.prototype.computeEventTimeFormat=function(){return this.opt("extraSmallTimeFormat")};t.prototype.computeDisplayEventEnd=function(){return 1===this.dayGrid.colCnt};t.prototype.fgSegHtml=function(e,t){var o=this.view,n=e.footprint.eventDef,r=e.footprint.componentFootprint.isAllDay,a=o.isEventDefDraggable(n),l=!t&&r&&e.isStart&&o.isEventDefResizableFromStart(n),s=!t&&r&&e.isEnd&&o.isEventDefResizableFromEnd(n),d=this.getSegClasses(e,a,l||s),p=i.cssToStr(this.getSkinCss(n)),c="",u,g;d.unshift("fc-day-grid-event","fc-h-event");if(e.isStart){u=this.getTimeText(e.footprint);if(u){c="<span class=\"fc-time\">"+i.htmlEscape(u)+"</span>"}}g="<span class=\"fc-title\">"+(i.htmlEscape(n.title||"")||"&nbsp;")+"</span>";return"<a class=\""+d.join(" ")+"\""+(n.url?" href=\""+i.htmlEscape(n.url)+"\"":"")+(p?" style=\""+p+"\"":"")+"><div class=\"fc-content\">"+(this.dayGrid.isRTL?g+" "+c:c+" "+g)+"</div>"+(l?"<div class=\"fc-resizer fc-start-resizer\" />":"")+(s?"<div class=\"fc-resizer fc-end-resizer\" />":"")+"</a>"};return t}(s.default);t.default=d;function n(e,t){var o,n;for(o=0;o<t.length;o++){n=t[o];if(n.leftCol<=e.rightCol&&n.rightCol>=e.leftCol){return!0}}return!1}function r(e,t){return e.leftCol-t.leftCol}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(3),a=o(58),i=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.renderSegs=function(e,t){var o=[],n;n=this.eventRenderer.renderSegRows(e);this.component.rowEls.each(function(e,a){var i=r(a),l=r("<div class=\"fc-helper-skeleton\"><table/></div>"),s,d;if(t&&t.row===e){d=t.el.position().top}else{s=i.find(".fc-content-skeleton tbody");if(!s.length){s=i.find(".fc-content-skeleton table")}d=s.position().top}l.css("top",d).find("table").append(n[e].tbodyEl);i.append(l);o.push(l[0])});return r(o)};return t}(a.default);t.default=i},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(3),a=o(57),i=function(e){n.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.fillSegTag="td";return t}t.prototype.attachSegEls=function(e,t){var o=[],n,r,a;for(n=0;n<t.length;n++){r=t[n];a=this.renderFillRow(e,r);this.component.rowEls.eq(r.row).append(a);o.push(a[0])}return o};t.prototype.renderFillRow=function(e,t){var o=this.component.colCnt,n=t.leftCol,a=t.rightCol+1,i,l,s;if("businessHours"===e){i="bgevent"}else{i=e.toLowerCase()}l=r("<div class=\"fc-"+i+"-skeleton\"><table><tr/></table></div>");s=l.find("tr");if(0<n){s.append("<td colspan=\""+n+"\"/>")}s.append(t.el.attr("colspan",a-n));if(a<o){s.append("<td colspan=\""+(o-a)+"\"/>")}this.component.bookendCells(s);return l};return t}(a.default);t.default=i},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(228),a=o(5),i=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.buildRenderRange=function(t,o,n){var r=e.prototype.buildRenderRange.call(this,t,o,n),i=this.msToUtcMoment(r.startMs,n),l=this.msToUtcMoment(r.endMs,n),s;if(this.opt("fixedWeekCount")){s=Math.ceil(l.diff(i,"weeks",!0));l.add(6-s,"weeks")}return new a.default(i,l)};return t}(r.default);t.default=i},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(4),a=o(42),i=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.renderFgSegs=function(e){if(!e.length){this.component.renderEmptyMessage()}else{this.component.renderSegList(e)}};t.prototype.fgSegHtml=function(e){var t=this.view,o=t.calendar,n=o.theme,a=e.footprint,i=a.eventDef,l=a.componentFootprint,s=i.url,d=["fc-list-item"].concat(this.getClasses(i)),p=this.getBgColor(i),c;if(l.isAllDay){c=t.getAllDayHtml()}else if(t.isMultiDayRange(l.unzonedRange)){if(e.isStart||e.isEnd){c=r.htmlEscape(this._getTimeText(o.msToMoment(e.startMs),o.msToMoment(e.endMs),l.isAllDay))}else{c=t.getAllDayHtml()}}else{c=r.htmlEscape(this.getTimeText(a))}if(s){d.push("fc-has-url")}return"<tr class=\""+d.join(" ")+"\">"+(this.displayEventTime?"<td class=\"fc-list-item-time "+n.getClass("widgetContent")+"\">"+(c||"")+"</td>":"")+"<td class=\"fc-list-item-marker "+n.getClass("widgetContent")+"\"><span class=\"fc-event-dot\""+(p?" style=\"background-color:"+p+"\"":"")+"></span></td><td class=\"fc-list-item-title "+n.getClass("widgetContent")+"\"><a"+(s?" href=\""+r.htmlEscape(s)+"\"":"")+">"+r.htmlEscape(i.title||"")+"</a></td></tr>"};t.prototype.computeEventTimeFormat=function(){return this.opt("mediumTimeFormat")};return t}(a.default);t.default=i},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(3),a=o(59),i=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.handleClick=function(t,o){var n;e.prototype.handleClick.call(this,t,o);if(!r(o.target).closest("a[href]").length){n=t.footprint.eventDef.url;if(n&&!o.isDefaultPrevented()){window.location.href=n}}};return t}(a.default);t.default=i},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(38),r=o(52),a=o(215),i=o(216);n.default.registerClass(r.default);n.default.registerClass(a.default);n.default.registerClass(i.default)},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(51),r=o(213),a=o(214),i=o(258),l=o(259);n.defineThemeSystem("standard",r.default);n.defineThemeSystem("jquery-ui",a.default);n.defineThemeSystem("bootstrap3",i.default);n.defineThemeSystem("bootstrap4",l.default)},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(19),a=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}return t}(r.default);t.default=a;a.prototype.classes={widget:"fc-bootstrap3",tableGrid:"table-bordered",tableList:"table",tableListHeading:"active",buttonGroup:"btn-group",button:"btn btn-default",stateActive:"active",stateDisabled:"disabled",today:"alert alert-info",popover:"panel panel-default",popoverHeader:"panel-heading",popoverContent:"panel-body",headerRow:"panel-default",dayRow:"panel-default",listView:"panel panel-default"};a.prototype.baseIconClass="glyphicon";a.prototype.iconClasses={close:"glyphicon-remove",prev:"glyphicon-chevron-left",next:"glyphicon-chevron-right",prevYear:"glyphicon-backward",nextYear:"glyphicon-forward"};a.prototype.iconOverrideOption="bootstrapGlyphicons";a.prototype.iconOverrideCustomButtonOption="bootstrapGlyphicon";a.prototype.iconOverridePrefix="glyphicon-"},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(19),a=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}return t}(r.default);t.default=a;a.prototype.classes={widget:"fc-bootstrap4",tableGrid:"table-bordered",tableList:"table",tableListHeading:"table-active",buttonGroup:"btn-group",button:"btn btn-primary",stateActive:"active",stateDisabled:"disabled",today:"alert alert-info",popover:"card card-primary",popoverHeader:"card-header",popoverContent:"card-body",headerRow:"table-bordered",dayRow:"table-bordered",listView:"card card-primary"};a.prototype.baseIconClass="fa";a.prototype.iconClasses={close:"fa-times",prev:"fa-chevron-left",next:"fa-chevron-right",prevYear:"fa-angle-double-left",nextYear:"fa-angle-double-right"};a.prototype.iconOverrideOption="bootstrapFontAwesome";a.prototype.iconOverrideCustomButtonOption="bootstrapFontAwesome";a.prototype.iconOverridePrefix="fa-"},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(22),r=o(62),a=o(229);n.defineView("basic",{class:r.default});n.defineView("basicDay",{type:"basic",duration:{days:1}});n.defineView("basicWeek",{type:"basic",duration:{weeks:1}});n.defineView("month",{class:a.default,duration:{months:1},defaults:{fixedWeekCount:!0}})},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(22),r=o(226);n.defineView("agenda",{class:r.default,defaults:{allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0}});n.defineView("agendaDay",{type:"agenda",duration:{days:1}});n.defineView("agendaWeek",{type:"agenda",duration:{weeks:1}})},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(22),r=o(230);n.defineView("list",{class:r.default,buttonTextKey:"list",defaults:{buttonText:"list",listDayFormat:"LL",noEventsMessage:"No events to display"}});n.defineView("listDay",{type:"list",duration:{days:1},defaults:{listDayFormat:"dddd"}});n.defineView("listWeek",{type:"list",duration:{weeks:1},defaults:{listDayFormat:"dddd",listDayAltFormat:"LL"}});n.defineView("listMonth",{type:"list",duration:{month:1},defaults:{listDayAltFormat:"dddd"}});n.defineView("listYear",{type:"list",duration:{year:1},defaults:{listDayAltFormat:"dddd"}})},function(e,t){Object.defineProperty(t,"__esModule",{value:!0})}])});
define ("local_intellicart/assigngroups",["jquery","core/ajax","core/notification"],function(a,b){return{list:function list(a){var c,c=b.call([{methodname:"local_intellicart_get_assignable_groups",args:a}])[0];return c},processResults:function processResults(b,c){var d=[];data=JSON.parse(c.resp)[0];a.each(data,function(a,b){d.push({value:b.id,label:b.name})});return d},transport:function transport(b,c,d){var e=a(".shopping-cart-formbox .mform input[name=\"id\"]").val(),f=a(".shopping-cart-formbox .mform input[name=\"type\"]").val();this.list({query:c,instanceid:e,type:f}).then(d)}}});
define ("local_intellicart/intellicart_statistic_datefilters",["jquery","core/ajax","local_intellicart/intellicart_charts","local_intellicart/flatpickr"],function(a,b,c){dashboardStatistic={init:function init(b,c,d,e){var f=["totalsales","averageordervalue","totalorders","returningcustomerrating","registrationvsenrollments","onlinestoreconversionrate"];a(".statistic-graph-clear").click(function(){var b=a(this).attr("data-filterId");a("#"+b).val("");a(this).addClass("hidden");a(this).prev().removeClass("hidden")});a(".dashboard-view-report .filter-toggler").click(function(){a(this).parents(".dashboard-graph-head").find(".statistic-graph-datefilter-wrapper").toggleClass("hidden")});for(i=0;i<f.length;i++){graphKey=f[i];targetFilterId="date-"+graphKey+"-target";document.getElementById(targetFilterId).flatpickr({mode:"range",dateFormat:"Y-m-d",defaultDate:[b,c],onReady:function onReady(){jQuery("<div/>",{class:"flatpickr-calendar-title",text:a("#"+targetFilterId).attr("title")}).appendTo(".flatpickr-calendar")},onChange:function onChange(b,c,d){if(2===b.length){a(d.input).parent().next().find("i.calendar-icon").addClass("hidden");a(d.input).parent().next().find("i.fa-times").removeClass("hidden")}}});compareFilterId="date-"+f[i]+"-compare";document.getElementById(compareFilterId).flatpickr({mode:"range",dateFormat:"Y-m-d",defaultDate:[d,e],onReady:function onReady(){jQuery("<div/>",{class:"flatpickr-calendar-title",text:a("#"+compareFilterId).attr("title")}).appendTo(".flatpickr-calendar")},onChange:function onChange(b,c,d){if(2===b.length){a(d.input).parent().next().find("i.calendar-icon").addClass("hidden");a(d.input).parent().next().find("i.fa-times").removeClass("hidden")}}})}this.initAction();this.drawAllCharts()},initAction:function initAction(){a(".statistic-graph-datefilter-item-button button").on("click",function(){var b=a(this).parent().prev().prev().find("input").val(),c=a(this).parent().prev().find("input").val(),d=a(this).attr("data-graphId");switch(d){case"totalsales":dashboardStatistic.drawTotalSales(d,b,c);break;case"averageordervalue":dashboardStatistic.drawAverageOrderValue(d,b,c);break;case"totalorders":dashboardStatistic.drawDashboardTotalOrders(d,b,c);break;case"returningcustomerrating":dashboardStatistic.drawDashboardReturningCustomerRating(d,b,c);break;case"registrationvsenrollments":dashboardStatistic.drawDashboardRegistrationVSEnrollments(d,b,c);break;case"onlinestoreconversionrate":dashboardStatistic.drawDashboardOnlineStoreConversionRate(d,b,c);break;}})},drawAllCharts:function drawAllCharts(){a(document).ready(function(){dashboardStatistic.drawDashboardReturningCustomerRating("returningcustomerrating","","");dashboardStatistic.drawDashboardTotalOrders("totalorders","","");dashboardStatistic.drawAverageOrderValue("averageordervalue","","");dashboardStatistic.drawTotalSales("totalsales","","");dashboardStatistic.drawDashboardRegistrationVSEnrollments("registrationvsenrollments","","");dashboardStatistic.drawDashboardOnlineStoreConversionRate("onlinestoreconversionrate","","")})},drawDashboardReturningCustomerRating:function drawDashboardReturningCustomerRating(a,d,e){dashboardStatistic.addLoader(a);promise=b.call([{methodname:"local_intellicart_get_statistic",args:{graphkey:a,daterange_target:d,daterange_compare:e}}])[0];promise.done(function(b){var d=JSON.parse(b.data),e=JSON.parse(b.headdata);c.dashboardReturningCustomerRating(d,e);dashboardStatistic.removeLoader(a)})},drawDashboardTotalOrders:function drawDashboardTotalOrders(a,d,e){dashboardStatistic.addLoader(a);promise=b.call([{methodname:"local_intellicart_get_statistic",args:{graphkey:a,daterange_target:d,daterange_compare:e}}])[0];promise.done(function(b){var d=JSON.parse(b.data),e=JSON.parse(b.headdata);c.dashboardTotalOrders(d,e);dashboardStatistic.removeLoader(a)})},drawAverageOrderValue:function drawAverageOrderValue(a,d,e){dashboardStatistic.addLoader(a);promise=b.call([{methodname:"local_intellicart_get_statistic",args:{graphkey:a,daterange_target:d,daterange_compare:e}}])[0];promise.done(function(b){var d=JSON.parse(b.data),e=JSON.parse(b.headdata);c.dashboardAverageOrderValue(d,e);dashboardStatistic.removeLoader(a)})},drawTotalSales:function drawTotalSales(a,d,e){dashboardStatistic.addLoader(a);promise=b.call([{methodname:"local_intellicart_get_statistic",args:{graphkey:a,daterange_target:d,daterange_compare:e}}])[0];promise.done(function(b){var d=JSON.parse(b.data),e=JSON.parse(b.headdata);c.dashboardTotalSales(d,e);dashboardStatistic.removeLoader(a)})},drawDashboardRegistrationVSEnrollments:function drawDashboardRegistrationVSEnrollments(a,d,e){dashboardStatistic.addLoader(a);promise=b.call([{methodname:"local_intellicart_get_statistic",args:{graphkey:a,daterange_target:d,daterange_compare:e}}])[0];promise.done(function(b){var d=JSON.parse(b.data),e=JSON.parse(b.headdata);c.dashboardRegistrationVSEnrollments(d,e);dashboardStatistic.removeLoader(a)})},drawDashboardOnlineStoreConversionRate:function drawDashboardOnlineStoreConversionRate(a,d,e){dashboardStatistic.addLoader(a);promise=b.call([{methodname:"local_intellicart_get_statistic",args:{graphkey:a,daterange_target:d,daterange_compare:e}}])[0];promise.done(function(b){var d=JSON.parse(b.headdata);c.dashboardOnlineStoreConversionRate(d);dashboardStatistic.removeLoader(a)})},addLoader:function addLoader(b){a(".dashboard-graph-statistic-wrapper[data-graph-id=\""+b+"\"]").addClass("loading")},removeLoader:function removeLoader(b){a(".dashboard-graph-statistic-wrapper[data-graph-id=\""+b+"\"]").removeClass("loading")}};return dashboardStatistic});
function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}!function(a,b){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define ("local_intellicart/moment",b):a.moment=b()}(this,function(){"use strict";var qb,rb;function aa(){return qb.apply(null,arguments)}function ba(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function ca(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function da(a){return void 0===a}function ea(a){return"number"==typeof a||"[object Number]"===Object.prototype.toString.call(a)}function a(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function i(a,b){var c,d=[];for(c=0;c<a.length;++c){d.push(b(a[c],c))}return d}function fa(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function l(a,b){for(var c in b){fa(b,c)&&(a[c]=b[c])}return fa(b,"toString")&&(a.toString=b.toString),fa(b,"valueOf")&&(a.valueOf=b.valueOf),a}function d(a,b,c,d){return Ka(a,b,c,d,!0).utc()}function ga(a){return null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),a._pf}function c(a){if(null==a._isValid){var b=ga(a),c=rb.call(b.parsedDateParts,function(a){return null!=a}),d=!isNaN(a._d.getTime())&&0>b.overflow&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.weekdayMismatch&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);if(a._strict&&(d=d&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour),null!=Object.isFrozen&&Object.isFrozen(a))return d;a._isValid=d}return a._isValid}function f(a){var b=d(NaN);return null!=a?l(ga(b),a):ga(b).userInvalidated=!0,b}rb=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;d<c;d++){if(d in b&&a.call(this,b[d],d,b))return!0}return!1};var sb=aa.momentProperties=[];function h(a,b){var c,d,e;if(da(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),da(b._i)||(a._i=b._i),da(b._f)||(a._f=b._f),da(b._l)||(a._l=b._l),da(b._strict)||(a._strict=b._strict),da(b._tzm)||(a._tzm=b._tzm),da(b._isUTC)||(a._isUTC=b._isUTC),da(b._offset)||(a._offset=b._offset),da(b._pf)||(a._pf=ga(b)),da(b._locale)||(a._locale=b._locale),0<sb.length)for(c=0;c<sb.length;c++){da(e=b[d=sb[c]])||(a[d]=e)}return a}var _=!1;function m(a){h(this,a),this._d=new Date(null!=a._d?a._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===_&&(_=!0,aa.updateOffset(this),_=!1)}function o(a){return a instanceof m||null!=a&&null!=a._isAMomentObject}function p(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function u(a){var b=+a,c=0;return 0!=b&&isFinite(b)&&(c=p(b)),c}function r(b,c,d){var e,f=Math.min(b.length,c.length),g=Math.abs(b.length-c.length),h=0;for(e=0;e<f;e++){(d&&b[e]!==c[e]||!d&&u(b[e])!==u(c[e]))&&h++}return h+g}function n(a){!1===aa.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function s(b,c){var d=!0;return l(function(){if(null!=aa.deprecationHandler&&aa.deprecationHandler(null,b),d){for(var e,f=[],g=0;g<arguments.length;g++){if(e="","object"==_typeof(arguments[g])){for(var h in e+="\n["+g+"] ",arguments[0]){e+=h+": "+arguments[0][h]+", "}e=e.slice(0,-2)}else e=arguments[g];f.push(e)}n(b+"\nArguments: "+Array.prototype.slice.call(f).join("")+"\n"+new Error().stack),d=!1}return c.apply(this,arguments)},c)}var tb,ub={};function k(a,b){null!=aa.deprecationHandler&&aa.deprecationHandler(a,b),ub[a]||(n(b),ub[a]=!0)}function v(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function w(a,b){var c,d=l({},a);for(c in b){fa(b,c)&&(ca(a[c])&&ca(b[c])?(d[c]={},l(d[c],a[c]),l(d[c],b[c])):null!=b[c]?d[c]=b[c]:delete d[c])}for(c in a){fa(a,c)&&!fa(b,c)&&ca(a[c])&&(d[c]=l({},d[c]))}return d}function b(a){null!=a&&this.set(a)}aa.suppressDeprecationWarnings=!1,aa.deprecationHandler=null,tb=Object.keys?Object.keys:function(a){var b,c=[];for(b in a){fa(a,b)&&c.push(b)}return c};var O={};function x(a,b){var c=a.toLowerCase();O[c]=O[c+"s"]=O[b]=a}function y(a){return"string"==typeof a?O[a]||O[a.toLowerCase()]:void 0}function D(a){var b,c,d={};for(c in a){fa(a,c)&&(b=y(c))&&(d[b]=a[c])}return d}var W={};function C(a,b){W[a]=b}function H(a,b,c){var d=""+Math.abs(a),e=b-d.length;return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}var F=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,N=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,G={},V={};function L(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(V[a]=e),b&&(V[b[0]]=function(){return H(e.apply(this,arguments),b[1],b[2])}),c&&(V[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function I(a,b){return a.isValid()?(b=A(b,a.localeData()),G[b]=G[b]||function(a){var b,c,d,e=a.match(F);for(b=0,c=e.length;b<c;b++){V[e[b]]?e[b]=V[e[b]]:e[b]=(d=e[b]).match(/\[[\s\S]/)?d.replace(/^\[|\]$/g,""):d.replace(/\\/g,"")}return function(b){var d,f="";for(d=0;d<c;d++){f+=v(e[d])?e[d].call(b,a):e[d]}return f}}(b),G[b](a)):a.localeData().invalidDate()}function A(a,b){var d=5;function c(a){return b.longDateFormat(a)||a}for(N.lastIndex=0;0<=d&&N.test(a);){a=a.replace(N,c),N.lastIndex=0,d-=1}return a}var E=/\d/,Z=/\d\d/,z=/\d{3}/,$=/\d{4}/,q=/[+-]?\d{6}/,J=/\d\d?/,B=/\d\d\d\d?/,Q=/\d\d\d\d\d\d?/,X=/\d{1,3}/,K=/\d{1,4}/,vb=/[+-]?\d{1,6}/,wb=/[+-]?\d+/,xb=/Z|[+-]\d\d(?::?\d\d)?/gi,yb=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,zb={};function j(a,b,c){zb[a]=v(b)?b:function(a){return a&&c?c:b}}function M(a,b){return fa(zb,a)?zb[a](b._strict,b._locale):new RegExp(P(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})))}function P(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Ab={};function R(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),ea(b)&&(d=function(a,c){c[b]=u(a)}),c=0;c<a.length;c++){Ab[a[c]]=d}}function S(a,b){R(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function T(a){return U(a)?366:365}function U(a){return 0==a%4&&0!=a%100||0==a%400}L("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a}),L(0,["YY",2],0,function(){return this.year()%100}),L(0,["YYYY",4],0,"year"),L(0,["YYYYY",5],0,"year"),L(0,["YYYYYY",6,!0],0,"year"),x("year","y"),C("year",1),j("Y",wb),j("YY",J,Z),j("YYYY",K,$),j("YYYYY",vb,q),j("YYYYYY",vb,q),R(["YYYYY","YYYYYY"],0),R("YYYY",function(a,b){b[0]=2===a.length?aa.parseTwoDigitYear(a):u(a)}),R("YY",function(a,b){b[0]=aa.parseTwoDigitYear(a)}),R("Y",function(a,b){b[0]=parseInt(a,10)}),aa.parseTwoDigitYear=function(a){return u(a)+(68<u(a)?1900:2e3)};var Bb,Cb=ha("FullYear",!0);function ha(a,b){return function(c){return null!=c?(ja(this,a,c),aa.updateOffset(this,b),this):ia(this,a)}}function ia(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function ja(a,b,c){a.isValid()&&!isNaN(c)&&("FullYear"===b&&U(a.year())&&1===a.month()&&29===a.date()?a._d["set"+(a._isUTC?"UTC":"")+b](c,a.month(),ka(c,a.month())):a._d["set"+(a._isUTC?"UTC":"")+b](c))}function ka(a,b){if(isNaN(a)||isNaN(b))return NaN;var c,d=(b%(c=12)+c)%c;return a+=(b-d)/12,1==d?U(a)?29:28:31-d%7%2}Bb=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b){if(this[b]===a)return b}return-1},L("M",["MM",2],"Mo",function(){return this.month()+1}),L("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),L("MMMM",0,0,function(a){return this.localeData().months(this,a)}),x("month","M"),C("month",8),j("M",J),j("MM",J,Z),j("MMM",function(a,b){return b.monthsShortRegex(a)}),j("MMMM",function(a,b){return b.monthsRegex(a)}),R(["M","MM"],function(a,b){b[1]=u(a)-1}),R(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[1]=e:ga(c).invalidMonth=a});var Db=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Eb=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function la(a,b){var c;if(!a.isValid())return a;if("string"==typeof b)if(/^\d+$/.test(b))b=u(b);else if(!ea(b=a.localeData().monthsParse(b)))return a;return c=Math.min(a.date(),ka(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a}function ma(a){return null!=a?(la(this,a),aa.updateOffset(this,!0),this):ia(this,"Month")}function na(){function a(a,b){return b.length-a.length}var b,c,e=[],f=[],g=[];for(b=0;12>b;b++){c=d([2e3,b]),e.push(this.monthsShort(c,"")),f.push(this.months(c,"")),g.push(this.months(c,"")),g.push(this.monthsShort(c,""))}for(e.sort(a),f.sort(a),g.sort(a),b=0;12>b;b++){e[b]=P(e[b]),f[b]=P(f[b])}for(b=0;24>b;b++){g[b]=P(g[b])}this._monthsRegex=new RegExp("^("+g.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function oa(a){var b=new Date(Date.UTC.apply(null,arguments));return 100>a&&0<=a&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}function pa(a,b,c){var d=7+b-c;return-((7+oa(a,0,d).getUTCDay()-b)%7)+d-1}function qa(b,c,d,e,f){var g,h,i=1+7*(c-1)+(7+d-e)%7+pa(b,e,f);return 0>=i?h=T(g=b-1)+i:i>T(b)?(g=b+1,h=i-T(b)):(g=b,h=i),{year:g,dayOfYear:h}}function ra(b,c,d){var e,f,g=pa(b.year(),c,d),h=Math.floor((b.dayOfYear()-g-1)/7)+1;return 1>h?e=h+sa(f=b.year()-1,c,d):h>sa(b.year(),c,d)?(e=h-sa(b.year(),c,d),f=b.year()+1):(f=b.year(),e=h),{week:e,year:f}}function sa(a,b,c){var d=pa(a,b,c),e=pa(a+1,b,c);return(T(a)-d+e)/7}L("w",["ww",2],"wo","week"),L("W",["WW",2],"Wo","isoWeek"),x("week","w"),x("isoWeek","W"),C("week",5),C("isoWeek",5),j("w",J),j("ww",J,Z),j("W",J),j("WW",J,Z),S(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=u(a)});L("d",0,"do","day"),L("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),L("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),L("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),L("e",0,0,"weekday"),L("E",0,0,"isoWeekday"),x("day","d"),x("weekday","e"),x("isoWeekday","E"),C("day",11),C("weekday",11),C("isoWeekday",11),j("d",J),j("e",J),j("E",J),j("dd",function(a,b){return b.weekdaysMinRegex(a)}),j("ddd",function(a,b){return b.weekdaysShortRegex(a)}),j("dddd",function(a,b){return b.weekdaysRegex(a)}),S(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);null!=e?b.d=e:ga(c).invalidWeekday=a}),S(["d","e","E"],function(a,b,c,d){b[d]=u(a)});var Fb=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function ta(){function b(a,b){return b.length-a.length}var c,e,f,g,h,j=[],a=[],k=[],m=[];for(c=0;7>c;c++){e=d([2e3,1]).day(c),f=this.weekdaysMin(e,""),g=this.weekdaysShort(e,""),h=this.weekdays(e,""),j.push(f),a.push(g),k.push(h),m.push(f),m.push(g),m.push(h)}for(j.sort(b),a.sort(b),k.sort(b),m.sort(b),c=0;7>c;c++){a[c]=P(a[c]),k[c]=P(k[c]),m[c]=P(m[c])}this._weekdaysRegex=new RegExp("^("+m.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+k.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+j.join("|")+")","i")}function ua(){return this.hours()%12||12}function va(a,b){L(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function wa(a,b){return b._meridiemParse}L("H",["HH",2],0,"hour"),L("h",["hh",2],0,ua),L("k",["kk",2],0,function(){return this.hours()||24}),L("hmm",0,0,function(){return""+ua.apply(this)+H(this.minutes(),2)}),L("hmmss",0,0,function(){return""+ua.apply(this)+H(this.minutes(),2)+H(this.seconds(),2)}),L("Hmm",0,0,function(){return""+this.hours()+H(this.minutes(),2)}),L("Hmmss",0,0,function(){return""+this.hours()+H(this.minutes(),2)+H(this.seconds(),2)}),va("a",!0),va("A",!1),x("hour","h"),C("hour",13),j("a",wa),j("A",wa),j("H",J),j("h",J),j("k",J),j("HH",J,Z),j("hh",J,Z),j("kk",J,Z),j("hmm",B),j("hmmss",Q),j("Hmm",B),j("Hmmss",Q),R(["H","HH"],3),R(["k","kk"],function(a,b){var c=u(a);b[3]=24===c?0:c}),R(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),R(["h","hh"],function(a,b,c){b[3]=u(a),ga(c).bigHour=!0}),R("hmm",function(a,b,c){var d=a.length-2;b[3]=u(a.substr(0,d)),b[4]=u(a.substr(d)),ga(c).bigHour=!0}),R("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[3]=u(a.substr(0,d)),b[4]=u(a.substr(d,2)),b[5]=u(a.substr(e)),ga(c).bigHour=!0}),R("Hmm",function(a,b){var c=a.length-2;b[3]=u(a.substr(0,c)),b[4]=u(a.substr(c))}),R("Hmmss",function(a,b){var c=a.length-4,d=a.length-2;b[3]=u(a.substr(0,c)),b[4]=u(a.substr(c,2)),b[5]=u(a.substr(d))});var Gb,Hb=ha("Hours",!0),Ib={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:Eb,week:{dow:0,doy:6},weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekdaysShort:Fb,meridiemParse:/[ap]\.?m?\.?/i},Jb={},Kb={};function xa(a){return a?a.toLowerCase().replace("_","-"):a}function ya(a){var b=null;if(!Jb[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=Gb._abbr,require("./locale/"+a),za(b)}catch(a){}return Jb[a]}function za(a,b){var c;return a&&((c=da(b)?Ba(a):Aa(a,b))?Gb=c:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+a+" not found. Did you forget to load it?")),Gb._abbr}function Aa(a,c){if(null!==c){var d,e=Ib;if(c.abbr=a,null!=Jb[a])k("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),e=Jb[a]._config;else if(null!=c.parentLocale)if(null!=Jb[c.parentLocale])e=Jb[c.parentLocale]._config;else{if(null==(d=ya(c.parentLocale)))return Kb[c.parentLocale]||(Kb[c.parentLocale]=[]),Kb[c.parentLocale].push({name:a,config:c}),null;e=d._config}return Jb[a]=new b(w(e,c)),Kb[a]&&Kb[a].forEach(function(a){Aa(a.name,a.config)}),za(a),Jb[a]}return delete Jb[a],null}function Ba(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Gb;if(!ba(a)){if(b=ya(a))return b;a=[a]}return function(a){for(var b,c,d,e,f=0;f<a.length;){for(b=(e=xa(a[f]).split("-")).length,c=(c=xa(a[f+1]))?c.split("-"):null;0<b;){if(d=ya(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&r(e,c,!0)>=b-1)break;b--}f++}return Gb}(a)}function Ca(a){var b,c=a._a;return c&&-2===ga(a).overflow&&(b=0>c[1]||11<c[1]?1:1>c[2]||c[2]>ka(c[0],c[1])?2:0>c[3]||24<c[3]||24===c[3]&&(0!==c[4]||0!==c[5]||0!==c[6])?3:0>c[4]||59<c[4]?4:0>c[5]||59<c[5]?5:0>c[6]||999<c[6]?6:-1,ga(a)._overflowDayOfYear&&(b<0||b>2)&&(b=2),ga(a)._overflowWeeks&&-1===b&&(b=7),ga(a)._overflowWeekday&&-1===b&&(b=8),ga(a).overflow=b),a}function Da(a,b,c){return null!=a?a:null!=b?b:c}function Ea(b){var c,d,e,f,g,h=[];if(!b._d){var j,k;for(j=b,k=new Date(aa.now()),e=j._useUTC?[k.getUTCFullYear(),k.getUTCMonth(),k.getUTCDate()]:[k.getFullYear(),k.getMonth(),k.getDate()],b._w&&null==b._a[2]&&null==b._a[1]&&function(b){var c,d,e,f,g,h,j,k;if(null!=(c=b._w).GG||null!=c.W||null!=c.E)g=1,h=4,d=Da(c.GG,b._a[0],ra(La(),1,4).year),e=Da(c.W,1),(1>(f=Da(c.E,1))||7<f)&&(k=!0);else{g=b._locale._week.dow,h=b._locale._week.doy;var m=ra(La(),g,h);d=Da(c.gg,b._a[0],m.year),e=Da(c.w,m.week),null!=c.d?(0>(f=c.d)||6<f)&&(k=!0):null!=c.e?(f=c.e+g,(0>c.e||6<c.e)&&(k=!0)):f=g}1>e||e>sa(d,g,h)?ga(b)._overflowWeeks=!0:null!=k?ga(b)._overflowWeekday=!0:(j=qa(d,e,f,g,h),b._a[0]=j.year,b._dayOfYear=j.dayOfYear)}(b),null!=b._dayOfYear&&(g=Da(b._a[0],e[0]),(b._dayOfYear>T(g)||0===b._dayOfYear)&&(ga(b)._overflowDayOfYear=!0),d=oa(g,0,b._dayOfYear),b._a[1]=d.getUTCMonth(),b._a[2]=d.getUTCDate()),c=0;3>c&&null==b._a[c];++c){b._a[c]=h[c]=e[c]}for(;7>c;c++){b._a[c]=h[c]=null==b._a[c]?2===c?1:0:b._a[c]}24===b._a[3]&&0===b._a[4]&&0===b._a[5]&&0===b._a[6]&&(b._nextDay=!0,b._a[3]=0),b._d=(b._useUTC?oa:function(b,c,d,e,f,g,h){var a=new Date(b,c,d,e,f,g,h);return 100>b&&0<=b&&isFinite(a.getFullYear())&&a.setFullYear(b),a}).apply(null,h),f=b._useUTC?b._d.getUTCDay():b._d.getDay(),null!=b._tzm&&b._d.setUTCMinutes(b._d.getUTCMinutes()-b._tzm),b._nextDay&&(b._a[3]=24),b._w&&void 0!==b._w.d&&b._w.d!==f&&(ga(b).weekdayMismatch=!0)}}var Lb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Mb=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]];function Fa(b){var c,d,e,f,g,h,j=b._i,k=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/.exec(j)||/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/.exec(j);if(k){for(ga(b).iso=!0,c=0,d=Lb.length;c<d;c++){if(Lb[c][1].exec(k[1])){f=Lb[c][0],e=!1!==Lb[c][2];break}}if(null==f)return void(b._isValid=!1);if(k[3]){for(c=0,d=Mb.length;c<d;c++){if(Mb[c][1].exec(k[3])){g=(k[2]||" ")+Mb[c][0];break}}if(null==g)return void(b._isValid=!1)}if(!e&&null!=g)return void(b._isValid=!1);if(k[4]){if(!/Z|[+-]\d\d(?::?\d\d)?/.exec(k[4]))return void(b._isValid=!1);h="Z"}b._f=f+(g||"")+(h||""),Ia(b)}else b._isValid=!1}function Ga(b,c,d,e,f,g){var h=[function(a){var b=parseInt(a,10);{if(49>=b)return 2e3+b;if(999>=b)return 1900+b}return b}(b),Eb.indexOf(c),parseInt(d,10),parseInt(e,10),parseInt(f,10)];return g&&h.push(parseInt(g,10)),h}var Nb={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Ha(a){var b,c,d,e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/.exec(a._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim());if(e){var f=Ga(e[4],e[3],e[2],e[5],e[6],e[7]);if(b=e[1],c=f,d=a,b&&Fb.indexOf(b)!==new Date(c[0],c[1],c[2]).getDay()&&(ga(d).weekdayMismatch=!0,d._isValid=!1,1))return;a._a=f,a._tzm=function(a,b,c){if(a)return Nb[a];if(b)return 0;var d=parseInt(c,10),e=d%100;return 60*((d-e)/100)+e}(e[8],e[9],e[10]),a._d=oa.apply(null,a._a),a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),ga(a).rfc2822=!0}else a._isValid=!1}function Ia(b){if(b._f!==aa.ISO_8601){if(b._f!==aa.RFC_2822){b._a=[],ga(b).empty=!0;var c,e,g,j,k,l,n,p,q=""+b._i,v=q.length,f=0;for(g=A(b._f,b._locale).match(F)||[],c=0;c<g.length;c++){j=g[c],(e=(q.match(M(j,b))||[])[0])&&(0<(k=q.substr(0,q.indexOf(e))).length&&ga(b).unusedInput.push(k),q=q.slice(q.indexOf(e)+e.length),f+=e.length),V[j]?(e?ga(b).empty=!1:ga(b).unusedTokens.push(j),l=j,p=b,null!=(n=e)&&fa(Ab,l)&&Ab[l](n,p._a,p,l)):b._strict&&!e&&ga(b).unusedTokens.push(j)}ga(b).charsLeftOver=v-f,0<q.length&&ga(b).unusedInput.push(q),12>=b._a[3]&&!0===ga(b).bigHour&&0<b._a[3]&&(ga(b).bigHour=void 0),ga(b).parsedDateParts=b._a.slice(0),ga(b).meridiem=b._meridiem,b._a[3]=function(a,b,c){var d;if(null==c)return b;return null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?((d=a.isPM(c))&&12>b&&(b+=12),d||12!==b||(b=0),b):b}(b._locale,b._a[3],b._meridiem),Ea(b),Ca(b)}else Ha(b);}else Fa(b)}function Ja(b){var d,e,j,k,n=b._i,p=b._f;return b._locale=b._locale||Ba(b._l),null===n||void 0===p&&""===n?f({nullInput:!0}):("string"==typeof n&&(b._i=n=b._locale.preparse(n)),o(n)?new m(Ca(n)):(a(n)?b._d=n:ba(p)?function(a){var b,d,e,f,g;if(0===a._f.length)return ga(a).invalidFormat=!0,void(a._d=new Date(NaN));for(f=0;f<a._f.length;f++){g=0,b=h({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[f],Ia(b),c(b)&&(g+=ga(b).charsLeftOver,g+=10*ga(b).unusedTokens.length,ga(b).score=g,(null==e||g<e)&&(e=g,d=b))}l(a,d||b)}(b):p?Ia(b):da(e=(d=b)._i)?d._d=new Date(aa.now()):a(e)?d._d=new Date(e.valueOf()):"string"==typeof e?(j=d,null===(k=/^\/?Date\((\-?\d+)/i.exec(j._i))?(Fa(j),!1===j._isValid&&(delete j._isValid,Ha(j),!1===j._isValid&&(delete j._isValid,aa.createFromInputFallback(j)))):j._d=new Date(+k[1])):ba(e)?(d._a=i(e.slice(0),function(a){return parseInt(a,10)}),Ea(d)):ca(e)?function(a){if(!a._d){var b=D(a._i);a._a=i([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),Ea(a)}}(d):ea(e)?d._d=new Date(e):aa.createFromInputFallback(d),c(b)||(b._d=null),b))}function Ka(b,c,d,f,g){var a,h={};return!0!==d&&!1!==d||(f=d,d=void 0),(ca(b)&&function(a){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(a).length;for(var b in a){if(a.hasOwnProperty(b))return!1}return!0}(b)||ba(b)&&0===b.length)&&(b=void 0),h._isAMomentObject=!0,h._useUTC=h._isUTC=g,h._l=d,h._i=b,h._f=c,h._strict=f,(a=new m(Ca(Ja(h))))._nextDay&&(a.add(1,"d"),a._nextDay=void 0),a}function La(a,b,c,d){return Ka(a,b,c,d,!1)}aa.createFromInputFallback=s("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),aa.ISO_8601=function(){},aa.RFC_2822=function(){};var Ob=s("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=La.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:f()}),Pb=s("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=La.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:f()});function Ma(a,b){var c,d;if(1===b.length&&ba(b[0])&&(b=b[0]),!b.length)return La();for(c=b[0],d=1;d<b.length;++d){b[d].isValid()&&!b[d][a](c)||(c=b[d])}return c}var Qb=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Na(b){var c=D(b),e=c.year||0,f=c.quarter||0,g=c.month||0,h=c.week||0,i=c.day||0,a=c.hour||0,j=c.minute||0,k=c.second||0,l=c.millisecond||0;this._isValid=function(a){for(var b in a){if(-1===Bb.call(Qb,b)||null!=a[b]&&isNaN(a[b]))return!1}for(var c=!1,d=0;d<Qb.length;++d){if(a[Qb[d]]){if(c)return!1;parseFloat(a[Qb[d]])!==u(a[Qb[d]])&&(c=!0)}}return!0}(c),this._milliseconds=+l+1e3*k+6e4*j+60*(60*(1e3*a)),this._days=+i+7*h,this._months=+g+3*f+12*e,this._data={},this._locale=Ba(),this._bubble()}function Oa(a){return a instanceof Na}function Pa(a){return 0>a?-1*Math.round(-1*a):Math.round(a)}function Qa(a,b){L(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+H(~~(a/60),2)+b+H(~~a%60,2)})}Qa("Z",":"),Qa("ZZ",""),j("Z",xb),j("ZZ",xb),R(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ra(xb,a)});function Ra(a,b){var c=(b||"").match(a);if(null===c)return null;var d=((c[c.length-1]||[])+"").match(/([\+\-]|\d\d)/gi)||["-",0,0],e=60*d[1]+u(d[2]);return 0===e?0:"+"===d[0]?e:-e}function Sa(b,c){var d,e;return c._isUTC?(d=c.clone(),e=(o(b)||a(b)?b.valueOf():La(b).valueOf())-d.valueOf(),d._d.setTime(d._d.valueOf()+e),aa.updateOffset(d,!1),d):La(b).local()}function Ta(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Ua(){return!!this.isValid()&&this._isUTC&&0===this._offset}aa.updateOffset=function(){};function Va(a,b){var c,d,e,f=a,g=null;return Oa(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:ea(a)?(f={},b?f[b]=a:f.milliseconds=a):(g=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/.exec(a))?(c="-"===g[1]?-1:1,f={y:0,d:u(g[2])*c,h:u(g[3])*c,m:u(g[4])*c,s:u(g[5])*c,ms:u(Pa(1e3*g[6]))*c}):(g=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/.exec(a))?(c="-"===g[1]?-1:(g[1],1),f={y:Wa(g[2],c),M:Wa(g[3],c),w:Wa(g[4],c),d:Wa(g[5],c),h:Wa(g[6],c),m:Wa(g[7],c),s:Wa(g[8],c)}):null==f?f={}:"object"==_typeof(f)&&("from"in f||"to"in f)&&(e=function(a,b){var c;if(!a.isValid()||!b.isValid())return{milliseconds:0,months:0};b=Sa(b,a),a.isBefore(b)?c=Xa(a,b):((c=Xa(b,a)).milliseconds=-c.milliseconds,c.months=-c.months);return c}(La(f.from),La(f.to)),(f={}).ms=e.milliseconds,f.M=e.months),d=new Na(f),Oa(a)&&fa(a,"_locale")&&(d._locale=a._locale),d}function Wa(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function Xa(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function Ya(a,b){return function(c,d){var e;return null===d||isNaN(+d)||(k(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),e=c,c=d,d=e),Za(this,Va(c="string"==typeof c?+c:c,d),a),this}}function Za(b,c,d,e){var f=c._milliseconds,g=Pa(c._days),a=Pa(c._months);b.isValid()&&(e=null==e||e,a&&la(b,ia(b,"Month")+a*d),g&&ja(b,"Date",ia(b,"Date")+g*d),f&&b._d.setTime(b._d.valueOf()+f*d),e&&aa.updateOffset(b,g||a))}Va.fn=Na.prototype,Va.invalid=function(){return Va(NaN)};var Rb=Ya(1,"add"),Sb=Ya(-1,"subtract");function $a(a,b){var c=12*(b.year()-a.year())+(b.month()-a.month()),d=a.clone().add(c,"months");return-(c+(0>b-d?(b-d)/(d-a.clone().add(c-1,"months")):(b-d)/(a.clone().add(c+1,"months")-d)))||0}function _a(a){var b;return void 0===a?this._locale._abbr:(null!=(b=Ba(a))&&(this._locale=b),this)}aa.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",aa.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Tb=s("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});function ab(){return this._locale}function bb(a,b){L(0,[a,a.length],0,b)}function cb(a,b,c,d,e){var f;return null==a?ra(this,d,e).year:(b>(f=sa(a,d,e))&&(b=f),function(b,c,d,e,f){var g=qa(b,c,d,e,f),h=oa(g.year,0,g.dayOfYear);return this.year(h.getUTCFullYear()),this.month(h.getUTCMonth()),this.date(h.getUTCDate()),this}.call(this,a,b,c,d,e))}L(0,["gg",2],0,function(){return this.weekYear()%100}),L(0,["GG",2],0,function(){return this.isoWeekYear()%100}),bb("gggg","weekYear"),bb("ggggg","weekYear"),bb("GGGG","isoWeekYear"),bb("GGGGG","isoWeekYear"),x("weekYear","gg"),x("isoWeekYear","GG"),C("weekYear",1),C("isoWeekYear",1),j("G",wb),j("g",wb),j("GG",J,Z),j("gg",J,Z),j("GGGG",K,$),j("gggg",K,$),j("GGGGG",vb,q),j("ggggg",vb,q),S(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=u(a)}),S(["gg","GG"],function(a,b,c,d){b[d]=aa.parseTwoDigitYear(a)}),L("Q",0,"Qo","quarter"),x("quarter","Q"),C("quarter",7),j("Q",E),R("Q",function(a,b){b[1]=3*(u(a)-1)}),L("D",["DD",2],"Do","date"),x("date","D"),C("date",9),j("D",J),j("DD",J,Z),j("Do",function(a,b){return a?b._dayOfMonthOrdinalParse||b._ordinalParse:b._dayOfMonthOrdinalParseLenient}),R(["D","DD"],2),R("Do",function(a,b){b[2]=u(a.match(J)[0])});var Ub=ha("Date",!0);L("DDD",["DDDD",3],"DDDo","dayOfYear"),x("dayOfYear","DDD"),C("dayOfYear",4),j("DDD",X),j("DDDD",z),R(["DDD","DDDD"],function(a,b,c){c._dayOfYear=u(a)}),L("m",["mm",2],0,"minute"),x("minute","m"),C("minute",14),j("m",J),j("mm",J,Z),R(["m","mm"],4);var Vb=ha("Minutes",!1);L("s",["ss",2],0,"second"),x("second","s"),C("second",15),j("s",J),j("ss",J,Z),R(["s","ss"],5);var Wb,Xb=ha("Seconds",!1);for(L("S",0,0,function(){return~~(this.millisecond()/100)}),L(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),L(0,["SSS",3],0,"millisecond"),L(0,["SSSS",4],0,function(){return 10*this.millisecond()}),L(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),L(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),L(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),L(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),L(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),x("millisecond","ms"),C("millisecond",16),j("S",X,E),j("SS",X,Z),j("SSS",X,z),Wb="SSSS";9>=Wb.length;Wb+="S"){j(Wb,/\d+/)}function db(a,b){b[6]=u(1e3*("0."+a))}for(Wb="S";9>=Wb.length;Wb+="S"){R(Wb,db)}var Yb=ha("Milliseconds",!1);L("z",0,0,"zoneAbbr"),L("zz",0,0,"zoneName");var Zb=m.prototype;function eb(a){return a}Zb.add=Rb,Zb.calendar=function(b,c){var d=b||La(),e=Sa(d,this).startOf("day"),f=aa.calendarFormat(this,e)||"sameElse",g=c&&(v(c[f])?c[f].call(this,d):c[f]);return this.format(g||this.localeData().calendar(f,this,La(d)))},Zb.clone=function(){return new m(this)},Zb.diff=function(a,b,c){var d,e,f;if(!this.isValid())return NaN;if(!(d=Sa(a,this)).isValid())return NaN;switch(e=6e4*(d.utcOffset()-this.utcOffset()),b=y(b)){case"year":f=$a(this,d)/12;break;case"month":f=$a(this,d);break;case"quarter":f=$a(this,d)/3;break;case"second":f=(this-d)/1e3;break;case"minute":f=(this-d)/6e4;break;case"hour":f=(this-d)/36e5;break;case"day":f=(this-d-e)/864e5;break;case"week":f=(this-d-e)/6048e5;break;default:f=this-d;}return c?f:p(f)},Zb.endOf=function(a){return void 0===(a=y(a))||"millisecond"===a?this:("date"===a&&(a="day"),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms"))},Zb.format=function(a){a||(a=this.isUtc()?aa.defaultFormatUtc:aa.defaultFormat);var b=I(this,a);return this.localeData().postformat(b)},Zb.from=function(a,b){return this.isValid()&&(o(a)&&a.isValid()||La(a).isValid())?Va({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()},Zb.fromNow=function(a){return this.from(La(),a)},Zb.to=function(a,b){return this.isValid()&&(o(a)&&a.isValid()||La(a).isValid())?Va({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()},Zb.toNow=function(a){return this.to(La(),a)},Zb.get=function(a){return v(this[a=y(a)])?this[a]():this},Zb.invalidAt=function(){return ga(this).overflow},Zb.isAfter=function(a,b){var c=o(a)?a:La(a);return!(!this.isValid()||!c.isValid())&&("millisecond"===(b=y(da(b)?"millisecond":b))?this.valueOf()>c.valueOf():c.valueOf()<this.clone().startOf(b).valueOf())},Zb.isBefore=function(a,b){var c=o(a)?a:La(a);return!(!this.isValid()||!c.isValid())&&("millisecond"===(b=y(da(b)?"millisecond":b))?this.valueOf()<c.valueOf():this.clone().endOf(b).valueOf()<c.valueOf())},Zb.isBetween=function(a,b,c,d){return("("===(d=d||"()")[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))},Zb.isSame=function(a,b){var c,d=o(a)?a:La(a);return!(!this.isValid()||!d.isValid())&&("millisecond"===(b=y(b||"millisecond"))?this.valueOf()===d.valueOf():(c=d.valueOf(),this.clone().startOf(b).valueOf()<=c&&c<=this.clone().endOf(b).valueOf()))},Zb.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)},Zb.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)},Zb.isValid=function(){return c(this)},Zb.lang=Tb,Zb.locale=_a,Zb.localeData=ab,Zb.max=Pb,Zb.min=Ob,Zb.parsingFlags=function(){return l({},ga(this))},Zb.set=function(a,b){if("object"==_typeof(a))for(var c=function(a){var b=[];for(var c in a){b.push({unit:c,priority:W[c]})}return b.sort(function(a,b){return a.priority-b.priority}),b}(a=D(a)),d=0;d<c.length;d++){this[c[d].unit](a[c[d].unit])}else if(v(this[a=y(a)]))return this[a](b);return this},Zb.startOf=function(a){switch(a=y(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0);}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},Zb.subtract=Sb,Zb.toArray=function(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]},Zb.toObject=function(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}},Zb.toDate=function(){return new Date(this.valueOf())},Zb.toISOString=function(a){if(!this.isValid())return null;var b=!0!==a,c=b?this.clone().utc():this;return 0>c.year()||9999<c.year()?I(c,b?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):v(Date.prototype.toISOString)?b?this.toDate().toISOString():new Date(this.valueOf()+1e3*(60*this.utcOffset())).toISOString().replace("Z",I(c,"Z")):I(c,b?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},Zb.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="";this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z");var c="["+a+"(\"]",d=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY",f=b+"[\")]";return this.format(c+d+"-MM-DD[T]HH:mm:ss.SSS"+f)},Zb.toJSON=function(){return this.isValid()?this.toISOString():null},Zb.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Zb.unix=function(){return Math.floor(this.valueOf()/1e3)},Zb.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Zb.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Zb.year=Cb,Zb.isLeapYear=function(){return U(this.year())},Zb.weekYear=function(a){return cb.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Zb.isoWeekYear=function(a){return cb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)},Zb.quarter=Zb.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},Zb.month=ma,Zb.daysInMonth=function(){return ka(this.year(),this.month())},Zb.week=Zb.weeks=function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")},Zb.isoWeek=Zb.isoWeeks=function(a){var b=ra(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},Zb.weeksInYear=function(){var a=this.localeData()._week;return sa(this.year(),a.dow,a.doy)},Zb.isoWeeksInYear=function(){return sa(this.year(),1,4)},Zb.date=Ub,Zb.day=Zb.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b,c,d=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(b=a,c=this.localeData(),a="string"!=typeof b?b:isNaN(b)?"number"==typeof(b=c.weekdaysParse(b))?b:null:parseInt(b,10),this.add(a-d,"d")):d},Zb.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},Zb.isoWeekday=function(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=(c=a,d=this.localeData(),"string"==typeof c?d.weekdaysParse(c)%7||7:isNaN(c)?null:c);return this.day(this.day()%7?b:b-7)}return this.day()||7;var c,d},Zb.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")},Zb.hour=Zb.hours=Hb,Zb.minute=Zb.minutes=Vb,Zb.second=Zb.seconds=Xb,Zb.millisecond=Zb.milliseconds=Yb,Zb.utcOffset=function(a,b,c){var d,f=this._offset||0;if(!this.isValid())return null!=a?this:NaN;if(null!=a){if("string"==typeof a){if(null===(a=Ra(xb,a)))return this}else 16>Math.abs(a)&&!c&&(a*=60);return!this._isUTC&&b&&(d=Ta(this)),this._offset=a,this._isUTC=!0,null!=d&&this.add(d,"m"),f!==a&&(!b||this._changeInProgress?Za(this,Va(a-f,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,aa.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?f:Ta(this)},Zb.utc=function(a){return this.utcOffset(0,a)},Zb.local=function(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Ta(this),"m")),this},Zb.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var a=Ra(/Z|[+-]\d\d:?\d\d/gi,this._i);null!=a?this.utcOffset(a):this.utcOffset(0,!0)}return this},Zb.hasAlignedHourOffset=function(a){return!!this.isValid()&&(a=a?La(a).utcOffset():0,0==(this.utcOffset()-a)%60)},Zb.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Zb.isLocal=function(){return!!this.isValid()&&!this._isUTC},Zb.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Zb.isUtc=Ua,Zb.isUTC=Ua,Zb.zoneAbbr=function(){return this._isUTC?"UTC":""},Zb.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},Zb.dates=s("dates accessor is deprecated. Use date instead.",Ub),Zb.months=s("months accessor is deprecated. Use month instead",ma),Zb.years=s("years accessor is deprecated. Use year instead",Cb),Zb.zone=s("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}),Zb.isDSTShifted=s("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!da(this._isDSTShifted))return this._isDSTShifted;var a={};if(h(a,this),(a=Ja(a))._a){var b=a._isUTC?d(a._a):La(a._a);this._isDSTShifted=this.isValid()&&0<r(a._a,b.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var $b=b.prototype;function fb(a,b,c,e){var f=Ba(),g=d().set(e,b);return f[c](g,a)}function gb(a,b,c){if(ea(a)&&(b=a,a=void 0),a=a||"",null!=b)return fb(a,b,c,"month");var d,f=[];for(d=0;12>d;d++){f[d]=fb(a,d,c,"month")}return f}function hb(a,b,c,d){"boolean"==typeof a?(ea(b)&&(c=b,b=void 0),b=b||""):(c=b=a,a=!1,ea(b)&&(c=b,b=void 0),b=b||"");var f,g=Ba(),h=a?g._week.dow:0;if(null!=c)return fb(b,(c+h)%7,d,"day");var j=[];for(f=0;7>f;f++){j[f]=fb(b,(f+h)%7,d,"day")}return j}$b.calendar=function(a,b,c){var d=this._calendar[a]||this._calendar.sameElse;return v(d)?d.call(b,c):d},$b.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])},$b.invalidDate=function(){return this._invalidDate},$b.ordinal=function(a){return this._ordinal.replace("%d",a)},$b.preparse=eb,$b.postformat=eb,$b.relativeTime=function(a,b,c,d){var e=this._relativeTime[c];return v(e)?e(a,b,c,d):e.replace(/%d/i,a)},$b.pastFuture=function(a,b){var c=this._relativeTime[0<a?"future":"past"];return v(c)?c(b):c.replace(/%s/i,b)},$b.set=function(a){var b,c;for(c in a){v(b=a[c])?this[c]=b:this["_"+c]=b}this._config=a,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},$b.months=function(a,b){return a?ba(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||Db).test(b)?"format":"standalone"][a.month()]:ba(this._months)?this._months:this._months.standalone},$b.monthsShort=function(a,b){return a?ba(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[Db.test(b)?"format":"standalone"][a.month()]:ba(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},$b.monthsParse=function(a,b,c){var e,f,g;if(this._monthsParseExact)return function(b,c,e){var f,g,h,j=b.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],f=0;12>f;++f){h=d([2e3,f]),this._shortMonthsParse[f]=this.monthsShort(h,"").toLocaleLowerCase(),this._longMonthsParse[f]=this.months(h,"").toLocaleLowerCase()}return e?"MMM"===c?-1!==(g=Bb.call(this._shortMonthsParse,j))?g:null:-1!==(g=Bb.call(this._longMonthsParse,j))?g:null:"MMM"===c?-1!==(g=Bb.call(this._shortMonthsParse,j))?g:-1!==(g=Bb.call(this._longMonthsParse,j))?g:null:-1!==(g=Bb.call(this._longMonthsParse,j))?g:-1!==(g=Bb.call(this._shortMonthsParse,j))?g:null}.call(this,a,b,c);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),e=0;12>e;e++){if(f=d([2e3,e]),c&&!this._longMonthsParse[e]&&(this._longMonthsParse[e]=new RegExp("^"+this.months(f,"").replace(".","")+"$","i"),this._shortMonthsParse[e]=new RegExp("^"+this.monthsShort(f,"").replace(".","")+"$","i")),c||this._monthsParse[e]||(g="^"+this.months(f,"")+"|^"+this.monthsShort(f,""),this._monthsParse[e]=new RegExp(g.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[e].test(a))return e;if(c&&"MMM"===b&&this._shortMonthsParse[e].test(a))return e;if(!c&&this._monthsParse[e].test(a))return e}},$b.monthsRegex=function(a){return this._monthsParseExact?(fa(this,"_monthsRegex")||na.call(this),a?this._monthsStrictRegex:this._monthsRegex):(fa(this,"_monthsRegex")||(this._monthsRegex=yb),this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex)},$b.monthsShortRegex=function(a){return this._monthsParseExact?(fa(this,"_monthsRegex")||na.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):(fa(this,"_monthsShortRegex")||(this._monthsShortRegex=yb),this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex)},$b.week=function(a){return ra(a,this._week.dow,this._week.doy).week},$b.firstDayOfYear=function(){return this._week.doy},$b.firstDayOfWeek=function(){return this._week.dow},$b.weekdays=function(a,b){return a?ba(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]:ba(this._weekdays)?this._weekdays:this._weekdays.standalone},$b.weekdaysMin=function(a){return a?this._weekdaysMin[a.day()]:this._weekdaysMin},$b.weekdaysShort=function(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort},$b.weekdaysParse=function(a,b,c){var e,f,g;if(this._weekdaysParseExact)return function(b,c,e){var f,g,h,j=b.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],f=0;7>f;++f){h=d([2e3,1]).day(f),this._minWeekdaysParse[f]=this.weekdaysMin(h,"").toLocaleLowerCase(),this._shortWeekdaysParse[f]=this.weekdaysShort(h,"").toLocaleLowerCase(),this._weekdaysParse[f]=this.weekdays(h,"").toLocaleLowerCase()}return e?"dddd"===c?-1!==(g=Bb.call(this._weekdaysParse,j))?g:null:"ddd"===c?-1!==(g=Bb.call(this._shortWeekdaysParse,j))?g:null:-1!==(g=Bb.call(this._minWeekdaysParse,j))?g:null:"dddd"===c?-1!==(g=Bb.call(this._weekdaysParse,j))?g:-1!==(g=Bb.call(this._shortWeekdaysParse,j))?g:-1!==(g=Bb.call(this._minWeekdaysParse,j))?g:null:"ddd"===c?-1!==(g=Bb.call(this._shortWeekdaysParse,j))?g:-1!==(g=Bb.call(this._weekdaysParse,j))?g:-1!==(g=Bb.call(this._minWeekdaysParse,j))?g:null:-1!==(g=Bb.call(this._minWeekdaysParse,j))?g:-1!==(g=Bb.call(this._weekdaysParse,j))?g:-1!==(g=Bb.call(this._shortWeekdaysParse,j))?g:null}.call(this,a,b,c);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),e=0;7>e;e++){if(f=d([2e3,1]).day(e),c&&!this._fullWeekdaysParse[e]&&(this._fullWeekdaysParse[e]=new RegExp("^"+this.weekdays(f,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[e]=new RegExp("^"+this.weekdaysShort(f,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[e]=new RegExp("^"+this.weekdaysMin(f,"").replace(".",".?")+"$","i")),this._weekdaysParse[e]||(g="^"+this.weekdays(f,"")+"|^"+this.weekdaysShort(f,"")+"|^"+this.weekdaysMin(f,""),this._weekdaysParse[e]=new RegExp(g.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[e].test(a))return e;if(c&&"ddd"===b&&this._shortWeekdaysParse[e].test(a))return e;if(c&&"dd"===b&&this._minWeekdaysParse[e].test(a))return e;if(!c&&this._weekdaysParse[e].test(a))return e}},$b.weekdaysRegex=function(a){return this._weekdaysParseExact?(fa(this,"_weekdaysRegex")||ta.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex):(fa(this,"_weekdaysRegex")||(this._weekdaysRegex=yb),this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex)},$b.weekdaysShortRegex=function(a){return this._weekdaysParseExact?(fa(this,"_weekdaysRegex")||ta.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(fa(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=yb),this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},$b.weekdaysMinRegex=function(a){return this._weekdaysParseExact?(fa(this,"_weekdaysRegex")||ta.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(fa(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=yb),this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},$b.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)},$b.meridiem=function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"},za("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function ordinal(a){var b=a%10;return a+(1===u(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")}}),aa.lang=s("moment.lang is deprecated. Use moment.locale instead.",za),aa.langData=s("moment.langData is deprecated. Use moment.localeData instead.",Ba);var _b=Math.abs;function ib(a,b,c,d){var e=Va(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function jb(a){return 0>a?Math.floor(a):Math.ceil(a)}function kb(a){return 4800*a/146097}function lb(a){return 146097*a/4800}function mb(a){return function(){return this.as(a)}}var ac=mb("ms"),bc=mb("s"),cc=mb("m"),dc=mb("h"),ec=mb("d"),fc=mb("w"),gc=mb("M"),hc=mb("y");function nb(a){return function(){return this.isValid()?this._data[a]:NaN}}var ic=nb("milliseconds"),jc=nb("seconds"),kc=nb("minutes"),lc=nb("hours"),mc=nb("days"),nc=nb("months"),oc=nb("years"),pc=Math.round,qc={ss:44,s:45,m:45,h:22,d:26,M:11},rc=Math.abs;function ob(a){return(0<a)-(0>a)||+a}function pb(){if(!this.isValid())return this.localeData().invalidDate();var b,g,j=rc(this._milliseconds)/1e3,k=rc(this._days),q=rc(this._months);g=p((b=p(j/60))/60),j%=60,b%=60;var s=p(q/12),r=q%=12,a=k,o=g,u=b,l=j?j.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var h=0>d?"-":"",c=ob(this._months)!==ob(d)?"-":"",f=ob(this._days)!==ob(d)?"-":"",m=ob(this._milliseconds)!==ob(d)?"-":"";return h+"P"+(s?c+s+"Y":"")+(r?c+r+"M":"")+(a?f+a+"D":"")+(o||u||l?"T":"")+(o?m+o+"H":"")+(u?m+u+"M":"")+(l?m+l+"S":"")}var sc=Na.prototype;return sc.isValid=function(){return this._isValid},sc.abs=function(){var a=this._data;return this._milliseconds=_b(this._milliseconds),this._days=_b(this._days),this._months=_b(this._months),a.milliseconds=_b(a.milliseconds),a.seconds=_b(a.seconds),a.minutes=_b(a.minutes),a.hours=_b(a.hours),a.months=_b(a.months),a.years=_b(a.years),this},sc.add=function(a,b){return ib(this,a,b,1)},sc.subtract=function(a,b){return ib(this,a,b,-1)},sc.as=function(a){if(!this.isValid())return NaN;var b,c,d=this._milliseconds;if("month"===(a=y(a))||"year"===a)return b=this._days+d/864e5,c=this._months+kb(b),"month"===a?c:c/12;switch(b=this._days+Math.round(lb(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a);}},sc.asMilliseconds=ac,sc.asSeconds=bc,sc.asMinutes=cc,sc.asHours=dc,sc.asDays=ec,sc.asWeeks=fc,sc.asMonths=gc,sc.asYears=hc,sc.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*u(this._months/12):NaN},sc._bubble=function(){var b,c,d,f,g,h=this._milliseconds,j=this._days,k=this._months,l=this._data;return 0<=h&&0<=j&&0<=k||0>=h&&0>=j&&0>=k||(h+=864e5*jb(lb(k)+j),j=0,k=0),l.milliseconds=h%1e3,b=p(h/1e3),l.seconds=b%60,c=p(b/60),l.minutes=c%60,d=p(c/60),l.hours=d%24,k+=g=p(kb(j+=p(d/24))),j-=jb(lb(g)),f=p(k/12),k%=12,l.days=j,l.months=k,l.years=f,this},sc.clone=function(){return Va(this)},sc.get=function(a){return a=y(a),this.isValid()?this[a+"s"]():NaN},sc.milliseconds=ic,sc.seconds=jc,sc.minutes=kc,sc.hours=lc,sc.days=mc,sc.weeks=function(){return p(this.days()/7)},sc.months=nc,sc.years=oc,sc.humanize=function(b){if(!this.isValid())return this.localeData().invalidDate();var e,g,j,k,m,p,q,v,w,x,y,z=this.localeData(),c=(g=!b,j=z,k=Va(e=this).abs(),m=pc(k.as("s")),p=pc(k.as("m")),q=pc(k.as("h")),v=pc(k.as("d")),w=pc(k.as("M")),x=pc(k.as("y")),(y=m<=qc.ss&&["s",m]||m<qc.s&&["ss",m]||1>=p&&["m"]||p<qc.m&&["mm",p]||1>=q&&["h"]||q<qc.h&&["hh",q]||1>=v&&["d"]||v<qc.d&&["dd",v]||1>=w&&["M"]||w<qc.M&&["MM",w]||1>=x&&["y"]||["yy",x])[2]=g,y[3]=0<+e,y[4]=j,function(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}.apply(null,y));return b&&(c=z.pastFuture(+this,c)),z.postformat(c)},sc.toISOString=pb,sc.toString=pb,sc.toJSON=pb,sc.locale=_a,sc.localeData=ab,sc.toIsoString=s("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",pb),sc.lang=Tb,L("X",0,0,"unix"),L("x",0,0,"valueOf"),j("x",wb),j("X",/[+-]?\d+(\.\d{1,3})?/),R("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),R("x",function(a,b,c){c._d=new Date(u(a))}),aa.version="2.21.0",qb=La,aa.fn=Zb,aa.min=function(){return Ma("isBefore",[].slice.call(arguments,0))},aa.max=function(){return Ma("isAfter",[].slice.call(arguments,0))},aa.now=function(){return Date.now?Date.now():+new Date},aa.utc=d,aa.unix=function(a){return La(1e3*a)},aa.months=function(a,b){return gb(a,b,"months")},aa.isDate=a,aa.locale=za,aa.invalid=f,aa.duration=Va,aa.isMoment=o,aa.weekdays=function(a,b,c){return hb(a,b,c,"weekdays")},aa.parseZone=function(){return La.apply(null,arguments).parseZone()},aa.localeData=Ba,aa.isDuration=Oa,aa.monthsShort=function(a,b){return gb(a,b,"monthsShort")},aa.weekdaysMin=function(a,b,c){return hb(a,b,c,"weekdaysMin")},aa.defineLocale=Aa,aa.updateLocale=function(a,c){if(null!=c){var d,e,f=Ib;null!=(e=ya(a))&&(f=e._config),(d=new b(c=w(f,c))).parentLocale=Jb[a],Jb[a]=d,za(a)}else null!=Jb[a]&&(null!=Jb[a].parentLocale?Jb[a]=Jb[a].parentLocale:null!=Jb[a]&&delete Jb[a]);return Jb[a]},aa.locales=function(){return tb(Jb)},aa.weekdaysShort=function(a,b,c){return hb(a,b,c,"weekdaysShort")},aa.normalizeUnits=y,aa.relativeTimeRounding=function(a){return void 0===a?pc:"function"==typeof a&&(pc=a,!0)},aa.relativeTimeThreshold=function(a,b){return void 0!==qc[a]&&(void 0===b?qc[a]:(qc[a]=b,"s"===a&&(qc.ss=b-1),!0))},aa.calendarFormat=function(a,b){var c=a.diff(b,"days",!0);return-6>c?"sameElse":-1>c?"lastWeek":0>c?"lastDay":1>c?"sameDay":2>c?"nextDay":7>c?"nextWeek":"sameElse"},aa.prototype=Zb,aa.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},aa});
define ("local_intellicart/intellicart",["jquery","core/ajax","core/str","core/config","core/log","local_intellicart/flatpickr","core/modal_factory"],function(a,b,c,d,e,f,g){window.add_to_cart=function(b,c){var d=a(c).data("product-waitlistkey");h.addtocart(b,d);a("html,body").animate({scrollTop:a("#user-notifications").offset().top-100},"slow")};window.add_to_waitlist=function(b){h.addtocart(b);h.addtowaitlist(b);a("html,body").animate({scrollTop:a("#user-notifications").offset().top-100},"slow")};window.add_to_wishlist=function(b,c){h.addtowishlist(b,c);a("html,body").animate({scrollTop:a("#user-notifications").offset().top-100},"slow")};window.ic_toggle_seats=function(a,b){h.toggleseats(a,b)};window.ic_buy_seats=function(b,c){h.buyseats(b,c);a("html,body").animate({scrollTop:a("#user-notifications").offset().top-100},"slow")};window.add_session_to_cart=function(b,c){h.addsessiontocart(b);if(!a(c).parents(".session-item").length){a("html,body").animate({scrollTop:a("#user-notifications").offset().top-100},"slow")}};window.subscribe_product=function(b,c){h.subscribe_product(b,a(c).data("url"))};window.ic_buy_session_seats=function(b,c){h.buysessionseats(b,c);if(!a(c).parents(".session-item").length){a("html,body").animate({scrollTop:a("#user-notifications").offset().top-100},"slow")}};window.save_featured_product=function(c,d,f){var g=a(c).parent();a(c).addClass("disabled");b.call([{methodname:"local_intellicart_save_featured_product",args:{id:d,state:f}}])[0].done(function(b){try{a(c).remove();g.append(b.action_icon)}catch(a){e.debug(a.message)}}).fail(function(a){e.debug(a.message)})};window.add_checkout_notes=function(a,b){h.add_checkout_notes(a,b)};window.toggleCatCourses=function(b){a(b).parent(".category-item").toggleClass("open")};window.sessionAttend=function(c,d,f,g){b.call([{methodname:"local_intellicart_session_attend",args:{sessionid:c,checkoutid:d}}])[0].done(function(b){try{if(1==b.status){var c=a(g).closest(".sessions-attendance").find("#session_day").val();h.loadsessions(f,!1,c)}h.notification(b.message);a("html,body").animate({scrollTop:a("#user-notifications").offset().top-100},"slow")}catch(a){e.debug(a.message)}}).fail(function(a){e.debug(a.message)})};window.sessionAttendanceCancel=function(c,d,f,g){b.call([{methodname:"local_intellicart_session_attendance_cancel",args:{sessionid:c,checkoutid:d}}])[0].done(function(b){try{if(1==b.status){var c=a(g).closest(".sessions-attendance").find("#session_day").val();h.loadsessions(f,!1,c)}h.notification(b.message);a("html,body").animate({scrollTop:a("#user-notifications").offset().top-100},"slow")}catch(a){e.debug(a.message)}}).fail(function(a){e.debug(a.message)})};var h={loader:"<i class=\"loader fa fa-circle-o-notch fa-spin\"></i>",sessionscontainer:".sessions-list",tempbuttonhtml:"",modal:null,init:function init(){a(".add-coupon").on("click",function(){a(".product-coupons-form").toggleClass("hidden")});a(".security-policy-title a").on("click",function(){a(".security-policy").slideToggle("fast");a("html,body").animate({scrollTop:a(".security-policy-title").offset().top},"fast")});a(".add-notes").on("click",function(){a(".product-notes-form").toggleClass("hidden")});if(M.cfg!=void 0&&M.cfg.theme!=void 0){a("body").addClass("theme-"+M.cfg.theme)}a("body").on("click",".terms-confirm-yes",function(){h.modal.hide();var b=a(this).attr("data-type"),c=a(this).attr("data-url");if("product"==b){h.addtocart(a(this).attr("data-productid"),a(this).attr("data-waitlistkey"),1)}else if("subscription"==b){location=c}else{h.addsessiontocart(a(this).attr("data-productid"),1)}});a("body").on("click",".terms-confirm-no",function(){h.modal.hide()})},switchbutton:function switchbutton(b,c,d,e){var f=a("button[data-product-id=\""+b+"\"]").attr("onclick"),g=f.replace(d,e);a("button[data-product-id=\""+b+"\"]").attr("onclick",g);h.enablebutton("button[data-product-id=\""+b+"\"]",c,!0)},disablebutton:function disablebutton(b){a("button[data-product-id=\""+b+"\"]").html("<i class='fa fa-spin fa-spinner'></i>");a("button[data-product-id=\""+b+"\"]").prop("disabled",!0)},removebutton:function removebutton(b){a("button[data-product-id=\""+b+"\"]").remove()},enablebutton:function enablebutton(b,c,d){a("button[data-product-id=\""+b+"\"]").html(c);if(d){a("button[data-product-id=\""+b+"\"]").prop("disabled",!1)}},addtocart:function addtocart(d,f,i){if(f==void 0){f=""}if(i==void 0){i=0}c.get_strings([{key:"addtocart",component:"local_intellicart"},{key:"incart",component:"local_intellicart"},{key:"addtowaitlist",component:"local_intellicart"},{key:"inwaitlist",component:"local_intellicart"},{key:"producttermsconditions",component:"local_intellicart"},{key:"producttermsconfirmyes",component:"local_intellicart"},{key:"producttermsconfirmno",component:"local_intellicart"}]).then(function(c){h.disablebutton(d);b.call([{methodname:"local_intellicart_add_to_cart",args:{productid:d,waitlistkey:f,confirmterms:i}}])[0].done(function(b){try{if("confirmterms"==b.status){h.modal=g.create({title:c[4],body:b.message,footer:"<button class=\"btn btn-primary terms-confirm-yes\" data-type=\"product\" data-waitlistkey=\""+f+"\"  data-productid=\""+d+"\">"+c[5]+"</button><button class=\"btn btn-default terms-confirm-no\">"+c[6]+"</button>",large:!0}).then(function(a){h.modal=a;a.show();h.enablebutton(d,c[0],!0)})}else{if("redirecttocheckout"==b.status){if(b.data!=void 0&&b.data){var i=JSON.parse(b.data);if(i.checkouturl!=void 0){location=i.checkouturl}}}else if("incart"==b.status){h.enablebutton(d,c[1],!1)}else if("addtowaitlist"==b.status){h.switchbutton(d,c[2],"add_to_cart","add_to_waitlist")}else if("inwaitlist"==b.status){h.enablebutton(d,c[3],!1)}else{h.removebutton(d)}h.notification(b.message);if(0<b.productscount){a("#nav-intellicart-popover-container").find(".count-container").html(b.productscount).removeClass("hidden")}}}catch(a){e.debug(a.message);h.enablebutton(d,c[0],!0)}}).fail(function(a){e.debug(a.message);h.enablebutton(d,c[0],!0)})})},addtowaitlist:function addtowaitlist(a){c.get_strings([{key:"addtowaitlist",component:"local_intellicart"},{key:"inwaitlist",component:"local_intellicart"}]).then(function(c){h.disablebutton(a);b.call([{methodname:"local_intellicart_add_to_waitlist",args:{productid:a}}])[0].done(function(b){try{h.enablebutton(a,c[1],!1);h.notification(b.message)}catch(b){e.debug(b.message);h.enablebutton(a,c[0],!0)}}).fail(function(b){e.debug(b.message);h.enablebutton(a,c[0],!0)})})},addtowishlist:function addtowishlist(c,d){var f=a(d).attr("title"),g=a(d).html(),i=a(d).attr("data-link");a(d).html("<i class='fa fa-spin fa-spinner'></i>");a(d).prop("disabled",!0);b.call([{methodname:"local_intellicart_add_to_wishlist",args:{productid:c}}])[0].done(function(b){try{h.notification(b.message);if(b.status){a(d).html(b.icon);a(d).attr("href",i);a(d).removeAttr("onclick")}else{a(d).html(g)}if(b.status&&b.title){a(d).attr("title",b.title)}a(d).prop("disabled",!1)}catch(b){e.debug(b.message);a(d).html(g);a(d).prop("disabled",!1)}}).fail(function(b){e.debug(b.message);a(d).html(g);a(d).prop("disabled",!1)})},toggleseats:function toggleseats(b,c){var d=a(c).parent();a(c).toggleClass("hidden");a(d).find(".seats-number-box").toggleClass("hidden");if(a(c).hasClass("hidden")){a(d).find(".btn-seatsnumber").focus()}},buyseats:function buyseats(d,f){var g=a(f).parent(),i=parseInt(a(g).find("input[name=\"seatsnumber\"]").val());if(0<i){c.get_strings([{key:"buyseats",component:"local_intellicart"},{key:"incart",component:"local_intellicart"}]).then(function(c){h.disablebuyseatsbutton(d);b.call([{methodname:"local_intellicart_buy_seats",args:{productid:d,seats:i}}])[0].done(function(b){try{if("redirecttocheckout"==b.status){if(b.data!=void 0&&b.data){var f=JSON.parse(b.data);if(f.checkouturl!=void 0){location=f.checkouturl}}}else if("incart"==b.status){h.enablebuyseatsbutton(d,c[1],!1)}else if("warning"==b.status){h.enablebuyseatsbutton(d,c[0],!0)}else{h.enablebuyseatsbutton(d,c[0])}h.notification(b.message);if(0<b.productscount){a("#nav-intellicart-popover-container").find(".count-container").html(b.productscount).removeClass("hidden")}}catch(a){e.debug(a.message);h.enableseatsbutton(d,c[0],!0)}}).fail(function(a){e.debug(a.message);h.enableseatsbutton(d,c[0],!0)})})}},disablebuyseatsbutton:function disablebuyseatsbutton(b){var c=a(".buyseats-button-block[data-product-id=\""+b+"\"]");a(c).find(".btn-buy-seats").removeClass("hidden").html("<i class='fa fa-spin fa-spinner'></i>");a(c).find(".btn-buy-seats").prop("disabled",!0);a(c).find(".seats-number-box").addClass("hidden")},enablebuyseatsbutton:function enablebuyseatsbutton(b,c,d){var e=a(".buyseats-button-block[data-product-id=\""+b+"\"]");a(e).find(".btn-buy-seats").removeClass("hidden").html(c);a(e).find(".seats-number-box").addClass("hidden");if(d){a(e).find(".btn-buy-seats").prop("disabled",!1)}},notification:function notification(b,c){if(""==b){return}var d=c!=void 0?c:"#user-notifications";a(d).html("<div class=\"alert alert-info ic-notification alert-block fade in\" role=\"alert\">    <button type=\"button\" class=\"close\" data-dismiss=\"alert\">\xD7</button>"+b+"</div>");setTimeout(function(){a(".ic-notification").remove()},5e3)},clearnotification:function clearnotification(){a(".ic-notification").remove()},invoicestable:function invoicestable(){a("a.invoice-approve").on("click",function(){var c=a(this).attr("data-type-id"),d=a(this).parent().parent();b.call([{methodname:"local_intellicart_approve_invoice",args:{id:c}}])[0].done(function(){try{d.remove();location.reload()}catch(a){e.debug(a.message)}}).fail(function(a){e.debug(a.message)})});a("a.invoice-reject").on("click",function(){var c=a(this).attr("data-type-id"),d=a(this).parent().parent();b.call([{methodname:"local_intellicart_reject_invoice",args:{id:c}}])[0].done(function(){try{d.remove();location.reload()}catch(a){e.debug(a.message)}}).fail(function(a){e.debug(a.message)})})},initsessions:function initsessions(c,d,f){if(!d){h.disablebuybuttons()}a(".product-sessions").on("click",".sessions-list input[type=\"radio\"]",function(){var b=a(this).val(),d=a(this).closest(".product-sessions");h.getsessionstatus(c,b);a(d).find(".session-item").removeClass("open");a(this).parents(".session-item").addClass("open")});b.call([{methodname:"local_intellicart_get_product_sessions_days",args:{id:c,purchased:f,instructorid:0}}])[0].done(function(a){try{var b=JSON.parse(a.days);document.getElementById("session_day").flatpickr({dateFormat:"Y/m/d",onChange:function onChange(a,b){h.disablebuybuttons();h.loadsessions(c,f,b)},disable:[function(a){for(var c=0;c<b.length;c++){if(a.getTime()===new Date(b[c]).getTime())return!1}return!0}]})}catch(a){e.debug(a.message)}}).fail(function(a){e.debug(a.message)})},disablebuybuttons:function disablebuybuttons(){a(".btn-with-sessions").prop("disabled",!0)},loadsessions:function loadsessions(c,d,f){var g,i,j=0;a(h.sessionscontainer).each(function(){i=a(this).closest(".tab-pane").attr("id");if("productscatalog_calendar_view"!=i){g=a(this);g.html(h.loader);if(0<a(this).closest(".product-sessions.sessions-attendance").length){j=a(this).closest(".product-sessions.sessions-attendance").data("checkoutid");if(j==void 0){j=0}}b.call([{methodname:"local_intellicart_get_product_sessions_time",args:{id:c,day:f,purchased:d,instructorid:0,checkoutid:j}}])[0].done(function(a){try{g.html(a.sessions)}catch(a){e.debug(a.message)}}).fail(function(a){e.debug(a.message)})}})},getsessionstatus:function getsessionstatus(c,d){var f=a(".session-item[data-session-id=\""+d+"\"]");if(f.find(".session-notification-box").length){var g=".session-item[data-session-id=\""+d+"\"] .session-notification-box",i=!0,j=parseInt(f.attr("data-session-status"))}else{var i=!1,j=0}a(".session-item .product-add-button").addClass("hidden");f.removeClass("with-buttons");if(j&&f.find(".session-link").length){f.find(".product-add-button").removeClass("hidden");f.addClass("with-buttons")}h.disablebuybuttons();if(!i){a(".product-add-button").each(function(){if(!a(this).parents(".featuredproducts-box").length){a(this).append(h.loader)}})}if(!j){b.call([{methodname:"local_intellicart_get_session_status",args:{productid:c,sessionid:d}}])[0].done(function(b){a(".product-add-button").find(".loader").remove();try{if("allow"==b.status){h.clearnotification();if(i){f.find(".btn-with-sessions").prop("disabled",!1);f.addClass("with-buttons");f.find(".product-add-button").removeClass("hidden")}else{a(".btn-with-sessions").prop("disabled",!1)}}else{if(i){h.notification(b.message,g);if("noseats"==b.status){f.find(".product-add-button").find("button.btn-buy-seats").prop("disabled",!1)}}else{h.notification(b.message);if("noseats"==b.status){a(".product-add-button").find("button.btn-buy-seats").prop("disabled",!1)}}}}catch(a){e.debug(a.message)}}).fail(function(b){e.debug(b.message);a(".product-add-button").find(".loader").remove()})}},addsessiontocart:function addsessiontocart(d,f){if(f==void 0){f=0}c.get_strings([{key:"addtocart",component:"local_intellicart"},{key:"incart",component:"local_intellicart"},{key:"producttermsconditions",component:"local_intellicart"},{key:"producttermsconfirmyes",component:"local_intellicart"},{key:"producttermsconfirmno",component:"local_intellicart"}]).then(function(c){h.disablebutton(d);var i=0;if(a(h.sessionscontainer).length&&a(h.sessionscontainer+" input[name='sessionid']:checked").length){i=parseInt(a(h.sessionscontainer+" input[name='sessionid']:checked").val())}b.call([{methodname:"local_intellicart_add_session_to_cart",args:{productid:d,sessionid:i,confirmterms:f}}])[0].done(function(b){try{h.enablebutton(d,c[0],!1);if("redirecttocheckout"==b.status){if(b.data!=void 0&&b.data){var f=JSON.parse(b.data);if(f.checkouturl!=void 0){location=f.checkouturl}}}else if("confirmterms"==b.status){h.modal=g.create({title:c[2],body:b.message,footer:"<button class=\"btn btn-primary terms-confirm-yes\" data-type=\"session\" data-productid=\""+d+"\">"+c[3]+"</button><button class=\"btn btn-default terms-confirm-no\">"+c[4]+"</button>",large:!0}).then(function(a){h.modal=a;a.show();h.enablebutton(d,c[0],!0)})}else{if(a(".session-item[data-session-id=\""+i+"\"] .product-add-button").length){var j=".session-item[data-session-id=\""+i+"\"] .session-notification-box";h.notification(b.message,j);a(".session-item[data-session-id=\""+i+"\"] .product-add-button").addClass("hidden");a(".session-item[data-session-id=\""+i+"\"]").removeClass("with-buttons")}else{h.notification(b.message)}if(0<b.productscount){a("#nav-intellicart-popover-container").find(".count-container").html(b.productscount).removeClass("hidden")}}}catch(a){e.debug(a.message);h.enablebutton(d,c[0],!0)}}).fail(function(a){e.debug(a.message);h.enablebutton(d,c[0],!0)})})},buysessionseats:function buysessionseats(d,f){var g=a(f).parent(),i=parseInt(a(g).find("input[name=\"seatsnumber\"]").val());if(0<i){c.get_strings([{key:"buyseats",component:"local_intellicart"},{key:"incart",component:"local_intellicart"}]).then(function(c){h.disablebuyseatsbutton(d);var f=0;if(a(h.sessionscontainer).length&&a(h.sessionscontainer+" input[name='sessionid']:checked").length){f=parseInt(a(h.sessionscontainer+" input[name='sessionid']:checked").val())}b.call([{methodname:"local_intellicart_buy_session_seats",args:{productid:d,sessionid:f,seats:i}}])[0].done(function(b){try{if("redirecttocheckout"==b.status){if(b.data!=void 0&&b.data){var g=JSON.parse(b.data);if(g.checkouturl!=void 0){location=g.checkouturl}}}h.enablebuyseatsbutton(d,c[0],!0);if(a(".session-item[data-session-id=\""+f+"\"] .product-add-button").length){h.notification(b.message,notificationbox)}else{h.notification(b.message)}if(0<b.productscount){a("#nav-intellicart-popover-container").find(".count-container").html(b.productscount).removeClass("hidden")}}catch(a){e.debug(a.message);h.enableseatsbutton(d,c[0],!0)}}).fail(function(a){e.debug(a.message);h.enableseatsbutton(d,c[0],!0)})})}},subscribe_product:function subscribe_product(a,d){c.get_strings([{key:"producttermsconditions",component:"local_intellicart"},{key:"producttermsconfirmyes",component:"local_intellicart"},{key:"producttermsconfirmno",component:"local_intellicart"}]).then(function(c){b.call([{methodname:"local_intellicart_check_product_terms",args:{productid:a}}])[0].done(function(b){try{if(b.status){h.modal=g.create({title:c[0],body:b.message,footer:"<button class=\"btn btn-primary terms-confirm-yes\" data-url=\""+d+"\" data-type=\"subscription\" data-productid=\""+a+"\">"+c[1]+"</button><button class=\"btn btn-default terms-confirm-no\">"+c[2]+"</button>",large:!0}).then(function(a){h.modal=a;a.show()})}else{location=d}}catch(a){e.debug(a.message)}}).fail(function(a){e.debug(a.message)})})},add_checkout_notes:function add_checkout_notes(c,d){var f=a(d).html(),g=a(d).attr("data-href");a(d).addClass("disabled").html(h.loader);var i=a("#checkout_notes").val();b.call([{methodname:"local_intellicart_add_checkout_notes",args:{checkoutid:c,notes:i}}])[0].done(function(){location=g}).fail(function(a){e.debug(a.message);location=g})},groupsselection:function groupsselection(){if(a(".product-description select[name=\"groupid\"]").length){a(".product-description select[name=\"groupid\"]").each(function(){if(0==a(this).val()){a(".product-checkout-button .btn-primary").prop("disabled",!0)}})}a(".product-description select[name=\"groupid\"]").on("change",function(){var c=a(this).parents(".product-item").attr("data-item-id"),d=a(this).val();if(0<d){b.call([{methodname:"local_intellicart_save_product_group",args:{productid:c,groupid:d}}])[0].done(function(){a(".product-checkout-button .btn-primary").prop("disabled",!1);a(".product-description select[name=\"groupid\"]").each(function(){if(0==a(this).val()){a(".product-checkout-button .btn-primary").prop("disabled",!0)}})}).fail(function(a){e.debug(a.message)})}else{a(".product-checkout-button .btn-primary").prop("disabled",!0)}})}};return h});
define ("local_intellicart/getinstructorproducts",["jquery","core/ajax","core/notification"],function(a,b){return{list:function list(a){var c,c=b.call([{methodname:"local_intellicart_get_instructor_products",args:a}])[0];return c},processResults:function processResults(b,c){var d=[];data=JSON.parse(c.resp)[0];a.each(data,function(a,b){d.push({value:b.id,label:b.name})});return d},transport:function transport(a,b,c){this.list({query:b,userid:0}).then(c)}}});
define ("local_intellicart/private_tutoring",["jquery","core/ajax","core/log","block_products_catalog/bxslider","local_intellicart/intellicart"],function(a,b,c,d,e){var f={productid:0,container:"",loader:"<i class=\"loader fa fa-circle-o-notch fa-spin\"></i>",sliderbox:".productview-instructors-box",contentcontainer:".private-tutoring-instructors",instructoritemcontainer:".productview-instructor-item",instructordetailscontainer:".productview-instructors-details",init:function init(b){f.productid=b;f.container=a(f.contentcontainer);d.init(a,document,window,void 0);f.container.on("click",f.instructoritemcontainer,function(){f.container.find(f.instructoritemcontainer).removeClass("active");a(this).addClass("active");var b=a(this).attr("data-instructor-id");f.loadInstructorDetails(b)});a(f.instructordetailscontainer).on("click",".sessions-list input[type=\"radio\"]",function(){var c=a(this).val();e.getsessionstatus(b,c);a(".product-sessions").find(".session-item").removeClass("open");a(this).parents(".session-item").addClass("open")});a("#product_instructors").on("keyup","#search_instructors",function(){var b=a(this).val().toLowerCase();if(b){a(f.instructoritemcontainer).hide();a(f.instructoritemcontainer).find(".instructorname").each(function(){if(0<=a(this).text().toLowerCase().indexOf(b)){a(this).parents(f.instructoritemcontainer).show()}})}else{a(f.instructoritemcontainer).show()}});a("#product_instructors").on("keypress","#search_instructors",function(a){return 13!==a.which});if(a(f.sliderbox).length){a(f.sliderbox).bxSlider({controls:!0,pager:!1,infiniteLoop:!1,hideControlOnEnd:!0,responsive:!0,minSlides:3,maxSlides:3,moveSlides:3,slideWidth:300,slideMargin:15,shrinkItems:!0,touchEnabled:!1})}},loadInstructorDetails:function loadInstructorDetails(d){a(f.instructordetailscontainer).html(f.loader);b.call([{methodname:"local_intellicart_load_instructor_details",args:{productid:f.productid,instructorid:d,day:""}}])[0].done(function(g){try{a(f.instructordetailscontainer).html(g.content);b.call([{methodname:"local_intellicart_get_product_sessions_days",args:{id:f.productid,purchased:0,instructorid:d}}])[0].done(function(a){try{var b=JSON.parse(a.days);document.getElementById("instructor_session_day").flatpickr({dateFormat:"Y/m/d",onChange:function onChange(a,b){e.disablebuybuttons();f.loadInstructorSessions(d,b)},disable:[function(a){for(var c=0;c<b.length;c++){if(a.getTime()===new Date(b[c]).getTime())return!1}return!0}]})}catch(a){c.debug(a.message)}}).fail(function(a){c.debug(a.message)})}catch(b){c.debug(b.message);a(f.instructordetailscontainer).html("")}}).fail(function(b){c.debug(b.message);a(f.instructordetailscontainer).html("")})},loadInstructorSessions:function loadInstructorSessions(d,g){a(f.instructordetailscontainer).find(e.sessionscontainer).html(e.loader);b.call([{methodname:"local_intellicart_get_product_sessions_time",args:{id:f.productid,day:g,purchased:0,instructorid:d,checkoutid:0}}])[0].done(function(b){try{a(f.instructordetailscontainer).find(e.sessionscontainer).html(b.sessions)}catch(a){c.debug(a.message)}}).fail(function(a){c.debug(a.message)})}};return f});
define ("local_intellicart/intellicart_rating",["jquery","core/ajax","core/str","core/config","core/log"],function(a){var b={ratingstar:".rating-star",ratingselector:".review-form-rating .rating-star",ratinginput:".reviews-post-form .post-form input[name=\"rate\"]",init:function init(){a(b.ratingselector).on("mouseover",function(c){var d=a(c.target).attr("data-rating");a(b.ratingselector).addClass("active");a(b.ratingselector+"[data-rating=\""+d+"\"] ~ "+b.ratingstar).removeClass("active")}).on("mouseleave",function(){a(b.ratingselector).removeClass("active")}).on("click",function(c){var d=a(c.target).attr("data-rating");b.setRating(d)}).on("keyup",function(c){if(32===c.keyCode){var d=a(c.target).data("rating");b.setRating(d)}})},setRating:function setRating(c){a(b.ratinginput).val(c);a(b.ratingselector).addClass("selected");a(b.ratingselector+"[data-rating=\""+c+"\"] ~ "+b.ratingstar).removeClass("selected")}};return b});
define ("local_intellicart/assignvendors",["jquery","core/ajax","core/notification"],function(a,b){return{list:function list(a){var c,c=b.call([{methodname:"local_intellicart_get_assignable_vendors",args:a}])[0];return c},processResults:function processResults(b,c){var d=[];data=JSON.parse(c.resp)[0];a.each(data,function(a,b){d.push({value:b.id,label:b.name})});return d},transport:function transport(b,c,d){var e=a(".shopping-cart-formbox .mform input[name=\"id\"]").val(),f=a(".shopping-cart-formbox .mform input[name=\"type\"]").val();this.list({query:c,instanceid:e,type:f}).then(d)}}});
define ("local_intellicart/product_discountselect",["jquery","core/ajax","core/log"],function(a,b,c){var d={init:function init(){a(document).on("click",".discountselect",function(){var b=a(this),c=a(this).data("productid"),e=a(this).data("discountid");d.setDiscount(c,e,b)})},setDiscount:function setDiscount(a,d,e){b.call([{methodname:"local_intellicart_product_setdiscount",args:{productid:a,discountid:d}}])[0].done(function(a){data=JSON.parse(a.price);try{var b=e.closest(".product-details").find(".product-info-item .product-realprice"),d=e.closest(".product-details").find(".product-info-item .product-price.discount-price");b.find(".bill").html(data.formattedrealprice.bill);b.find(".cent").html(data.formattedrealprice.cent);d.find(".bill").html(data.formattedfinalprice.bill);d.find(".cent").html(data.formattedfinalprice.cent)}catch(a){c.debug(a.message)}}).fail(function(a){c.debug(a.message)})}};return d});
define ("local_intellicart/intellicart_daterangefilter",["jquery","core/ajax","core/str","core/config","core/log","local_intellicart/flatpickr"],function(a){var b={init:function init(c,d){document.getElementById("daterange").flatpickr({mode:"range",dateFormat:"Y-m-d",defaultDate:[c,d],onReady:function onReady(){jQuery("<div/>",{class:"flatpickr-calendar-title",text:a("#daterange").attr("title")}).appendTo(".flatpickr-calendar")},onChange:function onChange(a){if(2==a.length){b.formsubmit()}}});a(".daterange-clear").click(function(){a("#daterange").val("");b.formsubmit()});a(".search-clear").click(function(){a("input[name=\"search\"]").val("");b.formsubmit()})},formsubmit:function formsubmit(){a("#filter_form").submit()}};return b});
define ("local_intellicart/intellicart_refund",["jquery","core/str","core/modal_factory","core/modal_events","core/templates"],function(a,b,c,d,e){var f={init:function init(){a(".sales-refund").on("click",".refunditemid",function(){f.set_refund()});a(".sales-refund").on("change",".refunditemamount",function(){f.set_refund()});a(".form-refund").on("click",".btn-refund",function(){var g=f.rf_price_format(a(".sales-refund .refundamount").val()),h=a(".sales-refund .refundamount").data("currency"),i=f.rf_price_format(a(".sales-refund .refundamount").data("maxrefund")),j="",k=a(".sales-refund .refundamount").data("reasons"),l={currency:h,amount:g.toFixed(2),refund:g.toFixed(2),paid:i.toFixed(2)};b.get_strings([{key:"confirm",component:"local_intellicart"},{key:"youarerefund",component:"local_intellicart",param:l},{key:"yes",component:"moodle"},{key:"no",component:"moodle"},{key:"refundmoremsg",component:"local_intellicart",param:l}]).then(function(a){j=a[1];if(g>i){j+=" "+a[4]}buttontitle=a[2];return c.create({type:c.types.SAVE_CANCEL,title:a[0],body:e.render("local_intellicart/refund-modal",{message:j,reasons:k,hasreasons:k.length})})}).then(function(b){b.setSaveButtonText(buttontitle);b.getRoot().on(d.hidden,function(){b.setBody("")});b.getRoot().on(d.save,function(b){var c=a(".form-refund"),d=a(".refund-modal-form .refundreason").val();c.find("#refundreason").val(a.trim(d));c.submit();b.preventDefault()});b.show()});return!1})},set_refund:function set_refund(){var b=0,c=0,d=0;maxrefund=f.rf_price_format(a(".form-refund .refundamount").data("maxrefund"));b=f.rf_price_format(a(".form-refund .refundamount").data("diff"));a(".sales-refund .refunditemid:checked").each(function(){d=a(this).closest(".product-refund-select").find(".refunditemamount").val();d=f.rf_price_format(d);c+=d});b=b+c;b=b;if(0>b){b=0}if(b>maxrefund){b=maxrefund}a(".sales-refund .refundamount").val(b.toFixed(2))},rf_price_format:function rf_price_format(a){return parseFloat(a.toString().replace(",","."))}};return f});
define ("local_intellicart/intellicart_product_instructors",["jquery","core/ajax","core/notification"],function(a,b){return{processResults:function processResults(b,c){var d=[];a.each(c,function(a,b){d.push({value:a,label:b})});return d},transport:function transport(a,c,d){promise=b.call([{methodname:"local_intellicart_get_instructors_for_product",args:{searchstring:c}}])[0];promise.done(function(a){var b=JSON.parse(a.instructors);d(b)})}}});
define ("local_intellicart/enrollincourses",["jquery","core/ajax","core/notification"],function(a,b){return{list:function list(a){var c,c=b.call([{methodname:"local_intellicart_get_courses_for_enrollment",args:a}])[0];return c},processResults:function processResults(b,c){var d=[];data=JSON.parse(c.resp)[0];a.each(data,function(a,b){d.push({value:b.id,label:b.name})});return d},transport:function transport(b,c,d){var e=a(b).attr("data-id"),f=a(b).attr("data-category-id"),g=a(b).attr("data-checkout-id");this.list({query:c,id:e,categoryid:f,checkoutid:g}).then(d)}}});
define ("local_intellicart/intellicart_customer_insights",["jquery"],function(a){return{init:function init(){a("#customerInsightsFilter").on("change",function(){a("#customerInsightsFilterForm").submit()});a("#customerInsightsGroupByFilter").on("change",function(){a("#customerInsightsGroupByForm").submit()})}}});
define ("local_intellicart/intellicart_salesfilter",["jquery","core/ajax","core/str","core/config","core/log","local_intellicart/flatpickr"],function(a){var b={init:function init(c,d){document.getElementById("daterange").flatpickr({mode:"range",dateFormat:"Y-m-d",defaultDate:[c,d],onReady:function onReady(){jQuery("<div/>",{class:"flatpickr-calendar-title",text:a("#daterange").attr("title")}).appendTo(".flatpickr-calendar")},onChange:function onChange(a){if(2==a.length){b.formsubmit()}}});a("input[name=\"search\"]").keyup(function(a){if(13==a.keyCode){b.formsubmit()}});a(".daterange-clear").click(function(){a("#daterange").val("");b.formsubmit()});a(".search-clear").click(function(){a("input[name=\"search\"]").val("");b.formsubmit()})},formsubmit:function formsubmit(){a("#filter_form, #groupbyFilterForm").submit()}};return b});
define ("local_intellicart/intellicart_sortable",["jquery","jqueryui","core/ajax","core/log"],function(a,b,c,d){var e={CONTAINER:".intellicart-sortable",SORTABLEAREA:".intellicart-sortable tbody",ITEM:"i.ic-sortable-item",DATAKEY:"icsortableitem",init:function init(){a(e.SORTABLEAREA).sortable({handle:e.ITEM,update:function update(){var b={},c=a(this).closest(e.SORTABLEAREA),d=a(this).closest(e.CONTAINER),f=d.data("icsortablesubject");if(f==void 0){return}e.setOrdering(c,d);b=e.getOrdering(d,c);e.update(f,b,!0)}})},setOrdering:function setOrdering(b,c){var d,f,g=1,h=c.data("use_pages"),j=c.data("currpage"),k=c.data("pagesize");if(h!=void 0&&j!=void 0&&k!=void 0&&h){g=j*k+1}b.find(e.ITEM).each(function(){d=a(this);f=d.data(e.DATAKEY);if(f!=void 0&&f.key!=void 0){f.val=g;d.data(e.DATAKEY,f);g++}})},getOrdering:function getOrdering(b){var c,d,f={};b.find(e.ITEM).each(function(){c=a(this);d=c.data(e.DATAKEY);if(d!=void 0&&d.key!=void 0&&d.val!=void 0){f[d.key]=d.val}});return f},update:function update(a,b,e){c.call([{methodname:"local_intellicart_sortable_update",args:{icmethod:a,data:JSON.stringify(b)}}])[0].done(function(){try{}catch(a){d.debug(a.message)}}).fail(function(a){d.debug(a.message)});if(e){location.reload()}}};return e});
function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}(function(a,b,c){if("function"==typeof define&&define.amd){define ("local_intellicart/jquery.mask",["jquery"],a)}else if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"==typeof Meteor){module.exports=a(require("jquery"))}else{a(b||c)}})(function(a){'use strict';var b=function(b,c,d){var f={invalid:[],getCaret:function getCaret(){try{var a,c=0,d=b.get(0),e=document.selection,g=d.selectionStart;if(e&&-1===navigator.appVersion.indexOf("MSIE 10")){a=e.createRange();a.moveStart("character",-f.val().length);c=a.text.length}else if(g||"0"===g){c=g}return c}catch(a){}},setCaret:function setCaret(a){try{if(b.is(":focus")){var c,d=b.get(0);if(d.setSelectionRange){d.setSelectionRange(a,a)}else{c=d.createTextRange();c.collapse(!0);c.moveEnd("character",a);c.moveStart("character",a);c.select()}}}catch(a){}},events:function events(){b.on("keydown.mask",function(a){b.data("mask-keycode",a.keyCode||a.which);b.data("mask-previus-value",b.val());b.data("mask-previus-caret-pos",f.getCaret());f.maskDigitPosMapOld=f.maskDigitPosMap}).on(a.jMaskGlobals.useInput?"input.mask":"keyup.mask",f.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){b.keydown().keyup()},100)}).on("change.mask",function(){b.data("changed",!0)}).on("blur.mask",function(){if(h!==f.val()&&!b.data("changed")){b.trigger("change")}b.data("changed",!1)}).on("blur.mask",function(){h=f.val()}).on("focus.mask",function(b){if(!0===d.selectOnFocus){a(b.target).select()}}).on("focusout.mask",function(){if(d.clearIfNotMatch&&!j.test(f.val())){f.val("")}})},getRegexMask:function getRegexMask(){for(var a=[],b,d,e,f,h,j,k=0;k<c.length;k++){b=g.translation[c.charAt(k)];if(b){d=b.pattern.toString().replace(/.{1}$|^.{1}/g,"");e=b.optional;f=b.recursive;if(f){a.push(c.charAt(k));h={digit:c.charAt(k),pattern:d}}else{a.push(!e&&!f?d:d+"?")}}else{a.push(c.charAt(k).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))}}j=a.join("");if(h){j=j.replace(new RegExp("("+h.digit+"(.*"+h.digit+")?)"),"($1)?").replace(new RegExp(h.digit,"g"),h.pattern)}return new RegExp(j)},destroyEvents:function destroyEvents(){b.off("input.mask keydown.mask keyup.mask paste.mask drop.mask blur.mask focusout.mask ")},val:function val(a){var c=b.is("input"),d=c?"val":"text",e;if(0<arguments.length){if(b[d]()!==a){b[d](a)}e=b}else{e=b[d]()}return e},calculateCaretPosition:function calculateCaretPosition(a){var c=f.getMasked(),d=f.getCaret();if(a!==c){var e=b.data("mask-previus-caret-pos")||0,g=c.length,h=a.length,j=0,k=0,l=0,m=0,n=0;for(n=d;n<g;n++){if(!f.maskDigitPosMap[n]){break}k++}for(n=d-1;0<=n;n--){if(!f.maskDigitPosMap[n]){break}j++}for(n=d-1;0<=n;n--){if(f.maskDigitPosMap[n]){l++}}for(n=e-1;0<=n;n--){if(f.maskDigitPosMapOld[n]){m++}}if(d>h){d=10*g}else if(e>=d&&e!==h){if(!f.maskDigitPosMapOld[d]){var o=d;d-=m-l;d-=j;if(f.maskDigitPosMap[d]){d=o}}}else if(d>e){d+=l-m;d+=k}}return d},behaviour:function behaviour(c){c=c||window.event;f.invalid=[];var d=b.data("mask-keycode");if(-1===a.inArray(d,g.byPassKeys)){var h=f.getMasked(),i=f.getCaret(),j=b.data("mask-previus-value")||"";setTimeout(function(){f.setCaret(f.calculateCaretPosition(j))},a.jMaskGlobals.keyStrokeCompensation);f.val(h);f.setCaret(i);return f.callbacks(c)}},getMasked:function getMasked(a,b){var e=[],h=b===void 0?f.val():b+"",i=0,j=c.length,k=0,l=h.length,n=1,o="push",p=-1,q=0,r=[],s,t;if(d.reverse){o="unshift";n=-1;s=0;i=j-1;k=l-1;t=function(){return-1<i&&-1<k}}else{s=j-1;t=function(){return i<j&&k<l}}var u;while(t()){var w=c.charAt(i),x=h.charAt(k),y=g.translation[w];if(y){if(x.match(y.pattern)){e[o](x);if(y.recursive){if(-1===p){p=i}else if(i===s&&i!==p){i=p-n}if(s===p){i-=n}}i+=n}else if(x===u){q--;u=void 0}else if(y.optional){i+=n;k-=n}else if(y.fallback){e[o](y.fallback);i+=n;k-=n}else{f.invalid.push({p:k,v:x,e:y.pattern})}k+=n}else{if(!a){e[o](w)}if(x===w){r.push(k);k+=n}else{u=w;r.push(k+q);q++}i+=n}}var z=c.charAt(s);if(j===l+1&&!g.translation[z]){e.push(z)}var A=e.join("");f.mapMaskdigitPositions(A,r,l);return A},mapMaskdigitPositions:function mapMaskdigitPositions(a,b,c){var e=d.reverse?a.length-c:0;f.maskDigitPosMap={};for(var g=0;g<b.length;g++){f.maskDigitPosMap[b[g]+e]=1}},callbacks:function callbacks(a){var e=f.val(),g=e!==h,i=[e,a,b,d],j=function(a,b,c){if("function"==typeof d[a]&&b){d[a].apply(this,c)}};j("onChange",!0==g,i);j("onKeyPress",!0==g,i);j("onComplete",e.length===c.length,i);j("onInvalid",0<f.invalid.length,[e,a,b,f.invalid,d])}};b=a(b);var g=this,h=f.val(),j;c="function"==typeof c?c(f.val(),void 0,b,d):c;g.mask=c;g.options=d;g.remove=function(){var a=f.getCaret();if(g.options.placeholder){b.removeAttr("placeholder")}if(b.data("mask-maxlength")){b.removeAttr("maxlength")}f.destroyEvents();f.val(g.getCleanVal());f.setCaret(a);return b};g.getCleanVal=function(){return f.getMasked(!0)};g.getMaskedVal=function(a){return f.getMasked(!1,a)};g.init=function(e){e=e||!1;d=d||{};g.clearIfNotMatch=a.jMaskGlobals.clearIfNotMatch;g.byPassKeys=a.jMaskGlobals.byPassKeys;g.translation=a.extend({},a.jMaskGlobals.translation,d.translation);g=a.extend(!0,{},g,d);j=f.getRegexMask();if(e){f.events();f.val(f.getMasked())}else{if(d.placeholder){b.attr("placeholder",d.placeholder)}if(b.data("mask")){b.attr("autocomplete","off")}for(var h=0,k=!0,l;h<c.length;h++){l=g.translation[c.charAt(h)];if(l&&l.recursive){k=!1;break}}if(k){b.attr("maxlength",c.length).data("mask-maxlength",!0)}f.destroyEvents();f.events();var m=f.getCaret();f.val(f.getMasked());f.setCaret(m)}};g.init(!b.is("input"))};a.maskWatchers={};var c=function(){var c=a(this),e={},f=c.attr("data-mask");if(c.attr("data-mask-reverse")){e.reverse=!0}if(c.attr("data-mask-clearifnotmatch")){e.clearIfNotMatch=!0}if("true"===c.attr("data-mask-selectonfocus")){e.selectOnFocus=!0}if(d(c,f,e)){return c.data("mask",new b(this,f,e))}},d=function(b,c,d){d=d||{};var e=a(b).data("mask"),f=JSON.stringify,g=a(b).val()||a(b).text();try{if("function"==typeof c){c=c(g)}return"object"!==_typeof(e)||f(e.options)!==f(d)||e.mask!==c}catch(a){}},e=function(a){var b=document.createElement("div"),c;a="on"+a;c=a in b;if(!c){b.setAttribute(a,"return;");c="function"==typeof b[a]}b=null;return c};a.fn.mask=function(c,e){e=e||{};var f=this.selector,g=a.jMaskGlobals,h=g.watchInterval,i=e.watchInputs||g.watchInputs,j=function(){if(d(this,c,e)){return a(this).data("mask",new b(this,c,e))}};a(this).each(j);if(f&&""!==f&&i){clearInterval(a.maskWatchers[f]);a.maskWatchers[f]=setInterval(function(){a(document).find(f).each(j)},h)}return this};a.fn.masked=function(a){return this.data("mask").getMaskedVal(a)};a.fn.unmask=function(){clearInterval(a.maskWatchers[this.selector]);delete a.maskWatchers[this.selector];return this.each(function(){var b=a(this).data("mask");if(b){b.remove().removeData("mask")}})};a.fn.cleanVal=function(){return this.data("mask").getCleanVal()};a.applyDataMask=function(b){b=b||a.jMaskGlobals.maskElements;var d=b instanceof a?b:a(b);d.filter(a.jMaskGlobals.dataMaskAttr).each(c)};var f={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,keyStrokeCompensation:10,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&e("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};a.jMaskGlobals=a.jMaskGlobals||{};f=a.jMaskGlobals=a.extend(!0,{},f,a.jMaskGlobals);if(f.dataMask){a.applyDataMask()}setInterval(function(){if(a.jMaskGlobals.watchDataMask){a.applyDataMask()}},f.watchInterval)},window.jQuery,window.Zepto);
define ("local_intellicart/assigncertificates",["jquery","core/ajax"],function(a,b){return{list:function list(a){var c,c=b.call([{methodname:"local_intellicart_get_certification_assignable_certificates",args:a}])[0];return c},processResults:function processResults(b,c){var d=[];data=JSON.parse(c.resp);a.each(data,function(a,b){d.push({value:b.id,label:b.name})});return d},transport:function transport(b,c,d){var e=a(b).attr("data-id");this.list({query:c,itemid:e}).then(d)}}});
define ("local_intellicart/assignproducts",["jquery","core/ajax","core/notification"],function(a,b){return{list:function list(a){var c,c=b.call([{methodname:"local_intellicart_get_assignable_products",args:a}])[0];return c},processResults:function processResults(b,c){var d=[];data=JSON.parse(c.resp)[0];a.each(data,function(a,b){d.push({value:b.id,label:b.name})});return d},transport:function transport(b,c,d){var e=a(".shopping-cart-formbox .mform input[name=\"id\"]").val(),f=a(".shopping-cart-formbox .mform input[name=\"itemtype\"]").val();this.list({query:c,instanceid:e,type:f}).then(d)}}});
define ("local_intellicart/intellicart_product_categories",["jquery","core/ajax","core/notification"],function(a,b){return{processResults:function processResults(b,c){var d=[];a.each(c,function(a,b){d.push({value:b.id,label:b.name})});return d},transport:function transport(a,c,d){var e=b.call([{methodname:"local_intellicart_product_get_categories",args:{q:c}}])[0];e.done(function(a){d(a)})}}});
define ("local_intellicart/intellicart_session_edit",["jquery","core/modal_factory","core/modal_events","core/str","core/ajax","core/log","core/form-autocomplete"],function(a,b,c,d,e,f,g){var h={form:"form",updaterepeatstatusnot:0,updaterepeatstatuscheck:0,updaterepeatstatusyes:0,selectorproduct:".ic-session-product [name=\"productid\"]",selectorCoursesArea:"#fitem_id_courseid",selectorCourse:"[name=courseid]",selectorBefore:"#fitem_id_description_editor",init:function init(e,f,g,i){h.updaterepeatstatusyes=i;h.updaterepeatstatuscheck=g;h.updaterepeatstatusnot=f;a(h.form).submit(function(f){var g=a(this),i=g.find("[name=updaterepeat]");if(i.val()==h.updaterepeatstatuscheck){f.preventDefault();d.get_strings([{key:(e?"":"ch")+"sessionupdate",component:"local_intellicart"},{key:(e?"":"ch")+"sessionupdatewithrepeatsession",component:"local_intellicart"},{key:(e?"":"ch")+"sessionupdatewithrepeat",component:"local_intellicart"},{key:(e?"":"ch")+"sessionnotupdatewithrepeat",component:"local_intellicart"}]).done(function(a){b.create({type:b.types.SAVE_CANCEL,title:a[0],body:a[1]}).then(function(b){b.setSaveButtonText(a[2]);b.getRoot().find("[data-action=cancel]").text(a[3]);var d=b.getRoot();d.on(c.save,function(){i.val(h.updaterepeatstatusyes);g.submit()});d.on(c.cancel,function(){i.val(h.updaterepeatstatusnot);g.submit()});b.show()})})}});a(h.form).on("change",h.selectorproduct,function(){var b=a(this).data("assigncourse");if(b==void 0||1!=b){return}var c=a(this).val();h.getProductCourses(c)})},getProductCourses:function getProductCourses(b){e.call([{methodname:"local_intellicart_get_product_assigned_courses",args:{productid:b}}])[0].done(function(b){try{var c=a(h.form),d=c.find(h.selectorCourse),e=d.parent(),i=!1,j=null,l=a("<select/>",{name:"courseid"});if(b.courses!=void 0&&b.courses){i=JSON.parse(b.courses)}if(i&&0<Object.keys(i).length){a.each(i,function(b,c){j=new Option(c,b);l.append(a(j))})}e.html("").append(l);g.enhance(h.selectorCourse,!1,!1,"",!1,!0,"")}catch(a){f.debug(a.message)}}).fail(function(a){f.debug(a.message)})}};return h});
define ("local_intellicart/assigncourses",["core/ajax","jquery"],function(a,b){return{processResults:function processResults(a,c){var d=[],e=0,f=(b(a).data("exclude")+"").split(",");for(e=0;e<c.courses.length;e++){if(-1===f.indexOf(c.courses[e].id+"")){d.push({value:c.courses[e].id,label:c.courses[e].displayname})}}return d},transport:function transport(c,d,e,f){var g=b(c),h=g.data("requiredcapabilities");if(""!==h.trim()){h=h.split(",")}else{h=[]}var i=g.data("limittoenrolled"),j=g.data("includefrontpage"),k=g.data("categoryid"),l=null;if("undefined"==typeof d){d=""}var m={criterianame:"search",criteriavalue:d,page:0,perpage:100,limittoenrolled:i,categoryid:k,requiredcapabilities:h},n=[{methodname:"local_intellicart_search_courses",args:m}];if(j){n.push({methodname:"core_course_get_courses",args:{options:{ids:[j]}}})}l=a.call(n);b.when.apply(b.when,l).done(function(a,b){if(b&&1==b.length){var c=b.pop(),f=""===d||-1<c.fullname.toUpperCase().indexOf(d.toUpperCase())||-1<c.shortname.toUpperCase().indexOf(d.toUpperCase());if(f){a.courses.splice(0,0,c)}}e(a)}).fail(f)}}});
define ("local_intellicart/intellicart_invoice_edit",["jquery","local_intellicart/flatpickr"],function(a){return{init:function init(){a(".edit-trial-expiration").on("click",function(){a(".checkout-trialexpiration-area").toggleClass("hidden")});a(".trialexpiration-datepicker").flatpickr({dateFormat:"m/d/Y",onChange:function onChange(){}})}}});
define ("local_intellicart/intellicart_payment",["jquery","core/ajax"],function(a,b){var c={paymentContactsForm:function paymentContactsForm(){a(".payment-form > form input[type=submit]").on("click",function(d){d.preventDefault();a(this).attr("disabled","true");var e=!0,f=a("input[name=contact_from_email]"),g=a("input[name=contact_to_email]");if(!c.isValidateEmail(f.val())){f.addClass("warning");a(this).removeAttr("disabled");e=!1}else{f.removeClass("warning")}if(!c.isValidateEmail(g.val())){g.addClass("warning");a(this).removeAttr("disabled");e=!1}else{g.removeClass("warning")}if(!e){a(this).removeAttr("disabled");return!1}var h={};a(".contacts-form-wrapper .contact-form-item").each(function(b,c){h[a(c).attr("name")]=a(c).val()});var i=b.call([{methodname:"local_intellicart_add_icheckout_notes",args:{checkoutid:a(".contacts-form-wrapper").attr("data-checkoutid"),notes:JSON.stringify(h)}}]);i[0].done(function(){a("input[name=email]").val(f.val());a(".payment-form form").submit()})})},isValidateEmail:function isValidateEmail(a){return /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test((a+"").toLowerCase())}};return c});
function _defineProperty(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}define ("local_intellicart/intellicart_charts",["jquery"],function(a){return{dashboardTotalSales:function dashboardTotalSales(b,c){var e=a("#totalsales").parents(".dashboard-graph-statistic-wrapper");a(e).find(".total-sales").html(c.totalsales);if(c.progress){a(e).find(".total-sales-progress").removeClass("warning");a(e).find(".total-sales-progress").addClass("success");var f="<i class=\"fa fa-arrow-up\"></i> "+c.progressvalue+"%";a(e).find(".total-sales-progress").html(f)}else{a(e).find(".total-sales-progress").removeClass("success warning");if(0!=c.progressvalue){a(e).find(".total-sales-progress").addClass("warning");var f="<i class=\"fa fa-arrow-down\"></i> "+c.progressvalue+"%"}else{var f=c.progressvalue+"%"}a(e).find(".total-sales-progress").html(f)}var g=[["date",c.targetlegend,c.comparelegend]];a.each(b,function(a,b){g.push([b[0],b[1],b[2]])});google.setOnLoadCallback(d);function d(){var b=new google.visualization.arrayToDataTable(g),d=document.getElementById("totalsales");if(d&&c.showchart){a(e).find(".statistic-graphs-nodata").addClass("hidden");a("#totalsales").removeClass("hidden");var f=new google.visualization.LineChart(d);f.draw(b,{legend:{position:"bottom"},vAxis:{gridlines:{color:"#f0f0f0"},minValue:0},series:{0:{color:"#b490e1"},1:{color:"#e3e5ea"}}})}else{a(e).find(".statistic-graphs-nodata").removeClass("hidden");a("#totalsales").addClass("hidden")}}a(window).resize(function(){d()});d()},dashboardAverageOrderValue:function dashboardAverageOrderValue(b,c){var e=a("#averageordervalue").parents(".dashboard-graph-statistic-wrapper");a(e).find(".average-order-value").html(c.averageordervalue);if(c.progress){a(e).find(".average-order-value-progress").removeClass("warning");a(e).find(".average-order-value-progress").addClass("success");var f="<i class=\"fa fa-arrow-up\"></i> "+c.progressvalue+"%";a(e).find(".average-order-value-progress").html(f)}else{a(e).find(".average-order-value-progress").removeClass("success warning");if(0!=c.progressvalue){a(e).find(".average-order-value-progress").addClass("warning");var f="<i class=\"fa fa-arrow-down\"></i> "+c.progressvalue+"%"}else{var f=c.progressvalue+"%"}a(e).find(".average-order-value-progress").html(f)}var g=[["date",c.targetlegend,c.comparelegend]];a.each(b,function(a,b){g.push([b[0],b[1],b[2]])});google.setOnLoadCallback(totalsales);function d(){var b=new google.visualization.arrayToDataTable(g),d=document.getElementById("averageordervalue");if(d&&c.showchart){a(e).find(".statistic-graphs-nodata").addClass("hidden");a("#averageordervalue").removeClass("hidden");var f=new google.visualization.LineChart(d);f.draw(b,{legend:{position:"bottom"},vAxis:{gridlines:{color:"#f0f0f0"},minValue:0},series:{0:{color:"#b490e1"},1:{color:"#e3e5ea"}}})}else{a(e).find(".statistic-graphs-nodata").removeClass("hidden");a("#averageordervalue").addClass("hidden")}}a(window).resize(function(){d()});d()},dashboardTotalOrders:function dashboardTotalOrders(b,c){var e=a("#totalorders").parents(".dashboard-graph-statistic-wrapper");a(e).find(".total-orders").html(c.totalorders);if(c.progress){a(e).find(".total-orders-progress").removeClass("warning");a(e).find(".total-orders-progress").addClass("success");var f="<i class=\"fa fa-arrow-up\"></i> "+c.progressvalue+"%";a(e).find(".total-orders-progress").html(f)}else{a(e).find(".total-orders-progress").removeClass("success warning");if(0!=c.progressvalue){a(e).find(".total-orders-progress").addClass("warning");var f="<i class=\"fa fa-arrow-down\"></i> "+c.progressvalue+"%"}else{var f=c.progressvalue+"%"}a(e).find(".total-orders-progress").html(f)}var g=[["date",c.targetlegend,c.comparelegend]];a.each(b,function(a,b){g.push([b[0],b[1],b[2]])});function d(){var b=new google.visualization.arrayToDataTable(g),d=document.getElementById("totalorders");if(d&&c.showchart){a(e).find(".statistic-graphs-nodata").addClass("hidden");a("#totalorders").removeClass("hidden");var f=new google.visualization.LineChart(d);f.draw(b,{legend:{position:"bottom"},vAxis:{gridlines:{color:"#f0f0f0"},minValue:0},series:{0:{color:"#b490e1"},1:{color:"#e3e5ea"}}})}else{a(e).find(".statistic-graphs-nodata").removeClass("hidden");a("#totalorders").addClass("hidden")}}a(window).resize(function(){d()});d()},dashboardReturningCustomerRating:function dashboardReturningCustomerRating(b,c){var e=a("#returningcustomerrating").parents(".dashboard-graph-statistic-wrapper");a(e).find(".returning-customers-rate").html(c.percent_of_returning_customers);if(c.progress){a(e).find(".returning-customers-rate-progress").removeClass("warning");a(e).find(".returning-customers-rate-progress").addClass("success");var f="<i class=\"fa fa-arrow-up\"></i> "+c.progressvalue+"%";a(e).find(".returning-customers-rate-progress").html(f)}else{a(e).find(".returning-customers-rate-progress").removeClass("success warning");if(0!=c.progressvalue){a(e).find(".returning-customers-rate-progress").addClass("warning");var f="<i class=\"fa fa-arrow-down\"></i> "+c.progressvalue+"%"}else{var f=c.progressvalue+"%"}a(e).find(".returning-customers-rate-progress").html(f)}var g=[["date",c.targetlegend,c.comparelegend]];a.each(b,function(a,b){g.push([b.date,parseInt(b.firsttime),parseInt(b.returning)])});function d(){var b=new google.visualization.arrayToDataTable(g),d=document.getElementById("returningcustomerrating");if(d&&c.showchart){a(e).find(".statistic-graphs-nodata").addClass("hidden");a("#returningcustomerrating").removeClass("hidden");var f=new google.visualization.AreaChart(d);f.draw(b,{legend:{position:"bottom"},vAxis:{gridlines:{color:"#f0f0f0"},minValue:0},series:{0:{color:"#ae89de"},1:{color:"#76cdca"}}})}else{a(e).find(".statistic-graphs-nodata").removeClass("hidden");a("#returningcustomerrating").addClass("hidden")}}a(window).resize(function(){d()});d()},dashboardRegistrationVSEnrollments:function dashboardRegistrationVSEnrollments(b,c){var e=a("#registrationvsenrollments").parents(".dashboard-graph-statistic-wrapper");a(e).find(".registration-vs-enrollments").html(c.number_of_enrolls);if(c.progress){a(e).find(".registration-vs-enrollments-progress").removeClass("warning");a(e).find(".registration-vs-enrollments-progress").addClass("success");var f="<i class=\"fa fa-arrow-up\"></i> "+c.progressvalue+"%";a(e).find(".registration-vs-enrollments-progress").html(f)}else{a(e).find(".registration-vs-enrollments-progress").removeClass("success warning");if(0!=c.progressvalue){a(e).find(".registration-vs-enrollments-progress").addClass("warning");var f="<i class=\"fa fa-arrow-down\"></i> "+c.progressvalue+"%"}else{var f=c.progressvalue+"%"}a(e).find(".registration-vs-enrollments-progress").html(f)}var g=[["date",c.targetlegend,c.comparelegend]];a.each(b,function(a,b){g.push([b[0],parseInt(b[1]),parseInt(b[2])])});function d(){var b=new google.visualization.arrayToDataTable(g),d=document.getElementById("registrationvsenrollments");if(d&&c.showchart){a(e).find(".statistic-graphs-nodata").addClass("hidden");a("#registrationvsenrollments").removeClass("hidden");var f=new google.visualization.AreaChart(d);f.draw(b,{legend:{position:"bottom"},vAxis:{gridlines:{color:"#f0f0f0"},minValue:0},series:{0:{color:"#ae89de"},1:{color:"#76cdca"}}})}else{a(e).find(".statistic-graphs-nodata").removeClass("hidden");a("#registrationvsenrollments").addClass("hidden")}}a(window).resize(function(){d()});d()},dashboardOnlineStoreConversionRate:function dashboardOnlineStoreConversionRate(b){var c=a("#onlinestoreconversionrate").parents(".dashboard-graph-statistic-wrapper");a(c).find(".online-store-conversion-rate").html(b.completed?b.completed:0);b.completedprogressvalue=b.completedprogressvalue?b.completedprogressvalue:0;if(b.completedprogressstatus){a(c).find(".online-store-conversion-rate-progress").removeClass("warning");a(c).find(".online-store-conversion-rate-progress").addClass("success");a(c).find(".online-store-conversion-rate-progress").html("<i class=\"fa fa-arrow-up\"></i> "+b.completedprogressvalue+"%")}else{a(c).find(".online-store-conversion-rate-progress").removeClass("success warning");if(0!=b.completedprogressvalue){a(c).find(".online-store-conversion-rate-progress").addClass("warning");var d="<i class=\"fa fa-arrow-down\"></i> "+b.completedprogressvalue+"%"}else{var d=b.completedprogressvalue+"%"}a(c).find(".online-store-conversion-rate-progress").html(d)}a(c).find(".online-store-conversion-viewed-val").html(b.viewed?b.viewed:0);b.viewedprogressvalue=b.viewedprogressvalue?b.viewedprogressvalue:0;if(b.viewedprogressstatus){a(c).find(".online-store-conversion-viewed-prog").removeClass("warning");a(c).find(".online-store-conversion-viewed-prog").addClass("success");a(c).find(".online-store-conversion-viewed-prog").html("<i class=\"fa fa-arrow-up\"></i> "+b.addedtocartprogressvalue+"%")}else{a(c).find(".online-store-conversion-viewed-prog").removeClass("success warning");if(0!=b.viewedprogressvalue){a(c).find(".online-store-conversion-viewed-prog").addClass("warning");var d="<i class=\"fa fa-arrow-down\"></i> "+b.viewedprogressvalue+"%"}else{var d=b.viewedprogressvalue+"%"}a(c).find(".online-store-conversion-viewed-prog").html(d)}a(c).find(".online-store-conversion-addedtocart-val").html(b.addedtocart?b.addedtocart:0);b.addedtocartprogressvalue=b.addedtocartprogressvalue?b.addedtocartprogressvalue:0;if(b.addedtocartprogressstatus){a(c).find(".online-store-conversion-addedtocart-prog").removeClass("warning");a(c).find(".online-store-conversion-addedtocart-prog").addClass("success");a(c).find(".online-store-conversion-addedtocart-prog").html("<i class=\"fa fa-arrow-up\"></i> "+b.addedtocartprogressvalue+"%")}else{a(c).find(".online-store-conversion-addedtocart-prog").removeClass("success warning");if(0!=b.addedtocartprogressvalue){a(c).find(".online-store-conversion-addedtocart-prog").addClass("warning");var d="<i class=\"fa fa-arrow-down\"></i> "+b.addedtocartprogressvalue+"%"}else{var d=b.addedtocartprogressvalue+"%"}a(c).find(".online-store-conversion-addedtocart-prog").html(d)}a(c).find(".online-store-conversion-reachedcheckout-val").html(b.reachedcheckout?b.reachedcheckout:0);b.reachedcheckoutprogressvalue=b.reachedcheckoutprogressvalue?b.reachedcheckoutprogressvalue:0;if(b.reachedcheckoutprogressstatus){a(c).find(".online-store-conversion-reachedcheckout-prog").removeClass("warning");a(c).find(".online-store-conversion-reachedcheckout-prog").addClass("success");a(c).find(".online-store-conversion-reachedcheckout-prog").html("<i class=\"fa fa-arrow-up\"></i> "+b.reachedcheckoutprogressvalue+"%")}else{a(c).find(".online-store-conversion-reachedcheckout-prog").removeClass("success warning");if(0!=b.reachedcheckoutprogressvalue){c.find(".online-store-conversion-reachedcheckout-prog").addClass("warning");var d="<i class=\"fa fa-arrow-down\"></i> "+b.reachedcheckoutprogressvalue+"%"}else{var d=b.reachedcheckoutprogressvalue+"%"}a(c).find(".online-store-conversion-reachedcheckout-prog").html(d)}},report6:function report6(b,c){for(var e=[[c.column0,c.column1,c.column2]],f=0;f<b.length;f++){e.push([b[f].date,+b[f].firsttime,+b[f].returning_data])}function d(){var a,b=google.visualization.arrayToDataTable(e),d=(a={chartArea:{width:"95%",right:0,top:10},isStacked:!0,curveType:"function",height:500,hAxis:{format:"dd MMM",gridlines:{color:"none"},title:c.xtitle},vAxis:{minValue:0,logScale:!1,title:c.ytitle},backgroundColor:{fill:"transparent"},legend:{position:"none"},pointSize:5},_defineProperty(a,"legend",{position:"bottom"}),_defineProperty(a,"series",{0:{color:"#B492E4"},1:{color:"#7AD1CE"}}),a),f=new google.visualization.ColumnChart(document.getElementById("main_graph_container"));if(1<e.length){f.draw(b,d)}}a(window).resize(function(){d()});d()},report7:function report7(b,c){for(var e=[[c.column0,c.column1,c.column2]],f=0;f<b.length;f++){e.push([b[f].date,+b[f].firsttime,+b[f].returning_data])}function d(){var a,b=google.visualization.arrayToDataTable(e),d=(a={chartArea:{width:"95%",right:0,top:10},isStacked:!0,curveType:"function",height:500,hAxis:{format:"dd MMM",gridlines:{color:"none"},title:c.xtitle},vAxis:{title:c.ytitle,minValue:0,logScale:!1},backgroundColor:{fill:"transparent"},legend:{position:"none"},pointSize:5},_defineProperty(a,"legend",{position:"bottom"}),_defineProperty(a,"series",{0:{color:"#B492E4"},1:{color:"#7AD1CE"}}),a),f=new google.visualization.ColumnChart(document.getElementById("main_graph_container"));if(1<e.length){f.draw(b,d)}}a(window).resize(function(){d()});d()},report10:function report10(b,c){for(var e=[[c.column0,c.column1]],f=0;f<b.length;f++){e.push([b[f].date,+b[f].totalsales])}function d(){var a=google.visualization.arrayToDataTable(e),b={chartArea:{width:"95%",right:0,top:10},isStacked:!0,curveType:"function",height:500,hAxis:{format:"dd MMM",gridlines:{color:"none"},title:c.xtitle},vAxis:{title:c.ytitle,minValue:0,logScale:!1},backgroundColor:{fill:"transparent"},legend:{position:"none"},pointSize:5,series:{0:{color:"#B492E4"}}},d=new google.visualization.ColumnChart(document.getElementById("main_graph_container"));if(1<e.length){d.draw(a,b)}}a(window).resize(function(){d()});d()},report11:function report11(b,c){for(var e=[[c.column0,c.column1]],f=0;f<b.length;f++){e.push([b[f].date,+b[f].averageordervalue])}function d(){var a=google.visualization.arrayToDataTable(e),b={chartArea:{width:"95%",right:0,top:10},isStacked:!0,curveType:"function",height:500,hAxis:{format:"dd MMM",gridlines:{color:"none"},title:c.xtitle},vAxis:{title:c.ytitle,minValue:0,logScale:!1},backgroundColor:{fill:"transparent"},legend:{position:"none"},pointSize:5,series:{0:{color:"#B492E4"}}},d=new google.visualization.ColumnChart(document.getElementById("main_graph_container"));if(1<e.length){d.draw(a,b)}}a(window).resize(function(){d()});d()},report12:function report12(b,c){for(var e=[[c.column0,c.column1]],f=0;f<b.length;f++){e.push([b[f].date,+b[f].purchasepercent])}function d(){var a,b=google.visualization.arrayToDataTable(e),d=(a={chartArea:{width:"95%",right:0,top:10},isStacked:!0,curveType:"function",height:500,hAxis:{format:"dd MMM",gridlines:{color:"none"},title:c.xtitle},vAxis:{title:c.ytitle,minValue:0,logScale:!1},backgroundColor:{fill:"transparent"},legend:{position:"none"},pointSize:5},_defineProperty(a,"legend",{position:"bottom"}),_defineProperty(a,"series",{0:{color:"#B492E4"},1:{color:"#7AD1CE"}}),a),f=new google.visualization.ColumnChart(document.getElementById("main_graph_container"));if(1<e.length){f.draw(b,d)}}a(window).resize(function(){d()});d()}}});
define ("local_intellicart/intellicart_repository",["core/ajax","core/notification"],function(a,b){return{query:function query(c){var d=a.call([{methodname:"local_intellicart_get_intellicart_products",args:c}])[0];d.fail(b.exception);return d},countProducts:function countProducts(c){var d=a.call([{methodname:"local_intellicart_get_intellicart_products_count",args:c}])[0];d.fail(b.exception);return d},deleteItem:function deleteItem(c){var d=a.call([{methodname:"local_intellicart_delete_intellicart_product",args:{id:c}}])[0];d.fail(b.exception);return d}}});
define ("local_intellicart/assigncertifications",["jquery","core/ajax","core/notification"],function(a,b){return{list:function list(a){var c,c=b.call([{methodname:"local_intellicart_get_assignable_certifications",args:a}])[0];return c},processResults:function processResults(b,c){var d=[];data=JSON.parse(c.resp);a.each(data,function(a,b){d.push({value:b.id,label:b.fullname})});return d},transport:function transport(b,c,d){var e=a(b).attr("data-id");this.list({query:c,instanceid:e}).then(d)}}});
define ("local_liquidus/main",["jquery","core/log","local_liquidus/router"],function(a,b,c){var d=function(a){if(!a.trackerId){return}if(a.staticShares&&a.staticShares.plugins&&"undefined"!=typeof localLiquidusCurrentPlugins){a.staticShares.plugins=localLiquidusCurrentPlugins}if(a.staticShares&&a.staticShares.userRole&&"undefined"!=typeof localLiquidusUserRole){a.staticShares.userRole=localLiquidusUserRole}require(["local_liquidus/"+a.trackerId+"-lazy"],function(d){b.debug("Loaded "+a.trackerId+" tracker. Initializing.");d.loadTracker(a).done(function(){c.registerTracker(d)})})},e=function(a,e){b.debug("Loading Liquidus.");c.init(e);b.debug(a);for(var f in a){d(a[f])}};return{init:function init(a,b){return new e(a,b)}}});
define ("local_liquidus/router",["jquery","core/log","core/ajax","core/notification"],function(a,b,c,d){var e=this;e.trackers=[];e.registerTracker=function(a){b.debug("Registering tracker "+a.trackerInfo.trackerId);e.trackers.push(a);a.identify();a.trackPage();if(a.heartBeat){setInterval(a.heartBeat,1e4)}};e.init=function(){var a=c.call([{methodname:"local_liquidus_event_definition",args:{}}]);a[0].done(function(a){e.addEventTracking(a)}).fail(function(a){d.exception(a)})};e.addEventTracking=function(c){if(!c||0===c.length){return}b.debug("Adding event tracking for:");b.debug(c);for(var d in c){var f=c[d];b.debug("Looking for selector: "+f.testselector);if(a(f.testselector).length){e.processDefinition(f)}}};e.processDefinition=function(c){b.debug("Adding event handling for custom event: "+c.selector+" -> "+c.event);a(c.selector).on(c.event,function(f){f.preventDefault();b.debug("Tracking custom event: "+c.selector+" -> "+c.event);var g={};for(var h in c.data){var d=c.data[h];b.debug("Looking for "+d.selector+"value.");if("input"===d.type){g[d.name]=a(d.selector).val()}}b.debug("Got these values:");b.debug(g);var i=[];for(var j in e.trackers){var k=a.Deferred();i.push(k);e.trackers[j].processEvent(k,c.name,g)}a.when.apply(a,i).then(function(){b.debug("Processed all trackers, proceeding with event.");a(c.selector).off(c.event);a(c.selector).trigger(c.event)})})};return{init:e.init,registerTracker:e.registerTracker}});
define('local_mr/formautosubmit', ["jquery"],function(a){var b=function(b){var c=a(b.target).closest("select.autosubmit");if(c){var d=c.closest("form");d&&d.submit()}};return{init:function(c){var d=c.selectid,e=a("#"+d);e&&e.change(b)}}});
define ("local_pld/enrol_courses_recreate",["jquery","core/form-autocomplete","core/ajax","core/log","core/url","core/templates","local_pld/form-formattedcourse-selector"],function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o=!0,p=function(b){var d=parseInt(a("input[name=\"temp_roleid\"]").val());d=0<d?d:0;var e={criterianame:"id",criteriavalue:b,page:0,perpage:100,roleid:d},f=c.call([{methodname:"local_pld_search_courses",args:e}]);return f[0]},q=function(){b.enhance(h,i,j,k,l,m,n)},r=function(){return a("<img/>").attr("src",e.imageUrl("i/loading_small")).addClass("spinner").addClass("smallicon")};return{init:function init(){document.addEventListener("local_pld_enrol_triggered",function(b){g.listener();var c=b.detail.selectedCourse;if(o){o=!1;if(c){var e=a(h).siblings(".form-autocomplete-selection").children().not(".accesshide"),f=e.text();e.text("");var i=r();e.append(i);var j=p(c);j.done(function(b){if(1===b.courses.length){var d=c+" - "+b.courses[0].displayname;a("select"+h).append("<option value=\""+c+"\" selected>"+d+"</option>");e.addClass("tag").addClass("tag-info").data("value",c).attr("role","listitem").attr("style","font-size: 100%").text(d);g.updateForm(b.courses[0])}else{e.text(f)}i.remove()}).fail(function(a){d.debug(a);q();i.remove()})}else{a(h).siblings(".d-inline-block").remove();a(h).siblings(".spinner.smallicon").remove();a(h).siblings(".form-autocomplete-selection").remove();q()}}else{var i=r();a(".form-autocomplete-selection").parent().append(i);a(h).siblings(".d-inline-block").remove();a(h).siblings(".spinner.smallicon").remove();a(h).siblings(".form-autocomplete-selection").remove();if(c){var j=p(c);j.done(function(b){if(1===b.courses.length){var d=c+" - "+b.courses[0].displayname;a("select"+h).append("<option value=\""+c+"\" selected>"+d+"</option>");g.updateForm(b.courses[0])}q();i.remove()}).fail(function(a){d.debug(a);q();i.remove()})}else{q();i.remove()}}})},setCurrent:function setCurrent(a){h=a.selector;i=a.tags;j=a.ajax;k=a.placeholder;l=a.casesensitive;m=a.showsuggestions;n=a.noselectionstring}}});
function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("local_pld/form-formattedcourse-selector",["core/ajax","jquery"],function(a,b){var c,d=function(){b("#id_pld_enrol_courses").change(function(){var a=b(this).val();if(_typeof(a)!=="undefined"&&!1!==a){b.each(c,function(b,c){if(c.id==a){e(c)}})}})},e=function(a){var c=b("#role_form_contaniner"),d=b("#id_roletoassign");if(1==d.length){var e=b("input[name=\"temp_roleid\"]").val(),f=b(b.parseHTML(a.possibleroles));d.replaceWith(f);if(0<e){b("#id_roletoassign").val(e)}c.show()}var g=b("select[name=\"startdate\"] option[value=\"2\"]");if(0<g.length){g.remove()}var h=b("select[name=\"duration\"] option[value=\"-1\"]");if(0<h.length){h.remove()}var i=b(b.parseHTML(a.html));if(0!=a.startdate){b("select[name=\"startdate\"]").prepend(i.find("option[value=\"2\"]").prop("outerHTML"))}if(0!=a.enddate){b("select[name=\"duration\"]").prepend(i.find("option[value=\"-1\"]").prop("outerHTML"))}b("input[name=\"courseenddate\"]").val(a.enddate)};return{listener:function listener(){d()},processResults:function processResults(a,c){var d=[],e=0,f=(b(a).data("exclude")+"").split(","),g=(b(a).data("resultformat")+"").split(",");for(e=0;e<c.courses.length;e++){if(-1===f.indexOf(c.courses[e].id+"")){d.push({value:c.courses[e].id,category:c.courses[e].categoryname?c.courses[e].categoryname:"",displayname:c.courses[e].displayname,label:(-1!=g.indexOf("showcat")?c.courses[e].categoryname?c.courses[e].categoryname+" - ":"":"")+(-1!=g.indexOf("showid")?c.courses[e].id+" - ":"")+c.courses[e].displayname})}}if(-1!=g.indexOf("sortbyid")){d=d.sort(function(c,a){var b=c.value,d=a.value;if(b>d){return 1}else if(b<d){return-1}else{return 0}})}else if(-1!=g.indexOf("sortbycategory")){d=d.sort(function(c,a){var b=c.category,d=a.category,e=b.localeCompare(d);if(0==e){e=c.displayname.localeCompare(a.displayname)}return e})}else if(-1!=g.indexOf("sortbydisplayname")){d=d.sort(function(c,a){var b=c.displayname,d=a.displayname;return b.localeCompare(d)})}return d},transport:function transport(d,e,f,g){var h=b(d),i=new CustomEvent("course_transport_triggered",{detail:{selector:d}});document.dispatchEvent(i);var j=h.data("requiredcapabilities");if(""!==j.trim()){j=j.split(",")}else{j=[]}var k=h.data("includefrontpage"),l=null;if("undefined"==typeof e){e=""}var m={criterianame:"search",criteriavalue:e,page:0,perpage:100,roleid:0},n=[{methodname:"local_pld_search_courses",args:m}];if(k){n.push({methodname:"core_course_get_courses",args:{options:{ids:[k]}}})}l=a.call(n);b.when.apply(b.when,l).done(function(a,b){if(b&&1==b.length){var d=b.pop(),g=""===e||-1<d.fullname.toUpperCase().indexOf(e.toUpperCase())||-1<d.shortname.toUpperCase().indexOf(e.toUpperCase());if(g){a.courses.splice(0,0,d)}}c=a.courses;f(a)}).fail(g)},updateForm:function updateForm(a){e(a)}}});
define ("local_pld/html_editor",["jquery","core/yui","core/notification","core/templates","core/fragment"],function(a,b,c,d,e){window.onbeforeunload=null;var f=function(b){if(b===void 0){b=""}var c={emailBody:b};e.loadFragment("local_pld","htmleditor",a("#pld_contextid").val(),c).done(function(b,c){d.replaceNodeContents(a("#txtActionEmailBody"),b,c)})};return{init:function init(){a("#btnActionAdd").click(function(){if("2"==a("#menuActionType").val()){f()}});a(document).on("editActionEmail",function(a,b){f(b)})}}});
define ("forumreport_summary/filters",["exports","jquery","core/popper","core/custom_interaction_events","forumreport_summary/selectors","core/yui","core/ajax","core/key_codes"],function(a,b,c,d,e,f,g,h){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;b=i(b);c=i(c);d=i(d);e=i(e);f=i(f);g=i(g);h=i(h);function i(a){return a&&a.__esModule?a:{default:a}}var j=function(a){var i=(0,b.default)(a);(0,b.default)(document).ready(function(){(0,b.default)(".loading-icon").hide();(0,b.default)("#summaryreport").removeClass("hidden")});var j=function(a,b){var c=document.forms.filtersform.action,d;if(a){a.preventDefault();var e=c.split("?"),f=e[1],g=b.split("&"),h="",i=[],j=[];f.split("&").forEach(function(a){var b=a.split("=");i.push(b[0]);j.push(b[1])});g.forEach(function(a){var b=a.split("="),c=i.indexOf(b[0]);if(-1<c){j[c]=b[1]}else{i.push(b[0]);j.push(b[1])}});i.forEach(function(a,b){h+="&".concat(a,"=").concat(j[b])});d=e[0]+"?"+h.substr(1)}else{d=c}document.forms.filtersform.action=d;document.forms.filtersform.submit()};(0,b.default)(".resettable").on("click","a",function(a){j(a,a.target.search.substr(1))});(0,b.default)("thead").on("click","a",function(a){j(a,a.target.search.substr(1))});(0,b.default)(".pagination").on("click","a",function(a){j(a,a.target.search.substr(1))});if(document.forms.selectperpage){document.forms.selectperpage.onsubmit=function(a){var b="perpage="+document.forms.selectperpage.elements.perpage.value;j(a,b)}}var k=document.getElementById("summaryreport").querySelector("form.dataformatselector");if(k){k.onsubmit=function(a){var b=k.querySelector("#downloadtype_download").value,c="download=".concat(b),d=document.forms.filtersform.action;j(a,c);document.forms.filtersform.action=d}}var l=function(a){f.default.use("moodle-core-formchangechecker",function(){M.core_formchangechecker.reset_form_dirty_state()});(0,b.default)(a).addClass("hidden");j(!1)},m=function(a){var b=document.querySelector(a),d=document.querySelector(e.default.filters.date.calendar);d.style.removeProperty("z-index");new c.default(b,d,{placement:"bottom"})},n=function(a,b){b.classList.add("hidden");b.setAttribute("data-openfilter","false");a.classList.add("btn-primary");a.classList.remove("btn-outline-primary");a.setAttribute("aria-expanded",!1)};i.on(d.default.events.activate,e.default.filters.group.selectall,function(){var b=a.querySelectorAll(e.default.filters.group.checkbox+":not(:checked)");b.forEach(function(a){a.checked=!0})});i.on(d.default.events.activate,e.default.filters.group.clear,function(){var b=a.querySelectorAll(e.default.filters.group.checkbox+":checked");b.forEach(function(a){a.checked=!1})});i.on(d.default.events.activate,e.default.filters.group.trigger,function(){var b=a.querySelector(e.default.filters.group.trigger),d=a.querySelector(e.default.filters.group.popover);new c.default(b,d,{placement:"bottom"});d.classList.remove("hidden");d.setAttribute("data-openfilter","true");b.classList.add("btn-outline-primary");b.classList.remove("btn-primary");b.setAttribute("aria-expanded",!0);var f=function(a){if(a.target.id!==b.id&&d!==a.target.closest("[data-openfilter=\"true\"]")&&("undefined"==typeof a.keyCode||a.keyCode===h.default.enter||a.keyCode===h.default.space)){n(b,d);document.removeEventListener("click",f);document.removeEventListener("keyup",f);document.removeEventListener("keyup",g)}};document.addEventListener("click",f);document.addEventListener("keyup",f);var g=function(a){if(a.keyCode===h.default.escape){n(b,d);document.removeEventListener("keyup",g);document.removeEventListener("click",f)}};document.addEventListener("keyup",g)});i.on(d.default.events.activate,e.default.filters.group.save,function(){var b=a.querySelectorAll(e.default.filters.group.checkbox);b.forEach(function(a){var b=document.forms.filtersform,c=a.getAttribute("data-saveid");b.querySelector("#".concat(c)).checked=a.checked});l("#filter-groups-popover")});document.querySelectorAll(e.default.filters.exportlink.link).forEach(function(a){a.addEventListener("click",function(a){document.forms.exportlinkform.action=a.target.dataset.url;document.forms.exportlinkform.submit()})});i.on(d.default.events.activate,e.default.filters.date.trigger,function(){var b=a.querySelector(e.default.filters.date.trigger),d=a.querySelector(e.default.filters.date.popover);new c.default(b,d,{placement:"bottom"});d.classList.remove("hidden");d.setAttribute("data-openfilter","true");d.querySelector("[name=\"filterdatefrompopover[enabled]\"]").focus();b.classList.add("btn-outline-primary");b.classList.remove("btn-primary");b.setAttribute("aria-expanded",!0);var f=function(a){if(a.target.id!==b.id&&d!==a.target.closest("[data-openfilter=\"true\"]")&&("undefined"==typeof a.keyCode||a.keyCode===h.default.enter||a.keyCode===h.default.space)){n(b,d);document.removeEventListener("click",f);document.removeEventListener("keyup",f);document.removeEventListener("keyup",g)}};document.addEventListener("click",f);document.addEventListener("keyup",f);var g=function(a){if(a.keyCode===h.default.escape){n(b,d);document.removeEventListener("keyup",g);document.removeEventListener("click",f)}};document.addEventListener("keyup",g)});i.on(d.default.events.activate,e.default.filters.date.save,function(){var b=document.forms.filtersform,c=a.querySelector(e.default.filters.date.popover),d=c.querySelector("[name=\"filterdatefrompopover[enabled]\"]").checked?1:0,f=c.querySelector("[name=\"filterdatetopopover[enabled]\"]").checked?1:0;if(!d&&!f){b.elements["datefrom[timestamp]"].value=0;b.elements["datefrom[enabled]"].value=d;b.elements["dateto[timestamp]"].value=0;b.elements["dateto[enabled]"].value=f;l("#filter-dates-popover")}else{var h={data:[]};if(d){h.data.push({key:"from",year:c.querySelector("[name=\"filterdatefrompopover[year]\"]").value,month:c.querySelector("[name=\"filterdatefrompopover[month]\"]").value,day:c.querySelector("[name=\"filterdatefrompopover[day]\"]").value,hour:0,minute:0})}if(f){h.data.push({key:"to",year:c.querySelector("[name=\"filterdatetopopover[year]\"]").value,month:c.querySelector("[name=\"filterdatetopopover[month]\"]").value,day:c.querySelector("[name=\"filterdatetopopover[day]\"]").value,hour:23,minute:59})}g.default.call([{methodname:"core_calendar_get_timestamps",args:h}])[0].done(function(a){var c=0,e=0;a.timestamps.forEach(function(a){if("from"===a.key){c=a.timestamp}else if("to"===a.key){e=a.timestamp}});if(0<e&&c>e){var g=document.getElementById("dates-filter-warning");g.classList.remove("hidden");g.classList.add("d-block")}else{b.elements["datefrom[timestamp]"].value=c;b.elements["datefrom[enabled]"].value=d;b.elements["dateto[timestamp]"].value=e;b.elements["dateto[enabled]"].value=f;l("#filter-dates-popover")}})}});i.on(d.default.events.activate,e.default.filters.date.calendariconfrom,function(){m(e.default.filters.date.calendariconfrom)});i.on(d.default.events.activate,e.default.filters.date.calendariconto,function(){m(e.default.filters.date.calendariconto)})};a.init=j});
define ("forumreport_summary/selectors",["exports"],function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;a.default={filters:{group:{checkbox:"[data-region=\"filter-groups\"] input[type=\"checkbox\"]",clear:"[data-region=\"filter-groups\"] .filter-clear",popover:"#filter-groups-popover",save:"[data-region=\"filter-groups\"] .filter-save",selectall:"[data-region=\"filter-groups\"] .select-all",trigger:"#filter-groups-button"},date:{calendar:"#dateselector-calendar-panel",calendariconfrom:"#id_filterdatefrompopover_calendar",calendariconto:"#id_filterdatetopopover_calendar",popover:"#filter-dates-popover",save:"[data-region=\"filter-dates\"] .filter-save",trigger:"#filter-dates-button"},exportlink:{link:"#summaryreport #forumreport_summary_table button.export-link"}}};return a.default});
